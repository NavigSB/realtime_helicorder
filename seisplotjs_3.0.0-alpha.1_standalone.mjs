var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __require = /* @__PURE__ */ ((x4) => typeof require !== "undefined" ? require : typeof Proxy !== "undefined" ? new Proxy(x4, {
  get: (a3, b) => (typeof require !== "undefined" ? require : a3)[b]
}) : x4)(function(x4) {
  if (typeof require !== "undefined")
    return require.apply(this, arguments);
  throw new Error('Dynamic require of "' + x4 + '" is not supported');
});
var __commonJS = (cb, mod) => function __require2() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};

// node_modules/oregondsp/kotlin/kotlin-kotlin-stdlib-js-ir.js
var require_kotlin_kotlin_stdlib_js_ir = __commonJS({
  "node_modules/oregondsp/kotlin/kotlin-kotlin-stdlib-js-ir.js"(exports, module) {
    if (typeof ArrayBuffer.isView === "undefined") {
      ArrayBuffer.isView = function(a3) {
        return a3 != null && a3.__proto__ != null && a3.__proto__.__proto__ === Int8Array.prototype.__proto__;
      };
    }
    if (typeof Math.clz32 === "undefined") {
      Math.clz32 = function(log4, LN2) {
        return function(x4) {
          var asUint = x4 >>> 0;
          if (asUint === 0) {
            return 32;
          }
          return 31 - (log4(asUint) / LN2 | 0) | 0;
        };
      }(Math.log, Math.LN2);
    }
    (function() {
      if (typeof globalThis === "object")
        return;
      Object.defineProperty(Object.prototype, "__magic__", { get: function() {
        return this;
      }, configurable: true });
      __magic__.globalThis = __magic__;
      delete Object.prototype.__magic__;
    })();
    if (typeof Math.imul === "undefined") {
      Math.imul = function imul(a3, b) {
        return (a3 & 4294901760) * (b & 65535) + (a3 & 65535) * (b | 0) | 0;
      };
    }
    (function(root3, factory) {
      if (typeof define === "function" && define.amd)
        define(["exports"], factory);
      else if (typeof exports === "object")
        factory(module.exports);
      else
        root3["kotlin-kotlin-stdlib-js-ir"] = factory(typeof this["kotlin-kotlin-stdlib-js-ir"] === "undefined" ? {} : this["kotlin-kotlin-stdlib-js-ir"]);
    })(exports, function(_) {
      "use strict";
      var imul = Math.imul;
      var clz32 = Math.clz32;
      var isView = ArrayBuffer.isView;
      Exception.prototype = Object.create(Error.prototype);
      Exception.prototype.constructor = Exception;
      RuntimeException.prototype = Object.create(Exception.prototype);
      RuntimeException.prototype.constructor = RuntimeException;
      KotlinNothingValueException.prototype = Object.create(RuntimeException.prototype);
      KotlinNothingValueException.prototype.constructor = KotlinNothingValueException;
      Level.prototype = Object.create(Enum.prototype);
      Level.prototype.constructor = Level;
      AbstractList.prototype = Object.create(AbstractCollection.prototype);
      AbstractList.prototype.constructor = AbstractList;
      SubList.prototype = Object.create(AbstractList.prototype);
      SubList.prototype.constructor = SubList;
      ListIteratorImpl.prototype = Object.create(IteratorImpl.prototype);
      ListIteratorImpl.prototype.constructor = ListIteratorImpl;
      function callsInPlace$default(lambda, kind, $mask0, $handler) {
        if (!(($mask0 & 2) === 0))
          kind = InvocationKind_UNKNOWN_getInstance();
        return $handler == null ? this.callsInPlace_jmp6z0_k$(lambda, kind) : $handler(lambda, kind);
      }
      InvocationKind.prototype = Object.create(Enum.prototype);
      InvocationKind.prototype.constructor = InvocationKind;
      function plus(context) {
        var tmp;
        if (context === EmptyCoroutineContext_getInstance()) {
          tmp = this;
        } else {
          tmp = context.fold_6dbyow_k$(this, CoroutineContext$plus$lambda());
        }
        return tmp;
      }
      function get3(key) {
        var tmp;
        if (equals(this.get_key_18j28a_k$(), key)) {
          tmp = isInterface(this, Element2) ? this : THROW_CCE();
        } else {
          tmp = null;
        }
        return tmp;
      }
      function fold(initial, operation) {
        return operation(initial, this);
      }
      function minusKey(key) {
        return equals(this.get_key_18j28a_k$(), key) ? EmptyCoroutineContext_getInstance() : this;
      }
      function releaseInterceptedContinuation(continuation) {
      }
      function get_0(key) {
        if (key instanceof AbstractCoroutineContextKey) {
          var tmp;
          if (key.isSubKey_5an70z_k$(this.get_key_18j28a_k$())) {
            var tmp_0 = key.tryCast_hqzvw1_k$(this);
            tmp = (!(tmp_0 == null) ? isInterface(tmp_0, Element2) : false) ? tmp_0 : null;
          } else {
            tmp = null;
          }
          return tmp;
        }
        var tmp_1;
        if (Key_getInstance() === key) {
          tmp_1 = isInterface(this, Element2) ? this : THROW_CCE();
        } else {
          tmp_1 = null;
        }
        return tmp_1;
      }
      function minusKey_0(key) {
        if (key instanceof AbstractCoroutineContextKey) {
          return (key.isSubKey_5an70z_k$(this.get_key_18j28a_k$()) ? !(key.tryCast_hqzvw1_k$(this) == null) : false) ? EmptyCoroutineContext_getInstance() : this;
        }
        return Key_getInstance() === key ? EmptyCoroutineContext_getInstance() : this;
      }
      CoroutineSingletons.prototype = Object.create(Enum.prototype);
      CoroutineSingletons.prototype.constructor = CoroutineSingletons;
      RequireKotlinVersionKind.prototype = Object.create(Enum.prototype);
      RequireKotlinVersionKind.prototype.constructor = RequireKotlinVersionKind;
      Default.prototype = Object.create(Random.prototype);
      Default.prototype.constructor = Default;
      XorWowRandom.prototype = Object.create(Random.prototype);
      XorWowRandom.prototype.constructor = XorWowRandom;
      KVariance.prototype = Object.create(Enum.prototype);
      KVariance.prototype.constructor = KVariance;
      Error_0.prototype = Object.create(Error.prototype);
      Error_0.prototype.constructor = Error_0;
      NotImplementedError.prototype = Object.create(Error_0.prototype);
      NotImplementedError.prototype.constructor = NotImplementedError;
      function contains(value) {
        return compareTo_0(value, this.get_start_iypx6h_k$()) >= 0 ? compareTo_0(value, this.get_endInclusive_r07xpi_k$()) <= 0 : false;
      }
      function isEmpty() {
        return compareTo_0(this.get_start_iypx6h_k$(), this.get_endInclusive_r07xpi_k$()) > 0;
      }
      UIntRange.prototype = Object.create(UIntProgression.prototype);
      UIntRange.prototype.constructor = UIntRange;
      ULongRange.prototype = Object.create(ULongProgression.prototype);
      ULongRange.prototype.constructor = ULongRange;
      DeprecationLevel.prototype = Object.create(Enum.prototype);
      DeprecationLevel.prototype.constructor = DeprecationLevel;
      IntProgressionIterator.prototype = Object.create(IntIterator.prototype);
      IntProgressionIterator.prototype.constructor = IntProgressionIterator;
      CharProgressionIterator.prototype = Object.create(CharIterator.prototype);
      CharProgressionIterator.prototype.constructor = CharProgressionIterator;
      LongProgressionIterator.prototype = Object.create(LongIterator.prototype);
      LongProgressionIterator.prototype.constructor = LongProgressionIterator;
      IntRange.prototype = Object.create(IntProgression.prototype);
      IntRange.prototype.constructor = IntRange;
      CharRange.prototype = Object.create(CharProgression.prototype);
      CharRange.prototype.constructor = CharRange;
      LongRange.prototype = Object.create(LongProgression.prototype);
      LongRange.prototype.constructor = LongRange;
      AnnotationTarget.prototype = Object.create(Enum.prototype);
      AnnotationTarget.prototype.constructor = AnnotationTarget;
      AnnotationRetention.prototype = Object.create(Enum.prototype);
      AnnotationRetention.prototype.constructor = AnnotationRetention;
      AbstractMutableCollection.prototype = Object.create(AbstractCollection.prototype);
      AbstractMutableCollection.prototype.constructor = AbstractMutableCollection;
      ListIteratorImpl_0.prototype = Object.create(IteratorImpl_0.prototype);
      ListIteratorImpl_0.prototype.constructor = ListIteratorImpl_0;
      AbstractMutableList.prototype = Object.create(AbstractMutableCollection.prototype);
      AbstractMutableList.prototype.constructor = AbstractMutableList;
      SubList_0.prototype = Object.create(AbstractMutableList.prototype);
      SubList_0.prototype.constructor = SubList_0;
      ArrayList.prototype = Object.create(AbstractMutableList.prototype);
      ArrayList.prototype.constructor = ArrayList;
      NodeJsOutput.prototype = Object.create(BaseOutput.prototype);
      NodeJsOutput.prototype.constructor = NodeJsOutput;
      BufferedOutput.prototype = Object.create(BaseOutput.prototype);
      BufferedOutput.prototype.constructor = BufferedOutput;
      BufferedOutputToConsoleLog.prototype = Object.create(BufferedOutput.prototype);
      BufferedOutputToConsoleLog.prototype.constructor = BufferedOutputToConsoleLog;
      PrimitiveKClassImpl.prototype = Object.create(KClassImpl.prototype);
      PrimitiveKClassImpl.prototype.constructor = PrimitiveKClassImpl;
      NothingKClassImpl.prototype = Object.create(KClassImpl.prototype);
      NothingKClassImpl.prototype.constructor = NothingKClassImpl;
      SimpleKClassImpl.prototype = Object.create(KClassImpl.prototype);
      SimpleKClassImpl.prototype.constructor = SimpleKClassImpl;
      booleanArrayIterator$1.prototype = Object.create(BooleanIterator.prototype);
      booleanArrayIterator$1.prototype.constructor = booleanArrayIterator$1;
      charArrayIterator$1.prototype = Object.create(CharIterator.prototype);
      charArrayIterator$1.prototype.constructor = charArrayIterator$1;
      byteArrayIterator$1.prototype = Object.create(ByteIterator.prototype);
      byteArrayIterator$1.prototype.constructor = byteArrayIterator$1;
      shortArrayIterator$1.prototype = Object.create(ShortIterator.prototype);
      shortArrayIterator$1.prototype.constructor = shortArrayIterator$1;
      intArrayIterator$1.prototype = Object.create(IntIterator.prototype);
      intArrayIterator$1.prototype.constructor = intArrayIterator$1;
      floatArrayIterator$1.prototype = Object.create(FloatIterator.prototype);
      floatArrayIterator$1.prototype.constructor = floatArrayIterator$1;
      longArrayIterator$1.prototype = Object.create(LongIterator.prototype);
      longArrayIterator$1.prototype.constructor = longArrayIterator$1;
      doubleArrayIterator$1.prototype = Object.create(DoubleIterator.prototype);
      doubleArrayIterator$1.prototype.constructor = doubleArrayIterator$1;
      Long.prototype = Object.create(Number_0.prototype);
      Long.prototype.constructor = Long;
      IrLinkageError.prototype = Object.create(Error_0.prototype);
      IrLinkageError.prototype.constructor = IrLinkageError;
      IllegalArgumentException.prototype = Object.create(RuntimeException.prototype);
      IllegalArgumentException.prototype.constructor = IllegalArgumentException;
      NoSuchElementException.prototype = Object.create(RuntimeException.prototype);
      NoSuchElementException.prototype.constructor = NoSuchElementException;
      IllegalStateException.prototype = Object.create(RuntimeException.prototype);
      IllegalStateException.prototype.constructor = IllegalStateException;
      UnsupportedOperationException.prototype = Object.create(RuntimeException.prototype);
      UnsupportedOperationException.prototype.constructor = UnsupportedOperationException;
      IndexOutOfBoundsException.prototype = Object.create(RuntimeException.prototype);
      IndexOutOfBoundsException.prototype.constructor = IndexOutOfBoundsException;
      NullPointerException.prototype = Object.create(RuntimeException.prototype);
      NullPointerException.prototype.constructor = NullPointerException;
      NoWhenBranchMatchedException.prototype = Object.create(RuntimeException.prototype);
      NoWhenBranchMatchedException.prototype.constructor = NoWhenBranchMatchedException;
      ClassCastException.prototype = Object.create(RuntimeException.prototype);
      ClassCastException.prototype.constructor = ClassCastException;
      UninitializedPropertyAccessException.prototype = Object.create(RuntimeException.prototype);
      UninitializedPropertyAccessException.prototype.constructor = UninitializedPropertyAccessException;
      function fold_0(_this__u8e3s4, initial, operation) {
        var accumulator = initial;
        var indexedObject = _this__u8e3s4;
        var inductionVariable = 0;
        var last = indexedObject.length;
        while (inductionVariable < last) {
          var element = indexedObject[inductionVariable];
          inductionVariable = inductionVariable + 1 | 0;
          accumulator = operation(accumulator, element);
        }
        return accumulator;
      }
      function get_indices(_this__u8e3s4) {
        return new IntRange(0, get_lastIndex(_this__u8e3s4));
      }
      function get_indices_0(_this__u8e3s4) {
        return new IntRange(0, get_lastIndex_0(_this__u8e3s4));
      }
      function get_lastIndex(_this__u8e3s4) {
        return _this__u8e3s4.length - 1 | 0;
      }
      function get_lastIndex_0(_this__u8e3s4) {
        return _this__u8e3s4.length - 1 | 0;
      }
      function get_indices_1(_this__u8e3s4) {
        return new IntRange(0, get_lastIndex_1(_this__u8e3s4));
      }
      function indexOf(_this__u8e3s4, element) {
        if (element == null) {
          var inductionVariable = 0;
          var last = _this__u8e3s4.length - 1 | 0;
          if (inductionVariable <= last)
            do {
              var index3 = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              if (_this__u8e3s4[index3] == null) {
                return index3;
              }
            } while (inductionVariable <= last);
        } else {
          var inductionVariable_0 = 0;
          var last_0 = _this__u8e3s4.length - 1 | 0;
          if (inductionVariable_0 <= last_0)
            do {
              var index_0 = inductionVariable_0;
              inductionVariable_0 = inductionVariable_0 + 1 | 0;
              if (equals(element, _this__u8e3s4[index_0])) {
                return index_0;
              }
            } while (inductionVariable_0 <= last_0);
        }
        return -1;
      }
      function lastIndexOf(_this__u8e3s4, element) {
        if (element == null) {
          var inductionVariable = _this__u8e3s4.length - 1 | 0;
          if (0 <= inductionVariable)
            do {
              var index3 = inductionVariable;
              inductionVariable = inductionVariable + -1 | 0;
              if (_this__u8e3s4[index3] == null) {
                return index3;
              }
            } while (0 <= inductionVariable);
        } else {
          var inductionVariable_0 = _this__u8e3s4.length - 1 | 0;
          if (0 <= inductionVariable_0)
            do {
              var index_0 = inductionVariable_0;
              inductionVariable_0 = inductionVariable_0 + -1 | 0;
              if (equals(element, _this__u8e3s4[index_0])) {
                return index_0;
              }
            } while (0 <= inductionVariable_0);
        }
        return -1;
      }
      function get_lastIndex_1(_this__u8e3s4) {
        return _this__u8e3s4.length - 1 | 0;
      }
      function joinToString(_this__u8e3s4, separator, prefix, postfix, limit, truncated, transform2) {
        return joinTo(_this__u8e3s4, StringBuilder_init_$Create$_1(), separator, prefix, postfix, limit, truncated, transform2).toString();
      }
      function joinToString$default(_this__u8e3s4, separator, prefix, postfix, limit, truncated, transform2, $mask0, $handler) {
        if (!(($mask0 & 1) === 0))
          separator = ", ";
        if (!(($mask0 & 2) === 0))
          prefix = "";
        if (!(($mask0 & 4) === 0))
          postfix = "";
        if (!(($mask0 & 8) === 0))
          limit = -1;
        if (!(($mask0 & 16) === 0))
          truncated = "...";
        if (!(($mask0 & 32) === 0))
          transform2 = null;
        return joinToString(_this__u8e3s4, separator, prefix, postfix, limit, truncated, transform2);
      }
      function joinTo(_this__u8e3s4, buffer, separator, prefix, postfix, limit, truncated, transform2) {
        buffer.append_oz4qxs_k$(prefix);
        var count3 = 0;
        var indexedObject = _this__u8e3s4;
        var inductionVariable = 0;
        var last = indexedObject.length;
        $l$loop:
          while (inductionVariable < last) {
            var element = indexedObject[inductionVariable];
            inductionVariable = inductionVariable + 1 | 0;
            count3 = count3 + 1 | 0;
            if (count3 > 1) {
              buffer.append_oz4qxs_k$(separator);
            }
            if (limit < 0 ? true : count3 <= limit) {
              appendElement(buffer, element, transform2);
            } else
              break $l$loop;
          }
        if (limit >= 0 ? count3 > limit : false) {
          buffer.append_oz4qxs_k$(truncated);
        }
        buffer.append_oz4qxs_k$(postfix);
        return buffer;
      }
      function joinTo$default(_this__u8e3s4, buffer, separator, prefix, postfix, limit, truncated, transform2, $mask0, $handler) {
        if (!(($mask0 & 2) === 0))
          separator = ", ";
        if (!(($mask0 & 4) === 0))
          prefix = "";
        if (!(($mask0 & 8) === 0))
          postfix = "";
        if (!(($mask0 & 16) === 0))
          limit = -1;
        if (!(($mask0 & 32) === 0))
          truncated = "...";
        if (!(($mask0 & 64) === 0))
          transform2 = null;
        return joinTo(_this__u8e3s4, buffer, separator, prefix, postfix, limit, truncated, transform2);
      }
      function contains_0(_this__u8e3s4, element) {
        return indexOf_0(_this__u8e3s4, element) >= 0;
      }
      function indexOf_0(_this__u8e3s4, element) {
        var inductionVariable = 0;
        var last = _this__u8e3s4.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var index3 = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            if (element === _this__u8e3s4[index3]) {
              return index3;
            }
          } while (inductionVariable <= last);
        return -1;
      }
      function get_indices_2(_this__u8e3s4) {
        return new IntRange(0, get_lastIndex_2(_this__u8e3s4));
      }
      function get_lastIndex_2(_this__u8e3s4) {
        return _this__u8e3s4.length - 1 | 0;
      }
      function contains_1(_this__u8e3s4, element) {
        return indexOf_1(_this__u8e3s4, element) >= 0;
      }
      function indexOf_1(_this__u8e3s4, element) {
        var inductionVariable = 0;
        var last = _this__u8e3s4.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var index3 = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            if (element === _this__u8e3s4[index3]) {
              return index3;
            }
          } while (inductionVariable <= last);
        return -1;
      }
      function get_indices_3(_this__u8e3s4) {
        return new IntRange(0, get_lastIndex_3(_this__u8e3s4));
      }
      function get_lastIndex_3(_this__u8e3s4) {
        return _this__u8e3s4.length - 1 | 0;
      }
      function contains_2(_this__u8e3s4, element) {
        return indexOf_2(_this__u8e3s4, element) >= 0;
      }
      function indexOf_2(_this__u8e3s4, element) {
        var inductionVariable = 0;
        var last = _this__u8e3s4.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var index3 = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            if (element === _this__u8e3s4[index3]) {
              return index3;
            }
          } while (inductionVariable <= last);
        return -1;
      }
      function get_indices_4(_this__u8e3s4) {
        return new IntRange(0, get_lastIndex_4(_this__u8e3s4));
      }
      function get_lastIndex_4(_this__u8e3s4) {
        return _this__u8e3s4.length - 1 | 0;
      }
      function contains_3(_this__u8e3s4, element) {
        return indexOf_3(_this__u8e3s4, element) >= 0;
      }
      function indexOf_3(_this__u8e3s4, element) {
        var inductionVariable = 0;
        var last = _this__u8e3s4.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var index3 = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            if (element.equals(_this__u8e3s4[index3])) {
              return index3;
            }
          } while (inductionVariable <= last);
        return -1;
      }
      function get_indices_5(_this__u8e3s4) {
        return new IntRange(0, get_lastIndex_5(_this__u8e3s4));
      }
      function get_lastIndex_5(_this__u8e3s4) {
        return _this__u8e3s4.length - 1 | 0;
      }
      function indexOfFirst(_this__u8e3s4, predicate) {
        var index3 = 0;
        var tmp0_iterator = _this__u8e3s4.iterator_jk1svi_k$();
        while (tmp0_iterator.hasNext_bitz1p_k$()) {
          var item = tmp0_iterator.next_20eer_k$();
          if (predicate(item))
            return index3;
          var tmp1 = index3;
          index3 = tmp1 + 1 | 0;
        }
        return -1;
      }
      function indexOfLast(_this__u8e3s4, predicate) {
        var iterator = _this__u8e3s4.listIterator_5hanv9_k$(_this__u8e3s4.get_size_woubt6_k$());
        while (iterator.hasPrevious_qh0629_k$()) {
          if (predicate(iterator.previous_l2dfd5_k$())) {
            return iterator.nextIndex_jshxun_k$();
          }
        }
        return -1;
      }
      function any(_this__u8e3s4, predicate) {
        var tmp;
        if (isInterface(_this__u8e3s4, Collection)) {
          tmp = _this__u8e3s4.isEmpty_y1axqb_k$();
        } else {
          tmp = false;
        }
        if (tmp)
          return false;
        var tmp0_iterator = _this__u8e3s4.iterator_jk1svi_k$();
        while (tmp0_iterator.hasNext_bitz1p_k$()) {
          var element = tmp0_iterator.next_20eer_k$();
          if (predicate(element))
            return true;
        }
        return false;
      }
      function all(_this__u8e3s4, predicate) {
        var tmp;
        if (isInterface(_this__u8e3s4, Collection)) {
          tmp = _this__u8e3s4.isEmpty_y1axqb_k$();
        } else {
          tmp = false;
        }
        if (tmp)
          return true;
        var tmp0_iterator = _this__u8e3s4.iterator_jk1svi_k$();
        while (tmp0_iterator.hasNext_bitz1p_k$()) {
          var element = tmp0_iterator.next_20eer_k$();
          if (!predicate(element))
            return false;
        }
        return true;
      }
      function joinToString_0(_this__u8e3s4, separator, prefix, postfix, limit, truncated, transform2) {
        return joinTo_0(_this__u8e3s4, StringBuilder_init_$Create$_1(), separator, prefix, postfix, limit, truncated, transform2).toString();
      }
      function joinToString$default_0(_this__u8e3s4, separator, prefix, postfix, limit, truncated, transform2, $mask0, $handler) {
        if (!(($mask0 & 1) === 0))
          separator = ", ";
        if (!(($mask0 & 2) === 0))
          prefix = "";
        if (!(($mask0 & 4) === 0))
          postfix = "";
        if (!(($mask0 & 8) === 0))
          limit = -1;
        if (!(($mask0 & 16) === 0))
          truncated = "...";
        if (!(($mask0 & 32) === 0))
          transform2 = null;
        return joinToString_0(_this__u8e3s4, separator, prefix, postfix, limit, truncated, transform2);
      }
      function joinTo_0(_this__u8e3s4, buffer, separator, prefix, postfix, limit, truncated, transform2) {
        buffer.append_oz4qxs_k$(prefix);
        var count3 = 0;
        var tmp0_iterator = _this__u8e3s4.iterator_jk1svi_k$();
        $l$loop:
          while (tmp0_iterator.hasNext_bitz1p_k$()) {
            var element = tmp0_iterator.next_20eer_k$();
            count3 = count3 + 1 | 0;
            if (count3 > 1) {
              buffer.append_oz4qxs_k$(separator);
            }
            if (limit < 0 ? true : count3 <= limit) {
              appendElement(buffer, element, transform2);
            } else
              break $l$loop;
          }
        if (limit >= 0 ? count3 > limit : false) {
          buffer.append_oz4qxs_k$(truncated);
        }
        buffer.append_oz4qxs_k$(postfix);
        return buffer;
      }
      function joinTo$default_0(_this__u8e3s4, buffer, separator, prefix, postfix, limit, truncated, transform2, $mask0, $handler) {
        if (!(($mask0 & 2) === 0))
          separator = ", ";
        if (!(($mask0 & 4) === 0))
          prefix = "";
        if (!(($mask0 & 8) === 0))
          postfix = "";
        if (!(($mask0 & 16) === 0))
          limit = -1;
        if (!(($mask0 & 32) === 0))
          truncated = "...";
        if (!(($mask0 & 64) === 0))
          transform2 = null;
        return joinTo_0(_this__u8e3s4, buffer, separator, prefix, postfix, limit, truncated, transform2);
      }
      function until(_this__u8e3s4, to) {
        if (to <= IntCompanionObject_getInstance().MIN_VALUE_1)
          return Companion_getInstance_15().EMPTY_1;
        return numberRangeToNumber(_this__u8e3s4, to - 1 | 0);
      }
      function downTo(_this__u8e3s4, to) {
        return Companion_getInstance_12().fromClosedRange_vhxzyy_k$(_this__u8e3s4, to, -1);
      }
      function until_0(_this__u8e3s4, to) {
        Companion_getInstance_20();
        if (to.compareTo_n4fqi2_k$(new Long(0, -2147483648)) <= 0)
          return Companion_getInstance_17().EMPTY_1;
        var tmp$ret$0;
        {
          tmp$ret$0 = to.minus_llf5ei_k$(new Long(1, 0));
        }
        return _this__u8e3s4.rangeTo_5i95fi_k$(tmp$ret$0.toLong_edfucp_k$());
      }
      function reversed(_this__u8e3s4) {
        return Companion_getInstance_12().fromClosedRange_vhxzyy_k$(_this__u8e3s4.last_1, _this__u8e3s4.first_1, -_this__u8e3s4.step_1 | 0);
      }
      function getOrElse(_this__u8e3s4, index3, defaultValue) {
        return (index3 >= 0 ? index3 <= get_lastIndex_7(_this__u8e3s4) : false) ? charSequenceGet(_this__u8e3s4, index3) : defaultValue(index3).value_1;
      }
      function contentEquals(_this__u8e3s4, other) {
        var tmp1_safe_receiver = _this__u8e3s4;
        var tmp;
        var tmp_0 = tmp1_safe_receiver;
        if ((tmp_0 == null ? null : new UByteArray(tmp_0)) == null) {
          tmp = null;
        } else {
          tmp = _UByteArray___get_storage__impl__d4kctt(tmp1_safe_receiver);
        }
        var tmp_1 = tmp;
        var tmp0_safe_receiver = other;
        var tmp_2;
        var tmp_3 = tmp0_safe_receiver;
        if ((tmp_3 == null ? null : new UByteArray(tmp_3)) == null) {
          tmp_2 = null;
        } else {
          tmp_2 = _UByteArray___get_storage__impl__d4kctt(tmp0_safe_receiver);
        }
        return contentEquals_3(tmp_1, tmp_2);
      }
      function contentEquals_0(_this__u8e3s4, other) {
        var tmp1_safe_receiver = _this__u8e3s4;
        var tmp;
        var tmp_0 = tmp1_safe_receiver;
        if ((tmp_0 == null ? null : new UIntArray(tmp_0)) == null) {
          tmp = null;
        } else {
          tmp = _UIntArray___get_storage__impl__92a0v0(tmp1_safe_receiver);
        }
        var tmp_1 = tmp;
        var tmp0_safe_receiver = other;
        var tmp_2;
        var tmp_3 = tmp0_safe_receiver;
        if ((tmp_3 == null ? null : new UIntArray(tmp_3)) == null) {
          tmp_2 = null;
        } else {
          tmp_2 = _UIntArray___get_storage__impl__92a0v0(tmp0_safe_receiver);
        }
        return contentEquals_4(tmp_1, tmp_2);
      }
      function contentEquals_1(_this__u8e3s4, other) {
        var tmp1_safe_receiver = _this__u8e3s4;
        var tmp;
        var tmp_0 = tmp1_safe_receiver;
        if ((tmp_0 == null ? null : new ULongArray(tmp_0)) == null) {
          tmp = null;
        } else {
          tmp = _ULongArray___get_storage__impl__28e64j(tmp1_safe_receiver);
        }
        var tmp_1 = tmp;
        var tmp0_safe_receiver = other;
        var tmp_2;
        var tmp_3 = tmp0_safe_receiver;
        if ((tmp_3 == null ? null : new ULongArray(tmp_3)) == null) {
          tmp_2 = null;
        } else {
          tmp_2 = _ULongArray___get_storage__impl__28e64j(tmp0_safe_receiver);
        }
        return contentEquals_5(tmp_1, tmp_2);
      }
      function contentEquals_2(_this__u8e3s4, other) {
        var tmp1_safe_receiver = _this__u8e3s4;
        var tmp;
        var tmp_0 = tmp1_safe_receiver;
        if ((tmp_0 == null ? null : new UShortArray(tmp_0)) == null) {
          tmp = null;
        } else {
          tmp = _UShortArray___get_storage__impl__t2jpv5(tmp1_safe_receiver);
        }
        var tmp_1 = tmp;
        var tmp0_safe_receiver = other;
        var tmp_2;
        var tmp_3 = tmp0_safe_receiver;
        if ((tmp_3 == null ? null : new UShortArray(tmp_3)) == null) {
          tmp_2 = null;
        } else {
          tmp_2 = _UShortArray___get_storage__impl__t2jpv5(tmp0_safe_receiver);
        }
        return contentEquals_6(tmp_1, tmp_2);
      }
      function KotlinNothingValueException_init_$Init$($this) {
        RuntimeException_init_$Init$($this);
        KotlinNothingValueException.call($this);
        return $this;
      }
      function KotlinNothingValueException_init_$Create$() {
        var tmp = KotlinNothingValueException_init_$Init$(Object.create(KotlinNothingValueException.prototype));
        captureStack(tmp, KotlinNothingValueException_init_$Create$);
        return tmp;
      }
      function KotlinNothingValueException_init_$Init$_0(message, $this) {
        RuntimeException_init_$Init$_0(message, $this);
        KotlinNothingValueException.call($this);
        return $this;
      }
      function KotlinNothingValueException_init_$Create$_0(message) {
        var tmp = KotlinNothingValueException_init_$Init$_0(message, Object.create(KotlinNothingValueException.prototype));
        captureStack(tmp, KotlinNothingValueException_init_$Create$_0);
        return tmp;
      }
      function KotlinNothingValueException_init_$Init$_1(message, cause, $this) {
        RuntimeException_init_$Init$_1(message, cause, $this);
        KotlinNothingValueException.call($this);
        return $this;
      }
      function KotlinNothingValueException_init_$Create$_1(message, cause) {
        var tmp = KotlinNothingValueException_init_$Init$_1(message, cause, Object.create(KotlinNothingValueException.prototype));
        captureStack(tmp, KotlinNothingValueException_init_$Create$_1);
        return tmp;
      }
      function KotlinNothingValueException_init_$Init$_2(cause, $this) {
        RuntimeException_init_$Init$_2(cause, $this);
        KotlinNothingValueException.call($this);
        return $this;
      }
      function KotlinNothingValueException_init_$Create$_2(cause) {
        var tmp = KotlinNothingValueException_init_$Init$_2(cause, Object.create(KotlinNothingValueException.prototype));
        captureStack(tmp, KotlinNothingValueException_init_$Create$_2);
        return tmp;
      }
      function KotlinNothingValueException() {
        captureStack(this, KotlinNothingValueException);
      }
      KotlinNothingValueException.$metadata$ = classMeta("KotlinNothingValueException", void 0, void 0, void 0, void 0, RuntimeException.prototype);
      function ExperimentalJsExport() {
      }
      ExperimentalJsExport.prototype.equals = function(other) {
        if (!(other instanceof ExperimentalJsExport))
          return false;
        var tmp0_other_with_cast = other instanceof ExperimentalJsExport ? other : THROW_CCE();
        return true;
      };
      ExperimentalJsExport.prototype.hashCode = function() {
        return 0;
      };
      ExperimentalJsExport.prototype.toString = function() {
        return "@kotlin.js.ExperimentalJsExport()";
      };
      ExperimentalJsExport.$metadata$ = classMeta("ExperimentalJsExport", [Annotation]);
      function get_PI() {
        return PI;
      }
      var PI;
      function get_code(_this__u8e3s4) {
        return Char__toInt_impl_vasixd(_this__u8e3s4);
      }
      function Char(code) {
        var tmp;
        var tmp$ret$0;
        {
          Companion_getInstance_18();
          var tmp0__get_code__88qj9g = _Char___init__impl__6a9atx(0);
          tmp$ret$0 = Char__toInt_impl_vasixd(tmp0__get_code__88qj9g);
        }
        if (code < tmp$ret$0) {
          tmp = true;
        } else {
          var tmp$ret$1;
          {
            Companion_getInstance_18();
            var tmp1__get_code__adl84j = _Char___init__impl__6a9atx(65535);
            tmp$ret$1 = Char__toInt_impl_vasixd(tmp1__get_code__adl84j);
          }
          tmp = code > tmp$ret$1;
        }
        if (tmp) {
          throw IllegalArgumentException_init_$Create$_0("Invalid Char code: " + code);
        }
        return numberToChar(code);
      }
      function WasExperimental(markerClass) {
        this.markerClass_1 = markerClass;
      }
      WasExperimental.prototype.get_markerClass_h8iub9_k$ = function() {
        return this.markerClass_1;
      };
      WasExperimental.prototype.equals = function(other) {
        if (!(other instanceof WasExperimental))
          return false;
        var tmp0_other_with_cast = other instanceof WasExperimental ? other : THROW_CCE();
        if (!contentEquals_7(this.markerClass_1, tmp0_other_with_cast.markerClass_1))
          return false;
        return true;
      };
      WasExperimental.prototype.hashCode = function() {
        return imul(getStringHashCode("markerClass"), 127) ^ hashCode(this.markerClass_1);
      };
      WasExperimental.prototype.toString = function() {
        return "@kotlin.WasExperimental(markerClass=" + toString_1(this.markerClass_1) + ")";
      };
      WasExperimental.$metadata$ = classMeta("WasExperimental", [Annotation]);
      function ExperimentalStdlibApi() {
      }
      ExperimentalStdlibApi.prototype.equals = function(other) {
        if (!(other instanceof ExperimentalStdlibApi))
          return false;
        var tmp0_other_with_cast = other instanceof ExperimentalStdlibApi ? other : THROW_CCE();
        return true;
      };
      ExperimentalStdlibApi.prototype.hashCode = function() {
        return 0;
      };
      ExperimentalStdlibApi.prototype.toString = function() {
        return "@kotlin.ExperimentalStdlibApi()";
      };
      ExperimentalStdlibApi.$metadata$ = classMeta("ExperimentalStdlibApi", [Annotation]);
      function OptionalExpectation() {
      }
      OptionalExpectation.prototype.equals = function(other) {
        if (!(other instanceof OptionalExpectation))
          return false;
        var tmp0_other_with_cast = other instanceof OptionalExpectation ? other : THROW_CCE();
        return true;
      };
      OptionalExpectation.prototype.hashCode = function() {
        return 0;
      };
      OptionalExpectation.prototype.toString = function() {
        return "@kotlin.OptionalExpectation()";
      };
      OptionalExpectation.$metadata$ = classMeta("OptionalExpectation", [Annotation]);
      function ExperimentalMultiplatform() {
      }
      ExperimentalMultiplatform.prototype.equals = function(other) {
        if (!(other instanceof ExperimentalMultiplatform))
          return false;
        var tmp0_other_with_cast = other instanceof ExperimentalMultiplatform ? other : THROW_CCE();
        return true;
      };
      ExperimentalMultiplatform.prototype.hashCode = function() {
        return 0;
      };
      ExperimentalMultiplatform.prototype.toString = function() {
        return "@kotlin.ExperimentalMultiplatform()";
      };
      ExperimentalMultiplatform.$metadata$ = classMeta("ExperimentalMultiplatform", [Annotation]);
      var Level_WARNING_instance;
      var Level_ERROR_instance;
      function values() {
        return [Level_WARNING_getInstance(), Level_ERROR_getInstance()];
      }
      function valueOf(value) {
        switch (value) {
          case "WARNING":
            return Level_WARNING_getInstance();
          case "ERROR":
            return Level_ERROR_getInstance();
          default:
            Level_initEntries();
            THROW_ISE();
            break;
        }
      }
      var Level_entriesInitialized;
      function Level_initEntries() {
        if (Level_entriesInitialized)
          return Unit_getInstance();
        Level_entriesInitialized = true;
        Level_WARNING_instance = new Level("WARNING", 0);
        Level_ERROR_instance = new Level("ERROR", 1);
      }
      function RequiresOptIn_init_$Init$(message, level, $mask0, $marker, $this) {
        if (!(($mask0 & 1) === 0))
          message = "";
        if (!(($mask0 & 2) === 0))
          level = Level_ERROR_getInstance();
        RequiresOptIn.call($this, message, level);
        return $this;
      }
      function RequiresOptIn_init_$Create$(message, level, $mask0, $marker) {
        return RequiresOptIn_init_$Init$(message, level, $mask0, $marker, Object.create(RequiresOptIn.prototype));
      }
      function Level(name, ordinal2) {
        Enum.call(this, name, ordinal2);
      }
      Level.$metadata$ = classMeta("Level", void 0, void 0, void 0, void 0, Enum.prototype);
      function Level_WARNING_getInstance() {
        Level_initEntries();
        return Level_WARNING_instance;
      }
      function Level_ERROR_getInstance() {
        Level_initEntries();
        return Level_ERROR_instance;
      }
      function RequiresOptIn(message, level) {
        this.message_1 = message;
        this.level_1 = level;
      }
      RequiresOptIn.prototype.get_message_h23axq_k$ = function() {
        return this.message_1;
      };
      RequiresOptIn.prototype.get_level_ium7h7_k$ = function() {
        return this.level_1;
      };
      RequiresOptIn.prototype.equals = function(other) {
        if (!(other instanceof RequiresOptIn))
          return false;
        var tmp0_other_with_cast = other instanceof RequiresOptIn ? other : THROW_CCE();
        if (!(this.message_1 === tmp0_other_with_cast.message_1))
          return false;
        if (!this.level_1.equals(tmp0_other_with_cast.level_1))
          return false;
        return true;
      };
      RequiresOptIn.prototype.hashCode = function() {
        var result = imul(getStringHashCode("message"), 127) ^ getStringHashCode(this.message_1);
        result = result + (imul(getStringHashCode("level"), 127) ^ this.level_1.hashCode()) | 0;
        return result;
      };
      RequiresOptIn.prototype.toString = function() {
        return "@kotlin.RequiresOptIn(message=" + this.message_1 + ", level=" + this.level_1 + ")";
      };
      RequiresOptIn.$metadata$ = classMeta("RequiresOptIn", [Annotation]);
      function OptIn(markerClass) {
        this.markerClass_1 = markerClass;
      }
      OptIn.prototype.get_markerClass_h8iub9_k$ = function() {
        return this.markerClass_1;
      };
      OptIn.prototype.equals = function(other) {
        if (!(other instanceof OptIn))
          return false;
        var tmp0_other_with_cast = other instanceof OptIn ? other : THROW_CCE();
        if (!contentEquals_7(this.markerClass_1, tmp0_other_with_cast.markerClass_1))
          return false;
        return true;
      };
      OptIn.prototype.hashCode = function() {
        return imul(getStringHashCode("markerClass"), 127) ^ hashCode(this.markerClass_1);
      };
      OptIn.prototype.toString = function() {
        return "@kotlin.OptIn(markerClass=" + toString_1(this.markerClass_1) + ")";
      };
      OptIn.$metadata$ = classMeta("OptIn", [Annotation]);
      function AbstractCollection$toString$lambda(this$0) {
        return function(it) {
          return it === this$0 ? "(this Collection)" : toString_0(it);
        };
      }
      function AbstractCollection() {
      }
      AbstractCollection.prototype.contains_2ehdt1_k$ = function(element) {
        var tmp$ret$0;
        $l$block_0: {
          var tmp;
          if (isInterface(this, Collection)) {
            tmp = this.isEmpty_y1axqb_k$();
          } else {
            tmp = false;
          }
          if (tmp) {
            tmp$ret$0 = false;
            break $l$block_0;
          }
          var tmp0_iterator = this.iterator_jk1svi_k$();
          while (tmp0_iterator.hasNext_bitz1p_k$()) {
            var element_0 = tmp0_iterator.next_20eer_k$();
            var tmp$ret$1;
            {
              tmp$ret$1 = equals(element_0, element);
            }
            if (tmp$ret$1) {
              tmp$ret$0 = true;
              break $l$block_0;
            }
          }
          tmp$ret$0 = false;
        }
        return tmp$ret$0;
      };
      AbstractCollection.prototype.containsAll_jr3fla_k$ = function(elements) {
        var tmp$ret$0;
        $l$block_0: {
          var tmp;
          if (isInterface(elements, Collection)) {
            tmp = elements.isEmpty_y1axqb_k$();
          } else {
            tmp = false;
          }
          if (tmp) {
            tmp$ret$0 = true;
            break $l$block_0;
          }
          var tmp0_iterator = elements.iterator_jk1svi_k$();
          while (tmp0_iterator.hasNext_bitz1p_k$()) {
            var element = tmp0_iterator.next_20eer_k$();
            var tmp$ret$1;
            {
              tmp$ret$1 = this.contains_2ehdt1_k$(element);
            }
            if (!tmp$ret$1) {
              tmp$ret$0 = false;
              break $l$block_0;
            }
          }
          tmp$ret$0 = true;
        }
        return tmp$ret$0;
      };
      AbstractCollection.prototype.isEmpty_y1axqb_k$ = function() {
        return this.get_size_woubt6_k$() === 0;
      };
      AbstractCollection.prototype.toString = function() {
        return joinToString$default_0(this, ", ", "[", "]", 0, null, AbstractCollection$toString$lambda(this), 24, null);
      };
      AbstractCollection.prototype.toArray = function() {
        return copyToArrayImpl(this);
      };
      AbstractCollection.prototype.toArray_nu7pb_k$ = function(array3) {
        return copyToExistingArrayImpl(this, array3);
      };
      AbstractCollection.$metadata$ = classMeta("AbstractCollection", [Collection]);
      function _get_list__d9tsa5($this) {
        return $this.list_1;
      }
      function _get_fromIndex__987b49($this) {
        return $this.fromIndex_1;
      }
      function _set__size__bau3qd($this, _set____db54di) {
        $this._size_1 = _set____db54di;
      }
      function _get__size__kqacr3($this) {
        return $this._size_1;
      }
      function SubList(list, fromIndex, toIndex) {
        AbstractList.call(this);
        this.list_1 = list;
        this.fromIndex_1 = fromIndex;
        this._size_1 = 0;
        Companion_getInstance().checkRangeIndexes_5hjybp_k$(this.fromIndex_1, toIndex, this.list_1.get_size_woubt6_k$());
        this._size_1 = toIndex - this.fromIndex_1 | 0;
      }
      SubList.prototype.get_fkrdnv_k$ = function(index3) {
        Companion_getInstance().checkElementIndex_ux0wz1_k$(index3, this._size_1);
        return this.list_1.get_fkrdnv_k$(this.fromIndex_1 + index3 | 0);
      };
      SubList.prototype.get_size_woubt6_k$ = function() {
        return this._size_1;
      };
      SubList.$metadata$ = classMeta("SubList", [RandomAccess], void 0, void 0, void 0, AbstractList.prototype);
      function IteratorImpl($outer) {
        this.$this_1 = $outer;
        this.index_1 = 0;
      }
      IteratorImpl.prototype.set_index_eknhut_k$ = function(_set____db54di) {
        this.index_1 = _set____db54di;
      };
      IteratorImpl.prototype.get_index_it478p_k$ = function() {
        return this.index_1;
      };
      IteratorImpl.prototype.hasNext_bitz1p_k$ = function() {
        return this.index_1 < this.$this_1.get_size_woubt6_k$();
      };
      IteratorImpl.prototype.next_20eer_k$ = function() {
        if (!this.hasNext_bitz1p_k$())
          throw NoSuchElementException_init_$Create$();
        var tmp0_this = this;
        var tmp1 = tmp0_this.index_1;
        tmp0_this.index_1 = tmp1 + 1 | 0;
        return this.$this_1.get_fkrdnv_k$(tmp1);
      };
      IteratorImpl.$metadata$ = classMeta("IteratorImpl", [Iterator_3]);
      function ListIteratorImpl($outer, index3) {
        this.$this_2 = $outer;
        IteratorImpl.call(this, $outer);
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, this.$this_2.get_size_woubt6_k$());
        this.set_index_eknhut_k$(index3);
      }
      ListIteratorImpl.prototype.hasPrevious_qh0629_k$ = function() {
        return this.get_index_it478p_k$() > 0;
      };
      ListIteratorImpl.prototype.nextIndex_jshxun_k$ = function() {
        return this.get_index_it478p_k$();
      };
      ListIteratorImpl.prototype.previous_l2dfd5_k$ = function() {
        if (!this.hasPrevious_qh0629_k$())
          throw NoSuchElementException_init_$Create$();
        var tmp0_this = this;
        tmp0_this.set_index_eknhut_k$(tmp0_this.get_index_it478p_k$() - 1 | 0);
        return this.$this_2.get_fkrdnv_k$(tmp0_this.get_index_it478p_k$());
      };
      ListIteratorImpl.prototype.previousIndex_4qtyw5_k$ = function() {
        return this.get_index_it478p_k$() - 1 | 0;
      };
      ListIteratorImpl.$metadata$ = classMeta("ListIteratorImpl", [ListIterator], void 0, void 0, void 0, IteratorImpl.prototype);
      function Companion() {
        Companion_instance = this;
      }
      Companion.prototype.checkElementIndex_ux0wz1_k$ = function(index3, size2) {
        if (index3 < 0 ? true : index3 >= size2) {
          throw IndexOutOfBoundsException_init_$Create$_0("index: " + index3 + ", size: " + size2);
        }
      };
      Companion.prototype.checkPositionIndex_kxpgsw_k$ = function(index3, size2) {
        if (index3 < 0 ? true : index3 > size2) {
          throw IndexOutOfBoundsException_init_$Create$_0("index: " + index3 + ", size: " + size2);
        }
      };
      Companion.prototype.checkRangeIndexes_5hjybp_k$ = function(fromIndex, toIndex, size2) {
        if (fromIndex < 0 ? true : toIndex > size2) {
          throw IndexOutOfBoundsException_init_$Create$_0("fromIndex: " + fromIndex + ", toIndex: " + toIndex + ", size: " + size2);
        }
        if (fromIndex > toIndex) {
          throw IllegalArgumentException_init_$Create$_0("fromIndex: " + fromIndex + " > toIndex: " + toIndex);
        }
      };
      Companion.prototype.checkBoundsIndexes_7787d9_k$ = function(startIndex, endIndex, size2) {
        if (startIndex < 0 ? true : endIndex > size2) {
          throw IndexOutOfBoundsException_init_$Create$_0("startIndex: " + startIndex + ", endIndex: " + endIndex + ", size: " + size2);
        }
        if (startIndex > endIndex) {
          throw IllegalArgumentException_init_$Create$_0("startIndex: " + startIndex + " > endIndex: " + endIndex);
        }
      };
      Companion.prototype.orderedHashCode_2n0xp_k$ = function(c5) {
        var hashCode_02 = 1;
        var tmp0_iterator = c5.iterator_jk1svi_k$();
        while (tmp0_iterator.hasNext_bitz1p_k$()) {
          var e = tmp0_iterator.next_20eer_k$();
          var tmp = imul(31, hashCode_02);
          var tmp1_safe_receiver = e;
          var tmp2_elvis_lhs = tmp1_safe_receiver == null ? null : hashCode(tmp1_safe_receiver);
          hashCode_02 = tmp + (tmp2_elvis_lhs == null ? 0 : tmp2_elvis_lhs) | 0;
        }
        return hashCode_02;
      };
      Companion.prototype.orderedEquals_40uhas_k$ = function(c5, other) {
        if (!(c5.get_size_woubt6_k$() === other.get_size_woubt6_k$()))
          return false;
        var otherIterator = other.iterator_jk1svi_k$();
        var tmp0_iterator = c5.iterator_jk1svi_k$();
        while (tmp0_iterator.hasNext_bitz1p_k$()) {
          var elem = tmp0_iterator.next_20eer_k$();
          var elemOther = otherIterator.next_20eer_k$();
          if (!equals(elem, elemOther)) {
            return false;
          }
        }
        return true;
      };
      Companion.$metadata$ = objectMeta("Companion");
      var Companion_instance;
      function Companion_getInstance() {
        if (Companion_instance == null)
          new Companion();
        return Companion_instance;
      }
      function AbstractList() {
        Companion_getInstance();
        AbstractCollection.call(this);
      }
      AbstractList.prototype.iterator_jk1svi_k$ = function() {
        return new IteratorImpl(this);
      };
      AbstractList.prototype.indexOf_dcv8dt_k$ = function(element) {
        var tmp$ret$1;
        $l$block: {
          var index3 = 0;
          var tmp0_iterator = this.iterator_jk1svi_k$();
          while (tmp0_iterator.hasNext_bitz1p_k$()) {
            var item = tmp0_iterator.next_20eer_k$();
            var tmp$ret$0;
            {
              tmp$ret$0 = equals(item, element);
            }
            if (tmp$ret$0) {
              tmp$ret$1 = index3;
              break $l$block;
            }
            var tmp1 = index3;
            index3 = tmp1 + 1 | 0;
          }
          tmp$ret$1 = -1;
        }
        return tmp$ret$1;
      };
      AbstractList.prototype.lastIndexOf_rzx8t5_k$ = function(element) {
        var tmp$ret$1;
        $l$block: {
          var iterator = this.listIterator_5hanv9_k$(this.get_size_woubt6_k$());
          while (iterator.hasPrevious_qh0629_k$()) {
            var tmp$ret$0;
            {
              var tmp0__anonymous__q1qw7t = iterator.previous_l2dfd5_k$();
              tmp$ret$0 = equals(tmp0__anonymous__q1qw7t, element);
            }
            if (tmp$ret$0) {
              tmp$ret$1 = iterator.nextIndex_jshxun_k$();
              break $l$block;
            }
          }
          tmp$ret$1 = -1;
        }
        return tmp$ret$1;
      };
      AbstractList.prototype.listIterator_xjshxw_k$ = function() {
        return new ListIteratorImpl(this, 0);
      };
      AbstractList.prototype.listIterator_5hanv9_k$ = function(index3) {
        return new ListIteratorImpl(this, index3);
      };
      AbstractList.prototype.subList_d153ha_k$ = function(fromIndex, toIndex) {
        return new SubList(this, fromIndex, toIndex);
      };
      AbstractList.prototype.equals = function(other) {
        if (other === this)
          return true;
        if (!(!(other == null) ? isInterface(other, List) : false))
          return false;
        return Companion_getInstance().orderedEquals_40uhas_k$(this, other);
      };
      AbstractList.prototype.hashCode = function() {
        return Companion_getInstance().orderedHashCode_2n0xp_k$(this);
      };
      AbstractList.$metadata$ = classMeta("AbstractList", [List], void 0, void 0, void 0, AbstractCollection.prototype);
      function get_indices_6(_this__u8e3s4) {
        return numberRangeToNumber(0, _this__u8e3s4.get_size_woubt6_k$() - 1 | 0);
      }
      function get_lastIndex_6(_this__u8e3s4) {
        return _this__u8e3s4.get_size_woubt6_k$() - 1 | 0;
      }
      function emptyList() {
        return EmptyList_getInstance();
      }
      function _get_serialVersionUID__fhggm9($this) {
        return $this.serialVersionUID_1;
      }
      function readResolve($this) {
        return EmptyList_getInstance();
      }
      function EmptyList() {
        EmptyList_instance = this;
        this.serialVersionUID_1 = new Long(-1478467534, -1720727600);
      }
      EmptyList.prototype.equals = function(other) {
        var tmp;
        if (!(other == null) ? isInterface(other, List) : false) {
          tmp = other.isEmpty_y1axqb_k$();
        } else {
          tmp = false;
        }
        return tmp;
      };
      EmptyList.prototype.hashCode = function() {
        return 1;
      };
      EmptyList.prototype.toString = function() {
        return "[]";
      };
      EmptyList.prototype.get_size_woubt6_k$ = function() {
        return 0;
      };
      EmptyList.prototype.isEmpty_y1axqb_k$ = function() {
        return true;
      };
      EmptyList.prototype.contains_a7ux40_k$ = function(element) {
        return false;
      };
      EmptyList.prototype.contains_2ehdt1_k$ = function(element) {
        if (true)
          return false;
        var tmp;
        if (false) {
          tmp = element;
        } else {
          tmp = THROW_CCE();
        }
        return this.contains_a7ux40_k$(tmp);
      };
      EmptyList.prototype.containsAll_4bfz49_k$ = function(elements) {
        return elements.isEmpty_y1axqb_k$();
      };
      EmptyList.prototype.containsAll_jr3fla_k$ = function(elements) {
        return this.containsAll_4bfz49_k$(elements);
      };
      EmptyList.prototype.get_fkrdnv_k$ = function(index3) {
        throw IndexOutOfBoundsException_init_$Create$_0("Empty list doesn't contain element at index " + index3 + ".");
      };
      EmptyList.prototype.indexOf_31ms1i_k$ = function(element) {
        return -1;
      };
      EmptyList.prototype.indexOf_dcv8dt_k$ = function(element) {
        if (true)
          return -1;
        var tmp;
        if (false) {
          tmp = element;
        } else {
          tmp = THROW_CCE();
        }
        return this.indexOf_31ms1i_k$(tmp);
      };
      EmptyList.prototype.lastIndexOf_5pkqqc_k$ = function(element) {
        return -1;
      };
      EmptyList.prototype.lastIndexOf_rzx8t5_k$ = function(element) {
        if (true)
          return -1;
        var tmp;
        if (false) {
          tmp = element;
        } else {
          tmp = THROW_CCE();
        }
        return this.lastIndexOf_5pkqqc_k$(tmp);
      };
      EmptyList.prototype.iterator_jk1svi_k$ = function() {
        return EmptyIterator_getInstance();
      };
      EmptyList.prototype.listIterator_xjshxw_k$ = function() {
        return EmptyIterator_getInstance();
      };
      EmptyList.prototype.listIterator_5hanv9_k$ = function(index3) {
        if (!(index3 === 0))
          throw IndexOutOfBoundsException_init_$Create$_0("Index: " + index3);
        return EmptyIterator_getInstance();
      };
      EmptyList.prototype.subList_d153ha_k$ = function(fromIndex, toIndex) {
        if (fromIndex === 0 ? toIndex === 0 : false)
          return this;
        throw IndexOutOfBoundsException_init_$Create$_0("fromIndex: " + fromIndex + ", toIndex: " + toIndex);
      };
      EmptyList.$metadata$ = objectMeta("EmptyList", [List, Serializable, RandomAccess]);
      var EmptyList_instance;
      function EmptyList_getInstance() {
        if (EmptyList_instance == null)
          new EmptyList();
        return EmptyList_instance;
      }
      function EmptyIterator() {
        EmptyIterator_instance = this;
      }
      EmptyIterator.prototype.hasNext_bitz1p_k$ = function() {
        return false;
      };
      EmptyIterator.prototype.hasPrevious_qh0629_k$ = function() {
        return false;
      };
      EmptyIterator.prototype.nextIndex_jshxun_k$ = function() {
        return 0;
      };
      EmptyIterator.prototype.previousIndex_4qtyw5_k$ = function() {
        return -1;
      };
      EmptyIterator.prototype.next_20eer_k$ = function() {
        throw NoSuchElementException_init_$Create$();
      };
      EmptyIterator.prototype.previous_l2dfd5_k$ = function() {
        throw NoSuchElementException_init_$Create$();
      };
      EmptyIterator.$metadata$ = objectMeta("EmptyIterator", [ListIterator]);
      var EmptyIterator_instance;
      function EmptyIterator_getInstance() {
        if (EmptyIterator_instance == null)
          new EmptyIterator();
        return EmptyIterator_instance;
      }
      function removeAll2(_this__u8e3s4, predicate) {
        return filterInPlace(_this__u8e3s4, predicate, true);
      }
      function removeAll_0(_this__u8e3s4, predicate) {
        return filterInPlace_0(_this__u8e3s4, predicate, true);
      }
      function filterInPlace(_this__u8e3s4, predicate, predicateResultToRemove) {
        if (!isInterface(_this__u8e3s4, RandomAccess)) {
          return filterInPlace_0(isInterface(_this__u8e3s4, MutableIterable) ? _this__u8e3s4 : THROW_CCE(), predicate, predicateResultToRemove);
        }
        var writeIndex = 0;
        var inductionVariable = 0;
        var last = get_lastIndex_6(_this__u8e3s4);
        if (inductionVariable <= last)
          $l$loop:
            do {
              var readIndex = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              var element = _this__u8e3s4.get_fkrdnv_k$(readIndex);
              if (predicate(element) === predicateResultToRemove)
                continue $l$loop;
              if (!(writeIndex === readIndex)) {
                _this__u8e3s4.set_meu351_k$(writeIndex, element);
              }
              var tmp1 = writeIndex;
              writeIndex = tmp1 + 1 | 0;
            } while (!(readIndex === last));
        if (writeIndex < _this__u8e3s4.get_size_woubt6_k$()) {
          var inductionVariable_0 = get_lastIndex_6(_this__u8e3s4);
          var last_0 = writeIndex;
          if (last_0 <= inductionVariable_0)
            do {
              var removeIndex = inductionVariable_0;
              inductionVariable_0 = inductionVariable_0 + -1 | 0;
              _this__u8e3s4.removeAt_qvpkxi_k$(removeIndex);
            } while (!(removeIndex === last_0));
          return true;
        } else {
          return false;
        }
      }
      function filterInPlace_0(_this__u8e3s4, predicate, predicateResultToRemove) {
        var result = false;
        var tmp$ret$0;
        {
          var tmp0_with = _this__u8e3s4.iterator_jk1svi_k$();
          {
          }
          while (tmp0_with.hasNext_bitz1p_k$())
            if (predicate(tmp0_with.next_20eer_k$()) === predicateResultToRemove) {
              tmp0_with.remove_le47v1_k$();
              result = true;
            }
          tmp$ret$0 = Unit_getInstance();
        }
        return result;
      }
      function Sequence2() {
      }
      Sequence2.$metadata$ = interfaceMeta("Sequence");
      function contract(builder) {
      }
      function ContractBuilder() {
      }
      ContractBuilder.$metadata$ = interfaceMeta("ContractBuilder");
      var InvocationKind_AT_MOST_ONCE_instance;
      var InvocationKind_AT_LEAST_ONCE_instance;
      var InvocationKind_EXACTLY_ONCE_instance;
      var InvocationKind_UNKNOWN_instance;
      function values_0() {
        return [InvocationKind_AT_MOST_ONCE_getInstance(), InvocationKind_AT_LEAST_ONCE_getInstance(), InvocationKind_EXACTLY_ONCE_getInstance(), InvocationKind_UNKNOWN_getInstance()];
      }
      function valueOf_0(value) {
        switch (value) {
          case "AT_MOST_ONCE":
            return InvocationKind_AT_MOST_ONCE_getInstance();
          case "AT_LEAST_ONCE":
            return InvocationKind_AT_LEAST_ONCE_getInstance();
          case "EXACTLY_ONCE":
            return InvocationKind_EXACTLY_ONCE_getInstance();
          case "UNKNOWN":
            return InvocationKind_UNKNOWN_getInstance();
          default:
            InvocationKind_initEntries();
            THROW_ISE();
            break;
        }
      }
      var InvocationKind_entriesInitialized;
      function InvocationKind_initEntries() {
        if (InvocationKind_entriesInitialized)
          return Unit_getInstance();
        InvocationKind_entriesInitialized = true;
        InvocationKind_AT_MOST_ONCE_instance = new InvocationKind("AT_MOST_ONCE", 0);
        InvocationKind_AT_LEAST_ONCE_instance = new InvocationKind("AT_LEAST_ONCE", 1);
        InvocationKind_EXACTLY_ONCE_instance = new InvocationKind("EXACTLY_ONCE", 2);
        InvocationKind_UNKNOWN_instance = new InvocationKind("UNKNOWN", 3);
      }
      function InvocationKind(name, ordinal2) {
        Enum.call(this, name, ordinal2);
      }
      InvocationKind.$metadata$ = classMeta("InvocationKind", void 0, void 0, void 0, void 0, Enum.prototype);
      function ExperimentalContracts() {
      }
      ExperimentalContracts.prototype.equals = function(other) {
        if (!(other instanceof ExperimentalContracts))
          return false;
        var tmp0_other_with_cast = other instanceof ExperimentalContracts ? other : THROW_CCE();
        return true;
      };
      ExperimentalContracts.prototype.hashCode = function() {
        return 0;
      };
      ExperimentalContracts.prototype.toString = function() {
        return "@kotlin.contracts.ExperimentalContracts()";
      };
      ExperimentalContracts.$metadata$ = classMeta("ExperimentalContracts", [Annotation]);
      function InvocationKind_AT_MOST_ONCE_getInstance() {
        InvocationKind_initEntries();
        return InvocationKind_AT_MOST_ONCE_instance;
      }
      function InvocationKind_AT_LEAST_ONCE_getInstance() {
        InvocationKind_initEntries();
        return InvocationKind_AT_LEAST_ONCE_instance;
      }
      function InvocationKind_EXACTLY_ONCE_getInstance() {
        InvocationKind_initEntries();
        return InvocationKind_EXACTLY_ONCE_instance;
      }
      function InvocationKind_UNKNOWN_getInstance() {
        InvocationKind_initEntries();
        return InvocationKind_UNKNOWN_instance;
      }
      function CallsInPlace() {
      }
      CallsInPlace.$metadata$ = interfaceMeta("CallsInPlace", [Effect]);
      function Returns() {
      }
      Returns.$metadata$ = interfaceMeta("Returns", [SimpleEffect]);
      function ReturnsNotNull() {
      }
      ReturnsNotNull.$metadata$ = interfaceMeta("ReturnsNotNull", [SimpleEffect]);
      function Effect() {
      }
      Effect.$metadata$ = interfaceMeta("Effect");
      function SimpleEffect() {
      }
      SimpleEffect.$metadata$ = interfaceMeta("SimpleEffect", [Effect]);
      function ConditionalEffect() {
      }
      ConditionalEffect.$metadata$ = interfaceMeta("ConditionalEffect", [Effect]);
      function Continuation() {
      }
      Continuation.$metadata$ = interfaceMeta("Continuation");
      function Continuation_0(context, resumeWith) {
        return new _no_name_provided__qut3iv(context, resumeWith);
      }
      function resumeWithException(_this__u8e3s4, exception) {
        var tmp$ret$0;
        {
          var tmp0_failure = Companion_getInstance_3();
          tmp$ret$0 = _Result___init__impl__xyqfz8(createFailure(exception));
        }
        return _this__u8e3s4.resumeWith_s3a3yh_k$(tmp$ret$0);
      }
      function resume(_this__u8e3s4, value) {
        var tmp$ret$0;
        {
          var tmp0_success = Companion_getInstance_3();
          tmp$ret$0 = _Result___init__impl__xyqfz8(value);
        }
        return _this__u8e3s4.resumeWith_s3a3yh_k$(tmp$ret$0);
      }
      function get_coroutineContext() {
        throw new NotImplementedError("Implemented as intrinsic");
      }
      function _no_name_provided__qut3iv($context, $resumeWith) {
        this.$context_1 = $context;
        this.$resumeWith_1 = $resumeWith;
      }
      _no_name_provided__qut3iv.prototype.get_context_h02k06_k$ = function() {
        return this.$context_1;
      };
      _no_name_provided__qut3iv.prototype.resumeWith_s3a3yh_k$ = function(result) {
        return this.$resumeWith_1(new Result(result));
      };
      _no_name_provided__qut3iv.$metadata$ = classMeta(void 0, [Continuation]);
      function Key() {
        Key_instance = this;
      }
      Key.$metadata$ = objectMeta("Key", [Key_0]);
      var Key_instance;
      function Key_getInstance() {
        if (Key_instance == null)
          new Key();
        return Key_instance;
      }
      function ContinuationInterceptor() {
        Key_getInstance();
      }
      ContinuationInterceptor.$metadata$ = interfaceMeta("ContinuationInterceptor", [Element2]);
      function Key_0() {
      }
      Key_0.$metadata$ = interfaceMeta("Key");
      function Element2() {
      }
      Element2.$metadata$ = interfaceMeta("Element", [CoroutineContext]);
      function CoroutineContext$plus$lambda() {
        return function(acc, element) {
          var removed = acc.minusKey_y21q55_k$(element.get_key_18j28a_k$());
          var tmp;
          if (removed === EmptyCoroutineContext_getInstance()) {
            tmp = element;
          } else {
            var interceptor = removed.get_1pi7hg_k$(Key_getInstance());
            var tmp_0;
            if (interceptor == null) {
              tmp_0 = new CombinedContext(removed, element);
            } else {
              var left2 = removed.minusKey_y21q55_k$(Key_getInstance());
              tmp_0 = left2 === EmptyCoroutineContext_getInstance() ? new CombinedContext(element, interceptor) : new CombinedContext(new CombinedContext(left2, element), interceptor);
            }
            tmp = tmp_0;
          }
          return tmp;
        };
      }
      function CoroutineContext() {
      }
      CoroutineContext.$metadata$ = interfaceMeta("CoroutineContext");
      function _get_serialVersionUID__fhggm9_0($this) {
        return $this.serialVersionUID_1;
      }
      function readResolve_0($this) {
        return EmptyCoroutineContext_getInstance();
      }
      function EmptyCoroutineContext() {
        EmptyCoroutineContext_instance = this;
        this.serialVersionUID_1 = new Long(0, 0);
      }
      EmptyCoroutineContext.prototype.get_1pi7hg_k$ = function(key) {
        return null;
      };
      EmptyCoroutineContext.prototype.fold_6dbyow_k$ = function(initial, operation) {
        return initial;
      };
      EmptyCoroutineContext.prototype.plus_rgw9wi_k$ = function(context) {
        return context;
      };
      EmptyCoroutineContext.prototype.minusKey_y21q55_k$ = function(key) {
        return this;
      };
      EmptyCoroutineContext.prototype.hashCode = function() {
        return 0;
      };
      EmptyCoroutineContext.prototype.toString = function() {
        return "EmptyCoroutineContext";
      };
      EmptyCoroutineContext.$metadata$ = objectMeta("EmptyCoroutineContext", [CoroutineContext, Serializable]);
      var EmptyCoroutineContext_instance;
      function EmptyCoroutineContext_getInstance() {
        if (EmptyCoroutineContext_instance == null)
          new EmptyCoroutineContext();
        return EmptyCoroutineContext_instance;
      }
      function _get_serialVersionUID__fhggm9_1($this) {
        return $this.serialVersionUID_1;
      }
      function Companion_0() {
        Companion_instance_0 = this;
        this.serialVersionUID_1 = new Long(0, 0);
      }
      Companion_0.$metadata$ = objectMeta("Companion");
      var Companion_instance_0;
      function Companion_getInstance_0() {
        if (Companion_instance_0 == null)
          new Companion_0();
        return Companion_instance_0;
      }
      function readResolve_1($this) {
        var tmp$ret$0;
        {
          var tmp0_fold = $this.elements_1;
          var tmp1_fold = EmptyCoroutineContext_getInstance();
          var accumulator = tmp1_fold;
          var indexedObject = tmp0_fold;
          var inductionVariable = 0;
          var last = indexedObject.length;
          while (inductionVariable < last) {
            var element = indexedObject[inductionVariable];
            inductionVariable = inductionVariable + 1 | 0;
            accumulator = accumulator.plus_rgw9wi_k$(element);
          }
          tmp$ret$0 = accumulator;
        }
        return tmp$ret$0;
      }
      function _get_left__d9qyp0($this) {
        return $this.left_1;
      }
      function _get_element__z0t21h($this) {
        return $this.element_1;
      }
      function size($this) {
        var cur = $this;
        var size2 = 2;
        while (true) {
          var tmp = cur.left_1;
          var tmp0_elvis_lhs = tmp instanceof CombinedContext ? tmp : null;
          var tmp_0;
          if (tmp0_elvis_lhs == null) {
            return size2;
          } else {
            tmp_0 = tmp0_elvis_lhs;
          }
          cur = tmp_0;
          var tmp1 = size2;
          size2 = tmp1 + 1 | 0;
        }
      }
      function contains_4($this, element) {
        return equals($this.get_1pi7hg_k$(element.get_key_18j28a_k$()), element);
      }
      function containsAll($this, context) {
        var cur = context;
        while (true) {
          if (!contains_4($this, cur.element_1))
            return false;
          var next = cur.left_1;
          if (next instanceof CombinedContext) {
            cur = next;
          } else {
            return contains_4($this, isInterface(next, Element2) ? next : THROW_CCE());
          }
        }
      }
      function writeReplace($this) {
        var n2 = size($this);
        var tmp$ret$0;
        {
          tmp$ret$0 = fillArrayVal(Array(n2), null);
        }
        var elements = tmp$ret$0;
        var index3 = { _v: 0 };
        $this.fold_6dbyow_k$(Unit_getInstance(), CombinedContext$writeReplace$lambda(elements, index3));
        {
          var tmp0_check = index3._v === n2;
          {
          }
          {
            {
            }
            if (!tmp0_check) {
              var tmp$ret$1;
              {
                tmp$ret$1 = "Check failed.";
              }
              var message = tmp$ret$1;
              throw IllegalStateException_init_$Create$_0(toString_1(message));
            }
          }
        }
        return new Serialized(isArray(elements) ? elements : THROW_CCE());
      }
      function Serialized(elements) {
        Companion_getInstance_0();
        this.elements_1 = elements;
      }
      Serialized.prototype.get_elements_vxwh8g_k$ = function() {
        return this.elements_1;
      };
      Serialized.$metadata$ = classMeta("Serialized", [Serializable]);
      function CombinedContext$toString$lambda() {
        return function(acc, element) {
          var tmp;
          var tmp$ret$0;
          {
            tmp$ret$0 = charSequenceLength(acc) === 0;
          }
          if (tmp$ret$0) {
            tmp = toString_1(element);
          } else {
            tmp = acc + ", " + element;
          }
          return tmp;
        };
      }
      function CombinedContext$writeReplace$lambda($elements, $index) {
        return function(_anonymous_parameter_0__qggqh8, element) {
          var tmp0 = $index._v;
          $index._v = tmp0 + 1 | 0;
          $elements[tmp0] = element;
          return Unit_getInstance();
        };
      }
      function CombinedContext(left2, element) {
        this.left_1 = left2;
        this.element_1 = element;
      }
      CombinedContext.prototype.get_1pi7hg_k$ = function(key) {
        var cur = this;
        while (true) {
          var tmp0_safe_receiver = cur.element_1.get_1pi7hg_k$(key);
          if (tmp0_safe_receiver == null)
            null;
          else {
            var tmp$ret$0;
            {
              {
              }
              return tmp0_safe_receiver;
            }
          }
          var next = cur.left_1;
          if (next instanceof CombinedContext) {
            cur = next;
          } else {
            return next.get_1pi7hg_k$(key);
          }
        }
      };
      CombinedContext.prototype.fold_6dbyow_k$ = function(initial, operation) {
        return operation(this.left_1.fold_6dbyow_k$(initial, operation), this.element_1);
      };
      CombinedContext.prototype.minusKey_y21q55_k$ = function(key) {
        var tmp0_safe_receiver = this.element_1.get_1pi7hg_k$(key);
        if (tmp0_safe_receiver == null)
          null;
        else {
          var tmp$ret$0;
          {
            {
            }
            return this.left_1;
          }
        }
        var newLeft = this.left_1.minusKey_y21q55_k$(key);
        return newLeft === this.left_1 ? this : newLeft === EmptyCoroutineContext_getInstance() ? this.element_1 : new CombinedContext(newLeft, this.element_1);
      };
      CombinedContext.prototype.equals = function(other) {
        var tmp;
        if (this === other) {
          tmp = true;
        } else {
          var tmp_0;
          var tmp_1;
          if (other instanceof CombinedContext) {
            tmp_1 = size(other) === size(this);
          } else {
            tmp_1 = false;
          }
          if (tmp_1) {
            tmp_0 = containsAll(other, this);
          } else {
            tmp_0 = false;
          }
          tmp = tmp_0;
        }
        return tmp;
      };
      CombinedContext.prototype.hashCode = function() {
        return hashCode(this.left_1) + hashCode(this.element_1) | 0;
      };
      CombinedContext.prototype.toString = function() {
        return "[" + this.fold_6dbyow_k$("", CombinedContext$toString$lambda()) + "]";
      };
      CombinedContext.$metadata$ = classMeta("CombinedContext", [CoroutineContext, Serializable]);
      function _get_safeCast__5d4zbz($this) {
        return $this.safeCast_1;
      }
      function _get_topmostKey__fyvvjw($this) {
        return $this.topmostKey_1;
      }
      function AbstractCoroutineContextKey(baseKey, safeCast) {
        this.safeCast_1 = safeCast;
        var tmp = this;
        var tmp_0;
        if (baseKey instanceof AbstractCoroutineContextKey) {
          tmp_0 = baseKey.topmostKey_1;
        } else {
          tmp_0 = baseKey;
        }
        tmp.topmostKey_1 = tmp_0;
      }
      AbstractCoroutineContextKey.prototype.tryCast_hqzvw1_k$ = function(element) {
        return this.safeCast_1(element);
      };
      AbstractCoroutineContextKey.prototype.isSubKey_5an70z_k$ = function(key) {
        return key === this ? true : this.topmostKey_1 === key;
      };
      AbstractCoroutineContextKey.$metadata$ = classMeta("AbstractCoroutineContextKey", [Key_0]);
      function get_COROUTINE_SUSPENDED() {
        return CoroutineSingletons_COROUTINE_SUSPENDED_getInstance();
      }
      var CoroutineSingletons_COROUTINE_SUSPENDED_instance;
      var CoroutineSingletons_UNDECIDED_instance;
      var CoroutineSingletons_RESUMED_instance;
      function values_1() {
        return [CoroutineSingletons_COROUTINE_SUSPENDED_getInstance(), CoroutineSingletons_UNDECIDED_getInstance(), CoroutineSingletons_RESUMED_getInstance()];
      }
      function valueOf_1(value) {
        switch (value) {
          case "COROUTINE_SUSPENDED":
            return CoroutineSingletons_COROUTINE_SUSPENDED_getInstance();
          case "UNDECIDED":
            return CoroutineSingletons_UNDECIDED_getInstance();
          case "RESUMED":
            return CoroutineSingletons_RESUMED_getInstance();
          default:
            CoroutineSingletons_initEntries();
            THROW_ISE();
            break;
        }
      }
      var CoroutineSingletons_entriesInitialized;
      function CoroutineSingletons_initEntries() {
        if (CoroutineSingletons_entriesInitialized)
          return Unit_getInstance();
        CoroutineSingletons_entriesInitialized = true;
        CoroutineSingletons_COROUTINE_SUSPENDED_instance = new CoroutineSingletons("COROUTINE_SUSPENDED", 0);
        CoroutineSingletons_UNDECIDED_instance = new CoroutineSingletons("UNDECIDED", 1);
        CoroutineSingletons_RESUMED_instance = new CoroutineSingletons("RESUMED", 2);
      }
      function CoroutineSingletons(name, ordinal2) {
        Enum.call(this, name, ordinal2);
      }
      CoroutineSingletons.$metadata$ = classMeta("CoroutineSingletons", void 0, void 0, void 0, void 0, Enum.prototype);
      function CoroutineSingletons_COROUTINE_SUSPENDED_getInstance() {
        CoroutineSingletons_initEntries();
        return CoroutineSingletons_COROUTINE_SUSPENDED_instance;
      }
      function CoroutineSingletons_UNDECIDED_getInstance() {
        CoroutineSingletons_initEntries();
        return CoroutineSingletons_UNDECIDED_instance;
      }
      function CoroutineSingletons_RESUMED_getInstance() {
        CoroutineSingletons_initEntries();
        return CoroutineSingletons_RESUMED_instance;
      }
      function and(_this__u8e3s4, other) {
        return toShort(_this__u8e3s4 & other);
      }
      function or(_this__u8e3s4, other) {
        return toShort(_this__u8e3s4 | other);
      }
      function xor(_this__u8e3s4, other) {
        return toShort(_this__u8e3s4 ^ other);
      }
      function inv(_this__u8e3s4) {
        return toShort(~_this__u8e3s4);
      }
      function and_0(_this__u8e3s4, other) {
        return toByte(_this__u8e3s4 & other);
      }
      function or_0(_this__u8e3s4, other) {
        return toByte(_this__u8e3s4 | other);
      }
      function xor_0(_this__u8e3s4, other) {
        return toByte(_this__u8e3s4 ^ other);
      }
      function inv_0(_this__u8e3s4) {
        return toByte(~_this__u8e3s4);
      }
      function ExperimentalTypeInference() {
      }
      ExperimentalTypeInference.prototype.equals = function(other) {
        if (!(other instanceof ExperimentalTypeInference))
          return false;
        var tmp0_other_with_cast = other instanceof ExperimentalTypeInference ? other : THROW_CCE();
        return true;
      };
      ExperimentalTypeInference.prototype.hashCode = function() {
        return 0;
      };
      ExperimentalTypeInference.prototype.toString = function() {
        return "@kotlin.experimental.ExperimentalTypeInference()";
      };
      ExperimentalTypeInference.$metadata$ = classMeta("ExperimentalTypeInference", [Annotation]);
      function RequireKotlin_init_$Init$(version3, message, level, versionKind, errorCode, $mask0, $marker, $this) {
        if (!(($mask0 & 2) === 0))
          message = "";
        if (!(($mask0 & 4) === 0))
          level = DeprecationLevel_ERROR_getInstance();
        if (!(($mask0 & 8) === 0))
          versionKind = RequireKotlinVersionKind_LANGUAGE_VERSION_getInstance();
        if (!(($mask0 & 16) === 0))
          errorCode = -1;
        RequireKotlin.call($this, version3, message, level, versionKind, errorCode);
        return $this;
      }
      function RequireKotlin_init_$Create$(version3, message, level, versionKind, errorCode, $mask0, $marker) {
        return RequireKotlin_init_$Init$(version3, message, level, versionKind, errorCode, $mask0, $marker, Object.create(RequireKotlin.prototype));
      }
      function RequireKotlin(version3, message, level, versionKind, errorCode) {
        this.version_1 = version3;
        this.message_1 = message;
        this.level_1 = level;
        this.versionKind_1 = versionKind;
        this.errorCode_1 = errorCode;
      }
      RequireKotlin.prototype.get_version_72w4j3_k$ = function() {
        return this.version_1;
      };
      RequireKotlin.prototype.get_message_h23axq_k$ = function() {
        return this.message_1;
      };
      RequireKotlin.prototype.get_level_ium7h7_k$ = function() {
        return this.level_1;
      };
      RequireKotlin.prototype.get_versionKind_pab57n_k$ = function() {
        return this.versionKind_1;
      };
      RequireKotlin.prototype.get_errorCode_dyf6uk_k$ = function() {
        return this.errorCode_1;
      };
      RequireKotlin.prototype.equals = function(other) {
        if (!(other instanceof RequireKotlin))
          return false;
        var tmp0_other_with_cast = other instanceof RequireKotlin ? other : THROW_CCE();
        if (!(this.version_1 === tmp0_other_with_cast.version_1))
          return false;
        if (!(this.message_1 === tmp0_other_with_cast.message_1))
          return false;
        if (!this.level_1.equals(tmp0_other_with_cast.level_1))
          return false;
        if (!this.versionKind_1.equals(tmp0_other_with_cast.versionKind_1))
          return false;
        if (!(this.errorCode_1 === tmp0_other_with_cast.errorCode_1))
          return false;
        return true;
      };
      RequireKotlin.prototype.hashCode = function() {
        var result = imul(getStringHashCode("version"), 127) ^ getStringHashCode(this.version_1);
        result = result + (imul(getStringHashCode("message"), 127) ^ getStringHashCode(this.message_1)) | 0;
        result = result + (imul(getStringHashCode("level"), 127) ^ this.level_1.hashCode()) | 0;
        result = result + (imul(getStringHashCode("versionKind"), 127) ^ this.versionKind_1.hashCode()) | 0;
        result = result + (imul(getStringHashCode("errorCode"), 127) ^ this.errorCode_1) | 0;
        return result;
      };
      RequireKotlin.prototype.toString = function() {
        return "@kotlin.internal.RequireKotlin(version=" + this.version_1 + ", message=" + this.message_1 + ", level=" + this.level_1 + ", versionKind=" + this.versionKind_1 + ", errorCode=" + this.errorCode_1 + ")";
      };
      RequireKotlin.$metadata$ = classMeta("RequireKotlin", [Annotation]);
      var RequireKotlinVersionKind_LANGUAGE_VERSION_instance;
      var RequireKotlinVersionKind_COMPILER_VERSION_instance;
      var RequireKotlinVersionKind_API_VERSION_instance;
      function values_2() {
        return [RequireKotlinVersionKind_LANGUAGE_VERSION_getInstance(), RequireKotlinVersionKind_COMPILER_VERSION_getInstance(), RequireKotlinVersionKind_API_VERSION_getInstance()];
      }
      function valueOf_2(value) {
        switch (value) {
          case "LANGUAGE_VERSION":
            return RequireKotlinVersionKind_LANGUAGE_VERSION_getInstance();
          case "COMPILER_VERSION":
            return RequireKotlinVersionKind_COMPILER_VERSION_getInstance();
          case "API_VERSION":
            return RequireKotlinVersionKind_API_VERSION_getInstance();
          default:
            RequireKotlinVersionKind_initEntries();
            THROW_ISE();
            break;
        }
      }
      var RequireKotlinVersionKind_entriesInitialized;
      function RequireKotlinVersionKind_initEntries() {
        if (RequireKotlinVersionKind_entriesInitialized)
          return Unit_getInstance();
        RequireKotlinVersionKind_entriesInitialized = true;
        RequireKotlinVersionKind_LANGUAGE_VERSION_instance = new RequireKotlinVersionKind("LANGUAGE_VERSION", 0);
        RequireKotlinVersionKind_COMPILER_VERSION_instance = new RequireKotlinVersionKind("COMPILER_VERSION", 1);
        RequireKotlinVersionKind_API_VERSION_instance = new RequireKotlinVersionKind("API_VERSION", 2);
      }
      function RequireKotlinVersionKind(name, ordinal2) {
        Enum.call(this, name, ordinal2);
      }
      RequireKotlinVersionKind.$metadata$ = classMeta("RequireKotlinVersionKind", void 0, void 0, void 0, void 0, Enum.prototype);
      function InlineOnly() {
      }
      InlineOnly.prototype.equals = function(other) {
        if (!(other instanceof InlineOnly))
          return false;
        var tmp0_other_with_cast = other instanceof InlineOnly ? other : THROW_CCE();
        return true;
      };
      InlineOnly.prototype.hashCode = function() {
        return 0;
      };
      InlineOnly.prototype.toString = function() {
        return "@kotlin.internal.InlineOnly()";
      };
      InlineOnly.$metadata$ = classMeta("InlineOnly", [Annotation]);
      function LowPriorityInOverloadResolution() {
      }
      LowPriorityInOverloadResolution.prototype.equals = function(other) {
        if (!(other instanceof LowPriorityInOverloadResolution))
          return false;
        var tmp0_other_with_cast = other instanceof LowPriorityInOverloadResolution ? other : THROW_CCE();
        return true;
      };
      LowPriorityInOverloadResolution.prototype.hashCode = function() {
        return 0;
      };
      LowPriorityInOverloadResolution.prototype.toString = function() {
        return "@kotlin.internal.LowPriorityInOverloadResolution()";
      };
      LowPriorityInOverloadResolution.$metadata$ = classMeta("LowPriorityInOverloadResolution", [Annotation]);
      function NoInfer() {
      }
      NoInfer.prototype.equals = function(other) {
        if (!(other instanceof NoInfer))
          return false;
        var tmp0_other_with_cast = other instanceof NoInfer ? other : THROW_CCE();
        return true;
      };
      NoInfer.prototype.hashCode = function() {
        return 0;
      };
      NoInfer.prototype.toString = function() {
        return "@kotlin.internal.NoInfer()";
      };
      NoInfer.$metadata$ = classMeta("NoInfer", [Annotation]);
      function DynamicExtension() {
      }
      DynamicExtension.prototype.equals = function(other) {
        if (!(other instanceof DynamicExtension))
          return false;
        var tmp0_other_with_cast = other instanceof DynamicExtension ? other : THROW_CCE();
        return true;
      };
      DynamicExtension.prototype.hashCode = function() {
        return 0;
      };
      DynamicExtension.prototype.toString = function() {
        return "@kotlin.internal.DynamicExtension()";
      };
      DynamicExtension.$metadata$ = classMeta("DynamicExtension", [Annotation]);
      function ContractsDsl() {
      }
      ContractsDsl.prototype.equals = function(other) {
        if (!(other instanceof ContractsDsl))
          return false;
        var tmp0_other_with_cast = other instanceof ContractsDsl ? other : THROW_CCE();
        return true;
      };
      ContractsDsl.prototype.hashCode = function() {
        return 0;
      };
      ContractsDsl.prototype.toString = function() {
        return "@kotlin.internal.ContractsDsl()";
      };
      ContractsDsl.$metadata$ = classMeta("ContractsDsl", [Annotation]);
      function OnlyInputTypes() {
      }
      OnlyInputTypes.prototype.equals = function(other) {
        if (!(other instanceof OnlyInputTypes))
          return false;
        var tmp0_other_with_cast = other instanceof OnlyInputTypes ? other : THROW_CCE();
        return true;
      };
      OnlyInputTypes.prototype.hashCode = function() {
        return 0;
      };
      OnlyInputTypes.prototype.toString = function() {
        return "@kotlin.internal.OnlyInputTypes()";
      };
      OnlyInputTypes.$metadata$ = classMeta("OnlyInputTypes", [Annotation]);
      function RequireKotlinVersionKind_LANGUAGE_VERSION_getInstance() {
        RequireKotlinVersionKind_initEntries();
        return RequireKotlinVersionKind_LANGUAGE_VERSION_instance;
      }
      function RequireKotlinVersionKind_COMPILER_VERSION_getInstance() {
        RequireKotlinVersionKind_initEntries();
        return RequireKotlinVersionKind_COMPILER_VERSION_instance;
      }
      function RequireKotlinVersionKind_API_VERSION_getInstance() {
        RequireKotlinVersionKind_initEntries();
        return RequireKotlinVersionKind_API_VERSION_instance;
      }
      function _get_serialVersionUID__fhggm9_2($this) {
        return $this.serialVersionUID_1;
      }
      function readResolve_2($this) {
        return Default_getInstance();
      }
      function _get_defaultRandom__d0xjir($this) {
        return $this.defaultRandom_1;
      }
      function Serialized_0() {
        Serialized_instance = this;
        this.serialVersionUID_1 = new Long(0, 0);
      }
      Serialized_0.$metadata$ = objectMeta("Serialized", [Serializable]);
      var Serialized_instance;
      function Serialized_getInstance() {
        if (Serialized_instance == null)
          new Serialized_0();
        return Serialized_instance;
      }
      function writeReplace_0($this) {
        return Serialized_getInstance();
      }
      function Default() {
        Default_instance = this;
        Random.call(this);
        this.defaultRandom_1 = defaultPlatformRandom();
      }
      Default.prototype.nextBits_30zi6g_k$ = function(bitCount) {
        return this.defaultRandom_1.nextBits_30zi6g_k$(bitCount);
      };
      Default.prototype.nextInt_ujorgc_k$ = function() {
        return this.defaultRandom_1.nextInt_ujorgc_k$();
      };
      Default.prototype.nextInt_8t3gcb_k$ = function(until2) {
        return this.defaultRandom_1.nextInt_8t3gcb_k$(until2);
      };
      Default.prototype.nextInt_6ppfmk_k$ = function(from, until2) {
        return this.defaultRandom_1.nextInt_6ppfmk_k$(from, until2);
      };
      Default.prototype.nextLong_njwv0v_k$ = function() {
        return this.defaultRandom_1.nextLong_njwv0v_k$();
      };
      Default.prototype.nextLong_gpvfev_k$ = function(until2) {
        return this.defaultRandom_1.nextLong_gpvfev_k$(until2);
      };
      Default.prototype.nextLong_8yy44j_k$ = function(from, until2) {
        return this.defaultRandom_1.nextLong_8yy44j_k$(from, until2);
      };
      Default.prototype.nextBoolean_nfdk1h_k$ = function() {
        return this.defaultRandom_1.nextBoolean_nfdk1h_k$();
      };
      Default.prototype.nextDouble_s2xvfg_k$ = function() {
        return this.defaultRandom_1.nextDouble_s2xvfg_k$();
      };
      Default.prototype.nextDouble_b5661v_k$ = function(until2) {
        return this.defaultRandom_1.nextDouble_b5661v_k$(until2);
      };
      Default.prototype.nextDouble_2cs2ou_k$ = function(from, until2) {
        return this.defaultRandom_1.nextDouble_2cs2ou_k$(from, until2);
      };
      Default.prototype.nextFloat_jqti5l_k$ = function() {
        return this.defaultRandom_1.nextFloat_jqti5l_k$();
      };
      Default.prototype.nextBytes_7yvat1_k$ = function(array3) {
        return this.defaultRandom_1.nextBytes_7yvat1_k$(array3);
      };
      Default.prototype.nextBytes_oxmcdz_k$ = function(size2) {
        return this.defaultRandom_1.nextBytes_oxmcdz_k$(size2);
      };
      Default.prototype.nextBytes_zhahm3_k$ = function(array3, fromIndex, toIndex) {
        return this.defaultRandom_1.nextBytes_zhahm3_k$(array3, fromIndex, toIndex);
      };
      Default.$metadata$ = objectMeta("Default", [Serializable], void 0, void 0, void 0, Random.prototype);
      var Default_instance;
      function Default_getInstance() {
        if (Default_instance == null)
          new Default();
        return Default_instance;
      }
      function Random() {
        Default_getInstance();
      }
      Random.prototype.nextInt_ujorgc_k$ = function() {
        return this.nextBits_30zi6g_k$(32);
      };
      Random.prototype.nextInt_8t3gcb_k$ = function(until2) {
        return this.nextInt_6ppfmk_k$(0, until2);
      };
      Random.prototype.nextInt_6ppfmk_k$ = function(from, until2) {
        checkRangeBounds(from, until2);
        var n2 = until2 - from | 0;
        if (n2 > 0 ? true : n2 === IntCompanionObject_getInstance().MIN_VALUE_1) {
          var tmp;
          if ((n2 & (-n2 | 0)) === n2) {
            var bitCount = fastLog2(n2);
            tmp = this.nextBits_30zi6g_k$(bitCount);
          } else {
            var v;
            do {
              var bits2 = this.nextInt_ujorgc_k$() >>> 1 | 0;
              v = bits2 % n2 | 0;
            } while (((bits2 - v | 0) + (n2 - 1 | 0) | 0) < 0);
            tmp = v;
          }
          var rnd = tmp;
          return from + rnd | 0;
        } else {
          while (true) {
            var rnd_0 = this.nextInt_ujorgc_k$();
            if (from <= rnd_0 ? rnd_0 < until2 : false)
              return rnd_0;
          }
        }
      };
      Random.prototype.nextLong_njwv0v_k$ = function() {
        var tmp$ret$0;
        {
          var tmp0_plus = toLong(this.nextInt_ujorgc_k$()).shl_po5ip6_k$(32);
          var tmp1_plus = this.nextInt_ujorgc_k$();
          tmp$ret$0 = tmp0_plus.plus_u6jwas_k$(toLong(tmp1_plus));
        }
        return tmp$ret$0;
      };
      Random.prototype.nextLong_gpvfev_k$ = function(until2) {
        return this.nextLong_8yy44j_k$(new Long(0, 0), until2);
      };
      Random.prototype.nextLong_8yy44j_k$ = function(from, until2) {
        checkRangeBounds_0(from, until2);
        var n2 = until2.minus_llf5ei_k$(from);
        if (n2.compareTo_n4fqi2_k$(new Long(0, 0)) > 0) {
          var rnd;
          if (n2.and_jhajnj_k$(n2.unaryMinus_6uz0qp_k$()).equals(n2)) {
            var nLow = n2.toInt_1tsl84_k$();
            var nHigh = n2.ushr_rr8rvr_k$(32).toInt_1tsl84_k$();
            var tmp;
            if (!(nLow === 0)) {
              var bitCount = fastLog2(nLow);
              tmp = toLong(this.nextBits_30zi6g_k$(bitCount)).and_jhajnj_k$(new Long(-1, 0));
            } else if (nHigh === 1) {
              tmp = toLong(this.nextInt_ujorgc_k$()).and_jhajnj_k$(new Long(-1, 0));
            } else {
              var bitCount_0 = fastLog2(nHigh);
              tmp = toLong(this.nextBits_30zi6g_k$(bitCount_0)).shl_po5ip6_k$(32).plus_u6jwas_k$(toLong(this.nextInt_ujorgc_k$()).and_jhajnj_k$(new Long(-1, 0)));
            }
            rnd = tmp;
          } else {
            var v;
            $l$1:
              do {
                $l$0:
                  do {
                    var bits2 = this.nextLong_njwv0v_k$().ushr_rr8rvr_k$(1);
                    v = bits2.rem_9rbcjo_k$(n2);
                  } while (false);
                var tmp_0 = bits2.minus_llf5ei_k$(v);
                var tmp$ret$0;
                {
                  tmp$ret$0 = n2.minus_llf5ei_k$(new Long(1, 0));
                }
              } while (tmp_0.plus_u6jwas_k$(tmp$ret$0).compareTo_n4fqi2_k$(new Long(0, 0)) < 0);
            rnd = v;
          }
          return from.plus_u6jwas_k$(rnd);
        } else {
          while (true) {
            var rnd_0 = this.nextLong_njwv0v_k$();
            if (from.compareTo_n4fqi2_k$(rnd_0) <= 0 ? rnd_0.compareTo_n4fqi2_k$(until2) < 0 : false)
              return rnd_0;
          }
        }
      };
      Random.prototype.nextBoolean_nfdk1h_k$ = function() {
        return !(this.nextBits_30zi6g_k$(1) === 0);
      };
      Random.prototype.nextDouble_s2xvfg_k$ = function() {
        return doubleFromParts(this.nextBits_30zi6g_k$(26), this.nextBits_30zi6g_k$(27));
      };
      Random.prototype.nextDouble_b5661v_k$ = function(until2) {
        return this.nextDouble_2cs2ou_k$(0, until2);
      };
      Random.prototype.nextDouble_2cs2ou_k$ = function(from, until2) {
        checkRangeBounds_1(from, until2);
        var size2 = until2 - from;
        var tmp;
        if ((isInfinite(size2) ? isFinite2(from) : false) ? isFinite2(until2) : false) {
          var r1 = this.nextDouble_s2xvfg_k$() * (until2 / 2 - from / 2);
          tmp = from + r1 + r1;
        } else {
          tmp = from + this.nextDouble_s2xvfg_k$() * size2;
        }
        var r = tmp;
        return r >= until2 ? nextDown(until2) : r;
      };
      Random.prototype.nextFloat_jqti5l_k$ = function() {
        return this.nextBits_30zi6g_k$(24) / 16777216;
      };
      Random.prototype.nextBytes_zhahm3_k$ = function(array3, fromIndex, toIndex) {
        {
          var tmp0_require = (0 <= fromIndex ? fromIndex <= array3.length : false) ? 0 <= toIndex ? toIndex <= array3.length : false : false;
          {
          }
          if (!tmp0_require) {
            var tmp$ret$0;
            {
              tmp$ret$0 = "fromIndex (" + fromIndex + ") or toIndex (" + toIndex + ") are out of range: 0.." + array3.length + ".";
            }
            var message = tmp$ret$0;
            throw IllegalArgumentException_init_$Create$_0(toString_1(message));
          }
        }
        {
          var tmp1_require = fromIndex <= toIndex;
          {
          }
          if (!tmp1_require) {
            var tmp$ret$1;
            {
              tmp$ret$1 = "fromIndex (" + fromIndex + ") must be not greater than toIndex (" + toIndex + ").";
            }
            var message_0 = tmp$ret$1;
            throw IllegalArgumentException_init_$Create$_0(toString_1(message_0));
          }
        }
        var steps = (toIndex - fromIndex | 0) / 4 | 0;
        var position = fromIndex;
        {
          {
          }
          var inductionVariable = 0;
          if (inductionVariable < steps)
            do {
              var index3 = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              {
                var v = this.nextInt_ujorgc_k$();
                array3[position] = toByte(v);
                array3[position + 1 | 0] = toByte(v >>> 8 | 0);
                array3[position + 2 | 0] = toByte(v >>> 16 | 0);
                array3[position + 3 | 0] = toByte(v >>> 24 | 0);
                position = position + 4 | 0;
              }
            } while (inductionVariable < steps);
        }
        var remainder = toIndex - position | 0;
        var vr = this.nextBits_30zi6g_k$(imul(remainder, 8));
        var inductionVariable_0 = 0;
        if (inductionVariable_0 < remainder)
          do {
            var i = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            array3[position + i | 0] = toByte(vr >>> imul(i, 8) | 0);
          } while (inductionVariable_0 < remainder);
        return array3;
      };
      Random.prototype.nextBytes$default_rw0xws_k$ = function(array3, fromIndex, toIndex, $mask0, $handler) {
        if (!(($mask0 & 2) === 0))
          fromIndex = 0;
        if (!(($mask0 & 4) === 0))
          toIndex = array3.length;
        return $handler == null ? this.nextBytes_zhahm3_k$(array3, fromIndex, toIndex) : $handler(array3, fromIndex, toIndex);
      };
      Random.prototype.nextBytes_7yvat1_k$ = function(array3) {
        return this.nextBytes_zhahm3_k$(array3, 0, array3.length);
      };
      Random.prototype.nextBytes_oxmcdz_k$ = function(size2) {
        return this.nextBytes_7yvat1_k$(new Int8Array(size2));
      };
      Random.$metadata$ = classMeta("Random");
      function checkRangeBounds(from, until2) {
        var tmp0_require = until2 > from;
        {
        }
        var tmp;
        if (!tmp0_require) {
          var tmp$ret$0;
          {
            tmp$ret$0 = boundsErrorMessage(from, until2);
          }
          var message = tmp$ret$0;
          throw IllegalArgumentException_init_$Create$_0(toString_1(message));
        }
        return tmp;
      }
      function fastLog2(value) {
        var tmp$ret$0;
        {
          tmp$ret$0 = clz32(value);
        }
        return 31 - tmp$ret$0 | 0;
      }
      function checkRangeBounds_0(from, until2) {
        var tmp0_require = until2.compareTo_n4fqi2_k$(from) > 0;
        {
        }
        var tmp;
        if (!tmp0_require) {
          var tmp$ret$0;
          {
            tmp$ret$0 = boundsErrorMessage(from, until2);
          }
          var message = tmp$ret$0;
          throw IllegalArgumentException_init_$Create$_0(toString_1(message));
        }
        return tmp;
      }
      function checkRangeBounds_1(from, until2) {
        var tmp0_require = until2 > from;
        {
        }
        var tmp;
        if (!tmp0_require) {
          var tmp$ret$0;
          {
            tmp$ret$0 = boundsErrorMessage(from, until2);
          }
          var message = tmp$ret$0;
          throw IllegalArgumentException_init_$Create$_0(toString_1(message));
        }
        return tmp;
      }
      function boundsErrorMessage(from, until2) {
        return "Random range is empty: [" + toString_1(from) + ", " + toString_1(until2) + ").";
      }
      function Random_0(seed) {
        return XorWowRandom_init_$Create$(seed, seed >> 31);
      }
      function takeUpperBits(_this__u8e3s4, bitCount) {
        return (_this__u8e3s4 >>> (32 - bitCount | 0) | 0) & (-bitCount | 0) >> 31;
      }
      function _get_serialVersionUID__fhggm9_3($this) {
        return $this.serialVersionUID_1;
      }
      function _set_x__db55ql($this, _set____db54di) {
        $this.x_1 = _set____db54di;
      }
      function _get_x__7mlp09($this) {
        return $this.x_1;
      }
      function _set_y__db55rg($this, _set____db54di) {
        $this.y_1 = _set____db54di;
      }
      function _get_y__7mlp14($this) {
        return $this.y_1;
      }
      function _set_z__db55sb($this, _set____db54di) {
        $this.z_1 = _set____db54di;
      }
      function _get_z__7mlp1z($this) {
        return $this.z_1;
      }
      function _set_w__db55pq($this, _set____db54di) {
        $this.w_1 = _set____db54di;
      }
      function _get_w__7mloze($this) {
        return $this.w_1;
      }
      function _set_v__db55ov($this, _set____db54di) {
        $this.v_1 = _set____db54di;
      }
      function _get_v__7mloyj($this) {
        return $this.v_1;
      }
      function _set_addend__hcd0al($this, _set____db54di) {
        $this.addend_1 = _set____db54di;
      }
      function _get_addend__it3kxd($this) {
        return $this.addend_1;
      }
      function XorWowRandom_init_$Init$(seed1, seed2, $this) {
        XorWowRandom.call($this, seed1, seed2, 0, 0, ~seed1, seed1 << 10 ^ (seed2 >>> 4 | 0));
        return $this;
      }
      function XorWowRandom_init_$Create$(seed1, seed2) {
        return XorWowRandom_init_$Init$(seed1, seed2, Object.create(XorWowRandom.prototype));
      }
      function Companion_1() {
        Companion_instance_1 = this;
        this.serialVersionUID_1 = new Long(0, 0);
      }
      Companion_1.$metadata$ = objectMeta("Companion");
      var Companion_instance_1;
      function Companion_getInstance_1() {
        if (Companion_instance_1 == null)
          new Companion_1();
        return Companion_instance_1;
      }
      function XorWowRandom(x4, y4, z, w, v, addend) {
        Companion_getInstance_1();
        Random.call(this);
        this.x_1 = x4;
        this.y_1 = y4;
        this.z_1 = z;
        this.w_1 = w;
        this.v_1 = v;
        this.addend_1 = addend;
        {
          var tmp0_require = !((this.x_1 | this.y_1 | this.z_1 | this.w_1 | this.v_1) === 0);
          {
          }
          if (!tmp0_require) {
            var tmp$ret$0;
            {
              tmp$ret$0 = "Initial state must have at least one non-zero element.";
            }
            var message = tmp$ret$0;
            throw IllegalArgumentException_init_$Create$_0(toString_1(message));
          }
        }
        {
          {
          }
          var inductionVariable = 0;
          if (inductionVariable < 64)
            do {
              var index3 = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              {
                this.nextInt_ujorgc_k$();
              }
            } while (inductionVariable < 64);
        }
      }
      XorWowRandom.prototype.nextInt_ujorgc_k$ = function() {
        var t = this.x_1;
        t = t ^ (t >>> 2 | 0);
        this.x_1 = this.y_1;
        this.y_1 = this.z_1;
        this.z_1 = this.w_1;
        var v0 = this.v_1;
        this.w_1 = v0;
        t = t ^ t << 1 ^ v0 ^ v0 << 4;
        this.v_1 = t;
        var tmp0_this = this;
        tmp0_this.addend_1 = tmp0_this.addend_1 + 362437 | 0;
        return t + this.addend_1 | 0;
      };
      XorWowRandom.prototype.nextBits_30zi6g_k$ = function(bitCount) {
        return takeUpperBits(this.nextInt_ujorgc_k$(), bitCount);
      };
      XorWowRandom.$metadata$ = classMeta("XorWowRandom", [Serializable], void 0, void 0, void 0, Random.prototype);
      function KClassifier() {
      }
      KClassifier.$metadata$ = interfaceMeta("KClassifier");
      function KTypeParameter() {
      }
      KTypeParameter.$metadata$ = interfaceMeta("KTypeParameter", [KClassifier]);
      function Companion_2() {
        Companion_instance_2 = this;
        this.star_1 = new KTypeProjection(null, null);
      }
      Companion_2.prototype.get_star_woujdn_k$ = function() {
        return this.star_1;
      };
      Companion_2.prototype.get_STAR_wo9fa3_k$ = function() {
        return this.star_1;
      };
      Companion_2.prototype.invariant_d1std2_k$ = function(type2) {
        return new KTypeProjection(KVariance_INVARIANT_getInstance(), type2);
      };
      Companion_2.prototype.contravariant_lnygde_k$ = function(type2) {
        return new KTypeProjection(KVariance_IN_getInstance(), type2);
      };
      Companion_2.prototype.covariant_ne14kt_k$ = function(type2) {
        return new KTypeProjection(KVariance_OUT_getInstance(), type2);
      };
      Companion_2.$metadata$ = objectMeta("Companion");
      var Companion_instance_2;
      function Companion_getInstance_2() {
        if (Companion_instance_2 == null)
          new Companion_2();
        return Companion_instance_2;
      }
      function KTypeProjection(variance2, type2) {
        Companion_getInstance_2();
        this.variance_1 = variance2;
        this.type_1 = type2;
        {
          var tmp0_require = this.variance_1 == null === (this.type_1 == null);
          {
          }
          if (!tmp0_require) {
            var tmp$ret$0;
            {
              tmp$ret$0 = this.variance_1 == null ? "Star projection must have no type specified." : "The projection variance " + this.variance_1 + " requires type to be specified.";
            }
            var message = tmp$ret$0;
            throw IllegalArgumentException_init_$Create$_0(toString_1(message));
          }
        }
      }
      KTypeProjection.prototype.get_variance_ik7ku2_k$ = function() {
        return this.variance_1;
      };
      KTypeProjection.prototype.get_type_wovaf7_k$ = function() {
        return this.type_1;
      };
      KTypeProjection.prototype.toString = function() {
        var tmp0_subject = this.variance_1;
        var tmp0 = tmp0_subject == null ? -1 : tmp0_subject.get_ordinal_ip24qg_k$();
        var tmp;
        switch (tmp0) {
          case -1:
            tmp = "*";
            break;
          case 0:
            tmp = toString_0(this.type_1);
            break;
          case 1:
            tmp = "in " + this.type_1;
            break;
          case 2:
            tmp = "out " + this.type_1;
            break;
          default:
            noWhenBranchMatchedException();
            break;
        }
        return tmp;
      };
      KTypeProjection.prototype.component1_7eebsc_k$ = function() {
        return this.variance_1;
      };
      KTypeProjection.prototype.component2_7eebsb_k$ = function() {
        return this.type_1;
      };
      KTypeProjection.prototype.copy_luz5xs_k$ = function(variance2, type2) {
        return new KTypeProjection(variance2, type2);
      };
      KTypeProjection.prototype.copy$default_yujqmj_k$ = function(variance2, type2, $mask0, $handler) {
        if (!(($mask0 & 1) === 0))
          variance2 = this.variance_1;
        if (!(($mask0 & 2) === 0))
          type2 = this.type_1;
        return this.copy_luz5xs_k$(variance2, type2);
      };
      KTypeProjection.prototype.hashCode = function() {
        var result = this.variance_1 == null ? 0 : this.variance_1.hashCode();
        result = imul(result, 31) + (this.type_1 == null ? 0 : hashCode(this.type_1)) | 0;
        return result;
      };
      KTypeProjection.prototype.equals = function(other) {
        if (this === other)
          return true;
        if (!(other instanceof KTypeProjection))
          return false;
        var tmp0_other_with_cast = other instanceof KTypeProjection ? other : THROW_CCE();
        if (!equals(this.variance_1, tmp0_other_with_cast.variance_1))
          return false;
        if (!equals(this.type_1, tmp0_other_with_cast.type_1))
          return false;
        return true;
      };
      KTypeProjection.$metadata$ = classMeta("KTypeProjection");
      var KVariance_INVARIANT_instance;
      var KVariance_IN_instance;
      var KVariance_OUT_instance;
      function values_3() {
        return [KVariance_INVARIANT_getInstance(), KVariance_IN_getInstance(), KVariance_OUT_getInstance()];
      }
      function valueOf_3(value) {
        switch (value) {
          case "INVARIANT":
            return KVariance_INVARIANT_getInstance();
          case "IN":
            return KVariance_IN_getInstance();
          case "OUT":
            return KVariance_OUT_getInstance();
          default:
            KVariance_initEntries();
            THROW_ISE();
            break;
        }
      }
      var KVariance_entriesInitialized;
      function KVariance_initEntries() {
        if (KVariance_entriesInitialized)
          return Unit_getInstance();
        KVariance_entriesInitialized = true;
        KVariance_INVARIANT_instance = new KVariance("INVARIANT", 0);
        KVariance_IN_instance = new KVariance("IN", 1);
        KVariance_OUT_instance = new KVariance("OUT", 2);
      }
      function KVariance(name, ordinal2) {
        Enum.call(this, name, ordinal2);
      }
      KVariance.$metadata$ = classMeta("KVariance", void 0, void 0, void 0, void 0, Enum.prototype);
      function KVariance_INVARIANT_getInstance() {
        KVariance_initEntries();
        return KVariance_INVARIANT_instance;
      }
      function KVariance_IN_getInstance() {
        KVariance_initEntries();
        return KVariance_IN_instance;
      }
      function KVariance_OUT_getInstance() {
        KVariance_initEntries();
        return KVariance_OUT_instance;
      }
      function appendElement(_this__u8e3s4, element, transform2) {
        if (!(transform2 == null)) {
          _this__u8e3s4.append_oz4qxs_k$(transform2(element));
        } else {
          if (element == null ? true : isCharSequence(element)) {
            _this__u8e3s4.append_oz4qxs_k$(element);
          } else {
            if (element instanceof Char_0) {
              _this__u8e3s4.append_t8oh9e_k$(element.value_1);
            } else {
              _this__u8e3s4.append_oz4qxs_k$(toString_0(element));
            }
          }
        }
      }
      function isEmpty_0(_this__u8e3s4) {
        return charSequenceLength(_this__u8e3s4) === 0;
      }
      function get_lastIndex_7(_this__u8e3s4) {
        return charSequenceLength(_this__u8e3s4) - 1 | 0;
      }
      function get_UNDEFINED_RESULT() {
        init_properties_DeepRecursive_kt_b2anle();
        return UNDEFINED_RESULT;
      }
      var UNDEFINED_RESULT;
      var properties_initialized_DeepRecursive_kt_5z0al2;
      function init_properties_DeepRecursive_kt_b2anle() {
        if (properties_initialized_DeepRecursive_kt_5z0al2) {
        } else {
          properties_initialized_DeepRecursive_kt_5z0al2 = true;
          var tmp$ret$0;
          {
            var tmp0_success = Companion_getInstance_3();
            var tmp1_success = get_COROUTINE_SUSPENDED();
            tmp$ret$0 = _Result___init__impl__xyqfz8(tmp1_success);
          }
          UNDEFINED_RESULT = tmp$ret$0;
        }
      }
      function check(value) {
        {
        }
        {
          {
          }
          if (!value) {
            var tmp$ret$0;
            {
              tmp$ret$0 = "Check failed.";
            }
            var message = tmp$ret$0;
            throw IllegalStateException_init_$Create$_0(toString_1(message));
          }
        }
      }
      function check_0(value, lazyMessage) {
        {
        }
        if (!value) {
          var message = lazyMessage();
          throw IllegalStateException_init_$Create$_0(toString_1(message));
        }
      }
      function require_0(value, lazyMessage) {
        {
        }
        if (!value) {
          var message = lazyMessage();
          throw IllegalArgumentException_init_$Create$_0(toString_1(message));
        }
      }
      function error(message) {
        throw IllegalStateException_init_$Create$_0(toString_1(message));
      }
      function _Result___init__impl__xyqfz8(value) {
        return value;
      }
      function _Result___get_value__impl__bjfvqg($this) {
        return $this;
      }
      function _Result___get_isSuccess__impl__sndoy8($this) {
        var tmp = _Result___get_value__impl__bjfvqg($this);
        return !(tmp instanceof Failure);
      }
      function _Result___get_isFailure__impl__jpiriv($this) {
        var tmp = _Result___get_value__impl__bjfvqg($this);
        return tmp instanceof Failure;
      }
      function Result__getOrNull_impl_x6tyqe($this) {
        var tmp;
        if (_Result___get_isFailure__impl__jpiriv($this)) {
          tmp = null;
        } else {
          var tmp_0 = _Result___get_value__impl__bjfvqg($this);
          tmp = (tmp_0 == null ? true : isObject2(tmp_0)) ? tmp_0 : THROW_CCE();
        }
        return tmp;
      }
      function Result__exceptionOrNull_impl_p6xea9($this) {
        var tmp0_subject = _Result___get_value__impl__bjfvqg($this);
        var tmp;
        if (tmp0_subject instanceof Failure) {
          tmp = _Result___get_value__impl__bjfvqg($this).exception_1;
        } else {
          tmp = null;
        }
        return tmp;
      }
      function Result__toString_impl_yu5r8k($this) {
        var tmp0_subject = _Result___get_value__impl__bjfvqg($this);
        var tmp;
        if (tmp0_subject instanceof Failure) {
          tmp = toString_1(_Result___get_value__impl__bjfvqg($this));
        } else {
          tmp = "Success(" + toString_0(_Result___get_value__impl__bjfvqg($this)) + ")";
        }
        return tmp;
      }
      function Companion_3() {
        Companion_instance_3 = this;
      }
      Companion_3.prototype.success_5n1c7s_k$ = function(value) {
        return _Result___init__impl__xyqfz8(value);
      };
      Companion_3.prototype.failure_tk7s8q_k$ = function(exception) {
        return _Result___init__impl__xyqfz8(createFailure(exception));
      };
      Companion_3.$metadata$ = objectMeta("Companion");
      var Companion_instance_3;
      function Companion_getInstance_3() {
        if (Companion_instance_3 == null)
          new Companion_3();
        return Companion_instance_3;
      }
      function Failure(exception) {
        this.exception_1 = exception;
      }
      Failure.prototype.get_exception_x0n6w6_k$ = function() {
        return this.exception_1;
      };
      Failure.prototype.equals = function(other) {
        var tmp;
        if (other instanceof Failure) {
          tmp = equals(this.exception_1, other.exception_1);
        } else {
          tmp = false;
        }
        return tmp;
      };
      Failure.prototype.hashCode = function() {
        return hashCode(this.exception_1);
      };
      Failure.prototype.toString = function() {
        return "Failure(" + this.exception_1 + ")";
      };
      Failure.$metadata$ = classMeta("Failure", [Serializable]);
      function Result__hashCode_impl_d2zufp($this) {
        return $this == null ? 0 : hashCode($this);
      }
      function Result__equals_impl_bxgmep($this, other) {
        if (!(other instanceof Result))
          return false;
        var tmp0_other_with_cast = other instanceof Result ? other.value_1 : THROW_CCE();
        if (!equals($this, tmp0_other_with_cast))
          return false;
        return true;
      }
      function Result(value) {
        Companion_getInstance_3();
        this.value_1 = value;
      }
      Result.prototype.toString = function() {
        return Result__toString_impl_yu5r8k(this.value_1);
      };
      Result.prototype.hashCode = function() {
        return Result__hashCode_impl_d2zufp(this.value_1);
      };
      Result.prototype.equals = function(other) {
        return Result__equals_impl_bxgmep(this.value_1, other);
      };
      Result.$metadata$ = classMeta("Result", [Serializable]);
      function createFailure(exception) {
        return new Failure(exception);
      }
      function getOrThrow(_this__u8e3s4) {
        throwOnFailure(_this__u8e3s4);
        var tmp = _Result___get_value__impl__bjfvqg(_this__u8e3s4);
        return (tmp == null ? true : isObject2(tmp)) ? tmp : THROW_CCE();
      }
      function throwOnFailure(_this__u8e3s4) {
        var tmp = _Result___get_value__impl__bjfvqg(_this__u8e3s4);
        if (tmp instanceof Failure)
          throw _Result___get_value__impl__bjfvqg(_this__u8e3s4).exception_1;
      }
      function run(block) {
        {
        }
        return block();
      }
      function TODO() {
        throw NotImplementedError_init_$Create$(null, 1, null);
      }
      function NotImplementedError_init_$Init$(message, $mask0, $marker, $this) {
        if (!(($mask0 & 1) === 0))
          message = "An operation is not implemented.";
        NotImplementedError.call($this, message);
        return $this;
      }
      function NotImplementedError_init_$Create$(message, $mask0, $marker) {
        var tmp = NotImplementedError_init_$Init$(message, $mask0, $marker, Object.create(NotImplementedError.prototype));
        captureStack(tmp, NotImplementedError_init_$Create$);
        return tmp;
      }
      function NotImplementedError(message) {
        Error_init_$Init$_0(message, this);
        captureStack(this, NotImplementedError);
      }
      NotImplementedError.$metadata$ = classMeta("NotImplementedError", void 0, void 0, void 0, void 0, Error_0.prototype);
      function let_0(_this__u8e3s4, block) {
        {
        }
        return block(_this__u8e3s4);
      }
      function apply(_this__u8e3s4, block) {
        {
        }
        block(_this__u8e3s4);
        return _this__u8e3s4;
      }
      function repeat(times, action) {
        {
        }
        var inductionVariable = 0;
        if (inductionVariable < times)
          do {
            var index3 = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            action(index3);
          } while (inductionVariable < times);
      }
      function with_0(receiver, block) {
        {
        }
        return block(receiver);
      }
      function run_0(_this__u8e3s4, block) {
        {
        }
        return block(_this__u8e3s4);
      }
      function also(_this__u8e3s4, block) {
        {
        }
        block(_this__u8e3s4);
        return _this__u8e3s4;
      }
      function _UByte___init__impl__g9hnc4(data) {
        return data;
      }
      function _UByte___get_data__impl__jof9qr($this) {
        return $this;
      }
      function Companion_4() {
        Companion_instance_4 = this;
        this.MIN_VALUE_1 = _UByte___init__impl__g9hnc4(0);
        this.MAX_VALUE_1 = _UByte___init__impl__g9hnc4(-1);
        this.SIZE_BYTES_1 = 1;
        this.SIZE_BITS_1 = 8;
      }
      Companion_4.prototype.get_MIN_VALUE_p0dmjb_k$ = function() {
        return this.MIN_VALUE_1;
      };
      Companion_4.prototype.get_MAX_VALUE_4mpz45_k$ = function() {
        return this.MAX_VALUE_1;
      };
      Companion_4.prototype.get_SIZE_BYTES_qphg4q_k$ = function() {
        return this.SIZE_BYTES_1;
      };
      Companion_4.prototype.get_SIZE_BITS_7qhjj9_k$ = function() {
        return this.SIZE_BITS_1;
      };
      Companion_4.$metadata$ = objectMeta("Companion");
      var Companion_instance_4;
      function Companion_getInstance_4() {
        if (Companion_instance_4 == null)
          new Companion_4();
        return Companion_instance_4;
      }
      function UByte__compareTo_impl_5w5192($this, other) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UByte___get_data__impl__jof9qr($this) & 255;
        }
        var tmp = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = _UByte___get_data__impl__jof9qr(other) & 255;
        }
        return compareTo_0(tmp, tmp$ret$1);
      }
      function UByte__compareTo_impl_5w5192_0($this, other) {
        var tmp = $this.data_1;
        return UByte__compareTo_impl_5w5192(tmp, other instanceof UByte ? other.data_1 : THROW_CCE());
      }
      function UByte__compareTo_impl_5w5192_1($this, other) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UByte___get_data__impl__jof9qr($this) & 255;
        }
        var tmp = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = _UShort___get_data__impl__g0245(other) & 65535;
        }
        return compareTo_0(tmp, tmp$ret$1);
      }
      function UByte__compareTo_impl_5w5192_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_compareTo = tmp$ret$0;
          tmp$ret$1 = uintCompare(_UInt___get_data__impl__f0vqqw(tmp0_compareTo), _UInt___get_data__impl__f0vqqw(other));
        }
        return tmp$ret$1;
      }
      function UByte__compareTo_impl_5w5192_3($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr($this)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_compareTo = tmp$ret$0;
          tmp$ret$1 = ulongCompare(_ULong___get_data__impl__fggpzb(tmp0_compareTo), _ULong___get_data__impl__fggpzb(other));
        }
        return tmp$ret$1;
      }
      function UByte__plus_impl_y9dsom($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_plus = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp1_plus = tmp$ret$1;
          tmp$ret$2 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_plus) + _UInt___get_data__impl__f0vqqw(tmp1_plus) | 0);
        }
        return tmp$ret$2;
      }
      function UByte__plus_impl_y9dsom_0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_plus = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp1_plus = tmp$ret$1;
          tmp$ret$2 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_plus) + _UInt___get_data__impl__f0vqqw(tmp1_plus) | 0);
        }
        return tmp$ret$2;
      }
      function UByte__plus_impl_y9dsom_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_plus = tmp$ret$0;
          tmp$ret$1 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_plus) + _UInt___get_data__impl__f0vqqw(other) | 0);
        }
        return tmp$ret$1;
      }
      function UByte__plus_impl_y9dsom_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr($this)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_plus = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_plus).plus_u6jwas_k$(_ULong___get_data__impl__fggpzb(other)));
        }
        return tmp$ret$1;
      }
      function UByte__minus_impl_qw5fay($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_minus = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp1_minus = tmp$ret$1;
          tmp$ret$2 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_minus) - _UInt___get_data__impl__f0vqqw(tmp1_minus) | 0);
        }
        return tmp$ret$2;
      }
      function UByte__minus_impl_qw5fay_0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_minus = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp1_minus = tmp$ret$1;
          tmp$ret$2 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_minus) - _UInt___get_data__impl__f0vqqw(tmp1_minus) | 0);
        }
        return tmp$ret$2;
      }
      function UByte__minus_impl_qw5fay_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_minus = tmp$ret$0;
          tmp$ret$1 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_minus) - _UInt___get_data__impl__f0vqqw(other) | 0);
        }
        return tmp$ret$1;
      }
      function UByte__minus_impl_qw5fay_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr($this)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_minus = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_minus).minus_llf5ei_k$(_ULong___get_data__impl__fggpzb(other)));
        }
        return tmp$ret$1;
      }
      function UByte__times_impl_olmv1g($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_times = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp1_times = tmp$ret$1;
          tmp$ret$2 = _UInt___init__impl__l7qpdl(imul(_UInt___get_data__impl__f0vqqw(tmp0_times), _UInt___get_data__impl__f0vqqw(tmp1_times)));
        }
        return tmp$ret$2;
      }
      function UByte__times_impl_olmv1g_0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_times = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp1_times = tmp$ret$1;
          tmp$ret$2 = _UInt___init__impl__l7qpdl(imul(_UInt___get_data__impl__f0vqqw(tmp0_times), _UInt___get_data__impl__f0vqqw(tmp1_times)));
        }
        return tmp$ret$2;
      }
      function UByte__times_impl_olmv1g_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_times = tmp$ret$0;
          tmp$ret$1 = _UInt___init__impl__l7qpdl(imul(_UInt___get_data__impl__f0vqqw(tmp0_times), _UInt___get_data__impl__f0vqqw(other)));
        }
        return tmp$ret$1;
      }
      function UByte__times_impl_olmv1g_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr($this)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_times = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_times).times_2zfqpc_k$(_ULong___get_data__impl__fggpzb(other)));
        }
        return tmp$ret$1;
      }
      function UByte__div_impl_fvt4lj($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_div = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp1_div = tmp$ret$1;
          tmp$ret$2 = uintDivide(tmp0_div, tmp1_div);
        }
        return tmp$ret$2;
      }
      function UByte__div_impl_fvt4lj_0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_div = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp1_div = tmp$ret$1;
          tmp$ret$2 = uintDivide(tmp0_div, tmp1_div);
        }
        return tmp$ret$2;
      }
      function UByte__div_impl_fvt4lj_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_div = tmp$ret$0;
          tmp$ret$1 = uintDivide(tmp0_div, other);
        }
        return tmp$ret$1;
      }
      function UByte__div_impl_fvt4lj_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr($this)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_div = tmp$ret$0;
          tmp$ret$1 = ulongDivide(tmp0_div, other);
        }
        return tmp$ret$1;
      }
      function UByte__rem_impl_uhmi28($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_rem = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp1_rem = tmp$ret$1;
          tmp$ret$2 = uintRemainder(tmp0_rem, tmp1_rem);
        }
        return tmp$ret$2;
      }
      function UByte__rem_impl_uhmi28_0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_rem = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp1_rem = tmp$ret$1;
          tmp$ret$2 = uintRemainder(tmp0_rem, tmp1_rem);
        }
        return tmp$ret$2;
      }
      function UByte__rem_impl_uhmi28_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_rem = tmp$ret$0;
          tmp$ret$1 = uintRemainder(tmp0_rem, other);
        }
        return tmp$ret$1;
      }
      function UByte__rem_impl_uhmi28_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr($this)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_rem = tmp$ret$0;
          tmp$ret$1 = ulongRemainder(tmp0_rem, other);
        }
        return tmp$ret$1;
      }
      function UByte__floorDiv_impl_twf9fv($this, other) {
        var tmp$ret$3;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp1_floorDiv = tmp$ret$1;
          var tmp$ret$2;
          {
            tmp$ret$2 = uintDivide(tmp0_floorDiv, tmp1_floorDiv);
          }
          tmp$ret$3 = tmp$ret$2;
        }
        return tmp$ret$3;
      }
      function UByte__floorDiv_impl_twf9fv_0($this, other) {
        var tmp$ret$3;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp1_floorDiv = tmp$ret$1;
          var tmp$ret$2;
          {
            tmp$ret$2 = uintDivide(tmp0_floorDiv, tmp1_floorDiv);
          }
          tmp$ret$3 = tmp$ret$2;
        }
        return tmp$ret$3;
      }
      function UByte__floorDiv_impl_twf9fv_1($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = uintDivide(tmp0_floorDiv, other);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function UByte__floorDiv_impl_twf9fv_2($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr($this)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = ulongDivide(tmp0_floorDiv, other);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function UByte__mod_impl_w36moo($this, other) {
        var tmp$ret$5;
        {
          var tmp$ret$3;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
            }
            var tmp0_mod = tmp$ret$0;
            var tmp$ret$1;
            {
              tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
            }
            var tmp1_mod = tmp$ret$1;
            var tmp$ret$2;
            {
              tmp$ret$2 = uintRemainder(tmp0_mod, tmp1_mod);
            }
            tmp$ret$3 = tmp$ret$2;
          }
          var tmp3_toUByte = tmp$ret$3;
          var tmp$ret$4;
          {
            var tmp2_toUByte = _UInt___get_data__impl__f0vqqw(tmp3_toUByte);
            tmp$ret$4 = _UByte___init__impl__g9hnc4(toByte(tmp2_toUByte));
          }
          tmp$ret$5 = tmp$ret$4;
        }
        return tmp$ret$5;
      }
      function UByte__mod_impl_w36moo_0($this, other) {
        var tmp$ret$5;
        {
          var tmp$ret$3;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
            }
            var tmp0_mod = tmp$ret$0;
            var tmp$ret$1;
            {
              tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
            }
            var tmp1_mod = tmp$ret$1;
            var tmp$ret$2;
            {
              tmp$ret$2 = uintRemainder(tmp0_mod, tmp1_mod);
            }
            tmp$ret$3 = tmp$ret$2;
          }
          var tmp3_toUShort = tmp$ret$3;
          var tmp$ret$4;
          {
            var tmp2_toUShort = _UInt___get_data__impl__f0vqqw(tmp3_toUShort);
            tmp$ret$4 = _UShort___init__impl__jigrne(toShort(tmp2_toUShort));
          }
          tmp$ret$5 = tmp$ret$4;
        }
        return tmp$ret$5;
      }
      function UByte__mod_impl_w36moo_1($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
          }
          var tmp0_mod = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = uintRemainder(tmp0_mod, other);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function UByte__mod_impl_w36moo_2($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr($this)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_mod = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = ulongRemainder(tmp0_mod, other);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function UByte__inc_impl_kgwblg($this) {
        return _UByte___init__impl__g9hnc4(numberToByte(_UByte___get_data__impl__jof9qr($this) + 1));
      }
      function UByte__dec_impl_ck5108($this) {
        return _UByte___init__impl__g9hnc4(numberToByte(_UByte___get_data__impl__jof9qr($this) - 1));
      }
      function UByte__rangeTo_impl_pp550u($this, other) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
        }
        var tmp = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
        }
        return new UIntRange(tmp, tmp$ret$1);
      }
      function UByte__and_impl_xjlq7n($this, other) {
        var tmp$ret$0;
        {
          var tmp0_and = _UByte___get_data__impl__jof9qr($this);
          var tmp1_and = _UByte___get_data__impl__jof9qr(other);
          tmp$ret$0 = toByte(tmp0_and & tmp1_and);
        }
        return _UByte___init__impl__g9hnc4(tmp$ret$0);
      }
      function UByte__or_impl_hh1w25($this, other) {
        var tmp$ret$0;
        {
          var tmp0_or = _UByte___get_data__impl__jof9qr($this);
          var tmp1_or = _UByte___get_data__impl__jof9qr(other);
          tmp$ret$0 = toByte(tmp0_or | tmp1_or);
        }
        return _UByte___init__impl__g9hnc4(tmp$ret$0);
      }
      function UByte__xor_impl_7gv2lr($this, other) {
        var tmp$ret$0;
        {
          var tmp0_xor = _UByte___get_data__impl__jof9qr($this);
          var tmp1_xor = _UByte___get_data__impl__jof9qr(other);
          tmp$ret$0 = toByte(tmp0_xor ^ tmp1_xor);
        }
        return _UByte___init__impl__g9hnc4(tmp$ret$0);
      }
      function UByte__inv_impl_bh1i3r($this) {
        var tmp$ret$0;
        {
          var tmp0_inv = _UByte___get_data__impl__jof9qr($this);
          tmp$ret$0 = toByte(~tmp0_inv);
        }
        return _UByte___init__impl__g9hnc4(tmp$ret$0);
      }
      function UByte__toByte_impl_h2o6a5($this) {
        return _UByte___get_data__impl__jof9qr($this);
      }
      function UByte__toShort_impl_3us8xj($this) {
        var tmp$ret$0;
        {
          var tmp0_and = _UByte___get_data__impl__jof9qr($this);
          tmp$ret$0 = toShort(tmp0_and & 255);
        }
        return tmp$ret$0;
      }
      function UByte__toInt_impl_5nso52($this) {
        return _UByte___get_data__impl__jof9qr($this) & 255;
      }
      function UByte__toLong_impl_hwyqzr($this) {
        return toLong(_UByte___get_data__impl__jof9qr($this)).and_jhajnj_k$(new Long(255, 0));
      }
      function UByte__toUByte_impl_fekj48($this) {
        return $this;
      }
      function UByte__toUShort_impl_ff6uy6($this) {
        var tmp$ret$0;
        {
          var tmp0_and = _UByte___get_data__impl__jof9qr($this);
          tmp$ret$0 = toShort(tmp0_and & 255);
        }
        return _UShort___init__impl__jigrne(tmp$ret$0);
      }
      function UByte__toUInt_impl_qgytr9($this) {
        return _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr($this) & 255);
      }
      function UByte__toULong_impl_jl2e5o($this) {
        return _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr($this)).and_jhajnj_k$(new Long(255, 0)));
      }
      function UByte__toFloat_impl_ogkoa1($this) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UByte___get_data__impl__jof9qr($this) & 255;
        }
        return tmp$ret$0;
      }
      function UByte__toDouble_impl_2n4zfg($this) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UByte___get_data__impl__jof9qr($this) & 255;
        }
        return tmp$ret$0;
      }
      function UByte__toString_impl_v72jg($this) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UByte___get_data__impl__jof9qr($this) & 255;
        }
        return tmp$ret$0.toString();
      }
      function UByte__hashCode_impl_mmczcb($this) {
        return $this;
      }
      function UByte__equals_impl_nvqtsf($this, other) {
        if (!(other instanceof UByte))
          return false;
        var tmp0_other_with_cast = other instanceof UByte ? other.data_1 : THROW_CCE();
        if (!($this === tmp0_other_with_cast))
          return false;
        return true;
      }
      function UByte(data) {
        Companion_getInstance_4();
        this.data_1 = data;
      }
      UByte.prototype.compareTo_6mkx9r_k$ = function(other) {
        return UByte__compareTo_impl_5w5192(this.data_1, other);
      };
      UByte.prototype.compareTo_6thzaj_k$ = function(other) {
        return UByte__compareTo_impl_5w5192_0(this, other);
      };
      UByte.prototype.toString = function() {
        return UByte__toString_impl_v72jg(this.data_1);
      };
      UByte.prototype.hashCode = function() {
        return UByte__hashCode_impl_mmczcb(this.data_1);
      };
      UByte.prototype.equals = function(other) {
        return UByte__equals_impl_nvqtsf(this.data_1, other);
      };
      UByte.$metadata$ = classMeta("UByte", [Comparable]);
      function toUByte(_this__u8e3s4) {
        return _UByte___init__impl__g9hnc4(toByte(_this__u8e3s4));
      }
      function toUByte_0(_this__u8e3s4) {
        return _UByte___init__impl__g9hnc4(toByte(_this__u8e3s4));
      }
      function toUByte_1(_this__u8e3s4) {
        return _UByte___init__impl__g9hnc4(_this__u8e3s4.toByte_edm0nx_k$());
      }
      function toUByte_2(_this__u8e3s4) {
        return _UByte___init__impl__g9hnc4(_this__u8e3s4);
      }
      function _get_array__jslnqg($this) {
        return $this.array_1;
      }
      function _set_index__fyfqnn($this, _set____db54di) {
        $this.index_1 = _set____db54di;
      }
      function _get_index__g2optt($this) {
        return $this.index_1;
      }
      function _UByteArray___init__impl__ip4y9n(storage) {
        return storage;
      }
      function _UByteArray___get_storage__impl__d4kctt($this) {
        return $this;
      }
      function _UByteArray___init__impl__ip4y9n_0(size2) {
        var tmp = _UByteArray___init__impl__ip4y9n(new Int8Array(size2));
        return tmp;
      }
      function UByteArray__get_impl_t5f3hv($this, index3) {
        var tmp$ret$0;
        {
          var tmp0_toUByte = _UByteArray___get_storage__impl__d4kctt($this)[index3];
          tmp$ret$0 = _UByte___init__impl__g9hnc4(tmp0_toUByte);
        }
        return tmp$ret$0;
      }
      function UByteArray__set_impl_jvcicn($this, index3, value) {
        var tmp = _UByteArray___get_storage__impl__d4kctt($this);
        var tmp$ret$0;
        {
          tmp$ret$0 = _UByte___get_data__impl__jof9qr(value);
        }
        tmp[index3] = tmp$ret$0;
      }
      function _UByteArray___get_size__impl__h6pkdv($this) {
        return _UByteArray___get_storage__impl__d4kctt($this).length;
      }
      function UByteArray__iterator_impl_509y1p($this) {
        return new Iterator(_UByteArray___get_storage__impl__d4kctt($this));
      }
      function Iterator(array3) {
        this.array_1 = array3;
        this.index_1 = 0;
      }
      Iterator.prototype.hasNext_bitz1p_k$ = function() {
        return this.index_1 < this.array_1.length;
      };
      Iterator.prototype.next_mzcoch_k$ = function() {
        var tmp;
        if (this.index_1 < this.array_1.length) {
          var tmp$ret$0;
          {
            var tmp0_this = this;
            var tmp1 = tmp0_this.index_1;
            tmp0_this.index_1 = tmp1 + 1 | 0;
            var tmp0_toUByte = this.array_1[tmp1];
            tmp$ret$0 = _UByte___init__impl__g9hnc4(tmp0_toUByte);
          }
          tmp = tmp$ret$0;
        } else {
          throw NoSuchElementException_init_$Create$_0(this.index_1.toString());
        }
        return tmp;
      };
      Iterator.prototype.next_20eer_k$ = function() {
        return new UByte(this.next_mzcoch_k$());
      };
      Iterator.$metadata$ = classMeta("Iterator", [Iterator_3]);
      function UByteArray__contains_impl_njh19q($this, element) {
        var tmp = isObject2(new UByte(element)) ? new UByte(element) : THROW_CCE();
        if (!(tmp instanceof UByte))
          return false;
        var tmp_0 = _UByteArray___get_storage__impl__d4kctt($this);
        var tmp$ret$0;
        {
          tmp$ret$0 = _UByte___get_data__impl__jof9qr(element);
        }
        return contains_0(tmp_0, tmp$ret$0);
      }
      function UByteArray__contains_impl_njh19q_0($this, element) {
        if (!(element instanceof UByte))
          return false;
        var tmp = $this.storage_1;
        return UByteArray__contains_impl_njh19q(tmp, element instanceof UByte ? element.data_1 : THROW_CCE());
      }
      function UByteArray__containsAll_impl_v9s6dj($this, elements) {
        var tmp$ret$0;
        $l$block_0: {
          var tmp0_all = isInterface(elements, Collection) ? elements : THROW_CCE();
          var tmp;
          if (isInterface(tmp0_all, Collection)) {
            tmp = tmp0_all.isEmpty_y1axqb_k$();
          } else {
            tmp = false;
          }
          if (tmp) {
            tmp$ret$0 = true;
            break $l$block_0;
          }
          var tmp0_iterator = tmp0_all.iterator_jk1svi_k$();
          while (tmp0_iterator.hasNext_bitz1p_k$()) {
            var element = tmp0_iterator.next_20eer_k$();
            var tmp$ret$2;
            {
              var tmp_0;
              if (element instanceof UByte) {
                var tmp_1 = _UByteArray___get_storage__impl__d4kctt($this);
                var tmp$ret$1;
                {
                  var tmp0_toByte = element.data_1;
                  tmp$ret$1 = _UByte___get_data__impl__jof9qr(tmp0_toByte);
                }
                tmp_0 = contains_0(tmp_1, tmp$ret$1);
              } else {
                tmp_0 = false;
              }
              tmp$ret$2 = tmp_0;
            }
            if (!tmp$ret$2) {
              tmp$ret$0 = false;
              break $l$block_0;
            }
          }
          tmp$ret$0 = true;
        }
        return tmp$ret$0;
      }
      function UByteArray__containsAll_impl_v9s6dj_0($this, elements) {
        return UByteArray__containsAll_impl_v9s6dj($this.storage_1, elements);
      }
      function UByteArray__isEmpty_impl_nbfqsa($this) {
        return _UByteArray___get_storage__impl__d4kctt($this).length === 0;
      }
      function UByteArray__toString_impl_ukpl97($this) {
        return "UByteArray(storage=" + toString_1($this) + ")";
      }
      function UByteArray__hashCode_impl_ip8jx2($this) {
        return hashCode($this);
      }
      function UByteArray__equals_impl_roka4u($this, other) {
        if (!(other instanceof UByteArray))
          return false;
        var tmp0_other_with_cast = other instanceof UByteArray ? other.storage_1 : THROW_CCE();
        if (!equals($this, tmp0_other_with_cast))
          return false;
        return true;
      }
      function UByteArray(storage) {
        this.storage_1 = storage;
      }
      UByteArray.prototype.get_size_woubt6_k$ = function() {
        return _UByteArray___get_size__impl__h6pkdv(this.storage_1);
      };
      UByteArray.prototype.iterator_jk1svi_k$ = function() {
        return UByteArray__iterator_impl_509y1p(this.storage_1);
      };
      UByteArray.prototype.contains_6st81c_k$ = function(element) {
        return UByteArray__contains_impl_njh19q(this.storage_1, element);
      };
      UByteArray.prototype.contains_2ehdt1_k$ = function(element) {
        return UByteArray__contains_impl_njh19q_0(this, element);
      };
      UByteArray.prototype.containsAll_ymyv_k$ = function(elements) {
        return UByteArray__containsAll_impl_v9s6dj(this.storage_1, elements);
      };
      UByteArray.prototype.containsAll_jr3fla_k$ = function(elements) {
        return UByteArray__containsAll_impl_v9s6dj_0(this, elements);
      };
      UByteArray.prototype.isEmpty_y1axqb_k$ = function() {
        return UByteArray__isEmpty_impl_nbfqsa(this.storage_1);
      };
      UByteArray.prototype.toString = function() {
        return UByteArray__toString_impl_ukpl97(this.storage_1);
      };
      UByteArray.prototype.hashCode = function() {
        return UByteArray__hashCode_impl_ip8jx2(this.storage_1);
      };
      UByteArray.prototype.equals = function(other) {
        return UByteArray__equals_impl_roka4u(this.storage_1, other);
      };
      UByteArray.$metadata$ = classMeta("UByteArray", [Collection]);
      function _UInt___init__impl__l7qpdl(data) {
        return data;
      }
      function _UInt___get_data__impl__f0vqqw($this) {
        return $this;
      }
      function Companion_5() {
        Companion_instance_5 = this;
        this.MIN_VALUE_1 = _UInt___init__impl__l7qpdl(0);
        this.MAX_VALUE_1 = _UInt___init__impl__l7qpdl(-1);
        this.SIZE_BYTES_1 = 4;
        this.SIZE_BITS_1 = 32;
      }
      Companion_5.prototype.get_MIN_VALUE_9yzxs0_k$ = function() {
        return this.MIN_VALUE_1;
      };
      Companion_5.prototype.get_MAX_VALUE_blthzm_k$ = function() {
        return this.MAX_VALUE_1;
      };
      Companion_5.prototype.get_SIZE_BYTES_qphg4q_k$ = function() {
        return this.SIZE_BYTES_1;
      };
      Companion_5.prototype.get_SIZE_BITS_7qhjj9_k$ = function() {
        return this.SIZE_BITS_1;
      };
      Companion_5.$metadata$ = objectMeta("Companion");
      var Companion_instance_5;
      function Companion_getInstance_5() {
        if (Companion_instance_5 == null)
          new Companion_5();
        return Companion_instance_5;
      }
      function UInt__compareTo_impl_yacclj($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp0_compareTo = tmp$ret$0;
          tmp$ret$1 = uintCompare(_UInt___get_data__impl__f0vqqw($this), _UInt___get_data__impl__f0vqqw(tmp0_compareTo));
        }
        return tmp$ret$1;
      }
      function UInt__compareTo_impl_yacclj_0($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp0_compareTo = tmp$ret$0;
          tmp$ret$1 = uintCompare(_UInt___get_data__impl__f0vqqw($this), _UInt___get_data__impl__f0vqqw(tmp0_compareTo));
        }
        return tmp$ret$1;
      }
      function UInt__compareTo_impl_yacclj_1($this, other) {
        return uintCompare(_UInt___get_data__impl__f0vqqw($this), _UInt___get_data__impl__f0vqqw(other));
      }
      function UInt__compareTo_impl_yacclj_2($this, other) {
        var tmp = $this.data_1;
        return UInt__compareTo_impl_yacclj_1(tmp, other instanceof UInt ? other.data_1 : THROW_CCE());
      }
      function UInt__compareTo_impl_yacclj_3($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw($this)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_compareTo = tmp$ret$0;
          tmp$ret$1 = ulongCompare(_ULong___get_data__impl__fggpzb(tmp0_compareTo), _ULong___get_data__impl__fggpzb(other));
        }
        return tmp$ret$1;
      }
      function UInt__plus_impl_gmhu6f($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp0_plus = tmp$ret$0;
          tmp$ret$1 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) + _UInt___get_data__impl__f0vqqw(tmp0_plus) | 0);
        }
        return tmp$ret$1;
      }
      function UInt__plus_impl_gmhu6f_0($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp0_plus = tmp$ret$0;
          tmp$ret$1 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) + _UInt___get_data__impl__f0vqqw(tmp0_plus) | 0);
        }
        return tmp$ret$1;
      }
      function UInt__plus_impl_gmhu6f_1($this, other) {
        return _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) + _UInt___get_data__impl__f0vqqw(other) | 0);
      }
      function UInt__plus_impl_gmhu6f_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw($this)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_plus = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_plus).plus_u6jwas_k$(_ULong___get_data__impl__fggpzb(other)));
        }
        return tmp$ret$1;
      }
      function UInt__minus_impl_c4dy1j($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp0_minus = tmp$ret$0;
          tmp$ret$1 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) - _UInt___get_data__impl__f0vqqw(tmp0_minus) | 0);
        }
        return tmp$ret$1;
      }
      function UInt__minus_impl_c4dy1j_0($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp0_minus = tmp$ret$0;
          tmp$ret$1 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) - _UInt___get_data__impl__f0vqqw(tmp0_minus) | 0);
        }
        return tmp$ret$1;
      }
      function UInt__minus_impl_c4dy1j_1($this, other) {
        return _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) - _UInt___get_data__impl__f0vqqw(other) | 0);
      }
      function UInt__minus_impl_c4dy1j_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw($this)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_minus = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_minus).minus_llf5ei_k$(_ULong___get_data__impl__fggpzb(other)));
        }
        return tmp$ret$1;
      }
      function UInt__times_impl_9tvds1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp0_times = tmp$ret$0;
          tmp$ret$1 = _UInt___init__impl__l7qpdl(imul(_UInt___get_data__impl__f0vqqw($this), _UInt___get_data__impl__f0vqqw(tmp0_times)));
        }
        return tmp$ret$1;
      }
      function UInt__times_impl_9tvds1_0($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp0_times = tmp$ret$0;
          tmp$ret$1 = _UInt___init__impl__l7qpdl(imul(_UInt___get_data__impl__f0vqqw($this), _UInt___get_data__impl__f0vqqw(tmp0_times)));
        }
        return tmp$ret$1;
      }
      function UInt__times_impl_9tvds1_1($this, other) {
        return _UInt___init__impl__l7qpdl(imul(_UInt___get_data__impl__f0vqqw($this), _UInt___get_data__impl__f0vqqw(other)));
      }
      function UInt__times_impl_9tvds1_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw($this)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_times = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_times).times_2zfqpc_k$(_ULong___get_data__impl__fggpzb(other)));
        }
        return tmp$ret$1;
      }
      function UInt__div_impl_xkbbl6($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp0_div = tmp$ret$0;
          tmp$ret$1 = uintDivide($this, tmp0_div);
        }
        return tmp$ret$1;
      }
      function UInt__div_impl_xkbbl6_0($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp0_div = tmp$ret$0;
          tmp$ret$1 = uintDivide($this, tmp0_div);
        }
        return tmp$ret$1;
      }
      function UInt__div_impl_xkbbl6_1($this, other) {
        return uintDivide($this, other);
      }
      function UInt__div_impl_xkbbl6_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw($this)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_div = tmp$ret$0;
          tmp$ret$1 = ulongDivide(tmp0_div, other);
        }
        return tmp$ret$1;
      }
      function UInt__rem_impl_muzcx9($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp0_rem = tmp$ret$0;
          tmp$ret$1 = uintRemainder($this, tmp0_rem);
        }
        return tmp$ret$1;
      }
      function UInt__rem_impl_muzcx9_0($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp0_rem = tmp$ret$0;
          tmp$ret$1 = uintRemainder($this, tmp0_rem);
        }
        return tmp$ret$1;
      }
      function UInt__rem_impl_muzcx9_1($this, other) {
        return uintRemainder($this, other);
      }
      function UInt__rem_impl_muzcx9_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw($this)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_rem = tmp$ret$0;
          tmp$ret$1 = ulongRemainder(tmp0_rem, other);
        }
        return tmp$ret$1;
      }
      function UInt__floorDiv_impl_hg5qxa($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = uintDivide($this, tmp0_floorDiv);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function UInt__floorDiv_impl_hg5qxa_0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = uintDivide($this, tmp0_floorDiv);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function UInt__floorDiv_impl_hg5qxa_1($this, other) {
        var tmp$ret$0;
        {
          tmp$ret$0 = uintDivide($this, other);
        }
        return tmp$ret$0;
      }
      function UInt__floorDiv_impl_hg5qxa_2($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw($this)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = ulongDivide(tmp0_floorDiv, other);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function UInt__mod_impl_l9f8at($this, other) {
        var tmp$ret$4;
        {
          var tmp$ret$2;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
            }
            var tmp0_mod = tmp$ret$0;
            var tmp$ret$1;
            {
              tmp$ret$1 = uintRemainder($this, tmp0_mod);
            }
            tmp$ret$2 = tmp$ret$1;
          }
          var tmp2_toUByte = tmp$ret$2;
          var tmp$ret$3;
          {
            var tmp1_toUByte = _UInt___get_data__impl__f0vqqw(tmp2_toUByte);
            tmp$ret$3 = _UByte___init__impl__g9hnc4(toByte(tmp1_toUByte));
          }
          tmp$ret$4 = tmp$ret$3;
        }
        return tmp$ret$4;
      }
      function UInt__mod_impl_l9f8at_0($this, other) {
        var tmp$ret$4;
        {
          var tmp$ret$2;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
            }
            var tmp0_mod = tmp$ret$0;
            var tmp$ret$1;
            {
              tmp$ret$1 = uintRemainder($this, tmp0_mod);
            }
            tmp$ret$2 = tmp$ret$1;
          }
          var tmp2_toUShort = tmp$ret$2;
          var tmp$ret$3;
          {
            var tmp1_toUShort = _UInt___get_data__impl__f0vqqw(tmp2_toUShort);
            tmp$ret$3 = _UShort___init__impl__jigrne(toShort(tmp1_toUShort));
          }
          tmp$ret$4 = tmp$ret$3;
        }
        return tmp$ret$4;
      }
      function UInt__mod_impl_l9f8at_1($this, other) {
        var tmp$ret$0;
        {
          tmp$ret$0 = uintRemainder($this, other);
        }
        return tmp$ret$0;
      }
      function UInt__mod_impl_l9f8at_2($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw($this)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_mod = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = ulongRemainder(tmp0_mod, other);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function UInt__inc_impl_wvpje1($this) {
        return _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) + 1 | 0);
      }
      function UInt__dec_impl_u8n7zv($this) {
        return _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) - 1 | 0);
      }
      function UInt__rangeTo_impl_en5yc1($this, other) {
        return new UIntRange($this, other);
      }
      function UInt__shl_impl_o7n0a8($this, bitCount) {
        return _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) << bitCount);
      }
      function UInt__shr_impl_r1wqne($this, bitCount) {
        return _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) >>> bitCount | 0);
      }
      function UInt__and_impl_fv3j80($this, other) {
        return _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) & _UInt___get_data__impl__f0vqqw(other));
      }
      function UInt__or_impl_nrzdg0($this, other) {
        return _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) | _UInt___get_data__impl__f0vqqw(other));
      }
      function UInt__xor_impl_a7n4dw($this, other) {
        return _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw($this) ^ _UInt___get_data__impl__f0vqqw(other));
      }
      function UInt__inv_impl_t5jp3e($this) {
        return _UInt___init__impl__l7qpdl(~_UInt___get_data__impl__f0vqqw($this));
      }
      function UInt__toByte_impl_enbcz4($this) {
        return toByte(_UInt___get_data__impl__f0vqqw($this));
      }
      function UInt__toShort_impl_776xra($this) {
        return toShort(_UInt___get_data__impl__f0vqqw($this));
      }
      function UInt__toInt_impl_93yt4d($this) {
        return _UInt___get_data__impl__f0vqqw($this);
      }
      function UInt__toLong_impl_le5rq4($this) {
        return toLong(_UInt___get_data__impl__f0vqqw($this)).and_jhajnj_k$(new Long(-1, 0));
      }
      function UInt__toUByte_impl_qgjpt1($this) {
        var tmp$ret$0;
        {
          var tmp0_toUByte = _UInt___get_data__impl__f0vqqw($this);
          tmp$ret$0 = _UByte___init__impl__g9hnc4(toByte(tmp0_toUByte));
        }
        return tmp$ret$0;
      }
      function UInt__toUShort_impl_2yxcfl($this) {
        var tmp$ret$0;
        {
          var tmp0_toUShort = _UInt___get_data__impl__f0vqqw($this);
          tmp$ret$0 = _UShort___init__impl__jigrne(toShort(tmp0_toUShort));
        }
        return tmp$ret$0;
      }
      function UInt__toUInt_impl_cu5oym($this) {
        return $this;
      }
      function UInt__toULong_impl_8j37gv($this) {
        return _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw($this)).and_jhajnj_k$(new Long(-1, 0)));
      }
      function UInt__toFloat_impl_zijuyu($this) {
        var tmp$ret$0;
        {
          tmp$ret$0 = uintToDouble(_UInt___get_data__impl__f0vqqw($this));
        }
        return tmp$ret$0;
      }
      function UInt__toDouble_impl_f3ehy1($this) {
        return uintToDouble(_UInt___get_data__impl__f0vqqw($this));
      }
      function UInt__toString_impl_dbgl21($this) {
        var tmp$ret$0;
        {
          tmp$ret$0 = toLong(_UInt___get_data__impl__f0vqqw($this)).and_jhajnj_k$(new Long(-1, 0));
        }
        return tmp$ret$0.toString();
      }
      function UInt__hashCode_impl_z2mhuw($this) {
        return $this;
      }
      function UInt__equals_impl_ffdoxg($this, other) {
        if (!(other instanceof UInt))
          return false;
        var tmp0_other_with_cast = other instanceof UInt ? other.data_1 : THROW_CCE();
        if (!($this === tmp0_other_with_cast))
          return false;
        return true;
      }
      function UInt(data) {
        Companion_getInstance_5();
        this.data_1 = data;
      }
      UInt.prototype.compareTo_n4kp7s_k$ = function(other) {
        return UInt__compareTo_impl_yacclj_1(this.data_1, other);
      };
      UInt.prototype.compareTo_6thzaj_k$ = function(other) {
        return UInt__compareTo_impl_yacclj_2(this, other);
      };
      UInt.prototype.toString = function() {
        return UInt__toString_impl_dbgl21(this.data_1);
      };
      UInt.prototype.hashCode = function() {
        return UInt__hashCode_impl_z2mhuw(this.data_1);
      };
      UInt.prototype.equals = function(other) {
        return UInt__equals_impl_ffdoxg(this.data_1, other);
      };
      UInt.$metadata$ = classMeta("UInt", [Comparable]);
      function toUInt(_this__u8e3s4) {
        return _UInt___init__impl__l7qpdl(_this__u8e3s4.toInt_1tsl84_k$());
      }
      function toUInt_0(_this__u8e3s4) {
        return _UInt___init__impl__l7qpdl(_this__u8e3s4);
      }
      function toUInt_1(_this__u8e3s4) {
        return _UInt___init__impl__l7qpdl(_this__u8e3s4);
      }
      function toUInt_2(_this__u8e3s4) {
        return doubleToUInt(_this__u8e3s4);
      }
      function toUInt_3(_this__u8e3s4) {
        return doubleToUInt(_this__u8e3s4);
      }
      function toUInt_4(_this__u8e3s4) {
        return _UInt___init__impl__l7qpdl(_this__u8e3s4);
      }
      function _get_array__jslnqg_0($this) {
        return $this.array_1;
      }
      function _set_index__fyfqnn_0($this, _set____db54di) {
        $this.index_1 = _set____db54di;
      }
      function _get_index__g2optt_0($this) {
        return $this.index_1;
      }
      function _UIntArray___init__impl__ghjpc6(storage) {
        return storage;
      }
      function _UIntArray___get_storage__impl__92a0v0($this) {
        return $this;
      }
      function _UIntArray___init__impl__ghjpc6_0(size2) {
        var tmp = _UIntArray___init__impl__ghjpc6(new Int32Array(size2));
        return tmp;
      }
      function UIntArray__get_impl_gp5kza($this, index3) {
        var tmp$ret$0;
        {
          var tmp0_toUInt = _UIntArray___get_storage__impl__92a0v0($this)[index3];
          tmp$ret$0 = _UInt___init__impl__l7qpdl(tmp0_toUInt);
        }
        return tmp$ret$0;
      }
      function UIntArray__set_impl_7f2zu2($this, index3, value) {
        var tmp = _UIntArray___get_storage__impl__92a0v0($this);
        var tmp$ret$0;
        {
          tmp$ret$0 = _UInt___get_data__impl__f0vqqw(value);
        }
        tmp[index3] = tmp$ret$0;
      }
      function _UIntArray___get_size__impl__r6l8ci($this) {
        return _UIntArray___get_storage__impl__92a0v0($this).length;
      }
      function UIntArray__iterator_impl_tkdv7k($this) {
        return new Iterator_0(_UIntArray___get_storage__impl__92a0v0($this));
      }
      function Iterator_0(array3) {
        this.array_1 = array3;
        this.index_1 = 0;
      }
      Iterator_0.prototype.hasNext_bitz1p_k$ = function() {
        return this.index_1 < this.array_1.length;
      };
      Iterator_0.prototype.next_3167jc_k$ = function() {
        var tmp;
        if (this.index_1 < this.array_1.length) {
          var tmp$ret$0;
          {
            var tmp0_this = this;
            var tmp1 = tmp0_this.index_1;
            tmp0_this.index_1 = tmp1 + 1 | 0;
            var tmp0_toUInt = this.array_1[tmp1];
            tmp$ret$0 = _UInt___init__impl__l7qpdl(tmp0_toUInt);
          }
          tmp = tmp$ret$0;
        } else {
          throw NoSuchElementException_init_$Create$_0(this.index_1.toString());
        }
        return tmp;
      };
      Iterator_0.prototype.next_20eer_k$ = function() {
        return new UInt(this.next_3167jc_k$());
      };
      Iterator_0.$metadata$ = classMeta("Iterator", [Iterator_3]);
      function UIntArray__contains_impl_b16rzj($this, element) {
        var tmp = isObject2(new UInt(element)) ? new UInt(element) : THROW_CCE();
        if (!(tmp instanceof UInt))
          return false;
        var tmp_0 = _UIntArray___get_storage__impl__92a0v0($this);
        var tmp$ret$0;
        {
          tmp$ret$0 = _UInt___get_data__impl__f0vqqw(element);
        }
        return contains_2(tmp_0, tmp$ret$0);
      }
      function UIntArray__contains_impl_b16rzj_0($this, element) {
        if (!(element instanceof UInt))
          return false;
        var tmp = $this.storage_1;
        return UIntArray__contains_impl_b16rzj(tmp, element instanceof UInt ? element.data_1 : THROW_CCE());
      }
      function UIntArray__containsAll_impl_414g22($this, elements) {
        var tmp$ret$0;
        $l$block_0: {
          var tmp0_all = isInterface(elements, Collection) ? elements : THROW_CCE();
          var tmp;
          if (isInterface(tmp0_all, Collection)) {
            tmp = tmp0_all.isEmpty_y1axqb_k$();
          } else {
            tmp = false;
          }
          if (tmp) {
            tmp$ret$0 = true;
            break $l$block_0;
          }
          var tmp0_iterator = tmp0_all.iterator_jk1svi_k$();
          while (tmp0_iterator.hasNext_bitz1p_k$()) {
            var element = tmp0_iterator.next_20eer_k$();
            var tmp$ret$2;
            {
              var tmp_0;
              if (element instanceof UInt) {
                var tmp_1 = _UIntArray___get_storage__impl__92a0v0($this);
                var tmp$ret$1;
                {
                  var tmp0_toInt = element.data_1;
                  tmp$ret$1 = _UInt___get_data__impl__f0vqqw(tmp0_toInt);
                }
                tmp_0 = contains_2(tmp_1, tmp$ret$1);
              } else {
                tmp_0 = false;
              }
              tmp$ret$2 = tmp_0;
            }
            if (!tmp$ret$2) {
              tmp$ret$0 = false;
              break $l$block_0;
            }
          }
          tmp$ret$0 = true;
        }
        return tmp$ret$0;
      }
      function UIntArray__containsAll_impl_414g22_0($this, elements) {
        return UIntArray__containsAll_impl_414g22($this.storage_1, elements);
      }
      function UIntArray__isEmpty_impl_vd8j4n($this) {
        return _UIntArray___get_storage__impl__92a0v0($this).length === 0;
      }
      function UIntArray__toString_impl_3zy802($this) {
        return "UIntArray(storage=" + toString_1($this) + ")";
      }
      function UIntArray__hashCode_impl_hr7ost($this) {
        return hashCode($this);
      }
      function UIntArray__equals_impl_flcmof($this, other) {
        if (!(other instanceof UIntArray))
          return false;
        var tmp0_other_with_cast = other instanceof UIntArray ? other.storage_1 : THROW_CCE();
        if (!equals($this, tmp0_other_with_cast))
          return false;
        return true;
      }
      function UIntArray(storage) {
        this.storage_1 = storage;
      }
      UIntArray.prototype.get_size_woubt6_k$ = function() {
        return _UIntArray___get_size__impl__r6l8ci(this.storage_1);
      };
      UIntArray.prototype.iterator_jk1svi_k$ = function() {
        return UIntArray__iterator_impl_tkdv7k(this.storage_1);
      };
      UIntArray.prototype.contains_i3zyt5_k$ = function(element) {
        return UIntArray__contains_impl_b16rzj(this.storage_1, element);
      };
      UIntArray.prototype.contains_2ehdt1_k$ = function(element) {
        return UIntArray__contains_impl_b16rzj_0(this, element);
      };
      UIntArray.prototype.containsAll_ts90z8_k$ = function(elements) {
        return UIntArray__containsAll_impl_414g22(this.storage_1, elements);
      };
      UIntArray.prototype.containsAll_jr3fla_k$ = function(elements) {
        return UIntArray__containsAll_impl_414g22_0(this, elements);
      };
      UIntArray.prototype.isEmpty_y1axqb_k$ = function() {
        return UIntArray__isEmpty_impl_vd8j4n(this.storage_1);
      };
      UIntArray.prototype.toString = function() {
        return UIntArray__toString_impl_3zy802(this.storage_1);
      };
      UIntArray.prototype.hashCode = function() {
        return UIntArray__hashCode_impl_hr7ost(this.storage_1);
      };
      UIntArray.prototype.equals = function(other) {
        return UIntArray__equals_impl_flcmof(this.storage_1, other);
      };
      UIntArray.$metadata$ = classMeta("UIntArray", [Collection]);
      function Companion_6() {
        Companion_instance_6 = this;
        var tmp = this;
        Companion_getInstance_5();
        var tmp_0 = _UInt___init__impl__l7qpdl(-1);
        Companion_getInstance_5();
        tmp.EMPTY_1 = new UIntRange(tmp_0, _UInt___init__impl__l7qpdl(0));
      }
      Companion_6.prototype.get_EMPTY_i8q41w_k$ = function() {
        return this.EMPTY_1;
      };
      Companion_6.$metadata$ = objectMeta("Companion");
      var Companion_instance_6;
      function Companion_getInstance_6() {
        if (Companion_instance_6 == null)
          new Companion_6();
        return Companion_instance_6;
      }
      function UIntRange(start2, endInclusive) {
        Companion_getInstance_6();
        UIntProgression.call(this, start2, endInclusive, 1);
      }
      UIntRange.prototype.get_start_qjckny_k$ = function() {
        return this.get_first_englpo_k$();
      };
      UIntRange.prototype.get_start_iypx6h_k$ = function() {
        return new UInt(this.get_start_qjckny_k$());
      };
      UIntRange.prototype.get_endInclusive_oo5uyp_k$ = function() {
        return this.get_last_rpcnd0_k$();
      };
      UIntRange.prototype.get_endInclusive_r07xpi_k$ = function() {
        return new UInt(this.get_endInclusive_oo5uyp_k$());
      };
      UIntRange.prototype.contains_i3zyt5_k$ = function(value) {
        var tmp;
        var tmp$ret$0;
        {
          var tmp0_compareTo = this.get_first_englpo_k$();
          tmp$ret$0 = uintCompare(_UInt___get_data__impl__f0vqqw(tmp0_compareTo), _UInt___get_data__impl__f0vqqw(value));
        }
        if (tmp$ret$0 <= 0) {
          var tmp$ret$1;
          {
            var tmp1_compareTo = this.get_last_rpcnd0_k$();
            tmp$ret$1 = uintCompare(_UInt___get_data__impl__f0vqqw(value), _UInt___get_data__impl__f0vqqw(tmp1_compareTo));
          }
          tmp = tmp$ret$1 <= 0;
        } else {
          tmp = false;
        }
        return tmp;
      };
      UIntRange.prototype.contains_2ehdtg_k$ = function(value) {
        return this.contains_i3zyt5_k$(value instanceof UInt ? value.data_1 : THROW_CCE());
      };
      UIntRange.prototype.isEmpty_y1axqb_k$ = function() {
        var tmp$ret$0;
        {
          var tmp0_compareTo = this.get_first_englpo_k$();
          var tmp1_compareTo = this.get_last_rpcnd0_k$();
          tmp$ret$0 = uintCompare(_UInt___get_data__impl__f0vqqw(tmp0_compareTo), _UInt___get_data__impl__f0vqqw(tmp1_compareTo));
        }
        return tmp$ret$0 > 0;
      };
      UIntRange.prototype.equals = function(other) {
        var tmp;
        if (other instanceof UIntRange) {
          tmp = (this.isEmpty_y1axqb_k$() ? other.isEmpty_y1axqb_k$() : false) ? true : this.get_first_englpo_k$() === other.get_first_englpo_k$() ? this.get_last_rpcnd0_k$() === other.get_last_rpcnd0_k$() : false;
        } else {
          tmp = false;
        }
        return tmp;
      };
      UIntRange.prototype.hashCode = function() {
        var tmp;
        if (this.isEmpty_y1axqb_k$()) {
          tmp = -1;
        } else {
          var tmp$ret$0;
          {
            var tmp0_toInt = this.get_first_englpo_k$();
            tmp$ret$0 = _UInt___get_data__impl__f0vqqw(tmp0_toInt);
          }
          var tmp_0 = imul(31, tmp$ret$0);
          var tmp$ret$1;
          {
            var tmp1_toInt = this.get_last_rpcnd0_k$();
            tmp$ret$1 = _UInt___get_data__impl__f0vqqw(tmp1_toInt);
          }
          tmp = tmp_0 + tmp$ret$1 | 0;
        }
        return tmp;
      };
      UIntRange.prototype.toString = function() {
        return "" + new UInt(this.get_first_englpo_k$()) + ".." + new UInt(this.get_last_rpcnd0_k$());
      };
      UIntRange.$metadata$ = classMeta("UIntRange", [ClosedRange], void 0, void 0, void 0, UIntProgression.prototype);
      function Companion_7() {
        Companion_instance_7 = this;
      }
      Companion_7.prototype.fromClosedRange_nl90ve_k$ = function(rangeStart, rangeEnd, step) {
        return new UIntProgression(rangeStart, rangeEnd, step);
      };
      Companion_7.$metadata$ = objectMeta("Companion");
      var Companion_instance_7;
      function Companion_getInstance_7() {
        if (Companion_instance_7 == null)
          new Companion_7();
        return Companion_instance_7;
      }
      function UIntProgression(start2, endInclusive, step) {
        Companion_getInstance_7();
        if (step === 0)
          throw IllegalArgumentException_init_$Create$_0("Step must be non-zero.");
        if (step === IntCompanionObject_getInstance().MIN_VALUE_1)
          throw IllegalArgumentException_init_$Create$_0("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");
        this.first_1 = start2;
        this.last_1 = getProgressionLastElement(start2, endInclusive, step);
        this.step_1 = step;
      }
      UIntProgression.prototype.get_first_englpo_k$ = function() {
        return this.first_1;
      };
      UIntProgression.prototype.get_last_rpcnd0_k$ = function() {
        return this.last_1;
      };
      UIntProgression.prototype.get_step_woujh1_k$ = function() {
        return this.step_1;
      };
      UIntProgression.prototype.iterator_jk1svi_k$ = function() {
        return new UIntProgressionIterator(this.first_1, this.last_1, this.step_1);
      };
      UIntProgression.prototype.isEmpty_y1axqb_k$ = function() {
        var tmp;
        if (this.step_1 > 0) {
          var tmp$ret$0;
          {
            var tmp0_compareTo = this.first_1;
            var tmp1_compareTo = this.last_1;
            tmp$ret$0 = uintCompare(_UInt___get_data__impl__f0vqqw(tmp0_compareTo), _UInt___get_data__impl__f0vqqw(tmp1_compareTo));
          }
          tmp = tmp$ret$0 > 0;
        } else {
          var tmp$ret$1;
          {
            var tmp2_compareTo = this.first_1;
            var tmp3_compareTo = this.last_1;
            tmp$ret$1 = uintCompare(_UInt___get_data__impl__f0vqqw(tmp2_compareTo), _UInt___get_data__impl__f0vqqw(tmp3_compareTo));
          }
          tmp = tmp$ret$1 < 0;
        }
        return tmp;
      };
      UIntProgression.prototype.equals = function(other) {
        var tmp;
        if (other instanceof UIntProgression) {
          tmp = (this.isEmpty_y1axqb_k$() ? other.isEmpty_y1axqb_k$() : false) ? true : (this.first_1 === other.first_1 ? this.last_1 === other.last_1 : false) ? this.step_1 === other.step_1 : false;
        } else {
          tmp = false;
        }
        return tmp;
      };
      UIntProgression.prototype.hashCode = function() {
        var tmp;
        if (this.isEmpty_y1axqb_k$()) {
          tmp = -1;
        } else {
          var tmp$ret$0;
          {
            var tmp0_toInt = this.first_1;
            tmp$ret$0 = _UInt___get_data__impl__f0vqqw(tmp0_toInt);
          }
          var tmp_0 = imul(31, tmp$ret$0);
          var tmp$ret$1;
          {
            var tmp1_toInt = this.last_1;
            tmp$ret$1 = _UInt___get_data__impl__f0vqqw(tmp1_toInt);
          }
          tmp = imul(31, tmp_0 + tmp$ret$1 | 0) + this.step_1 | 0;
        }
        return tmp;
      };
      UIntProgression.prototype.toString = function() {
        return this.step_1 > 0 ? "" + new UInt(this.first_1) + ".." + new UInt(this.last_1) + " step " + this.step_1 : "" + new UInt(this.first_1) + " downTo " + new UInt(this.last_1) + " step " + (-this.step_1 | 0);
      };
      UIntProgression.$metadata$ = classMeta("UIntProgression", [Iterable]);
      function _get_finalElement__gc6m3p($this) {
        return $this.finalElement_1;
      }
      function _set_hasNext__86v2bs($this, _set____db54di) {
        $this.hasNext_1 = _set____db54di;
      }
      function _get_hasNext__xt3cos($this) {
        return $this.hasNext_1;
      }
      function _get_step__ddv2tb($this) {
        return $this.step_1;
      }
      function _set_next__9r2xms($this, _set____db54di) {
        $this.next_1 = _set____db54di;
      }
      function _get_next__daux88($this) {
        return $this.next_1;
      }
      function UIntProgressionIterator(first, last, step) {
        this.finalElement_1 = last;
        var tmp = this;
        var tmp_0;
        if (step > 0) {
          var tmp$ret$0;
          {
            tmp$ret$0 = uintCompare(_UInt___get_data__impl__f0vqqw(first), _UInt___get_data__impl__f0vqqw(last));
          }
          tmp_0 = tmp$ret$0 <= 0;
        } else {
          var tmp$ret$1;
          {
            tmp$ret$1 = uintCompare(_UInt___get_data__impl__f0vqqw(first), _UInt___get_data__impl__f0vqqw(last));
          }
          tmp_0 = tmp$ret$1 >= 0;
        }
        tmp.hasNext_1 = tmp_0;
        var tmp_1 = this;
        var tmp$ret$2;
        {
          tmp$ret$2 = _UInt___init__impl__l7qpdl(step);
        }
        tmp_1.step_1 = tmp$ret$2;
        this.next_1 = this.hasNext_1 ? first : this.finalElement_1;
      }
      UIntProgressionIterator.prototype.hasNext_bitz1p_k$ = function() {
        return this.hasNext_1;
      };
      UIntProgressionIterator.prototype.next_3167jc_k$ = function() {
        var value = this.next_1;
        if (value === this.finalElement_1) {
          if (!this.hasNext_1)
            throw NoSuchElementException_init_$Create$();
          this.hasNext_1 = false;
        } else {
          var tmp0_this = this;
          var tmp = tmp0_this;
          var tmp$ret$0;
          {
            var tmp0_plus = tmp0_this.next_1;
            var tmp1_plus = this.step_1;
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_plus) + _UInt___get_data__impl__f0vqqw(tmp1_plus) | 0);
          }
          tmp.next_1 = tmp$ret$0;
        }
        return value;
      };
      UIntProgressionIterator.prototype.next_20eer_k$ = function() {
        return new UInt(this.next_3167jc_k$());
      };
      UIntProgressionIterator.$metadata$ = classMeta("UIntProgressionIterator", [Iterator_3]);
      function _ULong___init__impl__c78o9k(data) {
        return data;
      }
      function _ULong___get_data__impl__fggpzb($this) {
        return $this;
      }
      function Companion_8() {
        Companion_instance_8 = this;
        this.MIN_VALUE_1 = _ULong___init__impl__c78o9k(new Long(0, 0));
        this.MAX_VALUE_1 = _ULong___init__impl__c78o9k(new Long(-1, -1));
        this.SIZE_BYTES_1 = 8;
        this.SIZE_BITS_1 = 64;
      }
      Companion_8.prototype.get_MIN_VALUE_p0jsuj_k$ = function() {
        return this.MIN_VALUE_1;
      };
      Companion_8.prototype.get_MAX_VALUE_4mw5fd_k$ = function() {
        return this.MAX_VALUE_1;
      };
      Companion_8.prototype.get_SIZE_BYTES_qphg4q_k$ = function() {
        return this.SIZE_BYTES_1;
      };
      Companion_8.prototype.get_SIZE_BITS_7qhjj9_k$ = function() {
        return this.SIZE_BITS_1;
      };
      Companion_8.$metadata$ = objectMeta("Companion");
      var Companion_instance_8;
      function Companion_getInstance_8() {
        if (Companion_instance_8 == null)
          new Companion_8();
        return Companion_instance_8;
      }
      function ULong__compareTo_impl_38i7tu($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr(other)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_compareTo = tmp$ret$0;
          tmp$ret$1 = ulongCompare(_ULong___get_data__impl__fggpzb($this), _ULong___get_data__impl__fggpzb(tmp0_compareTo));
        }
        return tmp$ret$1;
      }
      function ULong__compareTo_impl_38i7tu_0($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245(other)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_compareTo = tmp$ret$0;
          tmp$ret$1 = ulongCompare(_ULong___get_data__impl__fggpzb($this), _ULong___get_data__impl__fggpzb(tmp0_compareTo));
        }
        return tmp$ret$1;
      }
      function ULong__compareTo_impl_38i7tu_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw(other)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_compareTo = tmp$ret$0;
          tmp$ret$1 = ulongCompare(_ULong___get_data__impl__fggpzb($this), _ULong___get_data__impl__fggpzb(tmp0_compareTo));
        }
        return tmp$ret$1;
      }
      function ULong__compareTo_impl_38i7tu_2($this, other) {
        return ulongCompare(_ULong___get_data__impl__fggpzb($this), _ULong___get_data__impl__fggpzb(other));
      }
      function ULong__compareTo_impl_38i7tu_3($this, other) {
        var tmp = $this.data_1;
        return ULong__compareTo_impl_38i7tu_2(tmp, other instanceof ULong ? other.data_1 : THROW_CCE());
      }
      function ULong__plus_impl_plxuny($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr(other)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_plus = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).plus_u6jwas_k$(_ULong___get_data__impl__fggpzb(tmp0_plus)));
        }
        return tmp$ret$1;
      }
      function ULong__plus_impl_plxuny_0($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245(other)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_plus = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).plus_u6jwas_k$(_ULong___get_data__impl__fggpzb(tmp0_plus)));
        }
        return tmp$ret$1;
      }
      function ULong__plus_impl_plxuny_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw(other)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_plus = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).plus_u6jwas_k$(_ULong___get_data__impl__fggpzb(tmp0_plus)));
        }
        return tmp$ret$1;
      }
      function ULong__plus_impl_plxuny_2($this, other) {
        return _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).plus_u6jwas_k$(_ULong___get_data__impl__fggpzb(other)));
      }
      function ULong__minus_impl_hq1qum($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr(other)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_minus = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).minus_llf5ei_k$(_ULong___get_data__impl__fggpzb(tmp0_minus)));
        }
        return tmp$ret$1;
      }
      function ULong__minus_impl_hq1qum_0($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245(other)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_minus = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).minus_llf5ei_k$(_ULong___get_data__impl__fggpzb(tmp0_minus)));
        }
        return tmp$ret$1;
      }
      function ULong__minus_impl_hq1qum_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw(other)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_minus = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).minus_llf5ei_k$(_ULong___get_data__impl__fggpzb(tmp0_minus)));
        }
        return tmp$ret$1;
      }
      function ULong__minus_impl_hq1qum_2($this, other) {
        return _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).minus_llf5ei_k$(_ULong___get_data__impl__fggpzb(other)));
      }
      function ULong__times_impl_ffj6l4($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr(other)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_times = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).times_2zfqpc_k$(_ULong___get_data__impl__fggpzb(tmp0_times)));
        }
        return tmp$ret$1;
      }
      function ULong__times_impl_ffj6l4_0($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245(other)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_times = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).times_2zfqpc_k$(_ULong___get_data__impl__fggpzb(tmp0_times)));
        }
        return tmp$ret$1;
      }
      function ULong__times_impl_ffj6l4_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw(other)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_times = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).times_2zfqpc_k$(_ULong___get_data__impl__fggpzb(tmp0_times)));
        }
        return tmp$ret$1;
      }
      function ULong__times_impl_ffj6l4_2($this, other) {
        return _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).times_2zfqpc_k$(_ULong___get_data__impl__fggpzb(other)));
      }
      function ULong__div_impl_iugpv1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr(other)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_div = tmp$ret$0;
          tmp$ret$1 = ulongDivide($this, tmp0_div);
        }
        return tmp$ret$1;
      }
      function ULong__div_impl_iugpv1_0($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245(other)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_div = tmp$ret$0;
          tmp$ret$1 = ulongDivide($this, tmp0_div);
        }
        return tmp$ret$1;
      }
      function ULong__div_impl_iugpv1_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw(other)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_div = tmp$ret$0;
          tmp$ret$1 = ulongDivide($this, tmp0_div);
        }
        return tmp$ret$1;
      }
      function ULong__div_impl_iugpv1_2($this, other) {
        return ulongDivide($this, other);
      }
      function ULong__rem_impl_48ncec($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr(other)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_rem = tmp$ret$0;
          tmp$ret$1 = ulongRemainder($this, tmp0_rem);
        }
        return tmp$ret$1;
      }
      function ULong__rem_impl_48ncec_0($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245(other)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_rem = tmp$ret$0;
          tmp$ret$1 = ulongRemainder($this, tmp0_rem);
        }
        return tmp$ret$1;
      }
      function ULong__rem_impl_48ncec_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw(other)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_rem = tmp$ret$0;
          tmp$ret$1 = ulongRemainder($this, tmp0_rem);
        }
        return tmp$ret$1;
      }
      function ULong__rem_impl_48ncec_2($this, other) {
        return ulongRemainder($this, other);
      }
      function ULong__floorDiv_impl_p06vs9($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr(other)).and_jhajnj_k$(new Long(255, 0)));
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = ulongDivide($this, tmp0_floorDiv);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function ULong__floorDiv_impl_p06vs9_0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245(other)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = ulongDivide($this, tmp0_floorDiv);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function ULong__floorDiv_impl_p06vs9_1($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw(other)).and_jhajnj_k$(new Long(-1, 0)));
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = ulongDivide($this, tmp0_floorDiv);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function ULong__floorDiv_impl_p06vs9_2($this, other) {
        var tmp$ret$0;
        {
          tmp$ret$0 = ulongDivide($this, other);
        }
        return tmp$ret$0;
      }
      function ULong__mod_impl_2n37rw($this, other) {
        var tmp$ret$4;
        {
          var tmp$ret$2;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UByte___get_data__impl__jof9qr(other)).and_jhajnj_k$(new Long(255, 0)));
            }
            var tmp0_mod = tmp$ret$0;
            var tmp$ret$1;
            {
              tmp$ret$1 = ulongRemainder($this, tmp0_mod);
            }
            tmp$ret$2 = tmp$ret$1;
          }
          var tmp2_toUByte = tmp$ret$2;
          var tmp$ret$3;
          {
            var tmp1_toUByte = _ULong___get_data__impl__fggpzb(tmp2_toUByte);
            tmp$ret$3 = _UByte___init__impl__g9hnc4(tmp1_toUByte.toByte_edm0nx_k$());
          }
          tmp$ret$4 = tmp$ret$3;
        }
        return tmp$ret$4;
      }
      function ULong__mod_impl_2n37rw_0($this, other) {
        var tmp$ret$4;
        {
          var tmp$ret$2;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245(other)).and_jhajnj_k$(new Long(65535, 0)));
            }
            var tmp0_mod = tmp$ret$0;
            var tmp$ret$1;
            {
              tmp$ret$1 = ulongRemainder($this, tmp0_mod);
            }
            tmp$ret$2 = tmp$ret$1;
          }
          var tmp2_toUShort = tmp$ret$2;
          var tmp$ret$3;
          {
            var tmp1_toUShort = _ULong___get_data__impl__fggpzb(tmp2_toUShort);
            tmp$ret$3 = _UShort___init__impl__jigrne(tmp1_toUShort.toShort_ja8oqn_k$());
          }
          tmp$ret$4 = tmp$ret$3;
        }
        return tmp$ret$4;
      }
      function ULong__mod_impl_2n37rw_1($this, other) {
        var tmp$ret$4;
        {
          var tmp$ret$2;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UInt___get_data__impl__f0vqqw(other)).and_jhajnj_k$(new Long(-1, 0)));
            }
            var tmp0_mod = tmp$ret$0;
            var tmp$ret$1;
            {
              tmp$ret$1 = ulongRemainder($this, tmp0_mod);
            }
            tmp$ret$2 = tmp$ret$1;
          }
          var tmp2_toUInt = tmp$ret$2;
          var tmp$ret$3;
          {
            var tmp1_toUInt = _ULong___get_data__impl__fggpzb(tmp2_toUInt);
            tmp$ret$3 = _UInt___init__impl__l7qpdl(tmp1_toUInt.toInt_1tsl84_k$());
          }
          tmp$ret$4 = tmp$ret$3;
        }
        return tmp$ret$4;
      }
      function ULong__mod_impl_2n37rw_2($this, other) {
        var tmp$ret$0;
        {
          tmp$ret$0 = ulongRemainder($this, other);
        }
        return tmp$ret$0;
      }
      function ULong__inc_impl_e9div4($this) {
        return _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).inc_28ke_k$());
      }
      function ULong__dec_impl_m64tgc($this) {
        return _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).dec_24n6_k$());
      }
      function ULong__rangeTo_impl_tre43e($this, other) {
        return new ULongRange($this, other);
      }
      function ULong__shl_impl_5lazrb($this, bitCount) {
        return _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).shl_po5ip6_k$(bitCount));
      }
      function ULong__shr_impl_8fkq4h($this, bitCount) {
        return _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).ushr_rr8rvr_k$(bitCount));
      }
      function ULong__and_impl_2r8hax($this, other) {
        return _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).and_jhajnj_k$(_ULong___get_data__impl__fggpzb(other)));
      }
      function ULong__or_impl_mne2xz($this, other) {
        return _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).or_s401rn_k$(_ULong___get_data__impl__fggpzb(other)));
      }
      function ULong__xor_impl_stz4wt($this, other) {
        return _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).xor_jjua9n_k$(_ULong___get_data__impl__fggpzb(other)));
      }
      function ULong__inv_impl_n98cct($this) {
        return _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb($this).inv_28kx_k$());
      }
      function ULong__toByte_impl_gxyc49($this) {
        return _ULong___get_data__impl__fggpzb($this).toByte_edm0nx_k$();
      }
      function ULong__toShort_impl_7x1803($this) {
        return _ULong___get_data__impl__fggpzb($this).toShort_ja8oqn_k$();
      }
      function ULong__toInt_impl_3ib0ba($this) {
        return _ULong___get_data__impl__fggpzb($this).toInt_1tsl84_k$();
      }
      function ULong__toLong_impl_i1ol5n($this) {
        return _ULong___get_data__impl__fggpzb($this);
      }
      function ULong__toUByte_impl_bcbk1o($this) {
        var tmp$ret$0;
        {
          var tmp0_toUByte = _ULong___get_data__impl__fggpzb($this);
          tmp$ret$0 = _UByte___init__impl__g9hnc4(tmp0_toUByte.toByte_edm0nx_k$());
        }
        return tmp$ret$0;
      }
      function ULong__toUShort_impl_vjorp6($this) {
        var tmp$ret$0;
        {
          var tmp0_toUShort = _ULong___get_data__impl__fggpzb($this);
          tmp$ret$0 = _UShort___init__impl__jigrne(tmp0_toUShort.toShort_ja8oqn_k$());
        }
        return tmp$ret$0;
      }
      function ULong__toUInt_impl_qlonx5($this) {
        var tmp$ret$0;
        {
          var tmp0_toUInt = _ULong___get_data__impl__fggpzb($this);
          tmp$ret$0 = _UInt___init__impl__l7qpdl(tmp0_toUInt.toInt_1tsl84_k$());
        }
        return tmp$ret$0;
      }
      function ULong__toULong_impl_nnbd88($this) {
        return $this;
      }
      function ULong__toFloat_impl_kebp7h($this) {
        var tmp$ret$0;
        {
          tmp$ret$0 = ulongToDouble(_ULong___get_data__impl__fggpzb($this));
        }
        return tmp$ret$0;
      }
      function ULong__toDouble_impl_dhcxbk($this) {
        return ulongToDouble(_ULong___get_data__impl__fggpzb($this));
      }
      function ULong__toString_impl_f9au7k($this) {
        return ulongToString(_ULong___get_data__impl__fggpzb($this));
      }
      function ULong__hashCode_impl_6hv2lb($this) {
        return $this.hashCode();
      }
      function ULong__equals_impl_o0gnyb($this, other) {
        if (!(other instanceof ULong))
          return false;
        var tmp0_other_with_cast = other instanceof ULong ? other.data_1 : THROW_CCE();
        if (!$this.equals(tmp0_other_with_cast))
          return false;
        return true;
      }
      function ULong(data) {
        Companion_getInstance_8();
        this.data_1 = data;
      }
      ULong.prototype.compareTo_6mr3kz_k$ = function(other) {
        return ULong__compareTo_impl_38i7tu_2(this.data_1, other);
      };
      ULong.prototype.compareTo_6thzaj_k$ = function(other) {
        return ULong__compareTo_impl_38i7tu_3(this, other);
      };
      ULong.prototype.toString = function() {
        return ULong__toString_impl_f9au7k(this.data_1);
      };
      ULong.prototype.hashCode = function() {
        return ULong__hashCode_impl_6hv2lb(this.data_1);
      };
      ULong.prototype.equals = function(other) {
        return ULong__equals_impl_o0gnyb(this.data_1, other);
      };
      ULong.$metadata$ = classMeta("ULong", [Comparable]);
      function toULong(_this__u8e3s4) {
        return _ULong___init__impl__c78o9k(_this__u8e3s4);
      }
      function toULong_0(_this__u8e3s4) {
        return _ULong___init__impl__c78o9k(toLong(_this__u8e3s4));
      }
      function toULong_1(_this__u8e3s4) {
        return doubleToULong(_this__u8e3s4);
      }
      function toULong_2(_this__u8e3s4) {
        return doubleToULong(_this__u8e3s4);
      }
      function toULong_3(_this__u8e3s4) {
        return _ULong___init__impl__c78o9k(toLong(_this__u8e3s4));
      }
      function toULong_4(_this__u8e3s4) {
        return _ULong___init__impl__c78o9k(toLong(_this__u8e3s4));
      }
      function _get_array__jslnqg_1($this) {
        return $this.array_1;
      }
      function _set_index__fyfqnn_1($this, _set____db54di) {
        $this.index_1 = _set____db54di;
      }
      function _get_index__g2optt_1($this) {
        return $this.index_1;
      }
      function _ULongArray___init__impl__twm1l3(storage) {
        return storage;
      }
      function _ULongArray___get_storage__impl__28e64j($this) {
        return $this;
      }
      function _ULongArray___init__impl__twm1l3_0(size2) {
        var tmp = _ULongArray___init__impl__twm1l3(longArray(size2));
        return tmp;
      }
      function ULongArray__get_impl_pr71q9($this, index3) {
        var tmp$ret$0;
        {
          var tmp0_toULong = _ULongArray___get_storage__impl__28e64j($this)[index3];
          tmp$ret$0 = _ULong___init__impl__c78o9k(tmp0_toULong);
        }
        return tmp$ret$0;
      }
      function ULongArray__set_impl_z19mvh($this, index3, value) {
        var tmp = _ULongArray___get_storage__impl__28e64j($this);
        var tmp$ret$0;
        {
          tmp$ret$0 = _ULong___get_data__impl__fggpzb(value);
        }
        tmp[index3] = tmp$ret$0;
      }
      function _ULongArray___get_size__impl__ju6dtr($this) {
        return _ULongArray___get_storage__impl__28e64j($this).length;
      }
      function ULongArray__iterator_impl_cq4d2h($this) {
        return new Iterator_1(_ULongArray___get_storage__impl__28e64j($this));
      }
      function Iterator_1(array3) {
        this.array_1 = array3;
        this.index_1 = 0;
      }
      Iterator_1.prototype.hasNext_bitz1p_k$ = function() {
        return this.index_1 < this.array_1.length;
      };
      Iterator_1.prototype.next_mz6i19_k$ = function() {
        var tmp;
        if (this.index_1 < this.array_1.length) {
          var tmp$ret$0;
          {
            var tmp0_this = this;
            var tmp1 = tmp0_this.index_1;
            tmp0_this.index_1 = tmp1 + 1 | 0;
            var tmp0_toULong = this.array_1[tmp1];
            tmp$ret$0 = _ULong___init__impl__c78o9k(tmp0_toULong);
          }
          tmp = tmp$ret$0;
        } else {
          throw NoSuchElementException_init_$Create$_0(this.index_1.toString());
        }
        return tmp;
      };
      Iterator_1.prototype.next_20eer_k$ = function() {
        return new ULong(this.next_mz6i19_k$());
      };
      Iterator_1.$metadata$ = classMeta("Iterator", [Iterator_3]);
      function ULongArray__contains_impl_v9bgai($this, element) {
        var tmp = isObject2(new ULong(element)) ? new ULong(element) : THROW_CCE();
        if (!(tmp instanceof ULong))
          return false;
        var tmp_0 = _ULongArray___get_storage__impl__28e64j($this);
        var tmp$ret$0;
        {
          tmp$ret$0 = _ULong___get_data__impl__fggpzb(element);
        }
        return contains_3(tmp_0, tmp$ret$0);
      }
      function ULongArray__contains_impl_v9bgai_0($this, element) {
        if (!(element instanceof ULong))
          return false;
        var tmp = $this.storage_1;
        return ULongArray__contains_impl_v9bgai(tmp, element instanceof ULong ? element.data_1 : THROW_CCE());
      }
      function ULongArray__containsAll_impl_xx8ztf($this, elements) {
        var tmp$ret$0;
        $l$block_0: {
          var tmp0_all = isInterface(elements, Collection) ? elements : THROW_CCE();
          var tmp;
          if (isInterface(tmp0_all, Collection)) {
            tmp = tmp0_all.isEmpty_y1axqb_k$();
          } else {
            tmp = false;
          }
          if (tmp) {
            tmp$ret$0 = true;
            break $l$block_0;
          }
          var tmp0_iterator = tmp0_all.iterator_jk1svi_k$();
          while (tmp0_iterator.hasNext_bitz1p_k$()) {
            var element = tmp0_iterator.next_20eer_k$();
            var tmp$ret$2;
            {
              var tmp_0;
              if (element instanceof ULong) {
                var tmp_1 = _ULongArray___get_storage__impl__28e64j($this);
                var tmp$ret$1;
                {
                  var tmp0_toLong = element.data_1;
                  tmp$ret$1 = _ULong___get_data__impl__fggpzb(tmp0_toLong);
                }
                tmp_0 = contains_3(tmp_1, tmp$ret$1);
              } else {
                tmp_0 = false;
              }
              tmp$ret$2 = tmp_0;
            }
            if (!tmp$ret$2) {
              tmp$ret$0 = false;
              break $l$block_0;
            }
          }
          tmp$ret$0 = true;
        }
        return tmp$ret$0;
      }
      function ULongArray__containsAll_impl_xx8ztf_0($this, elements) {
        return ULongArray__containsAll_impl_xx8ztf($this.storage_1, elements);
      }
      function ULongArray__isEmpty_impl_c3yngu($this) {
        return _ULongArray___get_storage__impl__28e64j($this).length === 0;
      }
      function ULongArray__toString_impl_wqk1p5($this) {
        return "ULongArray(storage=" + toString_1($this) + ")";
      }
      function ULongArray__hashCode_impl_aze4wa($this) {
        return hashCode($this);
      }
      function ULongArray__equals_impl_vwitwa($this, other) {
        if (!(other instanceof ULongArray))
          return false;
        var tmp0_other_with_cast = other instanceof ULongArray ? other.storage_1 : THROW_CCE();
        if (!equals($this, tmp0_other_with_cast))
          return false;
        return true;
      }
      function ULongArray(storage) {
        this.storage_1 = storage;
      }
      ULongArray.prototype.get_size_woubt6_k$ = function() {
        return _ULongArray___get_size__impl__ju6dtr(this.storage_1);
      };
      ULongArray.prototype.iterator_jk1svi_k$ = function() {
        return ULongArray__iterator_impl_cq4d2h(this.storage_1);
      };
      ULongArray.prototype.contains_6szeck_k$ = function(element) {
        return ULongArray__contains_impl_v9bgai(this.storage_1, element);
      };
      ULongArray.prototype.contains_2ehdt1_k$ = function(element) {
        return ULongArray__contains_impl_v9bgai_0(this, element);
      };
      ULongArray.prototype.containsAll_4csp1_k$ = function(elements) {
        return ULongArray__containsAll_impl_xx8ztf(this.storage_1, elements);
      };
      ULongArray.prototype.containsAll_jr3fla_k$ = function(elements) {
        return ULongArray__containsAll_impl_xx8ztf_0(this, elements);
      };
      ULongArray.prototype.isEmpty_y1axqb_k$ = function() {
        return ULongArray__isEmpty_impl_c3yngu(this.storage_1);
      };
      ULongArray.prototype.toString = function() {
        return ULongArray__toString_impl_wqk1p5(this.storage_1);
      };
      ULongArray.prototype.hashCode = function() {
        return ULongArray__hashCode_impl_aze4wa(this.storage_1);
      };
      ULongArray.prototype.equals = function(other) {
        return ULongArray__equals_impl_vwitwa(this.storage_1, other);
      };
      ULongArray.$metadata$ = classMeta("ULongArray", [Collection]);
      function Companion_9() {
        Companion_instance_9 = this;
        var tmp = this;
        Companion_getInstance_8();
        var tmp_0 = _ULong___init__impl__c78o9k(new Long(-1, -1));
        Companion_getInstance_8();
        tmp.EMPTY_1 = new ULongRange(tmp_0, _ULong___init__impl__c78o9k(new Long(0, 0)));
      }
      Companion_9.prototype.get_EMPTY_i8q41w_k$ = function() {
        return this.EMPTY_1;
      };
      Companion_9.$metadata$ = objectMeta("Companion");
      var Companion_instance_9;
      function Companion_getInstance_9() {
        if (Companion_instance_9 == null)
          new Companion_9();
        return Companion_instance_9;
      }
      function ULongRange(start2, endInclusive) {
        Companion_getInstance_9();
        ULongProgression.call(this, start2, endInclusive, new Long(1, 0));
      }
      ULongRange.prototype.get_start_tpgxg3_k$ = function() {
        return this.get_first_s0oavz_k$();
      };
      ULongRange.prototype.get_start_iypx6h_k$ = function() {
        return new ULong(this.get_start_tpgxg3_k$());
      };
      ULongRange.prototype.get_endInclusive_gj8vho_k$ = function() {
        return this.get_last_6gle4n_k$();
      };
      ULongRange.prototype.get_endInclusive_r07xpi_k$ = function() {
        return new ULong(this.get_endInclusive_gj8vho_k$());
      };
      ULongRange.prototype.contains_6szeck_k$ = function(value) {
        var tmp;
        var tmp$ret$0;
        {
          var tmp0_compareTo = this.get_first_s0oavz_k$();
          tmp$ret$0 = ulongCompare(_ULong___get_data__impl__fggpzb(tmp0_compareTo), _ULong___get_data__impl__fggpzb(value));
        }
        if (tmp$ret$0 <= 0) {
          var tmp$ret$1;
          {
            var tmp1_compareTo = this.get_last_6gle4n_k$();
            tmp$ret$1 = ulongCompare(_ULong___get_data__impl__fggpzb(value), _ULong___get_data__impl__fggpzb(tmp1_compareTo));
          }
          tmp = tmp$ret$1 <= 0;
        } else {
          tmp = false;
        }
        return tmp;
      };
      ULongRange.prototype.contains_2ehdtg_k$ = function(value) {
        return this.contains_6szeck_k$(value instanceof ULong ? value.data_1 : THROW_CCE());
      };
      ULongRange.prototype.isEmpty_y1axqb_k$ = function() {
        var tmp$ret$0;
        {
          var tmp0_compareTo = this.get_first_s0oavz_k$();
          var tmp1_compareTo = this.get_last_6gle4n_k$();
          tmp$ret$0 = ulongCompare(_ULong___get_data__impl__fggpzb(tmp0_compareTo), _ULong___get_data__impl__fggpzb(tmp1_compareTo));
        }
        return tmp$ret$0 > 0;
      };
      ULongRange.prototype.equals = function(other) {
        var tmp;
        if (other instanceof ULongRange) {
          tmp = (this.isEmpty_y1axqb_k$() ? other.isEmpty_y1axqb_k$() : false) ? true : equals(this.get_first_s0oavz_k$(), other.get_first_s0oavz_k$()) ? equals(this.get_last_6gle4n_k$(), other.get_last_6gle4n_k$()) : false;
        } else {
          tmp = false;
        }
        return tmp;
      };
      ULongRange.prototype.hashCode = function() {
        var tmp;
        if (this.isEmpty_y1axqb_k$()) {
          tmp = -1;
        } else {
          var tmp$ret$2;
          {
            var tmp$ret$1;
            {
              var tmp1_xor = this.get_first_s0oavz_k$();
              var tmp$ret$0;
              {
                var tmp0_shr = this.get_first_s0oavz_k$();
                tmp$ret$0 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_shr).ushr_rr8rvr_k$(32));
              }
              var tmp2_xor = tmp$ret$0;
              tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp1_xor).xor_jjua9n_k$(_ULong___get_data__impl__fggpzb(tmp2_xor)));
            }
            var tmp3_toInt = tmp$ret$1;
            tmp$ret$2 = _ULong___get_data__impl__fggpzb(tmp3_toInt).toInt_1tsl84_k$();
          }
          var tmp_0 = imul(31, tmp$ret$2);
          var tmp$ret$5;
          {
            var tmp$ret$4;
            {
              var tmp5_xor = this.get_last_6gle4n_k$();
              var tmp$ret$3;
              {
                var tmp4_shr = this.get_last_6gle4n_k$();
                tmp$ret$3 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp4_shr).ushr_rr8rvr_k$(32));
              }
              var tmp6_xor = tmp$ret$3;
              tmp$ret$4 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp5_xor).xor_jjua9n_k$(_ULong___get_data__impl__fggpzb(tmp6_xor)));
            }
            var tmp7_toInt = tmp$ret$4;
            tmp$ret$5 = _ULong___get_data__impl__fggpzb(tmp7_toInt).toInt_1tsl84_k$();
          }
          tmp = tmp_0 + tmp$ret$5 | 0;
        }
        return tmp;
      };
      ULongRange.prototype.toString = function() {
        return "" + new ULong(this.get_first_s0oavz_k$()) + ".." + new ULong(this.get_last_6gle4n_k$());
      };
      ULongRange.$metadata$ = classMeta("ULongRange", [ClosedRange], void 0, void 0, void 0, ULongProgression.prototype);
      function Companion_10() {
        Companion_instance_10 = this;
      }
      Companion_10.prototype.fromClosedRange_wj18r3_k$ = function(rangeStart, rangeEnd, step) {
        return new ULongProgression(rangeStart, rangeEnd, step);
      };
      Companion_10.$metadata$ = objectMeta("Companion");
      var Companion_instance_10;
      function Companion_getInstance_10() {
        if (Companion_instance_10 == null)
          new Companion_10();
        return Companion_instance_10;
      }
      function ULongProgression(start2, endInclusive, step) {
        Companion_getInstance_10();
        if (step.equals(new Long(0, 0)))
          throw IllegalArgumentException_init_$Create$_0("Step must be non-zero.");
        Companion_getInstance_20();
        if (step.equals(new Long(0, -2147483648)))
          throw IllegalArgumentException_init_$Create$_0("Step must be greater than Long.MIN_VALUE to avoid overflow on negation.");
        this.first_1 = start2;
        this.last_1 = getProgressionLastElement_0(start2, endInclusive, step);
        this.step_1 = step;
      }
      ULongProgression.prototype.get_first_s0oavz_k$ = function() {
        return this.first_1;
      };
      ULongProgression.prototype.get_last_6gle4n_k$ = function() {
        return this.last_1;
      };
      ULongProgression.prototype.get_step_woujh1_k$ = function() {
        return this.step_1;
      };
      ULongProgression.prototype.iterator_jk1svi_k$ = function() {
        return new ULongProgressionIterator(this.first_1, this.last_1, this.step_1);
      };
      ULongProgression.prototype.isEmpty_y1axqb_k$ = function() {
        var tmp;
        if (this.step_1.compareTo_n4fqi2_k$(new Long(0, 0)) > 0) {
          var tmp$ret$0;
          {
            var tmp0_compareTo = this.first_1;
            var tmp1_compareTo = this.last_1;
            tmp$ret$0 = ulongCompare(_ULong___get_data__impl__fggpzb(tmp0_compareTo), _ULong___get_data__impl__fggpzb(tmp1_compareTo));
          }
          tmp = tmp$ret$0 > 0;
        } else {
          var tmp$ret$1;
          {
            var tmp2_compareTo = this.first_1;
            var tmp3_compareTo = this.last_1;
            tmp$ret$1 = ulongCompare(_ULong___get_data__impl__fggpzb(tmp2_compareTo), _ULong___get_data__impl__fggpzb(tmp3_compareTo));
          }
          tmp = tmp$ret$1 < 0;
        }
        return tmp;
      };
      ULongProgression.prototype.equals = function(other) {
        var tmp;
        if (other instanceof ULongProgression) {
          tmp = (this.isEmpty_y1axqb_k$() ? other.isEmpty_y1axqb_k$() : false) ? true : (equals(this.first_1, other.first_1) ? equals(this.last_1, other.last_1) : false) ? this.step_1.equals(other.step_1) : false;
        } else {
          tmp = false;
        }
        return tmp;
      };
      ULongProgression.prototype.hashCode = function() {
        var tmp;
        if (this.isEmpty_y1axqb_k$()) {
          tmp = -1;
        } else {
          var tmp$ret$2;
          {
            var tmp$ret$1;
            {
              var tmp1_xor = this.first_1;
              var tmp$ret$0;
              {
                var tmp0_shr = this.first_1;
                tmp$ret$0 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_shr).ushr_rr8rvr_k$(32));
              }
              var tmp2_xor = tmp$ret$0;
              tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp1_xor).xor_jjua9n_k$(_ULong___get_data__impl__fggpzb(tmp2_xor)));
            }
            var tmp3_toInt = tmp$ret$1;
            tmp$ret$2 = _ULong___get_data__impl__fggpzb(tmp3_toInt).toInt_1tsl84_k$();
          }
          var tmp_0 = imul(31, tmp$ret$2);
          var tmp$ret$5;
          {
            var tmp$ret$4;
            {
              var tmp5_xor = this.last_1;
              var tmp$ret$3;
              {
                var tmp4_shr = this.last_1;
                tmp$ret$3 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp4_shr).ushr_rr8rvr_k$(32));
              }
              var tmp6_xor = tmp$ret$3;
              tmp$ret$4 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp5_xor).xor_jjua9n_k$(_ULong___get_data__impl__fggpzb(tmp6_xor)));
            }
            var tmp7_toInt = tmp$ret$4;
            tmp$ret$5 = _ULong___get_data__impl__fggpzb(tmp7_toInt).toInt_1tsl84_k$();
          }
          tmp = imul(31, tmp_0 + tmp$ret$5 | 0) + this.step_1.xor_jjua9n_k$(this.step_1.ushr_rr8rvr_k$(32)).toInt_1tsl84_k$() | 0;
        }
        return tmp;
      };
      ULongProgression.prototype.toString = function() {
        return this.step_1.compareTo_n4fqi2_k$(new Long(0, 0)) > 0 ? "" + new ULong(this.first_1) + ".." + new ULong(this.last_1) + " step " + toString_1(this.step_1) : "" + new ULong(this.first_1) + " downTo " + new ULong(this.last_1) + " step " + toString_1(this.step_1.unaryMinus_6uz0qp_k$());
      };
      ULongProgression.$metadata$ = classMeta("ULongProgression", [Iterable]);
      function _get_finalElement__gc6m3p_0($this) {
        return $this.finalElement_1;
      }
      function _set_hasNext__86v2bs_0($this, _set____db54di) {
        $this.hasNext_1 = _set____db54di;
      }
      function _get_hasNext__xt3cos_0($this) {
        return $this.hasNext_1;
      }
      function _get_step__ddv2tb_0($this) {
        return $this.step_1;
      }
      function _set_next__9r2xms_0($this, _set____db54di) {
        $this.next_1 = _set____db54di;
      }
      function _get_next__daux88_0($this) {
        return $this.next_1;
      }
      function ULongProgressionIterator(first, last, step) {
        this.finalElement_1 = last;
        var tmp = this;
        var tmp_0;
        if (step.compareTo_n4fqi2_k$(new Long(0, 0)) > 0) {
          var tmp$ret$0;
          {
            tmp$ret$0 = ulongCompare(_ULong___get_data__impl__fggpzb(first), _ULong___get_data__impl__fggpzb(last));
          }
          tmp_0 = tmp$ret$0 <= 0;
        } else {
          var tmp$ret$1;
          {
            tmp$ret$1 = ulongCompare(_ULong___get_data__impl__fggpzb(first), _ULong___get_data__impl__fggpzb(last));
          }
          tmp_0 = tmp$ret$1 >= 0;
        }
        tmp.hasNext_1 = tmp_0;
        var tmp_1 = this;
        var tmp$ret$2;
        {
          tmp$ret$2 = _ULong___init__impl__c78o9k(step);
        }
        tmp_1.step_1 = tmp$ret$2;
        this.next_1 = this.hasNext_1 ? first : this.finalElement_1;
      }
      ULongProgressionIterator.prototype.hasNext_bitz1p_k$ = function() {
        return this.hasNext_1;
      };
      ULongProgressionIterator.prototype.next_mz6i19_k$ = function() {
        var value = this.next_1;
        if (equals(value, this.finalElement_1)) {
          if (!this.hasNext_1)
            throw NoSuchElementException_init_$Create$();
          this.hasNext_1 = false;
        } else {
          var tmp0_this = this;
          var tmp = tmp0_this;
          var tmp$ret$0;
          {
            var tmp0_plus = tmp0_this.next_1;
            var tmp1_plus = this.step_1;
            tmp$ret$0 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_plus).plus_u6jwas_k$(_ULong___get_data__impl__fggpzb(tmp1_plus)));
          }
          tmp.next_1 = tmp$ret$0;
        }
        return value;
      };
      ULongProgressionIterator.prototype.next_20eer_k$ = function() {
        return new ULong(this.next_mz6i19_k$());
      };
      ULongProgressionIterator.$metadata$ = classMeta("ULongProgressionIterator", [Iterator_3]);
      function getProgressionLastElement(start2, end, step) {
        var tmp;
        if (step > 0) {
          var tmp_0;
          var tmp$ret$0;
          {
            tmp$ret$0 = uintCompare(_UInt___get_data__impl__f0vqqw(start2), _UInt___get_data__impl__f0vqqw(end));
          }
          if (tmp$ret$0 >= 0) {
            tmp_0 = end;
          } else {
            var tmp$ret$2;
            {
              var tmp$ret$1;
              {
                tmp$ret$1 = _UInt___init__impl__l7qpdl(step);
              }
              var tmp0_minus = differenceModulo(end, start2, tmp$ret$1);
              tmp$ret$2 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(end) - _UInt___get_data__impl__f0vqqw(tmp0_minus) | 0);
            }
            tmp_0 = tmp$ret$2;
          }
          tmp = tmp_0;
        } else if (step < 0) {
          var tmp_1;
          var tmp$ret$3;
          {
            tmp$ret$3 = uintCompare(_UInt___get_data__impl__f0vqqw(start2), _UInt___get_data__impl__f0vqqw(end));
          }
          if (tmp$ret$3 <= 0) {
            tmp_1 = end;
          } else {
            var tmp$ret$5;
            {
              var tmp$ret$4;
              {
                var tmp1_toUInt = -step | 0;
                tmp$ret$4 = _UInt___init__impl__l7qpdl(tmp1_toUInt);
              }
              var tmp2_plus = differenceModulo(start2, end, tmp$ret$4);
              tmp$ret$5 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(end) + _UInt___get_data__impl__f0vqqw(tmp2_plus) | 0);
            }
            tmp_1 = tmp$ret$5;
          }
          tmp = tmp_1;
        } else {
          throw IllegalArgumentException_init_$Create$_0("Step is zero.");
        }
        return tmp;
      }
      function getProgressionLastElement_0(start2, end, step) {
        var tmp;
        if (step.compareTo_n4fqi2_k$(new Long(0, 0)) > 0) {
          var tmp_0;
          var tmp$ret$0;
          {
            tmp$ret$0 = ulongCompare(_ULong___get_data__impl__fggpzb(start2), _ULong___get_data__impl__fggpzb(end));
          }
          if (tmp$ret$0 >= 0) {
            tmp_0 = end;
          } else {
            var tmp$ret$2;
            {
              var tmp$ret$1;
              {
                tmp$ret$1 = _ULong___init__impl__c78o9k(step);
              }
              var tmp0_minus = differenceModulo_0(end, start2, tmp$ret$1);
              tmp$ret$2 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(end).minus_llf5ei_k$(_ULong___get_data__impl__fggpzb(tmp0_minus)));
            }
            tmp_0 = tmp$ret$2;
          }
          tmp = tmp_0;
        } else if (step.compareTo_n4fqi2_k$(new Long(0, 0)) < 0) {
          var tmp_1;
          var tmp$ret$3;
          {
            tmp$ret$3 = ulongCompare(_ULong___get_data__impl__fggpzb(start2), _ULong___get_data__impl__fggpzb(end));
          }
          if (tmp$ret$3 <= 0) {
            tmp_1 = end;
          } else {
            var tmp$ret$5;
            {
              var tmp$ret$4;
              {
                var tmp1_toULong = step.unaryMinus_6uz0qp_k$();
                tmp$ret$4 = _ULong___init__impl__c78o9k(tmp1_toULong);
              }
              var tmp2_plus = differenceModulo_0(start2, end, tmp$ret$4);
              tmp$ret$5 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(end).plus_u6jwas_k$(_ULong___get_data__impl__fggpzb(tmp2_plus)));
            }
            tmp_1 = tmp$ret$5;
          }
          tmp = tmp_1;
        } else {
          throw IllegalArgumentException_init_$Create$_0("Step is zero.");
        }
        return tmp;
      }
      function differenceModulo(a3, b, c5) {
        var tmp$ret$0;
        {
          tmp$ret$0 = uintRemainder(a3, c5);
        }
        var ac = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = uintRemainder(b, c5);
        }
        var bc = tmp$ret$1;
        var tmp;
        var tmp$ret$2;
        {
          tmp$ret$2 = uintCompare(_UInt___get_data__impl__f0vqqw(ac), _UInt___get_data__impl__f0vqqw(bc));
        }
        if (tmp$ret$2 >= 0) {
          var tmp$ret$3;
          {
            tmp$ret$3 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(ac) - _UInt___get_data__impl__f0vqqw(bc) | 0);
          }
          tmp = tmp$ret$3;
        } else {
          var tmp$ret$5;
          {
            var tmp$ret$4;
            {
              tmp$ret$4 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(ac) - _UInt___get_data__impl__f0vqqw(bc) | 0);
            }
            var tmp0_plus = tmp$ret$4;
            tmp$ret$5 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_plus) + _UInt___get_data__impl__f0vqqw(c5) | 0);
          }
          tmp = tmp$ret$5;
        }
        return tmp;
      }
      function differenceModulo_0(a3, b, c5) {
        var tmp$ret$0;
        {
          tmp$ret$0 = ulongRemainder(a3, c5);
        }
        var ac = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = ulongRemainder(b, c5);
        }
        var bc = tmp$ret$1;
        var tmp;
        var tmp$ret$2;
        {
          tmp$ret$2 = ulongCompare(_ULong___get_data__impl__fggpzb(ac), _ULong___get_data__impl__fggpzb(bc));
        }
        if (tmp$ret$2 >= 0) {
          var tmp$ret$3;
          {
            tmp$ret$3 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(ac).minus_llf5ei_k$(_ULong___get_data__impl__fggpzb(bc)));
          }
          tmp = tmp$ret$3;
        } else {
          var tmp$ret$5;
          {
            var tmp$ret$4;
            {
              tmp$ret$4 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(ac).minus_llf5ei_k$(_ULong___get_data__impl__fggpzb(bc)));
            }
            var tmp0_plus = tmp$ret$4;
            tmp$ret$5 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_plus).plus_u6jwas_k$(_ULong___get_data__impl__fggpzb(c5)));
          }
          tmp = tmp$ret$5;
        }
        return tmp;
      }
      function _UShort___init__impl__jigrne(data) {
        return data;
      }
      function _UShort___get_data__impl__g0245($this) {
        return $this;
      }
      function Companion_11() {
        Companion_instance_11 = this;
        this.MIN_VALUE_1 = _UShort___init__impl__jigrne(0);
        this.MAX_VALUE_1 = _UShort___init__impl__jigrne(-1);
        this.SIZE_BYTES_1 = 2;
        this.SIZE_BITS_1 = 16;
      }
      Companion_11.prototype.get_MIN_VALUE_5rgn3n_k$ = function() {
        return this.MIN_VALUE_1;
      };
      Companion_11.prototype.get_MAX_VALUE_1r6om7_k$ = function() {
        return this.MAX_VALUE_1;
      };
      Companion_11.prototype.get_SIZE_BYTES_qphg4q_k$ = function() {
        return this.SIZE_BYTES_1;
      };
      Companion_11.prototype.get_SIZE_BITS_7qhjj9_k$ = function() {
        return this.SIZE_BITS_1;
      };
      Companion_11.$metadata$ = objectMeta("Companion");
      var Companion_instance_11;
      function Companion_getInstance_11() {
        if (Companion_instance_11 == null)
          new Companion_11();
        return Companion_instance_11;
      }
      function UShort__compareTo_impl_1pfgyc($this, other) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UShort___get_data__impl__g0245($this) & 65535;
        }
        var tmp = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = _UByte___get_data__impl__jof9qr(other) & 255;
        }
        return compareTo_0(tmp, tmp$ret$1);
      }
      function UShort__compareTo_impl_1pfgyc_0($this, other) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UShort___get_data__impl__g0245($this) & 65535;
        }
        var tmp = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = _UShort___get_data__impl__g0245(other) & 65535;
        }
        return compareTo_0(tmp, tmp$ret$1);
      }
      function UShort__compareTo_impl_1pfgyc_1($this, other) {
        var tmp = $this.data_1;
        return UShort__compareTo_impl_1pfgyc_0(tmp, other instanceof UShort ? other.data_1 : THROW_CCE());
      }
      function UShort__compareTo_impl_1pfgyc_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_compareTo = tmp$ret$0;
          tmp$ret$1 = uintCompare(_UInt___get_data__impl__f0vqqw(tmp0_compareTo), _UInt___get_data__impl__f0vqqw(other));
        }
        return tmp$ret$1;
      }
      function UShort__compareTo_impl_1pfgyc_3($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245($this)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_compareTo = tmp$ret$0;
          tmp$ret$1 = ulongCompare(_ULong___get_data__impl__fggpzb(tmp0_compareTo), _ULong___get_data__impl__fggpzb(other));
        }
        return tmp$ret$1;
      }
      function UShort__plus_impl_s0k2d0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_plus = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp1_plus = tmp$ret$1;
          tmp$ret$2 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_plus) + _UInt___get_data__impl__f0vqqw(tmp1_plus) | 0);
        }
        return tmp$ret$2;
      }
      function UShort__plus_impl_s0k2d0_0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_plus = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp1_plus = tmp$ret$1;
          tmp$ret$2 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_plus) + _UInt___get_data__impl__f0vqqw(tmp1_plus) | 0);
        }
        return tmp$ret$2;
      }
      function UShort__plus_impl_s0k2d0_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_plus = tmp$ret$0;
          tmp$ret$1 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_plus) + _UInt___get_data__impl__f0vqqw(other) | 0);
        }
        return tmp$ret$1;
      }
      function UShort__plus_impl_s0k2d0_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245($this)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_plus = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_plus).plus_u6jwas_k$(_ULong___get_data__impl__fggpzb(other)));
        }
        return tmp$ret$1;
      }
      function UShort__minus_impl_e61690($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_minus = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp1_minus = tmp$ret$1;
          tmp$ret$2 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_minus) - _UInt___get_data__impl__f0vqqw(tmp1_minus) | 0);
        }
        return tmp$ret$2;
      }
      function UShort__minus_impl_e61690_0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_minus = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp1_minus = tmp$ret$1;
          tmp$ret$2 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_minus) - _UInt___get_data__impl__f0vqqw(tmp1_minus) | 0);
        }
        return tmp$ret$2;
      }
      function UShort__minus_impl_e61690_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_minus = tmp$ret$0;
          tmp$ret$1 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp0_minus) - _UInt___get_data__impl__f0vqqw(other) | 0);
        }
        return tmp$ret$1;
      }
      function UShort__minus_impl_e61690_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245($this)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_minus = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_minus).minus_llf5ei_k$(_ULong___get_data__impl__fggpzb(other)));
        }
        return tmp$ret$1;
      }
      function UShort__times_impl_bvilzi($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_times = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp1_times = tmp$ret$1;
          tmp$ret$2 = _UInt___init__impl__l7qpdl(imul(_UInt___get_data__impl__f0vqqw(tmp0_times), _UInt___get_data__impl__f0vqqw(tmp1_times)));
        }
        return tmp$ret$2;
      }
      function UShort__times_impl_bvilzi_0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_times = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp1_times = tmp$ret$1;
          tmp$ret$2 = _UInt___init__impl__l7qpdl(imul(_UInt___get_data__impl__f0vqqw(tmp0_times), _UInt___get_data__impl__f0vqqw(tmp1_times)));
        }
        return tmp$ret$2;
      }
      function UShort__times_impl_bvilzi_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_times = tmp$ret$0;
          tmp$ret$1 = _UInt___init__impl__l7qpdl(imul(_UInt___get_data__impl__f0vqqw(tmp0_times), _UInt___get_data__impl__f0vqqw(other)));
        }
        return tmp$ret$1;
      }
      function UShort__times_impl_bvilzi_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245($this)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_times = tmp$ret$0;
          tmp$ret$1 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp0_times).times_2zfqpc_k$(_ULong___get_data__impl__fggpzb(other)));
        }
        return tmp$ret$1;
      }
      function UShort__div_impl_b0o0rh($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_div = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp1_div = tmp$ret$1;
          tmp$ret$2 = uintDivide(tmp0_div, tmp1_div);
        }
        return tmp$ret$2;
      }
      function UShort__div_impl_b0o0rh_0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_div = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp1_div = tmp$ret$1;
          tmp$ret$2 = uintDivide(tmp0_div, tmp1_div);
        }
        return tmp$ret$2;
      }
      function UShort__div_impl_b0o0rh_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_div = tmp$ret$0;
          tmp$ret$1 = uintDivide(tmp0_div, other);
        }
        return tmp$ret$1;
      }
      function UShort__div_impl_b0o0rh_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245($this)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_div = tmp$ret$0;
          tmp$ret$1 = ulongDivide(tmp0_div, other);
        }
        return tmp$ret$1;
      }
      function UShort__rem_impl_pmhe86($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_rem = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp1_rem = tmp$ret$1;
          tmp$ret$2 = uintRemainder(tmp0_rem, tmp1_rem);
        }
        return tmp$ret$2;
      }
      function UShort__rem_impl_pmhe86_0($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_rem = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp1_rem = tmp$ret$1;
          tmp$ret$2 = uintRemainder(tmp0_rem, tmp1_rem);
        }
        return tmp$ret$2;
      }
      function UShort__rem_impl_pmhe86_1($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_rem = tmp$ret$0;
          tmp$ret$1 = uintRemainder(tmp0_rem, other);
        }
        return tmp$ret$1;
      }
      function UShort__rem_impl_pmhe86_2($this, other) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245($this)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_rem = tmp$ret$0;
          tmp$ret$1 = ulongRemainder(tmp0_rem, other);
        }
        return tmp$ret$1;
      }
      function UShort__floorDiv_impl_gebnkx($this, other) {
        var tmp$ret$3;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
          }
          var tmp1_floorDiv = tmp$ret$1;
          var tmp$ret$2;
          {
            tmp$ret$2 = uintDivide(tmp0_floorDiv, tmp1_floorDiv);
          }
          tmp$ret$3 = tmp$ret$2;
        }
        return tmp$ret$3;
      }
      function UShort__floorDiv_impl_gebnkx_0($this, other) {
        var tmp$ret$3;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
          }
          var tmp1_floorDiv = tmp$ret$1;
          var tmp$ret$2;
          {
            tmp$ret$2 = uintDivide(tmp0_floorDiv, tmp1_floorDiv);
          }
          tmp$ret$3 = tmp$ret$2;
        }
        return tmp$ret$3;
      }
      function UShort__floorDiv_impl_gebnkx_1($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = uintDivide(tmp0_floorDiv, other);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function UShort__floorDiv_impl_gebnkx_2($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245($this)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_floorDiv = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = ulongDivide(tmp0_floorDiv, other);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function UShort__mod_impl_r81ium($this, other) {
        var tmp$ret$5;
        {
          var tmp$ret$3;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
            }
            var tmp0_mod = tmp$ret$0;
            var tmp$ret$1;
            {
              tmp$ret$1 = _UInt___init__impl__l7qpdl(_UByte___get_data__impl__jof9qr(other) & 255);
            }
            var tmp1_mod = tmp$ret$1;
            var tmp$ret$2;
            {
              tmp$ret$2 = uintRemainder(tmp0_mod, tmp1_mod);
            }
            tmp$ret$3 = tmp$ret$2;
          }
          var tmp2_toUByte = tmp$ret$3;
          var tmp$ret$4;
          {
            var tmp0_toUByte = _UInt___get_data__impl__f0vqqw(tmp2_toUByte);
            tmp$ret$4 = _UByte___init__impl__g9hnc4(toByte(tmp0_toUByte));
          }
          tmp$ret$5 = tmp$ret$4;
        }
        return tmp$ret$5;
      }
      function UShort__mod_impl_r81ium_0($this, other) {
        var tmp$ret$5;
        {
          var tmp$ret$3;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
            }
            var tmp0_mod = tmp$ret$0;
            var tmp$ret$1;
            {
              tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
            }
            var tmp1_mod = tmp$ret$1;
            var tmp$ret$2;
            {
              tmp$ret$2 = uintRemainder(tmp0_mod, tmp1_mod);
            }
            tmp$ret$3 = tmp$ret$2;
          }
          var tmp2_toUShort = tmp$ret$3;
          var tmp$ret$4;
          {
            var tmp0_toUShort = _UInt___get_data__impl__f0vqqw(tmp2_toUShort);
            tmp$ret$4 = _UShort___init__impl__jigrne(toShort(tmp0_toUShort));
          }
          tmp$ret$5 = tmp$ret$4;
        }
        return tmp$ret$5;
      }
      function UShort__mod_impl_r81ium_1($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
          }
          var tmp0_mod = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = uintRemainder(tmp0_mod, other);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function UShort__mod_impl_r81ium_2($this, other) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245($this)).and_jhajnj_k$(new Long(65535, 0)));
          }
          var tmp0_mod = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = ulongRemainder(tmp0_mod, other);
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return tmp$ret$2;
      }
      function UShort__inc_impl_flr7re($this) {
        return _UShort___init__impl__jigrne(numberToShort(_UShort___get_data__impl__g0245($this) + 1));
      }
      function UShort__dec_impl_7ozx66($this) {
        return _UShort___init__impl__jigrne(numberToShort(_UShort___get_data__impl__g0245($this) - 1));
      }
      function UShort__rangeTo_impl_xfunss($this, other) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
        }
        var tmp = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245(other) & 65535);
        }
        return new UIntRange(tmp, tmp$ret$1);
      }
      function UShort__and_impl_wmd7xf($this, other) {
        var tmp$ret$0;
        {
          var tmp0_and = _UShort___get_data__impl__g0245($this);
          var tmp1_and = _UShort___get_data__impl__g0245(other);
          tmp$ret$0 = toShort(tmp0_and & tmp1_and);
        }
        return _UShort___init__impl__jigrne(tmp$ret$0);
      }
      function UShort__or_impl_uhj9st($this, other) {
        var tmp$ret$0;
        {
          var tmp0_or = _UShort___get_data__impl__g0245($this);
          var tmp1_or = _UShort___get_data__impl__g0245(other);
          tmp$ret$0 = toShort(tmp0_or | tmp1_or);
        }
        return _UShort___init__impl__jigrne(tmp$ret$0);
      }
      function UShort__xor_impl_cc06ft($this, other) {
        var tmp$ret$0;
        {
          var tmp0_xor = _UShort___get_data__impl__g0245($this);
          var tmp1_xor = _UShort___get_data__impl__g0245(other);
          tmp$ret$0 = toShort(tmp0_xor ^ tmp1_xor);
        }
        return _UShort___init__impl__jigrne(tmp$ret$0);
      }
      function UShort__inv_impl_6lwe9p($this) {
        var tmp$ret$0;
        {
          var tmp0_inv = _UShort___get_data__impl__g0245($this);
          tmp$ret$0 = toShort(~tmp0_inv);
        }
        return _UShort___init__impl__jigrne(tmp$ret$0);
      }
      function UShort__toByte_impl_m9fcil($this) {
        return toByte(_UShort___get_data__impl__g0245($this));
      }
      function UShort__toShort_impl_fqwi31($this) {
        return _UShort___get_data__impl__g0245($this);
      }
      function UShort__toInt_impl_72bkww($this) {
        return _UShort___get_data__impl__g0245($this) & 65535;
      }
      function UShort__toLong_impl_ds1s6n($this) {
        return toLong(_UShort___get_data__impl__g0245($this)).and_jhajnj_k$(new Long(65535, 0));
      }
      function UShort__toUByte_impl_3ig9yq($this) {
        var tmp$ret$0;
        {
          var tmp0_toUByte = _UShort___get_data__impl__g0245($this);
          tmp$ret$0 = _UByte___init__impl__g9hnc4(toByte(tmp0_toUByte));
        }
        return tmp$ret$0;
      }
      function UShort__toUShort_impl_1x3938($this) {
        return $this;
      }
      function UShort__toUInt_impl_581pf5($this) {
        return _UInt___init__impl__l7qpdl(_UShort___get_data__impl__g0245($this) & 65535);
      }
      function UShort__toULong_impl_vh6nb6($this) {
        return _ULong___init__impl__c78o9k(toLong(_UShort___get_data__impl__g0245($this)).and_jhajnj_k$(new Long(65535, 0)));
      }
      function UShort__toFloat_impl_ckgf4j($this) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UShort___get_data__impl__g0245($this) & 65535;
        }
        return tmp$ret$0;
      }
      function UShort__toDouble_impl_g58lae($this) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UShort___get_data__impl__g0245($this) & 65535;
        }
        return tmp$ret$0;
      }
      function UShort__toString_impl_edaoee($this) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UShort___get_data__impl__g0245($this) & 65535;
        }
        return tmp$ret$0.toString();
      }
      function UShort__hashCode_impl_ywngrv($this) {
        return $this;
      }
      function UShort__equals_impl_7t9pdz($this, other) {
        if (!(other instanceof UShort))
          return false;
        var tmp0_other_with_cast = other instanceof UShort ? other.data_1 : THROW_CCE();
        if (!($this === tmp0_other_with_cast))
          return false;
        return true;
      }
      function UShort(data) {
        Companion_getInstance_11();
        this.data_1 = data;
      }
      UShort.prototype.compareTo_7e9yiz_k$ = function(other) {
        return UShort__compareTo_impl_1pfgyc_0(this.data_1, other);
      };
      UShort.prototype.compareTo_6thzaj_k$ = function(other) {
        return UShort__compareTo_impl_1pfgyc_1(this, other);
      };
      UShort.prototype.toString = function() {
        return UShort__toString_impl_edaoee(this.data_1);
      };
      UShort.prototype.hashCode = function() {
        return UShort__hashCode_impl_ywngrv(this.data_1);
      };
      UShort.prototype.equals = function(other) {
        return UShort__equals_impl_7t9pdz(this.data_1, other);
      };
      UShort.$metadata$ = classMeta("UShort", [Comparable]);
      function toUShort(_this__u8e3s4) {
        return _UShort___init__impl__jigrne(toShort(_this__u8e3s4));
      }
      function toUShort_0(_this__u8e3s4) {
        return _UShort___init__impl__jigrne(_this__u8e3s4.toShort_ja8oqn_k$());
      }
      function toUShort_1(_this__u8e3s4) {
        return _UShort___init__impl__jigrne(_this__u8e3s4);
      }
      function _get_array__jslnqg_2($this) {
        return $this.array_1;
      }
      function _set_index__fyfqnn_2($this, _set____db54di) {
        $this.index_1 = _set____db54di;
      }
      function _get_index__g2optt_2($this) {
        return $this.index_1;
      }
      function _UShortArray___init__impl__9b26ef(storage) {
        return storage;
      }
      function _UShortArray___get_storage__impl__t2jpv5($this) {
        return $this;
      }
      function _UShortArray___init__impl__9b26ef_0(size2) {
        var tmp = _UShortArray___init__impl__9b26ef(new Int16Array(size2));
        return tmp;
      }
      function UShortArray__get_impl_fnbhmx($this, index3) {
        var tmp$ret$0;
        {
          var tmp0_toUShort = _UShortArray___get_storage__impl__t2jpv5($this)[index3];
          tmp$ret$0 = _UShort___init__impl__jigrne(tmp0_toUShort);
        }
        return tmp$ret$0;
      }
      function UShortArray__set_impl_6d8whp($this, index3, value) {
        var tmp = _UShortArray___get_storage__impl__t2jpv5($this);
        var tmp$ret$0;
        {
          tmp$ret$0 = _UShort___get_data__impl__g0245(value);
        }
        tmp[index3] = tmp$ret$0;
      }
      function _UShortArray___get_size__impl__jqto1b($this) {
        return _UShortArray___get_storage__impl__t2jpv5($this).length;
      }
      function UShortArray__iterator_impl_ktpenn($this) {
        return new Iterator_2(_UShortArray___get_storage__impl__t2jpv5($this));
      }
      function Iterator_2(array3) {
        this.array_1 = array3;
        this.index_1 = 0;
      }
      Iterator_2.prototype.hasNext_bitz1p_k$ = function() {
        return this.index_1 < this.array_1.length;
      };
      Iterator_2.prototype.next_1vquzf_k$ = function() {
        var tmp;
        if (this.index_1 < this.array_1.length) {
          var tmp$ret$0;
          {
            var tmp0_this = this;
            var tmp1 = tmp0_this.index_1;
            tmp0_this.index_1 = tmp1 + 1 | 0;
            var tmp0_toUShort = this.array_1[tmp1];
            tmp$ret$0 = _UShort___init__impl__jigrne(tmp0_toUShort);
          }
          tmp = tmp$ret$0;
        } else {
          throw NoSuchElementException_init_$Create$_0(this.index_1.toString());
        }
        return tmp;
      };
      Iterator_2.prototype.next_20eer_k$ = function() {
        return new UShort(this.next_1vquzf_k$());
      };
      Iterator_2.$metadata$ = classMeta("Iterator", [Iterator_3]);
      function UShortArray__contains_impl_vo7k3g($this, element) {
        var tmp = isObject2(new UShort(element)) ? new UShort(element) : THROW_CCE();
        if (!(tmp instanceof UShort))
          return false;
        var tmp_0 = _UShortArray___get_storage__impl__t2jpv5($this);
        var tmp$ret$0;
        {
          tmp$ret$0 = _UShort___get_data__impl__g0245(element);
        }
        return contains_1(tmp_0, tmp$ret$0);
      }
      function UShortArray__contains_impl_vo7k3g_0($this, element) {
        if (!(element instanceof UShort))
          return false;
        var tmp = $this.storage_1;
        return UShortArray__contains_impl_vo7k3g(tmp, element instanceof UShort ? element.data_1 : THROW_CCE());
      }
      function UShortArray__containsAll_impl_vlaaxp($this, elements) {
        var tmp$ret$0;
        $l$block_0: {
          var tmp0_all = isInterface(elements, Collection) ? elements : THROW_CCE();
          var tmp;
          if (isInterface(tmp0_all, Collection)) {
            tmp = tmp0_all.isEmpty_y1axqb_k$();
          } else {
            tmp = false;
          }
          if (tmp) {
            tmp$ret$0 = true;
            break $l$block_0;
          }
          var tmp0_iterator = tmp0_all.iterator_jk1svi_k$();
          while (tmp0_iterator.hasNext_bitz1p_k$()) {
            var element = tmp0_iterator.next_20eer_k$();
            var tmp$ret$2;
            {
              var tmp_0;
              if (element instanceof UShort) {
                var tmp_1 = _UShortArray___get_storage__impl__t2jpv5($this);
                var tmp$ret$1;
                {
                  var tmp0_toShort = element.data_1;
                  tmp$ret$1 = _UShort___get_data__impl__g0245(tmp0_toShort);
                }
                tmp_0 = contains_1(tmp_1, tmp$ret$1);
              } else {
                tmp_0 = false;
              }
              tmp$ret$2 = tmp_0;
            }
            if (!tmp$ret$2) {
              tmp$ret$0 = false;
              break $l$block_0;
            }
          }
          tmp$ret$0 = true;
        }
        return tmp$ret$0;
      }
      function UShortArray__containsAll_impl_vlaaxp_0($this, elements) {
        return UShortArray__containsAll_impl_vlaaxp($this.storage_1, elements);
      }
      function UShortArray__isEmpty_impl_cdd9l0($this) {
        return _UShortArray___get_storage__impl__t2jpv5($this).length === 0;
      }
      function UShortArray__toString_impl_omz03z($this) {
        return "UShortArray(storage=" + toString_1($this) + ")";
      }
      function UShortArray__hashCode_impl_2vt3b4($this) {
        return hashCode($this);
      }
      function UShortArray__equals_impl_tyc3mk($this, other) {
        if (!(other instanceof UShortArray))
          return false;
        var tmp0_other_with_cast = other instanceof UShortArray ? other.storage_1 : THROW_CCE();
        if (!equals($this, tmp0_other_with_cast))
          return false;
        return true;
      }
      function UShortArray(storage) {
        this.storage_1 = storage;
      }
      UShortArray.prototype.get_size_woubt6_k$ = function() {
        return _UShortArray___get_size__impl__jqto1b(this.storage_1);
      };
      UShortArray.prototype.iterator_jk1svi_k$ = function() {
        return UShortArray__iterator_impl_ktpenn(this.storage_1);
      };
      UShortArray.prototype.contains_214orw_k$ = function(element) {
        return UShortArray__contains_impl_vo7k3g(this.storage_1, element);
      };
      UShortArray.prototype.contains_2ehdt1_k$ = function(element) {
        return UShortArray__contains_impl_vo7k3g_0(this, element);
      };
      UShortArray.prototype.containsAll_6yien3_k$ = function(elements) {
        return UShortArray__containsAll_impl_vlaaxp(this.storage_1, elements);
      };
      UShortArray.prototype.containsAll_jr3fla_k$ = function(elements) {
        return UShortArray__containsAll_impl_vlaaxp_0(this, elements);
      };
      UShortArray.prototype.isEmpty_y1axqb_k$ = function() {
        return UShortArray__isEmpty_impl_cdd9l0(this.storage_1);
      };
      UShortArray.prototype.toString = function() {
        return UShortArray__toString_impl_omz03z(this.storage_1);
      };
      UShortArray.prototype.hashCode = function() {
        return UShortArray__hashCode_impl_2vt3b4(this.storage_1);
      };
      UShortArray.prototype.equals = function(other) {
        return UShortArray__equals_impl_tyc3mk(this.storage_1, other);
      };
      UShortArray.$metadata$ = classMeta("UShortArray", [Collection]);
      function uintCompare(v1, v2) {
        return compareTo_0(v1 ^ IntCompanionObject_getInstance().MIN_VALUE_1, v2 ^ IntCompanionObject_getInstance().MIN_VALUE_1);
      }
      function uintDivide(v1, v2) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = toLong(_UInt___get_data__impl__f0vqqw(v1)).and_jhajnj_k$(new Long(-1, 0));
          }
          var tmp = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = toLong(_UInt___get_data__impl__f0vqqw(v2)).and_jhajnj_k$(new Long(-1, 0));
          }
          var tmp0_toUInt = tmp.div_9s1fi3_k$(tmp$ret$1);
          tmp$ret$2 = _UInt___init__impl__l7qpdl(tmp0_toUInt.toInt_1tsl84_k$());
        }
        return tmp$ret$2;
      }
      function uintRemainder(v1, v2) {
        var tmp$ret$2;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = toLong(_UInt___get_data__impl__f0vqqw(v1)).and_jhajnj_k$(new Long(-1, 0));
          }
          var tmp = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = toLong(_UInt___get_data__impl__f0vqqw(v2)).and_jhajnj_k$(new Long(-1, 0));
          }
          var tmp0_toUInt = tmp.rem_9rbcjo_k$(tmp$ret$1);
          tmp$ret$2 = _UInt___init__impl__l7qpdl(tmp0_toUInt.toInt_1tsl84_k$());
        }
        return tmp$ret$2;
      }
      function uintToDouble(v) {
        return (v & IntCompanionObject_getInstance().MAX_VALUE_1) + ((v >>> 31 | 0) << 30) * 2;
      }
      function ulongCompare(v1, v2) {
        Companion_getInstance_20();
        var tmp = v1.xor_jjua9n_k$(new Long(0, -2147483648));
        Companion_getInstance_20();
        return tmp.compareTo_n4fqi2_k$(v2.xor_jjua9n_k$(new Long(0, -2147483648)));
      }
      function ulongDivide(v1, v2) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _ULong___get_data__impl__fggpzb(v1);
        }
        var dividend = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = _ULong___get_data__impl__fggpzb(v2);
        }
        var divisor = tmp$ret$1;
        if (divisor.compareTo_n4fqi2_k$(new Long(0, 0)) < 0) {
          var tmp;
          var tmp$ret$2;
          {
            tmp$ret$2 = ulongCompare(_ULong___get_data__impl__fggpzb(v1), _ULong___get_data__impl__fggpzb(v2));
          }
          if (tmp$ret$2 < 0) {
            tmp = _ULong___init__impl__c78o9k(new Long(0, 0));
          } else {
            tmp = _ULong___init__impl__c78o9k(new Long(1, 0));
          }
          return tmp;
        }
        if (dividend.compareTo_n4fqi2_k$(new Long(0, 0)) >= 0) {
          return _ULong___init__impl__c78o9k(dividend.div_9s1fi3_k$(divisor));
        }
        var quotient = dividend.ushr_rr8rvr_k$(1).div_9s1fi3_k$(divisor).shl_po5ip6_k$(1);
        var rem = dividend.minus_llf5ei_k$(quotient.times_2zfqpc_k$(divisor));
        var tmp$ret$4;
        {
          var tmp_0;
          var tmp$ret$3;
          {
            var tmp0_compareTo = _ULong___init__impl__c78o9k(rem);
            var tmp1_compareTo = _ULong___init__impl__c78o9k(divisor);
            tmp$ret$3 = ulongCompare(_ULong___get_data__impl__fggpzb(tmp0_compareTo), _ULong___get_data__impl__fggpzb(tmp1_compareTo));
          }
          if (tmp$ret$3 >= 0) {
            tmp_0 = 1;
          } else {
            tmp_0 = 0;
          }
          var tmp2_plus = tmp_0;
          tmp$ret$4 = quotient.plus_u6jwas_k$(toLong(tmp2_plus));
        }
        return _ULong___init__impl__c78o9k(tmp$ret$4);
      }
      function ulongRemainder(v1, v2) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _ULong___get_data__impl__fggpzb(v1);
        }
        var dividend = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = _ULong___get_data__impl__fggpzb(v2);
        }
        var divisor = tmp$ret$1;
        if (divisor.compareTo_n4fqi2_k$(new Long(0, 0)) < 0) {
          var tmp;
          var tmp$ret$2;
          {
            tmp$ret$2 = ulongCompare(_ULong___get_data__impl__fggpzb(v1), _ULong___get_data__impl__fggpzb(v2));
          }
          if (tmp$ret$2 < 0) {
            tmp = v1;
          } else {
            var tmp$ret$3;
            {
              tmp$ret$3 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(v1).minus_llf5ei_k$(_ULong___get_data__impl__fggpzb(v2)));
            }
            tmp = tmp$ret$3;
          }
          return tmp;
        }
        if (dividend.compareTo_n4fqi2_k$(new Long(0, 0)) >= 0) {
          return _ULong___init__impl__c78o9k(dividend.rem_9rbcjo_k$(divisor));
        }
        var quotient = dividend.ushr_rr8rvr_k$(1).div_9s1fi3_k$(divisor).shl_po5ip6_k$(1);
        var rem = dividend.minus_llf5ei_k$(quotient.times_2zfqpc_k$(divisor));
        var tmp_0;
        var tmp$ret$4;
        {
          var tmp0_compareTo = _ULong___init__impl__c78o9k(rem);
          var tmp1_compareTo = _ULong___init__impl__c78o9k(divisor);
          tmp$ret$4 = ulongCompare(_ULong___get_data__impl__fggpzb(tmp0_compareTo), _ULong___get_data__impl__fggpzb(tmp1_compareTo));
        }
        if (tmp$ret$4 >= 0) {
          tmp_0 = divisor;
        } else {
          tmp_0 = new Long(0, 0);
        }
        return _ULong___init__impl__c78o9k(rem.minus_llf5ei_k$(tmp_0));
      }
      function ulongToDouble(v) {
        return v.ushr_rr8rvr_k$(11).toDouble_ygsx0s_k$() * 2048 + v.and_jhajnj_k$(new Long(2047, 0)).toDouble_ygsx0s_k$();
      }
      function ulongToString(v) {
        return ulongToString_0(v, 10);
      }
      function ulongToString_0(v, base) {
        if (v.compareTo_n4fqi2_k$(new Long(0, 0)) >= 0)
          return toString_2(v, base);
        var tmp$ret$0;
        {
          var tmp0_div = v.ushr_rr8rvr_k$(1);
          tmp$ret$0 = tmp0_div.div_9s1fi3_k$(toLong(base));
        }
        var quotient = tmp$ret$0.shl_po5ip6_k$(1);
        var tmp$ret$1;
        {
          var tmp1_times = quotient;
          tmp$ret$1 = tmp1_times.times_2zfqpc_k$(toLong(base));
        }
        var rem = v.minus_llf5ei_k$(tmp$ret$1);
        if (rem.compareTo_n4fqi2_k$(toLong(base)) >= 0) {
          var tmp$ret$2;
          {
            var tmp2_minus = rem;
            tmp$ret$2 = tmp2_minus.minus_llf5ei_k$(toLong(base));
          }
          rem = tmp$ret$2;
          var tmp$ret$3;
          {
            var tmp3_plus = quotient;
            tmp$ret$3 = tmp3_plus.plus_u6jwas_k$(new Long(1, 0));
          }
          quotient = tmp$ret$3;
        }
        return toString_2(quotient, base) + toString_2(rem, base);
      }
      function doubleToUInt(v) {
        var tmp;
        if (isNaN_0(v)) {
          tmp = _UInt___init__impl__l7qpdl(0);
        } else {
          var tmp$ret$0;
          {
            Companion_getInstance_5();
            var tmp0_toDouble = _UInt___init__impl__l7qpdl(0);
            tmp$ret$0 = uintToDouble(_UInt___get_data__impl__f0vqqw(tmp0_toDouble));
          }
          if (v <= tmp$ret$0) {
            Companion_getInstance_5();
            tmp = _UInt___init__impl__l7qpdl(0);
          } else {
            var tmp$ret$1;
            {
              Companion_getInstance_5();
              var tmp1_toDouble = _UInt___init__impl__l7qpdl(-1);
              tmp$ret$1 = uintToDouble(_UInt___get_data__impl__f0vqqw(tmp1_toDouble));
            }
            if (v >= tmp$ret$1) {
              Companion_getInstance_5();
              tmp = _UInt___init__impl__l7qpdl(-1);
            } else {
              if (v <= IntCompanionObject_getInstance().MAX_VALUE_1) {
                var tmp$ret$2;
                {
                  var tmp2_toUInt = numberToInt(v);
                  tmp$ret$2 = _UInt___init__impl__l7qpdl(tmp2_toUInt);
                }
                tmp = tmp$ret$2;
              } else {
                var tmp$ret$5;
                {
                  var tmp$ret$3;
                  {
                    var tmp3_toUInt = numberToInt(v - IntCompanionObject_getInstance().MAX_VALUE_1);
                    tmp$ret$3 = _UInt___init__impl__l7qpdl(tmp3_toUInt);
                  }
                  var tmp5_plus = tmp$ret$3;
                  var tmp$ret$4;
                  {
                    var tmp4_toUInt = IntCompanionObject_getInstance().MAX_VALUE_1;
                    tmp$ret$4 = _UInt___init__impl__l7qpdl(tmp4_toUInt);
                  }
                  var tmp6_plus = tmp$ret$4;
                  tmp$ret$5 = _UInt___init__impl__l7qpdl(_UInt___get_data__impl__f0vqqw(tmp5_plus) + _UInt___get_data__impl__f0vqqw(tmp6_plus) | 0);
                }
                tmp = tmp$ret$5;
              }
            }
          }
        }
        return tmp;
      }
      function doubleToULong(v) {
        var tmp;
        if (isNaN_0(v)) {
          tmp = _ULong___init__impl__c78o9k(new Long(0, 0));
        } else {
          var tmp$ret$0;
          {
            Companion_getInstance_8();
            var tmp0_toDouble = _ULong___init__impl__c78o9k(new Long(0, 0));
            tmp$ret$0 = ulongToDouble(_ULong___get_data__impl__fggpzb(tmp0_toDouble));
          }
          if (v <= tmp$ret$0) {
            Companion_getInstance_8();
            tmp = _ULong___init__impl__c78o9k(new Long(0, 0));
          } else {
            var tmp$ret$1;
            {
              Companion_getInstance_8();
              var tmp1_toDouble = _ULong___init__impl__c78o9k(new Long(-1, -1));
              tmp$ret$1 = ulongToDouble(_ULong___get_data__impl__fggpzb(tmp1_toDouble));
            }
            if (v >= tmp$ret$1) {
              Companion_getInstance_8();
              tmp = _ULong___init__impl__c78o9k(new Long(-1, -1));
            } else {
              Companion_getInstance_20();
              if (v < new Long(-1, 2147483647).toDouble_ygsx0s_k$()) {
                var tmp$ret$2;
                {
                  var tmp2_toULong = numberToLong(v);
                  tmp$ret$2 = _ULong___init__impl__c78o9k(tmp2_toULong);
                }
                tmp = tmp$ret$2;
              } else {
                var tmp$ret$4;
                {
                  var tmp$ret$3;
                  {
                    var tmp3_toULong = numberToLong(v - 9223372036854776e3);
                    tmp$ret$3 = _ULong___init__impl__c78o9k(tmp3_toULong);
                  }
                  var tmp4_plus = tmp$ret$3;
                  tmp$ret$4 = _ULong___init__impl__c78o9k(_ULong___get_data__impl__fggpzb(tmp4_plus).plus_u6jwas_k$(_ULong___get_data__impl__fggpzb(_ULong___init__impl__c78o9k(new Long(0, -2147483648)))));
                }
                tmp = tmp$ret$4;
              }
            }
          }
        }
        return tmp;
      }
      function ExperimentalUnsignedTypes() {
      }
      ExperimentalUnsignedTypes.prototype.equals = function(other) {
        if (!(other instanceof ExperimentalUnsignedTypes))
          return false;
        var tmp0_other_with_cast = other instanceof ExperimentalUnsignedTypes ? other : THROW_CCE();
        return true;
      };
      ExperimentalUnsignedTypes.prototype.hashCode = function() {
        return 0;
      };
      ExperimentalUnsignedTypes.prototype.toString = function() {
        return "@kotlin.ExperimentalUnsignedTypes()";
      };
      ExperimentalUnsignedTypes.$metadata$ = classMeta("ExperimentalUnsignedTypes", [Annotation]);
      function Annotation() {
      }
      Annotation.$metadata$ = interfaceMeta("Annotation");
      function CharSequence() {
      }
      CharSequence.$metadata$ = interfaceMeta("CharSequence");
      function Comparable() {
      }
      Comparable.$metadata$ = interfaceMeta("Comparable");
      function Iterator_3() {
      }
      Iterator_3.$metadata$ = interfaceMeta("Iterator");
      function MutableIterator() {
      }
      MutableIterator.$metadata$ = interfaceMeta("MutableIterator", [Iterator_3]);
      function MutableListIterator() {
      }
      MutableListIterator.$metadata$ = interfaceMeta("MutableListIterator", [ListIterator, MutableIterator]);
      function ListIterator() {
      }
      ListIterator.$metadata$ = interfaceMeta("ListIterator", [Iterator_3]);
      function Number_0() {
      }
      Number_0.$metadata$ = classMeta("Number");
      function SinceKotlin(version3) {
        this.version_1 = version3;
      }
      SinceKotlin.prototype.get_version_72w4j3_k$ = function() {
        return this.version_1;
      };
      SinceKotlin.prototype.equals = function(other) {
        if (!(other instanceof SinceKotlin))
          return false;
        var tmp0_other_with_cast = other instanceof SinceKotlin ? other : THROW_CCE();
        if (!(this.version_1 === tmp0_other_with_cast.version_1))
          return false;
        return true;
      };
      SinceKotlin.prototype.hashCode = function() {
        return imul(getStringHashCode("version"), 127) ^ getStringHashCode(this.version_1);
      };
      SinceKotlin.prototype.toString = function() {
        return "@kotlin.SinceKotlin(version=" + this.version_1 + ")";
      };
      SinceKotlin.$metadata$ = classMeta("SinceKotlin", [Annotation]);
      var DeprecationLevel_WARNING_instance;
      var DeprecationLevel_ERROR_instance;
      var DeprecationLevel_HIDDEN_instance;
      function values_4() {
        return [DeprecationLevel_WARNING_getInstance(), DeprecationLevel_ERROR_getInstance(), DeprecationLevel_HIDDEN_getInstance()];
      }
      function valueOf_4(value) {
        switch (value) {
          case "WARNING":
            return DeprecationLevel_WARNING_getInstance();
          case "ERROR":
            return DeprecationLevel_ERROR_getInstance();
          case "HIDDEN":
            return DeprecationLevel_HIDDEN_getInstance();
          default:
            DeprecationLevel_initEntries();
            THROW_ISE();
            break;
        }
      }
      var DeprecationLevel_entriesInitialized;
      function DeprecationLevel_initEntries() {
        if (DeprecationLevel_entriesInitialized)
          return Unit_getInstance();
        DeprecationLevel_entriesInitialized = true;
        DeprecationLevel_WARNING_instance = new DeprecationLevel("WARNING", 0);
        DeprecationLevel_ERROR_instance = new DeprecationLevel("ERROR", 1);
        DeprecationLevel_HIDDEN_instance = new DeprecationLevel("HIDDEN", 2);
      }
      function DeprecationLevel(name, ordinal2) {
        Enum.call(this, name, ordinal2);
      }
      DeprecationLevel.$metadata$ = classMeta("DeprecationLevel", void 0, void 0, void 0, void 0, Enum.prototype);
      function Suppress(names) {
        this.names_1 = names;
      }
      Suppress.prototype.get_names_ivn21r_k$ = function() {
        return this.names_1;
      };
      Suppress.prototype.equals = function(other) {
        if (!(other instanceof Suppress))
          return false;
        var tmp0_other_with_cast = other instanceof Suppress ? other : THROW_CCE();
        if (!contentEquals_7(this.names_1, tmp0_other_with_cast.names_1))
          return false;
        return true;
      };
      Suppress.prototype.hashCode = function() {
        return imul(getStringHashCode("names"), 127) ^ hashCode(this.names_1);
      };
      Suppress.prototype.toString = function() {
        return "@kotlin.Suppress(names=" + toString_1(this.names_1) + ")";
      };
      Suppress.$metadata$ = classMeta("Suppress", [Annotation]);
      function PublishedApi() {
      }
      PublishedApi.prototype.equals = function(other) {
        if (!(other instanceof PublishedApi))
          return false;
        var tmp0_other_with_cast = other instanceof PublishedApi ? other : THROW_CCE();
        return true;
      };
      PublishedApi.prototype.hashCode = function() {
        return 0;
      };
      PublishedApi.prototype.toString = function() {
        return "@kotlin.PublishedApi()";
      };
      PublishedApi.$metadata$ = classMeta("PublishedApi", [Annotation]);
      function ParameterName(name) {
        this.name_1 = name;
      }
      ParameterName.prototype.get_name_woqyms_k$ = function() {
        return this.name_1;
      };
      ParameterName.prototype.equals = function(other) {
        if (!(other instanceof ParameterName))
          return false;
        var tmp0_other_with_cast = other instanceof ParameterName ? other : THROW_CCE();
        if (!(this.name_1 === tmp0_other_with_cast.name_1))
          return false;
        return true;
      };
      ParameterName.prototype.hashCode = function() {
        return imul(getStringHashCode("name"), 127) ^ getStringHashCode(this.name_1);
      };
      ParameterName.prototype.toString = function() {
        return "@kotlin.ParameterName(name=" + this.name_1 + ")";
      };
      ParameterName.$metadata$ = classMeta("ParameterName", [Annotation]);
      function Deprecated_init_$Init$(message, replaceWith, level, $mask0, $marker, $this) {
        if (!(($mask0 & 2) === 0))
          replaceWith = new ReplaceWith("", []);
        if (!(($mask0 & 4) === 0))
          level = DeprecationLevel_WARNING_getInstance();
        Deprecated.call($this, message, replaceWith, level);
        return $this;
      }
      function Deprecated_init_$Create$(message, replaceWith, level, $mask0, $marker) {
        return Deprecated_init_$Init$(message, replaceWith, level, $mask0, $marker, Object.create(Deprecated.prototype));
      }
      function Deprecated(message, replaceWith, level) {
        this.message_1 = message;
        this.replaceWith_1 = replaceWith;
        this.level_1 = level;
      }
      Deprecated.prototype.get_message_h23axq_k$ = function() {
        return this.message_1;
      };
      Deprecated.prototype.get_replaceWith_l0ddm9_k$ = function() {
        return this.replaceWith_1;
      };
      Deprecated.prototype.get_level_ium7h7_k$ = function() {
        return this.level_1;
      };
      Deprecated.prototype.equals = function(other) {
        if (!(other instanceof Deprecated))
          return false;
        var tmp0_other_with_cast = other instanceof Deprecated ? other : THROW_CCE();
        if (!(this.message_1 === tmp0_other_with_cast.message_1))
          return false;
        if (!this.replaceWith_1.equals(tmp0_other_with_cast.replaceWith_1))
          return false;
        if (!this.level_1.equals(tmp0_other_with_cast.level_1))
          return false;
        return true;
      };
      Deprecated.prototype.hashCode = function() {
        var result = imul(getStringHashCode("message"), 127) ^ getStringHashCode(this.message_1);
        result = result + (imul(getStringHashCode("replaceWith"), 127) ^ hashCode(this.replaceWith_1)) | 0;
        result = result + (imul(getStringHashCode("level"), 127) ^ this.level_1.hashCode()) | 0;
        return result;
      };
      Deprecated.prototype.toString = function() {
        return "@kotlin.Deprecated(message=" + this.message_1 + ", replaceWith=" + this.replaceWith_1 + ", level=" + this.level_1 + ")";
      };
      Deprecated.$metadata$ = classMeta("Deprecated", [Annotation]);
      function ReplaceWith(expression, imports) {
        this.expression_1 = expression;
        this.imports_1 = imports;
      }
      ReplaceWith.prototype.get_expression_l5w7j5_k$ = function() {
        return this.expression_1;
      };
      ReplaceWith.prototype.get_imports_x49mdh_k$ = function() {
        return this.imports_1;
      };
      ReplaceWith.prototype.equals = function(other) {
        if (!(other instanceof ReplaceWith))
          return false;
        var tmp0_other_with_cast = other instanceof ReplaceWith ? other : THROW_CCE();
        if (!(this.expression_1 === tmp0_other_with_cast.expression_1))
          return false;
        if (!contentEquals_7(this.imports_1, tmp0_other_with_cast.imports_1))
          return false;
        return true;
      };
      ReplaceWith.prototype.hashCode = function() {
        var result = imul(getStringHashCode("expression"), 127) ^ getStringHashCode(this.expression_1);
        result = result + (imul(getStringHashCode("imports"), 127) ^ hashCode(this.imports_1)) | 0;
        return result;
      };
      ReplaceWith.prototype.toString = function() {
        return "@kotlin.ReplaceWith(expression=" + this.expression_1 + ", imports=" + toString_1(this.imports_1) + ")";
      };
      ReplaceWith.$metadata$ = classMeta("ReplaceWith", [Annotation]);
      function DeprecatedSinceKotlin_init_$Init$(warningSince, errorSince, hiddenSince, $mask0, $marker, $this) {
        if (!(($mask0 & 1) === 0))
          warningSince = "";
        if (!(($mask0 & 2) === 0))
          errorSince = "";
        if (!(($mask0 & 4) === 0))
          hiddenSince = "";
        DeprecatedSinceKotlin.call($this, warningSince, errorSince, hiddenSince);
        return $this;
      }
      function DeprecatedSinceKotlin_init_$Create$(warningSince, errorSince, hiddenSince, $mask0, $marker) {
        return DeprecatedSinceKotlin_init_$Init$(warningSince, errorSince, hiddenSince, $mask0, $marker, Object.create(DeprecatedSinceKotlin.prototype));
      }
      function DeprecatedSinceKotlin(warningSince, errorSince, hiddenSince) {
        this.warningSince_1 = warningSince;
        this.errorSince_1 = errorSince;
        this.hiddenSince_1 = hiddenSince;
      }
      DeprecatedSinceKotlin.prototype.get_warningSince_szk795_k$ = function() {
        return this.warningSince_1;
      };
      DeprecatedSinceKotlin.prototype.get_errorSince_6p3nh7_k$ = function() {
        return this.errorSince_1;
      };
      DeprecatedSinceKotlin.prototype.get_hiddenSince_8z3cp_k$ = function() {
        return this.hiddenSince_1;
      };
      DeprecatedSinceKotlin.prototype.equals = function(other) {
        if (!(other instanceof DeprecatedSinceKotlin))
          return false;
        var tmp0_other_with_cast = other instanceof DeprecatedSinceKotlin ? other : THROW_CCE();
        if (!(this.warningSince_1 === tmp0_other_with_cast.warningSince_1))
          return false;
        if (!(this.errorSince_1 === tmp0_other_with_cast.errorSince_1))
          return false;
        if (!(this.hiddenSince_1 === tmp0_other_with_cast.hiddenSince_1))
          return false;
        return true;
      };
      DeprecatedSinceKotlin.prototype.hashCode = function() {
        var result = imul(getStringHashCode("warningSince"), 127) ^ getStringHashCode(this.warningSince_1);
        result = result + (imul(getStringHashCode("errorSince"), 127) ^ getStringHashCode(this.errorSince_1)) | 0;
        result = result + (imul(getStringHashCode("hiddenSince"), 127) ^ getStringHashCode(this.hiddenSince_1)) | 0;
        return result;
      };
      DeprecatedSinceKotlin.prototype.toString = function() {
        return "@kotlin.DeprecatedSinceKotlin(warningSince=" + this.warningSince_1 + ", errorSince=" + this.errorSince_1 + ", hiddenSince=" + this.hiddenSince_1 + ")";
      };
      DeprecatedSinceKotlin.$metadata$ = classMeta("DeprecatedSinceKotlin", [Annotation]);
      function ExtensionFunctionType() {
      }
      ExtensionFunctionType.prototype.equals = function(other) {
        if (!(other instanceof ExtensionFunctionType))
          return false;
        var tmp0_other_with_cast = other instanceof ExtensionFunctionType ? other : THROW_CCE();
        return true;
      };
      ExtensionFunctionType.prototype.hashCode = function() {
        return 0;
      };
      ExtensionFunctionType.prototype.toString = function() {
        return "@kotlin.ExtensionFunctionType()";
      };
      ExtensionFunctionType.$metadata$ = classMeta("ExtensionFunctionType", [Annotation]);
      function UnsafeVariance() {
      }
      UnsafeVariance.prototype.equals = function(other) {
        if (!(other instanceof UnsafeVariance))
          return false;
        var tmp0_other_with_cast = other instanceof UnsafeVariance ? other : THROW_CCE();
        return true;
      };
      UnsafeVariance.prototype.hashCode = function() {
        return 0;
      };
      UnsafeVariance.prototype.toString = function() {
        return "@kotlin.UnsafeVariance()";
      };
      UnsafeVariance.$metadata$ = classMeta("UnsafeVariance", [Annotation]);
      function DeprecationLevel_WARNING_getInstance() {
        DeprecationLevel_initEntries();
        return DeprecationLevel_WARNING_instance;
      }
      function DeprecationLevel_ERROR_getInstance() {
        DeprecationLevel_initEntries();
        return DeprecationLevel_ERROR_instance;
      }
      function DeprecationLevel_HIDDEN_getInstance() {
        DeprecationLevel_initEntries();
        return DeprecationLevel_HIDDEN_instance;
      }
      function IntIterator() {
      }
      IntIterator.prototype.next_20eer_k$ = function() {
        return this.nextInt_ujorgc_k$();
      };
      IntIterator.$metadata$ = classMeta("IntIterator", [Iterator_3]);
      function ByteIterator() {
      }
      ByteIterator.prototype.next_20eer_k$ = function() {
        return this.nextByte_njqopn_k$();
      };
      ByteIterator.$metadata$ = classMeta("ByteIterator", [Iterator_3]);
      function DoubleIterator() {
      }
      DoubleIterator.prototype.next_20eer_k$ = function() {
        return this.nextDouble_s2xvfg_k$();
      };
      DoubleIterator.$metadata$ = classMeta("DoubleIterator", [Iterator_3]);
      function FloatIterator() {
      }
      FloatIterator.prototype.next_20eer_k$ = function() {
        return this.nextFloat_jqti5l_k$();
      };
      FloatIterator.$metadata$ = classMeta("FloatIterator", [Iterator_3]);
      function CharIterator() {
      }
      CharIterator.prototype.next_31h2mk_k$ = function() {
        return this.nextChar_yv3rl6_k$();
      };
      CharIterator.prototype.next_20eer_k$ = function() {
        return new Char_0(this.next_31h2mk_k$());
      };
      CharIterator.$metadata$ = classMeta("CharIterator", [Iterator_3]);
      function LongIterator() {
      }
      LongIterator.prototype.next_20eer_k$ = function() {
        return this.nextLong_njwv0v_k$();
      };
      LongIterator.$metadata$ = classMeta("LongIterator", [Iterator_3]);
      function ShortIterator() {
      }
      ShortIterator.prototype.next_20eer_k$ = function() {
        return this.nextShort_jxwabt_k$();
      };
      ShortIterator.$metadata$ = classMeta("ShortIterator", [Iterator_3]);
      function BooleanIterator() {
      }
      BooleanIterator.prototype.next_20eer_k$ = function() {
        return this.nextBoolean_nfdk1h_k$();
      };
      BooleanIterator.$metadata$ = classMeta("BooleanIterator", [Iterator_3]);
      function _get_finalElement__gc6m3p_1($this) {
        return $this.finalElement_1;
      }
      function _set_hasNext__86v2bs_1($this, _set____db54di) {
        $this.hasNext_1 = _set____db54di;
      }
      function _get_hasNext__xt3cos_1($this) {
        return $this.hasNext_1;
      }
      function _set_next__9r2xms_1($this, _set____db54di) {
        $this.next_1 = _set____db54di;
      }
      function _get_next__daux88_1($this) {
        return $this.next_1;
      }
      function IntProgressionIterator(first, last, step) {
        IntIterator.call(this);
        this.step_1 = step;
        this.finalElement_1 = last;
        this.hasNext_1 = this.step_1 > 0 ? first <= last : first >= last;
        this.next_1 = this.hasNext_1 ? first : this.finalElement_1;
      }
      IntProgressionIterator.prototype.get_step_woujh1_k$ = function() {
        return this.step_1;
      };
      IntProgressionIterator.prototype.hasNext_bitz1p_k$ = function() {
        return this.hasNext_1;
      };
      IntProgressionIterator.prototype.nextInt_ujorgc_k$ = function() {
        var value = this.next_1;
        if (value === this.finalElement_1) {
          if (!this.hasNext_1)
            throw NoSuchElementException_init_$Create$();
          this.hasNext_1 = false;
        } else {
          var tmp0_this = this;
          tmp0_this.next_1 = tmp0_this.next_1 + this.step_1 | 0;
        }
        return value;
      };
      IntProgressionIterator.$metadata$ = classMeta("IntProgressionIterator", void 0, void 0, void 0, void 0, IntIterator.prototype);
      function _get_finalElement__gc6m3p_2($this) {
        return $this.finalElement_1;
      }
      function _set_hasNext__86v2bs_2($this, _set____db54di) {
        $this.hasNext_1 = _set____db54di;
      }
      function _get_hasNext__xt3cos_2($this) {
        return $this.hasNext_1;
      }
      function _set_next__9r2xms_2($this, _set____db54di) {
        $this.next_1 = _set____db54di;
      }
      function _get_next__daux88_2($this) {
        return $this.next_1;
      }
      function CharProgressionIterator(first, last, step) {
        CharIterator.call(this);
        this.step_1 = step;
        var tmp = this;
        var tmp$ret$0;
        {
          tmp$ret$0 = Char__toInt_impl_vasixd(last);
        }
        tmp.finalElement_1 = tmp$ret$0;
        this.hasNext_1 = this.step_1 > 0 ? Char__compareTo_impl_ypi4mb(first, last) <= 0 : Char__compareTo_impl_ypi4mb(first, last) >= 0;
        var tmp_0 = this;
        var tmp_1;
        if (this.hasNext_1) {
          var tmp$ret$1;
          {
            tmp$ret$1 = Char__toInt_impl_vasixd(first);
          }
          tmp_1 = tmp$ret$1;
        } else {
          tmp_1 = this.finalElement_1;
        }
        tmp_0.next_1 = tmp_1;
      }
      CharProgressionIterator.prototype.get_step_woujh1_k$ = function() {
        return this.step_1;
      };
      CharProgressionIterator.prototype.hasNext_bitz1p_k$ = function() {
        return this.hasNext_1;
      };
      CharProgressionIterator.prototype.nextChar_yv3rl6_k$ = function() {
        var value = this.next_1;
        if (value === this.finalElement_1) {
          if (!this.hasNext_1)
            throw NoSuchElementException_init_$Create$();
          this.hasNext_1 = false;
        } else {
          var tmp0_this = this;
          tmp0_this.next_1 = tmp0_this.next_1 + this.step_1 | 0;
        }
        return numberToChar(value);
      };
      CharProgressionIterator.$metadata$ = classMeta("CharProgressionIterator", void 0, void 0, void 0, void 0, CharIterator.prototype);
      function _get_finalElement__gc6m3p_3($this) {
        return $this.finalElement_1;
      }
      function _set_hasNext__86v2bs_3($this, _set____db54di) {
        $this.hasNext_1 = _set____db54di;
      }
      function _get_hasNext__xt3cos_3($this) {
        return $this.hasNext_1;
      }
      function _set_next__9r2xms_3($this, _set____db54di) {
        $this.next_1 = _set____db54di;
      }
      function _get_next__daux88_3($this) {
        return $this.next_1;
      }
      function LongProgressionIterator(first, last, step) {
        LongIterator.call(this);
        this.step_1 = step;
        this.finalElement_1 = last;
        this.hasNext_1 = this.step_1.compareTo_n4fqi2_k$(new Long(0, 0)) > 0 ? first.compareTo_n4fqi2_k$(last) <= 0 : first.compareTo_n4fqi2_k$(last) >= 0;
        this.next_1 = this.hasNext_1 ? first : this.finalElement_1;
      }
      LongProgressionIterator.prototype.get_step_woujh1_k$ = function() {
        return this.step_1;
      };
      LongProgressionIterator.prototype.hasNext_bitz1p_k$ = function() {
        return this.hasNext_1;
      };
      LongProgressionIterator.prototype.nextLong_njwv0v_k$ = function() {
        var value = this.next_1;
        if (value.equals(this.finalElement_1)) {
          if (!this.hasNext_1)
            throw NoSuchElementException_init_$Create$();
          this.hasNext_1 = false;
        } else {
          var tmp0_this = this;
          tmp0_this.next_1 = tmp0_this.next_1.plus_u6jwas_k$(this.step_1);
        }
        return value;
      };
      LongProgressionIterator.$metadata$ = classMeta("LongProgressionIterator", void 0, void 0, void 0, void 0, LongIterator.prototype);
      function Companion_12() {
        Companion_instance_12 = this;
      }
      Companion_12.prototype.fromClosedRange_vhxzyy_k$ = function(rangeStart, rangeEnd, step) {
        return new IntProgression(rangeStart, rangeEnd, step);
      };
      Companion_12.$metadata$ = objectMeta("Companion");
      var Companion_instance_12;
      function Companion_getInstance_12() {
        if (Companion_instance_12 == null)
          new Companion_12();
        return Companion_instance_12;
      }
      function IntProgression(start2, endInclusive, step) {
        Companion_getInstance_12();
        if (step === 0)
          throw IllegalArgumentException_init_$Create$_0("Step must be non-zero.");
        if (step === IntCompanionObject_getInstance().MIN_VALUE_1)
          throw IllegalArgumentException_init_$Create$_0("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");
        this.first_1 = start2;
        this.last_1 = getProgressionLastElement_1(start2, endInclusive, step);
        this.step_1 = step;
      }
      IntProgression.prototype.get_first_irdx8n_k$ = function() {
        return this.first_1;
      };
      IntProgression.prototype.get_last_wopotb_k$ = function() {
        return this.last_1;
      };
      IntProgression.prototype.get_step_woujh1_k$ = function() {
        return this.step_1;
      };
      IntProgression.prototype.iterator_jk1svi_k$ = function() {
        return new IntProgressionIterator(this.first_1, this.last_1, this.step_1);
      };
      IntProgression.prototype.isEmpty_y1axqb_k$ = function() {
        return this.step_1 > 0 ? this.first_1 > this.last_1 : this.first_1 < this.last_1;
      };
      IntProgression.prototype.equals = function(other) {
        var tmp;
        if (other instanceof IntProgression) {
          tmp = (this.isEmpty_y1axqb_k$() ? other.isEmpty_y1axqb_k$() : false) ? true : (this.first_1 === other.first_1 ? this.last_1 === other.last_1 : false) ? this.step_1 === other.step_1 : false;
        } else {
          tmp = false;
        }
        return tmp;
      };
      IntProgression.prototype.hashCode = function() {
        return this.isEmpty_y1axqb_k$() ? -1 : imul(31, imul(31, this.first_1) + this.last_1 | 0) + this.step_1 | 0;
      };
      IntProgression.prototype.toString = function() {
        return this.step_1 > 0 ? "" + this.first_1 + ".." + this.last_1 + " step " + this.step_1 : "" + this.first_1 + " downTo " + this.last_1 + " step " + (-this.step_1 | 0);
      };
      IntProgression.$metadata$ = classMeta("IntProgression", [Iterable]);
      function Companion_13() {
        Companion_instance_13 = this;
      }
      Companion_13.prototype.fromClosedRange_kxji4u_k$ = function(rangeStart, rangeEnd, step) {
        return new CharProgression(rangeStart, rangeEnd, step);
      };
      Companion_13.$metadata$ = objectMeta("Companion");
      var Companion_instance_13;
      function Companion_getInstance_13() {
        if (Companion_instance_13 == null)
          new Companion_13();
        return Companion_instance_13;
      }
      function CharProgression(start2, endInclusive, step) {
        Companion_getInstance_13();
        if (step === 0)
          throw IllegalArgumentException_init_$Create$_0("Step must be non-zero.");
        if (step === IntCompanionObject_getInstance().MIN_VALUE_1)
          throw IllegalArgumentException_init_$Create$_0("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");
        this.first_1 = start2;
        var tmp = this;
        var tmp$ret$0;
        {
          tmp$ret$0 = Char__toInt_impl_vasixd(start2);
        }
        var tmp_0 = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = Char__toInt_impl_vasixd(endInclusive);
        }
        tmp.last_1 = numberToChar(getProgressionLastElement_1(tmp_0, tmp$ret$1, step));
        this.step_1 = step;
      }
      CharProgression.prototype.get_first_en5qmg_k$ = function() {
        return this.first_1;
      };
      CharProgression.prototype.get_last_rp1s9s_k$ = function() {
        return this.last_1;
      };
      CharProgression.prototype.get_step_woujh1_k$ = function() {
        return this.step_1;
      };
      CharProgression.prototype.iterator_jk1svi_k$ = function() {
        return new CharProgressionIterator(this.first_1, this.last_1, this.step_1);
      };
      CharProgression.prototype.isEmpty_y1axqb_k$ = function() {
        return this.step_1 > 0 ? Char__compareTo_impl_ypi4mb(this.first_1, this.last_1) > 0 : Char__compareTo_impl_ypi4mb(this.first_1, this.last_1) < 0;
      };
      CharProgression.prototype.equals = function(other) {
        var tmp;
        if (other instanceof CharProgression) {
          tmp = (this.isEmpty_y1axqb_k$() ? other.isEmpty_y1axqb_k$() : false) ? true : (equals(new Char_0(this.first_1), new Char_0(other.first_1)) ? equals(new Char_0(this.last_1), new Char_0(other.last_1)) : false) ? this.step_1 === other.step_1 : false;
        } else {
          tmp = false;
        }
        return tmp;
      };
      CharProgression.prototype.hashCode = function() {
        var tmp;
        if (this.isEmpty_y1axqb_k$()) {
          tmp = -1;
        } else {
          var tmp$ret$0;
          {
            var tmp0__get_code__88qj9g = this.first_1;
            tmp$ret$0 = Char__toInt_impl_vasixd(tmp0__get_code__88qj9g);
          }
          var tmp_0 = imul(31, tmp$ret$0);
          var tmp$ret$1;
          {
            var tmp1__get_code__adl84j = this.last_1;
            tmp$ret$1 = Char__toInt_impl_vasixd(tmp1__get_code__adl84j);
          }
          tmp = imul(31, tmp_0 + tmp$ret$1 | 0) + this.step_1 | 0;
        }
        return tmp;
      };
      CharProgression.prototype.toString = function() {
        return this.step_1 > 0 ? "" + new Char_0(this.first_1) + ".." + new Char_0(this.last_1) + " step " + this.step_1 : "" + new Char_0(this.first_1) + " downTo " + new Char_0(this.last_1) + " step " + (-this.step_1 | 0);
      };
      CharProgression.$metadata$ = classMeta("CharProgression", [Iterable]);
      function Companion_14() {
        Companion_instance_14 = this;
      }
      Companion_14.prototype.fromClosedRange_5n0x23_k$ = function(rangeStart, rangeEnd, step) {
        return new LongProgression(rangeStart, rangeEnd, step);
      };
      Companion_14.$metadata$ = objectMeta("Companion");
      var Companion_instance_14;
      function Companion_getInstance_14() {
        if (Companion_instance_14 == null)
          new Companion_14();
        return Companion_instance_14;
      }
      function LongProgression(start2, endInclusive, step) {
        Companion_getInstance_14();
        if (step.equals(new Long(0, 0)))
          throw IllegalArgumentException_init_$Create$_0("Step must be non-zero.");
        Companion_getInstance_20();
        if (step.equals(new Long(0, -2147483648)))
          throw IllegalArgumentException_init_$Create$_0("Step must be greater than Long.MIN_VALUE to avoid overflow on negation.");
        this.first_1 = start2;
        this.last_1 = getProgressionLastElement_2(start2, endInclusive, step);
        this.step_1 = step;
      }
      LongProgression.prototype.get_first_irdx8n_k$ = function() {
        return this.first_1;
      };
      LongProgression.prototype.get_last_wopotb_k$ = function() {
        return this.last_1;
      };
      LongProgression.prototype.get_step_woujh1_k$ = function() {
        return this.step_1;
      };
      LongProgression.prototype.iterator_jk1svi_k$ = function() {
        return new LongProgressionIterator(this.first_1, this.last_1, this.step_1);
      };
      LongProgression.prototype.isEmpty_y1axqb_k$ = function() {
        return this.step_1.compareTo_n4fqi2_k$(new Long(0, 0)) > 0 ? this.first_1.compareTo_n4fqi2_k$(this.last_1) > 0 : this.first_1.compareTo_n4fqi2_k$(this.last_1) < 0;
      };
      LongProgression.prototype.equals = function(other) {
        var tmp;
        if (other instanceof LongProgression) {
          tmp = (this.isEmpty_y1axqb_k$() ? other.isEmpty_y1axqb_k$() : false) ? true : (this.first_1.equals(other.first_1) ? this.last_1.equals(other.last_1) : false) ? this.step_1.equals(other.step_1) : false;
        } else {
          tmp = false;
        }
        return tmp;
      };
      LongProgression.prototype.hashCode = function() {
        return this.isEmpty_y1axqb_k$() ? -1 : numberToLong(31).times_2zfqpc_k$(numberToLong(31).times_2zfqpc_k$(this.first_1.xor_jjua9n_k$(this.first_1.ushr_rr8rvr_k$(32))).plus_u6jwas_k$(this.last_1.xor_jjua9n_k$(this.last_1.ushr_rr8rvr_k$(32)))).plus_u6jwas_k$(this.step_1.xor_jjua9n_k$(this.step_1.ushr_rr8rvr_k$(32))).toInt_1tsl84_k$();
      };
      LongProgression.prototype.toString = function() {
        return this.step_1.compareTo_n4fqi2_k$(new Long(0, 0)) > 0 ? toString_1(this.first_1) + ".." + toString_1(this.last_1) + " step " + toString_1(this.step_1) : toString_1(this.first_1) + " downTo " + toString_1(this.last_1) + " step " + toString_1(this.step_1.unaryMinus_6uz0qp_k$());
      };
      LongProgression.$metadata$ = classMeta("LongProgression", [Iterable]);
      function ClosedRange() {
      }
      ClosedRange.$metadata$ = interfaceMeta("ClosedRange");
      function Companion_15() {
        Companion_instance_15 = this;
        this.EMPTY_1 = new IntRange(1, 0);
      }
      Companion_15.prototype.get_EMPTY_i8q41w_k$ = function() {
        return this.EMPTY_1;
      };
      Companion_15.$metadata$ = objectMeta("Companion");
      var Companion_instance_15;
      function Companion_getInstance_15() {
        if (Companion_instance_15 == null)
          new Companion_15();
        return Companion_instance_15;
      }
      function IntRange(start2, endInclusive) {
        Companion_getInstance_15();
        IntProgression.call(this, start2, endInclusive, 1);
      }
      IntRange.prototype.get_start_iypx6h_k$ = function() {
        return this.get_first_irdx8n_k$();
      };
      IntRange.prototype.get_endInclusive_r07xpi_k$ = function() {
        return this.get_last_wopotb_k$();
      };
      IntRange.prototype.contains_1pg60y_k$ = function(value) {
        return this.get_first_irdx8n_k$() <= value ? value <= this.get_last_wopotb_k$() : false;
      };
      IntRange.prototype.contains_2ehdtg_k$ = function(value) {
        return this.contains_1pg60y_k$(typeof value === "number" ? value : THROW_CCE());
      };
      IntRange.prototype.isEmpty_y1axqb_k$ = function() {
        return this.get_first_irdx8n_k$() > this.get_last_wopotb_k$();
      };
      IntRange.prototype.equals = function(other) {
        var tmp;
        if (other instanceof IntRange) {
          tmp = (this.isEmpty_y1axqb_k$() ? other.isEmpty_y1axqb_k$() : false) ? true : this.get_first_irdx8n_k$() === other.get_first_irdx8n_k$() ? this.get_last_wopotb_k$() === other.get_last_wopotb_k$() : false;
        } else {
          tmp = false;
        }
        return tmp;
      };
      IntRange.prototype.hashCode = function() {
        return this.isEmpty_y1axqb_k$() ? -1 : imul(31, this.get_first_irdx8n_k$()) + this.get_last_wopotb_k$() | 0;
      };
      IntRange.prototype.toString = function() {
        return "" + this.get_first_irdx8n_k$() + ".." + this.get_last_wopotb_k$();
      };
      IntRange.$metadata$ = classMeta("IntRange", [ClosedRange], void 0, void 0, void 0, IntProgression.prototype);
      function Companion_16() {
        Companion_instance_16 = this;
        this.EMPTY_1 = new CharRange(_Char___init__impl__6a9atx(1), _Char___init__impl__6a9atx(0));
      }
      Companion_16.prototype.get_EMPTY_i8q41w_k$ = function() {
        return this.EMPTY_1;
      };
      Companion_16.$metadata$ = objectMeta("Companion");
      var Companion_instance_16;
      function Companion_getInstance_16() {
        if (Companion_instance_16 == null)
          new Companion_16();
        return Companion_instance_16;
      }
      function CharRange(start2, endInclusive) {
        Companion_getInstance_16();
        CharProgression.call(this, start2, endInclusive, 1);
      }
      CharRange.prototype.get_start_qj1pkq_k$ = function() {
        return this.get_first_en5qmg_k$();
      };
      CharRange.prototype.get_start_iypx6h_k$ = function() {
        return new Char_0(this.get_start_qj1pkq_k$());
      };
      CharRange.prototype.get_endInclusive_oogq1x_k$ = function() {
        return this.get_last_rp1s9s_k$();
      };
      CharRange.prototype.get_endInclusive_r07xpi_k$ = function() {
        return new Char_0(this.get_endInclusive_oogq1x_k$());
      };
      CharRange.prototype.contains_i4atwd_k$ = function(value) {
        return Char__compareTo_impl_ypi4mb(this.get_first_en5qmg_k$(), value) <= 0 ? Char__compareTo_impl_ypi4mb(value, this.get_last_rp1s9s_k$()) <= 0 : false;
      };
      CharRange.prototype.contains_2ehdtg_k$ = function(value) {
        return this.contains_i4atwd_k$(value instanceof Char_0 ? value.value_1 : THROW_CCE());
      };
      CharRange.prototype.isEmpty_y1axqb_k$ = function() {
        return Char__compareTo_impl_ypi4mb(this.get_first_en5qmg_k$(), this.get_last_rp1s9s_k$()) > 0;
      };
      CharRange.prototype.equals = function(other) {
        var tmp;
        if (other instanceof CharRange) {
          tmp = (this.isEmpty_y1axqb_k$() ? other.isEmpty_y1axqb_k$() : false) ? true : equals(new Char_0(this.get_first_en5qmg_k$()), new Char_0(other.get_first_en5qmg_k$())) ? equals(new Char_0(this.get_last_rp1s9s_k$()), new Char_0(other.get_last_rp1s9s_k$())) : false;
        } else {
          tmp = false;
        }
        return tmp;
      };
      CharRange.prototype.hashCode = function() {
        var tmp;
        if (this.isEmpty_y1axqb_k$()) {
          tmp = -1;
        } else {
          var tmp$ret$0;
          {
            var tmp0__get_code__88qj9g = this.get_first_en5qmg_k$();
            tmp$ret$0 = Char__toInt_impl_vasixd(tmp0__get_code__88qj9g);
          }
          var tmp_0 = imul(31, tmp$ret$0);
          var tmp$ret$1;
          {
            var tmp1__get_code__adl84j = this.get_last_rp1s9s_k$();
            tmp$ret$1 = Char__toInt_impl_vasixd(tmp1__get_code__adl84j);
          }
          tmp = tmp_0 + tmp$ret$1 | 0;
        }
        return tmp;
      };
      CharRange.prototype.toString = function() {
        return "" + new Char_0(this.get_first_en5qmg_k$()) + ".." + new Char_0(this.get_last_rp1s9s_k$());
      };
      CharRange.$metadata$ = classMeta("CharRange", [ClosedRange], void 0, void 0, void 0, CharProgression.prototype);
      function Companion_17() {
        Companion_instance_17 = this;
        this.EMPTY_1 = new LongRange(new Long(1, 0), new Long(0, 0));
      }
      Companion_17.prototype.get_EMPTY_i8q41w_k$ = function() {
        return this.EMPTY_1;
      };
      Companion_17.$metadata$ = objectMeta("Companion");
      var Companion_instance_17;
      function Companion_getInstance_17() {
        if (Companion_instance_17 == null)
          new Companion_17();
        return Companion_instance_17;
      }
      function LongRange(start2, endInclusive) {
        Companion_getInstance_17();
        LongProgression.call(this, start2, endInclusive, new Long(1, 0));
      }
      LongRange.prototype.get_start_iypx6h_k$ = function() {
        return this.get_first_irdx8n_k$();
      };
      LongRange.prototype.get_endInclusive_r07xpi_k$ = function() {
        return this.get_last_wopotb_k$();
      };
      LongRange.prototype.contains_i44xiv_k$ = function(value) {
        return this.get_first_irdx8n_k$().compareTo_n4fqi2_k$(value) <= 0 ? value.compareTo_n4fqi2_k$(this.get_last_wopotb_k$()) <= 0 : false;
      };
      LongRange.prototype.contains_2ehdtg_k$ = function(value) {
        return this.contains_i44xiv_k$(value instanceof Long ? value : THROW_CCE());
      };
      LongRange.prototype.isEmpty_y1axqb_k$ = function() {
        return this.get_first_irdx8n_k$().compareTo_n4fqi2_k$(this.get_last_wopotb_k$()) > 0;
      };
      LongRange.prototype.equals = function(other) {
        var tmp;
        if (other instanceof LongRange) {
          tmp = (this.isEmpty_y1axqb_k$() ? other.isEmpty_y1axqb_k$() : false) ? true : this.get_first_irdx8n_k$().equals(other.get_first_irdx8n_k$()) ? this.get_last_wopotb_k$().equals(other.get_last_wopotb_k$()) : false;
        } else {
          tmp = false;
        }
        return tmp;
      };
      LongRange.prototype.hashCode = function() {
        return this.isEmpty_y1axqb_k$() ? -1 : numberToLong(31).times_2zfqpc_k$(this.get_first_irdx8n_k$().xor_jjua9n_k$(this.get_first_irdx8n_k$().ushr_rr8rvr_k$(32))).plus_u6jwas_k$(this.get_last_wopotb_k$().xor_jjua9n_k$(this.get_last_wopotb_k$().ushr_rr8rvr_k$(32))).toInt_1tsl84_k$();
      };
      LongRange.prototype.toString = function() {
        return toString_1(this.get_first_irdx8n_k$()) + ".." + toString_1(this.get_last_wopotb_k$());
      };
      LongRange.$metadata$ = classMeta("LongRange", [ClosedRange], void 0, void 0, void 0, LongProgression.prototype);
      function Unit() {
        Unit_instance = this;
      }
      Unit.prototype.toString = function() {
        return "kotlin.Unit";
      };
      Unit.$metadata$ = objectMeta("Unit");
      var Unit_instance;
      function Unit_getInstance() {
        if (Unit_instance == null)
          new Unit();
        return Unit_instance;
      }
      function Target(allowedTargets) {
        this.allowedTargets_1 = allowedTargets;
      }
      Target.prototype.get_allowedTargets_9sf77n_k$ = function() {
        return this.allowedTargets_1;
      };
      Target.prototype.equals = function(other) {
        if (!(other instanceof Target))
          return false;
        var tmp0_other_with_cast = other instanceof Target ? other : THROW_CCE();
        if (!contentEquals_7(this.allowedTargets_1, tmp0_other_with_cast.allowedTargets_1))
          return false;
        return true;
      };
      Target.prototype.hashCode = function() {
        return imul(getStringHashCode("allowedTargets"), 127) ^ hashCode(this.allowedTargets_1);
      };
      Target.prototype.toString = function() {
        return "@kotlin.annotation.Target(allowedTargets=" + toString_1(this.allowedTargets_1) + ")";
      };
      Target.$metadata$ = classMeta("Target", [Annotation]);
      var AnnotationTarget_CLASS_instance;
      var AnnotationTarget_ANNOTATION_CLASS_instance;
      var AnnotationTarget_TYPE_PARAMETER_instance;
      var AnnotationTarget_PROPERTY_instance;
      var AnnotationTarget_FIELD_instance;
      var AnnotationTarget_LOCAL_VARIABLE_instance;
      var AnnotationTarget_VALUE_PARAMETER_instance;
      var AnnotationTarget_CONSTRUCTOR_instance;
      var AnnotationTarget_FUNCTION_instance;
      var AnnotationTarget_PROPERTY_GETTER_instance;
      var AnnotationTarget_PROPERTY_SETTER_instance;
      var AnnotationTarget_TYPE_instance;
      var AnnotationTarget_EXPRESSION_instance;
      var AnnotationTarget_FILE_instance;
      var AnnotationTarget_TYPEALIAS_instance;
      function values_5() {
        return [AnnotationTarget_CLASS_getInstance(), AnnotationTarget_ANNOTATION_CLASS_getInstance(), AnnotationTarget_TYPE_PARAMETER_getInstance(), AnnotationTarget_PROPERTY_getInstance(), AnnotationTarget_FIELD_getInstance(), AnnotationTarget_LOCAL_VARIABLE_getInstance(), AnnotationTarget_VALUE_PARAMETER_getInstance(), AnnotationTarget_CONSTRUCTOR_getInstance(), AnnotationTarget_FUNCTION_getInstance(), AnnotationTarget_PROPERTY_GETTER_getInstance(), AnnotationTarget_PROPERTY_SETTER_getInstance(), AnnotationTarget_TYPE_getInstance(), AnnotationTarget_EXPRESSION_getInstance(), AnnotationTarget_FILE_getInstance(), AnnotationTarget_TYPEALIAS_getInstance()];
      }
      function valueOf_5(value) {
        switch (value) {
          case "CLASS":
            return AnnotationTarget_CLASS_getInstance();
          case "ANNOTATION_CLASS":
            return AnnotationTarget_ANNOTATION_CLASS_getInstance();
          case "TYPE_PARAMETER":
            return AnnotationTarget_TYPE_PARAMETER_getInstance();
          case "PROPERTY":
            return AnnotationTarget_PROPERTY_getInstance();
          case "FIELD":
            return AnnotationTarget_FIELD_getInstance();
          case "LOCAL_VARIABLE":
            return AnnotationTarget_LOCAL_VARIABLE_getInstance();
          case "VALUE_PARAMETER":
            return AnnotationTarget_VALUE_PARAMETER_getInstance();
          case "CONSTRUCTOR":
            return AnnotationTarget_CONSTRUCTOR_getInstance();
          case "FUNCTION":
            return AnnotationTarget_FUNCTION_getInstance();
          case "PROPERTY_GETTER":
            return AnnotationTarget_PROPERTY_GETTER_getInstance();
          case "PROPERTY_SETTER":
            return AnnotationTarget_PROPERTY_SETTER_getInstance();
          case "TYPE":
            return AnnotationTarget_TYPE_getInstance();
          case "EXPRESSION":
            return AnnotationTarget_EXPRESSION_getInstance();
          case "FILE":
            return AnnotationTarget_FILE_getInstance();
          case "TYPEALIAS":
            return AnnotationTarget_TYPEALIAS_getInstance();
          default:
            AnnotationTarget_initEntries();
            THROW_ISE();
            break;
        }
      }
      var AnnotationTarget_entriesInitialized;
      function AnnotationTarget_initEntries() {
        if (AnnotationTarget_entriesInitialized)
          return Unit_getInstance();
        AnnotationTarget_entriesInitialized = true;
        AnnotationTarget_CLASS_instance = new AnnotationTarget("CLASS", 0);
        AnnotationTarget_ANNOTATION_CLASS_instance = new AnnotationTarget("ANNOTATION_CLASS", 1);
        AnnotationTarget_TYPE_PARAMETER_instance = new AnnotationTarget("TYPE_PARAMETER", 2);
        AnnotationTarget_PROPERTY_instance = new AnnotationTarget("PROPERTY", 3);
        AnnotationTarget_FIELD_instance = new AnnotationTarget("FIELD", 4);
        AnnotationTarget_LOCAL_VARIABLE_instance = new AnnotationTarget("LOCAL_VARIABLE", 5);
        AnnotationTarget_VALUE_PARAMETER_instance = new AnnotationTarget("VALUE_PARAMETER", 6);
        AnnotationTarget_CONSTRUCTOR_instance = new AnnotationTarget("CONSTRUCTOR", 7);
        AnnotationTarget_FUNCTION_instance = new AnnotationTarget("FUNCTION", 8);
        AnnotationTarget_PROPERTY_GETTER_instance = new AnnotationTarget("PROPERTY_GETTER", 9);
        AnnotationTarget_PROPERTY_SETTER_instance = new AnnotationTarget("PROPERTY_SETTER", 10);
        AnnotationTarget_TYPE_instance = new AnnotationTarget("TYPE", 11);
        AnnotationTarget_EXPRESSION_instance = new AnnotationTarget("EXPRESSION", 12);
        AnnotationTarget_FILE_instance = new AnnotationTarget("FILE", 13);
        AnnotationTarget_TYPEALIAS_instance = new AnnotationTarget("TYPEALIAS", 14);
      }
      function AnnotationTarget(name, ordinal2) {
        Enum.call(this, name, ordinal2);
      }
      AnnotationTarget.$metadata$ = classMeta("AnnotationTarget", void 0, void 0, void 0, void 0, Enum.prototype);
      function MustBeDocumented() {
      }
      MustBeDocumented.prototype.equals = function(other) {
        if (!(other instanceof MustBeDocumented))
          return false;
        var tmp0_other_with_cast = other instanceof MustBeDocumented ? other : THROW_CCE();
        return true;
      };
      MustBeDocumented.prototype.hashCode = function() {
        return 0;
      };
      MustBeDocumented.prototype.toString = function() {
        return "@kotlin.annotation.MustBeDocumented()";
      };
      MustBeDocumented.$metadata$ = classMeta("MustBeDocumented", [Annotation]);
      function Retention_init_$Init$(value, $mask0, $marker, $this) {
        if (!(($mask0 & 1) === 0))
          value = AnnotationRetention_RUNTIME_getInstance();
        Retention.call($this, value);
        return $this;
      }
      function Retention_init_$Create$(value, $mask0, $marker) {
        return Retention_init_$Init$(value, $mask0, $marker, Object.create(Retention.prototype));
      }
      function Retention(value) {
        this.value_1 = value;
      }
      Retention.prototype.get_value_j01efc_k$ = function() {
        return this.value_1;
      };
      Retention.prototype.equals = function(other) {
        if (!(other instanceof Retention))
          return false;
        var tmp0_other_with_cast = other instanceof Retention ? other : THROW_CCE();
        if (!this.value_1.equals(tmp0_other_with_cast.value_1))
          return false;
        return true;
      };
      Retention.prototype.hashCode = function() {
        return imul(getStringHashCode("value"), 127) ^ this.value_1.hashCode();
      };
      Retention.prototype.toString = function() {
        return "@kotlin.annotation.Retention(value=" + this.value_1 + ")";
      };
      Retention.$metadata$ = classMeta("Retention", [Annotation]);
      var AnnotationRetention_SOURCE_instance;
      var AnnotationRetention_BINARY_instance;
      var AnnotationRetention_RUNTIME_instance;
      function values_6() {
        return [AnnotationRetention_SOURCE_getInstance(), AnnotationRetention_BINARY_getInstance(), AnnotationRetention_RUNTIME_getInstance()];
      }
      function valueOf_6(value) {
        switch (value) {
          case "SOURCE":
            return AnnotationRetention_SOURCE_getInstance();
          case "BINARY":
            return AnnotationRetention_BINARY_getInstance();
          case "RUNTIME":
            return AnnotationRetention_RUNTIME_getInstance();
          default:
            AnnotationRetention_initEntries();
            THROW_ISE();
            break;
        }
      }
      var AnnotationRetention_entriesInitialized;
      function AnnotationRetention_initEntries() {
        if (AnnotationRetention_entriesInitialized)
          return Unit_getInstance();
        AnnotationRetention_entriesInitialized = true;
        AnnotationRetention_SOURCE_instance = new AnnotationRetention("SOURCE", 0);
        AnnotationRetention_BINARY_instance = new AnnotationRetention("BINARY", 1);
        AnnotationRetention_RUNTIME_instance = new AnnotationRetention("RUNTIME", 2);
      }
      function AnnotationRetention(name, ordinal2) {
        Enum.call(this, name, ordinal2);
      }
      AnnotationRetention.$metadata$ = classMeta("AnnotationRetention", void 0, void 0, void 0, void 0, Enum.prototype);
      function Repeatable() {
      }
      Repeatable.prototype.equals = function(other) {
        if (!(other instanceof Repeatable))
          return false;
        var tmp0_other_with_cast = other instanceof Repeatable ? other : THROW_CCE();
        return true;
      };
      Repeatable.prototype.hashCode = function() {
        return 0;
      };
      Repeatable.prototype.toString = function() {
        return "@kotlin.annotation.Repeatable()";
      };
      Repeatable.$metadata$ = classMeta("Repeatable", [Annotation]);
      function AnnotationTarget_CLASS_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_CLASS_instance;
      }
      function AnnotationTarget_ANNOTATION_CLASS_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_ANNOTATION_CLASS_instance;
      }
      function AnnotationTarget_TYPE_PARAMETER_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_TYPE_PARAMETER_instance;
      }
      function AnnotationTarget_PROPERTY_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_PROPERTY_instance;
      }
      function AnnotationTarget_FIELD_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_FIELD_instance;
      }
      function AnnotationTarget_LOCAL_VARIABLE_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_LOCAL_VARIABLE_instance;
      }
      function AnnotationTarget_VALUE_PARAMETER_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_VALUE_PARAMETER_instance;
      }
      function AnnotationTarget_CONSTRUCTOR_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_CONSTRUCTOR_instance;
      }
      function AnnotationTarget_FUNCTION_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_FUNCTION_instance;
      }
      function AnnotationTarget_PROPERTY_GETTER_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_PROPERTY_GETTER_instance;
      }
      function AnnotationTarget_PROPERTY_SETTER_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_PROPERTY_SETTER_instance;
      }
      function AnnotationTarget_TYPE_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_TYPE_instance;
      }
      function AnnotationTarget_EXPRESSION_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_EXPRESSION_instance;
      }
      function AnnotationTarget_FILE_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_FILE_instance;
      }
      function AnnotationTarget_TYPEALIAS_getInstance() {
        AnnotationTarget_initEntries();
        return AnnotationTarget_TYPEALIAS_instance;
      }
      function AnnotationRetention_SOURCE_getInstance() {
        AnnotationRetention_initEntries();
        return AnnotationRetention_SOURCE_instance;
      }
      function AnnotationRetention_BINARY_getInstance() {
        AnnotationRetention_initEntries();
        return AnnotationRetention_BINARY_instance;
      }
      function AnnotationRetention_RUNTIME_getInstance() {
        AnnotationRetention_initEntries();
        return AnnotationRetention_RUNTIME_instance;
      }
      function getProgressionLastElement_1(start2, end, step) {
        var tmp;
        if (step > 0) {
          tmp = start2 >= end ? end : end - differenceModulo_1(end, start2, step) | 0;
        } else if (step < 0) {
          tmp = start2 <= end ? end : end + differenceModulo_1(start2, end, -step | 0) | 0;
        } else {
          throw IllegalArgumentException_init_$Create$_0("Step is zero.");
        }
        return tmp;
      }
      function getProgressionLastElement_2(start2, end, step) {
        var tmp;
        if (step.compareTo_n4fqi2_k$(new Long(0, 0)) > 0) {
          tmp = start2.compareTo_n4fqi2_k$(end) >= 0 ? end : end.minus_llf5ei_k$(differenceModulo_2(end, start2, step));
        } else if (step.compareTo_n4fqi2_k$(new Long(0, 0)) < 0) {
          tmp = start2.compareTo_n4fqi2_k$(end) <= 0 ? end : end.plus_u6jwas_k$(differenceModulo_2(start2, end, step.unaryMinus_6uz0qp_k$()));
        } else {
          throw IllegalArgumentException_init_$Create$_0("Step is zero.");
        }
        return tmp;
      }
      function differenceModulo_1(a3, b, c5) {
        return mod(mod(a3, c5) - mod(b, c5) | 0, c5);
      }
      function differenceModulo_2(a3, b, c5) {
        return mod_0(mod_0(a3, c5).minus_llf5ei_k$(mod_0(b, c5)), c5);
      }
      function mod(a3, b) {
        var mod2 = a3 % b | 0;
        return mod2 >= 0 ? mod2 : mod2 + b | 0;
      }
      function mod_0(a3, b) {
        var mod2 = a3.rem_9rbcjo_k$(b);
        return mod2.compareTo_n4fqi2_k$(new Long(0, 0)) >= 0 ? mod2 : mod2.plus_u6jwas_k$(b);
      }
      function ByteCompanionObject() {
        ByteCompanionObject_instance = this;
        this.MIN_VALUE_1 = -128;
        this.MAX_VALUE_1 = 127;
        this.SIZE_BYTES_1 = 1;
        this.SIZE_BITS_1 = 8;
      }
      ByteCompanionObject.prototype.get_MIN_VALUE_7nmmor_k$ = function() {
        return this.MIN_VALUE_1;
      };
      ByteCompanionObject.prototype.get_MAX_VALUE_54a9lf_k$ = function() {
        return this.MAX_VALUE_1;
      };
      ByteCompanionObject.prototype.get_SIZE_BYTES_qphg4q_k$ = function() {
        return this.SIZE_BYTES_1;
      };
      ByteCompanionObject.prototype.get_SIZE_BITS_7qhjj9_k$ = function() {
        return this.SIZE_BITS_1;
      };
      ByteCompanionObject.$metadata$ = objectMeta("ByteCompanionObject");
      Object.defineProperty(ByteCompanionObject.prototype, "MIN_VALUE", {
        configurable: true,
        get: ByteCompanionObject.prototype.get_MIN_VALUE_7nmmor_k$
      });
      Object.defineProperty(ByteCompanionObject.prototype, "MAX_VALUE", {
        configurable: true,
        get: ByteCompanionObject.prototype.get_MAX_VALUE_54a9lf_k$
      });
      Object.defineProperty(ByteCompanionObject.prototype, "SIZE_BYTES", {
        configurable: true,
        get: ByteCompanionObject.prototype.get_SIZE_BYTES_qphg4q_k$
      });
      Object.defineProperty(ByteCompanionObject.prototype, "SIZE_BITS", {
        configurable: true,
        get: ByteCompanionObject.prototype.get_SIZE_BITS_7qhjj9_k$
      });
      var ByteCompanionObject_instance;
      function ByteCompanionObject_getInstance() {
        if (ByteCompanionObject_instance == null)
          new ByteCompanionObject();
        return ByteCompanionObject_instance;
      }
      function ShortCompanionObject() {
        ShortCompanionObject_instance = this;
        this.MIN_VALUE_1 = -32768;
        this.MAX_VALUE_1 = 32767;
        this.SIZE_BYTES_1 = 2;
        this.SIZE_BITS_1 = 16;
      }
      ShortCompanionObject.prototype.get_MIN_VALUE_7nmmor_k$ = function() {
        return this.MIN_VALUE_1;
      };
      ShortCompanionObject.prototype.get_MAX_VALUE_54a9lf_k$ = function() {
        return this.MAX_VALUE_1;
      };
      ShortCompanionObject.prototype.get_SIZE_BYTES_qphg4q_k$ = function() {
        return this.SIZE_BYTES_1;
      };
      ShortCompanionObject.prototype.get_SIZE_BITS_7qhjj9_k$ = function() {
        return this.SIZE_BITS_1;
      };
      ShortCompanionObject.$metadata$ = objectMeta("ShortCompanionObject");
      Object.defineProperty(ShortCompanionObject.prototype, "MIN_VALUE", {
        configurable: true,
        get: ShortCompanionObject.prototype.get_MIN_VALUE_7nmmor_k$
      });
      Object.defineProperty(ShortCompanionObject.prototype, "MAX_VALUE", {
        configurable: true,
        get: ShortCompanionObject.prototype.get_MAX_VALUE_54a9lf_k$
      });
      Object.defineProperty(ShortCompanionObject.prototype, "SIZE_BYTES", {
        configurable: true,
        get: ShortCompanionObject.prototype.get_SIZE_BYTES_qphg4q_k$
      });
      Object.defineProperty(ShortCompanionObject.prototype, "SIZE_BITS", {
        configurable: true,
        get: ShortCompanionObject.prototype.get_SIZE_BITS_7qhjj9_k$
      });
      var ShortCompanionObject_instance;
      function ShortCompanionObject_getInstance() {
        if (ShortCompanionObject_instance == null)
          new ShortCompanionObject();
        return ShortCompanionObject_instance;
      }
      function IntCompanionObject() {
        IntCompanionObject_instance = this;
        this.MIN_VALUE_1 = -2147483648;
        this.MAX_VALUE_1 = 2147483647;
        this.SIZE_BYTES_1 = 4;
        this.SIZE_BITS_1 = 32;
      }
      IntCompanionObject.prototype.get_MIN_VALUE_7nmmor_k$ = function() {
        return this.MIN_VALUE_1;
      };
      IntCompanionObject.prototype.get_MAX_VALUE_54a9lf_k$ = function() {
        return this.MAX_VALUE_1;
      };
      IntCompanionObject.prototype.get_SIZE_BYTES_qphg4q_k$ = function() {
        return this.SIZE_BYTES_1;
      };
      IntCompanionObject.prototype.get_SIZE_BITS_7qhjj9_k$ = function() {
        return this.SIZE_BITS_1;
      };
      IntCompanionObject.$metadata$ = objectMeta("IntCompanionObject");
      Object.defineProperty(IntCompanionObject.prototype, "MIN_VALUE", {
        configurable: true,
        get: IntCompanionObject.prototype.get_MIN_VALUE_7nmmor_k$
      });
      Object.defineProperty(IntCompanionObject.prototype, "MAX_VALUE", {
        configurable: true,
        get: IntCompanionObject.prototype.get_MAX_VALUE_54a9lf_k$
      });
      Object.defineProperty(IntCompanionObject.prototype, "SIZE_BYTES", {
        configurable: true,
        get: IntCompanionObject.prototype.get_SIZE_BYTES_qphg4q_k$
      });
      Object.defineProperty(IntCompanionObject.prototype, "SIZE_BITS", {
        configurable: true,
        get: IntCompanionObject.prototype.get_SIZE_BITS_7qhjj9_k$
      });
      var IntCompanionObject_instance;
      function IntCompanionObject_getInstance() {
        if (IntCompanionObject_instance == null)
          new IntCompanionObject();
        return IntCompanionObject_instance;
      }
      function FloatCompanionObject() {
        FloatCompanionObject_instance = this;
        this.MIN_VALUE_1 = 14e-46;
        this.MAX_VALUE_1 = 34028235e31;
        this.POSITIVE_INFINITY_1 = Infinity;
        this.NEGATIVE_INFINITY_1 = -Infinity;
        this.NaN_1 = NaN;
        this.SIZE_BYTES_1 = 4;
        this.SIZE_BITS_1 = 32;
      }
      FloatCompanionObject.prototype.get_MIN_VALUE_7nmmor_k$ = function() {
        return this.MIN_VALUE_1;
      };
      FloatCompanionObject.prototype.get_MAX_VALUE_54a9lf_k$ = function() {
        return this.MAX_VALUE_1;
      };
      FloatCompanionObject.prototype.get_POSITIVE_INFINITY_yq30fv_k$ = function() {
        return this.POSITIVE_INFINITY_1;
      };
      FloatCompanionObject.prototype.get_NEGATIVE_INFINITY_e9bp9z_k$ = function() {
        return this.NEGATIVE_INFINITY_1;
      };
      FloatCompanionObject.prototype.get_NaN_18jnv2_k$ = function() {
        return this.NaN_1;
      };
      FloatCompanionObject.prototype.get_SIZE_BYTES_qphg4q_k$ = function() {
        return this.SIZE_BYTES_1;
      };
      FloatCompanionObject.prototype.get_SIZE_BITS_7qhjj9_k$ = function() {
        return this.SIZE_BITS_1;
      };
      FloatCompanionObject.$metadata$ = objectMeta("FloatCompanionObject");
      Object.defineProperty(FloatCompanionObject.prototype, "MIN_VALUE", {
        configurable: true,
        get: FloatCompanionObject.prototype.get_MIN_VALUE_7nmmor_k$
      });
      Object.defineProperty(FloatCompanionObject.prototype, "MAX_VALUE", {
        configurable: true,
        get: FloatCompanionObject.prototype.get_MAX_VALUE_54a9lf_k$
      });
      Object.defineProperty(FloatCompanionObject.prototype, "POSITIVE_INFINITY", {
        configurable: true,
        get: FloatCompanionObject.prototype.get_POSITIVE_INFINITY_yq30fv_k$
      });
      Object.defineProperty(FloatCompanionObject.prototype, "NEGATIVE_INFINITY", {
        configurable: true,
        get: FloatCompanionObject.prototype.get_NEGATIVE_INFINITY_e9bp9z_k$
      });
      Object.defineProperty(FloatCompanionObject.prototype, "NaN", {
        configurable: true,
        get: FloatCompanionObject.prototype.get_NaN_18jnv2_k$
      });
      Object.defineProperty(FloatCompanionObject.prototype, "SIZE_BYTES", {
        configurable: true,
        get: FloatCompanionObject.prototype.get_SIZE_BYTES_qphg4q_k$
      });
      Object.defineProperty(FloatCompanionObject.prototype, "SIZE_BITS", {
        configurable: true,
        get: FloatCompanionObject.prototype.get_SIZE_BITS_7qhjj9_k$
      });
      var FloatCompanionObject_instance;
      function FloatCompanionObject_getInstance() {
        if (FloatCompanionObject_instance == null)
          new FloatCompanionObject();
        return FloatCompanionObject_instance;
      }
      function DoubleCompanionObject() {
        DoubleCompanionObject_instance = this;
        this.MIN_VALUE_1 = 5e-324;
        this.MAX_VALUE_1 = 17976931348623157e292;
        this.POSITIVE_INFINITY_1 = Infinity;
        this.NEGATIVE_INFINITY_1 = -Infinity;
        this.NaN_1 = NaN;
        this.SIZE_BYTES_1 = 8;
        this.SIZE_BITS_1 = 64;
      }
      DoubleCompanionObject.prototype.get_MIN_VALUE_7nmmor_k$ = function() {
        return this.MIN_VALUE_1;
      };
      DoubleCompanionObject.prototype.get_MAX_VALUE_54a9lf_k$ = function() {
        return this.MAX_VALUE_1;
      };
      DoubleCompanionObject.prototype.get_POSITIVE_INFINITY_yq30fv_k$ = function() {
        return this.POSITIVE_INFINITY_1;
      };
      DoubleCompanionObject.prototype.get_NEGATIVE_INFINITY_e9bp9z_k$ = function() {
        return this.NEGATIVE_INFINITY_1;
      };
      DoubleCompanionObject.prototype.get_NaN_18jnv2_k$ = function() {
        return this.NaN_1;
      };
      DoubleCompanionObject.prototype.get_SIZE_BYTES_qphg4q_k$ = function() {
        return this.SIZE_BYTES_1;
      };
      DoubleCompanionObject.prototype.get_SIZE_BITS_7qhjj9_k$ = function() {
        return this.SIZE_BITS_1;
      };
      DoubleCompanionObject.$metadata$ = objectMeta("DoubleCompanionObject");
      Object.defineProperty(DoubleCompanionObject.prototype, "MIN_VALUE", {
        configurable: true,
        get: DoubleCompanionObject.prototype.get_MIN_VALUE_7nmmor_k$
      });
      Object.defineProperty(DoubleCompanionObject.prototype, "MAX_VALUE", {
        configurable: true,
        get: DoubleCompanionObject.prototype.get_MAX_VALUE_54a9lf_k$
      });
      Object.defineProperty(DoubleCompanionObject.prototype, "POSITIVE_INFINITY", {
        configurable: true,
        get: DoubleCompanionObject.prototype.get_POSITIVE_INFINITY_yq30fv_k$
      });
      Object.defineProperty(DoubleCompanionObject.prototype, "NEGATIVE_INFINITY", {
        configurable: true,
        get: DoubleCompanionObject.prototype.get_NEGATIVE_INFINITY_e9bp9z_k$
      });
      Object.defineProperty(DoubleCompanionObject.prototype, "NaN", {
        configurable: true,
        get: DoubleCompanionObject.prototype.get_NaN_18jnv2_k$
      });
      Object.defineProperty(DoubleCompanionObject.prototype, "SIZE_BYTES", {
        configurable: true,
        get: DoubleCompanionObject.prototype.get_SIZE_BYTES_qphg4q_k$
      });
      Object.defineProperty(DoubleCompanionObject.prototype, "SIZE_BITS", {
        configurable: true,
        get: DoubleCompanionObject.prototype.get_SIZE_BITS_7qhjj9_k$
      });
      var DoubleCompanionObject_instance;
      function DoubleCompanionObject_getInstance() {
        if (DoubleCompanionObject_instance == null)
          new DoubleCompanionObject();
        return DoubleCompanionObject_instance;
      }
      function StringCompanionObject() {
        StringCompanionObject_instance = this;
      }
      StringCompanionObject.$metadata$ = objectMeta("StringCompanionObject");
      var StringCompanionObject_instance;
      function StringCompanionObject_getInstance() {
        if (StringCompanionObject_instance == null)
          new StringCompanionObject();
        return StringCompanionObject_instance;
      }
      function BooleanCompanionObject() {
        BooleanCompanionObject_instance = this;
      }
      BooleanCompanionObject.$metadata$ = objectMeta("BooleanCompanionObject");
      var BooleanCompanionObject_instance;
      function BooleanCompanionObject_getInstance() {
        if (BooleanCompanionObject_instance == null)
          new BooleanCompanionObject();
        return BooleanCompanionObject_instance;
      }
      function Comparator() {
      }
      Comparator.$metadata$ = interfaceMeta("Comparator");
      function JsQualifier(value) {
        this.value_1 = value;
      }
      JsQualifier.prototype.get_value_j01efc_k$ = function() {
        return this.value_1;
      };
      JsQualifier.prototype.equals = function(other) {
        if (!(other instanceof JsQualifier))
          return false;
        var tmp0_other_with_cast = other instanceof JsQualifier ? other : THROW_CCE();
        if (!(this.value_1 === tmp0_other_with_cast.value_1))
          return false;
        return true;
      };
      JsQualifier.prototype.hashCode = function() {
        return imul(getStringHashCode("value"), 127) ^ getStringHashCode(this.value_1);
      };
      JsQualifier.prototype.toString = function() {
        return "@kotlin.js.JsQualifier(value=" + this.value_1 + ")";
      };
      JsQualifier.$metadata$ = classMeta("JsQualifier", [Annotation]);
      function JsName(name) {
        this.name_1 = name;
      }
      JsName.prototype.get_name_woqyms_k$ = function() {
        return this.name_1;
      };
      JsName.prototype.equals = function(other) {
        if (!(other instanceof JsName))
          return false;
        var tmp0_other_with_cast = other instanceof JsName ? other : THROW_CCE();
        if (!(this.name_1 === tmp0_other_with_cast.name_1))
          return false;
        return true;
      };
      JsName.prototype.hashCode = function() {
        return imul(getStringHashCode("name"), 127) ^ getStringHashCode(this.name_1);
      };
      JsName.prototype.toString = function() {
        return "@kotlin.js.JsName(name=" + this.name_1 + ")";
      };
      JsName.$metadata$ = classMeta("JsName", [Annotation]);
      function JsExport() {
      }
      JsExport.prototype.equals = function(other) {
        if (!(other instanceof JsExport))
          return false;
        var tmp0_other_with_cast = other instanceof JsExport ? other : THROW_CCE();
        return true;
      };
      JsExport.prototype.hashCode = function() {
        return 0;
      };
      JsExport.prototype.toString = function() {
        return "@kotlin.js.JsExport()";
      };
      JsExport.$metadata$ = classMeta("JsExport", [Annotation]);
      function EagerInitialization() {
      }
      EagerInitialization.prototype.equals = function(other) {
        if (!(other instanceof EagerInitialization))
          return false;
        var tmp0_other_with_cast = other instanceof EagerInitialization ? other : THROW_CCE();
        return true;
      };
      EagerInitialization.prototype.hashCode = function() {
        return 0;
      };
      EagerInitialization.prototype.toString = function() {
        return "@kotlin.js.EagerInitialization()";
      };
      EagerInitialization.$metadata$ = classMeta("EagerInitialization", [Annotation]);
      function toTypedArray(_this__u8e3s4) {
        return copyToArray(_this__u8e3s4);
      }
      function copyToArray(collection) {
        var tmp;
        var tmp$ret$0;
        {
          tmp$ret$0 = collection;
        }
        if (tmp$ret$0.toArray !== void 0) {
          var tmp$ret$2;
          {
            var tmp$ret$1;
            {
              tmp$ret$1 = collection;
            }
            var tmp0_unsafeCast = tmp$ret$1.toArray();
            tmp$ret$2 = tmp0_unsafeCast;
          }
          tmp = tmp$ret$2;
        } else {
          var tmp$ret$4;
          {
            var tmp1_unsafeCast = copyToArrayImpl(collection);
            var tmp$ret$3;
            {
              tmp$ret$3 = tmp1_unsafeCast;
            }
            tmp$ret$4 = tmp$ret$3;
          }
          tmp = tmp$ret$4;
        }
        return tmp;
      }
      function copyToArrayImpl(collection) {
        var tmp$ret$0;
        {
          tmp$ret$0 = [];
        }
        var array3 = tmp$ret$0;
        var iterator = collection.iterator_jk1svi_k$();
        while (iterator.hasNext_bitz1p_k$()) {
          var tmp$ret$1;
          {
            tmp$ret$1 = array3;
          }
          tmp$ret$1.push(iterator.next_20eer_k$());
        }
        return array3;
      }
      function arrayCopy(source, destination, destinationOffset, startIndex, endIndex) {
        Companion_getInstance().checkRangeIndexes_5hjybp_k$(startIndex, endIndex, source.length);
        var rangeSize = endIndex - startIndex | 0;
        Companion_getInstance().checkRangeIndexes_5hjybp_k$(destinationOffset, destinationOffset + rangeSize | 0, destination.length);
        if (isView(destination) ? isView(source) : false) {
          var tmp$ret$0;
          {
            tmp$ret$0 = source;
          }
          var subrange = tmp$ret$0.subarray(startIndex, endIndex);
          var tmp$ret$1;
          {
            tmp$ret$1 = destination;
          }
          tmp$ret$1.set(subrange, destinationOffset);
        } else {
          if (!(source === destination) ? true : destinationOffset <= startIndex) {
            var inductionVariable = 0;
            if (inductionVariable < rangeSize)
              do {
                var index3 = inductionVariable;
                inductionVariable = inductionVariable + 1 | 0;
                destination[destinationOffset + index3 | 0] = source[startIndex + index3 | 0];
              } while (inductionVariable < rangeSize);
          } else {
            var inductionVariable_0 = rangeSize - 1 | 0;
            if (0 <= inductionVariable_0)
              do {
                var index_0 = inductionVariable_0;
                inductionVariable_0 = inductionVariable_0 + -1 | 0;
                destination[destinationOffset + index_0 | 0] = source[startIndex + index_0 | 0];
              } while (0 <= inductionVariable_0);
          }
        }
      }
      function copyToExistingArrayImpl(collection, array3) {
        if (array3.length < collection.get_size_woubt6_k$()) {
          var tmp$ret$1;
          {
            var tmp0_unsafeCast = copyToArrayImpl(collection);
            var tmp$ret$0;
            {
              tmp$ret$0 = tmp0_unsafeCast;
            }
            tmp$ret$1 = tmp$ret$0;
          }
          return tmp$ret$1;
        }
        var iterator = collection.iterator_jk1svi_k$();
        var index3 = 0;
        while (iterator.hasNext_bitz1p_k$()) {
          var tmp0 = index3;
          index3 = tmp0 + 1 | 0;
          var tmp$ret$3;
          {
            var tmp1_unsafeCast = iterator.next_20eer_k$();
            var tmp$ret$2;
            {
              tmp$ret$2 = tmp1_unsafeCast;
            }
            tmp$ret$3 = tmp$ret$2;
          }
          array3[tmp0] = tmp$ret$3;
        }
        if (index3 < array3.length) {
          var tmp = index3;
          var tmp$ret$5;
          {
            var tmp$ret$4;
            {
              tmp$ret$4 = null;
            }
            tmp$ret$5 = tmp$ret$4;
          }
          array3[tmp] = tmp$ret$5;
        }
        return array3;
      }
      function AbstractMutableCollection$removeAll$lambda($elements) {
        return function(it) {
          return $elements.contains_2ehdt1_k$(it);
        };
      }
      function AbstractMutableCollection$retainAll$lambda($elements) {
        return function(it) {
          return !$elements.contains_2ehdt1_k$(it);
        };
      }
      function AbstractMutableCollection() {
        AbstractCollection.call(this);
      }
      AbstractMutableCollection.prototype.remove_8hbkc6_k$ = function(element) {
        this.checkIsMutable_h4zzmr_k$();
        var iterator = this.iterator_jk1svi_k$();
        while (iterator.hasNext_bitz1p_k$()) {
          if (equals(iterator.next_20eer_k$(), element)) {
            iterator.remove_le47v1_k$();
            return true;
          }
        }
        return false;
      };
      AbstractMutableCollection.prototype.addAll_oxxjjk_k$ = function(elements) {
        this.checkIsMutable_h4zzmr_k$();
        var modified = false;
        var tmp0_iterator = elements.iterator_jk1svi_k$();
        while (tmp0_iterator.hasNext_bitz1p_k$()) {
          var element = tmp0_iterator.next_20eer_k$();
          if (this.add_1j60pz_k$(element))
            modified = true;
        }
        return modified;
      };
      AbstractMutableCollection.prototype.removeAll_99to5v_k$ = function(elements) {
        this.checkIsMutable_h4zzmr_k$();
        var tmp = isInterface(this, MutableIterable) ? this : THROW_CCE();
        return removeAll_0(tmp, AbstractMutableCollection$removeAll$lambda(elements));
      };
      AbstractMutableCollection.prototype.retainAll_j44sd0_k$ = function(elements) {
        this.checkIsMutable_h4zzmr_k$();
        var tmp = isInterface(this, MutableIterable) ? this : THROW_CCE();
        return removeAll_0(tmp, AbstractMutableCollection$retainAll$lambda(elements));
      };
      AbstractMutableCollection.prototype.clear_j9y8zo_k$ = function() {
        this.checkIsMutable_h4zzmr_k$();
        var iterator = this.iterator_jk1svi_k$();
        while (iterator.hasNext_bitz1p_k$()) {
          iterator.next_20eer_k$();
          iterator.remove_le47v1_k$();
        }
      };
      AbstractMutableCollection.prototype.toJSON = function() {
        return this.toArray();
      };
      AbstractMutableCollection.prototype.checkIsMutable_h4zzmr_k$ = function() {
      };
      AbstractMutableCollection.$metadata$ = classMeta("AbstractMutableCollection", [MutableCollection], void 0, void 0, void 0, AbstractCollection.prototype);
      function _get_list__d9tsa5_0($this) {
        return $this.list_1;
      }
      function _get_fromIndex__987b49_0($this) {
        return $this.fromIndex_1;
      }
      function _set__size__bau3qd_0($this, _set____db54di) {
        $this._size_1 = _set____db54di;
      }
      function _get__size__kqacr3_0($this) {
        return $this._size_1;
      }
      function IteratorImpl_0($outer) {
        this.$this_1 = $outer;
        this.index_1 = 0;
        this.last_1 = -1;
      }
      IteratorImpl_0.prototype.set_index_eknhut_k$ = function(_set____db54di) {
        this.index_1 = _set____db54di;
      };
      IteratorImpl_0.prototype.get_index_it478p_k$ = function() {
        return this.index_1;
      };
      IteratorImpl_0.prototype.set_last_3ufkar_k$ = function(_set____db54di) {
        this.last_1 = _set____db54di;
      };
      IteratorImpl_0.prototype.get_last_wopotb_k$ = function() {
        return this.last_1;
      };
      IteratorImpl_0.prototype.hasNext_bitz1p_k$ = function() {
        return this.index_1 < this.$this_1.get_size_woubt6_k$();
      };
      IteratorImpl_0.prototype.next_20eer_k$ = function() {
        if (!this.hasNext_bitz1p_k$())
          throw NoSuchElementException_init_$Create$();
        var tmp = this;
        var tmp0_this = this;
        var tmp1 = tmp0_this.index_1;
        tmp0_this.index_1 = tmp1 + 1 | 0;
        tmp.last_1 = tmp1;
        return this.$this_1.get_fkrdnv_k$(this.last_1);
      };
      IteratorImpl_0.prototype.remove_le47v1_k$ = function() {
        {
          var tmp0_check = !(this.last_1 === -1);
          {
          }
          if (!tmp0_check) {
            var tmp$ret$0;
            {
              tmp$ret$0 = "Call next() or previous() before removing element from the iterator.";
            }
            var message = tmp$ret$0;
            throw IllegalStateException_init_$Create$_0(toString_1(message));
          }
        }
        this.$this_1.removeAt_qvpkxi_k$(this.last_1);
        this.index_1 = this.last_1;
        this.last_1 = -1;
      };
      IteratorImpl_0.$metadata$ = classMeta("IteratorImpl", [MutableIterator]);
      function ListIteratorImpl_0($outer, index3) {
        this.$this_2 = $outer;
        IteratorImpl_0.call(this, $outer);
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, this.$this_2.get_size_woubt6_k$());
        this.set_index_eknhut_k$(index3);
      }
      ListIteratorImpl_0.prototype.hasPrevious_qh0629_k$ = function() {
        return this.get_index_it478p_k$() > 0;
      };
      ListIteratorImpl_0.prototype.nextIndex_jshxun_k$ = function() {
        return this.get_index_it478p_k$();
      };
      ListIteratorImpl_0.prototype.previous_l2dfd5_k$ = function() {
        if (!this.hasPrevious_qh0629_k$())
          throw NoSuchElementException_init_$Create$();
        var tmp0_this = this;
        tmp0_this.set_index_eknhut_k$(tmp0_this.get_index_it478p_k$() - 1 | 0);
        this.set_last_3ufkar_k$(tmp0_this.get_index_it478p_k$());
        return this.$this_2.get_fkrdnv_k$(this.get_last_wopotb_k$());
      };
      ListIteratorImpl_0.prototype.previousIndex_4qtyw5_k$ = function() {
        return this.get_index_it478p_k$() - 1 | 0;
      };
      ListIteratorImpl_0.prototype.add_8zjh9m_k$ = function(element) {
        this.$this_2.add_ydlf05_k$(this.get_index_it478p_k$(), element);
        var tmp0_this = this;
        var tmp1 = tmp0_this.get_index_it478p_k$();
        tmp0_this.set_index_eknhut_k$(tmp1 + 1 | 0);
        this.set_last_3ufkar_k$(-1);
      };
      ListIteratorImpl_0.prototype.add_sf7wgr_k$ = function(element) {
        return this.add_8zjh9m_k$((element == null ? true : isObject2(element)) ? element : THROW_CCE());
      };
      ListIteratorImpl_0.prototype.set_y85lex_k$ = function(element) {
        {
          var tmp0_check = !(this.get_last_wopotb_k$() === -1);
          {
          }
          if (!tmp0_check) {
            var tmp$ret$0;
            {
              tmp$ret$0 = "Call next() or previous() before updating element value with the iterator.";
            }
            var message = tmp$ret$0;
            throw IllegalStateException_init_$Create$_0(toString_1(message));
          }
        }
        this.$this_2.set_meu351_k$(this.get_last_wopotb_k$(), element);
      };
      ListIteratorImpl_0.prototype.set_hda1d2_k$ = function(element) {
        return this.set_y85lex_k$((element == null ? true : isObject2(element)) ? element : THROW_CCE());
      };
      ListIteratorImpl_0.$metadata$ = classMeta("ListIteratorImpl", [MutableListIterator], void 0, void 0, void 0, IteratorImpl_0.prototype);
      function SubList_0(list, fromIndex, toIndex) {
        AbstractMutableList.call(this);
        this.list_1 = list;
        this.fromIndex_1 = fromIndex;
        this._size_1 = 0;
        Companion_getInstance().checkRangeIndexes_5hjybp_k$(this.fromIndex_1, toIndex, this.list_1.get_size_woubt6_k$());
        this._size_1 = toIndex - this.fromIndex_1 | 0;
      }
      SubList_0.prototype.add_ydlf05_k$ = function(index3, element) {
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, this._size_1);
        this.list_1.add_ydlf05_k$(this.fromIndex_1 + index3 | 0, element);
        var tmp0_this = this;
        var tmp1 = tmp0_this._size_1;
        tmp0_this._size_1 = tmp1 + 1 | 0;
      };
      SubList_0.prototype.get_fkrdnv_k$ = function(index3) {
        Companion_getInstance().checkElementIndex_ux0wz1_k$(index3, this._size_1);
        return this.list_1.get_fkrdnv_k$(this.fromIndex_1 + index3 | 0);
      };
      SubList_0.prototype.removeAt_qvpkxi_k$ = function(index3) {
        Companion_getInstance().checkElementIndex_ux0wz1_k$(index3, this._size_1);
        var result = this.list_1.removeAt_qvpkxi_k$(this.fromIndex_1 + index3 | 0);
        var tmp0_this = this;
        var tmp1 = tmp0_this._size_1;
        tmp0_this._size_1 = tmp1 - 1 | 0;
        return result;
      };
      SubList_0.prototype.set_meu351_k$ = function(index3, element) {
        Companion_getInstance().checkElementIndex_ux0wz1_k$(index3, this._size_1);
        return this.list_1.set_meu351_k$(this.fromIndex_1 + index3 | 0, element);
      };
      SubList_0.prototype.get_size_woubt6_k$ = function() {
        return this._size_1;
      };
      SubList_0.prototype.checkIsMutable_h4zzmr_k$ = function() {
        return this.list_1.checkIsMutable_h4zzmr_k$();
      };
      SubList_0.$metadata$ = classMeta("SubList", [RandomAccess], void 0, void 0, void 0, AbstractMutableList.prototype);
      function AbstractMutableList$removeAll$lambda($elements) {
        return function(it) {
          return $elements.contains_2ehdt1_k$(it);
        };
      }
      function AbstractMutableList$retainAll$lambda($elements) {
        return function(it) {
          return !$elements.contains_2ehdt1_k$(it);
        };
      }
      function AbstractMutableList() {
        AbstractMutableCollection.call(this);
        this.modCount_1 = 0;
      }
      AbstractMutableList.prototype.set_modCount_ro74zq_k$ = function(_set____db54di) {
        this.modCount_1 = _set____db54di;
      };
      AbstractMutableList.prototype.get_modCount_sgzjli_k$ = function() {
        return this.modCount_1;
      };
      AbstractMutableList.prototype.add_1j60pz_k$ = function(element) {
        this.checkIsMutable_h4zzmr_k$();
        this.add_ydlf05_k$(this.get_size_woubt6_k$(), element);
        return true;
      };
      AbstractMutableList.prototype.addAll_ikuqlt_k$ = function(index3, elements) {
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, this.get_size_woubt6_k$());
        this.checkIsMutable_h4zzmr_k$();
        var _index = index3;
        var changed = false;
        var tmp0_iterator = elements.iterator_jk1svi_k$();
        while (tmp0_iterator.hasNext_bitz1p_k$()) {
          var e = tmp0_iterator.next_20eer_k$();
          var tmp1 = _index;
          _index = tmp1 + 1 | 0;
          this.add_ydlf05_k$(tmp1, e);
          changed = true;
        }
        return changed;
      };
      AbstractMutableList.prototype.clear_j9y8zo_k$ = function() {
        this.checkIsMutable_h4zzmr_k$();
        this.removeRange_rbwdy0_k$(0, this.get_size_woubt6_k$());
      };
      AbstractMutableList.prototype.removeAll_99to5v_k$ = function(elements) {
        this.checkIsMutable_h4zzmr_k$();
        return removeAll2(this, AbstractMutableList$removeAll$lambda(elements));
      };
      AbstractMutableList.prototype.retainAll_j44sd0_k$ = function(elements) {
        this.checkIsMutable_h4zzmr_k$();
        return removeAll2(this, AbstractMutableList$retainAll$lambda(elements));
      };
      AbstractMutableList.prototype.iterator_jk1svi_k$ = function() {
        return new IteratorImpl_0(this);
      };
      AbstractMutableList.prototype.contains_2ehdt1_k$ = function(element) {
        return this.indexOf_dcv8dt_k$(element) >= 0;
      };
      AbstractMutableList.prototype.indexOf_dcv8dt_k$ = function(element) {
        var inductionVariable = 0;
        var last = get_lastIndex_6(this);
        if (inductionVariable <= last)
          do {
            var index3 = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            if (equals(this.get_fkrdnv_k$(index3), element)) {
              return index3;
            }
          } while (!(index3 === last));
        return -1;
      };
      AbstractMutableList.prototype.lastIndexOf_rzx8t5_k$ = function(element) {
        var inductionVariable = get_lastIndex_6(this);
        if (0 <= inductionVariable)
          do {
            var index3 = inductionVariable;
            inductionVariable = inductionVariable + -1 | 0;
            if (equals(this.get_fkrdnv_k$(index3), element)) {
              return index3;
            }
          } while (0 <= inductionVariable);
        return -1;
      };
      AbstractMutableList.prototype.listIterator_xjshxw_k$ = function() {
        return this.listIterator_5hanv9_k$(0);
      };
      AbstractMutableList.prototype.listIterator_5hanv9_k$ = function(index3) {
        return new ListIteratorImpl_0(this, index3);
      };
      AbstractMutableList.prototype.subList_d153ha_k$ = function(fromIndex, toIndex) {
        return new SubList_0(this, fromIndex, toIndex);
      };
      AbstractMutableList.prototype.removeRange_rbwdy0_k$ = function(fromIndex, toIndex) {
        var iterator = this.listIterator_5hanv9_k$(fromIndex);
        {
          var tmp0_repeat = toIndex - fromIndex | 0;
          {
          }
          var inductionVariable = 0;
          if (inductionVariable < tmp0_repeat)
            do {
              var index3 = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              {
                iterator.next_20eer_k$();
                iterator.remove_le47v1_k$();
              }
            } while (inductionVariable < tmp0_repeat);
        }
      };
      AbstractMutableList.prototype.equals = function(other) {
        if (other === this)
          return true;
        if (!(!(other == null) ? isInterface(other, List) : false))
          return false;
        return Companion_getInstance().orderedEquals_40uhas_k$(this, other);
      };
      AbstractMutableList.prototype.hashCode = function() {
        return Companion_getInstance().orderedHashCode_2n0xp_k$(this);
      };
      AbstractMutableList.$metadata$ = classMeta("AbstractMutableList", [MutableList], void 0, void 0, void 0, AbstractMutableCollection.prototype);
      function _set_array__c8isr0($this, _set____db54di) {
        $this.array_1 = _set____db54di;
      }
      function _get_array__jslnqg_3($this) {
        return $this.array_1;
      }
      function _set_isReadOnly__fb15ed($this, _set____db54di) {
        $this.isReadOnly_1 = _set____db54di;
      }
      function _get_isReadOnly__ud9qjl($this) {
        return $this.isReadOnly_1;
      }
      function ArrayList_init_$Init$($this) {
        var tmp$ret$0;
        {
          tmp$ret$0 = [];
        }
        ArrayList.call($this, tmp$ret$0);
        return $this;
      }
      function ArrayList_init_$Create$() {
        return ArrayList_init_$Init$(Object.create(ArrayList.prototype));
      }
      function ArrayList_init_$Init$_0(initialCapacity, $this) {
        var tmp$ret$0;
        {
          tmp$ret$0 = [];
        }
        ArrayList.call($this, tmp$ret$0);
        return $this;
      }
      function ArrayList_init_$Create$_0(initialCapacity) {
        return ArrayList_init_$Init$_0(initialCapacity, Object.create(ArrayList.prototype));
      }
      function ArrayList_init_$Init$_1(elements, $this) {
        var tmp$ret$0;
        {
          tmp$ret$0 = copyToArray(elements);
        }
        ArrayList.call($this, tmp$ret$0);
        return $this;
      }
      function ArrayList_init_$Create$_1(elements) {
        return ArrayList_init_$Init$_1(elements, Object.create(ArrayList.prototype));
      }
      function rangeCheck($this, index3) {
        var tmp$ret$0;
        {
          {
          }
          {
            Companion_getInstance().checkElementIndex_ux0wz1_k$(index3, $this.get_size_woubt6_k$());
          }
          tmp$ret$0 = index3;
        }
        return tmp$ret$0;
      }
      function insertionRangeCheck($this, index3) {
        var tmp$ret$0;
        {
          {
          }
          {
            Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, $this.get_size_woubt6_k$());
          }
          tmp$ret$0 = index3;
        }
        return tmp$ret$0;
      }
      function ArrayList(array3) {
        AbstractMutableList.call(this);
        this.array_1 = array3;
        this.isReadOnly_1 = false;
      }
      ArrayList.prototype.build_1k0s4u_k$ = function() {
        this.checkIsMutable_h4zzmr_k$();
        this.isReadOnly_1 = true;
        return this;
      };
      ArrayList.prototype.trimToSize_dnhilv_k$ = function() {
      };
      ArrayList.prototype.ensureCapacity_ignus8_k$ = function(minCapacity) {
      };
      ArrayList.prototype.get_size_woubt6_k$ = function() {
        return this.array_1.length;
      };
      ArrayList.prototype.get_fkrdnv_k$ = function(index3) {
        var tmp = this.array_1[rangeCheck(this, index3)];
        return (tmp == null ? true : isObject2(tmp)) ? tmp : THROW_CCE();
      };
      ArrayList.prototype.set_meu351_k$ = function(index3, element) {
        this.checkIsMutable_h4zzmr_k$();
        rangeCheck(this, index3);
        var tmp$ret$0;
        {
          var tmp0_apply = this.array_1[index3];
          {
          }
          {
            this.array_1[index3] = element;
          }
          tmp$ret$0 = tmp0_apply;
        }
        var tmp = tmp$ret$0;
        return (tmp == null ? true : isObject2(tmp)) ? tmp : THROW_CCE();
      };
      ArrayList.prototype.add_1j60pz_k$ = function(element) {
        this.checkIsMutable_h4zzmr_k$();
        var tmp$ret$0;
        {
          var tmp0_asDynamic = this.array_1;
          tmp$ret$0 = tmp0_asDynamic;
        }
        tmp$ret$0.push(element);
        var tmp0_this = this;
        var tmp1 = tmp0_this.get_modCount_sgzjli_k$();
        tmp0_this.set_modCount_ro74zq_k$(tmp1 + 1 | 0);
        return true;
      };
      ArrayList.prototype.add_ydlf05_k$ = function(index3, element) {
        this.checkIsMutable_h4zzmr_k$();
        var tmp$ret$0;
        {
          var tmp0_asDynamic = this.array_1;
          tmp$ret$0 = tmp0_asDynamic;
        }
        tmp$ret$0.splice(insertionRangeCheck(this, index3), 0, element);
        var tmp0_this = this;
        var tmp1 = tmp0_this.get_modCount_sgzjli_k$();
        tmp0_this.set_modCount_ro74zq_k$(tmp1 + 1 | 0);
      };
      ArrayList.prototype.addAll_oxxjjk_k$ = function(elements) {
        this.checkIsMutable_h4zzmr_k$();
        if (elements.isEmpty_y1axqb_k$())
          return false;
        var tmp0_this = this;
        var tmp = tmp0_this;
        var tmp$ret$2;
        {
          var tmp0_plus = tmp0_this.array_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = copyToArray(elements);
          }
          var tmp1_plus = tmp$ret$0;
          var tmp$ret$1;
          {
            tmp$ret$1 = tmp0_plus;
          }
          tmp$ret$2 = tmp$ret$1.concat(tmp1_plus);
        }
        tmp.array_1 = tmp$ret$2;
        var tmp1_this = this;
        var tmp2 = tmp1_this.get_modCount_sgzjli_k$();
        tmp1_this.set_modCount_ro74zq_k$(tmp2 + 1 | 0);
        return true;
      };
      ArrayList.prototype.addAll_ikuqlt_k$ = function(index3, elements) {
        this.checkIsMutable_h4zzmr_k$();
        insertionRangeCheck(this, index3);
        if (index3 === this.get_size_woubt6_k$())
          return this.addAll_oxxjjk_k$(elements);
        if (elements.isEmpty_y1axqb_k$())
          return false;
        var tmp0_subject = index3;
        if (tmp0_subject === this.get_size_woubt6_k$())
          return this.addAll_oxxjjk_k$(elements);
        else if (tmp0_subject === 0) {
          var tmp = this;
          var tmp$ret$2;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = copyToArray(elements);
            }
            var tmp0_plus = tmp$ret$0;
            var tmp1_plus = this.array_1;
            var tmp$ret$1;
            {
              tmp$ret$1 = tmp0_plus;
            }
            tmp$ret$2 = tmp$ret$1.concat(tmp1_plus);
          }
          tmp.array_1 = tmp$ret$2;
        } else {
          var tmp_0 = this;
          var tmp$ret$3;
          {
            var tmp2_asDynamic = copyOfRange(this.array_1, 0, index3);
            tmp$ret$3 = tmp2_asDynamic;
          }
          var tmp$ret$4;
          {
            tmp$ret$4 = copyToArray(elements);
          }
          tmp_0.array_1 = tmp$ret$3.concat(tmp$ret$4, copyOfRange(this.array_1, index3, this.get_size_woubt6_k$()));
        }
        var tmp1_this = this;
        var tmp2 = tmp1_this.get_modCount_sgzjli_k$();
        tmp1_this.set_modCount_ro74zq_k$(tmp2 + 1 | 0);
        return true;
      };
      ArrayList.prototype.removeAt_qvpkxi_k$ = function(index3) {
        this.checkIsMutable_h4zzmr_k$();
        rangeCheck(this, index3);
        var tmp0_this = this;
        var tmp1 = tmp0_this.get_modCount_sgzjli_k$();
        tmp0_this.set_modCount_ro74zq_k$(tmp1 + 1 | 0);
        var tmp;
        if (index3 === get_lastIndex_6(this)) {
          var tmp$ret$0;
          {
            var tmp0_asDynamic = this.array_1;
            tmp$ret$0 = tmp0_asDynamic;
          }
          tmp = tmp$ret$0.pop();
        } else {
          var tmp$ret$1;
          {
            var tmp1_asDynamic = this.array_1;
            tmp$ret$1 = tmp1_asDynamic;
          }
          tmp = tmp$ret$1.splice(index3, 1)[0];
        }
        return tmp;
      };
      ArrayList.prototype.remove_8hbkc6_k$ = function(element) {
        this.checkIsMutable_h4zzmr_k$();
        var inductionVariable = 0;
        var last = this.array_1.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var index3 = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            if (equals(this.array_1[index3], element)) {
              var tmp$ret$0;
              {
                var tmp0_asDynamic = this.array_1;
                tmp$ret$0 = tmp0_asDynamic;
              }
              tmp$ret$0.splice(index3, 1);
              var tmp1_this = this;
              var tmp2 = tmp1_this.get_modCount_sgzjli_k$();
              tmp1_this.set_modCount_ro74zq_k$(tmp2 + 1 | 0);
              return true;
            }
          } while (inductionVariable <= last);
        return false;
      };
      ArrayList.prototype.removeRange_rbwdy0_k$ = function(fromIndex, toIndex) {
        this.checkIsMutable_h4zzmr_k$();
        var tmp0_this = this;
        var tmp1 = tmp0_this.get_modCount_sgzjli_k$();
        tmp0_this.set_modCount_ro74zq_k$(tmp1 + 1 | 0);
        var tmp$ret$0;
        {
          var tmp0_asDynamic = this.array_1;
          tmp$ret$0 = tmp0_asDynamic;
        }
        tmp$ret$0.splice(fromIndex, toIndex - fromIndex | 0);
      };
      ArrayList.prototype.clear_j9y8zo_k$ = function() {
        this.checkIsMutable_h4zzmr_k$();
        var tmp = this;
        var tmp$ret$0;
        {
          tmp$ret$0 = [];
        }
        tmp.array_1 = tmp$ret$0;
        var tmp0_this = this;
        var tmp1 = tmp0_this.get_modCount_sgzjli_k$();
        tmp0_this.set_modCount_ro74zq_k$(tmp1 + 1 | 0);
      };
      ArrayList.prototype.indexOf_dcv8dt_k$ = function(element) {
        return indexOf(this.array_1, element);
      };
      ArrayList.prototype.lastIndexOf_rzx8t5_k$ = function(element) {
        return lastIndexOf(this.array_1, element);
      };
      ArrayList.prototype.toString = function() {
        return arrayToString(this.array_1);
      };
      ArrayList.prototype.toArray_nu7pb_k$ = function(array3) {
        if (array3.length < this.get_size_woubt6_k$()) {
          var tmp = this.toArray_jjyjqa_k$();
          return isArray(tmp) ? tmp : THROW_CCE();
        }
        var tmp$ret$0;
        {
          var tmp_0 = this.array_1;
          var tmp0_copyInto = isArray(tmp_0) ? tmp_0 : THROW_CCE();
          var tmp1_copyInto = tmp0_copyInto.length;
          arrayCopy(tmp0_copyInto, array3, 0, 0, tmp1_copyInto);
          tmp$ret$0 = array3;
        }
        if (array3.length > this.get_size_woubt6_k$()) {
          var tmp_1 = this.get_size_woubt6_k$();
          array3[tmp_1] = (true ? true : isObject2(null)) ? null : THROW_CCE();
        }
        return array3;
      };
      ArrayList.prototype.toArray_jjyjqa_k$ = function() {
        return [].slice.call(this.array_1);
      };
      ArrayList.prototype.toArray = function() {
        return this.toArray_jjyjqa_k$();
      };
      ArrayList.prototype.checkIsMutable_h4zzmr_k$ = function() {
        if (this.isReadOnly_1)
          throw UnsupportedOperationException_init_$Create$();
      };
      ArrayList.$metadata$ = classMeta("ArrayList", [MutableList, RandomAccess], void 0, void 0, void 0, AbstractMutableList.prototype);
      function set__stableSortingIsSupported(_set____db54di) {
        _stableSortingIsSupported = _set____db54di;
      }
      function get__stableSortingIsSupported() {
        return _stableSortingIsSupported;
      }
      var _stableSortingIsSupported;
      function RandomAccess() {
      }
      RandomAccess.$metadata$ = interfaceMeta("RandomAccess");
      function set_output(_set____db54di) {
        init_properties_console_kt_6h8hpf();
        output = _set____db54di;
      }
      function get_output() {
        init_properties_console_kt_6h8hpf();
        return output;
      }
      var output;
      function BaseOutput() {
      }
      BaseOutput.prototype.println_uuzh5q_k$ = function() {
        this.print_o29p2b_k$("\n");
      };
      BaseOutput.prototype.println_gh3jfj_k$ = function(message) {
        this.print_o29p2b_k$(message);
        this.println_uuzh5q_k$();
      };
      BaseOutput.prototype.flush_sgqoqb_k$ = function() {
      };
      BaseOutput.$metadata$ = classMeta("BaseOutput");
      function NodeJsOutput(outputStream) {
        BaseOutput.call(this);
        this.outputStream_1 = outputStream;
      }
      NodeJsOutput.prototype.get_outputStream_2dy5nu_k$ = function() {
        return this.outputStream_1;
      };
      NodeJsOutput.prototype.print_o29p2b_k$ = function(message) {
        var tmp$ret$0;
        {
          tmp$ret$0 = String(message);
        }
        var messageString = tmp$ret$0;
        this.outputStream_1.write(messageString);
      };
      NodeJsOutput.$metadata$ = classMeta("NodeJsOutput", void 0, void 0, void 0, void 0, BaseOutput.prototype);
      function BufferedOutputToConsoleLog() {
        BufferedOutput.call(this);
      }
      BufferedOutputToConsoleLog.prototype.print_o29p2b_k$ = function(message) {
        var tmp$ret$0;
        {
          tmp$ret$0 = String(message);
        }
        var s3 = tmp$ret$0;
        var tmp$ret$2;
        {
          var tmp0_nativeLastIndexOf = s3;
          var tmp$ret$1;
          {
            tmp$ret$1 = tmp0_nativeLastIndexOf;
          }
          tmp$ret$2 = tmp$ret$1.lastIndexOf("\n", 0);
        }
        var i = tmp$ret$2;
        if (i >= 0) {
          var tmp0_this = this;
          var tmp = tmp0_this.get_buffer_bmaafd_k$();
          var tmp$ret$4;
          {
            var tmp1_substring = s3;
            var tmp$ret$3;
            {
              tmp$ret$3 = tmp1_substring;
            }
            tmp$ret$4 = tmp$ret$3.substring(0, i);
          }
          tmp0_this.set_buffer_j8vbf9_k$(tmp + tmp$ret$4);
          this.flush_sgqoqb_k$();
          var tmp$ret$6;
          {
            var tmp2_substring = s3;
            var tmp3_substring = i + 1 | 0;
            var tmp$ret$5;
            {
              tmp$ret$5 = tmp2_substring;
            }
            tmp$ret$6 = tmp$ret$5.substring(tmp3_substring);
          }
          s3 = tmp$ret$6;
        }
        var tmp1_this = this;
        tmp1_this.set_buffer_j8vbf9_k$(tmp1_this.get_buffer_bmaafd_k$() + s3);
      };
      BufferedOutputToConsoleLog.prototype.flush_sgqoqb_k$ = function() {
        console.log(this.get_buffer_bmaafd_k$());
        this.set_buffer_j8vbf9_k$("");
      };
      BufferedOutputToConsoleLog.$metadata$ = classMeta("BufferedOutputToConsoleLog", void 0, void 0, void 0, void 0, BufferedOutput.prototype);
      function String_0(value) {
        init_properties_console_kt_6h8hpf();
        return String(value);
      }
      function BufferedOutput() {
        BaseOutput.call(this);
        this.buffer_1 = "";
      }
      BufferedOutput.prototype.set_buffer_j8vbf9_k$ = function(_set____db54di) {
        this.buffer_1 = _set____db54di;
      };
      BufferedOutput.prototype.get_buffer_bmaafd_k$ = function() {
        return this.buffer_1;
      };
      BufferedOutput.prototype.print_o29p2b_k$ = function(message) {
        var tmp0_this = this;
        var tmp = tmp0_this;
        var tmp_0 = tmp0_this.buffer_1;
        var tmp$ret$0;
        {
          tmp$ret$0 = String(message);
        }
        tmp.buffer_1 = tmp_0 + tmp$ret$0;
      };
      BufferedOutput.prototype.flush_sgqoqb_k$ = function() {
        this.buffer_1 = "";
      };
      BufferedOutput.$metadata$ = classMeta("BufferedOutput", void 0, void 0, void 0, void 0, BaseOutput.prototype);
      function println(message) {
        init_properties_console_kt_6h8hpf();
        get_output().println_gh3jfj_k$(message);
      }
      var properties_initialized_console_kt_gll9dl;
      function init_properties_console_kt_6h8hpf() {
        if (properties_initialized_console_kt_gll9dl) {
        } else {
          properties_initialized_console_kt_gll9dl = true;
          var tmp$ret$1;
          {
            {
            }
            var tmp$ret$0;
            {
              var isNode = typeof process !== "undefined" && process.versions && !!process.versions.node;
              tmp$ret$0 = isNode ? new NodeJsOutput(process.stdout) : new BufferedOutputToConsoleLog();
            }
            tmp$ret$1 = tmp$ret$0;
          }
          output = tmp$ret$1;
        }
      }
      function get_EmptyContinuation() {
        init_properties_EmptyContinuation_kt_8tpm4w();
        return EmptyContinuation;
      }
      var EmptyContinuation;
      function _no_name_provided__qut3iv_0($tmp0_Continuation) {
        this.$tmp0_Continuation_1 = $tmp0_Continuation;
      }
      _no_name_provided__qut3iv_0.prototype.get_context_h02k06_k$ = function() {
        return this.$tmp0_Continuation_1;
      };
      _no_name_provided__qut3iv_0.prototype.resumeWith_7onugl_k$ = function(result) {
        var tmp$ret$0;
        {
          throwOnFailure(result);
          var tmp = _Result___get_value__impl__bjfvqg(result);
          tmp$ret$0 = (tmp == null ? true : isObject2(tmp)) ? tmp : THROW_CCE();
        }
        return Unit_getInstance();
      };
      _no_name_provided__qut3iv_0.prototype.resumeWith_s3a3yh_k$ = function(result) {
        return this.resumeWith_7onugl_k$(result);
      };
      _no_name_provided__qut3iv_0.$metadata$ = classMeta(void 0, [Continuation]);
      var properties_initialized_EmptyContinuation_kt_4jdb9w;
      function init_properties_EmptyContinuation_kt_8tpm4w() {
        if (properties_initialized_EmptyContinuation_kt_4jdb9w) {
        } else {
          properties_initialized_EmptyContinuation_kt_4jdb9w = true;
          var tmp$ret$0;
          {
            var tmp0_Continuation = EmptyCoroutineContext_getInstance();
            tmp$ret$0 = new _no_name_provided__qut3iv_0(tmp0_Continuation);
          }
          EmptyContinuation = tmp$ret$0;
        }
      }
      function asDynamic(_this__u8e3s4) {
        return _this__u8e3s4;
      }
      function unsafeCastDynamic(_this__u8e3s4) {
        return _this__u8e3s4;
      }
      function unsafeCast(_this__u8e3s4) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _this__u8e3s4;
        }
        return tmp$ret$0;
      }
      function JsPolyfill(implementation) {
        this.implementation_1 = implementation;
      }
      JsPolyfill.prototype.get_implementation_9txf7p_k$ = function() {
        return this.implementation_1;
      };
      JsPolyfill.prototype.equals = function(other) {
        if (!(other instanceof JsPolyfill))
          return false;
        var tmp0_other_with_cast = other instanceof JsPolyfill ? other : THROW_CCE();
        if (!(this.implementation_1 === tmp0_other_with_cast.implementation_1))
          return false;
        return true;
      };
      JsPolyfill.prototype.hashCode = function() {
        return imul(getStringHashCode("implementation"), 127) ^ getStringHashCode(this.implementation_1);
      };
      JsPolyfill.prototype.toString = function() {
        return "@kotlin.js.JsPolyfill(implementation=" + this.implementation_1 + ")";
      };
      JsPolyfill.$metadata$ = classMeta("JsPolyfill", [Annotation]);
      function Serializable() {
      }
      Serializable.$metadata$ = interfaceMeta("Serializable");
      function pow4(_this__u8e3s4, n2) {
        return Math.pow(_this__u8e3s4, n2);
      }
      function cos4(x4) {
        return Math.cos(x4);
      }
      function min4(a3, b) {
        return Math.min(a3, b);
      }
      function sin4(x4) {
        return Math.sin(x4);
      }
      function sqrt4(x4) {
        return Math.sqrt(x4);
      }
      function max5(a3, b) {
        return Math.max(a3, b);
      }
      function abs5(x4) {
        return Math.abs(x4);
      }
      function round(x4) {
        if (!(x4 % 0.5 === 0)) {
          return Math.round(x4);
        }
        var tmp$ret$0;
        {
          tmp$ret$0 = Math.floor(x4);
        }
        var floor2 = tmp$ret$0;
        var tmp;
        if (floor2 % 2 === 0) {
          tmp = floor2;
        } else {
          var tmp$ret$1;
          {
            tmp$ret$1 = Math.ceil(x4);
          }
          tmp = tmp$ret$1;
        }
        return tmp;
      }
      function roundToInt(_this__u8e3s4) {
        return roundToInt_0(_this__u8e3s4);
      }
      function floor(x4) {
        return Math.floor(x4);
      }
      function pow_0(_this__u8e3s4, x4) {
        return Math.pow(_this__u8e3s4, x4);
      }
      function atan23(y4, x4) {
        return Math.atan2(y4, x4);
      }
      function exp2(x4) {
        return Math.exp(x4);
      }
      function tan2(x4) {
        return Math.tan(x4);
      }
      function floor_0(x4) {
        return Math.floor(x4);
      }
      function ceil2(x4) {
        return Math.ceil(x4);
      }
      function roundToInt_0(_this__u8e3s4) {
        var tmp;
        if (isNaN_0(_this__u8e3s4)) {
          throw IllegalArgumentException_init_$Create$_0("Cannot round NaN value.");
        } else if (_this__u8e3s4 > IntCompanionObject_getInstance().MAX_VALUE_1) {
          tmp = IntCompanionObject_getInstance().MAX_VALUE_1;
        } else if (_this__u8e3s4 < IntCompanionObject_getInstance().MIN_VALUE_1) {
          tmp = IntCompanionObject_getInstance().MIN_VALUE_1;
        } else {
          tmp = numberToInt(Math.round(_this__u8e3s4));
        }
        return tmp;
      }
      function nextDown(_this__u8e3s4) {
        var tmp;
        var tmp_0;
        if (isNaN_0(_this__u8e3s4)) {
          tmp_0 = true;
        } else {
          DoubleCompanionObject_getInstance();
          tmp_0 = _this__u8e3s4 === -Infinity;
        }
        if (tmp_0) {
          tmp = _this__u8e3s4;
        } else {
          if (_this__u8e3s4 === 0) {
            DoubleCompanionObject_getInstance();
            tmp = -5e-324;
          } else {
            var tmp$ret$1;
            {
              var tmp2_fromBits = DoubleCompanionObject_getInstance();
              var tmp$ret$0;
              {
                var tmp0_plus = toRawBits(_this__u8e3s4);
                var tmp1_plus = _this__u8e3s4 > 0 ? -1 : 1;
                tmp$ret$0 = tmp0_plus.plus_u6jwas_k$(toLong(tmp1_plus));
              }
              var tmp3_fromBits = tmp$ret$0;
              tmp$ret$1 = doubleFromBits(tmp3_fromBits);
            }
            tmp = tmp$ret$1;
          }
        }
        return tmp;
      }
      function isNaN_0(_this__u8e3s4) {
        return !(_this__u8e3s4 === _this__u8e3s4);
      }
      function isInfinite(_this__u8e3s4) {
        var tmp;
        DoubleCompanionObject_getInstance();
        if (_this__u8e3s4 === Infinity) {
          tmp = true;
        } else {
          DoubleCompanionObject_getInstance();
          tmp = _this__u8e3s4 === -Infinity;
        }
        return tmp;
      }
      function isFinite2(_this__u8e3s4) {
        return !isInfinite(_this__u8e3s4) ? !isNaN_0(_this__u8e3s4) : false;
      }
      function countLeadingZeroBits(_this__u8e3s4) {
        return clz32(_this__u8e3s4);
      }
      function get_INV_2_26() {
        init_properties_PlatformRandom_kt_or3gqs();
        return INV_2_26;
      }
      var INV_2_26;
      function get_INV_2_53() {
        init_properties_PlatformRandom_kt_or3gqs();
        return INV_2_53;
      }
      var INV_2_53;
      function doubleFromParts(hi26, low27) {
        init_properties_PlatformRandom_kt_or3gqs();
        return hi26 * get_INV_2_26() + low27 * get_INV_2_53();
      }
      function defaultPlatformRandom() {
        init_properties_PlatformRandom_kt_or3gqs();
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = Math.random() * Math.pow(2, 32) | 0;
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return Random_0(tmp$ret$0);
      }
      var properties_initialized_PlatformRandom_kt_uibhw8;
      function init_properties_PlatformRandom_kt_or3gqs() {
        if (properties_initialized_PlatformRandom_kt_uibhw8) {
        } else {
          properties_initialized_PlatformRandom_kt_uibhw8 = true;
          var tmp$ret$0;
          {
            tmp$ret$0 = Math.pow(2, -26);
          }
          INV_2_26 = tmp$ret$0;
          var tmp$ret$0_0;
          {
            tmp$ret$0_0 = Math.pow(2, -53);
          }
          INV_2_53 = tmp$ret$0_0;
        }
      }
      function get_js(_this__u8e3s4) {
        return (_this__u8e3s4 instanceof KClassImpl ? _this__u8e3s4 : THROW_CCE()).get_jClass_en9agn_k$();
      }
      function KCallable() {
      }
      KCallable.$metadata$ = interfaceMeta("KCallable");
      function KClass() {
      }
      KClass.$metadata$ = interfaceMeta("KClass", [KClassifier]);
      function KClassImpl(jClass) {
        this.jClass_1 = jClass;
      }
      KClassImpl.prototype.get_jClass_en9agn_k$ = function() {
        return this.jClass_1;
      };
      KClassImpl.prototype.get_qualifiedName_aokcf6_k$ = function() {
        throw NotImplementedError_init_$Create$(null, 1, null);
      };
      KClassImpl.prototype.equals = function(other) {
        var tmp;
        if (other instanceof KClassImpl) {
          tmp = equals(this.get_jClass_en9agn_k$(), other.get_jClass_en9agn_k$());
        } else {
          tmp = false;
        }
        return tmp;
      };
      KClassImpl.prototype.hashCode = function() {
        var tmp0_safe_receiver = this.get_simpleName_r6f8py_k$();
        var tmp1_elvis_lhs = tmp0_safe_receiver == null ? null : getStringHashCode(tmp0_safe_receiver);
        return tmp1_elvis_lhs == null ? 0 : tmp1_elvis_lhs;
      };
      KClassImpl.prototype.toString = function() {
        return "class " + this.get_simpleName_r6f8py_k$();
      };
      KClassImpl.$metadata$ = classMeta("KClassImpl", [KClass]);
      function _get_givenSimpleName__jpleuh($this) {
        return $this.givenSimpleName_1;
      }
      function _get_isInstanceFunction__fkefl8($this) {
        return $this.isInstanceFunction_1;
      }
      function PrimitiveKClassImpl(jClass, givenSimpleName, isInstanceFunction) {
        KClassImpl.call(this, jClass);
        this.givenSimpleName_1 = givenSimpleName;
        this.isInstanceFunction_1 = isInstanceFunction;
      }
      PrimitiveKClassImpl.prototype.equals = function(other) {
        if (!(other instanceof PrimitiveKClassImpl))
          return false;
        return KClassImpl.prototype.equals.call(this, other) ? this.givenSimpleName_1 === other.givenSimpleName_1 : false;
      };
      PrimitiveKClassImpl.prototype.get_simpleName_r6f8py_k$ = function() {
        return this.givenSimpleName_1;
      };
      PrimitiveKClassImpl.prototype.isInstance_6tn68w_k$ = function(value) {
        return this.isInstanceFunction_1(value);
      };
      PrimitiveKClassImpl.$metadata$ = classMeta("PrimitiveKClassImpl", void 0, void 0, void 0, void 0, KClassImpl.prototype);
      function NothingKClassImpl() {
        NothingKClassImpl_instance = this;
        KClassImpl.call(this, Object);
        this.simpleName_1 = "Nothing";
      }
      NothingKClassImpl.prototype.get_simpleName_r6f8py_k$ = function() {
        return this.simpleName_1;
      };
      NothingKClassImpl.prototype.isInstance_6tn68w_k$ = function(value) {
        return false;
      };
      NothingKClassImpl.prototype.get_jClass_en9agn_k$ = function() {
        throw UnsupportedOperationException_init_$Create$_0("There's no native JS class for Nothing type");
      };
      NothingKClassImpl.prototype.equals = function(other) {
        return other === this;
      };
      NothingKClassImpl.prototype.hashCode = function() {
        return 0;
      };
      NothingKClassImpl.$metadata$ = objectMeta("NothingKClassImpl", void 0, void 0, void 0, void 0, KClassImpl.prototype);
      var NothingKClassImpl_instance;
      function NothingKClassImpl_getInstance() {
        if (NothingKClassImpl_instance == null)
          new NothingKClassImpl();
        return NothingKClassImpl_instance;
      }
      function ErrorKClass() {
      }
      ErrorKClass.prototype.get_simpleName_r6f8py_k$ = function() {
        throw IllegalStateException_init_$Create$_0("Unknown simpleName for ErrorKClass");
      };
      ErrorKClass.prototype.get_qualifiedName_aokcf6_k$ = function() {
        throw IllegalStateException_init_$Create$_0("Unknown qualifiedName for ErrorKClass");
      };
      ErrorKClass.prototype.isInstance_6tn68w_k$ = function(value) {
        throw IllegalStateException_init_$Create$_0("Can's check isInstance on ErrorKClass");
      };
      ErrorKClass.prototype.equals = function(other) {
        return other === this;
      };
      ErrorKClass.prototype.hashCode = function() {
        return 0;
      };
      ErrorKClass.$metadata$ = classMeta("ErrorKClass", [KClass]);
      function SimpleKClassImpl(jClass) {
        KClassImpl.call(this, jClass);
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = jClass;
          }
          var tmp0_safe_receiver = tmp$ret$0.$metadata$;
          var tmp0_unsafeCast = tmp0_safe_receiver == null ? null : tmp0_safe_receiver.simpleName;
          tmp$ret$1 = tmp0_unsafeCast;
        }
        tmp.simpleName_1 = tmp$ret$1;
      }
      SimpleKClassImpl.prototype.get_simpleName_r6f8py_k$ = function() {
        return this.simpleName_1;
      };
      SimpleKClassImpl.prototype.isInstance_6tn68w_k$ = function(value) {
        return jsIsType(value, this.get_jClass_en9agn_k$());
      };
      SimpleKClassImpl.$metadata$ = classMeta("SimpleKClassImpl", void 0, void 0, void 0, void 0, KClassImpl.prototype);
      function KFunction() {
      }
      KFunction.$metadata$ = interfaceMeta("KFunction", [KCallable]);
      function KProperty() {
      }
      KProperty.$metadata$ = interfaceMeta("KProperty", [KCallable]);
      function KProperty0() {
      }
      KProperty0.$metadata$ = interfaceMeta("KProperty0", [KProperty]);
      function KProperty1() {
      }
      KProperty1.$metadata$ = interfaceMeta("KProperty1", [KProperty]);
      function KProperty2() {
      }
      KProperty2.$metadata$ = interfaceMeta("KProperty2", [KProperty]);
      function KMutableProperty0() {
      }
      KMutableProperty0.$metadata$ = interfaceMeta("KMutableProperty0", [KProperty0, KMutableProperty]);
      function KMutableProperty() {
      }
      KMutableProperty.$metadata$ = interfaceMeta("KMutableProperty", [KProperty]);
      function KMutableProperty1() {
      }
      KMutableProperty1.$metadata$ = interfaceMeta("KMutableProperty1", [KProperty1, KMutableProperty]);
      function KMutableProperty2() {
      }
      KMutableProperty2.$metadata$ = interfaceMeta("KMutableProperty2", [KProperty2, KMutableProperty]);
      function KType() {
      }
      KType.$metadata$ = interfaceMeta("KType");
      function createKType(classifier, arguments_0, isMarkedNullable) {
        return new KTypeImpl(classifier, asList(arguments_0), isMarkedNullable);
      }
      function createDynamicKType() {
        return DynamicKType_getInstance();
      }
      function createKTypeParameter(name, upperBounds, variance2) {
        var tmp0_subject = variance2;
        {
          var kVariance;
          switch (tmp0_subject) {
            case "in":
              kVariance = KVariance_IN_getInstance();
              break;
            case "out":
              kVariance = KVariance_OUT_getInstance();
              break;
            default:
              kVariance = KVariance_INVARIANT_getInstance();
              break;
          }
        }
        return new KTypeParameterImpl(name, asList(upperBounds), kVariance, false);
      }
      function getStarKTypeProjection() {
        return Companion_getInstance_2().get_STAR_wo9fa3_k$();
      }
      function createCovariantKTypeProjection(type2) {
        return Companion_getInstance_2().covariant_ne14kt_k$(type2);
      }
      function createInvariantKTypeProjection(type2) {
        return Companion_getInstance_2().invariant_d1std2_k$(type2);
      }
      function createContravariantKTypeProjection(type2) {
        return Companion_getInstance_2().contravariant_lnygde_k$(type2);
      }
      function KTypeImpl(classifier, arguments_0, isMarkedNullable) {
        this.classifier_1 = classifier;
        this.arguments_1 = arguments_0;
        this.isMarkedNullable_1 = isMarkedNullable;
      }
      KTypeImpl.prototype.get_classifier_ottyl2_k$ = function() {
        return this.classifier_1;
      };
      KTypeImpl.prototype.get_arguments_p5ddub_k$ = function() {
        return this.arguments_1;
      };
      KTypeImpl.prototype.get_isMarkedNullable_4el8ow_k$ = function() {
        return this.isMarkedNullable_1;
      };
      KTypeImpl.prototype.equals = function(other) {
        var tmp;
        var tmp_0;
        var tmp_1;
        if (other instanceof KTypeImpl) {
          tmp_1 = equals(this.classifier_1, other.classifier_1);
        } else {
          tmp_1 = false;
        }
        if (tmp_1) {
          tmp_0 = equals(this.arguments_1, other.arguments_1);
        } else {
          tmp_0 = false;
        }
        if (tmp_0) {
          tmp = this.isMarkedNullable_1 === other.isMarkedNullable_1;
        } else {
          tmp = false;
        }
        return tmp;
      };
      KTypeImpl.prototype.hashCode = function() {
        return imul(imul(hashCode(this.classifier_1), 31) + hashCode(this.arguments_1) | 0, 31) + (this.isMarkedNullable_1 | 0) | 0;
      };
      KTypeImpl.prototype.toString = function() {
        var tmp = this.classifier_1;
        var kClass = isInterface(tmp, KClass) ? tmp : null;
        var classifierName = kClass == null ? toString_1(this.classifier_1) : !(kClass.get_simpleName_r6f8py_k$() == null) ? kClass.get_simpleName_r6f8py_k$() : "(non-denotable type)";
        var tmp_0;
        if (this.arguments_1.isEmpty_y1axqb_k$()) {
          tmp_0 = "";
        } else {
          tmp_0 = joinToString$default_0(this.arguments_1, ", ", "<", ">", 0, null, null, 56, null);
        }
        var args = tmp_0;
        var nullable = this.isMarkedNullable_1 ? "?" : "";
        return plus_0(classifierName, args) + nullable;
      };
      KTypeImpl.$metadata$ = classMeta("KTypeImpl", [KType]);
      function DynamicKType() {
        DynamicKType_instance = this;
        this.classifier_1 = null;
        this.arguments_1 = emptyList();
        this.isMarkedNullable_1 = false;
      }
      DynamicKType.prototype.get_classifier_ottyl2_k$ = function() {
        return this.classifier_1;
      };
      DynamicKType.prototype.get_arguments_p5ddub_k$ = function() {
        return this.arguments_1;
      };
      DynamicKType.prototype.get_isMarkedNullable_4el8ow_k$ = function() {
        return this.isMarkedNullable_1;
      };
      DynamicKType.prototype.toString = function() {
        return "dynamic";
      };
      DynamicKType.$metadata$ = objectMeta("DynamicKType", [KType]);
      var DynamicKType_instance;
      function DynamicKType_getInstance() {
        if (DynamicKType_instance == null)
          new DynamicKType();
        return DynamicKType_instance;
      }
      function KTypeParameterImpl(name, upperBounds, variance2, isReified) {
        this.name_1 = name;
        this.upperBounds_1 = upperBounds;
        this.variance_1 = variance2;
        this.isReified_1 = isReified;
      }
      KTypeParameterImpl.prototype.get_name_woqyms_k$ = function() {
        return this.name_1;
      };
      KTypeParameterImpl.prototype.get_upperBounds_k5qia_k$ = function() {
        return this.upperBounds_1;
      };
      KTypeParameterImpl.prototype.get_variance_ik7ku2_k$ = function() {
        return this.variance_1;
      };
      KTypeParameterImpl.prototype.get_isReified_gx0s91_k$ = function() {
        return this.isReified_1;
      };
      KTypeParameterImpl.prototype.toString = function() {
        return this.name_1;
      };
      KTypeParameterImpl.prototype.component1_7eebsc_k$ = function() {
        return this.name_1;
      };
      KTypeParameterImpl.prototype.component2_7eebsb_k$ = function() {
        return this.upperBounds_1;
      };
      KTypeParameterImpl.prototype.component3_7eebsa_k$ = function() {
        return this.variance_1;
      };
      KTypeParameterImpl.prototype.component4_7eebs9_k$ = function() {
        return this.isReified_1;
      };
      KTypeParameterImpl.prototype.copy_21tpu9_k$ = function(name, upperBounds, variance2, isReified) {
        return new KTypeParameterImpl(name, upperBounds, variance2, isReified);
      };
      KTypeParameterImpl.prototype.copy$default_6ckzz_k$ = function(name, upperBounds, variance2, isReified, $mask0, $handler) {
        if (!(($mask0 & 1) === 0))
          name = this.name_1;
        if (!(($mask0 & 2) === 0))
          upperBounds = this.upperBounds_1;
        if (!(($mask0 & 4) === 0))
          variance2 = this.variance_1;
        if (!(($mask0 & 8) === 0))
          isReified = this.isReified_1;
        return this.copy_21tpu9_k$(name, upperBounds, variance2, isReified);
      };
      KTypeParameterImpl.prototype.hashCode = function() {
        var result = getStringHashCode(this.name_1);
        result = imul(result, 31) + hashCode(this.upperBounds_1) | 0;
        result = imul(result, 31) + this.variance_1.hashCode() | 0;
        result = imul(result, 31) + (this.isReified_1 | 0) | 0;
        return result;
      };
      KTypeParameterImpl.prototype.equals = function(other) {
        if (this === other)
          return true;
        if (!(other instanceof KTypeParameterImpl))
          return false;
        var tmp0_other_with_cast = other instanceof KTypeParameterImpl ? other : THROW_CCE();
        if (!(this.name_1 === tmp0_other_with_cast.name_1))
          return false;
        if (!equals(this.upperBounds_1, tmp0_other_with_cast.upperBounds_1))
          return false;
        if (!this.variance_1.equals(tmp0_other_with_cast.variance_1))
          return false;
        if (!(this.isReified_1 === tmp0_other_with_cast.isReified_1))
          return false;
        return true;
      };
      KTypeParameterImpl.$metadata$ = classMeta("KTypeParameterImpl", [KTypeParameter]);
      function get_functionClasses() {
        init_properties_primitives_kt_rm1w5q();
        return functionClasses;
      }
      var functionClasses;
      function PrimitiveClasses$anyClass$lambda() {
        return function(it) {
          return isObject2(it);
        };
      }
      function PrimitiveClasses$numberClass$lambda() {
        return function(it) {
          return isNumber2(it);
        };
      }
      function PrimitiveClasses$booleanClass$lambda() {
        return function(it) {
          return !(it == null) ? typeof it === "boolean" : false;
        };
      }
      function PrimitiveClasses$byteClass$lambda() {
        return function(it) {
          return !(it == null) ? typeof it === "number" : false;
        };
      }
      function PrimitiveClasses$shortClass$lambda() {
        return function(it) {
          return !(it == null) ? typeof it === "number" : false;
        };
      }
      function PrimitiveClasses$intClass$lambda() {
        return function(it) {
          return !(it == null) ? typeof it === "number" : false;
        };
      }
      function PrimitiveClasses$floatClass$lambda() {
        return function(it) {
          return !(it == null) ? typeof it === "number" : false;
        };
      }
      function PrimitiveClasses$doubleClass$lambda() {
        return function(it) {
          return !(it == null) ? typeof it === "number" : false;
        };
      }
      function PrimitiveClasses$arrayClass$lambda() {
        return function(it) {
          return !(it == null) ? isArray(it) : false;
        };
      }
      function PrimitiveClasses$stringClass$lambda() {
        return function(it) {
          return !(it == null) ? typeof it === "string" : false;
        };
      }
      function PrimitiveClasses$throwableClass$lambda() {
        return function(it) {
          return it instanceof Error;
        };
      }
      function PrimitiveClasses$booleanArrayClass$lambda() {
        return function(it) {
          return !(it == null) ? isBooleanArray(it) : false;
        };
      }
      function PrimitiveClasses$charArrayClass$lambda() {
        return function(it) {
          return !(it == null) ? isCharArray(it) : false;
        };
      }
      function PrimitiveClasses$byteArrayClass$lambda() {
        return function(it) {
          return !(it == null) ? isByteArray(it) : false;
        };
      }
      function PrimitiveClasses$shortArrayClass$lambda() {
        return function(it) {
          return !(it == null) ? isShortArray(it) : false;
        };
      }
      function PrimitiveClasses$intArrayClass$lambda() {
        return function(it) {
          return !(it == null) ? isIntArray(it) : false;
        };
      }
      function PrimitiveClasses$longArrayClass$lambda() {
        return function(it) {
          return !(it == null) ? isLongArray(it) : false;
        };
      }
      function PrimitiveClasses$floatArrayClass$lambda() {
        return function(it) {
          return !(it == null) ? isFloatArray(it) : false;
        };
      }
      function PrimitiveClasses$doubleArrayClass$lambda() {
        return function(it) {
          return !(it == null) ? isDoubleArray(it) : false;
        };
      }
      function PrimitiveClasses$functionClass$lambda($arity) {
        return function(it) {
          var tmp;
          if (typeof it === "function") {
            var tmp$ret$0;
            {
              tmp$ret$0 = it;
            }
            tmp = tmp$ret$0.length === $arity;
          } else {
            tmp = false;
          }
          return tmp;
        };
      }
      function PrimitiveClasses() {
        PrimitiveClasses_instance = this;
        var tmp = this;
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = Object;
          tmp$ret$0 = tmp0_unsafeCast;
        }
        var tmp_0 = tmp$ret$0;
        tmp.anyClass_1 = new PrimitiveKClassImpl(tmp_0, "Any", PrimitiveClasses$anyClass$lambda());
        var tmp_1 = this;
        var tmp$ret$1;
        {
          var tmp0_unsafeCast_0 = Number;
          tmp$ret$1 = tmp0_unsafeCast_0;
        }
        var tmp_2 = tmp$ret$1;
        tmp_1.numberClass_1 = new PrimitiveKClassImpl(tmp_2, "Number", PrimitiveClasses$numberClass$lambda());
        this.nothingClass_1 = NothingKClassImpl_getInstance();
        var tmp_3 = this;
        var tmp$ret$2;
        {
          var tmp0_unsafeCast_1 = Boolean;
          tmp$ret$2 = tmp0_unsafeCast_1;
        }
        var tmp_4 = tmp$ret$2;
        tmp_3.booleanClass_1 = new PrimitiveKClassImpl(tmp_4, "Boolean", PrimitiveClasses$booleanClass$lambda());
        var tmp_5 = this;
        var tmp$ret$3;
        {
          var tmp0_unsafeCast_2 = Number;
          tmp$ret$3 = tmp0_unsafeCast_2;
        }
        var tmp_6 = tmp$ret$3;
        tmp_5.byteClass_1 = new PrimitiveKClassImpl(tmp_6, "Byte", PrimitiveClasses$byteClass$lambda());
        var tmp_7 = this;
        var tmp$ret$4;
        {
          var tmp0_unsafeCast_3 = Number;
          tmp$ret$4 = tmp0_unsafeCast_3;
        }
        var tmp_8 = tmp$ret$4;
        tmp_7.shortClass_1 = new PrimitiveKClassImpl(tmp_8, "Short", PrimitiveClasses$shortClass$lambda());
        var tmp_9 = this;
        var tmp$ret$5;
        {
          var tmp0_unsafeCast_4 = Number;
          tmp$ret$5 = tmp0_unsafeCast_4;
        }
        var tmp_10 = tmp$ret$5;
        tmp_9.intClass_1 = new PrimitiveKClassImpl(tmp_10, "Int", PrimitiveClasses$intClass$lambda());
        var tmp_11 = this;
        var tmp$ret$6;
        {
          var tmp0_unsafeCast_5 = Number;
          tmp$ret$6 = tmp0_unsafeCast_5;
        }
        var tmp_12 = tmp$ret$6;
        tmp_11.floatClass_1 = new PrimitiveKClassImpl(tmp_12, "Float", PrimitiveClasses$floatClass$lambda());
        var tmp_13 = this;
        var tmp$ret$7;
        {
          var tmp0_unsafeCast_6 = Number;
          tmp$ret$7 = tmp0_unsafeCast_6;
        }
        var tmp_14 = tmp$ret$7;
        tmp_13.doubleClass_1 = new PrimitiveKClassImpl(tmp_14, "Double", PrimitiveClasses$doubleClass$lambda());
        var tmp_15 = this;
        var tmp$ret$8;
        {
          var tmp0_unsafeCast_7 = Array;
          tmp$ret$8 = tmp0_unsafeCast_7;
        }
        var tmp_16 = tmp$ret$8;
        tmp_15.arrayClass_1 = new PrimitiveKClassImpl(tmp_16, "Array", PrimitiveClasses$arrayClass$lambda());
        var tmp_17 = this;
        var tmp$ret$9;
        {
          var tmp0_unsafeCast_8 = String;
          tmp$ret$9 = tmp0_unsafeCast_8;
        }
        var tmp_18 = tmp$ret$9;
        tmp_17.stringClass_1 = new PrimitiveKClassImpl(tmp_18, "String", PrimitiveClasses$stringClass$lambda());
        var tmp_19 = this;
        var tmp$ret$10;
        {
          var tmp0_unsafeCast_9 = Error;
          tmp$ret$10 = tmp0_unsafeCast_9;
        }
        var tmp_20 = tmp$ret$10;
        tmp_19.throwableClass_1 = new PrimitiveKClassImpl(tmp_20, "Throwable", PrimitiveClasses$throwableClass$lambda());
        var tmp_21 = this;
        var tmp$ret$11;
        {
          var tmp0_unsafeCast_10 = Array;
          tmp$ret$11 = tmp0_unsafeCast_10;
        }
        var tmp_22 = tmp$ret$11;
        tmp_21.booleanArrayClass_1 = new PrimitiveKClassImpl(tmp_22, "BooleanArray", PrimitiveClasses$booleanArrayClass$lambda());
        var tmp_23 = this;
        var tmp$ret$12;
        {
          var tmp0_unsafeCast_11 = Uint16Array;
          tmp$ret$12 = tmp0_unsafeCast_11;
        }
        var tmp_24 = tmp$ret$12;
        tmp_23.charArrayClass_1 = new PrimitiveKClassImpl(tmp_24, "CharArray", PrimitiveClasses$charArrayClass$lambda());
        var tmp_25 = this;
        var tmp$ret$13;
        {
          var tmp0_unsafeCast_12 = Int8Array;
          tmp$ret$13 = tmp0_unsafeCast_12;
        }
        var tmp_26 = tmp$ret$13;
        tmp_25.byteArrayClass_1 = new PrimitiveKClassImpl(tmp_26, "ByteArray", PrimitiveClasses$byteArrayClass$lambda());
        var tmp_27 = this;
        var tmp$ret$14;
        {
          var tmp0_unsafeCast_13 = Int16Array;
          tmp$ret$14 = tmp0_unsafeCast_13;
        }
        var tmp_28 = tmp$ret$14;
        tmp_27.shortArrayClass_1 = new PrimitiveKClassImpl(tmp_28, "ShortArray", PrimitiveClasses$shortArrayClass$lambda());
        var tmp_29 = this;
        var tmp$ret$15;
        {
          var tmp0_unsafeCast_14 = Int32Array;
          tmp$ret$15 = tmp0_unsafeCast_14;
        }
        var tmp_30 = tmp$ret$15;
        tmp_29.intArrayClass_1 = new PrimitiveKClassImpl(tmp_30, "IntArray", PrimitiveClasses$intArrayClass$lambda());
        var tmp_31 = this;
        var tmp$ret$16;
        {
          var tmp0_unsafeCast_15 = Array;
          tmp$ret$16 = tmp0_unsafeCast_15;
        }
        var tmp_32 = tmp$ret$16;
        tmp_31.longArrayClass_1 = new PrimitiveKClassImpl(tmp_32, "LongArray", PrimitiveClasses$longArrayClass$lambda());
        var tmp_33 = this;
        var tmp$ret$17;
        {
          var tmp0_unsafeCast_16 = Float32Array;
          tmp$ret$17 = tmp0_unsafeCast_16;
        }
        var tmp_34 = tmp$ret$17;
        tmp_33.floatArrayClass_1 = new PrimitiveKClassImpl(tmp_34, "FloatArray", PrimitiveClasses$floatArrayClass$lambda());
        var tmp_35 = this;
        var tmp$ret$18;
        {
          var tmp0_unsafeCast_17 = Float64Array;
          tmp$ret$18 = tmp0_unsafeCast_17;
        }
        var tmp_36 = tmp$ret$18;
        tmp_35.doubleArrayClass_1 = new PrimitiveKClassImpl(tmp_36, "DoubleArray", PrimitiveClasses$doubleArrayClass$lambda());
      }
      PrimitiveClasses.prototype.get_anyClass_x0jl4l_k$ = function() {
        return this.anyClass_1;
      };
      PrimitiveClasses.prototype.get_numberClass_pnym9y_k$ = function() {
        return this.numberClass_1;
      };
      PrimitiveClasses.prototype.get_nothingClass_7ivpcc_k$ = function() {
        return this.nothingClass_1;
      };
      PrimitiveClasses.prototype.get_booleanClass_d285fr_k$ = function() {
        return this.booleanClass_1;
      };
      PrimitiveClasses.prototype.get_byteClass_pu7s61_k$ = function() {
        return this.byteClass_1;
      };
      PrimitiveClasses.prototype.get_shortClass_5ajsv9_k$ = function() {
        return this.shortClass_1;
      };
      PrimitiveClasses.prototype.get_intClass_mw4y9a_k$ = function() {
        return this.intClass_1;
      };
      PrimitiveClasses.prototype.get_floatClass_xlwq2t_k$ = function() {
        return this.floatClass_1;
      };
      PrimitiveClasses.prototype.get_doubleClass_dahzcy_k$ = function() {
        return this.doubleClass_1;
      };
      PrimitiveClasses.prototype.get_arrayClass_udg0fc_k$ = function() {
        return this.arrayClass_1;
      };
      PrimitiveClasses.prototype.get_stringClass_bik2gy_k$ = function() {
        return this.stringClass_1;
      };
      PrimitiveClasses.prototype.get_throwableClass_ee1a8x_k$ = function() {
        return this.throwableClass_1;
      };
      PrimitiveClasses.prototype.get_booleanArrayClass_lnbwea_k$ = function() {
        return this.booleanArrayClass_1;
      };
      PrimitiveClasses.prototype.get_charArrayClass_7lhfoe_k$ = function() {
        return this.charArrayClass_1;
      };
      PrimitiveClasses.prototype.get_byteArrayClass_57my8g_k$ = function() {
        return this.byteArrayClass_1;
      };
      PrimitiveClasses.prototype.get_shortArrayClass_c1p7wy_k$ = function() {
        return this.shortArrayClass_1;
      };
      PrimitiveClasses.prototype.get_intArrayClass_h44pbv_k$ = function() {
        return this.intArrayClass_1;
      };
      PrimitiveClasses.prototype.get_longArrayClass_v379a4_k$ = function() {
        return this.longArrayClass_1;
      };
      PrimitiveClasses.prototype.get_floatArrayClass_qngmha_k$ = function() {
        return this.floatArrayClass_1;
      };
      PrimitiveClasses.prototype.get_doubleArrayClass_84hee1_k$ = function() {
        return this.doubleArrayClass_1;
      };
      PrimitiveClasses.prototype.functionClass = function(arity) {
        var tmp0_elvis_lhs = get_functionClasses()[arity];
        var tmp;
        if (tmp0_elvis_lhs == null) {
          var tmp$ret$3;
          {
            {
            }
            var tmp$ret$2;
            {
              var tmp$ret$0;
              {
                var tmp0_unsafeCast = Function;
                tmp$ret$0 = tmp0_unsafeCast;
              }
              var tmp_0 = tmp$ret$0;
              var tmp_1 = "Function" + arity;
              var result = new PrimitiveKClassImpl(tmp_0, tmp_1, PrimitiveClasses$functionClass$lambda(arity));
              var tmp$ret$1;
              {
                var tmp1_asDynamic = get_functionClasses();
                tmp$ret$1 = tmp1_asDynamic;
              }
              tmp$ret$1[arity] = result;
              tmp$ret$2 = result;
            }
            tmp$ret$3 = tmp$ret$2;
          }
          tmp = tmp$ret$3;
        } else {
          tmp = tmp0_elvis_lhs;
        }
        return tmp;
      };
      PrimitiveClasses.$metadata$ = objectMeta("PrimitiveClasses");
      Object.defineProperty(PrimitiveClasses.prototype, "anyClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_anyClass_x0jl4l_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "numberClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_numberClass_pnym9y_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "nothingClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_nothingClass_7ivpcc_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "booleanClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_booleanClass_d285fr_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "byteClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_byteClass_pu7s61_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "shortClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_shortClass_5ajsv9_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "intClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_intClass_mw4y9a_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "floatClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_floatClass_xlwq2t_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "doubleClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_doubleClass_dahzcy_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "arrayClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_arrayClass_udg0fc_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "stringClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_stringClass_bik2gy_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "throwableClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_throwableClass_ee1a8x_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "booleanArrayClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_booleanArrayClass_lnbwea_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "charArrayClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_charArrayClass_7lhfoe_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "byteArrayClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_byteArrayClass_57my8g_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "shortArrayClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_shortArrayClass_c1p7wy_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "intArrayClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_intArrayClass_h44pbv_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "longArrayClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_longArrayClass_v379a4_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "floatArrayClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_floatArrayClass_qngmha_k$
      });
      Object.defineProperty(PrimitiveClasses.prototype, "doubleArrayClass", {
        configurable: true,
        get: PrimitiveClasses.prototype.get_doubleArrayClass_84hee1_k$
      });
      var PrimitiveClasses_instance;
      function PrimitiveClasses_getInstance() {
        if (PrimitiveClasses_instance == null)
          new PrimitiveClasses();
        return PrimitiveClasses_instance;
      }
      var properties_initialized_primitives_kt_jle18u;
      function init_properties_primitives_kt_rm1w5q() {
        if (properties_initialized_primitives_kt_jle18u) {
        } else {
          properties_initialized_primitives_kt_jle18u = true;
          var tmp$ret$0;
          {
            tmp$ret$0 = fillArrayVal(Array(0), null);
          }
          functionClasses = tmp$ret$0;
        }
      }
      function getKClass(jClass) {
        var tmp;
        if (Array.isArray(jClass)) {
          var tmp$ret$1;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = jClass;
            }
            tmp$ret$1 = tmp$ret$0;
          }
          tmp = getKClassM(tmp$ret$1);
        } else {
          var tmp$ret$3;
          {
            var tmp$ret$2;
            {
              tmp$ret$2 = jClass;
            }
            tmp$ret$3 = tmp$ret$2;
          }
          tmp = getKClass1(tmp$ret$3);
        }
        return tmp;
      }
      function getKClassM(jClasses) {
        var tmp0_subject = jClasses.length;
        var tmp;
        switch (tmp0_subject) {
          case 1:
            tmp = getKClass1(jClasses[0]);
            break;
          case 0:
            var tmp$ret$1;
            {
              var tmp0_unsafeCast = NothingKClassImpl_getInstance();
              var tmp$ret$0;
              {
                tmp$ret$0 = tmp0_unsafeCast;
              }
              tmp$ret$1 = tmp$ret$0;
            }
            tmp = tmp$ret$1;
            break;
          default:
            var tmp$ret$3;
            {
              var tmp1_unsafeCast = new ErrorKClass();
              var tmp$ret$2;
              {
                tmp$ret$2 = tmp1_unsafeCast;
              }
              tmp$ret$3 = tmp$ret$2;
            }
            tmp = tmp$ret$3;
            break;
        }
        return tmp;
      }
      function getKClass1(jClass) {
        if (jClass === String) {
          var tmp$ret$1;
          {
            var tmp0_unsafeCast = PrimitiveClasses_getInstance().stringClass_1;
            var tmp$ret$0;
            {
              tmp$ret$0 = tmp0_unsafeCast;
            }
            tmp$ret$1 = tmp$ret$0;
          }
          return tmp$ret$1;
        }
        var tmp$ret$2;
        {
          tmp$ret$2 = jClass;
        }
        var metadata = tmp$ret$2.$metadata$;
        var tmp;
        if (metadata != null) {
          var tmp_0;
          if (metadata.$kClass$ == null) {
            var kClass = new SimpleKClassImpl(jClass);
            metadata.$kClass$ = kClass;
            tmp_0 = kClass;
          } else {
            tmp_0 = metadata.$kClass$;
          }
          tmp = tmp_0;
        } else {
          tmp = new SimpleKClassImpl(jClass);
        }
        return tmp;
      }
      function getKClassFromExpression(e) {
        var tmp$ret$3;
        {
          var tmp0_subject = typeof e;
          var tmp;
          switch (tmp0_subject) {
            case "string":
              tmp = PrimitiveClasses_getInstance().stringClass_1;
              break;
            case "number":
              var tmp_0;
              var tmp$ret$0;
              {
                var tmp0_asDynamic = jsBitwiseOr(e, 0);
                tmp$ret$0 = tmp0_asDynamic;
              }
              if (tmp$ret$0 === e) {
                tmp_0 = PrimitiveClasses_getInstance().intClass_1;
              } else {
                tmp_0 = PrimitiveClasses_getInstance().doubleClass_1;
              }
              tmp = tmp_0;
              break;
            case "boolean":
              tmp = PrimitiveClasses_getInstance().booleanClass_1;
              break;
            case "function":
              var tmp_1 = PrimitiveClasses_getInstance();
              var tmp$ret$1;
              {
                tmp$ret$1 = e;
              }
              tmp = tmp_1.functionClass(tmp$ret$1.length);
              break;
            default:
              var tmp_2;
              if (isBooleanArray(e)) {
                tmp_2 = PrimitiveClasses_getInstance().booleanArrayClass_1;
              } else {
                if (isCharArray(e)) {
                  tmp_2 = PrimitiveClasses_getInstance().charArrayClass_1;
                } else {
                  if (isByteArray(e)) {
                    tmp_2 = PrimitiveClasses_getInstance().byteArrayClass_1;
                  } else {
                    if (isShortArray(e)) {
                      tmp_2 = PrimitiveClasses_getInstance().shortArrayClass_1;
                    } else {
                      if (isIntArray(e)) {
                        tmp_2 = PrimitiveClasses_getInstance().intArrayClass_1;
                      } else {
                        if (isLongArray(e)) {
                          tmp_2 = PrimitiveClasses_getInstance().longArrayClass_1;
                        } else {
                          if (isFloatArray(e)) {
                            tmp_2 = PrimitiveClasses_getInstance().floatArrayClass_1;
                          } else {
                            if (isDoubleArray(e)) {
                              tmp_2 = PrimitiveClasses_getInstance().doubleArrayClass_1;
                            } else {
                              if (isInterface(e, KClass)) {
                                tmp_2 = getKClass(KClass);
                              } else {
                                if (isArray(e)) {
                                  tmp_2 = PrimitiveClasses_getInstance().arrayClass_1;
                                } else {
                                  var constructor = Object.getPrototypeOf(e).constructor;
                                  var tmp_3;
                                  if (constructor === Object) {
                                    tmp_3 = PrimitiveClasses_getInstance().anyClass_1;
                                  } else if (constructor === Error) {
                                    tmp_3 = PrimitiveClasses_getInstance().throwableClass_1;
                                  } else {
                                    var jsClass = constructor;
                                    tmp_3 = getKClass1(jsClass);
                                  }
                                  tmp_2 = tmp_3;
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
              tmp = tmp_2;
              break;
          }
          var tmp1_unsafeCast = tmp;
          var tmp$ret$2;
          {
            tmp$ret$2 = tmp1_unsafeCast;
          }
          tmp$ret$3 = tmp$ret$2;
        }
        return tmp$ret$3;
      }
      function Appendable() {
      }
      Appendable.$metadata$ = interfaceMeta("Appendable");
      function StringBuilder_init_$Init$(capacity, $this) {
        StringBuilder_init_$Init$_1($this);
        return $this;
      }
      function StringBuilder_init_$Create$(capacity) {
        return StringBuilder_init_$Init$(capacity, Object.create(StringBuilder.prototype));
      }
      function StringBuilder_init_$Init$_0(content, $this) {
        StringBuilder.call($this, toString_1(content));
        return $this;
      }
      function StringBuilder_init_$Create$_0(content) {
        return StringBuilder_init_$Init$_0(content, Object.create(StringBuilder.prototype));
      }
      function StringBuilder_init_$Init$_1($this) {
        StringBuilder.call($this, "");
        return $this;
      }
      function StringBuilder_init_$Create$_1() {
        return StringBuilder_init_$Init$_1(Object.create(StringBuilder.prototype));
      }
      function _set_string__57jj1i($this, _set____db54di) {
        $this.string_1 = _set____db54di;
      }
      function _get_string__6oa3oa($this) {
        return $this.string_1;
      }
      function checkReplaceRange($this, startIndex, endIndex, length3) {
        if (startIndex < 0 ? true : startIndex > length3) {
          throw IndexOutOfBoundsException_init_$Create$_0("startIndex: " + startIndex + ", length: " + length3);
        }
        if (startIndex > endIndex) {
          throw IllegalArgumentException_init_$Create$_0("startIndex(" + startIndex + ") > endIndex(" + endIndex + ")");
        }
      }
      function StringBuilder(content) {
        this.string_1 = !(content === void 0) ? content : "";
      }
      StringBuilder.prototype.get_length_g42xv3_k$ = function() {
        var tmp$ret$0;
        {
          var tmp0_asDynamic = this.string_1;
          tmp$ret$0 = tmp0_asDynamic;
        }
        return tmp$ret$0.length;
      };
      StringBuilder.prototype.get_a7b70_k$ = function(index3) {
        var tmp$ret$0;
        {
          var tmp0_getOrElse = this.string_1;
          var tmp;
          if (index3 >= 0 ? index3 <= get_lastIndex_7(tmp0_getOrElse) : false) {
            tmp = charSequenceGet(tmp0_getOrElse, index3);
          } else {
            throw IndexOutOfBoundsException_init_$Create$_0("index: " + index3 + ", length: " + this.get_length_g42xv3_k$() + "}");
          }
          tmp$ret$0 = tmp;
        }
        return tmp$ret$0;
      };
      StringBuilder.prototype.subSequence_5fh70h_k$ = function(startIndex, endIndex) {
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(startIndex, endIndex);
        }
        return tmp$ret$1;
      };
      StringBuilder.prototype.append_t8oh9e_k$ = function(value) {
        var tmp0_this = this;
        tmp0_this.string_1 = tmp0_this.string_1 + new Char_0(value);
        return this;
      };
      StringBuilder.prototype.append_oz4qxs_k$ = function(value) {
        var tmp0_this = this;
        tmp0_this.string_1 = tmp0_this.string_1 + toString_0(value);
        return this;
      };
      StringBuilder.prototype.append_tbojcw_k$ = function(value, startIndex, endIndex) {
        var tmp0_elvis_lhs = value;
        return this.appendRange_mncs5k_k$(tmp0_elvis_lhs == null ? "null" : tmp0_elvis_lhs, startIndex, endIndex);
      };
      StringBuilder.prototype.reverse_i6tiw2_k$ = function() {
        var reversed2 = "";
        var index3 = this.string_1.length - 1 | 0;
        while (index3 >= 0) {
          var tmp = this.string_1;
          var tmp0 = index3;
          index3 = tmp0 - 1 | 0;
          var low = charSequenceGet(tmp, tmp0);
          if (isLowSurrogate(low) ? index3 >= 0 : false) {
            var tmp_0 = this.string_1;
            var tmp1 = index3;
            index3 = tmp1 - 1 | 0;
            var high = charSequenceGet(tmp_0, tmp1);
            if (isHighSurrogate(high)) {
              reversed2 = reversed2 + new Char_0(high) + new Char_0(low);
            } else {
              reversed2 = reversed2 + new Char_0(low) + new Char_0(high);
            }
          } else {
            reversed2 = reversed2 + new Char_0(low);
          }
        }
        this.string_1 = reversed2;
        return this;
      };
      StringBuilder.prototype.append_t8pm91_k$ = function(value) {
        var tmp0_this = this;
        tmp0_this.string_1 = tmp0_this.string_1 + toString_0(value);
        return this;
      };
      StringBuilder.prototype.append_a1id5s_k$ = function(value) {
        var tmp0_this = this;
        tmp0_this.string_1 = tmp0_this.string_1 + value;
        return this;
      };
      StringBuilder.prototype.append_18hb2z_k$ = function(value) {
        var tmp0_this = this;
        tmp0_this.string_1 = tmp0_this.string_1 + concatToString(value);
        return this;
      };
      StringBuilder.prototype.append_zar6u1_k$ = function(value) {
        return this.append_ssq29y_k$(value);
      };
      StringBuilder.prototype.append_ssq29y_k$ = function(value) {
        var tmp0_this = this;
        var tmp = tmp0_this;
        var tmp_0 = tmp0_this.string_1;
        var tmp1_elvis_lhs = value;
        tmp.string_1 = tmp_0 + (tmp1_elvis_lhs == null ? "null" : tmp1_elvis_lhs);
        return this;
      };
      StringBuilder.prototype.capacity_14dpom_k$ = function() {
        return this.get_length_g42xv3_k$();
      };
      StringBuilder.prototype.ensureCapacity_ignus8_k$ = function(minimumCapacity) {
      };
      StringBuilder.prototype.indexOf_kdecvs_k$ = function(string) {
        var tmp$ret$0;
        {
          var tmp0_asDynamic = this.string_1;
          tmp$ret$0 = tmp0_asDynamic;
        }
        return tmp$ret$0.indexOf(string);
      };
      StringBuilder.prototype.indexOf_sxnkg7_k$ = function(string, startIndex) {
        var tmp$ret$0;
        {
          var tmp0_asDynamic = this.string_1;
          tmp$ret$0 = tmp0_asDynamic;
        }
        return tmp$ret$0.indexOf(string, startIndex);
      };
      StringBuilder.prototype.lastIndexOf_my1yge_k$ = function(string) {
        var tmp$ret$0;
        {
          var tmp0_asDynamic = this.string_1;
          tmp$ret$0 = tmp0_asDynamic;
        }
        return tmp$ret$0.lastIndexOf(string);
      };
      StringBuilder.prototype.lastIndexOf_4awwhb_k$ = function(string, startIndex) {
        var tmp;
        var tmp$ret$0;
        {
          tmp$ret$0 = charSequenceLength(string) === 0;
        }
        if (tmp$ret$0) {
          tmp = startIndex < 0;
        } else {
          tmp = false;
        }
        if (tmp)
          return -1;
        var tmp$ret$1;
        {
          var tmp0_asDynamic = this.string_1;
          tmp$ret$1 = tmp0_asDynamic;
        }
        return tmp$ret$1.lastIndexOf(string, startIndex);
      };
      StringBuilder.prototype.insert_ho1wgi_k$ = function(index3, value) {
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, this.get_length_g42xv3_k$());
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(0, index3);
        }
        var tmp_0 = tmp$ret$1 + value;
        var tmp$ret$3;
        {
          var tmp1_substring = this.string_1;
          var tmp$ret$2;
          {
            tmp$ret$2 = tmp1_substring;
          }
          tmp$ret$3 = tmp$ret$2.substring(index3);
        }
        tmp.string_1 = tmp_0 + tmp$ret$3;
        return this;
      };
      StringBuilder.prototype.insert_5hk2j8_k$ = function(index3, value) {
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, this.get_length_g42xv3_k$());
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(0, index3);
        }
        var tmp_0 = tmp$ret$1 + new Char_0(value);
        var tmp$ret$3;
        {
          var tmp1_substring = this.string_1;
          var tmp$ret$2;
          {
            tmp$ret$2 = tmp1_substring;
          }
          tmp$ret$3 = tmp$ret$2.substring(index3);
        }
        tmp.string_1 = tmp_0 + tmp$ret$3;
        return this;
      };
      StringBuilder.prototype.insert_5yqhyr_k$ = function(index3, value) {
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, this.get_length_g42xv3_k$());
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(0, index3);
        }
        var tmp_0 = tmp$ret$1 + concatToString(value);
        var tmp$ret$3;
        {
          var tmp1_substring = this.string_1;
          var tmp$ret$2;
          {
            tmp$ret$2 = tmp1_substring;
          }
          tmp$ret$3 = tmp$ret$2.substring(index3);
        }
        tmp.string_1 = tmp_0 + tmp$ret$3;
        return this;
      };
      StringBuilder.prototype.insert_xsudoy_k$ = function(index3, value) {
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, this.get_length_g42xv3_k$());
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(0, index3);
        }
        var tmp_0 = tmp$ret$1 + toString_0(value);
        var tmp$ret$3;
        {
          var tmp1_substring = this.string_1;
          var tmp$ret$2;
          {
            tmp$ret$2 = tmp1_substring;
          }
          tmp$ret$3 = tmp$ret$2.substring(index3);
        }
        tmp.string_1 = tmp_0 + tmp$ret$3;
        return this;
      };
      StringBuilder.prototype.insert_5hl7iv_k$ = function(index3, value) {
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, this.get_length_g42xv3_k$());
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(0, index3);
        }
        var tmp_0 = tmp$ret$1 + toString_0(value);
        var tmp$ret$3;
        {
          var tmp1_substring = this.string_1;
          var tmp$ret$2;
          {
            tmp$ret$2 = tmp1_substring;
          }
          tmp$ret$3 = tmp$ret$2.substring(index3);
        }
        tmp.string_1 = tmp_0 + tmp$ret$3;
        return this;
      };
      StringBuilder.prototype.insert_9mtcpl_k$ = function(index3, value) {
        return this.insert_eitq2w_k$(index3, value);
      };
      StringBuilder.prototype.insert_eitq2w_k$ = function(index3, value) {
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, this.get_length_g42xv3_k$());
        var tmp0_elvis_lhs = value;
        var toInsert = tmp0_elvis_lhs == null ? "null" : tmp0_elvis_lhs;
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(0, index3);
        }
        var tmp_0 = tmp$ret$1 + toInsert;
        var tmp$ret$3;
        {
          var tmp1_substring = this.string_1;
          var tmp$ret$2;
          {
            tmp$ret$2 = tmp1_substring;
          }
          tmp$ret$3 = tmp$ret$2.substring(index3);
        }
        tmp.string_1 = tmp_0 + tmp$ret$3;
        return this;
      };
      StringBuilder.prototype.setLength_kzn4fs_k$ = function(newLength) {
        if (newLength < 0) {
          throw IllegalArgumentException_init_$Create$_0("Negative new length: " + newLength + ".");
        }
        if (newLength <= this.get_length_g42xv3_k$()) {
          var tmp = this;
          var tmp$ret$1;
          {
            var tmp0_substring = this.string_1;
            var tmp$ret$0;
            {
              tmp$ret$0 = tmp0_substring;
            }
            tmp$ret$1 = tmp$ret$0.substring(0, newLength);
          }
          tmp.string_1 = tmp$ret$1;
        } else {
          var inductionVariable = this.get_length_g42xv3_k$();
          if (inductionVariable < newLength)
            do {
              var i = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              var tmp1_this = this;
              tmp1_this.string_1 = tmp1_this.string_1 + new Char_0(_Char___init__impl__6a9atx(0));
            } while (inductionVariable < newLength);
        }
      };
      StringBuilder.prototype.substring_ile4mo_k$ = function(startIndex) {
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(startIndex, this.get_length_g42xv3_k$());
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(startIndex);
        }
        return tmp$ret$1;
      };
      StringBuilder.prototype.substring_8we4nj_k$ = function(startIndex, endIndex) {
        Companion_getInstance().checkBoundsIndexes_7787d9_k$(startIndex, endIndex, this.get_length_g42xv3_k$());
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(startIndex, endIndex);
        }
        return tmp$ret$1;
      };
      StringBuilder.prototype.trimToSize_dnhilv_k$ = function() {
      };
      StringBuilder.prototype.toString = function() {
        return this.string_1;
      };
      StringBuilder.prototype.clear_1keqml_k$ = function() {
        this.string_1 = "";
        return this;
      };
      StringBuilder.prototype.set_jo4zce_k$ = function(index3, value) {
        Companion_getInstance().checkElementIndex_ux0wz1_k$(index3, this.get_length_g42xv3_k$());
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(0, index3);
        }
        var tmp_0 = tmp$ret$1 + new Char_0(value);
        var tmp$ret$3;
        {
          var tmp1_substring = this.string_1;
          var tmp2_substring = index3 + 1 | 0;
          var tmp$ret$2;
          {
            tmp$ret$2 = tmp1_substring;
          }
          tmp$ret$3 = tmp$ret$2.substring(tmp2_substring);
        }
        tmp.string_1 = tmp_0 + tmp$ret$3;
      };
      StringBuilder.prototype.setRange_l2ldi2_k$ = function(startIndex, endIndex, value) {
        checkReplaceRange(this, startIndex, endIndex, this.get_length_g42xv3_k$());
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(0, startIndex);
        }
        var tmp_0 = tmp$ret$1 + value;
        var tmp$ret$3;
        {
          var tmp1_substring = this.string_1;
          var tmp$ret$2;
          {
            tmp$ret$2 = tmp1_substring;
          }
          tmp$ret$3 = tmp$ret$2.substring(endIndex);
        }
        tmp.string_1 = tmp_0 + tmp$ret$3;
        return this;
      };
      StringBuilder.prototype.deleteAt_w9fbwd_k$ = function(index3) {
        Companion_getInstance().checkElementIndex_ux0wz1_k$(index3, this.get_length_g42xv3_k$());
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(0, index3);
        }
        var tmp_0 = tmp$ret$1;
        var tmp$ret$3;
        {
          var tmp1_substring = this.string_1;
          var tmp2_substring = index3 + 1 | 0;
          var tmp$ret$2;
          {
            tmp$ret$2 = tmp1_substring;
          }
          tmp$ret$3 = tmp$ret$2.substring(tmp2_substring);
        }
        tmp.string_1 = tmp_0 + tmp$ret$3;
        return this;
      };
      StringBuilder.prototype.deleteRange_ih0baq_k$ = function(startIndex, endIndex) {
        checkReplaceRange(this, startIndex, endIndex, this.get_length_g42xv3_k$());
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(0, startIndex);
        }
        var tmp_0 = tmp$ret$1;
        var tmp$ret$3;
        {
          var tmp1_substring = this.string_1;
          var tmp$ret$2;
          {
            tmp$ret$2 = tmp1_substring;
          }
          tmp$ret$3 = tmp$ret$2.substring(endIndex);
        }
        tmp.string_1 = tmp_0 + tmp$ret$3;
        return this;
      };
      StringBuilder.prototype.toCharArray_h4xf4t_k$ = function(destination, destinationOffset, startIndex, endIndex) {
        Companion_getInstance().checkBoundsIndexes_7787d9_k$(startIndex, endIndex, this.get_length_g42xv3_k$());
        Companion_getInstance().checkBoundsIndexes_7787d9_k$(destinationOffset, (destinationOffset + endIndex | 0) - startIndex | 0, destination.length);
        var dstIndex = destinationOffset;
        var inductionVariable = startIndex;
        if (inductionVariable < endIndex)
          do {
            var index3 = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp1 = dstIndex;
            dstIndex = tmp1 + 1 | 0;
            destination[tmp1] = charSequenceGet(this.string_1, index3);
          } while (inductionVariable < endIndex);
      };
      StringBuilder.prototype.toCharArray$default_x03qyo_k$ = function(destination, destinationOffset, startIndex, endIndex, $mask0, $handler) {
        if (!(($mask0 & 2) === 0))
          destinationOffset = 0;
        if (!(($mask0 & 4) === 0))
          startIndex = 0;
        if (!(($mask0 & 8) === 0))
          endIndex = this.get_length_g42xv3_k$();
        return this.toCharArray_h4xf4t_k$(destination, destinationOffset, startIndex, endIndex);
      };
      StringBuilder.prototype.appendRange_wizxgy_k$ = function(value, startIndex, endIndex) {
        var tmp0_this = this;
        tmp0_this.string_1 = tmp0_this.string_1 + concatToString_0(value, startIndex, endIndex);
        return this;
      };
      StringBuilder.prototype.appendRange_mncs5k_k$ = function(value, startIndex, endIndex) {
        var stringCsq = toString_1(value);
        Companion_getInstance().checkBoundsIndexes_7787d9_k$(startIndex, endIndex, stringCsq.length);
        var tmp0_this = this;
        var tmp = tmp0_this;
        var tmp_0 = tmp0_this.string_1;
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = stringCsq;
          }
          tmp$ret$1 = tmp$ret$0.substring(startIndex, endIndex);
        }
        tmp.string_1 = tmp_0 + tmp$ret$1;
        return this;
      };
      StringBuilder.prototype.insertRange_livkg8_k$ = function(index3, value, startIndex, endIndex) {
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, this.get_length_g42xv3_k$());
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(0, index3);
        }
        var tmp_0 = tmp$ret$1 + concatToString_0(value, startIndex, endIndex);
        var tmp$ret$3;
        {
          var tmp1_substring = this.string_1;
          var tmp$ret$2;
          {
            tmp$ret$2 = tmp1_substring;
          }
          tmp$ret$3 = tmp$ret$2.substring(index3);
        }
        tmp.string_1 = tmp_0 + tmp$ret$3;
        return this;
      };
      StringBuilder.prototype.insertRange_rqhb2a_k$ = function(index3, value, startIndex, endIndex) {
        Companion_getInstance().checkPositionIndex_kxpgsw_k$(index3, this.get_length_g42xv3_k$());
        var stringCsq = toString_1(value);
        Companion_getInstance().checkBoundsIndexes_7787d9_k$(startIndex, endIndex, stringCsq.length);
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp0_substring = this.string_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_substring;
          }
          tmp$ret$1 = tmp$ret$0.substring(0, index3);
        }
        var tmp_0 = tmp$ret$1;
        var tmp$ret$3;
        {
          var tmp$ret$2;
          {
            tmp$ret$2 = stringCsq;
          }
          tmp$ret$3 = tmp$ret$2.substring(startIndex, endIndex);
        }
        var tmp_1 = tmp_0 + tmp$ret$3;
        var tmp$ret$5;
        {
          var tmp1_substring = this.string_1;
          var tmp$ret$4;
          {
            tmp$ret$4 = tmp1_substring;
          }
          tmp$ret$5 = tmp$ret$4.substring(index3);
        }
        tmp.string_1 = tmp_1 + tmp$ret$5;
        return this;
      };
      StringBuilder.$metadata$ = classMeta("StringBuilder", [Appendable, CharSequence]);
      function uppercaseChar(_this__u8e3s4) {
        var tmp$ret$2;
        {
          var tmp$ret$1;
          {
            var tmp$ret$0;
            {
              var tmp0_asDynamic = toString(_this__u8e3s4);
              tmp$ret$0 = tmp0_asDynamic;
            }
            var tmp1_unsafeCast = tmp$ret$0.toUpperCase();
            tmp$ret$1 = tmp1_unsafeCast;
          }
          tmp$ret$2 = tmp$ret$1;
        }
        var uppercase2 = tmp$ret$2;
        return uppercase2.length > 1 ? _this__u8e3s4 : charSequenceGet(uppercase2, 0);
      }
      function lowercaseChar(_this__u8e3s4) {
        var tmp$ret$2;
        {
          var tmp$ret$1;
          {
            var tmp$ret$0;
            {
              var tmp0_asDynamic = toString(_this__u8e3s4);
              tmp$ret$0 = tmp0_asDynamic;
            }
            var tmp1_unsafeCast = tmp$ret$0.toLowerCase();
            tmp$ret$1 = tmp1_unsafeCast;
          }
          tmp$ret$2 = tmp$ret$1;
        }
        return charSequenceGet(tmp$ret$2, 0);
      }
      function uppercase(_this__u8e3s4) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            var tmp0_asDynamic = toString(_this__u8e3s4);
            tmp$ret$0 = tmp0_asDynamic;
          }
          var tmp1_unsafeCast = tmp$ret$0.toUpperCase();
          tmp$ret$1 = tmp1_unsafeCast;
        }
        return tmp$ret$1;
      }
      function lowercase(_this__u8e3s4) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            var tmp0_asDynamic = toString(_this__u8e3s4);
            tmp$ret$0 = tmp0_asDynamic;
          }
          var tmp1_unsafeCast = tmp$ret$0.toLowerCase();
          tmp$ret$1 = tmp1_unsafeCast;
        }
        return tmp$ret$1;
      }
      function isLowSurrogate(_this__u8e3s4) {
        Companion_getInstance_18();
        var containsLower = _Char___init__impl__6a9atx(56320);
        var tmp;
        Companion_getInstance_18();
        if (_this__u8e3s4 <= _Char___init__impl__6a9atx(57343)) {
          tmp = containsLower <= _this__u8e3s4;
        } else {
          tmp = false;
        }
        return tmp;
      }
      function isHighSurrogate(_this__u8e3s4) {
        Companion_getInstance_18();
        var containsLower = _Char___init__impl__6a9atx(55296);
        var tmp;
        Companion_getInstance_18();
        if (_this__u8e3s4 <= _Char___init__impl__6a9atx(56319)) {
          tmp = containsLower <= _this__u8e3s4;
        } else {
          tmp = false;
        }
        return tmp;
      }
      function checkRadix(radix) {
        if (!(2 <= radix ? radix <= 36 : false)) {
          throw IllegalArgumentException_init_$Create$_0("radix " + radix + " was not in valid range 2..36");
        }
        return radix;
      }
      function get_STRING_CASE_INSENSITIVE_ORDER() {
        init_properties_string_kt_z8k4s7();
        return STRING_CASE_INSENSITIVE_ORDER;
      }
      var STRING_CASE_INSENSITIVE_ORDER;
      function nativeLastIndexOf(_this__u8e3s4, str, fromIndex) {
        init_properties_string_kt_z8k4s7();
        var tmp$ret$0;
        {
          tmp$ret$0 = _this__u8e3s4;
        }
        return tmp$ret$0.lastIndexOf(str, fromIndex);
      }
      function substring(_this__u8e3s4, startIndex, endIndex) {
        init_properties_string_kt_z8k4s7();
        var tmp$ret$0;
        {
          tmp$ret$0 = _this__u8e3s4;
        }
        return tmp$ret$0.substring(startIndex, endIndex);
      }
      function substring_0(_this__u8e3s4, startIndex) {
        init_properties_string_kt_z8k4s7();
        var tmp$ret$0;
        {
          tmp$ret$0 = _this__u8e3s4;
        }
        return tmp$ret$0.substring(startIndex);
      }
      function compareTo(_this__u8e3s4, other, ignoreCase) {
        init_properties_string_kt_z8k4s7();
        if (ignoreCase) {
          var n1 = _this__u8e3s4.length;
          var n2 = other.length;
          var tmp$ret$0;
          {
            tmp$ret$0 = Math.min(n1, n2);
          }
          var min5 = tmp$ret$0;
          if (min5 === 0)
            return n1 - n2 | 0;
          var inductionVariable = 0;
          if (inductionVariable < min5)
            do {
              var index3 = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              var thisChar = charSequenceGet(_this__u8e3s4, index3);
              var otherChar = charSequenceGet(other, index3);
              if (!equals(new Char_0(thisChar), new Char_0(otherChar))) {
                thisChar = uppercaseChar(thisChar);
                otherChar = uppercaseChar(otherChar);
                if (!equals(new Char_0(thisChar), new Char_0(otherChar))) {
                  var tmp$ret$4;
                  {
                    var tmp0_lowercaseChar = thisChar;
                    var tmp$ret$3;
                    {
                      var tmp$ret$2;
                      {
                        var tmp$ret$1;
                        {
                          var tmp0_asDynamic = toString(tmp0_lowercaseChar);
                          tmp$ret$1 = tmp0_asDynamic;
                        }
                        var tmp1_unsafeCast = tmp$ret$1.toLowerCase();
                        tmp$ret$2 = tmp1_unsafeCast;
                      }
                      tmp$ret$3 = tmp$ret$2;
                    }
                    tmp$ret$4 = charSequenceGet(tmp$ret$3, 0);
                  }
                  thisChar = tmp$ret$4;
                  var tmp$ret$8;
                  {
                    var tmp1_lowercaseChar = otherChar;
                    var tmp$ret$7;
                    {
                      var tmp$ret$6;
                      {
                        var tmp$ret$5;
                        {
                          var tmp0_asDynamic_0 = toString(tmp1_lowercaseChar);
                          tmp$ret$5 = tmp0_asDynamic_0;
                        }
                        var tmp1_unsafeCast_0 = tmp$ret$5.toLowerCase();
                        tmp$ret$6 = tmp1_unsafeCast_0;
                      }
                      tmp$ret$7 = tmp$ret$6;
                    }
                    tmp$ret$8 = charSequenceGet(tmp$ret$7, 0);
                  }
                  otherChar = tmp$ret$8;
                  if (!equals(new Char_0(thisChar), new Char_0(otherChar))) {
                    return Char__compareTo_impl_ypi4mb(thisChar, otherChar);
                  }
                }
              }
            } while (inductionVariable < min5);
          return n1 - n2 | 0;
        } else {
          return compareTo_0(_this__u8e3s4, other);
        }
      }
      function compareTo$default(_this__u8e3s4, other, ignoreCase, $mask0, $handler) {
        if (!(($mask0 & 2) === 0))
          ignoreCase = false;
        return compareTo(_this__u8e3s4, other, ignoreCase);
      }
      function concatToString(_this__u8e3s4) {
        init_properties_string_kt_z8k4s7();
        var result = "";
        var indexedObject = _this__u8e3s4;
        var inductionVariable = 0;
        var last = indexedObject.length;
        while (inductionVariable < last) {
          var char = indexedObject[inductionVariable];
          inductionVariable = inductionVariable + 1 | 0;
          result = result + new Char_0(char);
        }
        return result;
      }
      function concatToString_0(_this__u8e3s4, startIndex, endIndex) {
        init_properties_string_kt_z8k4s7();
        Companion_getInstance().checkBoundsIndexes_7787d9_k$(startIndex, endIndex, _this__u8e3s4.length);
        var result = "";
        var inductionVariable = startIndex;
        if (inductionVariable < endIndex)
          do {
            var index3 = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            result = result + new Char_0(_this__u8e3s4[index3]);
          } while (inductionVariable < endIndex);
        return result;
      }
      function concatToString$default(_this__u8e3s4, startIndex, endIndex, $mask0, $handler) {
        if (!(($mask0 & 1) === 0))
          startIndex = 0;
        if (!(($mask0 & 2) === 0))
          endIndex = _this__u8e3s4.length;
        return concatToString_0(_this__u8e3s4, startIndex, endIndex);
      }
      function sam$kotlin_Comparator$0(function_0) {
        this.function_1 = function_0;
      }
      sam$kotlin_Comparator$0.prototype.compare_6tbigh_k$ = function(a3, b) {
        return this.function_1(a3, b);
      };
      sam$kotlin_Comparator$0.prototype.compare = function(a3, b) {
        return this.compare_6tbigh_k$(a3, b);
      };
      sam$kotlin_Comparator$0.$metadata$ = classMeta("sam$kotlin_Comparator$0", [Comparator]);
      function STRING_CASE_INSENSITIVE_ORDER$lambda() {
        return function(a3, b) {
          return compareTo(a3, b, true);
        };
      }
      var properties_initialized_string_kt_4g1sj;
      function init_properties_string_kt_z8k4s7() {
        if (properties_initialized_string_kt_4g1sj) {
        } else {
          properties_initialized_string_kt_4g1sj = true;
          var tmp = STRING_CASE_INSENSITIVE_ORDER$lambda();
          STRING_CASE_INSENSITIVE_ORDER = new sam$kotlin_Comparator$0(tmp);
        }
      }
      function get_REPLACEMENT_BYTE_SEQUENCE() {
        init_properties_utf8Encoding_kt_xjxnfa();
        return REPLACEMENT_BYTE_SEQUENCE;
      }
      var REPLACEMENT_BYTE_SEQUENCE;
      var properties_initialized_utf8Encoding_kt_eee1vq;
      function init_properties_utf8Encoding_kt_xjxnfa() {
        if (properties_initialized_utf8Encoding_kt_eee1vq) {
        } else {
          properties_initialized_utf8Encoding_kt_eee1vq = true;
          var tmp$ret$0;
          {
            var tmp0_byteArrayOf = new Int8Array([-17, -65, -67]);
            tmp$ret$0 = tmp0_byteArrayOf;
          }
          REPLACEMENT_BYTE_SEQUENCE = tmp$ret$0;
        }
      }
      function _Char___init__impl__6a9atx(value) {
        return value;
      }
      function _get_value__a43j40($this) {
        return $this;
      }
      function _Char___init__impl__6a9atx_0(code) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _UShort___get_data__impl__g0245(code) & 65535;
        }
        var tmp = _Char___init__impl__6a9atx(tmp$ret$0);
        return tmp;
      }
      function Char__compareTo_impl_ypi4mb($this, other) {
        return _get_value__a43j40($this) - _get_value__a43j40(other) | 0;
      }
      function Char__compareTo_impl_ypi4mb_0($this, other) {
        var tmp = $this.value_1;
        return Char__compareTo_impl_ypi4mb(tmp, other instanceof Char_0 ? other.value_1 : THROW_CCE());
      }
      function Char__plus_impl_qi7pgj($this, other) {
        return numberToChar(_get_value__a43j40($this) + other | 0);
      }
      function Char__minus_impl_a2frrh($this, other) {
        return _get_value__a43j40($this) - _get_value__a43j40(other) | 0;
      }
      function Char__minus_impl_a2frrh_0($this, other) {
        return numberToChar(_get_value__a43j40($this) - other | 0);
      }
      function Char__inc_impl_6e1wmz($this) {
        return numberToChar(_get_value__a43j40($this) + 1 | 0);
      }
      function Char__dec_impl_1ipdy9($this) {
        return numberToChar(_get_value__a43j40($this) - 1 | 0);
      }
      function Char__rangeTo_impl_tkncvp($this, other) {
        return new CharRange($this, other);
      }
      function Char__toByte_impl_7s7yt0($this) {
        return toByte(_get_value__a43j40($this));
      }
      function Char__toChar_impl_3h7tei($this) {
        return $this;
      }
      function Char__toShort_impl_7qagse($this) {
        return toShort(_get_value__a43j40($this));
      }
      function Char__toInt_impl_vasixd($this) {
        return _get_value__a43j40($this);
      }
      function Char__toLong_impl_r7eygw($this) {
        return toLong(_get_value__a43j40($this));
      }
      function Char__toFloat_impl_kl2gf6($this) {
        return _get_value__a43j40($this);
      }
      function Char__toDouble_impl_jaecy3($this) {
        return _get_value__a43j40($this);
      }
      function Char__equals_impl_x6719k($this, other) {
        if (!(other instanceof Char_0))
          return false;
        return _get_value__a43j40($this) === _get_value__a43j40(other.value_1);
      }
      function Char__hashCode_impl_otmys($this) {
        return _get_value__a43j40($this);
      }
      function toString($this) {
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = String.fromCharCode(_get_value__a43j40($this));
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return tmp$ret$0;
      }
      function Companion_18() {
        Companion_instance_18 = this;
        this.MIN_VALUE_1 = _Char___init__impl__6a9atx(0);
        this.MAX_VALUE_1 = _Char___init__impl__6a9atx(65535);
        this.MIN_HIGH_SURROGATE_1 = _Char___init__impl__6a9atx(55296);
        this.MAX_HIGH_SURROGATE_1 = _Char___init__impl__6a9atx(56319);
        this.MIN_LOW_SURROGATE_1 = _Char___init__impl__6a9atx(56320);
        this.MAX_LOW_SURROGATE_1 = _Char___init__impl__6a9atx(57343);
        this.MIN_SURROGATE_1 = _Char___init__impl__6a9atx(55296);
        this.MAX_SURROGATE_1 = _Char___init__impl__6a9atx(57343);
        this.SIZE_BYTES_1 = 2;
        this.SIZE_BITS_1 = 16;
      }
      Companion_18.prototype.get_MIN_VALUE_9yp2os_k$ = function() {
        return this.MIN_VALUE_1;
      };
      Companion_18.prototype.get_MAX_VALUE_blimwe_k$ = function() {
        return this.MAX_VALUE_1;
      };
      Companion_18.prototype.get_MIN_HIGH_SURROGATE_t7mej6_k$ = function() {
        return this.MIN_HIGH_SURROGATE_1;
      };
      Companion_18.prototype.get_MAX_HIGH_SURROGATE_eb6erk_k$ = function() {
        return this.MAX_HIGH_SURROGATE_1;
      };
      Companion_18.prototype.get_MIN_LOW_SURROGATE_mxezgo_k$ = function() {
        return this.MIN_LOW_SURROGATE_1;
      };
      Companion_18.prototype.get_MAX_LOW_SURROGATE_gwteoa_k$ = function() {
        return this.MAX_LOW_SURROGATE_1;
      };
      Companion_18.prototype.get_MIN_SURROGATE_6vpmm5_k$ = function() {
        return this.MIN_SURROGATE_1;
      };
      Companion_18.prototype.get_MAX_SURROGATE_r8jfhn_k$ = function() {
        return this.MAX_SURROGATE_1;
      };
      Companion_18.prototype.get_SIZE_BYTES_qphg4q_k$ = function() {
        return this.SIZE_BYTES_1;
      };
      Companion_18.prototype.get_SIZE_BITS_7qhjj9_k$ = function() {
        return this.SIZE_BITS_1;
      };
      Companion_18.$metadata$ = objectMeta("Companion");
      var Companion_instance_18;
      function Companion_getInstance_18() {
        if (Companion_instance_18 == null)
          new Companion_18();
        return Companion_instance_18;
      }
      function Char_0(value) {
        Companion_getInstance_18();
        this.value_1 = value;
      }
      Char_0.prototype.compareTo_n49u4k_k$ = function(other) {
        return Char__compareTo_impl_ypi4mb(this.value_1, other);
      };
      Char_0.prototype.compareTo_6thzaj_k$ = function(other) {
        return Char__compareTo_impl_ypi4mb_0(this, other);
      };
      Char_0.prototype.equals = function(other) {
        return Char__equals_impl_x6719k(this.value_1, other);
      };
      Char_0.prototype.hashCode = function() {
        return Char__hashCode_impl_otmys(this.value_1);
      };
      Char_0.prototype.toString = function() {
        return toString(this.value_1);
      };
      Char_0.$metadata$ = classMeta("Char", [Comparable]);
      function Iterable() {
      }
      Iterable.$metadata$ = interfaceMeta("Iterable");
      function MutableList() {
      }
      MutableList.$metadata$ = interfaceMeta("MutableList", [List, MutableCollection]);
      function Collection() {
      }
      Collection.$metadata$ = interfaceMeta("Collection", [Iterable]);
      function List() {
      }
      List.$metadata$ = interfaceMeta("List", [Collection]);
      function MutableCollection() {
      }
      MutableCollection.$metadata$ = interfaceMeta("MutableCollection", [Collection, MutableIterable]);
      function MutableIterable() {
      }
      MutableIterable.$metadata$ = interfaceMeta("MutableIterable", [Iterable]);
      function Set2() {
      }
      Set2.$metadata$ = interfaceMeta("Set", [Collection]);
      function Entry() {
      }
      Entry.$metadata$ = interfaceMeta("Entry");
      function Map2() {
      }
      Map2.$metadata$ = interfaceMeta("Map");
      function MutableSet() {
      }
      MutableSet.$metadata$ = interfaceMeta("MutableSet", [Set2, MutableCollection]);
      function MutableEntry() {
      }
      MutableEntry.$metadata$ = interfaceMeta("MutableEntry", [Entry]);
      function MutableMap() {
      }
      MutableMap.$metadata$ = interfaceMeta("MutableMap", [Map2]);
      function Companion_19() {
        Companion_instance_19 = this;
      }
      Companion_19.$metadata$ = objectMeta("Companion");
      var Companion_instance_19;
      function Companion_getInstance_19() {
        if (Companion_instance_19 == null)
          new Companion_19();
        return Companion_instance_19;
      }
      function Enum(name, ordinal2) {
        Companion_getInstance_19();
        this.name_1 = name;
        this.ordinal_1 = ordinal2;
      }
      Enum.prototype.get_name_woqyms_k$ = function() {
        return this.name_1;
      };
      Enum.prototype.get_ordinal_ip24qg_k$ = function() {
        return this.ordinal_1;
      };
      Enum.prototype.compareTo_6thzay_k$ = function(other) {
        return compareTo_0(this.ordinal_1, other.ordinal_1);
      };
      Enum.prototype.compareTo_6thzaj_k$ = function(other) {
        return this.compareTo_6thzay_k$(other instanceof Enum ? other : THROW_CCE());
      };
      Enum.prototype.equals = function(other) {
        return this === other;
      };
      Enum.prototype.hashCode = function() {
        return identityHashCode(this);
      };
      Enum.prototype.toString = function() {
        return this.name_1;
      };
      Enum.$metadata$ = classMeta("Enum", [Comparable]);
      function byteArrayOf(elements) {
        return elements;
      }
      function arrayOf(elements) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = elements;
          }
          tmp$ret$1 = tmp$ret$0;
        }
        return tmp$ret$1;
      }
      function intArrayOf(elements) {
        return elements;
      }
      function doubleArrayOf(elements) {
        return elements;
      }
      function toString_0(_this__u8e3s4) {
        var tmp0_safe_receiver = _this__u8e3s4;
        var tmp1_elvis_lhs = tmp0_safe_receiver == null ? null : toString_1(tmp0_safe_receiver);
        return tmp1_elvis_lhs == null ? "null" : tmp1_elvis_lhs;
      }
      function plus_0(_this__u8e3s4, other) {
        var tmp2_safe_receiver = _this__u8e3s4;
        var tmp3_elvis_lhs = tmp2_safe_receiver == null ? null : toString_1(tmp2_safe_receiver);
        var tmp = tmp3_elvis_lhs == null ? "null" : tmp3_elvis_lhs;
        var tmp0_safe_receiver = other;
        var tmp1_elvis_lhs = tmp0_safe_receiver == null ? null : toString_1(tmp0_safe_receiver);
        return tmp + (tmp1_elvis_lhs == null ? "null" : tmp1_elvis_lhs);
      }
      function DefaultConstructorMarker() {
        DefaultConstructorMarker_instance = this;
      }
      DefaultConstructorMarker.$metadata$ = objectMeta("DefaultConstructorMarker");
      var DefaultConstructorMarker_instance;
      function DefaultConstructorMarker_getInstance() {
        if (DefaultConstructorMarker_instance == null)
          new DefaultConstructorMarker();
        return DefaultConstructorMarker_instance;
      }
      function fillArrayVal(array3, initValue) {
        var inductionVariable = 0;
        var last = array3.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            array3[i] = initValue;
          } while (!(i === last));
        return array3;
      }
      function arrayWithFun(size2, init2) {
        var tmp$ret$1;
        {
          var tmp0_fillArrayFun = Array(size2);
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_fillArrayFun;
          }
          var result = tmp$ret$0;
          var i = 0;
          while (!(i === result.length)) {
            result[i] = init2(i);
            i = i + 1 | 0;
          }
          tmp$ret$1 = result;
        }
        return tmp$ret$1;
      }
      function fillArrayFun(array3, init2) {
        var tmp$ret$0;
        {
          tmp$ret$0 = array3;
        }
        var result = tmp$ret$0;
        var i = 0;
        while (!(i === result.length)) {
          result[i] = init2(i);
          i = i + 1 | 0;
        }
        return result;
      }
      function arrayIterator(array3) {
        return new arrayIterator$1(array3);
      }
      function booleanArrayIterator(array3) {
        return new booleanArrayIterator$1(array3);
      }
      function charArrayIterator(array3) {
        return new charArrayIterator$1(array3);
      }
      function byteArrayIterator(array3) {
        return new byteArrayIterator$1(array3);
      }
      function shortArrayIterator(array3) {
        return new shortArrayIterator$1(array3);
      }
      function intArrayIterator(array3) {
        return new intArrayIterator$1(array3);
      }
      function floatArrayIterator(array3) {
        return new floatArrayIterator$1(array3);
      }
      function longArrayIterator(array3) {
        return new longArrayIterator$1(array3);
      }
      function doubleArrayIterator(array3) {
        return new doubleArrayIterator$1(array3);
      }
      function booleanArray(size2) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            var tmp0_withType = fillArrayVal(Array(size2), false);
            tmp0_withType.$type$ = "BooleanArray";
            tmp$ret$0 = tmp0_withType;
          }
          var tmp1_unsafeCast = tmp$ret$0;
          tmp$ret$1 = tmp1_unsafeCast;
        }
        return tmp$ret$1;
      }
      function charArray(size2) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            var tmp0_withType = new Uint16Array(size2);
            tmp0_withType.$type$ = "CharArray";
            tmp$ret$0 = tmp0_withType;
          }
          var tmp1_unsafeCast = tmp$ret$0;
          tmp$ret$1 = tmp1_unsafeCast;
        }
        return tmp$ret$1;
      }
      function longArray(size2) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            var tmp0_withType = fillArrayVal(Array(size2), new Long(0, 0));
            tmp0_withType.$type$ = "LongArray";
            tmp$ret$0 = tmp0_withType;
          }
          var tmp1_unsafeCast = tmp$ret$0;
          tmp$ret$1 = tmp1_unsafeCast;
        }
        return tmp$ret$1;
      }
      function booleanArrayOf(arr) {
        var tmp$ret$2;
        {
          var tmp$ret$1;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = arr;
            }
            var tmp0_withType = tmp$ret$0.slice();
            tmp0_withType.$type$ = "BooleanArray";
            tmp$ret$1 = tmp0_withType;
          }
          var tmp1_unsafeCast = tmp$ret$1;
          tmp$ret$2 = tmp1_unsafeCast;
        }
        return tmp$ret$2;
      }
      function charArrayOf(arr) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            var tmp0_withType = new Uint16Array(arr);
            tmp0_withType.$type$ = "CharArray";
            tmp$ret$0 = tmp0_withType;
          }
          var tmp1_unsafeCast = tmp$ret$0;
          tmp$ret$1 = tmp1_unsafeCast;
        }
        return tmp$ret$1;
      }
      function longArrayOf(arr) {
        var tmp$ret$2;
        {
          var tmp$ret$1;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = arr;
            }
            var tmp0_withType = tmp$ret$0.slice();
            tmp0_withType.$type$ = "LongArray";
            tmp$ret$1 = tmp0_withType;
          }
          var tmp1_unsafeCast = tmp$ret$1;
          tmp$ret$2 = tmp1_unsafeCast;
        }
        return tmp$ret$2;
      }
      function arrayIterator$1($array) {
        this.$array_1 = $array;
        this.index_1 = 0;
      }
      arrayIterator$1.prototype.set_index_eknhut_k$ = function(_set____db54di) {
        this.index_1 = _set____db54di;
      };
      arrayIterator$1.prototype.get_index_it478p_k$ = function() {
        return this.index_1;
      };
      arrayIterator$1.prototype.hasNext_bitz1p_k$ = function() {
        return !(this.index_1 === this.$array_1.length);
      };
      arrayIterator$1.prototype.next_20eer_k$ = function() {
        var tmp;
        if (!(this.index_1 === this.$array_1.length)) {
          var tmp0_this = this;
          var tmp1 = tmp0_this.index_1;
          tmp0_this.index_1 = tmp1 + 1 | 0;
          tmp = this.$array_1[tmp1];
        } else {
          throw NoSuchElementException_init_$Create$_0("" + this.index_1);
        }
        return tmp;
      };
      arrayIterator$1.$metadata$ = classMeta(void 0, [Iterator_3]);
      function booleanArrayIterator$1($array) {
        this.$array_1 = $array;
        BooleanIterator.call(this);
        this.index_1 = 0;
      }
      booleanArrayIterator$1.prototype.set_index_eknhut_k$ = function(_set____db54di) {
        this.index_1 = _set____db54di;
      };
      booleanArrayIterator$1.prototype.get_index_it478p_k$ = function() {
        return this.index_1;
      };
      booleanArrayIterator$1.prototype.hasNext_bitz1p_k$ = function() {
        return !(this.index_1 === this.$array_1.length);
      };
      booleanArrayIterator$1.prototype.nextBoolean_nfdk1h_k$ = function() {
        var tmp;
        if (!(this.index_1 === this.$array_1.length)) {
          var tmp0_this = this;
          var tmp1 = tmp0_this.index_1;
          tmp0_this.index_1 = tmp1 + 1 | 0;
          tmp = this.$array_1[tmp1];
        } else {
          throw NoSuchElementException_init_$Create$_0("" + this.index_1);
        }
        return tmp;
      };
      booleanArrayIterator$1.$metadata$ = classMeta(void 0, void 0, void 0, void 0, void 0, BooleanIterator.prototype);
      function charArrayIterator$1($array) {
        this.$array_1 = $array;
        CharIterator.call(this);
        this.index_1 = 0;
      }
      charArrayIterator$1.prototype.set_index_eknhut_k$ = function(_set____db54di) {
        this.index_1 = _set____db54di;
      };
      charArrayIterator$1.prototype.get_index_it478p_k$ = function() {
        return this.index_1;
      };
      charArrayIterator$1.prototype.hasNext_bitz1p_k$ = function() {
        return !(this.index_1 === this.$array_1.length);
      };
      charArrayIterator$1.prototype.nextChar_yv3rl6_k$ = function() {
        var tmp;
        if (!(this.index_1 === this.$array_1.length)) {
          var tmp0_this = this;
          var tmp1 = tmp0_this.index_1;
          tmp0_this.index_1 = tmp1 + 1 | 0;
          tmp = this.$array_1[tmp1];
        } else {
          throw NoSuchElementException_init_$Create$_0("" + this.index_1);
        }
        return tmp;
      };
      charArrayIterator$1.$metadata$ = classMeta(void 0, void 0, void 0, void 0, void 0, CharIterator.prototype);
      function byteArrayIterator$1($array) {
        this.$array_1 = $array;
        ByteIterator.call(this);
        this.index_1 = 0;
      }
      byteArrayIterator$1.prototype.set_index_eknhut_k$ = function(_set____db54di) {
        this.index_1 = _set____db54di;
      };
      byteArrayIterator$1.prototype.get_index_it478p_k$ = function() {
        return this.index_1;
      };
      byteArrayIterator$1.prototype.hasNext_bitz1p_k$ = function() {
        return !(this.index_1 === this.$array_1.length);
      };
      byteArrayIterator$1.prototype.nextByte_njqopn_k$ = function() {
        var tmp;
        if (!(this.index_1 === this.$array_1.length)) {
          var tmp0_this = this;
          var tmp1 = tmp0_this.index_1;
          tmp0_this.index_1 = tmp1 + 1 | 0;
          tmp = this.$array_1[tmp1];
        } else {
          throw NoSuchElementException_init_$Create$_0("" + this.index_1);
        }
        return tmp;
      };
      byteArrayIterator$1.$metadata$ = classMeta(void 0, void 0, void 0, void 0, void 0, ByteIterator.prototype);
      function shortArrayIterator$1($array) {
        this.$array_1 = $array;
        ShortIterator.call(this);
        this.index_1 = 0;
      }
      shortArrayIterator$1.prototype.set_index_eknhut_k$ = function(_set____db54di) {
        this.index_1 = _set____db54di;
      };
      shortArrayIterator$1.prototype.get_index_it478p_k$ = function() {
        return this.index_1;
      };
      shortArrayIterator$1.prototype.hasNext_bitz1p_k$ = function() {
        return !(this.index_1 === this.$array_1.length);
      };
      shortArrayIterator$1.prototype.nextShort_jxwabt_k$ = function() {
        var tmp;
        if (!(this.index_1 === this.$array_1.length)) {
          var tmp0_this = this;
          var tmp1 = tmp0_this.index_1;
          tmp0_this.index_1 = tmp1 + 1 | 0;
          tmp = this.$array_1[tmp1];
        } else {
          throw NoSuchElementException_init_$Create$_0("" + this.index_1);
        }
        return tmp;
      };
      shortArrayIterator$1.$metadata$ = classMeta(void 0, void 0, void 0, void 0, void 0, ShortIterator.prototype);
      function intArrayIterator$1($array) {
        this.$array_1 = $array;
        IntIterator.call(this);
        this.index_1 = 0;
      }
      intArrayIterator$1.prototype.set_index_eknhut_k$ = function(_set____db54di) {
        this.index_1 = _set____db54di;
      };
      intArrayIterator$1.prototype.get_index_it478p_k$ = function() {
        return this.index_1;
      };
      intArrayIterator$1.prototype.hasNext_bitz1p_k$ = function() {
        return !(this.index_1 === this.$array_1.length);
      };
      intArrayIterator$1.prototype.nextInt_ujorgc_k$ = function() {
        var tmp;
        if (!(this.index_1 === this.$array_1.length)) {
          var tmp0_this = this;
          var tmp1 = tmp0_this.index_1;
          tmp0_this.index_1 = tmp1 + 1 | 0;
          tmp = this.$array_1[tmp1];
        } else {
          throw NoSuchElementException_init_$Create$_0("" + this.index_1);
        }
        return tmp;
      };
      intArrayIterator$1.$metadata$ = classMeta(void 0, void 0, void 0, void 0, void 0, IntIterator.prototype);
      function floatArrayIterator$1($array) {
        this.$array_1 = $array;
        FloatIterator.call(this);
        this.index_1 = 0;
      }
      floatArrayIterator$1.prototype.set_index_eknhut_k$ = function(_set____db54di) {
        this.index_1 = _set____db54di;
      };
      floatArrayIterator$1.prototype.get_index_it478p_k$ = function() {
        return this.index_1;
      };
      floatArrayIterator$1.prototype.hasNext_bitz1p_k$ = function() {
        return !(this.index_1 === this.$array_1.length);
      };
      floatArrayIterator$1.prototype.nextFloat_jqti5l_k$ = function() {
        var tmp;
        if (!(this.index_1 === this.$array_1.length)) {
          var tmp0_this = this;
          var tmp1 = tmp0_this.index_1;
          tmp0_this.index_1 = tmp1 + 1 | 0;
          tmp = this.$array_1[tmp1];
        } else {
          throw NoSuchElementException_init_$Create$_0("" + this.index_1);
        }
        return tmp;
      };
      floatArrayIterator$1.$metadata$ = classMeta(void 0, void 0, void 0, void 0, void 0, FloatIterator.prototype);
      function longArrayIterator$1($array) {
        this.$array_1 = $array;
        LongIterator.call(this);
        this.index_1 = 0;
      }
      longArrayIterator$1.prototype.set_index_eknhut_k$ = function(_set____db54di) {
        this.index_1 = _set____db54di;
      };
      longArrayIterator$1.prototype.get_index_it478p_k$ = function() {
        return this.index_1;
      };
      longArrayIterator$1.prototype.hasNext_bitz1p_k$ = function() {
        return !(this.index_1 === this.$array_1.length);
      };
      longArrayIterator$1.prototype.nextLong_njwv0v_k$ = function() {
        var tmp;
        if (!(this.index_1 === this.$array_1.length)) {
          var tmp0_this = this;
          var tmp1 = tmp0_this.index_1;
          tmp0_this.index_1 = tmp1 + 1 | 0;
          tmp = this.$array_1[tmp1];
        } else {
          throw NoSuchElementException_init_$Create$_0("" + this.index_1);
        }
        return tmp;
      };
      longArrayIterator$1.$metadata$ = classMeta(void 0, void 0, void 0, void 0, void 0, LongIterator.prototype);
      function doubleArrayIterator$1($array) {
        this.$array_1 = $array;
        DoubleIterator.call(this);
        this.index_1 = 0;
      }
      doubleArrayIterator$1.prototype.set_index_eknhut_k$ = function(_set____db54di) {
        this.index_1 = _set____db54di;
      };
      doubleArrayIterator$1.prototype.get_index_it478p_k$ = function() {
        return this.index_1;
      };
      doubleArrayIterator$1.prototype.hasNext_bitz1p_k$ = function() {
        return !(this.index_1 === this.$array_1.length);
      };
      doubleArrayIterator$1.prototype.nextDouble_s2xvfg_k$ = function() {
        var tmp;
        if (!(this.index_1 === this.$array_1.length)) {
          var tmp0_this = this;
          var tmp1 = tmp0_this.index_1;
          tmp0_this.index_1 = tmp1 + 1 | 0;
          tmp = this.$array_1[tmp1];
        } else {
          throw NoSuchElementException_init_$Create$_0("" + this.index_1);
        }
        return tmp;
      };
      doubleArrayIterator$1.$metadata$ = classMeta(void 0, void 0, void 0, void 0, void 0, DoubleIterator.prototype);
      function get_buf() {
        init_properties_bitUtils_kt_cxtw9i();
        return buf;
      }
      var buf;
      function get_bufFloat64() {
        init_properties_bitUtils_kt_cxtw9i();
        return bufFloat64;
      }
      var bufFloat64;
      function get_bufFloat32() {
        init_properties_bitUtils_kt_cxtw9i();
        return bufFloat32;
      }
      var bufFloat32;
      function get_bufInt32() {
        init_properties_bitUtils_kt_cxtw9i();
        return bufInt32;
      }
      var bufInt32;
      function get_lowIndex() {
        init_properties_bitUtils_kt_cxtw9i();
        return lowIndex;
      }
      var lowIndex;
      function get_highIndex() {
        init_properties_bitUtils_kt_cxtw9i();
        return highIndex;
      }
      var highIndex;
      function doubleFromBits(value) {
        init_properties_bitUtils_kt_cxtw9i();
        get_bufInt32()[get_lowIndex()] = value.low_1;
        get_bufInt32()[get_highIndex()] = value.high_1;
        return get_bufFloat64()[0];
      }
      function doubleToRawBits(value) {
        init_properties_bitUtils_kt_cxtw9i();
        get_bufFloat64()[0] = value;
        return new Long(get_bufInt32()[get_lowIndex()], get_bufInt32()[get_highIndex()]);
      }
      function getNumberHashCode(obj) {
        init_properties_bitUtils_kt_cxtw9i();
        var tmp$ret$1;
        {
          var tmp0_unsafeCast = jsBitwiseOr(obj, 0);
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_unsafeCast;
          }
          tmp$ret$1 = tmp$ret$0;
        }
        if (tmp$ret$1 === obj) {
          return numberToInt(obj);
        }
        get_bufFloat64()[0] = obj;
        return imul(get_bufInt32()[get_highIndex()], 31) + get_bufInt32()[get_lowIndex()] | 0;
      }
      var properties_initialized_bitUtils_kt_i2bo3e;
      function init_properties_bitUtils_kt_cxtw9i() {
        if (properties_initialized_bitUtils_kt_i2bo3e) {
        } else {
          properties_initialized_bitUtils_kt_i2bo3e = true;
          buf = new ArrayBuffer(8);
          var tmp$ret$1;
          {
            var tmp0_unsafeCast = new Float64Array(get_buf());
            var tmp$ret$0;
            {
              tmp$ret$0 = tmp0_unsafeCast;
            }
            tmp$ret$1 = tmp$ret$0;
          }
          bufFloat64 = tmp$ret$1;
          var tmp$ret$1_0;
          {
            var tmp0_unsafeCast_0 = new Float32Array(get_buf());
            var tmp$ret$0_0;
            {
              tmp$ret$0_0 = tmp0_unsafeCast_0;
            }
            tmp$ret$1_0 = tmp$ret$0_0;
          }
          bufFloat32 = tmp$ret$1_0;
          var tmp$ret$1_1;
          {
            var tmp0_unsafeCast_1 = new Int32Array(get_buf());
            var tmp$ret$0_1;
            {
              tmp$ret$0_1 = tmp0_unsafeCast_1;
            }
            tmp$ret$1_1 = tmp$ret$0_1;
          }
          bufInt32 = tmp$ret$1_1;
          var tmp$ret$1_2;
          {
            {
            }
            var tmp$ret$0_2;
            {
              get_bufFloat64()[0] = -1;
              tmp$ret$0_2 = !(get_bufInt32()[0] === 0) ? 1 : 0;
            }
            tmp$ret$1_2 = tmp$ret$0_2;
          }
          lowIndex = tmp$ret$1_2;
          highIndex = 1 - get_lowIndex() | 0;
        }
      }
      function booleanInExternalLog(name, obj) {
        if (!(typeof obj === "boolean")) {
          var tmp$ret$0;
          {
            var tmp0_asDynamic = console;
            tmp$ret$0 = tmp0_asDynamic;
          }
          tmp$ret$0.error("Boolean expected for '" + name + "', but actual:", obj);
        }
      }
      function booleanInExternalException(name, obj) {
        if (!(typeof obj === "boolean")) {
          throw new Error("Boolean expected for '" + name + "', but actual: " + obj);
        }
      }
      function DoNotIntrinsify() {
      }
      DoNotIntrinsify.prototype.equals = function(other) {
        if (!(other instanceof DoNotIntrinsify))
          return false;
        var tmp0_other_with_cast = other instanceof DoNotIntrinsify ? other : THROW_CCE();
        return true;
      };
      DoNotIntrinsify.prototype.hashCode = function() {
        return 0;
      };
      DoNotIntrinsify.prototype.toString = function() {
        return "@kotlin.js.DoNotIntrinsify()";
      };
      DoNotIntrinsify.$metadata$ = classMeta("DoNotIntrinsify", [Annotation]);
      function charSequenceGet(a3, index3) {
        var tmp;
        if (isString2(a3)) {
          var tmp$ret$4;
          {
            var tmp$ret$1;
            {
              var tmp$ret$0;
              {
                tmp$ret$0 = a3;
              }
              var tmp0_unsafeCast = tmp$ret$0.charCodeAt(index3);
              tmp$ret$1 = tmp0_unsafeCast;
            }
            var tmp1_Char = tmp$ret$1;
            var tmp_0;
            var tmp$ret$2;
            {
              Companion_getInstance_18();
              var tmp0__get_code__88qj9g = _Char___init__impl__6a9atx(0);
              tmp$ret$2 = Char__toInt_impl_vasixd(tmp0__get_code__88qj9g);
            }
            if (tmp1_Char < tmp$ret$2) {
              tmp_0 = true;
            } else {
              var tmp$ret$3;
              {
                Companion_getInstance_18();
                var tmp1__get_code__adl84j = _Char___init__impl__6a9atx(65535);
                tmp$ret$3 = Char__toInt_impl_vasixd(tmp1__get_code__adl84j);
              }
              tmp_0 = tmp1_Char > tmp$ret$3;
            }
            if (tmp_0) {
              throw IllegalArgumentException_init_$Create$_0("Invalid Char code: " + tmp1_Char);
            }
            tmp$ret$4 = numberToChar(tmp1_Char);
          }
          tmp = tmp$ret$4;
        } else {
          tmp = a3.get_a7b70_k$(index3);
        }
        return tmp;
      }
      function isString2(a3) {
        return typeof a3 === "string";
      }
      function charSequenceLength(a3) {
        var tmp;
        if (isString2(a3)) {
          var tmp$ret$1;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = a3;
            }
            var tmp0_unsafeCast = tmp$ret$0.length;
            tmp$ret$1 = tmp0_unsafeCast;
          }
          tmp = tmp$ret$1;
        } else {
          tmp = a3.get_length_g42xv3_k$();
        }
        return tmp;
      }
      function charSequenceSubSequence(a3, startIndex, endIndex) {
        var tmp;
        if (isString2(a3)) {
          var tmp$ret$1;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = a3;
            }
            var tmp0_unsafeCast = tmp$ret$0.substring(startIndex, endIndex);
            tmp$ret$1 = tmp0_unsafeCast;
          }
          tmp = tmp$ret$1;
        } else {
          tmp = a3.subSequence_5fh70h_k$(startIndex, endIndex);
        }
        return tmp;
      }
      function arrayToString(array3) {
        return joinToString$default(array3, ", ", "[", "]", 0, null, arrayToString$lambda(), 24, null);
      }
      function contentEqualsInternal(_this__u8e3s4, other) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _this__u8e3s4;
        }
        var a3 = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = other;
        }
        var b = tmp$ret$1;
        if (a3 === b)
          return true;
        if (((a3 == null ? true : b == null) ? true : !isArrayish(b)) ? true : a3.length != b.length)
          return false;
        var inductionVariable = 0;
        var last = a3.length;
        if (inductionVariable < last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            if (!equals(a3[i], b[i])) {
              return false;
            }
          } while (inductionVariable < last);
        return true;
      }
      function arrayToString$lambda() {
        return function(it) {
          return toString_1(it);
        };
      }
      function compareTo_0(a3, b) {
        var tmp0_subject = typeof a3;
        var tmp;
        switch (tmp0_subject) {
          case "number":
            var tmp_0;
            if (typeof b === "number") {
              tmp_0 = doubleCompareTo(a3, b);
            } else {
              if (b instanceof Long) {
                tmp_0 = doubleCompareTo(a3, b.toDouble_ygsx0s_k$());
              } else {
                tmp_0 = primitiveCompareTo(a3, b);
              }
            }
            tmp = tmp_0;
            break;
          case "string":
          case "boolean":
            tmp = primitiveCompareTo(a3, b);
            break;
          default:
            tmp = compareToDoNotIntrinsicify(a3, b);
            break;
        }
        return tmp;
      }
      function doubleCompareTo(a3, b) {
        var tmp;
        if (a3 < b) {
          tmp = -1;
        } else if (a3 > b) {
          tmp = 1;
        } else if (a3 === b) {
          var tmp_0;
          if (a3 !== 0) {
            tmp_0 = 0;
          } else {
            var tmp$ret$0;
            {
              tmp$ret$0 = 1;
            }
            var ia = tmp$ret$0 / a3;
            var tmp_1;
            var tmp$ret$1;
            {
              tmp$ret$1 = 1;
            }
            if (ia === tmp$ret$1 / b) {
              tmp_1 = 0;
            } else {
              if (ia < 0) {
                tmp_1 = -1;
              } else {
                tmp_1 = 1;
              }
            }
            tmp_0 = tmp_1;
          }
          tmp = tmp_0;
        } else if (a3 !== a3) {
          tmp = b !== b ? 0 : 1;
        } else {
          tmp = -1;
        }
        return tmp;
      }
      function primitiveCompareTo(a3, b) {
        return a3 < b ? -1 : a3 > b ? 1 : 0;
      }
      function compareToDoNotIntrinsicify(a3, b) {
        return a3.compareTo_6thzaj_k$(b);
      }
      function construct(constructorType, resultType, args) {
        return Reflect.construct(constructorType, args, resultType);
      }
      function identityHashCode(obj) {
        return getObjectHashCode(obj);
      }
      function getObjectHashCode(obj) {
        if (!jsIn("kotlinHashCodeValue$", obj)) {
          var hash = jsBitwiseOr(Math.random() * 4294967296, 0);
          var descriptor = new Object();
          descriptor.value = hash;
          descriptor.enumerable = false;
          Object.defineProperty(obj, "kotlinHashCodeValue$", descriptor);
        }
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = obj["kotlinHashCodeValue$"];
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return tmp$ret$0;
      }
      function get_OBJECT_HASH_CODE_PROPERTY_NAME() {
        return OBJECT_HASH_CODE_PROPERTY_NAME;
      }
      var OBJECT_HASH_CODE_PROPERTY_NAME;
      function get_POW_2_32() {
        return POW_2_32;
      }
      var POW_2_32;
      function toString_1(o) {
        var tmp;
        if (o == null) {
          tmp = "null";
        } else if (isArrayish(o)) {
          tmp = "[...]";
        } else {
          var tmp$ret$0;
          {
            var tmp0_unsafeCast = o.toString();
            tmp$ret$0 = tmp0_unsafeCast;
          }
          tmp = tmp$ret$0;
        }
        return tmp;
      }
      function hashCode(obj) {
        if (obj == null)
          return 0;
        var tmp0_subject = typeof obj;
        var tmp;
        switch (tmp0_subject) {
          case "object":
            tmp = "function" === typeof obj.hashCode ? obj.hashCode() : getObjectHashCode(obj);
            break;
          case "function":
            tmp = getObjectHashCode(obj);
            break;
          case "number":
            tmp = getNumberHashCode(obj);
            break;
          case "boolean":
            var tmp_0;
            var tmp$ret$0;
            {
              tmp$ret$0 = obj;
            }
            if (tmp$ret$0) {
              tmp_0 = 1;
            } else {
              tmp_0 = 0;
            }
            tmp = tmp_0;
            break;
          default:
            tmp = getStringHashCode(String(obj));
            break;
        }
        return tmp;
      }
      function getStringHashCode(str) {
        var hash = 0;
        var length3 = str.length;
        var inductionVariable = 0;
        var last = length3 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp$ret$0;
            {
              tmp$ret$0 = str;
            }
            var code = tmp$ret$0.charCodeAt(i);
            hash = imul(hash, 31) + code | 0;
          } while (!(i === last));
        return hash;
      }
      function anyToString(o) {
        return Object.prototype.toString.call(o);
      }
      function equals(obj1, obj2) {
        if (obj1 == null) {
          return obj2 == null;
        }
        if (obj2 == null) {
          return false;
        }
        if (typeof obj1 === "object" ? typeof obj1.equals === "function" : false) {
          return obj1.equals(obj2);
        }
        if (obj1 !== obj1) {
          return obj2 !== obj2;
        }
        if (typeof obj1 === "number" ? typeof obj2 === "number" : false) {
          var tmp;
          if (obj1 === obj2) {
            var tmp_0;
            if (obj1 !== 0) {
              tmp_0 = true;
            } else {
              var tmp$ret$0;
              {
                tmp$ret$0 = 1;
              }
              var tmp_1 = tmp$ret$0 / obj1;
              var tmp$ret$1;
              {
                tmp$ret$1 = 1;
              }
              tmp_0 = tmp_1 === tmp$ret$1 / obj2;
            }
            tmp = tmp_0;
          } else {
            tmp = false;
          }
          return tmp;
        }
        return obj1 === obj2;
      }
      function boxIntrinsic(x4) {
        throw IllegalStateException_init_$Create$_0("Should be lowered");
      }
      function unboxIntrinsic(x4) {
        throw IllegalStateException_init_$Create$_0("Should be lowered");
      }
      function captureStack(instance, constructorFunction) {
        if (Error.captureStackTrace != null) {
          Error.captureStackTrace(instance, constructorFunction);
        } else {
          var tmp$ret$0;
          {
            tmp$ret$0 = instance;
          }
          tmp$ret$0.stack = new Error().stack;
        }
      }
      function newThrowable(message, cause) {
        var throwable = new Error();
        var tmp;
        if (isUndefined2(message)) {
          var tmp_0;
          if (isUndefined2(cause)) {
            tmp_0 = message;
          } else {
            var tmp0_safe_receiver = cause;
            var tmp1_elvis_lhs = tmp0_safe_receiver == null ? null : tmp0_safe_receiver.toString();
            tmp_0 = tmp1_elvis_lhs == null ? void 0 : tmp1_elvis_lhs;
          }
          tmp = tmp_0;
        } else {
          var tmp2_elvis_lhs = message;
          tmp = tmp2_elvis_lhs == null ? void 0 : tmp2_elvis_lhs;
        }
        throwable.message = tmp;
        throwable.cause = cause;
        throwable.name = "Throwable";
        var tmp$ret$0;
        {
          tmp$ret$0 = throwable;
        }
        return tmp$ret$0;
      }
      function isUndefined2(value) {
        return value === void 0;
      }
      function extendThrowable(this_, message, cause) {
        Error.call(this_);
        setPropertiesToThrowableInstance(this_, message, cause);
      }
      function setPropertiesToThrowableInstance(this_, message, cause) {
        if (!hasOwnPrototypeProperty(this_, "message")) {
          var tmp;
          if (message == null) {
            var tmp_0;
            if (!(message === null)) {
              var tmp0_safe_receiver = cause;
              var tmp1_elvis_lhs = tmp0_safe_receiver == null ? null : tmp0_safe_receiver.toString();
              tmp_0 = tmp1_elvis_lhs == null ? void 0 : tmp1_elvis_lhs;
            } else {
              tmp_0 = void 0;
            }
            tmp = tmp_0;
          } else {
            tmp = message;
          }
          this_.message = tmp;
        }
        if (!hasOwnPrototypeProperty(this_, "cause")) {
          this_.cause = cause;
        }
        this_.name = Object.getPrototypeOf(this_).constructor.name;
      }
      function hasOwnPrototypeProperty(o, name) {
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = Object.getPrototypeOf(o).hasOwnProperty(name);
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return tmp$ret$0;
      }
      function getContinuation() {
        throw Exception_init_$Create$_0("Implemented as intrinsic");
      }
      function returnIfSuspended(argument, $cont) {
        return (argument == null ? true : isObject2(argument)) ? argument : THROW_CCE();
      }
      function suspendCoroutineUninterceptedOrReturnJS(block, $cont) {
        return block($cont);
      }
      function getCoroutineContext($cont) {
        return $cont.get_context_h02k06_k$();
      }
      function unreachableDeclarationLog() {
        var tmp$ret$0;
        {
          var tmp0_asDynamic = console;
          tmp$ret$0 = tmp0_asDynamic;
        }
        tmp$ret$0.trace("Unreachable declaration");
      }
      function unreachableDeclarationException() {
        throw new Error("Unreachable declaration");
      }
      function ensureNotNull(v) {
        var tmp;
        if (v == null) {
          THROW_NPE();
        } else {
          tmp = v;
        }
        return tmp;
      }
      function THROW_NPE() {
        throw NullPointerException_init_$Create$();
      }
      function noWhenBranchMatchedException() {
        throw NoWhenBranchMatchedException_init_$Create$();
      }
      function THROW_CCE() {
        throw ClassCastException_init_$Create$();
      }
      function throwUninitializedPropertyAccessException(name) {
        throw UninitializedPropertyAccessException_init_$Create$_0("lateinit property " + name + " has not been initialized");
      }
      function throwKotlinNothingValueException() {
        throw KotlinNothingValueException_init_$Create$();
      }
      function THROW_ISE() {
        throw IllegalStateException_init_$Create$();
      }
      function THROW_IAE(msg) {
        throw IllegalArgumentException_init_$Create$_0(msg);
      }
      function JsIntrinsic() {
      }
      JsIntrinsic.prototype.equals = function(other) {
        if (!(other instanceof JsIntrinsic))
          return false;
        var tmp0_other_with_cast = other instanceof JsIntrinsic ? other : THROW_CCE();
        return true;
      };
      JsIntrinsic.prototype.hashCode = function() {
        return 0;
      };
      JsIntrinsic.prototype.toString = function() {
        return "@kotlin.js.JsIntrinsic()";
      };
      JsIntrinsic.$metadata$ = classMeta("JsIntrinsic", [Annotation]);
      function emptyArray() {
        return [];
      }
      function JsFun(code) {
        this.code_1 = code;
      }
      JsFun.prototype.get_code_wok7xy_k$ = function() {
        return this.code_1;
      };
      JsFun.prototype.equals = function(other) {
        if (!(other instanceof JsFun))
          return false;
        var tmp0_other_with_cast = other instanceof JsFun ? other : THROW_CCE();
        if (!(this.code_1 === tmp0_other_with_cast.code_1))
          return false;
        return true;
      };
      JsFun.prototype.hashCode = function() {
        return imul(getStringHashCode("code"), 127) ^ getStringHashCode(this.code_1);
      };
      JsFun.prototype.toString = function() {
        return "@kotlin.js.JsFun(code=" + this.code_1 + ")";
      };
      JsFun.$metadata$ = classMeta("JsFun", [Annotation]);
      function enumValueOfIntrinsic(name) {
        throw IllegalStateException_init_$Create$_0("Should be replaced by compiler");
      }
      function enumValuesIntrinsic() {
        throw IllegalStateException_init_$Create$_0("Should be replaced by compiler");
      }
      function Companion_20() {
        Companion_instance_20 = this;
        this.MIN_VALUE_1 = new Long(0, -2147483648);
        this.MAX_VALUE_1 = new Long(-1, 2147483647);
        this.SIZE_BYTES_1 = 8;
        this.SIZE_BITS_1 = 64;
      }
      Companion_20.prototype.get_MIN_VALUE_7nmmor_k$ = function() {
        return this.MIN_VALUE_1;
      };
      Companion_20.prototype.get_MAX_VALUE_54a9lf_k$ = function() {
        return this.MAX_VALUE_1;
      };
      Companion_20.prototype.get_SIZE_BYTES_qphg4q_k$ = function() {
        return this.SIZE_BYTES_1;
      };
      Companion_20.prototype.get_SIZE_BITS_7qhjj9_k$ = function() {
        return this.SIZE_BITS_1;
      };
      Companion_20.$metadata$ = objectMeta("Companion");
      var Companion_instance_20;
      function Companion_getInstance_20() {
        if (Companion_instance_20 == null)
          new Companion_20();
        return Companion_instance_20;
      }
      function Long(low, high) {
        Companion_getInstance_20();
        Number_0.call(this);
        this.low_1 = low;
        this.high_1 = high;
      }
      Long.prototype.get_low_18j191_k$ = function() {
        return this.low_1;
      };
      Long.prototype.get_high_wonai3_k$ = function() {
        return this.high_1;
      };
      Long.prototype.compareTo_n49k6u_k$ = function(other) {
        return this.compareTo_n4fqi2_k$(toLong(other));
      };
      Long.prototype.compareTo_6m5e4u_k$ = function(other) {
        return this.compareTo_n4fqi2_k$(toLong(other));
      };
      Long.prototype.compareTo_m60v27_k$ = function(other) {
        return this.compareTo_n4fqi2_k$(toLong(other));
      };
      Long.prototype.compareTo_n4fqi2_k$ = function(other) {
        return compare(this, other);
      };
      Long.prototype.compareTo_6thzaj_k$ = function(other) {
        return this.compareTo_n4fqi2_k$(other instanceof Long ? other : THROW_CCE());
      };
      Long.prototype.compareTo_6f2lym_k$ = function(other) {
        return compareTo_0(this.toFloat_jhbgwv_k$(), other);
      };
      Long.prototype.compareTo_f0f9kx_k$ = function(other) {
        return compareTo_0(this.toDouble_ygsx0s_k$(), other);
      };
      Long.prototype.plus_u6dpzk_k$ = function(other) {
        return this.plus_u6jwas_k$(toLong(other));
      };
      Long.prototype.plus_cce7xw_k$ = function(other) {
        return this.plus_u6jwas_k$(toLong(other));
      };
      Long.prototype.plus_crvk61_k$ = function(other) {
        return this.plus_u6jwas_k$(toLong(other));
      };
      Long.prototype.plus_u6jwas_k$ = function(other) {
        return add2(this, other);
      };
      Long.prototype.plus_c5bfro_k$ = function(other) {
        return this.toFloat_jhbgwv_k$() + other;
      };
      Long.prototype.plus_kiyahl_k$ = function(other) {
        return this.toDouble_ygsx0s_k$() + other;
      };
      Long.prototype.minus_ll8z3a_k$ = function(other) {
        return this.minus_llf5ei_k$(toLong(other));
      };
      Long.prototype.minus_u9ra1q_k$ = function(other) {
        return this.minus_llf5ei_k$(toLong(other));
      };
      Long.prototype.minus_c5ihzl_k$ = function(other) {
        return this.minus_llf5ei_k$(toLong(other));
      };
      Long.prototype.minus_llf5ei_k$ = function(other) {
        return subtract(this, other);
      };
      Long.prototype.minus_u2ohvi_k$ = function(other) {
        return this.toFloat_jhbgwv_k$() - other;
      };
      Long.prototype.minus_80anzj_k$ = function(other) {
        return this.toDouble_ygsx0s_k$() - other;
      };
      Long.prototype.times_2z9ke4_k$ = function(other) {
        return this.times_2zfqpc_k$(toLong(other));
      };
      Long.prototype.times_ll626g_k$ = function(other) {
        return this.times_2zfqpc_k$(toLong(other));
      };
      Long.prototype.times_vzczyd_k$ = function(other) {
        return this.times_2zfqpc_k$(toLong(other));
      };
      Long.prototype.times_2zfqpc_k$ = function(other) {
        return multiply(this, other);
      };
      Long.prototype.times_le3a08_k$ = function(other) {
        return this.toFloat_jhbgwv_k$() * other;
      };
      Long.prototype.times_myh3yd_k$ = function(other) {
        return this.toDouble_ygsx0s_k$() * other;
      };
      Long.prototype.div_9rv96v_k$ = function(other) {
        return this.div_9s1fi3_k$(toLong(other));
      };
      Long.prototype.div_j4i90d_k$ = function(other) {
        return this.div_9s1fi3_k$(toLong(other));
      };
      Long.prototype.div_pipt5c_k$ = function(other) {
        return this.div_9s1fi3_k$(toLong(other));
      };
      Long.prototype.div_9s1fi3_k$ = function(other) {
        return divide(this, other);
      };
      Long.prototype.div_ixfgu5_k$ = function(other) {
        return this.toFloat_jhbgwv_k$() / other;
      };
      Long.prototype.div_hn31ow_k$ = function(other) {
        return this.toDouble_ygsx0s_k$() / other;
      };
      Long.prototype.rem_9r568g_k$ = function(other) {
        return this.rem_9rbcjo_k$(toLong(other));
      };
      Long.prototype.rem_ii1pdg_k$ = function(other) {
        return this.rem_9rbcjo_k$(toLong(other));
      };
      Long.prototype.rem_kb2195_k$ = function(other) {
        return this.rem_9rbcjo_k$(toLong(other));
      };
      Long.prototype.rem_9rbcjo_k$ = function(other) {
        return modulo(this, other);
      };
      Long.prototype.rem_iayx78_k$ = function(other) {
        return this.toFloat_jhbgwv_k$() % other;
      };
      Long.prototype.rem_1p5v1j_k$ = function(other) {
        return this.toDouble_ygsx0s_k$() % other;
      };
      Long.prototype.inc_28ke_k$ = function() {
        return this.plus_u6jwas_k$(new Long(1, 0));
      };
      Long.prototype.dec_24n6_k$ = function() {
        return this.minus_llf5ei_k$(new Long(1, 0));
      };
      Long.prototype.unaryPlus_g9fn1l_k$ = function() {
        return this;
      };
      Long.prototype.unaryMinus_6uz0qp_k$ = function() {
        return this.inv_28kx_k$().plus_u6jwas_k$(new Long(1, 0));
      };
      Long.prototype.rangeTo_5ifbqq_k$ = function(other) {
        return this.rangeTo_5i95fi_k$(toLong(other));
      };
      Long.prototype.rangeTo_sjxg22_k$ = function(other) {
        return this.rangeTo_5i95fi_k$(toLong(other));
      };
      Long.prototype.rangeTo_pdrcev_k$ = function(other) {
        return this.rangeTo_5i95fi_k$(toLong(other));
      };
      Long.prototype.rangeTo_5i95fi_k$ = function(other) {
        return new LongRange(this, other);
      };
      Long.prototype.shl_po5ip6_k$ = function(bitCount) {
        return shiftLeft(this, bitCount);
      };
      Long.prototype.shr_wjue3g_k$ = function(bitCount) {
        return shiftRight(this, bitCount);
      };
      Long.prototype.ushr_rr8rvr_k$ = function(bitCount) {
        return shiftRightUnsigned(this, bitCount);
      };
      Long.prototype.and_jhajnj_k$ = function(other) {
        return new Long(this.low_1 & other.low_1, this.high_1 & other.high_1);
      };
      Long.prototype.or_s401rn_k$ = function(other) {
        return new Long(this.low_1 | other.low_1, this.high_1 | other.high_1);
      };
      Long.prototype.xor_jjua9n_k$ = function(other) {
        return new Long(this.low_1 ^ other.low_1, this.high_1 ^ other.high_1);
      };
      Long.prototype.inv_28kx_k$ = function() {
        return new Long(~this.low_1, ~this.high_1);
      };
      Long.prototype.toByte_edm0nx_k$ = function() {
        return toByte(this.low_1);
      };
      Long.prototype.toChar_tbflse_k$ = function() {
        return numberToChar(this.low_1);
      };
      Long.prototype.toShort_ja8oqn_k$ = function() {
        return toShort(this.low_1);
      };
      Long.prototype.toInt_1tsl84_k$ = function() {
        return this.low_1;
      };
      Long.prototype.toLong_edfucp_k$ = function() {
        return this;
      };
      Long.prototype.toFloat_jhbgwv_k$ = function() {
        return this.toDouble_ygsx0s_k$();
      };
      Long.prototype.toDouble_ygsx0s_k$ = function() {
        return toNumber(this);
      };
      Long.prototype.valueOf = function() {
        return this.toDouble_ygsx0s_k$();
      };
      Long.prototype.equals = function(other) {
        var tmp;
        if (other instanceof Long) {
          tmp = equalsLong(this, other);
        } else {
          tmp = false;
        }
        return tmp;
      };
      Long.prototype.hashCode = function() {
        return hashCode_0(this);
      };
      Long.prototype.toString = function() {
        return toStringImpl(this, 10);
      };
      Long.$metadata$ = classMeta("Long", [Comparable], void 0, void 0, void 0, Number_0.prototype);
      function get_ZERO() {
        init_properties_longjs_kt_ttk8rv();
        return ZERO;
      }
      var ZERO;
      function get_ONE() {
        init_properties_longjs_kt_ttk8rv();
        return ONE;
      }
      var ONE;
      function get_NEG_ONE() {
        init_properties_longjs_kt_ttk8rv();
        return NEG_ONE;
      }
      var NEG_ONE;
      function get_MAX_VALUE() {
        init_properties_longjs_kt_ttk8rv();
        return MAX_VALUE;
      }
      var MAX_VALUE;
      function get_MIN_VALUE() {
        init_properties_longjs_kt_ttk8rv();
        return MIN_VALUE;
      }
      var MIN_VALUE;
      function get_TWO_PWR_24_() {
        init_properties_longjs_kt_ttk8rv();
        return TWO_PWR_24_;
      }
      var TWO_PWR_24_;
      function compare(_this__u8e3s4, other) {
        init_properties_longjs_kt_ttk8rv();
        if (equalsLong(_this__u8e3s4, other)) {
          return 0;
        }
        var thisNeg = isNegative(_this__u8e3s4);
        var otherNeg = isNegative(other);
        return (thisNeg ? !otherNeg : false) ? -1 : (!thisNeg ? otherNeg : false) ? 1 : isNegative(subtract(_this__u8e3s4, other)) ? -1 : 1;
      }
      function add2(_this__u8e3s4, other) {
        init_properties_longjs_kt_ttk8rv();
        var a48 = _this__u8e3s4.high_1 >>> 16 | 0;
        var a32 = _this__u8e3s4.high_1 & 65535;
        var a16 = _this__u8e3s4.low_1 >>> 16 | 0;
        var a00 = _this__u8e3s4.low_1 & 65535;
        var b48 = other.high_1 >>> 16 | 0;
        var b32 = other.high_1 & 65535;
        var b16 = other.low_1 >>> 16 | 0;
        var b00 = other.low_1 & 65535;
        var c48 = 0;
        var c32 = 0;
        var c16 = 0;
        var c00 = 0;
        c00 = c00 + (a00 + b00 | 0) | 0;
        c16 = c16 + (c00 >>> 16 | 0) | 0;
        c00 = c00 & 65535;
        c16 = c16 + (a16 + b16 | 0) | 0;
        c32 = c32 + (c16 >>> 16 | 0) | 0;
        c16 = c16 & 65535;
        c32 = c32 + (a32 + b32 | 0) | 0;
        c48 = c48 + (c32 >>> 16 | 0) | 0;
        c32 = c32 & 65535;
        c48 = c48 + (a48 + b48 | 0) | 0;
        c48 = c48 & 65535;
        return new Long(c16 << 16 | c00, c48 << 16 | c32);
      }
      function subtract(_this__u8e3s4, other) {
        init_properties_longjs_kt_ttk8rv();
        return add2(_this__u8e3s4, other.unaryMinus_6uz0qp_k$());
      }
      function multiply(_this__u8e3s4, other) {
        init_properties_longjs_kt_ttk8rv();
        if (isZero(_this__u8e3s4)) {
          return get_ZERO();
        } else if (isZero(other)) {
          return get_ZERO();
        }
        if (equalsLong(_this__u8e3s4, get_MIN_VALUE())) {
          return isOdd(other) ? get_MIN_VALUE() : get_ZERO();
        } else if (equalsLong(other, get_MIN_VALUE())) {
          return isOdd(_this__u8e3s4) ? get_MIN_VALUE() : get_ZERO();
        }
        if (isNegative(_this__u8e3s4)) {
          var tmp;
          if (isNegative(other)) {
            tmp = multiply(negate(_this__u8e3s4), negate(other));
          } else {
            tmp = negate(multiply(negate(_this__u8e3s4), other));
          }
          return tmp;
        } else if (isNegative(other)) {
          return negate(multiply(_this__u8e3s4, negate(other)));
        }
        if (lessThan(_this__u8e3s4, get_TWO_PWR_24_()) ? lessThan(other, get_TWO_PWR_24_()) : false) {
          return fromNumber(toNumber(_this__u8e3s4) * toNumber(other));
        }
        var a48 = _this__u8e3s4.high_1 >>> 16 | 0;
        var a32 = _this__u8e3s4.high_1 & 65535;
        var a16 = _this__u8e3s4.low_1 >>> 16 | 0;
        var a00 = _this__u8e3s4.low_1 & 65535;
        var b48 = other.high_1 >>> 16 | 0;
        var b32 = other.high_1 & 65535;
        var b16 = other.low_1 >>> 16 | 0;
        var b00 = other.low_1 & 65535;
        var c48 = 0;
        var c32 = 0;
        var c16 = 0;
        var c00 = 0;
        c00 = c00 + imul(a00, b00) | 0;
        c16 = c16 + (c00 >>> 16 | 0) | 0;
        c00 = c00 & 65535;
        c16 = c16 + imul(a16, b00) | 0;
        c32 = c32 + (c16 >>> 16 | 0) | 0;
        c16 = c16 & 65535;
        c16 = c16 + imul(a00, b16) | 0;
        c32 = c32 + (c16 >>> 16 | 0) | 0;
        c16 = c16 & 65535;
        c32 = c32 + imul(a32, b00) | 0;
        c48 = c48 + (c32 >>> 16 | 0) | 0;
        c32 = c32 & 65535;
        c32 = c32 + imul(a16, b16) | 0;
        c48 = c48 + (c32 >>> 16 | 0) | 0;
        c32 = c32 & 65535;
        c32 = c32 + imul(a00, b32) | 0;
        c48 = c48 + (c32 >>> 16 | 0) | 0;
        c32 = c32 & 65535;
        c48 = c48 + (((imul(a48, b00) + imul(a32, b16) | 0) + imul(a16, b32) | 0) + imul(a00, b48) | 0) | 0;
        c48 = c48 & 65535;
        return new Long(c16 << 16 | c00, c48 << 16 | c32);
      }
      function divide(_this__u8e3s4, other) {
        init_properties_longjs_kt_ttk8rv();
        if (isZero(other)) {
          throw Exception_init_$Create$_0("division by zero");
        } else if (isZero(_this__u8e3s4)) {
          return get_ZERO();
        }
        if (equalsLong(_this__u8e3s4, get_MIN_VALUE())) {
          if (equalsLong(other, get_ONE()) ? true : equalsLong(other, get_NEG_ONE())) {
            return get_MIN_VALUE();
          } else if (equalsLong(other, get_MIN_VALUE())) {
            return get_ONE();
          } else {
            var halfThis = shiftRight(_this__u8e3s4, 1);
            var approx = shiftLeft(halfThis.div_9s1fi3_k$(other), 1);
            if (equalsLong(approx, get_ZERO())) {
              return isNegative(other) ? get_ONE() : get_NEG_ONE();
            } else {
              var rem = subtract(_this__u8e3s4, multiply(other, approx));
              return add2(approx, rem.div_9s1fi3_k$(other));
            }
          }
        } else if (equalsLong(other, get_MIN_VALUE())) {
          return get_ZERO();
        }
        if (isNegative(_this__u8e3s4)) {
          var tmp;
          if (isNegative(other)) {
            tmp = negate(_this__u8e3s4).div_9s1fi3_k$(negate(other));
          } else {
            tmp = negate(negate(_this__u8e3s4).div_9s1fi3_k$(other));
          }
          return tmp;
        } else if (isNegative(other)) {
          return negate(_this__u8e3s4.div_9s1fi3_k$(negate(other)));
        }
        var res = get_ZERO();
        var rem_0 = _this__u8e3s4;
        while (greaterThanOrEqual(rem_0, other)) {
          var approxDouble = toNumber(rem_0) / toNumber(other);
          var approx2 = Math.max(1, Math.floor(approxDouble));
          var log22 = Math.ceil(Math.log(approx2) / Math.LN2);
          var delta = log22 <= 48 ? 1 : Math.pow(2, log22 - 48);
          var approxRes = fromNumber(approx2);
          var approxRem = multiply(approxRes, other);
          while (isNegative(approxRem) ? true : greaterThan(approxRem, rem_0)) {
            approx2 = approx2 - delta;
            approxRes = fromNumber(approx2);
            approxRem = multiply(approxRes, other);
          }
          if (isZero(approxRes)) {
            approxRes = get_ONE();
          }
          res = add2(res, approxRes);
          rem_0 = subtract(rem_0, approxRem);
        }
        return res;
      }
      function modulo(_this__u8e3s4, other) {
        init_properties_longjs_kt_ttk8rv();
        return subtract(_this__u8e3s4, multiply(_this__u8e3s4.div_9s1fi3_k$(other), other));
      }
      function shiftLeft(_this__u8e3s4, numBits) {
        init_properties_longjs_kt_ttk8rv();
        var numBits_0 = numBits & 63;
        if (numBits_0 === 0) {
          return _this__u8e3s4;
        } else {
          if (numBits_0 < 32) {
            return new Long(_this__u8e3s4.low_1 << numBits_0, _this__u8e3s4.high_1 << numBits_0 | (_this__u8e3s4.low_1 >>> (32 - numBits_0 | 0) | 0));
          } else {
            return new Long(0, _this__u8e3s4.low_1 << (numBits_0 - 32 | 0));
          }
        }
      }
      function shiftRight(_this__u8e3s4, numBits) {
        init_properties_longjs_kt_ttk8rv();
        var numBits_0 = numBits & 63;
        if (numBits_0 === 0) {
          return _this__u8e3s4;
        } else {
          if (numBits_0 < 32) {
            return new Long(_this__u8e3s4.low_1 >>> numBits_0 | 0 | _this__u8e3s4.high_1 << (32 - numBits_0 | 0), _this__u8e3s4.high_1 >> numBits_0);
          } else {
            return new Long(_this__u8e3s4.high_1 >> (numBits_0 - 32 | 0), _this__u8e3s4.high_1 >= 0 ? 0 : -1);
          }
        }
      }
      function shiftRightUnsigned(_this__u8e3s4, numBits) {
        init_properties_longjs_kt_ttk8rv();
        var numBits_0 = numBits & 63;
        if (numBits_0 === 0) {
          return _this__u8e3s4;
        } else {
          if (numBits_0 < 32) {
            return new Long(_this__u8e3s4.low_1 >>> numBits_0 | 0 | _this__u8e3s4.high_1 << (32 - numBits_0 | 0), _this__u8e3s4.high_1 >>> numBits_0 | 0);
          } else {
            var tmp;
            if (numBits_0 === 32) {
              tmp = new Long(_this__u8e3s4.high_1, 0);
            } else {
              tmp = new Long(_this__u8e3s4.high_1 >>> (numBits_0 - 32 | 0) | 0, 0);
            }
            return tmp;
          }
        }
      }
      function toNumber(_this__u8e3s4) {
        init_properties_longjs_kt_ttk8rv();
        return _this__u8e3s4.high_1 * 4294967296 + getLowBitsUnsigned(_this__u8e3s4);
      }
      function equalsLong(_this__u8e3s4, other) {
        init_properties_longjs_kt_ttk8rv();
        return _this__u8e3s4.high_1 === other.high_1 ? _this__u8e3s4.low_1 === other.low_1 : false;
      }
      function hashCode_0(l2) {
        init_properties_longjs_kt_ttk8rv();
        return l2.low_1 ^ l2.high_1;
      }
      function toStringImpl(_this__u8e3s4, radix) {
        init_properties_longjs_kt_ttk8rv();
        if (radix < 2 ? true : 36 < radix) {
          throw Exception_init_$Create$_0("radix out of range: " + radix);
        }
        if (isZero(_this__u8e3s4)) {
          return "0";
        }
        if (isNegative(_this__u8e3s4)) {
          if (equalsLong(_this__u8e3s4, get_MIN_VALUE())) {
            var radixLong = fromInt(radix);
            var div = _this__u8e3s4.div_9s1fi3_k$(radixLong);
            var rem = subtract(multiply(div, radixLong), _this__u8e3s4).toInt_1tsl84_k$();
            var tmp = toStringImpl(div, radix);
            var tmp$ret$1;
            {
              var tmp$ret$0;
              {
                tmp$ret$0 = rem;
              }
              var tmp0_unsafeCast = tmp$ret$0.toString(radix);
              tmp$ret$1 = tmp0_unsafeCast;
            }
            return tmp + tmp$ret$1;
          } else {
            return "-" + toStringImpl(negate(_this__u8e3s4), radix);
          }
        }
        var digitsPerTime = radix === 2 ? 31 : radix <= 10 ? 9 : radix <= 21 ? 7 : radix <= 35 ? 6 : 5;
        var radixToPower = fromNumber(Math.pow(radix, digitsPerTime));
        var rem_0 = _this__u8e3s4;
        var result = "";
        while (true) {
          var remDiv = rem_0.div_9s1fi3_k$(radixToPower);
          var intval = subtract(rem_0, multiply(remDiv, radixToPower)).toInt_1tsl84_k$();
          var tmp$ret$3;
          {
            var tmp$ret$2;
            {
              tmp$ret$2 = intval;
            }
            var tmp1_unsafeCast = tmp$ret$2.toString(radix);
            tmp$ret$3 = tmp1_unsafeCast;
          }
          var digits = tmp$ret$3;
          rem_0 = remDiv;
          if (isZero(rem_0)) {
            return digits + result;
          } else {
            while (digits.length < digitsPerTime) {
              digits = "0" + digits;
            }
            result = digits + result;
          }
        }
      }
      function fromInt(value) {
        init_properties_longjs_kt_ttk8rv();
        return new Long(value, value < 0 ? -1 : 0);
      }
      function isNegative(_this__u8e3s4) {
        init_properties_longjs_kt_ttk8rv();
        return _this__u8e3s4.high_1 < 0;
      }
      function isZero(_this__u8e3s4) {
        init_properties_longjs_kt_ttk8rv();
        return _this__u8e3s4.high_1 === 0 ? _this__u8e3s4.low_1 === 0 : false;
      }
      function isOdd(_this__u8e3s4) {
        init_properties_longjs_kt_ttk8rv();
        return (_this__u8e3s4.low_1 & 1) === 1;
      }
      function negate(_this__u8e3s4) {
        init_properties_longjs_kt_ttk8rv();
        return _this__u8e3s4.unaryMinus_6uz0qp_k$();
      }
      function lessThan(_this__u8e3s4, other) {
        init_properties_longjs_kt_ttk8rv();
        return compare(_this__u8e3s4, other) < 0;
      }
      function fromNumber(value) {
        init_properties_longjs_kt_ttk8rv();
        if (isNaN_0(value)) {
          return get_ZERO();
        } else if (value <= -9223372036854776e3) {
          return get_MIN_VALUE();
        } else if (value + 1 >= 9223372036854776e3) {
          return get_MAX_VALUE();
        } else if (value < 0) {
          return negate(fromNumber(-value));
        } else {
          var twoPwr32 = 4294967296;
          return new Long(jsBitwiseOr(value % twoPwr32, 0), jsBitwiseOr(value / twoPwr32, 0));
        }
      }
      function greaterThan(_this__u8e3s4, other) {
        init_properties_longjs_kt_ttk8rv();
        return compare(_this__u8e3s4, other) > 0;
      }
      function greaterThanOrEqual(_this__u8e3s4, other) {
        init_properties_longjs_kt_ttk8rv();
        return compare(_this__u8e3s4, other) >= 0;
      }
      function getLowBitsUnsigned(_this__u8e3s4) {
        init_properties_longjs_kt_ttk8rv();
        return _this__u8e3s4.low_1 >= 0 ? _this__u8e3s4.low_1 : 4294967296 + _this__u8e3s4.low_1;
      }
      function get_TWO_PWR_32_DBL_() {
        return TWO_PWR_32_DBL_;
      }
      var TWO_PWR_32_DBL_;
      function get_TWO_PWR_63_DBL_() {
        return TWO_PWR_63_DBL_;
      }
      var TWO_PWR_63_DBL_;
      var properties_initialized_longjs_kt_5aju7t;
      function init_properties_longjs_kt_ttk8rv() {
        if (properties_initialized_longjs_kt_5aju7t) {
        } else {
          properties_initialized_longjs_kt_5aju7t = true;
          ZERO = fromInt(0);
          ONE = fromInt(1);
          NEG_ONE = fromInt(-1);
          MAX_VALUE = new Long(-1, 2147483647);
          MIN_VALUE = new Long(0, -2147483648);
          TWO_PWR_24_ = fromInt(16777216);
        }
      }
      function withType(type2, array3) {
        array3.$type$ = type2;
        return array3;
      }
      function arrayConcat(args) {
        var len = args.length;
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = Array(len);
          tmp$ret$0 = tmp0_unsafeCast;
        }
        var typed = tmp$ret$0;
        var inductionVariable = 0;
        var last = len - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var arr = args[i];
            if (!(!(arr == null) ? isArray(arr) : false)) {
              typed[i] = [].slice.call(arr);
            } else {
              typed[i] = arr;
            }
          } while (!(i === last));
        return [].concat.apply([], typed);
      }
      function primitiveArrayConcat(args) {
        var size_local = 0;
        var inductionVariable = 0;
        var last = args.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp = size_local;
            var tmp$ret$1;
            {
              var tmp0_unsafeCast = args[i];
              var tmp$ret$0;
              {
                tmp$ret$0 = tmp0_unsafeCast;
              }
              tmp$ret$1 = tmp$ret$0;
            }
            size_local = tmp + tmp$ret$1.length | 0;
          } while (!(i === last));
        var a3 = args[0];
        var tmp$ret$2;
        {
          var tmp1_unsafeCast = new a3.constructor(size_local);
          tmp$ret$2 = tmp1_unsafeCast;
        }
        var result = tmp$ret$2;
        var tmp$ret$3;
        {
          tmp$ret$3 = a3;
        }
        if (tmp$ret$3.$type$ != null) {
          var tmp$ret$5;
          {
            var tmp$ret$4;
            {
              tmp$ret$4 = a3;
            }
            var tmp2_withType = tmp$ret$4.$type$;
            result.$type$ = tmp2_withType;
            tmp$ret$5 = result;
          }
        }
        size_local = 0;
        var inductionVariable_0 = 0;
        var last_0 = args.length - 1 | 0;
        if (inductionVariable_0 <= last_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            var tmp$ret$7;
            {
              var tmp3_unsafeCast = args[i_0];
              var tmp$ret$6;
              {
                tmp$ret$6 = tmp3_unsafeCast;
              }
              tmp$ret$7 = tmp$ret$6;
            }
            var arr = tmp$ret$7;
            var inductionVariable_1 = 0;
            var last_1 = arr.length - 1 | 0;
            if (inductionVariable_1 <= last_1)
              do {
                var j = inductionVariable_1;
                inductionVariable_1 = inductionVariable_1 + 1 | 0;
                var tmp3 = size_local;
                size_local = tmp3 + 1 | 0;
                result[tmp3] = arr[j];
              } while (!(j === last_1));
          } while (!(i_0 === last_0));
        var tmp$ret$9;
        {
          var tmp$ret$8;
          {
            tmp$ret$8 = result;
          }
          tmp$ret$9 = tmp$ret$8;
        }
        return tmp$ret$9;
      }
      function taggedArrayCopy(array3) {
        var res = array3.slice();
        res.$type$ = array3.$type$;
        var tmp$ret$0;
        {
          tmp$ret$0 = res;
        }
        return tmp$ret$0;
      }
      function numberToByte(a3) {
        return toByte(numberToInt(a3));
      }
      function toByte(a3) {
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = a3 << 24 >> 24;
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return tmp$ret$0;
      }
      function numberToInt(a3) {
        var tmp;
        if (a3 instanceof Long) {
          tmp = a3.toInt_1tsl84_k$();
        } else {
          tmp = doubleToInt(a3);
        }
        return tmp;
      }
      function doubleToInt(a3) {
        return a3 > 2147483647 ? 2147483647 : a3 < -2147483648 ? -2147483648 : jsBitwiseOr(a3, 0);
      }
      function numberToDouble(a3) {
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = +a3;
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return tmp$ret$0;
      }
      function numberToShort(a3) {
        return toShort(numberToInt(a3));
      }
      function toShort(a3) {
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = a3 << 16 >> 16;
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return tmp$ret$0;
      }
      function numberToLong(a3) {
        var tmp;
        if (a3 instanceof Long) {
          tmp = a3;
        } else {
          tmp = fromNumber(a3);
        }
        return tmp;
      }
      function numberToChar(a3) {
        var tmp$ret$0;
        {
          var tmp0_toUShort = numberToInt(a3);
          tmp$ret$0 = _UShort___init__impl__jigrne(toShort(tmp0_toUShort));
        }
        return _Char___init__impl__6a9atx_0(tmp$ret$0);
      }
      function toLong(a3) {
        return fromInt(a3);
      }
      function numberRangeToNumber(start2, endInclusive) {
        return new IntRange(start2, endInclusive);
      }
      function numberRangeToLong(start2, endInclusive) {
        return new LongRange(numberToLong(start2), endInclusive);
      }
      function get_propertyRefClassMetadataCache() {
        init_properties_reflectRuntime_kt_yf9l8h();
        return propertyRefClassMetadataCache;
      }
      var propertyRefClassMetadataCache;
      function metadataObject() {
        init_properties_reflectRuntime_kt_yf9l8h();
        var undef = void 0;
        return classMeta(undef, undef, undef, undef, undef, undef);
      }
      function getPropertyCallableRef(name, paramCount, type2, getter, setter) {
        init_properties_reflectRuntime_kt_yf9l8h();
        getter.get = getter;
        getter.set = setter;
        getter.callableName = name;
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = getPropertyRefClass(getter, getKPropMetadata(paramCount, setter, type2));
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return tmp$ret$0;
      }
      function getPropertyRefClass(obj, metadata) {
        init_properties_reflectRuntime_kt_yf9l8h();
        obj.$metadata$ = metadata;
        obj.constructor = obj;
        return obj;
      }
      function getKPropMetadata(paramCount, setter, type2) {
        init_properties_reflectRuntime_kt_yf9l8h();
        var mdata = get_propertyRefClassMetadataCache()[paramCount][setter == null ? 0 : 1];
        if (mdata.interfaces.length === 0) {
          var tmp$ret$0;
          {
            var tmp0_asDynamic = mdata.interfaces;
            tmp$ret$0 = tmp0_asDynamic;
          }
          tmp$ret$0.push(type2);
          if (mdata.interfacesCache == null) {
            mdata.interfacesCache = generateInterfaceCache();
          } else {
            ensureNotNull(mdata.interfacesCache).isComplete = false;
          }
          extendCacheWithSingle(ensureNotNull(mdata.interfacesCache), type2);
        }
        return mdata;
      }
      function getLocalDelegateReference(name, type2, mutable, lambda) {
        init_properties_reflectRuntime_kt_yf9l8h();
        return getPropertyCallableRef(name, 0, type2, lambda, mutable ? lambda : null);
      }
      var properties_initialized_reflectRuntime_kt_inkhwd;
      function init_properties_reflectRuntime_kt_yf9l8h() {
        if (properties_initialized_reflectRuntime_kt_inkhwd) {
        } else {
          properties_initialized_reflectRuntime_kt_inkhwd = true;
          var tmp$ret$11;
          {
            var tmp$ret$2;
            {
              var tmp0_arrayOf = [metadataObject(), metadataObject()];
              var tmp$ret$1;
              {
                var tmp$ret$0;
                {
                  tmp$ret$0 = tmp0_arrayOf;
                }
                tmp$ret$1 = tmp$ret$0;
              }
              tmp$ret$2 = tmp$ret$1;
            }
            var tmp = tmp$ret$2;
            var tmp$ret$5;
            {
              var tmp1_arrayOf = [metadataObject(), metadataObject()];
              var tmp$ret$4;
              {
                var tmp$ret$3;
                {
                  tmp$ret$3 = tmp1_arrayOf;
                }
                tmp$ret$4 = tmp$ret$3;
              }
              tmp$ret$5 = tmp$ret$4;
            }
            var tmp_0 = tmp$ret$5;
            var tmp$ret$8;
            {
              var tmp2_arrayOf = [metadataObject(), metadataObject()];
              var tmp$ret$7;
              {
                var tmp$ret$6;
                {
                  tmp$ret$6 = tmp2_arrayOf;
                }
                tmp$ret$7 = tmp$ret$6;
              }
              tmp$ret$8 = tmp$ret$7;
            }
            var tmp3_arrayOf = [tmp, tmp_0, tmp$ret$8];
            var tmp$ret$10;
            {
              var tmp$ret$9;
              {
                tmp$ret$9 = tmp3_arrayOf;
              }
              tmp$ret$10 = tmp$ret$9;
            }
            tmp$ret$11 = tmp$ret$10;
          }
          propertyRefClassMetadataCache = tmp$ret$11;
        }
      }
      function set_interfacesCounter(_set____db54di) {
        interfacesCounter = _set____db54di;
      }
      function get_interfacesCounter() {
        return interfacesCounter;
      }
      var interfacesCounter;
      function classMeta(name, interfaces, associatedObjectKey, associatedObjects, suspendArity, fastPrototype) {
        return createMetadata("class", name, interfaces, associatedObjectKey, associatedObjects, suspendArity, fastPrototype);
      }
      function createMetadata(kind, name, interfaces, associatedObjectKey, associatedObjects, suspendArity, fastPrototype) {
        return { kind, simpleName: name, interfaceId: kind === "interface" ? -1 : void 0, interfaces: interfaces || [], associatedObjectKey, associatedObjects, suspendArity, fastPrototype, $kClass$: void 0, interfacesCache: { isComplete: fastPrototype === void 0 && (interfaces === void 0 || interfaces.length === 0), implementInterfaceMemo: {} } };
      }
      function isArrayish(o) {
        return isJsArray(o) ? true : isView(o);
      }
      function isJsArray(obj) {
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = Array.isArray(obj);
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return tmp$ret$0;
      }
      function isInterface(obj, iface) {
        var tmp0_elvis_lhs = obj.constructor;
        var tmp;
        if (tmp0_elvis_lhs == null) {
          return false;
        } else {
          tmp = tmp0_elvis_lhs;
        }
        var ctor = tmp;
        return isInterfaceImpl(ctor, iface);
      }
      function isInterfaceImpl(ctor, iface) {
        if (ctor === iface) {
          return true;
        }
        var metadata = ctor.$metadata$;
        if (!(metadata == null) ? metadata.interfacesCache == null : false) {
          metadata.interfacesCache = generateInterfaceCache();
        }
        var tmp0_safe_receiver = metadata;
        var interfacesCache = tmp0_safe_receiver == null ? null : tmp0_safe_receiver.interfacesCache;
        var tmp;
        if (!(interfacesCache == null)) {
          if (!interfacesCache.isComplete) {
            completeInterfaceCache(ctor);
          }
          var tmp1_safe_receiver = iface.$metadata$;
          var tmp2_elvis_lhs = tmp1_safe_receiver == null ? null : tmp1_safe_receiver.interfaceId;
          var tmp_0;
          if (tmp2_elvis_lhs == null) {
            return false;
          } else {
            tmp_0 = tmp2_elvis_lhs;
          }
          var interfaceId = tmp_0;
          tmp = !!interfacesCache.implementInterfaceMemo[interfaceId];
        } else {
          var tmp3_safe_receiver = fastGetPrototype(ctor);
          var tmp4_elvis_lhs = tmp3_safe_receiver == null ? null : tmp3_safe_receiver.constructor;
          var tmp_1;
          if (tmp4_elvis_lhs == null) {
            return false;
          } else {
            tmp_1 = tmp4_elvis_lhs;
          }
          var constructor = tmp_1;
          tmp = isInterfaceImpl(constructor, iface);
        }
        return tmp;
      }
      function generateInterfaceCache() {
        return { isComplete: false, implementInterfaceMemo: {} };
      }
      function completeInterfaceCache(ctor) {
        var metadata = ctor.$metadata$;
        if (!(metadata == null) ? metadata.interfacesCache == null : false) {
          metadata.interfacesCache = generateInterfaceCache();
        }
        var tmp0_safe_receiver = metadata;
        var interfacesCache = tmp0_safe_receiver == null ? null : tmp0_safe_receiver.interfacesCache;
        if (!(interfacesCache == null)) {
          if (interfacesCache.isComplete === true) {
            return interfacesCache;
          }
          var indexedObject = metadata.interfaces;
          var inductionVariable = 0;
          var last = indexedObject.length;
          while (inductionVariable < last) {
            var i = indexedObject[inductionVariable];
            inductionVariable = inductionVariable + 1 | 0;
            extendCacheWithSingle(interfacesCache, i);
            extendCacheWith(interfacesCache, completeInterfaceCache(i));
          }
        }
        var tmp2_safe_receiver = fastGetPrototype(ctor);
        var tmp3_safe_receiver = tmp2_safe_receiver == null ? null : tmp2_safe_receiver.constructor;
        var tmp;
        if (tmp3_safe_receiver == null) {
          tmp = null;
        } else {
          var tmp$ret$0;
          {
            {
            }
            tmp$ret$0 = completeInterfaceCache(tmp3_safe_receiver);
          }
          tmp = tmp$ret$0;
        }
        var parentInterfacesCache = tmp;
        var tmp4_safe_receiver = interfacesCache;
        var tmp_0;
        if (tmp4_safe_receiver == null) {
          tmp_0 = null;
        } else {
          var tmp$ret$1;
          {
            {
            }
            {
              extendCacheWith(tmp4_safe_receiver, parentInterfacesCache);
              tmp4_safe_receiver.isComplete = true;
            }
            tmp$ret$1 = tmp4_safe_receiver;
          }
          tmp_0 = tmp$ret$1;
        }
        var tmp5_elvis_lhs = tmp_0;
        return tmp5_elvis_lhs == null ? parentInterfacesCache : tmp5_elvis_lhs;
      }
      function fastGetPrototype(ctor) {
        var tmp0_safe_receiver = ctor.$metadata$;
        var tmp;
        if (tmp0_safe_receiver == null) {
          tmp = null;
        } else {
          var tmp$ret$1;
          {
            {
            }
            var tmp$ret$0;
            {
              if (tmp0_safe_receiver.fastPrototype == null) {
                tmp0_safe_receiver.fastPrototype = getPrototype(ctor);
              }
              tmp$ret$0 = tmp0_safe_receiver.fastPrototype;
            }
            tmp$ret$1 = tmp$ret$0;
          }
          tmp = tmp$ret$1;
        }
        var tmp1_elvis_lhs = tmp;
        return tmp1_elvis_lhs == null ? getPrototype(ctor) : tmp1_elvis_lhs;
      }
      function extendCacheWithSingle(_this__u8e3s4, intr) {
        _this__u8e3s4.implementInterfaceMemo[getOrDefineInterfaceId(intr)] = true;
      }
      function extendCacheWith(_this__u8e3s4, cache) {
        var tmp0_safe_receiver = cache;
        var tmp1_elvis_lhs = tmp0_safe_receiver == null ? null : tmp0_safe_receiver.implementInterfaceMemo;
        var tmp;
        if (tmp1_elvis_lhs == null) {
          return Unit_getInstance();
        } else {
          tmp = tmp1_elvis_lhs;
        }
        var anotherInterfaceMemo = tmp;
        Object.assign(_this__u8e3s4.implementInterfaceMemo, anotherInterfaceMemo);
      }
      function getPrototype(_this__u8e3s4) {
        var tmp0_safe_receiver = _this__u8e3s4.prototype;
        var tmp;
        if (tmp0_safe_receiver == null) {
          tmp = null;
        } else {
          var tmp$ret$2;
          {
            {
            }
            var tmp$ret$1;
            {
              var tmp$ret$0;
              {
                var tmp0_unsafeCast = Object.getPrototypeOf(tmp0_safe_receiver);
                tmp$ret$0 = tmp0_unsafeCast;
              }
              tmp$ret$1 = tmp$ret$0;
            }
            tmp$ret$2 = tmp$ret$1;
          }
          tmp = tmp$ret$2;
        }
        return tmp;
      }
      function getOrDefineInterfaceId(_this__u8e3s4) {
        var tmp$ret$1;
        {
          var tmp0_unsafeCast = _this__u8e3s4.$metadata$;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_unsafeCast;
          }
          tmp$ret$1 = tmp$ret$0;
        }
        var metadata = tmp$ret$1;
        var tmp0_elvis_lhs = metadata.interfaceId;
        var interfaceId = tmp0_elvis_lhs == null ? -1 : tmp0_elvis_lhs;
        var tmp;
        if (!equals(interfaceId, -1)) {
          tmp = interfaceId;
        } else {
          var tmp1 = interfacesCounter;
          interfacesCounter = tmp1 + 1 | 0;
          var result = tmp1;
          metadata.interfaceId = result;
          tmp = result;
        }
        return tmp;
      }
      function isArray(obj) {
        var tmp;
        if (isJsArray(obj)) {
          var tmp$ret$0;
          {
            tmp$ret$0 = obj;
          }
          tmp = !tmp$ret$0.$type$;
        } else {
          tmp = false;
        }
        return tmp;
      }
      function isObject2(obj) {
        var objTypeOf = typeof obj;
        var tmp0_subject = objTypeOf;
        switch (tmp0_subject) {
          case "string":
            return true;
          case "number":
            return true;
          case "boolean":
            return true;
          case "function":
            return true;
          default:
            return jsInstanceOf(obj, Object);
        }
      }
      function isSuspendFunction(obj, arity) {
        if (typeof obj === "function") {
          var tmp$ret$0;
          {
            var tmp0_unsafeCast = obj.$arity;
            tmp$ret$0 = tmp0_unsafeCast;
          }
          return tmp$ret$0 === arity;
        }
        if (typeof obj === "object" ? jsIn("$metadata$", obj.constructor) : false) {
          var tmp$ret$1;
          {
            var tmp1_unsafeCast = obj.constructor;
            tmp$ret$1 = tmp1_unsafeCast;
          }
          var tmp0_safe_receiver = tmp$ret$1.$metadata$;
          var tmp1_safe_receiver = tmp0_safe_receiver == null ? null : tmp0_safe_receiver.suspendArity;
          var tmp;
          if (tmp1_safe_receiver == null) {
            tmp = null;
          } else {
            var tmp$ret$2;
            {
              {
              }
              var result = false;
              var tmp0_iterator = arrayIterator(tmp1_safe_receiver);
              $l$loop:
                while (tmp0_iterator.hasNext_bitz1p_k$()) {
                  var item = tmp0_iterator.next_20eer_k$();
                  if (arity === item) {
                    result = true;
                    break $l$loop;
                  }
                }
              return result;
            }
            tmp = tmp$ret$2;
          }
          var tmp2_elvis_lhs = tmp;
          return tmp2_elvis_lhs == null ? false : tmp2_elvis_lhs;
        }
        return false;
      }
      function isNumber2(a3) {
        var tmp;
        if (typeof a3 === "number") {
          tmp = true;
        } else {
          tmp = a3 instanceof Long;
        }
        return tmp;
      }
      function isComparable(value) {
        var type2 = typeof value;
        return ((type2 === "string" ? true : type2 === "boolean") ? true : isNumber2(value)) ? true : isInterface(value, get_js(getKClass(Comparable)));
      }
      function isCharSequence(value) {
        return typeof value === "string" ? true : isInterface(value, get_js(getKClass(CharSequence)));
      }
      function isBooleanArray(a3) {
        return isJsArray(a3) ? a3.$type$ === "BooleanArray" : false;
      }
      function isByteArray(a3) {
        return jsInstanceOf(a3, Int8Array);
      }
      function isShortArray(a3) {
        return jsInstanceOf(a3, Int16Array);
      }
      function isCharArray(a3) {
        return jsInstanceOf(a3, Uint16Array) ? a3.$type$ === "CharArray" : false;
      }
      function isIntArray(a3) {
        return jsInstanceOf(a3, Int32Array);
      }
      function isFloatArray(a3) {
        return jsInstanceOf(a3, Float32Array);
      }
      function isLongArray(a3) {
        return isJsArray(a3) ? a3.$type$ === "LongArray" : false;
      }
      function isDoubleArray(a3) {
        return jsInstanceOf(a3, Float64Array);
      }
      function interfaceMeta(name, interfaces, associatedObjectKey, associatedObjects, suspendArity) {
        return createMetadata("interface", name, interfaces, associatedObjectKey, associatedObjects, suspendArity, void 0);
      }
      function objectMeta(name, interfaces, associatedObjectKey, associatedObjects, suspendArity, fastPrototype) {
        return createMetadata("object", name, interfaces, associatedObjectKey, associatedObjects, suspendArity, fastPrototype);
      }
      function jsIsType(obj, jsClass) {
        if (jsClass === Object) {
          return isObject2(obj);
        }
        if ((obj == null ? true : jsClass == null) ? true : !(typeof obj === "object") ? !(typeof obj === "function") : false) {
          return false;
        }
        if (typeof jsClass === "function" ? jsInstanceOf(obj, jsClass) : false) {
          return true;
        }
        var proto = jsGetPrototypeOf(jsClass);
        var tmp0_safe_receiver = proto;
        var constructor = tmp0_safe_receiver == null ? null : tmp0_safe_receiver.constructor;
        if (constructor != null ? jsIn("$metadata$", constructor) : false) {
          var metadata = constructor.$metadata$;
          if (metadata.kind === "object") {
            return obj === jsClass;
          }
        }
        var klassMetadata = jsClass.$metadata$;
        if (klassMetadata == null) {
          return jsInstanceOf(obj, jsClass);
        }
        if (klassMetadata.kind === "interface" ? obj.constructor != null : false) {
          return isInterfaceImpl(obj.constructor, jsClass);
        }
        return false;
      }
      function jsGetPrototypeOf(jsClass) {
        return Object.getPrototypeOf(jsClass);
      }
      function throwLinkageError(message) {
        throw new IrLinkageError(message);
      }
      function IrLinkageError(message) {
        Error_init_$Init$_0(message, this);
        captureStack(this, IrLinkageError);
      }
      IrLinkageError.$metadata$ = classMeta("IrLinkageError", void 0, void 0, void 0, void 0, Error_0.prototype);
      function copyOf(_this__u8e3s4) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _this__u8e3s4;
        }
        return tmp$ret$0.slice();
      }
      function copyOf_0(_this__u8e3s4) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _this__u8e3s4;
        }
        return tmp$ret$0.slice();
      }
      function plus_1(_this__u8e3s4, elements) {
        var tmp$ret$0;
        {
          tmp$ret$0 = _this__u8e3s4;
        }
        return tmp$ret$0.concat(elements);
      }
      function copyOfRange(_this__u8e3s4, fromIndex, toIndex) {
        Companion_getInstance().checkRangeIndexes_5hjybp_k$(fromIndex, toIndex, _this__u8e3s4.length);
        var tmp$ret$0;
        {
          tmp$ret$0 = _this__u8e3s4;
        }
        return tmp$ret$0.slice(fromIndex, toIndex);
      }
      function copyInto(_this__u8e3s4, destination, destinationOffset, startIndex, endIndex) {
        arrayCopy(_this__u8e3s4, destination, destinationOffset, startIndex, endIndex);
        return destination;
      }
      function asList(_this__u8e3s4) {
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = _this__u8e3s4;
          }
          tmp$ret$1 = tmp$ret$0;
        }
        return new ArrayList(tmp$ret$1);
      }
      function contentEquals_3(_this__u8e3s4, other) {
        return contentEqualsInternal(_this__u8e3s4, other);
      }
      function contentEquals_4(_this__u8e3s4, other) {
        return contentEqualsInternal(_this__u8e3s4, other);
      }
      function contentEquals_5(_this__u8e3s4, other) {
        return contentEqualsInternal(_this__u8e3s4, other);
      }
      function contentEquals_6(_this__u8e3s4, other) {
        return contentEqualsInternal(_this__u8e3s4, other);
      }
      function contentEquals_7(_this__u8e3s4, other) {
        return contentEqualsInternal(_this__u8e3s4, other);
      }
      function contentEquals_8(_this__u8e3s4, other) {
        return contentEqualsInternal(_this__u8e3s4, other);
      }
      function contentEquals_9(_this__u8e3s4, other) {
        return contentEqualsInternal(_this__u8e3s4, other);
      }
      function contentEquals_10(_this__u8e3s4, other) {
        return contentEqualsInternal(_this__u8e3s4, other);
      }
      function contentEquals_11(_this__u8e3s4, other) {
        return contentEqualsInternal(_this__u8e3s4, other);
      }
      function minOf(a3, b) {
        return Math.min(a3, b);
      }
      function _get_resultContinuation__9wf8ix($this) {
        return $this.resultContinuation_1;
      }
      function _get__context__gmdhsr($this) {
        return $this._context_1;
      }
      function _set_intercepted___wojxxj($this, _set____db54di) {
        $this.intercepted__1 = _set____db54di;
      }
      function _get_intercepted___h4t7df($this) {
        return $this.intercepted__1;
      }
      function releaseIntercepted($this) {
        var intercepted = $this.intercepted__1;
        if (!(intercepted == null) ? !(intercepted === $this) : false) {
          ensureNotNull($this.get_context_h02k06_k$().get_1pi7hg_k$(Key_getInstance())).releaseInterceptedContinuation_4i98ok_k$(intercepted);
        }
        $this.intercepted__1 = CompletedContinuation_getInstance();
      }
      function CoroutineImpl(resultContinuation) {
        this.resultContinuation_1 = resultContinuation;
        this.state_1 = 0;
        this.exceptionState_1 = 0;
        this.result_1 = null;
        this.exception_1 = null;
        this.finallyPath_1 = null;
        var tmp = this;
        var tmp0_safe_receiver = this.resultContinuation_1;
        tmp._context_1 = tmp0_safe_receiver == null ? null : tmp0_safe_receiver.get_context_h02k06_k$();
        this.intercepted__1 = null;
      }
      CoroutineImpl.prototype.set_state_a96kl8_k$ = function(_set____db54di) {
        this.state_1 = _set____db54di;
      };
      CoroutineImpl.prototype.get_state_iypx7s_k$ = function() {
        return this.state_1;
      };
      CoroutineImpl.prototype.set_exceptionState_s9sevl_k$ = function(_set____db54di) {
        this.exceptionState_1 = _set____db54di;
      };
      CoroutineImpl.prototype.get_exceptionState_wflpxn_k$ = function() {
        return this.exceptionState_1;
      };
      CoroutineImpl.prototype.set_result_ximc09_k$ = function(_set____db54di) {
        this.result_1 = _set____db54di;
      };
      CoroutineImpl.prototype.get_result_iyg5d2_k$ = function() {
        return this.result_1;
      };
      CoroutineImpl.prototype.set_exception_pwgeox_k$ = function(_set____db54di) {
        this.exception_1 = _set____db54di;
      };
      CoroutineImpl.prototype.get_exception_x0n6w6_k$ = function() {
        return this.exception_1;
      };
      CoroutineImpl.prototype.set_finallyPath_gfcru6_k$ = function(_set____db54di) {
        this.finallyPath_1 = _set____db54di;
      };
      CoroutineImpl.prototype.get_finallyPath_aqs201_k$ = function() {
        return this.finallyPath_1;
      };
      CoroutineImpl.prototype.get_context_h02k06_k$ = function() {
        return ensureNotNull(this._context_1);
      };
      CoroutineImpl.prototype.intercepted_vh228x_k$ = function() {
        var tmp2_elvis_lhs = this.intercepted__1;
        var tmp;
        if (tmp2_elvis_lhs == null) {
          var tmp$ret$0;
          {
            var tmp0_safe_receiver = this.get_context_h02k06_k$().get_1pi7hg_k$(Key_getInstance());
            var tmp1_elvis_lhs = tmp0_safe_receiver == null ? null : tmp0_safe_receiver.interceptContinuation_pbrjat_k$(this);
            var tmp0_also = tmp1_elvis_lhs == null ? this : tmp1_elvis_lhs;
            {
            }
            {
              this.intercepted__1 = tmp0_also;
            }
            tmp$ret$0 = tmp0_also;
          }
          tmp = tmp$ret$0;
        } else {
          tmp = tmp2_elvis_lhs;
        }
        return tmp;
      };
      CoroutineImpl.prototype.resumeWith_7onugl_k$ = function(result) {
        var current = this;
        var tmp$ret$0;
        {
          var tmp;
          if (_Result___get_isFailure__impl__jpiriv(result)) {
            tmp = null;
          } else {
            var tmp_0 = _Result___get_value__impl__bjfvqg(result);
            tmp = (tmp_0 == null ? true : isObject2(tmp_0)) ? tmp_0 : THROW_CCE();
          }
          tmp$ret$0 = tmp;
        }
        var currentResult = tmp$ret$0;
        var currentException = Result__exceptionOrNull_impl_p6xea9(result);
        while (true) {
          var tmp$ret$6;
          {
            var tmp0_with = current;
            {
            }
            if (currentException == null) {
              tmp0_with.result_1 = currentResult;
            } else {
              tmp0_with.state_1 = tmp0_with.exceptionState_1;
              tmp0_with.exception_1 = currentException;
            }
            try {
              var outcome = tmp0_with.doResume_5yljmg_k$();
              if (outcome === get_COROUTINE_SUSPENDED())
                return Unit_getInstance();
              currentResult = outcome;
              currentException = null;
            } catch ($p) {
              currentResult = null;
              var tmp$ret$1;
              {
                tmp$ret$1 = $p;
              }
              currentException = tmp$ret$1;
            }
            releaseIntercepted(tmp0_with);
            var completion = ensureNotNull(tmp0_with.resultContinuation_1);
            var tmp_1;
            if (completion instanceof CoroutineImpl) {
              current = completion;
              tmp_1 = Unit_getInstance();
            } else {
              if (!(currentException == null)) {
                var tmp$ret$3;
                {
                  var tmp0_resumeWithException = ensureNotNull(currentException);
                  var tmp$ret$2;
                  {
                    var tmp0_failure = Companion_getInstance_3();
                    tmp$ret$2 = _Result___init__impl__xyqfz8(createFailure(tmp0_resumeWithException));
                  }
                  tmp$ret$3 = completion.resumeWith_s3a3yh_k$(tmp$ret$2);
                }
              } else {
                var tmp$ret$5;
                {
                  var tmp1_resume = currentResult;
                  var tmp$ret$4;
                  {
                    var tmp0_success = Companion_getInstance_3();
                    tmp$ret$4 = _Result___init__impl__xyqfz8(tmp1_resume);
                  }
                  tmp$ret$5 = completion.resumeWith_s3a3yh_k$(tmp$ret$4);
                }
              }
              return Unit_getInstance();
            }
            tmp$ret$6 = tmp_1;
          }
        }
      };
      CoroutineImpl.prototype.resumeWith_s3a3yh_k$ = function(result) {
        return this.resumeWith_7onugl_k$(result);
      };
      CoroutineImpl.prototype.create_lvr374_k$ = function(completion) {
        throw UnsupportedOperationException_init_$Create$_0("create(Continuation) has not been overridden");
      };
      CoroutineImpl.prototype.create_xubfvz_k$ = function(value, completion) {
        throw UnsupportedOperationException_init_$Create$_0("create(Any?;Continuation) has not been overridden");
      };
      CoroutineImpl.$metadata$ = classMeta("CoroutineImpl", [Continuation]);
      function CompletedContinuation() {
        CompletedContinuation_instance = this;
      }
      CompletedContinuation.prototype.get_context_h02k06_k$ = function() {
        throw IllegalStateException_init_$Create$_0("This continuation is already complete");
      };
      CompletedContinuation.prototype.resumeWith_7onugl_k$ = function(result) {
        {
          throw IllegalStateException_init_$Create$_0("This continuation is already complete");
        }
      };
      CompletedContinuation.prototype.resumeWith_s3a3yh_k$ = function(result) {
        return this.resumeWith_7onugl_k$(result);
      };
      CompletedContinuation.prototype.toString = function() {
        return "This continuation is already complete";
      };
      CompletedContinuation.$metadata$ = objectMeta("CompletedContinuation", [Continuation]);
      var CompletedContinuation_instance;
      function CompletedContinuation_getInstance() {
        if (CompletedContinuation_instance == null)
          new CompletedContinuation();
        return CompletedContinuation_instance;
      }
      function invokeSuspendSuperType(_this__u8e3s4, completion) {
        throw new NotImplementedError("It is intrinsic method");
      }
      function invokeSuspendSuperTypeWithReceiver(_this__u8e3s4, receiver, completion) {
        throw new NotImplementedError("It is intrinsic method");
      }
      function invokeSuspendSuperTypeWithReceiverAndParam(_this__u8e3s4, receiver, param, completion) {
        throw new NotImplementedError("It is intrinsic method");
      }
      function Exception_init_$Init$($this) {
        extendThrowable($this, void 0, void 0);
        Exception.call($this);
        return $this;
      }
      function Exception_init_$Create$() {
        var tmp = Exception_init_$Init$(Object.create(Exception.prototype));
        captureStack(tmp, Exception_init_$Create$);
        return tmp;
      }
      function Exception_init_$Init$_0(message, $this) {
        extendThrowable($this, message, void 0);
        Exception.call($this);
        return $this;
      }
      function Exception_init_$Create$_0(message) {
        var tmp = Exception_init_$Init$_0(message, Object.create(Exception.prototype));
        captureStack(tmp, Exception_init_$Create$_0);
        return tmp;
      }
      function Exception_init_$Init$_1(message, cause, $this) {
        extendThrowable($this, message, cause);
        Exception.call($this);
        return $this;
      }
      function Exception_init_$Create$_1(message, cause) {
        var tmp = Exception_init_$Init$_1(message, cause, Object.create(Exception.prototype));
        captureStack(tmp, Exception_init_$Create$_1);
        return tmp;
      }
      function Exception_init_$Init$_2(cause, $this) {
        extendThrowable($this, void 0, cause);
        Exception.call($this);
        return $this;
      }
      function Exception_init_$Create$_2(cause) {
        var tmp = Exception_init_$Init$_2(cause, Object.create(Exception.prototype));
        captureStack(tmp, Exception_init_$Create$_2);
        return tmp;
      }
      function Exception() {
        captureStack(this, Exception);
      }
      Exception.$metadata$ = classMeta("Exception", void 0, void 0, void 0, void 0, Error.prototype);
      function Error_init_$Init$($this) {
        extendThrowable($this, void 0, void 0);
        Error_0.call($this);
        return $this;
      }
      function Error_init_$Create$() {
        var tmp = Error_init_$Init$(Object.create(Error_0.prototype));
        captureStack(tmp, Error_init_$Create$);
        return tmp;
      }
      function Error_init_$Init$_0(message, $this) {
        extendThrowable($this, message, void 0);
        Error_0.call($this);
        return $this;
      }
      function Error_init_$Create$_0(message) {
        var tmp = Error_init_$Init$_0(message, Object.create(Error_0.prototype));
        captureStack(tmp, Error_init_$Create$_0);
        return tmp;
      }
      function Error_init_$Init$_1(message, cause, $this) {
        extendThrowable($this, message, cause);
        Error_0.call($this);
        return $this;
      }
      function Error_init_$Create$_1(message, cause) {
        var tmp = Error_init_$Init$_1(message, cause, Object.create(Error_0.prototype));
        captureStack(tmp, Error_init_$Create$_1);
        return tmp;
      }
      function Error_init_$Init$_2(cause, $this) {
        extendThrowable($this, void 0, cause);
        Error_0.call($this);
        return $this;
      }
      function Error_init_$Create$_2(cause) {
        var tmp = Error_init_$Init$_2(cause, Object.create(Error_0.prototype));
        captureStack(tmp, Error_init_$Create$_2);
        return tmp;
      }
      function Error_0() {
        captureStack(this, Error_0);
      }
      Error_0.$metadata$ = classMeta("Error", void 0, void 0, void 0, void 0, Error.prototype);
      function IllegalArgumentException_init_$Init$($this) {
        RuntimeException_init_$Init$($this);
        IllegalArgumentException.call($this);
        return $this;
      }
      function IllegalArgumentException_init_$Create$() {
        var tmp = IllegalArgumentException_init_$Init$(Object.create(IllegalArgumentException.prototype));
        captureStack(tmp, IllegalArgumentException_init_$Create$);
        return tmp;
      }
      function IllegalArgumentException_init_$Init$_0(message, $this) {
        RuntimeException_init_$Init$_0(message, $this);
        IllegalArgumentException.call($this);
        return $this;
      }
      function IllegalArgumentException_init_$Create$_0(message) {
        var tmp = IllegalArgumentException_init_$Init$_0(message, Object.create(IllegalArgumentException.prototype));
        captureStack(tmp, IllegalArgumentException_init_$Create$_0);
        return tmp;
      }
      function IllegalArgumentException_init_$Init$_1(message, cause, $this) {
        RuntimeException_init_$Init$_1(message, cause, $this);
        IllegalArgumentException.call($this);
        return $this;
      }
      function IllegalArgumentException_init_$Create$_1(message, cause) {
        var tmp = IllegalArgumentException_init_$Init$_1(message, cause, Object.create(IllegalArgumentException.prototype));
        captureStack(tmp, IllegalArgumentException_init_$Create$_1);
        return tmp;
      }
      function IllegalArgumentException_init_$Init$_2(cause, $this) {
        RuntimeException_init_$Init$_2(cause, $this);
        IllegalArgumentException.call($this);
        return $this;
      }
      function IllegalArgumentException_init_$Create$_2(cause) {
        var tmp = IllegalArgumentException_init_$Init$_2(cause, Object.create(IllegalArgumentException.prototype));
        captureStack(tmp, IllegalArgumentException_init_$Create$_2);
        return tmp;
      }
      function IllegalArgumentException() {
        captureStack(this, IllegalArgumentException);
      }
      IllegalArgumentException.$metadata$ = classMeta("IllegalArgumentException", void 0, void 0, void 0, void 0, RuntimeException.prototype);
      function NoSuchElementException_init_$Init$($this) {
        RuntimeException_init_$Init$($this);
        NoSuchElementException.call($this);
        return $this;
      }
      function NoSuchElementException_init_$Create$() {
        var tmp = NoSuchElementException_init_$Init$(Object.create(NoSuchElementException.prototype));
        captureStack(tmp, NoSuchElementException_init_$Create$);
        return tmp;
      }
      function NoSuchElementException_init_$Init$_0(message, $this) {
        RuntimeException_init_$Init$_0(message, $this);
        NoSuchElementException.call($this);
        return $this;
      }
      function NoSuchElementException_init_$Create$_0(message) {
        var tmp = NoSuchElementException_init_$Init$_0(message, Object.create(NoSuchElementException.prototype));
        captureStack(tmp, NoSuchElementException_init_$Create$_0);
        return tmp;
      }
      function NoSuchElementException() {
        captureStack(this, NoSuchElementException);
      }
      NoSuchElementException.$metadata$ = classMeta("NoSuchElementException", void 0, void 0, void 0, void 0, RuntimeException.prototype);
      function RuntimeException_init_$Init$($this) {
        Exception_init_$Init$($this);
        RuntimeException.call($this);
        return $this;
      }
      function RuntimeException_init_$Create$() {
        var tmp = RuntimeException_init_$Init$(Object.create(RuntimeException.prototype));
        captureStack(tmp, RuntimeException_init_$Create$);
        return tmp;
      }
      function RuntimeException_init_$Init$_0(message, $this) {
        Exception_init_$Init$_0(message, $this);
        RuntimeException.call($this);
        return $this;
      }
      function RuntimeException_init_$Create$_0(message) {
        var tmp = RuntimeException_init_$Init$_0(message, Object.create(RuntimeException.prototype));
        captureStack(tmp, RuntimeException_init_$Create$_0);
        return tmp;
      }
      function RuntimeException_init_$Init$_1(message, cause, $this) {
        Exception_init_$Init$_1(message, cause, $this);
        RuntimeException.call($this);
        return $this;
      }
      function RuntimeException_init_$Create$_1(message, cause) {
        var tmp = RuntimeException_init_$Init$_1(message, cause, Object.create(RuntimeException.prototype));
        captureStack(tmp, RuntimeException_init_$Create$_1);
        return tmp;
      }
      function RuntimeException_init_$Init$_2(cause, $this) {
        Exception_init_$Init$_2(cause, $this);
        RuntimeException.call($this);
        return $this;
      }
      function RuntimeException_init_$Create$_2(cause) {
        var tmp = RuntimeException_init_$Init$_2(cause, Object.create(RuntimeException.prototype));
        captureStack(tmp, RuntimeException_init_$Create$_2);
        return tmp;
      }
      function RuntimeException() {
        captureStack(this, RuntimeException);
      }
      RuntimeException.$metadata$ = classMeta("RuntimeException", void 0, void 0, void 0, void 0, Exception.prototype);
      function IllegalStateException_init_$Init$($this) {
        RuntimeException_init_$Init$($this);
        IllegalStateException.call($this);
        return $this;
      }
      function IllegalStateException_init_$Create$() {
        var tmp = IllegalStateException_init_$Init$(Object.create(IllegalStateException.prototype));
        captureStack(tmp, IllegalStateException_init_$Create$);
        return tmp;
      }
      function IllegalStateException_init_$Init$_0(message, $this) {
        RuntimeException_init_$Init$_0(message, $this);
        IllegalStateException.call($this);
        return $this;
      }
      function IllegalStateException_init_$Create$_0(message) {
        var tmp = IllegalStateException_init_$Init$_0(message, Object.create(IllegalStateException.prototype));
        captureStack(tmp, IllegalStateException_init_$Create$_0);
        return tmp;
      }
      function IllegalStateException_init_$Init$_1(message, cause, $this) {
        RuntimeException_init_$Init$_1(message, cause, $this);
        IllegalStateException.call($this);
        return $this;
      }
      function IllegalStateException_init_$Create$_1(message, cause) {
        var tmp = IllegalStateException_init_$Init$_1(message, cause, Object.create(IllegalStateException.prototype));
        captureStack(tmp, IllegalStateException_init_$Create$_1);
        return tmp;
      }
      function IllegalStateException_init_$Init$_2(cause, $this) {
        RuntimeException_init_$Init$_2(cause, $this);
        IllegalStateException.call($this);
        return $this;
      }
      function IllegalStateException_init_$Create$_2(cause) {
        var tmp = IllegalStateException_init_$Init$_2(cause, Object.create(IllegalStateException.prototype));
        captureStack(tmp, IllegalStateException_init_$Create$_2);
        return tmp;
      }
      function IllegalStateException() {
        captureStack(this, IllegalStateException);
      }
      IllegalStateException.$metadata$ = classMeta("IllegalStateException", void 0, void 0, void 0, void 0, RuntimeException.prototype);
      function UnsupportedOperationException_init_$Init$($this) {
        RuntimeException_init_$Init$($this);
        UnsupportedOperationException.call($this);
        return $this;
      }
      function UnsupportedOperationException_init_$Create$() {
        var tmp = UnsupportedOperationException_init_$Init$(Object.create(UnsupportedOperationException.prototype));
        captureStack(tmp, UnsupportedOperationException_init_$Create$);
        return tmp;
      }
      function UnsupportedOperationException_init_$Init$_0(message, $this) {
        RuntimeException_init_$Init$_0(message, $this);
        UnsupportedOperationException.call($this);
        return $this;
      }
      function UnsupportedOperationException_init_$Create$_0(message) {
        var tmp = UnsupportedOperationException_init_$Init$_0(message, Object.create(UnsupportedOperationException.prototype));
        captureStack(tmp, UnsupportedOperationException_init_$Create$_0);
        return tmp;
      }
      function UnsupportedOperationException_init_$Init$_1(message, cause, $this) {
        RuntimeException_init_$Init$_1(message, cause, $this);
        UnsupportedOperationException.call($this);
        return $this;
      }
      function UnsupportedOperationException_init_$Create$_1(message, cause) {
        var tmp = UnsupportedOperationException_init_$Init$_1(message, cause, Object.create(UnsupportedOperationException.prototype));
        captureStack(tmp, UnsupportedOperationException_init_$Create$_1);
        return tmp;
      }
      function UnsupportedOperationException_init_$Init$_2(cause, $this) {
        RuntimeException_init_$Init$_2(cause, $this);
        UnsupportedOperationException.call($this);
        return $this;
      }
      function UnsupportedOperationException_init_$Create$_2(cause) {
        var tmp = UnsupportedOperationException_init_$Init$_2(cause, Object.create(UnsupportedOperationException.prototype));
        captureStack(tmp, UnsupportedOperationException_init_$Create$_2);
        return tmp;
      }
      function UnsupportedOperationException() {
        captureStack(this, UnsupportedOperationException);
      }
      UnsupportedOperationException.$metadata$ = classMeta("UnsupportedOperationException", void 0, void 0, void 0, void 0, RuntimeException.prototype);
      function IndexOutOfBoundsException_init_$Init$($this) {
        RuntimeException_init_$Init$($this);
        IndexOutOfBoundsException.call($this);
        return $this;
      }
      function IndexOutOfBoundsException_init_$Create$() {
        var tmp = IndexOutOfBoundsException_init_$Init$(Object.create(IndexOutOfBoundsException.prototype));
        captureStack(tmp, IndexOutOfBoundsException_init_$Create$);
        return tmp;
      }
      function IndexOutOfBoundsException_init_$Init$_0(message, $this) {
        RuntimeException_init_$Init$_0(message, $this);
        IndexOutOfBoundsException.call($this);
        return $this;
      }
      function IndexOutOfBoundsException_init_$Create$_0(message) {
        var tmp = IndexOutOfBoundsException_init_$Init$_0(message, Object.create(IndexOutOfBoundsException.prototype));
        captureStack(tmp, IndexOutOfBoundsException_init_$Create$_0);
        return tmp;
      }
      function IndexOutOfBoundsException() {
        captureStack(this, IndexOutOfBoundsException);
      }
      IndexOutOfBoundsException.$metadata$ = classMeta("IndexOutOfBoundsException", void 0, void 0, void 0, void 0, RuntimeException.prototype);
      function NullPointerException_init_$Init$($this) {
        RuntimeException_init_$Init$($this);
        NullPointerException.call($this);
        return $this;
      }
      function NullPointerException_init_$Create$() {
        var tmp = NullPointerException_init_$Init$(Object.create(NullPointerException.prototype));
        captureStack(tmp, NullPointerException_init_$Create$);
        return tmp;
      }
      function NullPointerException_init_$Init$_0(message, $this) {
        RuntimeException_init_$Init$_0(message, $this);
        NullPointerException.call($this);
        return $this;
      }
      function NullPointerException_init_$Create$_0(message) {
        var tmp = NullPointerException_init_$Init$_0(message, Object.create(NullPointerException.prototype));
        captureStack(tmp, NullPointerException_init_$Create$_0);
        return tmp;
      }
      function NullPointerException() {
        captureStack(this, NullPointerException);
      }
      NullPointerException.$metadata$ = classMeta("NullPointerException", void 0, void 0, void 0, void 0, RuntimeException.prototype);
      function NoWhenBranchMatchedException_init_$Init$($this) {
        RuntimeException_init_$Init$($this);
        NoWhenBranchMatchedException.call($this);
        return $this;
      }
      function NoWhenBranchMatchedException_init_$Create$() {
        var tmp = NoWhenBranchMatchedException_init_$Init$(Object.create(NoWhenBranchMatchedException.prototype));
        captureStack(tmp, NoWhenBranchMatchedException_init_$Create$);
        return tmp;
      }
      function NoWhenBranchMatchedException_init_$Init$_0(message, $this) {
        RuntimeException_init_$Init$_0(message, $this);
        NoWhenBranchMatchedException.call($this);
        return $this;
      }
      function NoWhenBranchMatchedException_init_$Create$_0(message) {
        var tmp = NoWhenBranchMatchedException_init_$Init$_0(message, Object.create(NoWhenBranchMatchedException.prototype));
        captureStack(tmp, NoWhenBranchMatchedException_init_$Create$_0);
        return tmp;
      }
      function NoWhenBranchMatchedException_init_$Init$_1(message, cause, $this) {
        RuntimeException_init_$Init$_1(message, cause, $this);
        NoWhenBranchMatchedException.call($this);
        return $this;
      }
      function NoWhenBranchMatchedException_init_$Create$_1(message, cause) {
        var tmp = NoWhenBranchMatchedException_init_$Init$_1(message, cause, Object.create(NoWhenBranchMatchedException.prototype));
        captureStack(tmp, NoWhenBranchMatchedException_init_$Create$_1);
        return tmp;
      }
      function NoWhenBranchMatchedException_init_$Init$_2(cause, $this) {
        RuntimeException_init_$Init$_2(cause, $this);
        NoWhenBranchMatchedException.call($this);
        return $this;
      }
      function NoWhenBranchMatchedException_init_$Create$_2(cause) {
        var tmp = NoWhenBranchMatchedException_init_$Init$_2(cause, Object.create(NoWhenBranchMatchedException.prototype));
        captureStack(tmp, NoWhenBranchMatchedException_init_$Create$_2);
        return tmp;
      }
      function NoWhenBranchMatchedException() {
        captureStack(this, NoWhenBranchMatchedException);
      }
      NoWhenBranchMatchedException.$metadata$ = classMeta("NoWhenBranchMatchedException", void 0, void 0, void 0, void 0, RuntimeException.prototype);
      function ClassCastException_init_$Init$($this) {
        RuntimeException_init_$Init$($this);
        ClassCastException.call($this);
        return $this;
      }
      function ClassCastException_init_$Create$() {
        var tmp = ClassCastException_init_$Init$(Object.create(ClassCastException.prototype));
        captureStack(tmp, ClassCastException_init_$Create$);
        return tmp;
      }
      function ClassCastException_init_$Init$_0(message, $this) {
        RuntimeException_init_$Init$_0(message, $this);
        ClassCastException.call($this);
        return $this;
      }
      function ClassCastException_init_$Create$_0(message) {
        var tmp = ClassCastException_init_$Init$_0(message, Object.create(ClassCastException.prototype));
        captureStack(tmp, ClassCastException_init_$Create$_0);
        return tmp;
      }
      function ClassCastException() {
        captureStack(this, ClassCastException);
      }
      ClassCastException.$metadata$ = classMeta("ClassCastException", void 0, void 0, void 0, void 0, RuntimeException.prototype);
      function UninitializedPropertyAccessException_init_$Init$($this) {
        RuntimeException_init_$Init$($this);
        UninitializedPropertyAccessException.call($this);
        return $this;
      }
      function UninitializedPropertyAccessException_init_$Create$() {
        var tmp = UninitializedPropertyAccessException_init_$Init$(Object.create(UninitializedPropertyAccessException.prototype));
        captureStack(tmp, UninitializedPropertyAccessException_init_$Create$);
        return tmp;
      }
      function UninitializedPropertyAccessException_init_$Init$_0(message, $this) {
        RuntimeException_init_$Init$_0(message, $this);
        UninitializedPropertyAccessException.call($this);
        return $this;
      }
      function UninitializedPropertyAccessException_init_$Create$_0(message) {
        var tmp = UninitializedPropertyAccessException_init_$Init$_0(message, Object.create(UninitializedPropertyAccessException.prototype));
        captureStack(tmp, UninitializedPropertyAccessException_init_$Create$_0);
        return tmp;
      }
      function UninitializedPropertyAccessException_init_$Init$_1(message, cause, $this) {
        RuntimeException_init_$Init$_1(message, cause, $this);
        UninitializedPropertyAccessException.call($this);
        return $this;
      }
      function UninitializedPropertyAccessException_init_$Create$_1(message, cause) {
        var tmp = UninitializedPropertyAccessException_init_$Init$_1(message, cause, Object.create(UninitializedPropertyAccessException.prototype));
        captureStack(tmp, UninitializedPropertyAccessException_init_$Create$_1);
        return tmp;
      }
      function UninitializedPropertyAccessException_init_$Init$_2(cause, $this) {
        RuntimeException_init_$Init$_2(cause, $this);
        UninitializedPropertyAccessException.call($this);
        return $this;
      }
      function UninitializedPropertyAccessException_init_$Create$_2(cause) {
        var tmp = UninitializedPropertyAccessException_init_$Init$_2(cause, Object.create(UninitializedPropertyAccessException.prototype));
        captureStack(tmp, UninitializedPropertyAccessException_init_$Create$_2);
        return tmp;
      }
      function UninitializedPropertyAccessException() {
        captureStack(this, UninitializedPropertyAccessException);
      }
      UninitializedPropertyAccessException.$metadata$ = classMeta("UninitializedPropertyAccessException", void 0, void 0, void 0, void 0, RuntimeException.prototype);
      function jsIn(lhs_hack, rhs_hack) {
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = lhs_hack in rhs_hack;
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return tmp$ret$0;
      }
      function jsBitwiseOr(lhs_hack, rhs_hack) {
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = lhs_hack | rhs_hack;
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return tmp$ret$0;
      }
      function jsTypeOf(value_hack) {
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = typeof value_hack;
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return tmp$ret$0;
      }
      function jsInstanceOf(obj_hack, jsClass_hack) {
        var tmp$ret$0;
        {
          var tmp0_unsafeCast = obj_hack instanceof jsClass_hack;
          tmp$ret$0 = tmp0_unsafeCast;
        }
        return tmp$ret$0;
      }
      function fromBits(_this__u8e3s4, bits2) {
        return doubleFromBits(bits2);
      }
      function toRawBits(_this__u8e3s4) {
        return doubleToRawBits(_this__u8e3s4);
      }
      function toString_2(_this__u8e3s4, radix) {
        return toStringImpl(_this__u8e3s4, checkRadix(radix));
      }
      function Function1() {
      }
      Function1.$metadata$ = interfaceMeta("Function1");
      function Function0() {
      }
      Function0.$metadata$ = interfaceMeta("Function0");
      function Function2() {
      }
      Function2.$metadata$ = interfaceMeta("Function2");
      function Function3() {
      }
      Function3.$metadata$ = interfaceMeta("Function3");
      function KFunction2() {
      }
      KFunction2.$metadata$ = interfaceMeta("KFunction2");
      function KFunction1() {
      }
      KFunction1.$metadata$ = interfaceMeta("KFunction1");
      function SuspendFunction0() {
      }
      SuspendFunction0.$metadata$ = interfaceMeta("SuspendFunction0");
      function SuspendFunction1() {
      }
      SuspendFunction1.$metadata$ = interfaceMeta("SuspendFunction1");
      function SuspendFunction2() {
      }
      SuspendFunction2.$metadata$ = interfaceMeta("SuspendFunction2");
      CombinedContext.prototype.plus_rgw9wi_k$ = plus;
      PI = 3.141592653589793;
      _stableSortingIsSupported = null;
      OBJECT_HASH_CODE_PROPERTY_NAME = "kotlinHashCodeValue$";
      POW_2_32 = 4294967296;
      TWO_PWR_32_DBL_ = 4294967296;
      TWO_PWR_63_DBL_ = 9223372036854776e3;
      interfacesCounter = 0;
      _.$_$ = _.$_$ || {};
      _.$_$.a = ArrayList_init_$Create$;
      _.$_$.b = IllegalArgumentException_init_$Create$_0;
      _.$_$.c = IllegalStateException_init_$Create$_0;
      _.$_$.d = RuntimeException_init_$Create$_0;
      _.$_$.e = _Char___init__impl__6a9atx;
      _.$_$.f = Default_getInstance;
      _.$_$.g = Unit_getInstance;
      _.$_$.h = println;
      _.$_$.i = classMeta;
      _.$_$.j = fillArrayVal;
      _.$_$.k = numberToInt;
      _.$_$.l = objectMeta;
      _.$_$.m = toLong;
      _.$_$.n = toString_1;
      _.$_$.o = get_PI;
      _.$_$.p = roundToInt_0;
      _.$_$.q = round;
      _.$_$.r = Char_0;
      _.$_$.s = Enum;
      _.$_$.t = THROW_ISE;
      _.$_$.u = ensureNotNull;
      _.$_$.v = throwUninitializedPropertyAccessException;
      return _;
    });
  }
});

// node_modules/oregondsp/kotlin/oregondsp.js
var require_oregondsp = __commonJS({
  "node_modules/oregondsp/kotlin/oregondsp.js"(exports, module) {
    (function(root3, factory) {
      if (typeof define === "function" && define.amd)
        define(["exports", "./kotlin-kotlin-stdlib-js-ir.js"], factory);
      else if (typeof exports === "object")
        factory(module.exports, require_kotlin_kotlin_stdlib_js_ir());
      else {
        if (typeof this["kotlin-kotlin-stdlib-js-ir"] === "undefined") {
          throw new Error("Error loading module 'oregondsp'. Its dependency 'kotlin-kotlin-stdlib-js-ir' was not found. Please, check whether 'kotlin-kotlin-stdlib-js-ir' is loaded prior to 'oregondsp'.");
        }
        root3.oregondsp = factory(typeof oregondsp === "undefined" ? {} : oregondsp, this["kotlin-kotlin-stdlib-js-ir"]);
      }
    })(exports, function(_, kotlin_kotlin) {
      "use strict";
      var imul = Math.imul;
      var get_PI = kotlin_kotlin.$_$.o;
      var Unit_getInstance = kotlin_kotlin.$_$.g;
      var classMeta = kotlin_kotlin.$_$.i;
      var objectMeta = kotlin_kotlin.$_$.l;
      var IllegalArgumentException_init_$Create$ = kotlin_kotlin.$_$.b;
      var throwUninitializedPropertyAccessException = kotlin_kotlin.$_$.v;
      var IllegalStateException_init_$Create$ = kotlin_kotlin.$_$.c;
      var ensureNotNull = kotlin_kotlin.$_$.u;
      var _Char___init__impl__6a9atx = kotlin_kotlin.$_$.e;
      var Char = kotlin_kotlin.$_$.r;
      var toLong = kotlin_kotlin.$_$.m;
      var toString = kotlin_kotlin.$_$.n;
      var ArrayList_init_$Create$ = kotlin_kotlin.$_$.a;
      var fillArrayVal = kotlin_kotlin.$_$.j;
      var RuntimeException_init_$Create$ = kotlin_kotlin.$_$.d;
      var round = kotlin_kotlin.$_$.q;
      var numberToInt = kotlin_kotlin.$_$.k;
      var Default_getInstance = kotlin_kotlin.$_$.f;
      var roundToInt = kotlin_kotlin.$_$.p;
      var println = kotlin_kotlin.$_$.h;
      var THROW_ISE = kotlin_kotlin.$_$.t;
      var Enum = kotlin_kotlin.$_$.s;
      HammingWindow2.prototype = Object.create(Window2.prototype);
      HammingWindow2.prototype.constructor = HammingWindow2;
      HanningWindow2.prototype = Object.create(Window2.prototype);
      HanningWindow2.prototype.constructor = HanningWindow2;
      CDFTsr16.prototype = Object.create(CDFTsr.prototype);
      CDFTsr16.prototype.constructor = CDFTsr16;
      CDFTsr8.prototype = Object.create(CDFTsr.prototype);
      CDFTsr8.prototype.constructor = CDFTsr8;
      FIRTypeIII2.prototype = Object.create(EquirippleFIRFilter2.prototype);
      FIRTypeIII2.prototype.constructor = FIRTypeIII2;
      CenteredDifferentiator2.prototype = Object.create(FIRTypeIII2.prototype);
      CenteredDifferentiator2.prototype.constructor = CenteredDifferentiator2;
      CenteredHilbertTransform2.prototype = Object.create(FIRTypeIII2.prototype);
      CenteredHilbertTransform2.prototype.constructor = CenteredHilbertTransform2;
      FIRTypeI2.prototype = Object.create(EquirippleFIRFilter2.prototype);
      FIRTypeI2.prototype.constructor = FIRTypeI2;
      EquirippleBandpass2.prototype = Object.create(FIRTypeI2.prototype);
      EquirippleBandpass2.prototype.constructor = EquirippleBandpass2;
      FIRTypeII2.prototype = Object.create(EquirippleFIRFilter2.prototype);
      FIRTypeII2.prototype.constructor = FIRTypeII2;
      EquirippleHalfBandPrototype.prototype = Object.create(FIRTypeII2.prototype);
      EquirippleHalfBandPrototype.prototype.constructor = EquirippleHalfBandPrototype;
      EquirippleHighpass2.prototype = Object.create(FIRTypeI2.prototype);
      EquirippleHighpass2.prototype.constructor = EquirippleHighpass2;
      EquirippleLowpass2.prototype = Object.create(FIRTypeI2.prototype);
      EquirippleLowpass2.prototype.constructor = EquirippleLowpass2;
      FIRTypeIV.prototype = Object.create(EquirippleFIRFilter2.prototype);
      FIRTypeIV.prototype.constructor = FIRTypeIV;
      StaggeredDifferentiator2.prototype = Object.create(FIRTypeIV.prototype);
      StaggeredDifferentiator2.prototype.constructor = StaggeredDifferentiator2;
      StaggeredHilbertTranform2.prototype = Object.create(FIRTypeIV.prototype);
      StaggeredHilbertTranform2.prototype.constructor = StaggeredHilbertTranform2;
      AnalogButterworth.prototype = Object.create(AnalogPrototype2.prototype);
      AnalogButterworth.prototype.constructor = AnalogButterworth;
      AnalogChebyshevI.prototype = Object.create(AnalogPrototype2.prototype);
      AnalogChebyshevI.prototype.constructor = AnalogChebyshevI;
      AnalogChebyshevII.prototype = Object.create(AnalogPrototype2.prototype);
      AnalogChebyshevII.prototype.constructor = AnalogChebyshevII;
      Butterworth2.prototype = Object.create(IIRFilter3.prototype);
      Butterworth2.prototype.constructor = Butterworth2;
      ChebyshevI2.prototype = Object.create(IIRFilter3.prototype);
      ChebyshevI2.prototype.constructor = ChebyshevI2;
      ChebyshevII2.prototype = Object.create(IIRFilter3.prototype);
      ChebyshevII2.prototype.constructor = ChebyshevII2;
      PassbandType2.prototype = Object.create(Enum.prototype);
      PassbandType2.prototype.constructor = PassbandType2;
      ThiranAllpass2.prototype = Object.create(Allpass2.prototype);
      ThiranAllpass2.prototype.constructor = ThiranAllpass2;
      function HammingWindow2(N) {
        Window2.call(this, N);
        var inductionVariable = 0;
        var last = N - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp = this.w;
            var tmp$ret$0;
            {
              var tmp0_cos = -get_PI() + i * 2 * get_PI() / (N - 1 | 0);
              tmp$ret$0 = Math.cos(tmp0_cos);
            }
            tmp[i] = 0.54 + 0.46 * tmp$ret$0;
          } while (!(i === last));
      }
      HammingWindow2.$metadata$ = classMeta("HammingWindow", void 0, void 0, void 0, void 0, Window2.prototype);
      function HanningWindow2(N) {
        Window2.call(this, N);
        var inductionVariable = 0;
        var last = N - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp = this.w;
            var tmp$ret$0;
            {
              var tmp0_cos = -get_PI() + i * 2 * get_PI() / (N - 1 | 0);
              tmp$ret$0 = Math.cos(tmp0_cos);
            }
            tmp[i] = 0.5 + 0.5 * tmp$ret$0;
          } while (!(i === last));
      }
      HanningWindow2.$metadata$ = classMeta("HanningWindow", void 0, void 0, void 0, void 0, Window2.prototype);
      function Sequence_init_$Init$(x4, $this) {
        Sequence2.call($this);
        $this.array_1 = new Float32Array(x4.length);
        var tmp = $this;
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = x4;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        tmp.array_1 = tmp$ret$1;
        return $this;
      }
      function Sequence_fromArray(x4) {
        return Sequence_init_$Init$(x4, Object.create(Sequence2.prototype));
      }
      function Sequence_init_$Init$_0(N, $this) {
        Sequence2.call($this);
        $this.array_1 = new Float32Array(N);
        return $this;
      }
      function Sequence_ofSize(N) {
        return Sequence_init_$Init$_0(N, Object.create(Sequence2.prototype));
      }
      function Companion() {
        Companion_instance = this;
      }
      Companion.prototype.aliasArray = function(src, dst) {
        var slength = src.length;
        var dlength = dst.length;
        var inductionVariable = 0;
        if (inductionVariable <= dlength)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            dst[i] = 0;
          } while (!(i === dlength));
        var inductionVariable_0 = 0;
        var last = slength - 1 | 0;
        if (inductionVariable_0 <= last)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            var tmp2_array = dst;
            var tmp3_index0 = i_0 % dlength | 0;
            tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] + src[i_0];
          } while (!(i_0 === last));
      };
      Companion.prototype.reverseArray = function(y4) {
        var i = 0;
        var j = y4.length - 1 | 0;
        while (i < j) {
          var tmp = y4[i];
          y4[i] = y4[j];
          y4[j] = tmp;
          var tmp0 = i;
          i = tmp0 + 1 | 0;
          var tmp1 = j;
          j = tmp1 - 1 | 0;
        }
      };
      Companion.prototype.rmeanArray = function(y4) {
        var mean2 = 0;
        var inductionVariable = 0;
        var last = y4.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            mean2 = mean2 + y4[i];
          } while (inductionVariable <= last);
        mean2 = mean2 / y4.length;
        var inductionVariable_0 = 0;
        var last_0 = y4.length - 1 | 0;
        if (inductionVariable_0 <= last_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            var tmp2_array = y4;
            var tmp3_index0 = i_0;
            tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] - mean2;
          } while (inductionVariable_0 <= last_0);
      };
      Companion.prototype.circularShiftArray = function(y4, shift) {
        var N = y4.length;
        var s3 = shift % N | 0;
        if (s3 > 0 ? (N - s3 | 0) < s3 : false)
          s3 = s3 - N | 0;
        else if (s3 < 0 ? (N + s3 | 0) < (-s3 | 0) : false)
          s3 = s3 + N | 0;
        if (s3 < 0)
          s3 = imul(s3, -1);
        var tmp = new Float32Array(s3);
        if (s3 > 0) {
          var inductionVariable = 0;
          var last = s3 - 1 | 0;
          if (inductionVariable <= last)
            do {
              var i = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              tmp[i] = y4[(N - s3 | 0) + i | 0];
            } while (!(i === last));
          var inductionVariable_0 = (N - 1 | 0) - s3 | 0;
          if (0 <= inductionVariable_0)
            do {
              var i_0 = inductionVariable_0;
              inductionVariable_0 = inductionVariable_0 + -1 | 0;
              y4[i_0 + s3 | 0] = y4[i_0];
            } while (0 <= inductionVariable_0);
          var inductionVariable_1 = 0;
          var last_0 = s3 - 1 | 0;
          if (inductionVariable_1 <= last_0)
            do {
              var i_1 = inductionVariable_1;
              inductionVariable_1 = inductionVariable_1 + 1 | 0;
              y4[i_1] = tmp[i_1];
            } while (!(i_1 === last_0));
        }
        if (s3 < 0) {
          var inductionVariable_2 = 0;
          var last_1 = (-s3 | 0) - 1 | 0;
          if (inductionVariable_2 <= last_1)
            do {
              var i_2 = inductionVariable_2;
              inductionVariable_2 = inductionVariable_2 + 1 | 0;
              tmp[i_2] = y4[i_2];
            } while (!(i_2 === last_1));
          var inductionVariable_3 = -s3 | 0;
          var last_2 = N - 1 | 0;
          if (inductionVariable_3 <= last_2)
            do {
              var i_3 = inductionVariable_3;
              inductionVariable_3 = inductionVariable_3 + 1 | 0;
              y4[i_3 + s3 | 0] = y4[i_3];
            } while (!(i_3 === last_2));
          var inductionVariable_4 = 0;
          var last_3 = (-s3 | 0) - 1 | 0;
          if (inductionVariable_4 <= last_3)
            do {
              var i_4 = inductionVariable_4;
              inductionVariable_4 = inductionVariable_4 + 1 | 0;
              y4[(N + s3 | 0) + i_4 | 0] = tmp[i_4];
            } while (!(i_4 === last_3));
        }
      };
      Companion.prototype.zeroShiftArray = function(y4, shift) {
        if (imul(-1, shift) >= y4.length ? true : shift >= y4.length) {
          var inductionVariable = 0;
          var last = y4.length;
          if (inductionVariable <= last)
            do {
              var i = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              y4[i] = 0;
            } while (!(i === last));
        } else if (shift > 0) {
          var inductionVariable_0 = y4.length - 1 | 0;
          if (shift <= inductionVariable_0)
            do {
              var i_0 = inductionVariable_0;
              inductionVariable_0 = inductionVariable_0 + -1 | 0;
              y4[i_0] = y4[i_0 - shift | 0];
            } while (!(i_0 === shift));
          var inductionVariable_1 = 0;
          var last_0 = shift - 1 | 0;
          if (inductionVariable_1 <= last_0)
            do {
              var i_1 = inductionVariable_1;
              inductionVariable_1 = inductionVariable_1 + 1 | 0;
              y4[i_1] = 0;
            } while (!(i_1 === last_0));
        } else if (shift < 0) {
          var inductionVariable_2 = 0;
          var last_1 = (y4.length + shift | 0) - 1 | 0;
          if (inductionVariable_2 <= last_1)
            do {
              var i_2 = inductionVariable_2;
              inductionVariable_2 = inductionVariable_2 + 1 | 0;
              y4[i_2] = y4[i_2 - shift | 0];
            } while (!(i_2 === last_1));
          var inductionVariable_3 = y4.length + shift | 0;
          var last_2 = y4.length - 1 | 0;
          if (inductionVariable_3 <= last_2)
            do {
              var i_3 = inductionVariable_3;
              inductionVariable_3 = inductionVariable_3 + 1 | 0;
              y4[i_3] = 0;
            } while (!(i_3 === last_2));
        }
      };
      Companion.prototype.decimateArray = function(y4, decrate, ydecimated) {
        var tmp$ret$0;
        {
          var tmp0_min = ydecimated.length;
          var tmp1_min = y4.length / decrate | 0;
          tmp$ret$0 = Math.min(tmp0_min, tmp1_min);
        }
        var n2 = tmp$ret$0;
        var inductionVariable = 0;
        var last = n2 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            ydecimated[i] = y4[imul(i, decrate)];
          } while (!(i === last));
      };
      Companion.prototype.stretchArray = function(y4, rate, ystretched) {
        var tmp$ret$0;
        {
          var tmp0_min = y4.length;
          var tmp1_min = ystretched.length / rate | 0;
          tmp$ret$0 = Math.min(tmp0_min, tmp1_min);
        }
        var n2 = tmp$ret$0;
        var inductionVariable = 0;
        var last = ystretched.length;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            ystretched[i] = 0;
          } while (!(i === last));
        var inductionVariable_0 = 0;
        var last_0 = n2 - 1 | 0;
        if (inductionVariable_0 <= last_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            ystretched[imul(i_0, rate)] = y4[i_0];
          } while (!(i_0 === last_0));
      };
      Companion.prototype.timesEqualsArray = function(y4, f) {
        var inductionVariable = 0;
        var last = y4.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp1_array = y4;
            var tmp2_index0 = i;
            tmp1_array[tmp2_index0] = tmp1_array[tmp2_index0] * f;
          } while (inductionVariable <= last);
      };
      Companion.prototype.padArray = function(y4, ypadded) {
        if (y4.length < ypadded.length) {
          var inductionVariable = 0;
          var last = y4.length;
          if (inductionVariable <= last)
            do {
              var i = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              ypadded[i] = y4[i];
            } while (!(i === last));
          var inductionVariable_0 = y4.length;
          var last_0 = ypadded.length;
          if (inductionVariable_0 <= last_0)
            do {
              var i_0 = inductionVariable_0;
              inductionVariable_0 = inductionVariable_0 + 1 | 0;
              ypadded[i_0] = 0;
            } while (!(i_0 === last_0));
        } else {
          var inductionVariable_1 = 0;
          var last_1 = ypadded.length;
          if (inductionVariable_1 <= last_1)
            do {
              var i_1 = inductionVariable_1;
              inductionVariable_1 = inductionVariable_1 + 1 | 0;
              ypadded[i_1] = y4[i_1];
            } while (!(i_1 === last_1));
        }
      };
      Companion.$metadata$ = objectMeta("Companion");
      var Companion_instance;
      function Companion_getInstance() {
        if (Companion_instance == null)
          new Companion();
        return Companion_instance;
      }
      Sequence2.prototype.set_array_tn1sl2_k$ = function(_set____db54di) {
        this.array_1 = _set____db54di;
      };
      Sequence2.prototype.get_array_iosoq8_k$ = function() {
        return this.array_1;
      };
      Sequence2.prototype.alias = function(N) {
        var newx = new Float32Array(N);
        Companion_getInstance().aliasArray(this.array_1, newx);
        this.array_1 = newx;
      };
      Sequence2.prototype.getForIndex = function(index3) {
        var retval = 0;
        if (index3 >= 0 ? index3 < this.array_1.length : false)
          retval = this.array_1[index3];
        return retval;
      };
      Sequence2.prototype.reverse = function() {
        Companion_getInstance().reverseArray(this.array_1);
      };
      Sequence2.prototype.rmean = function() {
        Companion_getInstance().rmeanArray(this.array_1);
      };
      Sequence2.prototype.circularShift = function(shift) {
        Companion_getInstance().circularShiftArray(this.array_1, shift);
      };
      Sequence2.prototype.zeroShift = function(shift) {
        Companion_getInstance().zeroShiftArray(this.array_1, shift);
      };
      Sequence2.prototype.decimate = function(decrate) {
        var tmp = new Float32Array(this.array_1.length / decrate | 0);
        Companion_getInstance().decimateArray(this.array_1, decrate, tmp);
        this.array_1 = tmp;
      };
      Sequence2.prototype.stretch = function(rate) {
        var tmp = new Float32Array(imul(this.array_1.length, rate));
        Companion_getInstance().stretchArray(this.array_1, rate, tmp);
        this.array_1 = tmp;
      };
      Sequence2.prototype.timesEquals = function(f) {
        Companion_getInstance().timesEqualsArray(this.array_1, f);
      };
      Sequence2.prototype.pad = function(n2) {
        if (n2 > this.array_1.length) {
          var tmp = new Float32Array(n2);
          Companion_getInstance().padArray(this.array_1, tmp);
          this.array_1 = tmp;
        }
      };
      function Sequence2() {
        Companion_getInstance();
      }
      Sequence2.$metadata$ = classMeta("Sequence");
      Object.defineProperty(Sequence2.prototype, "array", {
        configurable: true,
        get: Sequence2.prototype.get_array_iosoq8_k$,
        set: Sequence2.prototype.set_array_tn1sl2_k$
      });
      function Window_init_$Init$(w, $this) {
        Window2.call($this, w.length);
        var tmp = $this;
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = w;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        tmp.w_1 = tmp$ret$1;
        return $this;
      }
      function Window_fromArray(w) {
        return Window_init_$Init$(w, Object.create(Window2.prototype));
      }
      function Window2(N) {
        this.w_1 = new Float32Array(N);
      }
      Window2.prototype.set_w_6vu9ec_k$ = function(_set____db54di) {
        this.w_1 = _set____db54di;
      };
      Window2.prototype.get_w_1mhr66_k$ = function() {
        return this.w_1;
      };
      Window2.prototype.length = function() {
        return this.w_1.length;
      };
      Window2.prototype.timesEquals = function(x4) {
        if (!(x4.length === this.w_1.length))
          throw IllegalArgumentException_init_$Create$("Argument length does not match window length");
        var inductionVariable = 0;
        var last = this.w_1.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp1_array = this.w_1;
            var tmp2_index0 = i;
            tmp1_array[tmp2_index0] = tmp1_array[tmp2_index0] * x4[i];
          } while (inductionVariable <= last);
      };
      Window2.prototype.get_array_iosoq8_k$ = function() {
        var tmp$ret$1;
        {
          var tmp0_copyOf = this.w_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_copyOf;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        return tmp$ret$1;
      };
      Window2.prototype.windowArray = function(x4, index3, y4) {
        if (!(y4.length === this.w_1.length))
          throw IllegalArgumentException_init_$Create$("Destination array length does not match window length");
        var inductionVariable = 0;
        var last = this.w_1.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var j = index3 + i | 0;
            if (j >= 0 ? j < x4.length : false)
              y4[i] = this.w_1[i] * x4[j];
            else
              y4[i] = 0;
          } while (inductionVariable <= last);
      };
      Window2.$metadata$ = classMeta("Window");
      Object.defineProperty(Window2.prototype, "w", {
        configurable: true,
        get: Window2.prototype.get_w_1mhr66_k$,
        set: Window2.prototype.set_w_6vu9ec_k$
      });
      Object.defineProperty(Window2.prototype, "array", {
        configurable: true,
        get: Window2.prototype.get_array_iosoq8_k$
      });
      function _set_yr__dl8bxe($this, _set____db54di) {
        $this.yr_1 = _set____db54di;
      }
      function _get_yr__ndcfbm($this) {
        var tmp = $this.yr_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("yr");
        }
      }
      function _set_yi__dl8c55($this, _set____db54di) {
        $this.yi_1 = _set____db54di;
      }
      function _get_yi__ndcf3v($this) {
        var tmp = $this.yi_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("yi");
        }
      }
      function _set_arraysUnlinked__eskfgr($this, _set____db54di) {
        $this.arraysUnlinked_1 = _set____db54di;
      }
      function _get_arraysUnlinked__upg6gx($this) {
        return $this.arraysUnlinked_1;
      }
      function _set_c__db558i($this, _set____db54di) {
        $this.c_1 = _set____db54di;
      }
      function _get_c__7mloi6($this) {
        var tmp = $this.c_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("c");
        }
      }
      function _set_c3__dl8tqx($this, _set____db54di) {
        $this.c3__1 = _set____db54di;
      }
      function _get_c3__ndbxi3($this) {
        var tmp = $this.c3__1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("c3");
        }
      }
      function _set_s__db55ma($this, _set____db54di) {
        $this.s_1 = _set____db54di;
      }
      function _get_s__7mlovy($this) {
        var tmp = $this.s_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("s");
        }
      }
      function _set_s3__dl8hvt($this, _set____db54di) {
        $this.s3__1 = _set____db54di;
      }
      function _get_s3__ndc9d7($this) {
        var tmp = $this.s3__1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("s3");
        }
      }
      function _get_dft__e670yn($this) {
        return $this.dft_1;
      }
      function CDFT_init_$Init$(log2N, $this) {
        CDFT2.call($this);
        if (log2N < 3)
          throw IllegalArgumentException_init_$Create$("DFT size must be >= 8");
        $this.arraysUnlinked_1 = true;
        $this.log2N_1 = log2N;
        $this.N_1 = 1 << log2N;
        createTable($this);
        if (log2N === 3)
          $this.dft_1 = new CDFTsr8(0, 1, 0);
        else if (log2N === 4)
          $this.dft_1 = new CDFTsr16(0, 1, 0);
        else if (log2N >= 5) {
          $this.dft_1 = CDFTsr_init_$Create$(log2N, _get_c__7mloi6($this), _get_c3__ndbxi3($this), _get_s__7mlovy($this), _get_s3__ndc9d7($this));
        } else
          throw IllegalArgumentException_init_$Create$("unknown log2N size, must be >=3 but was: " + log2N);
        return $this;
      }
      function CDFT_ofLogSize(log2N) {
        return CDFT_init_$Init$(log2N, Object.create(CDFT2.prototype));
      }
      function CDFT_init_$Init$_0(xr, xi, yr, yi, log2N, $this) {
        CDFT_init_$Init$(log2N, $this);
        $this.yr_1 = yr;
        $this.yi_1 = yi;
        $this.dft_1.link(xr, xi, yr, yi);
        $this.arraysUnlinked_1 = false;
        return $this;
      }
      function CDFT_ofArrays(xr, xi, yr, yi, log2N) {
        return CDFT_init_$Init$_0(xr, xi, yr, yi, log2N, Object.create(CDFT2.prototype));
      }
      function createTable($this) {
        var N8 = $this.N_1 / 8 | 0;
        $this.c_1 = new Float32Array(N8);
        $this.c3__1 = new Float32Array(N8);
        $this.s_1 = new Float32Array(N8);
        $this.s3__1 = new Float32Array(N8);
        var inductionVariable = 0;
        var last = N8 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp = _get_c__7mloi6($this);
            var tmp$ret$0;
            {
              var tmp0_cos = 2 * get_PI() * i / $this.N_1;
              tmp$ret$0 = Math.cos(tmp0_cos);
            }
            tmp[i] = tmp$ret$0;
            var tmp_0 = _get_c3__ndbxi3($this);
            var tmp$ret$1;
            {
              var tmp1_cos = 2 * get_PI() * 3 * i / $this.N_1;
              tmp$ret$1 = Math.cos(tmp1_cos);
            }
            tmp_0[i] = tmp$ret$1;
            var tmp_1 = _get_s__7mlovy($this);
            var tmp$ret$2;
            {
              var tmp2_sin = 2 * get_PI() * i / $this.N_1;
              tmp$ret$2 = Math.sin(tmp2_sin);
            }
            tmp_1[i] = -tmp$ret$2;
            var tmp_2 = _get_s3__ndc9d7($this);
            var tmp$ret$3;
            {
              var tmp3_sin = 2 * get_PI() * 3 * i / $this.N_1;
              tmp$ret$3 = Math.sin(tmp3_sin);
            }
            tmp_2[i] = -tmp$ret$3;
          } while (!(i === last));
      }
      function Companion_0() {
        Companion_instance_0 = this;
      }
      Companion_0.prototype.dftProduct = function(Xr, Xi, Yr, Yi, sign3) {
        if ((!(Xr.length === Yr.length) ? true : !(Xi.length === Yi.length)) ? true : !(Xr.length === Xi.length))
          throw IllegalArgumentException_init_$Create$("Transform array lengths are not equal");
        var tmp;
        var inductionVariable = 0;
        var last = Xr.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            tmp = Xr[i] * Yr[i] - sign3 * Xi[i] * Yi[i];
            Yi[i] = Xr[i] * Yi[i] + sign3 * Xi[i] * Yr[i];
            Yr[i] = tmp;
          } while (inductionVariable <= last);
      };
      Companion_0.$metadata$ = objectMeta("Companion");
      var Companion_instance_0;
      function Companion_getInstance_0() {
        if (Companion_instance_0 == null)
          new Companion_0();
        return Companion_instance_0;
      }
      CDFT2.prototype.get_N_1mhr51_k$ = function() {
        return this.N_1;
      };
      CDFT2.prototype.get_log2N_ius8zb_k$ = function() {
        return this.log2N_1;
      };
      CDFT2.prototype.evaluateCDFT = function(xr, xi, Xr, Xi) {
        this.yr_1 = Xr;
        this.yi_1 = Xi;
        this.dft_1.link(xr, xi, Xr, Xi);
        this.arraysUnlinked_1 = false;
        this.dft_1.evaluate_de95qg_k$();
      };
      CDFT2.prototype.evaluateInverseCDFT = function(Xr, Xi, xr, xi) {
        this.yr_1 = xr;
        this.yi_1 = xi;
        this.dft_1.link(Xr, Xi, xr, xi);
        this.arraysUnlinked_1 = false;
        this.evaluateInverse();
      };
      CDFT2.prototype.evaluate = function() {
        if (this.arraysUnlinked_1)
          throw IllegalStateException_init_$Create$("Sequence and transform arrays are not linked");
        this.dft_1.evaluate_de95qg_k$();
      };
      CDFT2.prototype.evaluateInverse = function() {
        if (this.arraysUnlinked_1)
          throw IllegalStateException_init_$Create$("Sequence and transform arrays are not linked");
        this.dft_1.evaluate_de95qg_k$();
        var scale = 1 / this.N_1;
        var N2 = this.N_1 / 2 | 0;
        var tmp0_array = _get_yr__ndcfbm(this);
        var tmp1_index0 = 0;
        tmp0_array[tmp1_index0] = tmp0_array[tmp1_index0] * scale;
        var tmp2_array = _get_yi__ndcf3v(this);
        var tmp3_index0 = 0;
        tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] * scale;
        var tmp4_array = _get_yr__ndcfbm(this);
        var tmp5_index0 = N2;
        tmp4_array[tmp5_index0] = tmp4_array[tmp5_index0] * scale;
        var tmp6_array = _get_yi__ndcf3v(this);
        var tmp7_index0 = N2;
        tmp6_array[tmp7_index0] = tmp6_array[tmp7_index0] * scale;
        var i = 1;
        var j = this.N_1 - 1 | 0;
        var tmp;
        while (i < j) {
          tmp = _get_yr__ndcfbm(this)[i];
          _get_yr__ndcfbm(this)[i] = _get_yr__ndcfbm(this)[j] * scale;
          _get_yr__ndcfbm(this)[j] = tmp * scale;
          tmp = _get_yi__ndcf3v(this)[i];
          _get_yi__ndcf3v(this)[i] = _get_yi__ndcf3v(this)[j] * scale;
          _get_yi__ndcf3v(this)[j] = tmp * scale;
          var tmp8 = i;
          i = tmp8 + 1 | 0;
          var tmp9 = j;
          j = tmp9 - 1 | 0;
        }
      };
      function CDFT2() {
        Companion_getInstance_0();
        this.arraysUnlinked_1 = false;
      }
      CDFT2.$metadata$ = classMeta("CDFT");
      function _get_SQRT2BY2__e8870e($this) {
        return $this.SQRT2BY2__1;
      }
      function _set_dft1__9lli48($this, _set____db54di) {
        $this.dft1__1 = _set____db54di;
      }
      function _get_dft1__d5dhpo($this) {
        return $this.dft1__1;
      }
      function _set_dft2__9lli53($this, _set____db54di) {
        $this.dft2__1 = _set____db54di;
      }
      function _get_dft2__d5dhqj($this) {
        return $this.dft2__1;
      }
      function _set_dft3__9lli5y($this, _set____db54di) {
        $this.dft3__1 = _set____db54di;
      }
      function _get_dft3__d5dhre($this) {
        return $this.dft3__1;
      }
      function _set_c__db558i_0($this, _set____db54di) {
        $this.c_1 = _set____db54di;
      }
      function _get_c__7mloi6_0($this) {
        return $this.c_1;
      }
      function _set_c3__dl8tqx_0($this, _set____db54di) {
        $this.c3__1 = _set____db54di;
      }
      function _get_c3__ndbxi3_0($this) {
        return $this.c3__1;
      }
      function _set_s__db55ma_0($this, _set____db54di) {
        $this.s_1 = _set____db54di;
      }
      function _get_s__7mlovy_0($this) {
        return $this.s_1;
      }
      function _set_s3__dl8hvt_0($this, _set____db54di) {
        $this.s3__1 = _set____db54di;
      }
      function _get_s3__ndc9d7_0($this) {
        return $this.s3__1;
      }
      function _set_f__db55b3($this, _set____db54di) {
        $this.f_1 = _set____db54di;
      }
      function _get_f__7mlokr($this) {
        return $this.f_1;
      }
      function _set_reflect__m3p5lk($this, _set____db54di) {
        $this.reflect_1 = _set____db54di;
      }
      function _get_reflect__nb6m0k($this) {
        return $this.reflect_1;
      }
      function CDFTsr_init_$Init$(m2, c5, c32, s3, s32, $this) {
        CDFTsr.call($this);
        $this.m_1 = m2;
        $this.N_1 = 1 << m2;
        $this.Ndiv8__1 = $this.N_1 / 8 | 0;
        $this.Ndiv4__1 = $this.N_1 / 4 | 0;
        $this.xoffset_1 = 0;
        $this.xstride_1 = 1;
        $this.outXoffset_1 = 0;
        $this.c_1 = c5;
        $this.c3__1 = c32;
        $this.s_1 = s3;
        $this.s3__1 = s32;
        $this.f_1 = 1;
        $this.reflect_1 = imul(2, c5.length);
        if (m2 > 6) {
          $this.dft1__1 = CDFTsr_init_$Create$_1($this, 0, 2, 0, m2 - 1 | 0);
          $this.dft2__1 = CDFTsr_init_$Create$_1($this, 1, 4, $this.N_1 / 2 | 0, m2 - 2 | 0);
          $this.dft3__1 = CDFTsr_init_$Create$_1($this, 3, 4, imul(3, $this.N_1) / 4 | 0, m2 - 2 | 0);
        } else if (m2 === 6) {
          $this.dft1__1 = CDFTsr_init_$Create$_1($this, 0, 2, 0, 5);
          $this.dft2__1 = new CDFTsr16(1, 4, $this.N_1 / 2 | 0);
          $this.dft3__1 = new CDFTsr16(3, 4, imul(3, $this.N_1) / 4 | 0);
        } else if (m2 === 5) {
          $this.dft1__1 = new CDFTsr16(0, 2, 0);
          $this.dft2__1 = new CDFTsr8(1, 4, $this.N_1 / 2 | 0);
          $this.dft3__1 = new CDFTsr8(3, 4, imul(3, $this.N_1) / 4 | 0);
        }
        return $this;
      }
      function CDFTsr_init_$Create$(m2, c5, c32, s3, s32) {
        return CDFTsr_init_$Init$(m2, c5, c32, s3, s32, Object.create(CDFTsr.prototype));
      }
      function CDFTsr_init_$Init$_0($this) {
        CDFTsr.call($this);
        $this.dft1__1 = null;
        $this.dft2__1 = null;
        $this.dft3__1 = null;
        return $this;
      }
      function CDFTsr_init_$Create$_0() {
        return CDFTsr_init_$Init$_0(Object.create(CDFTsr.prototype));
      }
      function CDFTsr_init_$Init$_1(parent, dataOffset, dataStride, transformOffset, m2, $this) {
        CDFTsr.call($this);
        $this.c_1 = parent.c_1;
        $this.c3__1 = parent.c3__1;
        $this.s_1 = parent.s_1;
        $this.s3__1 = parent.s3__1;
        $this.m_1 = m2;
        $this.N_1 = 1 << m2;
        $this.Ndiv8__1 = $this.N_1 / 8 | 0;
        $this.Ndiv4__1 = $this.N_1 / 4 | 0;
        $this.xoffset_1 = dataOffset;
        $this.xstride_1 = dataStride;
        $this.outXoffset_1 = transformOffset;
        $this.f_1 = ensureNotNull($this.c_1).length / $this.Ndiv8__1 | 0;
        $this.reflect_1 = imul(2, ensureNotNull($this.c_1).length);
        if (m2 > 6) {
          $this.dft1__1 = CDFTsr_init_$Create$_1($this, dataOffset, imul(dataStride, 2), transformOffset, m2 - 1 | 0);
          $this.dft2__1 = CDFTsr_init_$Create$_1($this, dataOffset + dataStride | 0, imul(dataStride, 4), transformOffset + ($this.N_1 / 2 | 0) | 0, m2 - 2 | 0);
          $this.dft3__1 = CDFTsr_init_$Create$_1($this, dataOffset + imul(3, dataStride) | 0, imul(dataStride, 4), transformOffset + (imul(3, $this.N_1) / 4 | 0) | 0, m2 - 2 | 0);
        } else if (m2 === 6) {
          $this.dft1__1 = CDFTsr_init_$Create$_1($this, dataOffset, imul(dataStride, 2), transformOffset, 5);
          $this.dft2__1 = new CDFTsr16(dataOffset + dataStride | 0, imul(dataStride, 4), transformOffset + ($this.N_1 / 2 | 0) | 0);
          $this.dft3__1 = new CDFTsr16(dataOffset + imul(3, dataStride) | 0, imul(dataStride, 4), transformOffset + (imul(3, $this.N_1) / 4 | 0) | 0);
        } else if (m2 === 5) {
          $this.dft1__1 = new CDFTsr16(dataOffset, imul(dataStride, 2), transformOffset);
          $this.dft2__1 = new CDFTsr8(dataOffset + dataStride | 0, imul(dataStride, 4), transformOffset + ($this.N_1 / 2 | 0) | 0);
          $this.dft3__1 = new CDFTsr8(dataOffset + imul(3, dataStride) | 0, imul(dataStride, 4), transformOffset + (imul(3, $this.N_1) / 4 | 0) | 0);
        }
        return $this;
      }
      function CDFTsr_init_$Create$_1(parent, dataOffset, dataStride, transformOffset, m2) {
        return CDFTsr_init_$Init$_1(parent, dataOffset, dataStride, transformOffset, m2, Object.create(CDFTsr.prototype));
      }
      function Companion_1() {
        Companion_instance_1 = this;
        var tmp = this;
        var tmp$ret$0;
        {
          tmp$ret$0 = Math.sqrt(2);
        }
        tmp.SQRT2BY2__1 = tmp$ret$0 / 2;
      }
      Companion_1.$metadata$ = objectMeta("Companion");
      var Companion_instance_1;
      function Companion_getInstance_1() {
        if (Companion_instance_1 == null)
          new Companion_1();
        return Companion_instance_1;
      }
      CDFTsr.prototype.set_xr_n8tm33_k$ = function(_set____db54di) {
        this.xr_1 = _set____db54di;
      };
      CDFTsr.prototype.get_xr_kntnjx_k$ = function() {
        var tmp = this.xr_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("xr");
        }
      };
      CDFTsr.prototype.set_xi_41v7l4_k$ = function(_set____db54di) {
        this.xi_1 = _set____db54di;
      };
      CDFTsr.prototype.get_xi_kntnk6_k$ = function() {
        var tmp = this.xi_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("xi");
        }
      };
      CDFTsr.prototype.set_outXr_dvcqpn_k$ = function(_set____db54di) {
        this.outXr_1 = _set____db54di;
      };
      CDFTsr.prototype.get_outXr_iwjr9b_k$ = function() {
        var tmp = this.outXr_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("outXr");
        }
      };
      CDFTsr.prototype.set_outXi_dfc2yk_k$ = function(_set____db54di) {
        this.outXi_1 = _set____db54di;
      };
      CDFTsr.prototype.get_outXi_iwjr92_k$ = function() {
        var tmp = this.outXi_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("outXi");
        }
      };
      CDFTsr.prototype.set_xoffset_bd3wle_k$ = function(_set____db54di) {
        this.xoffset_1 = _set____db54di;
      };
      CDFTsr.prototype.get_xoffset_u1srtq_k$ = function() {
        return this.xoffset_1;
      };
      CDFTsr.prototype.set_xstride_i6zsu4_k$ = function(_set____db54di) {
        this.xstride_1 = _set____db54di;
      };
      CDFTsr.prototype.get_xstride_rxppjs_k$ = function() {
        return this.xstride_1;
      };
      CDFTsr.prototype.set_outXoffset_dyl9jq_k$ = function(_set____db54di) {
        this.outXoffset_1 = _set____db54di;
      };
      CDFTsr.prototype.get_outXoffset_tmu2xy_k$ = function() {
        return this.outXoffset_1;
      };
      CDFTsr.prototype.set_m_669hr4_k$ = function(_set____db54di) {
        this.m_1 = _set____db54di;
      };
      CDFTsr.prototype.get_m_1mhr5w_k$ = function() {
        return this.m_1;
      };
      CDFTsr.prototype.set_N_hmx2g1_k$ = function(_set____db54di) {
        this.N_1 = _set____db54di;
      };
      CDFTsr.prototype.get_N_1mhr51_k$ = function() {
        return this.N_1;
      };
      CDFTsr.prototype.set_Ndiv8_bunsfs_k$ = function(_set____db54di) {
        this.Ndiv8__1 = _set____db54di;
      };
      CDFTsr.prototype.get_Ndiv8_ie3hf0_k$ = function() {
        return this.Ndiv8__1;
      };
      CDFTsr.prototype.set_Ndiv4_spbccc_k$ = function(_set____db54di) {
        this.Ndiv4__1 = _set____db54di;
      };
      CDFTsr.prototype.get_Ndiv4_ie3hew_k$ = function() {
        return this.Ndiv4__1;
      };
      CDFTsr.prototype.link = function(xr, xi, Xr, Xi) {
        this.xr_1 = xr;
        this.xi_1 = xi;
        this.outXr_1 = Xr;
        this.outXi_1 = Xi;
        ensureNotNull(this.dft1__1).link(xr, xi, Xr, Xi);
        ensureNotNull(this.dft2__1).link(xr, xi, Xr, Xi);
        ensureNotNull(this.dft3__1).link(xr, xi, Xr, Xi);
      };
      CDFTsr.prototype.evaluate_de95qg_k$ = function() {
        var T1r;
        var T1i;
        var T3r;
        var T3i;
        var Rr;
        var Ri;
        var Sr;
        var Si;
        var Wr;
        var Wi;
        ensureNotNull(this.dft1__1).evaluate_de95qg_k$();
        ensureNotNull(this.dft2__1).evaluate_de95qg_k$();
        ensureNotNull(this.dft3__1).evaluate_de95qg_k$();
        var kp = this.outXoffset_1;
        var kpN4 = kp + this.Ndiv4__1 | 0;
        var kpN2 = kpN4 + this.Ndiv4__1 | 0;
        var kp3N4 = kpN2 + this.Ndiv4__1 | 0;
        Rr = this.get_outXr_iwjr9b_k$()[kpN2] + this.get_outXr_iwjr9b_k$()[kp3N4];
        Ri = this.get_outXi_iwjr92_k$()[kpN2] + this.get_outXi_iwjr92_k$()[kp3N4];
        Sr = this.get_outXi_iwjr92_k$()[kp3N4] - this.get_outXi_iwjr92_k$()[kpN2];
        Si = this.get_outXr_iwjr9b_k$()[kpN2] - this.get_outXr_iwjr9b_k$()[kp3N4];
        this.get_outXr_iwjr9b_k$()[kpN2] = this.get_outXr_iwjr9b_k$()[kp] - Rr;
        this.get_outXi_iwjr92_k$()[kpN2] = this.get_outXi_iwjr92_k$()[kp] - Ri;
        this.get_outXr_iwjr9b_k$()[kp3N4] = this.get_outXr_iwjr9b_k$()[kpN4] + Sr;
        this.get_outXi_iwjr92_k$()[kp3N4] = this.get_outXi_iwjr92_k$()[kpN4] + Si;
        var tmp0_array = this.get_outXr_iwjr9b_k$();
        var tmp1_index0 = kp;
        tmp0_array[tmp1_index0] = tmp0_array[tmp1_index0] + Rr;
        var tmp2_array = this.get_outXi_iwjr92_k$();
        var tmp3_index0 = kp;
        tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] + Ri;
        var tmp4_array = this.get_outXr_iwjr9b_k$();
        var tmp5_index0 = kpN4;
        tmp4_array[tmp5_index0] = tmp4_array[tmp5_index0] - Sr;
        var tmp6_array = this.get_outXi_iwjr92_k$();
        var tmp7_index0 = kpN4;
        tmp6_array[tmp7_index0] = tmp6_array[tmp7_index0] - Si;
        var fk;
        var inductionVariable = 1;
        var last = this.Ndiv8__1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var k2 = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            fk = imul(this.f_1, k2);
            kp = k2 + this.outXoffset_1 | 0;
            kpN4 = kp + this.Ndiv4__1 | 0;
            kpN2 = kpN4 + this.Ndiv4__1 | 0;
            kp3N4 = kpN2 + this.Ndiv4__1 | 0;
            Wr = ensureNotNull(this.c_1)[fk];
            Wi = ensureNotNull(this.s_1)[fk];
            T1r = Wr * this.get_outXr_iwjr9b_k$()[kpN2] - Wi * this.get_outXi_iwjr92_k$()[kpN2];
            T1i = Wr * this.get_outXi_iwjr92_k$()[kpN2] + Wi * this.get_outXr_iwjr9b_k$()[kpN2];
            Wr = ensureNotNull(this.c3__1)[fk];
            Wi = ensureNotNull(this.s3__1)[fk];
            T3r = Wr * this.get_outXr_iwjr9b_k$()[kp3N4] - Wi * this.get_outXi_iwjr92_k$()[kp3N4];
            T3i = Wr * this.get_outXi_iwjr92_k$()[kp3N4] + Wi * this.get_outXr_iwjr9b_k$()[kp3N4];
            Rr = T1r + T3r;
            Ri = T1i + T3i;
            Sr = T3i - T1i;
            Si = T1r - T3r;
            this.get_outXr_iwjr9b_k$()[kpN2] = this.get_outXr_iwjr9b_k$()[kp] - Rr;
            this.get_outXi_iwjr92_k$()[kpN2] = this.get_outXi_iwjr92_k$()[kp] - Ri;
            this.get_outXr_iwjr9b_k$()[kp3N4] = this.get_outXr_iwjr9b_k$()[kpN4] + Sr;
            this.get_outXi_iwjr92_k$()[kp3N4] = this.get_outXi_iwjr92_k$()[kpN4] + Si;
            var tmp9_array = this.get_outXr_iwjr9b_k$();
            var tmp10_index0 = kp;
            tmp9_array[tmp10_index0] = tmp9_array[tmp10_index0] + Rr;
            var tmp11_array = this.get_outXi_iwjr92_k$();
            var tmp12_index0 = kp;
            tmp11_array[tmp12_index0] = tmp11_array[tmp12_index0] + Ri;
            var tmp13_array = this.get_outXr_iwjr9b_k$();
            var tmp14_index0 = kpN4;
            tmp13_array[tmp14_index0] = tmp13_array[tmp14_index0] - Sr;
            var tmp15_array = this.get_outXi_iwjr92_k$();
            var tmp16_index0 = kpN4;
            tmp15_array[tmp16_index0] = tmp15_array[tmp16_index0] - Si;
          } while (!(k2 === last));
        kp = this.Ndiv8__1 + this.outXoffset_1 | 0;
        kpN4 = kp + this.Ndiv4__1 | 0;
        kpN2 = kpN4 + this.Ndiv4__1 | 0;
        kp3N4 = kpN2 + this.Ndiv4__1 | 0;
        T1r = Companion_getInstance_1().SQRT2BY2__1 * (this.get_outXr_iwjr9b_k$()[kpN2] + this.get_outXi_iwjr92_k$()[kpN2]);
        T1i = Companion_getInstance_1().SQRT2BY2__1 * (this.get_outXi_iwjr92_k$()[kpN2] - this.get_outXr_iwjr9b_k$()[kpN2]);
        T3r = Companion_getInstance_1().SQRT2BY2__1 * (this.get_outXi_iwjr92_k$()[kp3N4] - this.get_outXr_iwjr9b_k$()[kp3N4]);
        T3i = -Companion_getInstance_1().SQRT2BY2__1 * (this.get_outXi_iwjr92_k$()[kp3N4] + this.get_outXr_iwjr9b_k$()[kp3N4]);
        Rr = T1r + T3r;
        Ri = T1i + T3i;
        Sr = T3i - T1i;
        Si = T1r - T3r;
        this.get_outXr_iwjr9b_k$()[kpN2] = this.get_outXr_iwjr9b_k$()[kp] - Rr;
        this.get_outXi_iwjr92_k$()[kpN2] = this.get_outXi_iwjr92_k$()[kp] - Ri;
        this.get_outXr_iwjr9b_k$()[kp3N4] = this.get_outXr_iwjr9b_k$()[kpN4] + Sr;
        this.get_outXi_iwjr92_k$()[kp3N4] = this.get_outXi_iwjr92_k$()[kpN4] + Si;
        var tmp17_array = this.get_outXr_iwjr9b_k$();
        var tmp18_index0 = kp;
        tmp17_array[tmp18_index0] = tmp17_array[tmp18_index0] + Rr;
        var tmp19_array = this.get_outXi_iwjr92_k$();
        var tmp20_index0 = kp;
        tmp19_array[tmp20_index0] = tmp19_array[tmp20_index0] + Ri;
        var tmp21_array = this.get_outXr_iwjr9b_k$();
        var tmp22_index0 = kpN4;
        tmp21_array[tmp22_index0] = tmp21_array[tmp22_index0] - Sr;
        var tmp23_array = this.get_outXi_iwjr92_k$();
        var tmp24_index0 = kpN4;
        tmp23_array[tmp24_index0] = tmp23_array[tmp24_index0] - Si;
        var inductionVariable_0 = this.Ndiv8__1 + 1 | 0;
        var last_0 = this.Ndiv4__1 - 1 | 0;
        if (inductionVariable_0 <= last_0)
          do {
            var k_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            fk = this.reflect_1 - imul(this.f_1, k_0) | 0;
            kp = k_0 + this.outXoffset_1 | 0;
            kpN4 = kp + this.Ndiv4__1 | 0;
            kpN2 = kpN4 + this.Ndiv4__1 | 0;
            kp3N4 = kpN2 + this.Ndiv4__1 | 0;
            Wr = -ensureNotNull(this.s_1)[fk];
            Wi = -ensureNotNull(this.c_1)[fk];
            T1r = Wr * this.get_outXr_iwjr9b_k$()[kpN2] - Wi * this.get_outXi_iwjr92_k$()[kpN2];
            T1i = Wr * this.get_outXi_iwjr92_k$()[kpN2] + Wi * this.get_outXr_iwjr9b_k$()[kpN2];
            Wr = ensureNotNull(this.s3__1)[fk];
            Wi = ensureNotNull(this.c3__1)[fk];
            T3r = Wr * this.get_outXr_iwjr9b_k$()[kp3N4] - Wi * this.get_outXi_iwjr92_k$()[kp3N4];
            T3i = Wr * this.get_outXi_iwjr92_k$()[kp3N4] + Wi * this.get_outXr_iwjr9b_k$()[kp3N4];
            Rr = T1r + T3r;
            Ri = T1i + T3i;
            Sr = T3i - T1i;
            Si = T1r - T3r;
            this.get_outXr_iwjr9b_k$()[kpN2] = this.get_outXr_iwjr9b_k$()[kp] - Rr;
            this.get_outXi_iwjr92_k$()[kpN2] = this.get_outXi_iwjr92_k$()[kp] - Ri;
            this.get_outXr_iwjr9b_k$()[kp3N4] = this.get_outXr_iwjr9b_k$()[kpN4] + Sr;
            this.get_outXi_iwjr92_k$()[kp3N4] = this.get_outXi_iwjr92_k$()[kpN4] + Si;
            var tmp26_array = this.get_outXr_iwjr9b_k$();
            var tmp27_index0 = kp;
            tmp26_array[tmp27_index0] = tmp26_array[tmp27_index0] + Rr;
            var tmp28_array = this.get_outXi_iwjr92_k$();
            var tmp29_index0 = kp;
            tmp28_array[tmp29_index0] = tmp28_array[tmp29_index0] + Ri;
            var tmp30_array = this.get_outXr_iwjr9b_k$();
            var tmp31_index0 = kpN4;
            tmp30_array[tmp31_index0] = tmp30_array[tmp31_index0] - Sr;
            var tmp32_array = this.get_outXi_iwjr92_k$();
            var tmp33_index0 = kpN4;
            tmp32_array[tmp33_index0] = tmp32_array[tmp33_index0] - Si;
          } while (!(k_0 === last_0));
      };
      function CDFTsr() {
        Companion_getInstance_1();
        this.xoffset_1 = 0;
        this.xstride_1 = 0;
        this.outXoffset_1 = 0;
        this.m_1 = 0;
        this.N_1 = 0;
        this.Ndiv8__1 = 0;
        this.Ndiv4__1 = 0;
        this.dft1__1 = null;
        this.dft2__1 = null;
        this.dft3__1 = null;
        this.c_1 = null;
        this.c3__1 = null;
        this.s_1 = null;
        this.s3__1 = null;
        this.f_1 = 0;
        this.reflect_1 = 0;
      }
      CDFTsr.$metadata$ = classMeta("CDFTsr");
      function _get_n0__ndc5l5($this) {
        return $this.n0__1;
      }
      function _get_n1__ndc5m0($this) {
        return $this.n1__1;
      }
      function _get_n2__ndc5mv($this) {
        return $this.n2__1;
      }
      function _get_n3__ndc5nq($this) {
        return $this.n3__1;
      }
      function _get_n4__ndc5ol($this) {
        return $this.n4__1;
      }
      function _get_n5__ndc5pg($this) {
        return $this.n5__1;
      }
      function _get_n6__ndc5qb($this) {
        return $this.n6__1;
      }
      function _get_n7__ndc5r6($this) {
        return $this.n7__1;
      }
      function _get_n8__ndc5s1($this) {
        return $this.n8__1;
      }
      function _get_n9__ndc5sw($this) {
        return $this.n9__1;
      }
      function _get_n10__e6c9wk($this) {
        return $this.n10__1;
      }
      function _get_n11__e6c9xf($this) {
        return $this.n11__1;
      }
      function _get_n12__e6c9ya($this) {
        return $this.n12__1;
      }
      function _get_n13__e6c9z5($this) {
        return $this.n13__1;
      }
      function _get_n14__e6ca00($this) {
        return $this.n14__1;
      }
      function _get_n15__e6ca0v($this) {
        return $this.n15__1;
      }
      function _get_m0__ndc4ug($this) {
        return $this.m0__1;
      }
      function _get_m1__ndc4vb($this) {
        return $this.m1__1;
      }
      function _get_m2__ndc4w6($this) {
        return $this.m2__1;
      }
      function _get_m3__ndc4x1($this) {
        return $this.m3__1;
      }
      function _get_m4__ndc4xw($this) {
        return $this.m4__1;
      }
      function _get_m5__ndc4yr($this) {
        return $this.m5__1;
      }
      function _get_m6__ndc4zm($this) {
        return $this.m6__1;
      }
      function _get_m7__ndc50h($this) {
        return $this.m7__1;
      }
      function _get_m8__ndc51c($this) {
        return $this.m8__1;
      }
      function _get_m9__ndc527($this) {
        return $this.m9__1;
      }
      function _get_m10__e6bmx1($this) {
        return $this.m10__1;
      }
      function _get_m11__e6bmxw($this) {
        return $this.m11__1;
      }
      function _get_m12__e6bmyr($this) {
        return $this.m12__1;
      }
      function _get_m13__e6bmzm($this) {
        return $this.m13__1;
      }
      function _get_m14__e6bn0h($this) {
        return $this.m14__1;
      }
      function _get_m15__e6bn1c($this) {
        return $this.m15__1;
      }
      function Companion_2() {
        Companion_instance_2 = this;
        var tmp = this;
        var tmp$ret$0;
        {
          var tmp0_cos = 2 * get_PI() / 16;
          tmp$ret$0 = Math.cos(tmp0_cos);
        }
        tmp.C_1_16__1 = tmp$ret$0;
        var tmp_0 = this;
        var tmp$ret$1;
        {
          var tmp0_cos_0 = 2 * get_PI() * 3 / 16;
          tmp$ret$1 = Math.cos(tmp0_cos_0);
        }
        tmp_0.C_3_16__1 = tmp$ret$1;
        var tmp_1 = this;
        var tmp$ret$2;
        {
          tmp$ret$2 = Math.sqrt(2);
        }
        tmp_1.SQRT2BY2__1 = tmp$ret$2 / 2;
      }
      Companion_2.prototype.get_C_1_16_3f5hmw_k$ = function() {
        return this.C_1_16__1;
      };
      Companion_2.prototype.get_C_3_16_3f47nu_k$ = function() {
        return this.C_3_16__1;
      };
      Companion_2.prototype.get_SQRT2BY2_x1x4ni_k$ = function() {
        return this.SQRT2BY2__1;
      };
      Companion_2.$metadata$ = objectMeta("Companion");
      var Companion_instance_2;
      function Companion_getInstance_2() {
        if (Companion_instance_2 == null)
          new Companion_2();
        return Companion_instance_2;
      }
      function CDFTsr16(dataOffset, dataStride, transformOffset) {
        Companion_getInstance_2();
        CDFTsr_init_$Init$_0(this);
        this.set_m_669hr4_k$(4);
        this.set_N_hmx2g1_k$(16);
        this.set_xoffset_bd3wle_k$(dataOffset);
        this.set_xstride_i6zsu4_k$(dataStride);
        this.set_outXoffset_dyl9jq_k$(transformOffset);
        this.n0__1 = this.get_xoffset_u1srtq_k$();
        this.n1__1 = this.n0__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n2__1 = this.n1__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n3__1 = this.n2__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n4__1 = this.n3__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n5__1 = this.n4__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n6__1 = this.n5__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n7__1 = this.n6__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n8__1 = this.n7__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n9__1 = this.n8__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n10__1 = this.n9__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n11__1 = this.n10__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n12__1 = this.n11__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n13__1 = this.n12__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n14__1 = this.n13__1 + this.get_xstride_rxppjs_k$() | 0;
        this.n15__1 = this.n14__1 + this.get_xstride_rxppjs_k$() | 0;
        this.m0__1 = this.get_outXoffset_tmu2xy_k$();
        this.m1__1 = this.m0__1 + 1 | 0;
        this.m2__1 = this.m1__1 + 1 | 0;
        this.m3__1 = this.m2__1 + 1 | 0;
        this.m4__1 = this.m3__1 + 1 | 0;
        this.m5__1 = this.m4__1 + 1 | 0;
        this.m6__1 = this.m5__1 + 1 | 0;
        this.m7__1 = this.m6__1 + 1 | 0;
        this.m8__1 = this.m7__1 + 1 | 0;
        this.m9__1 = this.m8__1 + 1 | 0;
        this.m10__1 = this.m9__1 + 1 | 0;
        this.m11__1 = this.m10__1 + 1 | 0;
        this.m12__1 = this.m11__1 + 1 | 0;
        this.m13__1 = this.m12__1 + 1 | 0;
        this.m14__1 = this.m13__1 + 1 | 0;
        this.m15__1 = this.m14__1 + 1 | 0;
      }
      CDFTsr16.prototype.link_unhtbf_k$ = function(xr, xi, Xr, Xi) {
        this.set_xr_n8tm33_k$(xr);
        this.set_xi_41v7l4_k$(xi);
        this.set_outXr_dvcqpn_k$(Xr);
        this.set_outXi_dfc2yk_k$(Xi);
      };
      CDFTsr16.prototype.link = function(xr, xi, Xr, Xi) {
        return this.link_unhtbf_k$(xr, xi, Xr, Xi);
      };
      CDFTsr16.prototype.evaluate_de95qg_k$ = function() {
        var T1r;
        var T1i;
        var T3r;
        var T3i;
        var Rr;
        var Ri;
        var Sr;
        var Si;
        this.get_outXr_iwjr9b_k$()[this.m0__1] = this.get_xr_kntnjx_k$()[this.n0__1] + this.get_xr_kntnjx_k$()[this.n8__1];
        this.get_outXi_iwjr92_k$()[this.m0__1] = this.get_xi_kntnk6_k$()[this.n0__1] + this.get_xi_kntnk6_k$()[this.n8__1];
        this.get_outXr_iwjr9b_k$()[this.m1__1] = this.get_xr_kntnjx_k$()[this.n0__1] - this.get_xr_kntnjx_k$()[this.n8__1];
        this.get_outXi_iwjr92_k$()[this.m1__1] = this.get_xi_kntnk6_k$()[this.n0__1] - this.get_xi_kntnk6_k$()[this.n8__1];
        Rr = this.get_xr_kntnjx_k$()[this.n4__1] + this.get_xr_kntnjx_k$()[this.n12__1];
        Ri = this.get_xi_kntnk6_k$()[this.n4__1] + this.get_xi_kntnk6_k$()[this.n12__1];
        Sr = this.get_xi_kntnk6_k$()[this.n12__1] - this.get_xi_kntnk6_k$()[this.n4__1];
        Si = this.get_xr_kntnjx_k$()[this.n4__1] - this.get_xr_kntnjx_k$()[this.n12__1];
        this.get_outXr_iwjr9b_k$()[this.m2__1] = this.get_outXr_iwjr9b_k$()[this.m0__1] - Rr;
        this.get_outXi_iwjr92_k$()[this.m2__1] = this.get_outXi_iwjr92_k$()[this.m0__1] - Ri;
        this.get_outXr_iwjr9b_k$()[this.m3__1] = this.get_outXr_iwjr9b_k$()[this.m1__1] + Sr;
        this.get_outXi_iwjr92_k$()[this.m3__1] = this.get_outXi_iwjr92_k$()[this.m1__1] + Si;
        var tmp0_array = this.get_outXr_iwjr9b_k$();
        var tmp1_index0 = this.m0__1;
        tmp0_array[tmp1_index0] = tmp0_array[tmp1_index0] + Rr;
        var tmp2_array = this.get_outXi_iwjr92_k$();
        var tmp3_index0 = this.m0__1;
        tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] + Ri;
        var tmp4_array = this.get_outXr_iwjr9b_k$();
        var tmp5_index0 = this.m1__1;
        tmp4_array[tmp5_index0] = tmp4_array[tmp5_index0] - Sr;
        var tmp6_array = this.get_outXi_iwjr92_k$();
        var tmp7_index0 = this.m1__1;
        tmp6_array[tmp7_index0] = tmp6_array[tmp7_index0] - Si;
        this.get_outXr_iwjr9b_k$()[this.m4__1] = this.get_xr_kntnjx_k$()[this.n2__1] + this.get_xr_kntnjx_k$()[this.n10__1];
        this.get_outXi_iwjr92_k$()[this.m4__1] = this.get_xi_kntnk6_k$()[this.n2__1] + this.get_xi_kntnk6_k$()[this.n10__1];
        this.get_outXr_iwjr9b_k$()[this.m5__1] = this.get_xr_kntnjx_k$()[this.n2__1] - this.get_xr_kntnjx_k$()[this.n10__1];
        this.get_outXi_iwjr92_k$()[this.m5__1] = this.get_xi_kntnk6_k$()[this.n2__1] - this.get_xi_kntnk6_k$()[this.n10__1];
        this.get_outXr_iwjr9b_k$()[this.m6__1] = this.get_xr_kntnjx_k$()[this.n6__1] + this.get_xr_kntnjx_k$()[this.n14__1];
        this.get_outXi_iwjr92_k$()[this.m6__1] = this.get_xi_kntnk6_k$()[this.n6__1] + this.get_xi_kntnk6_k$()[this.n14__1];
        this.get_outXr_iwjr9b_k$()[this.m7__1] = this.get_xr_kntnjx_k$()[this.n6__1] - this.get_xr_kntnjx_k$()[this.n14__1];
        this.get_outXi_iwjr92_k$()[this.m7__1] = this.get_xi_kntnk6_k$()[this.n6__1] - this.get_xi_kntnk6_k$()[this.n14__1];
        Rr = this.get_outXr_iwjr9b_k$()[this.m4__1] + this.get_outXr_iwjr9b_k$()[this.m6__1];
        Ri = this.get_outXi_iwjr92_k$()[this.m4__1] + this.get_outXi_iwjr92_k$()[this.m6__1];
        Sr = this.get_outXi_iwjr92_k$()[this.m6__1] - this.get_outXi_iwjr92_k$()[this.m4__1];
        Si = this.get_outXr_iwjr9b_k$()[this.m4__1] - this.get_outXr_iwjr9b_k$()[this.m6__1];
        this.get_outXr_iwjr9b_k$()[this.m4__1] = this.get_outXr_iwjr9b_k$()[this.m0__1] - Rr;
        this.get_outXi_iwjr92_k$()[this.m4__1] = this.get_outXi_iwjr92_k$()[this.m0__1] - Ri;
        this.get_outXr_iwjr9b_k$()[this.m6__1] = this.get_outXr_iwjr9b_k$()[this.m2__1] + Sr;
        this.get_outXi_iwjr92_k$()[this.m6__1] = this.get_outXi_iwjr92_k$()[this.m2__1] + Si;
        var tmp8_array = this.get_outXr_iwjr9b_k$();
        var tmp9_index0 = this.m0__1;
        tmp8_array[tmp9_index0] = tmp8_array[tmp9_index0] + Rr;
        var tmp10_array = this.get_outXi_iwjr92_k$();
        var tmp11_index0 = this.m0__1;
        tmp10_array[tmp11_index0] = tmp10_array[tmp11_index0] + Ri;
        var tmp12_array = this.get_outXr_iwjr9b_k$();
        var tmp13_index0 = this.m2__1;
        tmp12_array[tmp13_index0] = tmp12_array[tmp13_index0] - Sr;
        var tmp14_array = this.get_outXi_iwjr92_k$();
        var tmp15_index0 = this.m2__1;
        tmp14_array[tmp15_index0] = tmp14_array[tmp15_index0] - Si;
        T1r = Companion_getInstance_2().SQRT2BY2__1 * (this.get_outXr_iwjr9b_k$()[this.m5__1] + this.get_outXi_iwjr92_k$()[this.m5__1]);
        T1i = Companion_getInstance_2().SQRT2BY2__1 * (this.get_outXi_iwjr92_k$()[this.m5__1] - this.get_outXr_iwjr9b_k$()[this.m5__1]);
        T3r = Companion_getInstance_2().SQRT2BY2__1 * (this.get_outXi_iwjr92_k$()[this.m7__1] - this.get_outXr_iwjr9b_k$()[this.m7__1]);
        T3i = -Companion_getInstance_2().SQRT2BY2__1 * (this.get_outXi_iwjr92_k$()[this.m7__1] + this.get_outXr_iwjr9b_k$()[this.m7__1]);
        Rr = T1r + T3r;
        Ri = T1i + T3i;
        Sr = T3i - T1i;
        Si = T1r - T3r;
        this.get_outXr_iwjr9b_k$()[this.m5__1] = this.get_outXr_iwjr9b_k$()[this.m1__1] - Rr;
        this.get_outXi_iwjr92_k$()[this.m5__1] = this.get_outXi_iwjr92_k$()[this.m1__1] - Ri;
        this.get_outXr_iwjr9b_k$()[this.m7__1] = this.get_outXr_iwjr9b_k$()[this.m3__1] + Sr;
        this.get_outXi_iwjr92_k$()[this.m7__1] = this.get_outXi_iwjr92_k$()[this.m3__1] + Si;
        var tmp16_array = this.get_outXr_iwjr9b_k$();
        var tmp17_index0 = this.m1__1;
        tmp16_array[tmp17_index0] = tmp16_array[tmp17_index0] + Rr;
        var tmp18_array = this.get_outXi_iwjr92_k$();
        var tmp19_index0 = this.m1__1;
        tmp18_array[tmp19_index0] = tmp18_array[tmp19_index0] + Ri;
        var tmp20_array = this.get_outXr_iwjr9b_k$();
        var tmp21_index0 = this.m3__1;
        tmp20_array[tmp21_index0] = tmp20_array[tmp21_index0] - Sr;
        var tmp22_array = this.get_outXi_iwjr92_k$();
        var tmp23_index0 = this.m3__1;
        tmp22_array[tmp23_index0] = tmp22_array[tmp23_index0] - Si;
        this.get_outXr_iwjr9b_k$()[this.m8__1] = this.get_xr_kntnjx_k$()[this.n1__1] + this.get_xr_kntnjx_k$()[this.n9__1];
        this.get_outXi_iwjr92_k$()[this.m8__1] = this.get_xi_kntnk6_k$()[this.n1__1] + this.get_xi_kntnk6_k$()[this.n9__1];
        this.get_outXr_iwjr9b_k$()[this.m9__1] = this.get_xr_kntnjx_k$()[this.n1__1] - this.get_xr_kntnjx_k$()[this.n9__1];
        this.get_outXi_iwjr92_k$()[this.m9__1] = this.get_xi_kntnk6_k$()[this.n1__1] - this.get_xi_kntnk6_k$()[this.n9__1];
        Rr = this.get_xr_kntnjx_k$()[this.n5__1] + this.get_xr_kntnjx_k$()[this.n13__1];
        Ri = this.get_xi_kntnk6_k$()[this.n5__1] + this.get_xi_kntnk6_k$()[this.n13__1];
        Sr = this.get_xi_kntnk6_k$()[this.n13__1] - this.get_xi_kntnk6_k$()[this.n5__1];
        Si = this.get_xr_kntnjx_k$()[this.n5__1] - this.get_xr_kntnjx_k$()[this.n13__1];
        this.get_outXr_iwjr9b_k$()[this.m10__1] = this.get_outXr_iwjr9b_k$()[this.m8__1] - Rr;
        this.get_outXi_iwjr92_k$()[this.m10__1] = this.get_outXi_iwjr92_k$()[this.m8__1] - Ri;
        this.get_outXr_iwjr9b_k$()[this.m11__1] = this.get_outXr_iwjr9b_k$()[this.m9__1] + Sr;
        this.get_outXi_iwjr92_k$()[this.m11__1] = this.get_outXi_iwjr92_k$()[this.m9__1] + Si;
        var tmp24_array = this.get_outXr_iwjr9b_k$();
        var tmp25_index0 = this.m8__1;
        tmp24_array[tmp25_index0] = tmp24_array[tmp25_index0] + Rr;
        var tmp26_array = this.get_outXi_iwjr92_k$();
        var tmp27_index0 = this.m8__1;
        tmp26_array[tmp27_index0] = tmp26_array[tmp27_index0] + Ri;
        var tmp28_array = this.get_outXr_iwjr9b_k$();
        var tmp29_index0 = this.m9__1;
        tmp28_array[tmp29_index0] = tmp28_array[tmp29_index0] - Sr;
        var tmp30_array = this.get_outXi_iwjr92_k$();
        var tmp31_index0 = this.m9__1;
        tmp30_array[tmp31_index0] = tmp30_array[tmp31_index0] - Si;
        this.get_outXr_iwjr9b_k$()[this.m12__1] = this.get_xr_kntnjx_k$()[this.n3__1] + this.get_xr_kntnjx_k$()[this.n11__1];
        this.get_outXi_iwjr92_k$()[this.m12__1] = this.get_xi_kntnk6_k$()[this.n3__1] + this.get_xi_kntnk6_k$()[this.n11__1];
        this.get_outXr_iwjr9b_k$()[this.m13__1] = this.get_xr_kntnjx_k$()[this.n3__1] - this.get_xr_kntnjx_k$()[this.n11__1];
        this.get_outXi_iwjr92_k$()[this.m13__1] = this.get_xi_kntnk6_k$()[this.n3__1] - this.get_xi_kntnk6_k$()[this.n11__1];
        Rr = this.get_xr_kntnjx_k$()[this.n7__1] + this.get_xr_kntnjx_k$()[this.n15__1];
        Ri = this.get_xi_kntnk6_k$()[this.n7__1] + this.get_xi_kntnk6_k$()[this.n15__1];
        Sr = this.get_xi_kntnk6_k$()[this.n15__1] - this.get_xi_kntnk6_k$()[this.n7__1];
        Si = this.get_xr_kntnjx_k$()[this.n7__1] - this.get_xr_kntnjx_k$()[this.n15__1];
        this.get_outXr_iwjr9b_k$()[this.m14__1] = this.get_outXr_iwjr9b_k$()[this.m12__1] - Rr;
        this.get_outXi_iwjr92_k$()[this.m14__1] = this.get_outXi_iwjr92_k$()[this.m12__1] - Ri;
        this.get_outXr_iwjr9b_k$()[this.m15__1] = this.get_outXr_iwjr9b_k$()[this.m13__1] + Sr;
        this.get_outXi_iwjr92_k$()[this.m15__1] = this.get_outXi_iwjr92_k$()[this.m13__1] + Si;
        var tmp32_array = this.get_outXr_iwjr9b_k$();
        var tmp33_index0 = this.m12__1;
        tmp32_array[tmp33_index0] = tmp32_array[tmp33_index0] + Rr;
        var tmp34_array = this.get_outXi_iwjr92_k$();
        var tmp35_index0 = this.m12__1;
        tmp34_array[tmp35_index0] = tmp34_array[tmp35_index0] + Ri;
        var tmp36_array = this.get_outXr_iwjr9b_k$();
        var tmp37_index0 = this.m13__1;
        tmp36_array[tmp37_index0] = tmp36_array[tmp37_index0] - Sr;
        var tmp38_array = this.get_outXi_iwjr92_k$();
        var tmp39_index0 = this.m13__1;
        tmp38_array[tmp39_index0] = tmp38_array[tmp39_index0] - Si;
        Rr = this.get_outXr_iwjr9b_k$()[this.m8__1] + this.get_outXr_iwjr9b_k$()[this.m12__1];
        Ri = this.get_outXi_iwjr92_k$()[this.m8__1] + this.get_outXi_iwjr92_k$()[this.m12__1];
        Sr = this.get_outXi_iwjr92_k$()[this.m12__1] - this.get_outXi_iwjr92_k$()[this.m8__1];
        Si = this.get_outXr_iwjr9b_k$()[this.m8__1] - this.get_outXr_iwjr9b_k$()[this.m12__1];
        this.get_outXr_iwjr9b_k$()[this.m8__1] = this.get_outXr_iwjr9b_k$()[this.m0__1] - Rr;
        this.get_outXi_iwjr92_k$()[this.m8__1] = this.get_outXi_iwjr92_k$()[this.m0__1] - Ri;
        this.get_outXr_iwjr9b_k$()[this.m12__1] = this.get_outXr_iwjr9b_k$()[this.m4__1] + Sr;
        this.get_outXi_iwjr92_k$()[this.m12__1] = this.get_outXi_iwjr92_k$()[this.m4__1] + Si;
        var tmp40_array = this.get_outXr_iwjr9b_k$();
        var tmp41_index0 = this.m0__1;
        tmp40_array[tmp41_index0] = tmp40_array[tmp41_index0] + Rr;
        var tmp42_array = this.get_outXi_iwjr92_k$();
        var tmp43_index0 = this.m0__1;
        tmp42_array[tmp43_index0] = tmp42_array[tmp43_index0] + Ri;
        var tmp44_array = this.get_outXr_iwjr9b_k$();
        var tmp45_index0 = this.m4__1;
        tmp44_array[tmp45_index0] = tmp44_array[tmp45_index0] - Sr;
        var tmp46_array = this.get_outXi_iwjr92_k$();
        var tmp47_index0 = this.m4__1;
        tmp46_array[tmp47_index0] = tmp46_array[tmp47_index0] - Si;
        T1r = Companion_getInstance_2().C_1_16__1 * this.get_outXr_iwjr9b_k$()[this.m9__1] + Companion_getInstance_2().C_3_16__1 * this.get_outXi_iwjr92_k$()[this.m9__1];
        T1i = Companion_getInstance_2().C_1_16__1 * this.get_outXi_iwjr92_k$()[this.m9__1] - Companion_getInstance_2().C_3_16__1 * this.get_outXr_iwjr9b_k$()[this.m9__1];
        T3r = Companion_getInstance_2().C_3_16__1 * this.get_outXr_iwjr9b_k$()[this.m13__1] + Companion_getInstance_2().C_1_16__1 * this.get_outXi_iwjr92_k$()[this.m13__1];
        T3i = Companion_getInstance_2().C_3_16__1 * this.get_outXi_iwjr92_k$()[this.m13__1] - Companion_getInstance_2().C_1_16__1 * this.get_outXr_iwjr9b_k$()[this.m13__1];
        Rr = T1r + T3r;
        Ri = T1i + T3i;
        Sr = T3i - T1i;
        Si = T1r - T3r;
        this.get_outXr_iwjr9b_k$()[this.m9__1] = this.get_outXr_iwjr9b_k$()[this.m1__1] - Rr;
        this.get_outXi_iwjr92_k$()[this.m9__1] = this.get_outXi_iwjr92_k$()[this.m1__1] - Ri;
        this.get_outXr_iwjr9b_k$()[this.m13__1] = this.get_outXr_iwjr9b_k$()[this.m5__1] + Sr;
        this.get_outXi_iwjr92_k$()[this.m13__1] = this.get_outXi_iwjr92_k$()[this.m5__1] + Si;
        var tmp48_array = this.get_outXr_iwjr9b_k$();
        var tmp49_index0 = this.m1__1;
        tmp48_array[tmp49_index0] = tmp48_array[tmp49_index0] + Rr;
        var tmp50_array = this.get_outXi_iwjr92_k$();
        var tmp51_index0 = this.m1__1;
        tmp50_array[tmp51_index0] = tmp50_array[tmp51_index0] + Ri;
        var tmp52_array = this.get_outXr_iwjr9b_k$();
        var tmp53_index0 = this.m5__1;
        tmp52_array[tmp53_index0] = tmp52_array[tmp53_index0] - Sr;
        var tmp54_array = this.get_outXi_iwjr92_k$();
        var tmp55_index0 = this.m5__1;
        tmp54_array[tmp55_index0] = tmp54_array[tmp55_index0] - Si;
        T1r = Companion_getInstance_2().SQRT2BY2__1 * (this.get_outXr_iwjr9b_k$()[this.m10__1] + this.get_outXi_iwjr92_k$()[this.m10__1]);
        T1i = Companion_getInstance_2().SQRT2BY2__1 * (this.get_outXi_iwjr92_k$()[this.m10__1] - this.get_outXr_iwjr9b_k$()[this.m10__1]);
        T3r = Companion_getInstance_2().SQRT2BY2__1 * (this.get_outXi_iwjr92_k$()[this.m14__1] - this.get_outXr_iwjr9b_k$()[this.m14__1]);
        T3i = -Companion_getInstance_2().SQRT2BY2__1 * (this.get_outXi_iwjr92_k$()[this.m14__1] + this.get_outXr_iwjr9b_k$()[this.m14__1]);
        Rr = T1r + T3r;
        Ri = T1i + T3i;
        Sr = T3i - T1i;
        Si = T1r - T3r;
        this.get_outXr_iwjr9b_k$()[this.m10__1] = this.get_outXr_iwjr9b_k$()[this.m2__1] - Rr;
        this.get_outXi_iwjr92_k$()[this.m10__1] = this.get_outXi_iwjr92_k$()[this.m2__1] - Ri;
        this.get_outXr_iwjr9b_k$()[this.m14__1] = this.get_outXr_iwjr9b_k$()[this.m6__1] + Sr;
        this.get_outXi_iwjr92_k$()[this.m14__1] = this.get_outXi_iwjr92_k$()[this.m6__1] + Si;
        var tmp56_array = this.get_outXr_iwjr9b_k$();
        var tmp57_index0 = this.m2__1;
        tmp56_array[tmp57_index0] = tmp56_array[tmp57_index0] + Rr;
        var tmp58_array = this.get_outXi_iwjr92_k$();
        var tmp59_index0 = this.m2__1;
        tmp58_array[tmp59_index0] = tmp58_array[tmp59_index0] + Ri;
        var tmp60_array = this.get_outXr_iwjr9b_k$();
        var tmp61_index0 = this.m6__1;
        tmp60_array[tmp61_index0] = tmp60_array[tmp61_index0] - Sr;
        var tmp62_array = this.get_outXi_iwjr92_k$();
        var tmp63_index0 = this.m6__1;
        tmp62_array[tmp63_index0] = tmp62_array[tmp63_index0] - Si;
        T1r = Companion_getInstance_2().C_3_16__1 * this.get_outXr_iwjr9b_k$()[this.m11__1] + Companion_getInstance_2().C_1_16__1 * this.get_outXi_iwjr92_k$()[this.m11__1];
        T1i = Companion_getInstance_2().C_3_16__1 * this.get_outXi_iwjr92_k$()[this.m11__1] - Companion_getInstance_2().C_1_16__1 * this.get_outXr_iwjr9b_k$()[this.m11__1];
        T3r = -Companion_getInstance_2().C_1_16__1 * this.get_outXr_iwjr9b_k$()[this.m15__1] - Companion_getInstance_2().C_3_16__1 * this.get_outXi_iwjr92_k$()[this.m15__1];
        T3i = -Companion_getInstance_2().C_1_16__1 * this.get_outXi_iwjr92_k$()[this.m15__1] + Companion_getInstance_2().C_3_16__1 * this.get_outXr_iwjr9b_k$()[this.m15__1];
        Rr = T1r + T3r;
        Ri = T1i + T3i;
        Sr = T3i - T1i;
        Si = T1r - T3r;
        this.get_outXr_iwjr9b_k$()[this.m11__1] = this.get_outXr_iwjr9b_k$()[this.m3__1] - Rr;
        this.get_outXi_iwjr92_k$()[this.m11__1] = this.get_outXi_iwjr92_k$()[this.m3__1] - Ri;
        this.get_outXr_iwjr9b_k$()[this.m15__1] = this.get_outXr_iwjr9b_k$()[this.m7__1] + Sr;
        this.get_outXi_iwjr92_k$()[this.m15__1] = this.get_outXi_iwjr92_k$()[this.m7__1] + Si;
        var tmp64_array = this.get_outXr_iwjr9b_k$();
        var tmp65_index0 = this.m3__1;
        tmp64_array[tmp65_index0] = tmp64_array[tmp65_index0] + Rr;
        var tmp66_array = this.get_outXi_iwjr92_k$();
        var tmp67_index0 = this.m3__1;
        tmp66_array[tmp67_index0] = tmp66_array[tmp67_index0] + Ri;
        var tmp68_array = this.get_outXr_iwjr9b_k$();
        var tmp69_index0 = this.m7__1;
        tmp68_array[tmp69_index0] = tmp68_array[tmp69_index0] - Sr;
        var tmp70_array = this.get_outXi_iwjr92_k$();
        var tmp71_index0 = this.m7__1;
        tmp70_array[tmp71_index0] = tmp70_array[tmp71_index0] - Si;
      };
      CDFTsr16.$metadata$ = classMeta("CDFTsr16", void 0, void 0, void 0, void 0, CDFTsr.prototype);
      function _get_n0__ndc5l5_0($this) {
        return $this.n0__1;
      }
      function _get_m0__ndc4ug_0($this) {
        return $this.m0__1;
      }
      function _get_n1__ndc5m0_0($this) {
        return $this.n1__1;
      }
      function _get_n2__ndc5mv_0($this) {
        return $this.n2__1;
      }
      function _get_n3__ndc5nq_0($this) {
        return $this.n3__1;
      }
      function _get_n4__ndc5ol_0($this) {
        return $this.n4__1;
      }
      function _get_n5__ndc5pg_0($this) {
        return $this.n5__1;
      }
      function _get_n6__ndc5qb_0($this) {
        return $this.n6__1;
      }
      function _get_n7__ndc5r6_0($this) {
        return $this.n7__1;
      }
      function _get_m1__ndc4vb_0($this) {
        return $this.m1__1;
      }
      function _get_m2__ndc4w6_0($this) {
        return $this.m2__1;
      }
      function _get_m3__ndc4x1_0($this) {
        return $this.m3__1;
      }
      function _get_m4__ndc4xw_0($this) {
        return $this.m4__1;
      }
      function _get_m5__ndc4yr_0($this) {
        return $this.m5__1;
      }
      function _get_m6__ndc4zm_0($this) {
        return $this.m6__1;
      }
      function _get_m7__ndc50h_0($this) {
        return $this.m7__1;
      }
      function Companion_3() {
        Companion_instance_3 = this;
        var tmp = this;
        var tmp$ret$0;
        {
          tmp$ret$0 = Math.sqrt(2);
        }
        tmp.SQRT2BY2__1 = tmp$ret$0 / 2;
      }
      Companion_3.prototype.get_SQRT2BY2_x1x4ni_k$ = function() {
        return this.SQRT2BY2__1;
      };
      Companion_3.$metadata$ = objectMeta("Companion");
      var Companion_instance_3;
      function Companion_getInstance_3() {
        if (Companion_instance_3 == null)
          new Companion_3();
        return Companion_instance_3;
      }
      function CDFTsr8(n0, xstride, m0) {
        Companion_getInstance_3();
        CDFTsr_init_$Init$_0(this);
        this.n0__1 = n0;
        this.m0__1 = m0;
        this.set_m_669hr4_k$(3);
        this.set_N_hmx2g1_k$(8);
        this.set_xoffset_bd3wle_k$(this.n0__1);
        this.set_xstride_i6zsu4_k$(xstride);
        this.set_outXoffset_dyl9jq_k$(this.m0__1);
        this.n1__1 = this.n0__1 + xstride | 0;
        this.n2__1 = this.n1__1 + xstride | 0;
        this.n3__1 = this.n2__1 + xstride | 0;
        this.n4__1 = this.n3__1 + xstride | 0;
        this.n5__1 = this.n4__1 + xstride | 0;
        this.n6__1 = this.n5__1 + xstride | 0;
        this.n7__1 = this.n6__1 + xstride | 0;
        this.m1__1 = this.m0__1 + 1 | 0;
        this.m2__1 = this.m1__1 + 1 | 0;
        this.m3__1 = this.m2__1 + 1 | 0;
        this.m4__1 = this.m3__1 + 1 | 0;
        this.m5__1 = this.m4__1 + 1 | 0;
        this.m6__1 = this.m5__1 + 1 | 0;
        this.m7__1 = this.m6__1 + 1 | 0;
      }
      CDFTsr8.prototype.link_unhtbf_k$ = function(xr, xi, Xr, Xi) {
        this.set_xr_n8tm33_k$(xr);
        this.set_xi_41v7l4_k$(xi);
        this.set_outXr_dvcqpn_k$(Xr);
        this.set_outXi_dfc2yk_k$(Xi);
      };
      CDFTsr8.prototype.link = function(xr, xi, Xr, Xi) {
        return this.link_unhtbf_k$(xr, xi, Xr, Xi);
      };
      CDFTsr8.prototype.evaluate_de95qg_k$ = function() {
        var T1r;
        var T1i;
        var T3r;
        var T3i;
        var Rr;
        var Ri;
        var Sr;
        var Si;
        this.get_outXr_iwjr9b_k$()[this.m0__1] = this.get_xr_kntnjx_k$()[this.n0__1] + this.get_xr_kntnjx_k$()[this.n4__1];
        this.get_outXi_iwjr92_k$()[this.m0__1] = this.get_xi_kntnk6_k$()[this.n0__1] + this.get_xi_kntnk6_k$()[this.n4__1];
        this.get_outXr_iwjr9b_k$()[this.m1__1] = this.get_xr_kntnjx_k$()[this.n0__1] - this.get_xr_kntnjx_k$()[this.n4__1];
        this.get_outXi_iwjr92_k$()[this.m1__1] = this.get_xi_kntnk6_k$()[this.n0__1] - this.get_xi_kntnk6_k$()[this.n4__1];
        Rr = this.get_xr_kntnjx_k$()[this.n2__1] + this.get_xr_kntnjx_k$()[this.n6__1];
        Ri = this.get_xi_kntnk6_k$()[this.n2__1] + this.get_xi_kntnk6_k$()[this.n6__1];
        Sr = this.get_xi_kntnk6_k$()[this.n6__1] - this.get_xi_kntnk6_k$()[this.n2__1];
        Si = this.get_xr_kntnjx_k$()[this.n2__1] - this.get_xr_kntnjx_k$()[this.n6__1];
        this.get_outXr_iwjr9b_k$()[this.m2__1] = this.get_outXr_iwjr9b_k$()[this.m0__1] - Rr;
        this.get_outXi_iwjr92_k$()[this.m2__1] = this.get_outXi_iwjr92_k$()[this.m0__1] - Ri;
        this.get_outXr_iwjr9b_k$()[this.m3__1] = this.get_outXr_iwjr9b_k$()[this.m1__1] + Sr;
        this.get_outXi_iwjr92_k$()[this.m3__1] = this.get_outXi_iwjr92_k$()[this.m1__1] + Si;
        var tmp0_array = this.get_outXr_iwjr9b_k$();
        var tmp1_index0 = this.m0__1;
        tmp0_array[tmp1_index0] = tmp0_array[tmp1_index0] + Rr;
        var tmp2_array = this.get_outXi_iwjr92_k$();
        var tmp3_index0 = this.m0__1;
        tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] + Ri;
        var tmp4_array = this.get_outXr_iwjr9b_k$();
        var tmp5_index0 = this.m1__1;
        tmp4_array[tmp5_index0] = tmp4_array[tmp5_index0] - Sr;
        var tmp6_array = this.get_outXi_iwjr92_k$();
        var tmp7_index0 = this.m1__1;
        tmp6_array[tmp7_index0] = tmp6_array[tmp7_index0] - Si;
        this.get_outXr_iwjr9b_k$()[this.m4__1] = this.get_xr_kntnjx_k$()[this.n1__1] + this.get_xr_kntnjx_k$()[this.n5__1];
        this.get_outXi_iwjr92_k$()[this.m4__1] = this.get_xi_kntnk6_k$()[this.n1__1] + this.get_xi_kntnk6_k$()[this.n5__1];
        this.get_outXr_iwjr9b_k$()[this.m5__1] = this.get_xr_kntnjx_k$()[this.n1__1] - this.get_xr_kntnjx_k$()[this.n5__1];
        this.get_outXi_iwjr92_k$()[this.m5__1] = this.get_xi_kntnk6_k$()[this.n1__1] - this.get_xi_kntnk6_k$()[this.n5__1];
        this.get_outXr_iwjr9b_k$()[this.m6__1] = this.get_xr_kntnjx_k$()[this.n3__1] + this.get_xr_kntnjx_k$()[this.n7__1];
        this.get_outXi_iwjr92_k$()[this.m6__1] = this.get_xi_kntnk6_k$()[this.n3__1] + this.get_xi_kntnk6_k$()[this.n7__1];
        this.get_outXr_iwjr9b_k$()[this.m7__1] = this.get_xr_kntnjx_k$()[this.n3__1] - this.get_xr_kntnjx_k$()[this.n7__1];
        this.get_outXi_iwjr92_k$()[this.m7__1] = this.get_xi_kntnk6_k$()[this.n3__1] - this.get_xi_kntnk6_k$()[this.n7__1];
        Rr = this.get_outXr_iwjr9b_k$()[this.m4__1] + this.get_outXr_iwjr9b_k$()[this.m6__1];
        Ri = this.get_outXi_iwjr92_k$()[this.m4__1] + this.get_outXi_iwjr92_k$()[this.m6__1];
        Sr = this.get_outXi_iwjr92_k$()[this.m6__1] - this.get_outXi_iwjr92_k$()[this.m4__1];
        Si = this.get_outXr_iwjr9b_k$()[this.m4__1] - this.get_outXr_iwjr9b_k$()[this.m6__1];
        this.get_outXr_iwjr9b_k$()[this.m4__1] = this.get_outXr_iwjr9b_k$()[this.m0__1] - Rr;
        this.get_outXi_iwjr92_k$()[this.m4__1] = this.get_outXi_iwjr92_k$()[this.m0__1] - Ri;
        this.get_outXr_iwjr9b_k$()[this.m6__1] = this.get_outXr_iwjr9b_k$()[this.m2__1] + Sr;
        this.get_outXi_iwjr92_k$()[this.m6__1] = this.get_outXi_iwjr92_k$()[this.m2__1] + Si;
        var tmp8_array = this.get_outXr_iwjr9b_k$();
        var tmp9_index0 = this.m0__1;
        tmp8_array[tmp9_index0] = tmp8_array[tmp9_index0] + Rr;
        var tmp10_array = this.get_outXi_iwjr92_k$();
        var tmp11_index0 = this.m0__1;
        tmp10_array[tmp11_index0] = tmp10_array[tmp11_index0] + Ri;
        var tmp12_array = this.get_outXr_iwjr9b_k$();
        var tmp13_index0 = this.m2__1;
        tmp12_array[tmp13_index0] = tmp12_array[tmp13_index0] - Sr;
        var tmp14_array = this.get_outXi_iwjr92_k$();
        var tmp15_index0 = this.m2__1;
        tmp14_array[tmp15_index0] = tmp14_array[tmp15_index0] - Si;
        T1r = Companion_getInstance_3().SQRT2BY2__1 * (this.get_outXr_iwjr9b_k$()[this.m5__1] + this.get_outXi_iwjr92_k$()[this.m5__1]);
        T1i = Companion_getInstance_3().SQRT2BY2__1 * (this.get_outXi_iwjr92_k$()[this.m5__1] - this.get_outXr_iwjr9b_k$()[this.m5__1]);
        T3r = Companion_getInstance_3().SQRT2BY2__1 * (this.get_outXi_iwjr92_k$()[this.m7__1] - this.get_outXr_iwjr9b_k$()[this.m7__1]);
        T3i = -Companion_getInstance_3().SQRT2BY2__1 * (this.get_outXi_iwjr92_k$()[this.m7__1] + this.get_outXr_iwjr9b_k$()[this.m7__1]);
        Rr = T1r + T3r;
        Ri = T1i + T3i;
        Sr = T3i - T1i;
        Si = T1r - T3r;
        this.get_outXr_iwjr9b_k$()[this.m5__1] = this.get_outXr_iwjr9b_k$()[this.m1__1] - Rr;
        this.get_outXi_iwjr92_k$()[this.m5__1] = this.get_outXi_iwjr92_k$()[this.m1__1] - Ri;
        this.get_outXr_iwjr9b_k$()[this.m7__1] = this.get_outXr_iwjr9b_k$()[this.m3__1] + Sr;
        this.get_outXi_iwjr92_k$()[this.m7__1] = this.get_outXi_iwjr92_k$()[this.m3__1] + Si;
        var tmp16_array = this.get_outXr_iwjr9b_k$();
        var tmp17_index0 = this.m1__1;
        tmp16_array[tmp17_index0] = tmp16_array[tmp17_index0] + Rr;
        var tmp18_array = this.get_outXi_iwjr92_k$();
        var tmp19_index0 = this.m1__1;
        tmp18_array[tmp19_index0] = tmp18_array[tmp19_index0] + Ri;
        var tmp20_array = this.get_outXr_iwjr9b_k$();
        var tmp21_index0 = this.m3__1;
        tmp20_array[tmp21_index0] = tmp20_array[tmp21_index0] - Sr;
        var tmp22_array = this.get_outXi_iwjr92_k$();
        var tmp23_index0 = this.m3__1;
        tmp22_array[tmp23_index0] = tmp22_array[tmp23_index0] - Si;
      };
      CDFTsr8.$metadata$ = classMeta("CDFTsr8", void 0, void 0, void 0, void 0, CDFTsr.prototype);
      function _get_N__7mlo03($this) {
        return $this.N_1;
      }
      function _get_N2__ndbhwn($this) {
        return $this.N2__1;
      }
      function _get_N4__ndbhyd($this) {
        return $this.N4__1;
      }
      function _get_xr__ndcekx($this) {
        return $this.xr_1;
      }
      function _get_xi__ndced6($this) {
        return $this.xi_1;
      }
      function _get_Xr__ndbqup($this) {
        return $this.Xr_1;
      }
      function _get_Xi__ndbqmy($this) {
        return $this.Xi_1;
      }
      function _get_dft__e670yn_0($this) {
        return $this.dft_1;
      }
      function _get_c__7mloi6_1($this) {
        return $this.c_1;
      }
      function _get_s__7mlovy_1($this) {
        return $this.s_1;
      }
      function Companion_4() {
        Companion_instance_4 = this;
      }
      Companion_4.prototype.dftProduct = function(kernel, transform2, sign3) {
        if (!(kernel.length === transform2.length))
          throw IllegalArgumentException_init_$Create$("kernel and transform arrays must have the same size");
        var n2 = kernel.length;
        var half = n2 / 2 | 0;
        var tmp0_array = transform2;
        var tmp1_index0 = 0;
        tmp0_array[tmp1_index0] = tmp0_array[tmp1_index0] * kernel[0];
        var tmp2_array = transform2;
        var tmp3_index0 = half;
        tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] * kernel[half];
        var tmp;
        var inductionVariable = 1;
        var last = half - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var im = n2 - i | 0;
            tmp = kernel[i] * transform2[i] - sign3 * kernel[im] * transform2[im];
            transform2[im] = kernel[i] * transform2[im] + sign3 * kernel[im] * transform2[i];
            transform2[i] = tmp;
          } while (!(i === last));
      };
      Companion_4.$metadata$ = objectMeta("Companion");
      var Companion_instance_4;
      function Companion_getInstance_4() {
        if (Companion_instance_4 == null)
          new Companion_4();
        return Companion_instance_4;
      }
      function RDFT2(log2N) {
        Companion_getInstance_4();
        if (log2N < 4)
          throw IllegalArgumentException_init_$Create$("DFT size must be >= 16");
        this.N_1 = 1 << log2N;
        this.N2__1 = this.N_1 / 2 | 0;
        this.N4__1 = this.N_1 / 4 | 0;
        this.xr_1 = new Float32Array(this.N2__1);
        this.xi_1 = new Float32Array(this.N2__1);
        this.Xr_1 = new Float32Array(this.N2__1);
        this.Xi_1 = new Float32Array(this.N2__1);
        this.s_1 = new Float32Array(this.N4__1);
        this.c_1 = new Float32Array(this.N4__1);
        var inductionVariable = 0;
        var last = this.N4__1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp$ret$0;
            {
              var tmp0_sin = 2 * get_PI() / this.N_1 * i;
              tmp$ret$0 = Math.sin(tmp0_sin);
            }
            this.s_1[i] = tmp$ret$0;
            var tmp$ret$1;
            {
              var tmp1_cos = 2 * get_PI() / this.N_1 * i;
              tmp$ret$1 = Math.cos(tmp1_cos);
            }
            this.c_1[i] = tmp$ret$1;
          } while (!(i === last));
        this.dft_1 = CDFT_ofLogSize(log2N - 1 | 0);
      }
      RDFT2.prototype.evaluate = function(x4, X3) {
        var inductionVariable = 0;
        var last = this.N2__1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var j = i << 1;
            var tmp1 = j;
            j = tmp1 + 1 | 0;
            this.xr_1[i] = x4[tmp1];
            this.xi_1[i] = x4[j];
          } while (!(i === last));
        this.dft_1.evaluateCDFT(this.xr_1, this.xi_1, this.Xr_1, this.Xi_1);
        X3[0] = this.Xr_1[0] + this.Xi_1[0];
        X3[this.N2__1] = this.Xr_1[0] - this.Xi_1[0];
        var N2pk = this.N2__1 + 1 | 0;
        var N2mk = this.N2__1 - 1 | 0;
        var Nmk = this.N_1 - 1 | 0;
        var inductionVariable_0 = 1;
        var last_0 = this.N4__1 - 1 | 0;
        if (inductionVariable_0 <= last_0)
          do {
            var k2 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            var Xrk = this.Xr_1[k2];
            var Xik = this.Xi_1[k2];
            var XrN2mk = this.Xr_1[N2mk];
            var XiN2mk = this.Xi_1[N2mk];
            var Sr = (Xrk + XrN2mk) / 2;
            var Si = (Xik - XiN2mk) / 2;
            var Dr = (Xik + XiN2mk) / 2;
            var Di = (XrN2mk - Xrk) / 2;
            var tmp = this.c_1[k2] * Dr + this.s_1[k2] * Di;
            Di = this.c_1[k2] * Di - this.s_1[k2] * Dr;
            Dr = tmp;
            X3[k2] = Sr + Dr;
            X3[Nmk] = Si + Di;
            X3[N2mk] = Sr - Dr;
            X3[N2pk] = Di - Si;
            var tmp3 = N2pk;
            N2pk = tmp3 + 1 | 0;
            var tmp4 = N2mk;
            N2mk = tmp4 - 1 | 0;
            var tmp5 = Nmk;
            Nmk = tmp5 - 1 | 0;
          } while (!(k2 === last_0));
        X3[this.N4__1] = this.Xr_1[this.N4__1];
        X3[this.N2__1 + this.N4__1 | 0] = -this.Xi_1[this.N4__1];
      };
      RDFT2.prototype.evaluateInverse = function(X3, x4) {
        this.Xr_1[0] = X3[0] + X3[this.N2__1];
        this.Xi_1[0] = X3[0] - X3[this.N2__1];
        var N2pk = this.N2__1 + 1 | 0;
        var N2mk = this.N2__1 - 1 | 0;
        var Nmk = this.N_1 - 1 | 0;
        var inductionVariable = 1;
        var last = this.N4__1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var k2 = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var Xrk = X3[k2];
            var Xik = X3[Nmk];
            var XrkpN2 = X3[N2mk];
            var XikpN2 = -X3[N2pk];
            var Dr = Xrk - XrkpN2;
            var Di = Xik - XikpN2;
            this.Xr_1[k2] = Xrk + XrkpN2 - this.s_1[k2] * Dr - this.c_1[k2] * Di;
            this.Xi_1[k2] = Xik + XikpN2 + this.c_1[k2] * Dr - this.s_1[k2] * Di;
            var tmp1 = N2pk;
            N2pk = tmp1 + 1 | 0;
            var tmp2 = N2mk;
            N2mk = tmp2 - 1 | 0;
            var tmp3 = Nmk;
            Nmk = tmp3 - 1 | 0;
          } while (!(k2 === last));
        this.Xr_1[this.N4__1] = 2 * X3[this.N4__1];
        this.Xi_1[this.N4__1] = -2 * X3[this.N2__1 + this.N4__1 | 0];
        N2pk = (this.N2__1 + this.N4__1 | 0) + 1 | 0;
        N2mk = this.N4__1 - 1 | 0;
        Nmk = (this.N_1 - this.N4__1 | 0) - 1 | 0;
        var reflect2 = this.N4__1 - 1 | 0;
        var inductionVariable_0 = this.N4__1 + 1 | 0;
        var last_0 = this.N2__1 - 1 | 0;
        if (inductionVariable_0 <= last_0)
          do {
            var k_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            var Xrk_0 = X3[k_0];
            var Xik_0 = X3[Nmk];
            var XrkpN2_0 = X3[N2mk];
            var XikpN2_0 = -X3[N2pk];
            var Dr_0 = Xrk_0 - XrkpN2_0;
            var Di_0 = Xik_0 - XikpN2_0;
            this.Xr_1[k_0] = Xrk_0 + XrkpN2_0 - this.s_1[reflect2] * Dr_0 + this.c_1[reflect2] * Di_0;
            this.Xi_1[k_0] = Xik_0 + XikpN2_0 - this.c_1[reflect2] * Dr_0 - this.s_1[reflect2] * Di_0;
            var tmp5 = N2pk;
            N2pk = tmp5 + 1 | 0;
            var tmp6 = N2mk;
            N2mk = tmp6 - 1 | 0;
            var tmp7 = Nmk;
            Nmk = tmp7 - 1 | 0;
            var tmp8 = reflect2;
            reflect2 = tmp8 - 1 | 0;
          } while (!(k_0 === last_0));
        this.dft_1.evaluateCDFT(this.Xr_1, this.Xi_1, this.xr_1, this.xi_1);
        x4[0] = this.xr_1[0] / this.N_1;
        x4[1] = this.xi_1[0] / this.N_1;
        var j = this.N2__1 - 1 | 0;
        var inductionVariable_1 = 1;
        var last_1 = this.N2__1 - 1 | 0;
        if (inductionVariable_1 <= last_1)
          do {
            var k_1 = inductionVariable_1;
            inductionVariable_1 = inductionVariable_1 + 1 | 0;
            var i = k_1 << 1;
            var tmp10 = i;
            i = tmp10 + 1 | 0;
            x4[tmp10] = this.xr_1[j] / this.N_1;
            x4[i] = this.xi_1[j] / this.N_1;
            var tmp11 = j;
            j = tmp11 - 1 | 0;
          } while (!(k_1 === last_1));
      };
      RDFT2.$metadata$ = classMeta("RDFT");
      function _get_order__d67t8d($this) {
        return $this.order_1;
      }
      function _get_x__7mlp09($this) {
        return $this.x_1;
      }
      function _get_y__7mlp14($this) {
        return $this.y_1;
      }
      function _get_weights__qpj14m($this) {
        return $this.weights_1;
      }
      function Companion_5() {
        Companion_instance_5 = this;
      }
      Companion_5.prototype.BarycentricWeights = function(z) {
        var n2 = z.length;
        var retval = new Float64Array(n2);
        var inductionVariable = 0;
        var last = n2 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var j = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var w = 1;
            var inductionVariable_0 = 0;
            var last_0 = n2 - 1 | 0;
            if (inductionVariable_0 <= last_0)
              do {
                var i = inductionVariable_0;
                inductionVariable_0 = inductionVariable_0 + 1 | 0;
                if (!(i === j))
                  w = w * (z[j] - z[i]);
              } while (!(i === last_0));
            retval[j] = 1 / w;
          } while (!(j === last));
        return retval;
      };
      Companion_5.$metadata$ = objectMeta("Companion");
      var Companion_instance_5;
      function Companion_getInstance_5() {
        if (Companion_instance_5 == null)
          new Companion_5();
        return Companion_instance_5;
      }
      function LagrangePolynomial2(x4, y4) {
        Companion_getInstance_5();
        if (!(x4.length === y4.length))
          throw IllegalArgumentException_init_$Create$("Lengths of x and y arrays do not match");
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = x4;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        tmp.x_1 = tmp$ret$1;
        var tmp_0 = this;
        var tmp$ret$3;
        {
          var tmp$ret$2;
          {
            tmp$ret$2 = y4;
          }
          tmp$ret$3 = tmp$ret$2.slice();
        }
        tmp_0.y_1 = tmp$ret$3;
        this.order_1 = x4.length - 1 | 0;
        this.weights_1 = Companion_getInstance_5().BarycentricWeights(x4);
      }
      LagrangePolynomial2.prototype.order = function() {
        return this.order_1;
      };
      LagrangePolynomial2.prototype.evaluateAt = function(xp) {
        var num = 0;
        var denom = 0;
        var inductionVariable = 0;
        var last = this.order_1;
        if (inductionVariable <= last)
          $l$loop:
            do {
              var j = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              if (xp === this.x_1[j]) {
                num = this.y_1[j];
                denom = 1;
                break $l$loop;
              }
              var term = this.weights_1[j] / (xp - this.x_1[j]);
              num = num + term * this.y_1[j];
              denom = denom + term;
            } while (!(j === last));
        return num / denom;
      };
      LagrangePolynomial2.prototype.ChebyshevNodes = function(a3, b, n2) {
        var t03 = (a3 + b) / 2;
        var t13 = (b - 1) / 2;
        var retval = new Float64Array(n2);
        var inductionVariable = 0;
        var last = n2 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp$ret$0;
            {
              var tmp0_cos = ((imul(2, i) + 1 | 0) / imul(2, n2) | 0) * get_PI();
              tmp$ret$0 = Math.cos(tmp0_cos);
            }
            retval[i] = t03 + t13 * tmp$ret$0;
          } while (!(i === last));
        return retval;
      };
      LagrangePolynomial2.$metadata$ = classMeta("LagrangePolynomial");
      function Polynomial_init_$Init$(a3, $this) {
        Polynomial2.call($this);
        $this._order_1 = a3.length - 1 | 0;
        var tmp = $this;
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = a3;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        tmp.a_1 = tmp$ret$1;
        return $this;
      }
      function Polynomial_ofArray(a3) {
        return Polynomial_init_$Init$(a3, Object.create(Polynomial2.prototype));
      }
      function Polynomial_init_$Init$_0(B2, $this) {
        Polynomial2.call($this);
        $this._order_1 = B2._order_1;
        var tmp = $this;
        var tmp$ret$1;
        {
          var tmp0_copyOf = B2.a_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_copyOf;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        tmp.a_1 = tmp$ret$1;
        return $this;
      }
      function Polynomial_ofPolynomial(B2) {
        return Polynomial_init_$Init$_0(B2, Object.create(Polynomial2.prototype));
      }
      function Polynomial_init_$Init$_1(order, $this) {
        Polynomial2.call($this);
        $this._order_1 = order;
        $this.a_1 = new Float64Array(order + 1 | 0);
        return $this;
      }
      function Polynomial_ofDegree(order) {
        return Polynomial_init_$Init$_1(order, Object.create(Polynomial2.prototype));
      }
      function Polynomial_init_$Init$_2(c5, $this) {
        Polynomial2.call($this);
        $this._order_1 = 0;
        $this.a_1 = new Float64Array(1);
        $this.a_1[0] = c5;
        return $this;
      }
      function Polynomial_ofConstant(c5) {
        return Polynomial_init_$Init$_2(c5, Object.create(Polynomial2.prototype));
      }
      Polynomial2.prototype.set_a_suc4n9_k$ = function(_set____db54di) {
        this.a_1 = _set____db54di;
      };
      Polynomial2.prototype.get_a_1mhr5k_k$ = function() {
        return this.a_1;
      };
      Polynomial2.prototype.set__order_ax9ysk_k$ = function(_set____db54di) {
        this._order_1 = _set____db54di;
      };
      Polynomial2.prototype.get__order_a42a1k_k$ = function() {
        return this._order_1;
      };
      Polynomial2.prototype.trim = function() {
        var i = this._order_1;
        var n2 = 0;
        while (this.a_1[i] === 0) {
          var tmp0 = n2;
          n2 = tmp0 + 1 | 0;
          var tmp1 = i;
          i = tmp1 - 1 | 0;
        }
        if (n2 > 0) {
          var b = new Float64Array((this._order_1 + 1 | 0) - n2 | 0);
          var inductionVariable = 0;
          var last = b.length - 1 | 0;
          if (inductionVariable <= last)
            do {
              var j = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              b[j] = this.a_1[j];
            } while (inductionVariable <= last);
          this.a_1 = b;
          var tmp3_this = this;
          tmp3_this._order_1 = tmp3_this._order_1 - n2 | 0;
        }
      };
      Polynomial2.prototype.order = function() {
        return this._order_1;
      };
      Polynomial2.prototype.coefficients = function() {
        var tmp$ret$1;
        {
          var tmp0_copyOf = this.a_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_copyOf;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        return tmp$ret$1;
      };
      Polynomial2.prototype.plusReal = function(c5) {
        var retval = Polynomial_ofDegree(this._order_1);
        var tmp = retval;
        var tmp$ret$1;
        {
          var tmp0_copyOf = this.a_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_copyOf;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        tmp.a_1 = tmp$ret$1;
        var tmp0_array = retval.a_1;
        var tmp1_index0 = 0;
        tmp0_array[tmp1_index0] = tmp0_array[tmp1_index0] + c5;
        return retval;
      };
      Polynomial2.prototype.plusEqualsReal = function(c5) {
        var tmp0_array = this.a_1;
        var tmp1_index0 = 0;
        tmp0_array[tmp1_index0] = tmp0_array[tmp1_index0] + c5;
      };
      Polynomial2.prototype.plusPolynomial = function(B2) {
        var tmp$ret$0;
        {
          var tmp0_max = this._order_1;
          var tmp1_max = B2._order_1;
          tmp$ret$0 = Math.max(tmp0_max, tmp1_max);
        }
        var retval = Polynomial_ofDegree(tmp$ret$0);
        var inductionVariable = 0;
        var last = this._order_1;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            retval.a_1[i] = this.a_1[i];
          } while (!(i === last));
        var inductionVariable_0 = 0;
        var last_0 = B2._order_1;
        if (inductionVariable_0 <= last_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            var tmp2_array = retval.a_1;
            var tmp3_index0 = i_0;
            tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] + B2.a_1[i_0];
          } while (!(i_0 === last_0));
        return retval;
      };
      Polynomial2.prototype.plusEqualsPolynomial = function(B2) {
        var tmp$ret$0;
        {
          var tmp0_max = this._order_1;
          var tmp1_max = B2._order_1;
          tmp$ret$0 = Math.max(tmp0_max, tmp1_max);
        }
        var A5 = new Float64Array(tmp$ret$0);
        var inductionVariable = 0;
        var last = this._order_1;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            A5[i] = this.a_1[i];
          } while (!(i === last));
        var inductionVariable_0 = 0;
        var last_0 = B2._order_1;
        if (inductionVariable_0 <= last_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            var tmp2_array = A5;
            var tmp3_index0 = i_0;
            tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] + B2.a_1[i_0];
          } while (!(i_0 === last_0));
        this.a_1 = A5;
        this._order_1 = A5.length - 1 | 0;
      };
      Polynomial2.prototype.minusReal = function(c5) {
        return this.plusReal(-c5);
      };
      Polynomial2.prototype.minusEqualsReal = function(c5) {
        this.plusEqualsReal(-c5);
      };
      Polynomial2.prototype.minusPolynomial = function(B2) {
        var tmp$ret$0;
        {
          var tmp0_max = this._order_1;
          var tmp1_max = B2._order_1;
          tmp$ret$0 = Math.max(tmp0_max, tmp1_max);
        }
        var retval = Polynomial_ofDegree(tmp$ret$0);
        var inductionVariable = 0;
        var last = this._order_1;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            retval.a_1[i] = this.a_1[i];
          } while (!(i === last));
        var inductionVariable_0 = 0;
        var last_0 = B2._order_1;
        if (inductionVariable_0 <= last_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            var tmp2_array = retval.a_1;
            var tmp3_index0 = i_0;
            tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] - B2.a_1[i_0];
          } while (!(i_0 === last_0));
        return retval;
      };
      Polynomial2.prototype.minusEqualsPolynomial = function(B2) {
        var tmp$ret$0;
        {
          var tmp0_max = this._order_1;
          var tmp1_max = B2._order_1;
          tmp$ret$0 = Math.max(tmp0_max, tmp1_max);
        }
        var A5 = new Float64Array(tmp$ret$0);
        var inductionVariable = 0;
        var last = this._order_1;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            A5[i] = this.a_1[i];
          } while (!(i === last));
        var inductionVariable_0 = 0;
        var last_0 = B2._order_1;
        if (inductionVariable_0 <= last_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            var tmp2_array = A5;
            var tmp3_index0 = i_0;
            tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] - B2.a_1[i_0];
          } while (!(i_0 === last_0));
        this.a_1 = A5;
        this._order_1 = A5.length - 1 | 0;
      };
      Polynomial2.prototype.timesReal = function(c5) {
        var retval = Polynomial_ofDegree(this._order_1);
        var inductionVariable = 0;
        var last = this._order_1;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            retval.a_1[i] = c5 * this.a_1[i];
          } while (!(i === last));
        return retval;
      };
      Polynomial2.prototype.timesEqualsReal = function(c5) {
        var inductionVariable = 0;
        var last = this._order_1;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp1_array = this.a_1;
            var tmp2_index0 = i;
            tmp1_array[tmp2_index0] = tmp1_array[tmp2_index0] * c5;
          } while (!(i === last));
      };
      Polynomial2.prototype.timesPolynomial = function(B2) {
        var b = B2.a_1;
        var prod = new Float64Array((this._order_1 + B2._order_1 | 0) + 1 | 0);
        var inductionVariable = 0;
        var last = B2._order_1;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var inductionVariable_0 = 0;
            var last_0 = this._order_1;
            if (inductionVariable_0 <= last_0)
              do {
                var j = inductionVariable_0;
                inductionVariable_0 = inductionVariable_0 + 1 | 0;
                var tmp2_array = prod;
                var tmp3_index0 = i + j | 0;
                tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] + b[i] * this.a_1[j];
              } while (!(j === last_0));
          } while (!(i === last));
        return Polynomial_ofArray(prod);
      };
      Polynomial2.prototype.timesEqualsPolynomial = function(B2) {
        var b = B2.a_1;
        var prod = new Float64Array((this._order_1 + B2._order_1 | 0) + 1 | 0);
        var inductionVariable = 0;
        var last = B2._order_1;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var inductionVariable_0 = 0;
            var last_0 = this._order_1;
            if (inductionVariable_0 <= last_0)
              do {
                var j = inductionVariable_0;
                inductionVariable_0 = inductionVariable_0 + 1 | 0;
                var tmp2_array = prod;
                var tmp3_index0 = i + j | 0;
                tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] + b[i] * this.a_1[j];
              } while (!(j === last_0));
          } while (!(i === last));
        this.a_1 = prod;
        var tmp4_this = this;
        tmp4_this._order_1 = tmp4_this._order_1 + B2._order_1 | 0;
      };
      Polynomial2.prototype.overReal = function(c5) {
        var tmp = new Float64Array(this._order_1 + 1 | 0);
        var inductionVariable = 0;
        var last = (this._order_1 + 1 | 0) - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            tmp[i] = this.a_1[i] / c5;
          } while (!(i === last));
        return Polynomial_ofArray(tmp);
      };
      Polynomial2.prototype.overEqualsReal = function(c5) {
        var inductionVariable = 0;
        var last = (this._order_1 + 1 | 0) - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp1_array = this.a_1;
            var tmp2_index0 = i;
            tmp1_array[tmp2_index0] = tmp1_array[tmp2_index0] / c5;
          } while (!(i === last));
      };
      Polynomial2.prototype.overEqualsPolynomial = function(B2) {
        return Rational_ofPolynomials(this, B2);
      };
      Polynomial2.prototype.derivative = function() {
        var tmp = new Float64Array(this._order_1);
        var inductionVariable = 0;
        var last = this._order_1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            tmp[i] = (i + 1 | 0) * this.a_1[i + 1 | 0];
          } while (!(i === last));
        return Polynomial_ofArray(tmp);
      };
      Polynomial2.prototype.evaluateReal = function(x4) {
        var retval = this.a_1[this._order_1];
        var inductionVariable = this._order_1 - 1 | 0;
        if (0 <= inductionVariable)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + -1 | 0;
            retval = x4 * retval + this.a_1[i];
          } while (0 <= inductionVariable);
        return retval;
      };
      Polynomial2.prototype.evaluateComplex = function(c5) {
        var retval = Complex_fromReal(this.a_1[this._order_1]);
        var inductionVariable = this._order_1 - 1 | 0;
        if (0 <= inductionVariable)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + -1 | 0;
            retval = retval.timesComplex(c5).plusReal(this.a_1[i]);
          } while (0 <= inductionVariable);
        return retval;
      };
      Polynomial2.prototype.groupDelay = function(omega) {
        if (this._order_1 === 0)
          return 0;
        else {
          var c5 = new Complex2(0, omega);
          var N = this.derivative().evaluateComplex(c5);
          var D2 = this.evaluateComplex(c5);
          return -N.overComplex(D2).real();
        }
      };
      Polynomial2.prototype.discreteTimeGroupDelay = function(Omega) {
        var c5 = Companion_getInstance_8().exp(new Complex2(0, -Omega));
        var N = Complex_fromReal(this.a_1[this._order_1] * this._order_1);
        var inductionVariable = this._order_1 - 1 | 0;
        if (0 <= inductionVariable)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + -1 | 0;
            N = N.timesComplex(c5).plusReal(this.a_1[i] * i);
          } while (0 <= inductionVariable);
        var D2 = this.evaluateComplex(c5);
        return N.overComplex(D2).real();
      };
      Polynomial2.prototype.reflectionCoefficients = function() {
        var k2 = new Float64Array(this._order_1);
        var b = new Float64Array(this._order_1 + 1 | 0);
        b[0] = 1;
        var inductionVariable = 0;
        var last = this._order_1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            b[i + 1 | 0] = this.a_1[i + 1 | 0] / this.a_1[0];
          } while (!(i === last));
        var inductionVariable_0 = this._order_1;
        if (1 <= inductionVariable_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + -1 | 0;
            k2[i_0 - 1 | 0] = b[i_0];
            var scale = 1 - k2[i_0 - 1 | 0] * k2[i_0 - 1 | 0];
            var c5 = new Float64Array(this._order_1);
            var inductionVariable_1 = 0;
            var last_0 = i_0 - 1 | 0;
            if (inductionVariable_1 <= last_0)
              do {
                var j = inductionVariable_1;
                inductionVariable_1 = inductionVariable_1 + 1 | 0;
                c5[j] = (b[j] - k2[i_0 - 1 | 0] * b[i_0 - j | 0]) / scale;
              } while (!(j === last_0));
            var inductionVariable_2 = 0;
            var last_1 = i_0 - 1 | 0;
            if (inductionVariable_2 <= last_1)
              do {
                var j_0 = inductionVariable_2;
                inductionVariable_2 = inductionVariable_2 + 1 | 0;
                b[j_0] = c5[j_0];
              } while (!(j_0 === last_1));
          } while (1 <= inductionVariable_0);
        return k2;
      };
      Polynomial2.prototype.toString = function() {
        var s3 = "";
        var inductionVariable = 0;
        var last = this._order_1;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            if (i >= 0 ? i < 10 : false)
              s3 = s3 + (i.toString() + "    " + this.a_1[i] + new Char(_Char___init__impl__6a9atx(10)));
            else if (i >= 10 ? i <= 100 : false)
              s3 = s3 + (i.toString() + "   " + this.a_1[i] + new Char(_Char___init__impl__6a9atx(10)));
          } while (!(i === last));
        return s3;
      };
      function Polynomial2() {
        this._order_1 = 0;
      }
      Polynomial2.$metadata$ = classMeta("Polynomial");
      Object.defineProperty(Polynomial2.prototype, "a", {
        configurable: true,
        get: Polynomial2.prototype.get_a_1mhr5k_k$,
        set: Polynomial2.prototype.set_a_suc4n9_k$
      });
      Object.defineProperty(Polynomial2.prototype, "_order", {
        configurable: true,
        get: Polynomial2.prototype.get__order_a42a1k_k$,
        set: Polynomial2.prototype.set__order_ax9ysk_k$
      });
      function _get_N__7mlo03_0($this) {
        return $this.N_1;
      }
      function _get_D__7mlnrh($this) {
        return $this.D_1;
      }
      function Rational_init_$Init$(num, denom, $this) {
        Rational2.call($this);
        $this.N_1 = Polynomial_ofArray(num);
        $this.D_1 = Polynomial_ofArray(denom);
        return $this;
      }
      function Rational_ofArrays(num, denom) {
        return Rational_init_$Init$(num, denom, Object.create(Rational2.prototype));
      }
      function Rational_init_$Init$_0(N, D2, $this) {
        Rational2.call($this);
        $this.N_1 = Polynomial_ofPolynomial(N);
        $this.D_1 = Polynomial_ofPolynomial(D2);
        return $this;
      }
      function Rational_ofPolynomials(N, D2) {
        return Rational_init_$Init$_0(N, D2, Object.create(Rational2.prototype));
      }
      function Rational_init_$Init$_1(R, $this) {
        Rational2.call($this);
        $this.N_1 = Polynomial_ofPolynomial(R.N_1);
        $this.D_1 = Polynomial_ofPolynomial(R.D_1);
        return $this;
      }
      function Rational_ofRational(R) {
        return Rational_init_$Init$_1(R, Object.create(Rational2.prototype));
      }
      function Rational_init_$Init$_2(c5, $this) {
        Rational2.call($this);
        $this.N_1 = Polynomial_ofConstant(c5);
        $this.D_1 = Polynomial_ofConstant(1);
        return $this;
      }
      function Rational_ofConstant(c5) {
        return Rational_init_$Init$_2(c5, Object.create(Rational2.prototype));
      }
      Rational2.prototype.order = function() {
        var tmp$ret$0;
        {
          var tmp0_intArrayOf = new Int32Array([this.N_1.order(), this.D_1.order()]);
          tmp$ret$0 = tmp0_intArrayOf;
        }
        var retval = tmp$ret$0;
        return retval;
      };
      Rational2.prototype.numerator = function() {
        return Polynomial_ofPolynomial(this.N_1);
      };
      Rational2.prototype.denominator = function() {
        return Polynomial_ofPolynomial(this.D_1);
      };
      Rational2.prototype.canonicalForm = function() {
        var scaleN = this.N_1.a_1[this.N_1._order_1];
        var inductionVariable = 0;
        var last = this.N_1.a_1.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp1_array = this.N_1.a_1;
            var tmp2_index0 = i;
            tmp1_array[tmp2_index0] = tmp1_array[tmp2_index0] / scaleN;
          } while (inductionVariable <= last);
        var scaleD = this.D_1.a_1[this.D_1._order_1];
        var inductionVariable_0 = 0;
        var last_0 = this.D_1.a_1.length - 1 | 0;
        if (inductionVariable_0 <= last_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            var tmp4_array = this.D_1.a_1;
            var tmp5_index0 = i_0;
            tmp4_array[tmp5_index0] = tmp4_array[tmp5_index0] / scaleD;
          } while (inductionVariable_0 <= last_0);
        return scaleN / scaleD;
      };
      Rational2.prototype.timesEqualsReal = function(A5) {
        this.N_1.timesEqualsReal(A5);
      };
      Rational2.prototype.timesEqualsPolynomial = function(P) {
        this.N_1.timesEqualsPolynomial(P);
      };
      Rational2.prototype.timesEqualsRational = function(R) {
        this.N_1.timesEqualsPolynomial(R.N_1);
        this.D_1.timesEqualsPolynomial(R.D_1);
      };
      Rational2.prototype.evaluateReal = function(x4) {
        var retval = 0;
        var num = this.N_1.evaluateReal(x4);
        var denom = this.D_1.evaluateReal(x4);
        if (!(denom === 0))
          retval = num / denom;
        return retval;
      };
      Rational2.prototype.evaluateComplex = function(c5) {
        var retval = new Complex2(0, 0);
        var num = this.N_1.evaluateComplex(c5);
        var denom = this.D_1.evaluateComplex(c5);
        if (!(denom.abs() === 0))
          retval = num.overComplex(denom);
        return retval;
      };
      Rational2.prototype.mapRational = function(S) {
        var P = Polynomial_ofConstant(this.N_1.a_1[this.N_1._order_1]);
        var T = Polynomial_ofConstant(1);
        var inductionVariable = this.N_1._order_1 - 1 | 0;
        if (0 <= inductionVariable)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + -1 | 0;
            T = T.timesPolynomial(S.D_1);
            P = P.timesPolynomial(S.N_1).plusPolynomial(T.timesReal(this.N_1.a_1[i]));
          } while (0 <= inductionVariable);
        var Q = Polynomial_ofConstant(this.D_1.a_1[this.D_1._order_1]);
        T = Polynomial_ofConstant(1);
        var inductionVariable_0 = this.D_1._order_1 - 1 | 0;
        if (0 <= inductionVariable_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + -1 | 0;
            T = T.timesPolynomial(S.D_1);
            Q = Q.timesPolynomial(S.N_1).plusPolynomial(T.timesReal(this.D_1.a_1[i_0]));
          } while (0 <= inductionVariable_0);
        if (this.D_1._order_1 > this.N_1._order_1) {
          var inductionVariable_1 = 0;
          var last = (this.D_1._order_1 - this.N_1._order_1 | 0) - 1 | 0;
          if (inductionVariable_1 <= last)
            do {
              var i_1 = inductionVariable_1;
              inductionVariable_1 = inductionVariable_1 + 1 | 0;
              P = P.timesPolynomial(S.D_1);
            } while (!(i_1 === last));
        } else if (this.N_1._order_1 > this.D_1._order_1) {
          var inductionVariable_2 = 0;
          var last_0 = (this.N_1._order_1 - this.D_1._order_1 | 0) - 1 | 0;
          if (inductionVariable_2 <= last_0)
            do {
              var i_2 = inductionVariable_2;
              inductionVariable_2 = inductionVariable_2 + 1 | 0;
              Q = Q.timesPolynomial(S.D_1);
            } while (!(i_2 === last_0));
        }
        P.trim();
        Q.trim();
        return Rational_ofPolynomials(P, Q);
      };
      Rational2.prototype.residueForReal = function(pole) {
        return this.N_1.evaluateReal(pole) / this.D_1.derivative().evaluateReal(pole);
      };
      Rational2.prototype.residueForComplex = function(pole) {
        return this.N_1.evaluateComplex(pole).overComplex(this.D_1.derivative().evaluateComplex(pole));
      };
      Rational2.prototype.groupDelay = function(omega) {
        return this.N_1.groupDelay(omega) - this.D_1.groupDelay(omega);
      };
      Rational2.prototype.discreteTimeGroupDelay = function(Omega) {
        return this.N_1.discreteTimeGroupDelay(Omega) - this.D_1.discreteTimeGroupDelay(Omega);
      };
      Rational2.prototype.toString = function() {
        return "Numerator: " + this.N_1 + "\n" + ("Denominator: " + this.D_1 + "\n");
      };
      function Rational2() {
      }
      Rational2.$metadata$ = classMeta("Rational");
      function ComplexAnalyticSignal2(realSignal) {
        var tmp = this;
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = realSignal;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        tmp._realPart_1 = tmp$ret$1;
        var transformer5 = new CenteredHilbertTransform2(50, 0.03, 0.97);
        var tmp_0 = transformer5.filter(this._realPart_1);
        Companion_getInstance().zeroShiftArray(tmp_0, -50);
        this._imagPart_1 = new Float32Array(this._realPart_1.length);
        var inductionVariable = 0;
        var last = this._realPart_1.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            this._imagPart_1[i] = tmp_0[i];
          } while (inductionVariable <= last);
      }
      ComplexAnalyticSignal2.prototype.set__realPart_f7bi4z_k$ = function(_set____db54di) {
        this._realPart_1 = _set____db54di;
      };
      ComplexAnalyticSignal2.prototype.get__realPart_47rtll_k$ = function() {
        return this._realPart_1;
      };
      ComplexAnalyticSignal2.prototype.set__imagPart_dn087_k$ = function(_set____db54di) {
        this._imagPart_1 = _set____db54di;
      };
      ComplexAnalyticSignal2.prototype.get__imagPart_47qodp_k$ = function() {
        return this._imagPart_1;
      };
      ComplexAnalyticSignal2.prototype.get_envelope_5cdspl_k$ = function() {
        var retval = new Float32Array(this._realPart_1.length);
        var inductionVariable = 0;
        var last = this._realPart_1.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp$ret$0;
            {
              var tmp0_sqrt = this._realPart_1[i] * this._realPart_1[i] + this._imagPart_1[i] * this._imagPart_1[i];
              tmp$ret$0 = Math.sqrt(tmp0_sqrt);
            }
            retval[i] = tmp$ret$0;
          } while (inductionVariable <= last);
        return retval;
      };
      ComplexAnalyticSignal2.prototype.getRealPart = function() {
        var tmp$ret$1;
        {
          var tmp0_copyOf = this._realPart_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_copyOf;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        return tmp$ret$1;
      };
      ComplexAnalyticSignal2.prototype.getImagPart = function() {
        var tmp$ret$1;
        {
          var tmp0_copyOf = this._imagPart_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_copyOf;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        return tmp$ret$1;
      };
      ComplexAnalyticSignal2.$metadata$ = classMeta("ComplexAnalyticSignal");
      Object.defineProperty(ComplexAnalyticSignal2.prototype, "envelope", {
        configurable: true,
        get: ComplexAnalyticSignal2.prototype.get_envelope_5cdspl_k$
      });
      function _get_rate__dczgbv($this) {
        return $this.rate_1;
      }
      function _get_overlapAdd__wylgj5($this) {
        return $this.overlapAdd_1;
      }
      function _get_buffer__tgqkad($this) {
        return $this.buffer_1;
      }
      function Interpolator2(rate, designFactor, blockSize) {
        this.rate_1 = rate;
        var half = imul(this.rate_1, designFactor);
        var N = imul(2, half) + 1 | 0;
        var kernel = new HammingWindow2(N).array;
        var inductionVariable = 1;
        if (inductionVariable <= half)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp1_array = kernel;
            var tmp2_index0 = half + i | 0;
            var tmp = tmp1_array[tmp2_index0];
            var tmp$ret$0;
            {
              var tmp0_sin = get_PI() * i / this.rate_1;
              tmp$ret$0 = Math.sin(tmp0_sin);
            }
            tmp1_array[tmp2_index0] = tmp * (tmp$ret$0 / (get_PI() * i / this.rate_1));
            kernel[half - i | 0] = kernel[half + i | 0];
          } while (!(i === half));
        this.overlapAdd_1 = OverlapAdd_ofArray(kernel, imul(blockSize, this.rate_1));
        this.buffer_1 = new Float32Array(imul(blockSize, this.rate_1));
      }
      Interpolator2.prototype.interpolate = function(block, interpolatedBlock) {
        Companion_getInstance().stretchArray(block, this.rate_1, this.buffer_1);
        this.overlapAdd_1.filter(this.buffer_1, 0, interpolatedBlock, 0);
      };
      Interpolator2.$metadata$ = classMeta("Interpolator");
      function _set_shiftRegister__p2sj34($this, _set____db54di) {
        $this.shiftRegister_1 = _set____db54di;
      }
      function _get_shiftRegister__9v10ks($this) {
        return $this.shiftRegister_1;
      }
      function _set_fft__4w5psh($this, _set____db54di) {
        $this.fft_1 = _set____db54di;
      }
      function _get_fft__e68axp($this) {
        return $this.fft_1;
      }
      function _set_nfft__9r379t($this, _set____db54di) {
        $this.nfft_1 = _set____db54di;
      }
      function _get_nfft__dav6v9($this) {
        return $this.nfft_1;
      }
      function _set_kernel__mr01oa($this, _set____db54di) {
        $this.kernel_1 = _set____db54di;
      }
      function _get_kernel__o7qmb2($this) {
        return $this.kernel_1;
      }
      function _set_kernelLength__v96yb8($this, _set____db54di) {
        $this.kernelLength_1 = _set____db54di;
      }
      function _get_kernelLength__o86d3s($this) {
        return $this.kernelLength_1;
      }
      function _set_blockSize__tu9q5l($this, _set____db54di) {
        $this.blockSize_1 = _set____db54di;
      }
      function _get_blockSize__jf9r1($this) {
        return $this.blockSize_1;
      }
      function _set_segment__77iylu($this, _set____db54di) {
        $this.segment_1 = _set____db54di;
      }
      function _get_segment__iepbr6($this) {
        return $this.segment_1;
      }
      function _set_transform__8gln3b($this, _set____db54di) {
        $this.transform_1 = _set____db54di;
      }
      function _get_transform__ku8tb9($this) {
        return $this.transform_1;
      }
      function OverlapAdd_init_$Init$(H, blockSize, $this) {
        OverlapAdd2.call($this);
        $this.kernelLength_1 = H.length;
        $this.blockSize_1 = blockSize;
        var clength = (H.length + blockSize | 0) - 1 | 0;
        var log2nfft = 0;
        $this.nfft_1 = 1;
        while ($this.nfft_1 < clength) {
          var tmp0 = log2nfft;
          log2nfft = tmp0 + 1 | 0;
          var tmp1_this = $this;
          tmp1_this.nfft_1 = imul(tmp1_this.nfft_1, 2);
        }
        $this.fft_1 = new RDFT2(log2nfft);
        $this.shiftRegister_1 = new Float32Array($this.nfft_1);
        $this.kernel_1 = new Float32Array($this.nfft_1);
        $this.segment_1 = new Float32Array($this.nfft_1);
        $this.transform_1 = new Float32Array($this.nfft_1);
        var inductionVariable = 0;
        var last = H.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            ensureNotNull($this.segment_1)[i] = H[i];
          } while (inductionVariable <= last);
        ensureNotNull($this.fft_1).evaluate(ensureNotNull($this.segment_1), ensureNotNull($this.kernel_1));
        return $this;
      }
      function OverlapAdd_ofArray(H, blockSize) {
        return OverlapAdd_init_$Init$(H, blockSize, Object.create(OverlapAdd2.prototype));
      }
      function OverlapAdd_init_$Init$_0(H, master, $this) {
        OverlapAdd2.call($this);
        if (!(H.length === master.kernelLength_1))
          throw IllegalArgumentException_init_$Create$("Slave kernel length inconsistent with master OverlapAdd kernel length");
        $this.kernelLength_1 = H.length;
        $this.blockSize_1 = master.blockSize_1;
        $this.fft_1 = master.fft_1;
        $this.nfft_1 = master.nfft_1;
        $this.shiftRegister_1 = new Float32Array($this.nfft_1);
        $this.kernel_1 = new Float32Array($this.nfft_1);
        $this.segment_1 = new Float32Array($this.nfft_1);
        $this.transform_1 = new Float32Array($this.nfft_1);
        var inductionVariable = 0;
        var last = H.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            ensureNotNull($this.segment_1)[i] = H[i];
          } while (inductionVariable <= last);
        ensureNotNull($this.fft_1).evaluate(ensureNotNull($this.segment_1), ensureNotNull($this.kernel_1));
        return $this;
      }
      function OverlapAdd_ofArrayOverlapAdd(H, master) {
        return OverlapAdd_init_$Init$_0(H, master, Object.create(OverlapAdd2.prototype));
      }
      OverlapAdd2.prototype.filter = function(src, sptr, dst, dptr) {
        if (!(src.length === this.blockSize_1))
          throw IllegalArgumentException_init_$Create$("Data array length not equal to blockSize");
        var inductionVariable = 0;
        var last = ensureNotNull(this.segment_1).length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            ensureNotNull(this.segment_1)[i] = 0;
          } while (inductionVariable <= last);
        var inductionVariable_0 = 0;
        var last_0 = this.blockSize_1;
        if (inductionVariable_0 <= last_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            ensureNotNull(this.segment_1)[i_0] = src[i_0 + sptr | 0];
          } while (!(i_0 === last_0));
        ensureNotNull(this.fft_1).evaluate(ensureNotNull(this.segment_1), ensureNotNull(this.transform_1));
        Companion_getInstance_4().dftProduct(ensureNotNull(this.kernel_1), ensureNotNull(this.transform_1), 1);
        ensureNotNull(this.fft_1).evaluateInverse(ensureNotNull(this.transform_1), ensureNotNull(this.segment_1));
        var inductionVariable_1 = 0;
        var last_1 = this.nfft_1 - 1 | 0;
        if (inductionVariable_1 <= last_1)
          do {
            var i_1 = inductionVariable_1;
            inductionVariable_1 = inductionVariable_1 + 1 | 0;
            var tmp3_array = this.shiftRegister_1;
            var tmp4_index0 = i_1;
            tmp3_array[tmp4_index0] = tmp3_array[tmp4_index0] + ensureNotNull(this.segment_1)[i_1];
          } while (!(i_1 === last_1));
        var inductionVariable_2 = 0;
        var last_2 = this.blockSize_1;
        if (inductionVariable_2 <= last_2)
          do {
            var i_2 = inductionVariable_2;
            inductionVariable_2 = inductionVariable_2 + 1 | 0;
            dst[i_2 + dptr | 0] = this.shiftRegister_1[i_2];
          } while (!(i_2 === last_2));
        Companion_getInstance().zeroShiftArray(this.shiftRegister_1, -this.blockSize_1 | 0);
      };
      OverlapAdd2.prototype.flush = function(dst, dptr) {
        var inductionVariable = 0;
        var last = this.blockSize_1;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            dst[i + dptr | 0] = this.shiftRegister_1[i];
          } while (!(i === last));
        Companion_getInstance().zeroShiftArray(this.shiftRegister_1, -this.blockSize_1 | 0);
      };
      function OverlapAdd2() {
        this.fft_1 = null;
        this.nfft_1 = 0;
        this.kernel_1 = null;
        this.kernelLength_1 = 0;
        this.blockSize_1 = 0;
        this.segment_1 = null;
        this.transform_1 = null;
      }
      OverlapAdd2.$metadata$ = classMeta("OverlapAdd");
      function _get_delta__ikpko7($this) {
        return $this.delta_1;
      }
      function CenteredDifferentiator2(N, delta, OmegaP) {
        FIRTypeIII2.call(this, 1, N);
        this.delta_1 = delta;
        if (!(0 < OmegaP ? OmegaP < 1 : false))
          throw IllegalArgumentException_init_$Create$("Check 0.0 < OmegaP < 1.0");
        this.bands[0][0] = 1 / imul(2, N);
        this.bands[0][1] = OmegaP;
        this.generateCoefficients();
      }
      CenteredDifferentiator2.prototype.desiredResponse_yw2r0a_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = -get_PI() * Omega / this.delta_1;
        return retval;
      };
      CenteredDifferentiator2.prototype.desiredResponse = function(Omega) {
        return this.desiredResponse_yw2r0a_k$(Omega);
      };
      CenteredDifferentiator2.prototype.weight_3hkr93_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = 1 / Omega;
        return retval;
      };
      CenteredDifferentiator2.prototype.weight = function(Omega) {
        return this.weight_3hkr93_k$(Omega);
      };
      CenteredDifferentiator2.$metadata$ = classMeta("CenteredDifferentiator", void 0, void 0, void 0, void 0, FIRTypeIII2.prototype);
      function CenteredHilbertTransform2(N, Omega1, Omega2) {
        FIRTypeIII2.call(this, 1, N);
        if (!((0 < Omega1 ? Omega1 < Omega2 : false) ? Omega2 < 1 : false))
          throw IllegalArgumentException_init_$Create$("Check 0.0 < Omega1 < Omega2 < 1.0");
        this.bands[0][0] = Omega1;
        this.bands[0][1] = Omega2;
        this.generateCoefficients();
      }
      CenteredHilbertTransform2.prototype.desiredResponse_yw2r0a_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = 1;
        return retval;
      };
      CenteredHilbertTransform2.prototype.desiredResponse = function(Omega) {
        return this.desiredResponse_yw2r0a_k$(Omega);
      };
      CenteredHilbertTransform2.prototype.weight_3hkr93_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = 1;
        return retval;
      };
      CenteredHilbertTransform2.prototype.weight = function(Omega) {
        return this.weight_3hkr93_k$(Omega);
      };
      CenteredHilbertTransform2.$metadata$ = classMeta("CenteredHilbertTransform", void 0, void 0, void 0, void 0, FIRTypeIII2.prototype);
      function Companion_6() {
        Companion_instance_6 = this;
        this.GRIDDENSITY_1 = 20;
      }
      Companion_6.prototype.get_GRIDDENSITY_9wle8p_k$ = function() {
        return this.GRIDDENSITY_1;
      };
      Companion_6.$metadata$ = objectMeta("Companion");
      var Companion_instance_6;
      function Companion_getInstance_6() {
        if (Companion_instance_6 == null)
          new Companion_6();
        return Companion_instance_6;
      }
      function DesignGrid() {
        Companion_getInstance_6();
        this.gridSize_1 = 0;
        this.containsZero_1 = false;
        this.containsPi_1 = false;
      }
      DesignGrid.prototype.set_grid_bp7z6u_k$ = function(_set____db54di) {
        this.grid_1 = _set____db54di;
      };
      DesignGrid.prototype.get_grid_womu8f_k$ = function() {
        var tmp = this.grid_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("grid");
        }
      };
      DesignGrid.prototype.set_gridSize_fddnyk_k$ = function(_set____db54di) {
        this.gridSize_1 = _set____db54di;
      };
      DesignGrid.prototype.get_gridSize_qjl6ts_k$ = function() {
        return this.gridSize_1;
      };
      DesignGrid.prototype.set_X_mod0ry_k$ = function(_set____db54di) {
        this.X_1 = _set____db54di;
      };
      DesignGrid.prototype.get_X_1mhr5b_k$ = function() {
        var tmp = this.X_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("X");
        }
      };
      DesignGrid.prototype.set_H_3tm5oe_k$ = function(_set____db54di) {
        this.H_1 = _set____db54di;
      };
      DesignGrid.prototype.get_H_1mhr4v_k$ = function() {
        var tmp = this.H_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("H");
        }
      };
      DesignGrid.prototype.set_W_9ksoj5_k$ = function(_set____db54di) {
        this.W_1 = _set____db54di;
      };
      DesignGrid.prototype.get_W_1mhr5a_k$ = function() {
        var tmp = this.W_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("W");
        }
      };
      DesignGrid.prototype.set_bandEdgeIndices_4o2nof_k$ = function(_set____db54di) {
        this.bandEdgeIndices_1 = _set____db54di;
      };
      DesignGrid.prototype.get_bandEdgeIndices_4mq7kc_k$ = function() {
        var tmp = this.bandEdgeIndices_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("bandEdgeIndices");
        }
      };
      DesignGrid.prototype.set_extremaIndices_kapzx9_k$ = function(_set____db54di) {
        this.extremaIndices_1 = _set____db54di;
      };
      DesignGrid.prototype.get_extremaIndices_8bux3s_k$ = function() {
        var tmp = this.extremaIndices_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("extremaIndices");
        }
      };
      DesignGrid.prototype.set_containsZero_c9ryd7_k$ = function(_set____db54di) {
        this.containsZero_1 = _set____db54di;
      };
      DesignGrid.prototype.get_containsZero_uv6ez4_k$ = function() {
        return this.containsZero_1;
      };
      DesignGrid.prototype.set_containsPi_d8e76c_k$ = function(_set____db54di) {
        this.containsPi_1 = _set____db54di;
      };
      DesignGrid.prototype.get_containsPi_hrrp4v_k$ = function() {
        return this.containsPi_1;
      };
      DesignGrid.prototype.toString = function() {
        var out = "";
        var extremum = 0;
        var bandEdgeCount = 0;
        var inductionVariable = 0;
        var last = this.gridSize_1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var Omega = this.get_grid_womu8f_k$()[i];
            var line = "" + toString(toLong(i)) + "  " + Omega + "  " + this.get_X_1mhr5b_k$()[i] + "  " + this.get_H_1mhr4v_k$()[i] + "  " + this.get_W_1mhr5a_k$()[i];
            if (this.get_bandEdgeIndices_4mq7kc_k$()[bandEdgeCount] === i) {
              line = line + "  band edge";
              var tmp1 = bandEdgeCount;
              bandEdgeCount = tmp1 + 1 | 0;
            }
            if (Omega === this.get_grid_womu8f_k$()[this.get_extremaIndices_8bux3s_k$()[extremum]]) {
              line = line + "  extremum";
              var tmp2 = extremum;
              extremum = tmp2 + 1 | 0;
            }
            out = out + (line + new Char(_Char___init__impl__6a9atx(10)));
          } while (!(i === last));
        return out;
      };
      DesignGrid.$metadata$ = classMeta("DesignGrid");
      function _get_Ws1__e5yy64($this) {
        return $this.Ws1__1;
      }
      function _get_Wp__ndbq2a($this) {
        return $this.Wp_1;
      }
      function _get_Ws2__e5yy6z($this) {
        return $this.Ws2__1;
      }
      function EquirippleBandpass2(N, OmegaS1, Ws1, OmegaP1, OmegaP2, Wp, OmegaS2, Ws2) {
        FIRTypeI2.call(this, 3, N);
        this.Ws1__1 = Ws1;
        this.Wp_1 = Wp;
        this.Ws2__1 = Ws2;
        if (!((((0 < OmegaS1 ? OmegaS1 < OmegaP1 : false) ? OmegaP1 < OmegaP2 : false) ? OmegaP2 < OmegaS2 : false) ? OmegaS2 < 1 : false))
          throw IllegalArgumentException_init_$Create$("Band edge specification error, ensure that 0.0 < OmegaS1 < OmegaP1 < OmegaP2 < OmegaS2 < 1.0");
        this.bands[0][0] = 0;
        this.bands[0][1] = OmegaS1;
        this.bands[1][0] = OmegaP1;
        this.bands[1][1] = OmegaP2;
        this.bands[2][0] = OmegaS2;
        this.bands[2][1] = 1;
        this.generateCoefficients();
      }
      EquirippleBandpass2.prototype.desiredResponse_yw2r0a_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[1][0], Omega) ? this.LTE(Omega, this.bands[1][1]) : false)
          retval = 1;
        return retval;
      };
      EquirippleBandpass2.prototype.desiredResponse = function(Omega) {
        return this.desiredResponse_yw2r0a_k$(Omega);
      };
      EquirippleBandpass2.prototype.weight_3hkr93_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = this.Ws1__1;
        else if (this.LTE(this.bands[1][0], Omega) ? this.LTE(Omega, this.bands[1][1]) : false)
          retval = this.Wp_1;
        else if (this.LTE(this.bands[2][0], Omega) ? this.LTE(Omega, this.bands[2][1]) : false)
          retval = this.Ws2__1;
        return retval;
      };
      EquirippleBandpass2.prototype.weight = function(Omega) {
        return this.weight_3hkr93_k$(Omega);
      };
      EquirippleBandpass2.$metadata$ = classMeta("EquirippleBandpass", void 0, void 0, void 0, void 0, FIRTypeI2.prototype);
      function _get_MAXITER__g0wxxn($this) {
        return $this.MAXITER_1;
      }
      function EquirippleDesigner() {
        EquirippleDesigner_instance = this;
        this.MAXITER_1 = 25;
      }
      EquirippleDesigner.prototype.remez = function(G) {
        var nextrema = G.get_extremaIndices_8bux3s_k$().length;
        var newExtrema = ArrayList_init_$Create$();
        var E2 = new Float64Array(G.gridSize_1);
        var GA = new Float64Array(G.gridSize_1);
        var niter = 0;
        $l$loop_1:
          do {
            var delta = this.computeDelta(G);
            var LP = this.constructInterpolatingPolynomial(G, delta);
            var inductionVariable = 0;
            var last = G.gridSize_1 - 1 | 0;
            if (inductionVariable <= last)
              do {
                var i = inductionVariable;
                inductionVariable = inductionVariable + 1 | 0;
                GA[i] = LP.evaluateAt(G.get_X_1mhr5b_k$()[i]);
                E2[i] = GA[i] - G.get_H_1mhr4v_k$()[i];
              } while (!(i === last));
            newExtrema.clear_j9y8zo_k$();
            var change = 0;
            var inductionVariable_0 = 0;
            var last_0 = nextrema - 1 | 0;
            if (inductionVariable_0 <= last_0)
              do {
                var currentExtremum = inductionVariable_0;
                inductionVariable_0 = inductionVariable_0 + 1 | 0;
                var currentGridPt = G.get_extremaIndices_8bux3s_k$()[currentExtremum];
                var s3 = this.sgn(E2[currentGridPt]);
                var ptr = currentGridPt + 1 | 0;
                if (ptr < G.gridSize_1) {
                  $l$loop:
                    while (this.sgn(E2[ptr] - E2[ptr - 1 | 0]) === s3) {
                      var tmp2 = ptr;
                      ptr = tmp2 + 1 | 0;
                      if (ptr === G.gridSize_1)
                        break $l$loop;
                    }
                }
                var tmp3 = ptr;
                ptr = tmp3 - 1 | 0;
                if (ptr === currentGridPt) {
                  ptr = currentGridPt - 1 | 0;
                  if (ptr >= 0) {
                    $l$loop_0:
                      while (this.sgn(E2[ptr] - E2[ptr + 1 | 0]) === s3) {
                        var tmp4 = ptr;
                        ptr = tmp4 - 1 | 0;
                        if (ptr < 0)
                          break $l$loop_0;
                      }
                  }
                  var tmp5 = ptr;
                  ptr = tmp5 + 1 | 0;
                }
                newExtrema.add_1j60pz_k$(ptr);
                if (!(ptr === currentGridPt)) {
                  var tmp6 = change;
                  change = tmp6 + 1 | 0;
                }
              } while (!(currentExtremum === last_0));
            if (G.containsZero_1 ? G.containsPi_1 : false) {
              var gridPi = G.gridSize_1 - 1 | 0;
              if (newExtrema.contains_2ehdt1_k$(0)) {
                if (!newExtrema.contains_2ehdt1_k$(gridPi)) {
                  if (!(this.sgn(E2[gridPi]) === this.sgn(E2[G.get_extremaIndices_8bux3s_k$()[nextrema - 1 | 0]]))) {
                    var tmp$ret$0;
                    {
                      var tmp0_abs = E2[gridPi];
                      tmp$ret$0 = Math.abs(tmp0_abs);
                    }
                    var tmp = tmp$ret$0;
                    var tmp$ret$1;
                    {
                      var tmp1_abs = E2[0];
                      tmp$ret$1 = Math.abs(tmp1_abs);
                    }
                    if (tmp > tmp$ret$1) {
                      newExtrema.removeAt_qvpkxi_k$(0);
                      newExtrema.add_1j60pz_k$(gridPi);
                      var tmp7 = change;
                      change = tmp7 + 1 | 0;
                    }
                  }
                }
              } else {
                if (newExtrema.contains_2ehdt1_k$(gridPi)) {
                  if (!(this.sgn(E2[0]) === this.sgn(E2[G.get_extremaIndices_8bux3s_k$()[0]]))) {
                    var tmp$ret$2;
                    {
                      var tmp2_abs = E2[0];
                      tmp$ret$2 = Math.abs(tmp2_abs);
                    }
                    var tmp_0 = tmp$ret$2;
                    var tmp$ret$3;
                    {
                      var tmp3_abs = E2[gridPi];
                      tmp$ret$3 = Math.abs(tmp3_abs);
                    }
                    if (tmp_0 > tmp$ret$3) {
                      newExtrema.removeAt_qvpkxi_k$(newExtrema.get_size_woubt6_k$() - 1 | 0);
                      newExtrema.add_ydlf05_k$(0, 0);
                      var tmp8 = change;
                      change = tmp8 + 1 | 0;
                    }
                  }
                }
              }
            }
            if (change === 0)
              break $l$loop_1;
            var inductionVariable_1 = 0;
            var last_1 = nextrema - 1 | 0;
            if (inductionVariable_1 <= last_1)
              do {
                var i_0 = inductionVariable_1;
                inductionVariable_1 = inductionVariable_1 + 1 | 0;
                G.get_extremaIndices_8bux3s_k$()[i_0] = newExtrema.get_fkrdnv_k$(i_0);
              } while (!(i_0 === last_1));
            var tmp10 = niter;
            niter = tmp10 + 1 | 0;
          } while (niter < this.MAXITER_1);
      };
      EquirippleDesigner.prototype.computeDelta = function(G) {
        var nextrema = G.get_extremaIndices_8bux3s_k$().length;
        var extrema = new Float64Array(nextrema);
        var inductionVariable = 0;
        var last = nextrema - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            extrema[i] = G.get_X_1mhr5b_k$()[G.get_extremaIndices_8bux3s_k$()[i]];
          } while (!(i === last));
        var gamma2 = Companion_getInstance_5().BarycentricWeights(extrema);
        var num = 0;
        var denom = 0;
        var s3 = 1;
        var inductionVariable_0 = 0;
        var last_0 = nextrema - 1 | 0;
        if (inductionVariable_0 <= last_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            var j = G.get_extremaIndices_8bux3s_k$()[i_0];
            num = num + gamma2[i_0] * G.get_H_1mhr4v_k$()[j];
            denom = denom + s3 * gamma2[i_0] / G.get_W_1mhr5a_k$()[j];
            s3 = -s3;
          } while (!(i_0 === last_0));
        return num / denom;
      };
      EquirippleDesigner.prototype.constructInterpolatingPolynomial = function(G, delta) {
        var extremaSubset = new Float64Array(G.get_extremaIndices_8bux3s_k$().length - 1 | 0);
        var n2 = extremaSubset.length;
        var x4 = new Float64Array(n2);
        var f = new Float64Array(n2);
        var s3 = 1;
        var inductionVariable = 0;
        var last = n2 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var j = G.get_extremaIndices_8bux3s_k$()[i];
            x4[i] = G.get_X_1mhr5b_k$()[j];
            f[i] = G.get_H_1mhr4v_k$()[j] - s3 * delta / G.get_W_1mhr5a_k$()[j];
            s3 = -s3;
          } while (!(i === last));
        return new LagrangePolynomial2(x4, f);
      };
      EquirippleDesigner.prototype.calculateCoefficients = function(G, Nc) {
        var LP = this.constructInterpolatingPolynomial(G, this.computeDelta(G));
        var log2nfft = 6;
        var nfft = 64;
        while (nfft < Nc) {
          nfft = imul(nfft, 2);
          var tmp0 = log2nfft;
          log2nfft = tmp0 + 1 | 0;
        }
        var X3 = new Float32Array(nfft);
        var x4 = new Float32Array(nfft);
        var inductionVariable = 0;
        var last = nfft / 2 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp$ret$0;
            {
              var tmp0_cos = 2 * get_PI() * i / nfft;
              tmp$ret$0 = Math.cos(tmp0_cos);
            }
            X3[i] = LP.evaluateAt(tmp$ret$0);
          } while (!(i === last));
        var dft = new RDFT2(log2nfft);
        dft.evaluateInverse(X3, x4);
        return x4;
      };
      EquirippleDesigner.prototype.sgn = function(x4) {
        if (x4 > 0)
          return 1;
        else if (x4 < 0)
          return -1;
        else
          return 0;
      };
      EquirippleDesigner.$metadata$ = objectMeta("EquirippleDesigner");
      var EquirippleDesigner_instance;
      function EquirippleDesigner_getInstance() {
        if (EquirippleDesigner_instance == null)
          new EquirippleDesigner();
        return EquirippleDesigner_instance;
      }
      function Companion_7() {
        Companion_instance_7 = this;
        this.MACHINETOLERANCE_1 = 1e-6;
      }
      Companion_7.prototype.get_MACHINETOLERANCE_yw6kj3_k$ = function() {
        return this.MACHINETOLERANCE_1;
      };
      Companion_7.$metadata$ = objectMeta("Companion");
      Object.defineProperty(Companion_7.prototype, "MACHINETOLERANCE", {
        configurable: true,
        get: Companion_7.prototype.get_MACHINETOLERANCE_yw6kj3_k$
      });
      var Companion_instance_7;
      function Companion_getInstance_7() {
        if (Companion_instance_7 == null)
          new Companion_7();
        return Companion_instance_7;
      }
      function EquirippleFIRFilter2(numBands, N, Nc) {
        Companion_getInstance_7();
        this.numBands_1 = numBands;
        this.N_1 = N;
        this.Nc_1 = Nc;
        this._coefficients_1 = null;
        this.implementation_1 = null;
        var tmp = this;
        var tmp_0 = 0;
        var tmp_1 = this.numBands_1;
        var tmp$ret$0;
        {
          tmp$ret$0 = fillArrayVal(Array(tmp_1), null);
        }
        var tmp_2 = tmp$ret$0;
        while (tmp_0 < tmp_1) {
          var tmp_3 = tmp_0;
          var tmp$ret$1;
          {
            tmp$ret$1 = new Float64Array(2);
          }
          tmp_2[tmp_3] = tmp$ret$1;
          tmp_0 = tmp_0 + 1 | 0;
        }
        tmp.bands_1 = tmp_2;
      }
      EquirippleFIRFilter2.prototype.set_numBands_se5e1n_k$ = function(_set____db54di) {
        this.numBands_1 = _set____db54di;
      };
      EquirippleFIRFilter2.prototype.get_numBands_7jdbr5_k$ = function() {
        return this.numBands_1;
      };
      EquirippleFIRFilter2.prototype.set_N_hmx2g1_k$ = function(_set____db54di) {
        this.N_1 = _set____db54di;
      };
      EquirippleFIRFilter2.prototype.get_N_1mhr51_k$ = function() {
        return this.N_1;
      };
      EquirippleFIRFilter2.prototype.set_Nc_147wda_k$ = function(_set____db54di) {
        this.Nc_1 = _set____db54di;
      };
      EquirippleFIRFilter2.prototype.get_Nc_kntoki_k$ = function() {
        return this.Nc_1;
      };
      EquirippleFIRFilter2.prototype.set_bands_v2glr4_k$ = function(_set____db54di) {
        this.bands_1 = _set____db54di;
      };
      EquirippleFIRFilter2.prototype.get_bands_ip1jn9_k$ = function() {
        return this.bands_1;
      };
      EquirippleFIRFilter2.prototype.set__coefficients_wl2gmb_k$ = function(_set____db54di) {
        this._coefficients_1 = _set____db54di;
      };
      EquirippleFIRFilter2.prototype.get__coefficients_hv8wpg_k$ = function() {
        return this._coefficients_1;
      };
      EquirippleFIRFilter2.prototype.getCoefficients = function() {
        var tmp0_safe_receiver = this._coefficients_1;
        var tmp;
        if (tmp0_safe_receiver == null) {
          tmp = null;
        } else {
          var tmp$ret$1;
          {
            var tmp$ret$0;
            {
              tmp$ret$0 = tmp0_safe_receiver;
            }
            tmp$ret$1 = tmp$ret$0.slice();
          }
          tmp = tmp$ret$1;
        }
        var tmp1_elvis_lhs = tmp;
        var tmp_0;
        if (tmp1_elvis_lhs == null) {
          throw RuntimeException_init_$Create$("Should not happen, access to coefficients before initialized.");
        } else {
          tmp_0 = tmp1_elvis_lhs;
        }
        return tmp_0;
      };
      EquirippleFIRFilter2.prototype.set_implementation_v6iu10_k$ = function(_set____db54di) {
        this.implementation_1 = _set____db54di;
      };
      EquirippleFIRFilter2.prototype.get_implementation_9txf7p_k$ = function() {
        return this.implementation_1;
      };
      EquirippleFIRFilter2.prototype.createGrid = function() {
        var G = new DesignGrid();
        var nextrema = new Int32Array(this.numBands_1);
        var totalBandwidth = 0;
        var inductionVariable = 0;
        var last = this.numBands_1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var ib = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            totalBandwidth = totalBandwidth + (this.bands_1[ib][1] - this.bands_1[ib][0]);
          } while (!(ib === last));
        var m2 = (this.N_1 + 1 | 0) - imul(2, this.numBands_1) | 0;
        var np = 0;
        var largestBand = 0;
        var nmax = 0;
        var inductionVariable_0 = 0;
        var last_0 = this.numBands_1 - 1 | 0;
        if (inductionVariable_0 <= last_0)
          do {
            var ib_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            var B2 = this.bands_1[ib_0][1] - this.bands_1[ib_0][0];
            nextrema[ib_0] = numberToInt(round(m2 * B2 / totalBandwidth)) + 2 | 0;
            if (nextrema[ib_0] > nmax) {
              nmax = nextrema[ib_0];
              largestBand = ib_0;
            }
            np = np + nextrema[ib_0] | 0;
          } while (!(ib_0 === last_0));
        while (np < (this.N_1 + 1 | 0)) {
          var tmp2_array = nextrema;
          var tmp3_index0 = largestBand;
          var tmp4 = tmp2_array[tmp3_index0];
          tmp2_array[tmp3_index0] = tmp4 + 1 | 0;
          var tmp5 = np;
          np = tmp5 + 1 | 0;
        }
        while (np > (this.N_1 + 1 | 0)) {
          var tmp6_array = nextrema;
          var tmp7_index0 = largestBand;
          var tmp8 = tmp6_array[tmp7_index0];
          tmp6_array[tmp7_index0] = tmp8 - 1 | 0;
          var tmp9 = np;
          np = tmp9 - 1 | 0;
        }
        G.bandEdgeIndices_1 = new Int32Array(imul(this.numBands_1, 2));
        G.extremaIndices_1 = new Int32Array(this.N_1 + 1 | 0);
        var gridArray = ArrayList_init_$Create$();
        var gridpt = 0;
        var extremum = 0;
        var bandEdgeCount = 0;
        var perturbation;
        var inductionVariable_1 = 0;
        var last_1 = this.numBands_1 - 1 | 0;
        if (inductionVariable_1 <= last_1)
          do {
            var ib_1 = inductionVariable_1;
            inductionVariable_1 = inductionVariable_1 + 1 | 0;
            var B_0 = this.bands_1[ib_1][1] - this.bands_1[ib_1][0];
            var n2 = 1 + imul(nextrema[ib_1] - 1 | 0, Companion_getInstance_6().GRIDDENSITY_1) | 0;
            var dB = B_0 / (n2 - 1 | 0);
            var base = this.bands_1[ib_1][0];
            var inductionVariable_2 = 0;
            var last_2 = n2 - 1 | 0;
            if (inductionVariable_2 <= last_2)
              do {
                var i = inductionVariable_2;
                inductionVariable_2 = inductionVariable_2 + 1 | 0;
                var Omega = base + dB * i;
                gridArray.add_1j60pz_k$(Omega);
                if ((i % Companion_getInstance_6().GRIDDENSITY_1 | 0) === 0) {
                  if (!(i === 0) ? !(i === (n2 - 1 | 0)) : false) {
                    var tmp$ret$1;
                    {
                      var tmp$ret$0;
                      {
                        var tmp0_floor = Default_getInstance().nextFloat_jqti5l_k$() * 3;
                        tmp$ret$0 = Math.floor(tmp0_floor);
                      }
                      var tmp1_roundToInt = tmp$ret$0;
                      tmp$ret$1 = roundToInt(tmp1_roundToInt);
                    }
                    perturbation = tmp$ret$1 - 1 | 0;
                  } else
                    perturbation = 0;
                  var tmp = G.get_extremaIndices_8bux3s_k$();
                  var tmp12 = extremum;
                  extremum = tmp12 + 1 | 0;
                  tmp[tmp12] = gridpt + perturbation | 0;
                }
                if (i === 0 ? true : i === (n2 - 1 | 0)) {
                  G.get_bandEdgeIndices_4mq7kc_k$()[bandEdgeCount] = gridpt;
                  var tmp13 = bandEdgeCount;
                  bandEdgeCount = tmp13 + 1 | 0;
                }
                var tmp14 = gridpt;
                gridpt = tmp14 + 1 | 0;
              } while (!(i === last_2));
          } while (!(ib_1 === last_1));
        G.gridSize_1 = gridArray.get_size_woubt6_k$();
        G.grid_1 = new Float64Array(G.gridSize_1);
        G.X_1 = new Float64Array(G.gridSize_1);
        G.H_1 = new Float64Array(G.gridSize_1);
        G.W_1 = new Float64Array(G.gridSize_1);
        var inductionVariable_3 = 0;
        var last_3 = G.gridSize_1 - 1 | 0;
        if (inductionVariable_3 <= last_3)
          do {
            var i_0 = inductionVariable_3;
            inductionVariable_3 = inductionVariable_3 + 1 | 0;
            G.get_grid_womu8f_k$()[i_0] = gridArray.get_fkrdnv_k$(i_0);
            var tmp_0 = G.get_X_1mhr5b_k$();
            var tmp$ret$2;
            {
              var tmp2_cos = G.get_grid_womu8f_k$()[i_0] * get_PI();
              tmp$ret$2 = Math.cos(tmp2_cos);
            }
            tmp_0[i_0] = tmp$ret$2;
          } while (!(i_0 === last_3));
        return G;
      };
      EquirippleFIRFilter2.prototype.generateCoefficients = function() {
        var G = this.createGrid();
        this.populateGrid(G);
        EquirippleDesigner_getInstance().remez(G);
        this._coefficients_1 = this.interpretCoefficients(EquirippleDesigner_getInstance().calculateCoefficients(G, this.Nc_1));
      };
      EquirippleFIRFilter2.prototype.getImplementation = function(blockSize) {
        return OverlapAdd_ofArray(this.getCoefficients(), blockSize);
      };
      EquirippleFIRFilter2.prototype.filter = function(x4) {
        var nfft = 16;
        var log2nfft = 4;
        var coefficients = this.getCoefficients();
        var n2 = (x4.length + coefficients.length | 0) - 1 | 0;
        while (nfft < n2) {
          nfft = imul(nfft, 2);
          var tmp0 = log2nfft;
          log2nfft = tmp0 + 1 | 0;
        }
        var fft2 = new RDFT2(log2nfft);
        var tmp = new Float32Array(nfft);
        var transform2 = new Float32Array(nfft);
        var kernel = new Float32Array(nfft);
        var inductionVariable = 0;
        var last = x4.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            tmp[i] = x4[i];
          } while (inductionVariable <= last);
        fft2.evaluate(tmp, transform2);
        var inductionVariable_0 = 0;
        var last_0 = tmp.length - 1 | 0;
        if (inductionVariable_0 <= last_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            tmp[i_0] = 0;
          } while (inductionVariable_0 <= last_0);
        var inductionVariable_1 = 0;
        var last_1 = coefficients.length - 1 | 0;
        if (inductionVariable_1 <= last_1)
          do {
            var i_1 = inductionVariable_1;
            inductionVariable_1 = inductionVariable_1 + 1 | 0;
            tmp[i_1] = coefficients[i_1];
          } while (inductionVariable_1 <= last_1);
        fft2.evaluate(tmp, kernel);
        Companion_getInstance_4().dftProduct(kernel, transform2, 1);
        fft2.evaluateInverse(transform2, tmp);
        kernel = new Float32Array(n2);
        var inductionVariable_2 = 0;
        if (inductionVariable_2 <= n2)
          do {
            var i_2 = inductionVariable_2;
            inductionVariable_2 = inductionVariable_2 + 1 | 0;
            kernel[i_2] = tmp[i_2];
          } while (!(i_2 === n2));
        return kernel;
      };
      EquirippleFIRFilter2.prototype.LTE = function(x4, y4) {
        var retval = false;
        if (x4 < y4)
          retval = true;
        var tmp$ret$0;
        {
          var tmp0_abs = x4 - y4;
          tmp$ret$0 = Math.abs(tmp0_abs);
        }
        if (tmp$ret$0 < Companion_getInstance_7().MACHINETOLERANCE_1)
          retval = true;
        return retval;
      };
      EquirippleFIRFilter2.$metadata$ = classMeta("EquirippleFIRFilter");
      Object.defineProperty(EquirippleFIRFilter2.prototype, "numBands", {
        configurable: true,
        get: EquirippleFIRFilter2.prototype.get_numBands_7jdbr5_k$,
        set: EquirippleFIRFilter2.prototype.set_numBands_se5e1n_k$
      });
      Object.defineProperty(EquirippleFIRFilter2.prototype, "N", {
        configurable: true,
        get: EquirippleFIRFilter2.prototype.get_N_1mhr51_k$,
        set: EquirippleFIRFilter2.prototype.set_N_hmx2g1_k$
      });
      Object.defineProperty(EquirippleFIRFilter2.prototype, "Nc", {
        configurable: true,
        get: EquirippleFIRFilter2.prototype.get_Nc_kntoki_k$,
        set: EquirippleFIRFilter2.prototype.set_Nc_147wda_k$
      });
      Object.defineProperty(EquirippleFIRFilter2.prototype, "bands", {
        configurable: true,
        get: EquirippleFIRFilter2.prototype.get_bands_ip1jn9_k$,
        set: EquirippleFIRFilter2.prototype.set_bands_v2glr4_k$
      });
      Object.defineProperty(EquirippleFIRFilter2.prototype, "_coefficients", {
        configurable: true,
        get: EquirippleFIRFilter2.prototype.get__coefficients_hv8wpg_k$,
        set: EquirippleFIRFilter2.prototype.set__coefficients_wl2gmb_k$
      });
      Object.defineProperty(EquirippleFIRFilter2.prototype, "implementation", {
        configurable: true,
        get: EquirippleFIRFilter2.prototype.get_implementation_9txf7p_k$,
        set: EquirippleFIRFilter2.prototype.set_implementation_v6iu10_k$
      });
      function _get_coefficients__vzgld9($this) {
        return $this.coefficients_1;
      }
      function EquirippleHalfBand2(N, OmegaP) {
        var EHBP = new EquirippleHalfBandPrototype(N, 2 * OmegaP);
        var c5 = EHBP.getCoefficients();
        this.coefficients_1 = new Float32Array(imul(2, c5.length) - 1 | 0);
        var inductionVariable = 0;
        var last = c5.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            this.coefficients_1[imul(2, i)] = 0.5 * c5[i];
          } while (inductionVariable <= last);
        this.coefficients_1[c5.length - 1 | 0] = 0.5;
      }
      EquirippleHalfBand2.prototype.getCoefficients = function() {
        var tmp$ret$1;
        {
          var tmp0_copyOf = this.coefficients_1;
          var tmp$ret$0;
          {
            tmp$ret$0 = tmp0_copyOf;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        return tmp$ret$1;
      };
      EquirippleHalfBand2.$metadata$ = classMeta("EquirippleHalfBand");
      function EquirippleHalfBandPrototype(N, OmegaP) {
        FIRTypeII2.call(this, 1, N);
        if (OmegaP <= 0 ? true : OmegaP >= 1)
          throw IllegalArgumentException_init_$Create$("OmegaP: " + OmegaP + " out of bounds (0.0 < OmegaP < 1.0)");
        this.bands[0][0] = 0;
        this.bands[0][1] = OmegaP;
        this.generateCoefficients();
      }
      EquirippleHalfBandPrototype.prototype.desiredResponse_yw2r0a_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = 1;
        return retval;
      };
      EquirippleHalfBandPrototype.prototype.desiredResponse = function(Omega) {
        return this.desiredResponse_yw2r0a_k$(Omega);
      };
      EquirippleHalfBandPrototype.prototype.weight_3hkr93_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = 1;
        return retval;
      };
      EquirippleHalfBandPrototype.prototype.weight = function(Omega) {
        return this.weight_3hkr93_k$(Omega);
      };
      EquirippleHalfBandPrototype.$metadata$ = classMeta("EquirippleHalfBandPrototype", void 0, void 0, void 0, void 0, FIRTypeII2.prototype);
      function _get_Ws__ndbq4v($this) {
        return $this.Ws_1;
      }
      function _get_Wp__ndbq2a_0($this) {
        return $this.Wp_1;
      }
      function EquirippleHighpass2(N, OmegaS, Ws, OmegaP, Wp) {
        FIRTypeI2.call(this, 2, N);
        this.Ws_1 = Ws;
        this.Wp_1 = Wp;
        if (OmegaS >= OmegaP)
          throw IllegalArgumentException_init_$Create$("OmegaS >= OmegaP ");
        if (OmegaS <= 0 ? true : OmegaS >= 1)
          throw IllegalArgumentException_init_$Create$("OmegaS: " + OmegaS + " out of bounds (0.0 < OmegaS < 1.0)");
        if (OmegaP <= 0 ? true : OmegaP >= 1)
          throw IllegalArgumentException_init_$Create$("OmegaP: " + OmegaP + " out of bounds (0.0 < OmegaP < 1.0)");
        this.bands[0][0] = 0;
        this.bands[0][1] = OmegaS;
        this.bands[1][0] = OmegaP;
        this.bands[1][1] = 1;
        this.generateCoefficients();
      }
      EquirippleHighpass2.prototype.desiredResponse_yw2r0a_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[1][0], Omega) ? this.LTE(Omega, this.bands[1][1]) : false)
          retval = 1;
        return retval;
      };
      EquirippleHighpass2.prototype.desiredResponse = function(Omega) {
        return this.desiredResponse_yw2r0a_k$(Omega);
      };
      EquirippleHighpass2.prototype.weight_3hkr93_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = this.Ws_1;
        else if (this.LTE(this.bands[1][0], Omega) ? this.LTE(Omega, this.bands[1][1]) : false)
          retval = this.Wp_1;
        return retval;
      };
      EquirippleHighpass2.prototype.weight = function(Omega) {
        return this.weight_3hkr93_k$(Omega);
      };
      EquirippleHighpass2.$metadata$ = classMeta("EquirippleHighpass", void 0, void 0, void 0, void 0, FIRTypeI2.prototype);
      function _get_Wp__ndbq2a_1($this) {
        return $this.Wp_1;
      }
      function _get_Ws__ndbq4v_0($this) {
        return $this.Ws_1;
      }
      function EquirippleLowpass2(N, OmegaP, Wp, OmegaS, Ws) {
        FIRTypeI2.call(this, 2, N);
        this.Wp_1 = Wp;
        this.Ws_1 = Ws;
        if (OmegaP >= OmegaS)
          throw IllegalArgumentException_init_$Create$("OmegaP >= OmegaS ");
        if (OmegaP <= 0 ? true : OmegaP >= 1)
          throw IllegalArgumentException_init_$Create$("OmegaP: " + OmegaP + " out of bounds (0.0 < OmegaP < 1.0)");
        if (OmegaS <= 0 ? true : OmegaS >= 1)
          throw IllegalArgumentException_init_$Create$("OmegaS: " + OmegaS + " out of bounds (0.0 < OmegaS < 1.0)");
        this.bands[0][0] = 0;
        this.bands[0][1] = OmegaP;
        this.bands[1][0] = OmegaS;
        this.bands[1][1] = 1;
        this.generateCoefficients();
      }
      EquirippleLowpass2.prototype.desiredResponse_yw2r0a_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = 1;
        return retval;
      };
      EquirippleLowpass2.prototype.desiredResponse = function(Omega) {
        return this.desiredResponse_yw2r0a_k$(Omega);
      };
      EquirippleLowpass2.prototype.weight_3hkr93_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = this.Wp_1;
        else if (this.LTE(this.bands[1][0], Omega) ? this.LTE(Omega, this.bands[1][1]) : false)
          retval = this.Ws_1;
        return retval;
      };
      EquirippleLowpass2.prototype.weight = function(Omega) {
        return this.weight_3hkr93_k$(Omega);
      };
      EquirippleLowpass2.$metadata$ = classMeta("EquirippleLowpass", void 0, void 0, void 0, void 0, FIRTypeI2.prototype);
      function FIRTypeI2(numBands, nHalf) {
        EquirippleFIRFilter2.call(this, numBands, nHalf + 1 | 0, imul(2, nHalf) + 1 | 0);
      }
      FIRTypeI2.prototype.populateGrid_wohwv6_k$ = function(G) {
        var inductionVariable = 0;
        var last = G.gridSize_1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            G.get_H_1mhr4v_k$()[i] = this.desiredResponse(G.get_grid_womu8f_k$()[i]);
            G.get_W_1mhr5a_k$()[i] = this.weight(G.get_grid_womu8f_k$()[i]);
          } while (!(i === last));
        G.containsZero_1 = true;
        G.containsPi_1 = true;
      };
      FIRTypeI2.prototype.populateGrid = function(G) {
        return this.populateGrid_wohwv6_k$(G);
      };
      FIRTypeI2.prototype.interpretCoefficients_ctexi_k$ = function(coefficients) {
        var retval = new Float32Array(this.Nc);
        Companion_getInstance().circularShiftArray(coefficients, this.N - 1 | 0);
        var inductionVariable = 0;
        var last = this.Nc;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            retval[i] = coefficients[i];
          } while (!(i === last));
        return retval;
      };
      FIRTypeI2.prototype.interpretCoefficients = function(coefficients) {
        return this.interpretCoefficients_ctexi_k$(coefficients);
      };
      FIRTypeI2.$metadata$ = classMeta("FIRTypeI", void 0, void 0, void 0, void 0, EquirippleFIRFilter2.prototype);
      function FIRTypeII2(numBands, nHalf) {
        EquirippleFIRFilter2.call(this, numBands, nHalf, imul(2, nHalf));
      }
      FIRTypeII2.prototype.populateGrid_wohwv6_k$ = function(G) {
        var inductionVariable = 0;
        var last = G.gridSize_1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp = G.get_H_1mhr4v_k$();
            var tmp_0 = this.desiredResponse(G.get_grid_womu8f_k$()[i]);
            var tmp$ret$0;
            {
              var tmp0_cos = G.get_grid_womu8f_k$()[i] * get_PI() / 2;
              tmp$ret$0 = Math.cos(tmp0_cos);
            }
            tmp[i] = tmp_0 / tmp$ret$0;
            var tmp_1 = G.get_W_1mhr5a_k$();
            var tmp_2 = this.weight(G.get_grid_womu8f_k$()[i]);
            var tmp$ret$1;
            {
              var tmp1_cos = G.get_grid_womu8f_k$()[i] * get_PI() / 2;
              tmp$ret$1 = Math.cos(tmp1_cos);
            }
            tmp_1[i] = tmp_2 * tmp$ret$1;
          } while (!(i === last));
        var tmp$ret$2;
        {
          var tmp2_abs = G.get_grid_womu8f_k$()[0];
          tmp$ret$2 = Math.abs(tmp2_abs);
        }
        if (tmp$ret$2 < 1e-6)
          G.containsZero_1 = true;
        else {
          G.containsZero_1 = false;
        }
        G.containsPi_1 = false;
      };
      FIRTypeII2.prototype.populateGrid = function(G) {
        return this.populateGrid_wohwv6_k$(G);
      };
      FIRTypeII2.prototype.interpretCoefficients_ctexi_k$ = function(coefficients) {
        var retval = new Float32Array(this.Nc);
        Companion_getInstance().circularShiftArray(coefficients, this.N - 1 | 0);
        retval[0] = 0.5 * coefficients[0];
        var inductionVariable = 1;
        var last = (this.Nc - 1 | 0) - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            retval[i] = 0.5 * (coefficients[i] + coefficients[i - 1 | 0]);
          } while (!(i === last));
        retval[this.Nc - 1 | 0] = 0.5 * coefficients[this.Nc - 2 | 0];
        return retval;
      };
      FIRTypeII2.prototype.interpretCoefficients = function(coefficients) {
        return this.interpretCoefficients_ctexi_k$(coefficients);
      };
      FIRTypeII2.$metadata$ = classMeta("FIRTypeII", void 0, void 0, void 0, void 0, EquirippleFIRFilter2.prototype);
      function FIRTypeIII2(numBands, nHalf) {
        EquirippleFIRFilter2.call(this, numBands, nHalf, imul(2, nHalf) + 1 | 0);
      }
      FIRTypeIII2.prototype.populateGrid_wohwv6_k$ = function(G) {
        var inductionVariable = 0;
        var last = G.gridSize_1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp = G.get_H_1mhr4v_k$();
            var tmp_0 = this.desiredResponse(G.get_grid_womu8f_k$()[i]);
            var tmp$ret$0;
            {
              var tmp0_sin = G.get_grid_womu8f_k$()[i] * get_PI();
              tmp$ret$0 = Math.sin(tmp0_sin);
            }
            tmp[i] = tmp_0 / tmp$ret$0;
            var tmp_1 = G.get_W_1mhr5a_k$();
            var tmp_2 = this.weight(G.get_grid_womu8f_k$()[i]);
            var tmp$ret$1;
            {
              var tmp1_sin = G.get_grid_womu8f_k$()[i] * get_PI();
              tmp$ret$1 = Math.sin(tmp1_sin);
            }
            tmp_1[i] = tmp_2 * tmp$ret$1;
          } while (!(i === last));
        G.containsZero_1 = false;
        G.containsPi_1 = false;
      };
      FIRTypeIII2.prototype.populateGrid = function(G) {
        return this.populateGrid_wohwv6_k$(G);
      };
      FIRTypeIII2.prototype.interpretCoefficients_ctexi_k$ = function(coefficients) {
        var retval = new Float32Array(this.Nc);
        Companion_getInstance().circularShiftArray(coefficients, this.N - 1 | 0);
        retval[0] = -0.5 * coefficients[0];
        retval[1] = -0.5 * coefficients[1];
        var inductionVariable = 2;
        var last = (this.Nc - 2 | 0) - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            retval[i] = 0.5 * (coefficients[i - 2 | 0] - coefficients[i]);
          } while (!(i === last));
        retval[this.Nc - 2 | 0] = 0.5 * coefficients[this.Nc - 4 | 0];
        retval[this.Nc - 1 | 0] = 0.5 * coefficients[this.Nc - 3 | 0];
        return retval;
      };
      FIRTypeIII2.prototype.interpretCoefficients = function(coefficients) {
        return this.interpretCoefficients_ctexi_k$(coefficients);
      };
      FIRTypeIII2.$metadata$ = classMeta("FIRTypeIII", void 0, void 0, void 0, void 0, EquirippleFIRFilter2.prototype);
      function FIRTypeIV(numBands, nHalf) {
        EquirippleFIRFilter2.call(this, numBands, nHalf, imul(2, nHalf));
      }
      FIRTypeIV.prototype.populateGrid_wohwv6_k$ = function(G) {
        var inductionVariable = 0;
        var last = G.gridSize_1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var tmp = G.get_H_1mhr4v_k$();
            var tmp_0 = this.desiredResponse(G.get_grid_womu8f_k$()[i]);
            var tmp$ret$0;
            {
              var tmp0_sin = G.get_grid_womu8f_k$()[i] * get_PI() / 2;
              tmp$ret$0 = Math.sin(tmp0_sin);
            }
            tmp[i] = tmp_0 / tmp$ret$0;
            var tmp_1 = G.get_W_1mhr5a_k$();
            var tmp_2 = this.weight(G.get_grid_womu8f_k$()[i]);
            var tmp$ret$1;
            {
              var tmp1_sin = G.get_grid_womu8f_k$()[i] * get_PI() / 2;
              tmp$ret$1 = Math.sin(tmp1_sin);
            }
            tmp_1[i] = tmp_2 * tmp$ret$1;
          } while (!(i === last));
        G.containsZero_1 = false;
        var tmp$ret$2;
        {
          var tmp2_abs = G.get_grid_womu8f_k$()[G.gridSize_1 - 1 | 0] - 1;
          tmp$ret$2 = Math.abs(tmp2_abs);
        }
        if (tmp$ret$2 < 1e-6)
          G.containsPi_1 = true;
        else {
          G.containsPi_1 = false;
        }
      };
      FIRTypeIV.prototype.populateGrid = function(G) {
        return this.populateGrid_wohwv6_k$(G);
      };
      FIRTypeIV.prototype.interpretCoefficients_ctexi_k$ = function(coefficients) {
        var retval = new Float32Array(this.Nc);
        Companion_getInstance().circularShiftArray(coefficients, this.N - 1 | 0);
        retval[0] = -0.5 * coefficients[0];
        var inductionVariable = 1;
        var last = (this.Nc - 1 | 0) - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            retval[i] = 0.5 * (coefficients[i - 1 | 0] - coefficients[i]);
          } while (!(i === last));
        retval[this.Nc - 1 | 0] = 0.5 * coefficients[this.Nc - 2 | 0];
        return retval;
      };
      FIRTypeIV.prototype.interpretCoefficients = function(coefficients) {
        return this.interpretCoefficients_ctexi_k$(coefficients);
      };
      FIRTypeIV.$metadata$ = classMeta("FIRTypeIV", void 0, void 0, void 0, void 0, EquirippleFIRFilter2.prototype);
      function _get_delta__ikpko7_0($this) {
        return $this.delta_1;
      }
      function StaggeredDifferentiator2(N, delta) {
        FIRTypeIV.call(this, 1, N);
        this.delta_1 = delta;
        this.bands[0][0] = 1 / imul(2, N);
        this.bands[0][1] = 1;
        this.generateCoefficients();
      }
      StaggeredDifferentiator2.prototype.desiredResponse_yw2r0a_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = -get_PI() * Omega / this.delta_1;
        return retval;
      };
      StaggeredDifferentiator2.prototype.desiredResponse = function(Omega) {
        return this.desiredResponse_yw2r0a_k$(Omega);
      };
      StaggeredDifferentiator2.prototype.weight_3hkr93_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = 1 / Omega;
        return retval;
      };
      StaggeredDifferentiator2.prototype.weight = function(Omega) {
        return this.weight_3hkr93_k$(Omega);
      };
      StaggeredDifferentiator2.$metadata$ = classMeta("StaggeredDifferentiator", void 0, void 0, void 0, void 0, FIRTypeIV.prototype);
      function StaggeredHilbertTranform2(N, OmegaP) {
        FIRTypeIV.call(this, 1, N);
        if (!(0 < OmegaP ? OmegaP < 1 : false))
          throw IllegalArgumentException_init_$Create$("Check 0.0 < OmegaP < 1.0");
        this.bands[0][0] = OmegaP;
        this.bands[0][1] = 1;
        this.generateCoefficients();
      }
      StaggeredHilbertTranform2.prototype.desiredResponse_yw2r0a_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = 1;
        return retval;
      };
      StaggeredHilbertTranform2.prototype.desiredResponse = function(Omega) {
        return this.desiredResponse_yw2r0a_k$(Omega);
      };
      StaggeredHilbertTranform2.prototype.weight_3hkr93_k$ = function(Omega) {
        var retval = 0;
        if (this.LTE(this.bands[0][0], Omega) ? this.LTE(Omega, this.bands[0][1]) : false)
          retval = 1;
        return retval;
      };
      StaggeredHilbertTranform2.prototype.weight = function(Omega) {
        return this.weight_3hkr93_k$(Omega);
      };
      StaggeredHilbertTranform2.$metadata$ = classMeta("StaggeredHilbertTranform", void 0, void 0, void 0, void 0, FIRTypeIV.prototype);
      function Allpass_init_$Init$(A5, $this) {
        Allpass2.call($this, A5.reflectionCoefficients().length);
        $this.k_1 = A5.reflectionCoefficients();
        $this.state_1 = new Float64Array($this.order_1 + 1 | 0);
        $this.constructRationalRepresentation();
        return $this;
      }
      function Allpass_ofPolynomial(A5) {
        return Allpass_init_$Init$(A5, Object.create(Allpass2.prototype));
      }
      function Allpass_init_$Init$_0(k2, $this) {
        Allpass2.call($this, k2.length);
        var tmp = $this;
        var tmp$ret$1;
        {
          var tmp$ret$0;
          {
            tmp$ret$0 = k2;
          }
          tmp$ret$1 = tmp$ret$0.slice();
        }
        tmp.k_1 = tmp$ret$1;
        $this.order_1 = $this.k_1.length;
        $this.state_1 = new Float64Array($this.order_1 + 1 | 0);
        $this.constructRationalRepresentation();
        return $this;
      }
      function Allpass_ofArray(k2) {
        return Allpass_init_$Init$_0(k2, Object.create(Allpass2.prototype));
      }
      function Allpass2(filterorder) {
        this.order_1 = filterorder;
        this.k_1 = new Float64Array(this.order_1);
        this.state_1 = new Float64Array(this.order_1 + 1 | 0);
        this.constructRationalRepresentation();
      }
      Allpass2.prototype.set_k_3rn45h_k$ = function(_set____db54di) {
        this.k_1 = _set____db54di;
      };
      Allpass2.prototype.get_k_1mhr5u_k$ = function() {
        return this.k_1;
      };
      Allpass2.prototype.set_order_nhlmht_k$ = function(_set____db54di) {
        this.order_1 = _set____db54di;
      };
      Allpass2.prototype.get_order_iwhiqt_k$ = function() {
        return this.order_1;
      };
      Allpass2.prototype.set_state_4gdqnf_k$ = function(_set____db54di) {
        this.state_1 = _set____db54di;
      };
      Allpass2.prototype.get_state_iypx7s_k$ = function() {
        return this.state_1;
      };
      Allpass2.prototype.set_T_dortqy_k$ = function(_set____db54di) {
        this.T_1 = _set____db54di;
      };
      Allpass2.prototype.get_T_1mhr57_k$ = function() {
        var tmp = this.T_1;
        if (!(tmp == null))
          return tmp;
        else {
          throwUninitializedPropertyAccessException("T");
        }
      };
      Allpass2.prototype.initialize = function() {
        var inductionVariable = 0;
        var last = this.state_1.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            this.state_1[i] = 0;
          } while (inductionVariable <= last);
      };
      Allpass2.prototype.filterSingle = function(x4) {
        var myX = x4;
        var stage = this.order_1;
        while (stage >= 0) {
          if (stage > 0) {
            myX = myX - this.k_1[stage - 1 | 0] * this.state_1[stage - 1 | 0];
            this.state_1[stage] = this.k_1[stage - 1 | 0] * myX + this.state_1[stage - 1 | 0];
          } else {
            this.state_1[stage] = myX;
          }
          var tmp0 = stage;
          stage = tmp0 - 1 | 0;
        }
        return this.state_1[this.order_1];
      };
      Allpass2.prototype.filter = function(x4) {
        var inductionVariable = 0;
        var last = x4.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            x4[i] = this.filterSingle(x4[i]);
          } while (inductionVariable <= last);
      };
      Allpass2.prototype.evaluate = function(omega) {
        var ejOmega = Companion_getInstance_8().exp(new Complex2(0, -omega));
        return this.T.evaluateComplex(ejOmega);
      };
      Allpass2.prototype.groupDelay = function(Omega) {
        return this.T.discreteTimeGroupDelay(Omega);
      };
      Allpass2.prototype.constructRationalRepresentation = function() {
        var a3 = new Float64Array(this.order_1 + 1 | 0);
        var b = new Float64Array(this.order_1 + 1 | 0);
        a3[0] = 1;
        var inductionVariable = 0;
        var last = this.order_1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var p = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var inductionVariable_0 = 0;
            var last_0 = b.length - 1 | 0;
            if (inductionVariable_0 <= last_0)
              do {
                var j = inductionVariable_0;
                inductionVariable_0 = inductionVariable_0 + 1 | 0;
                b[j] = 0;
              } while (inductionVariable_0 <= last_0);
            var i = 0;
            while (i <= p) {
              var tmp2_array = b;
              var tmp3_index0 = i;
              tmp2_array[tmp3_index0] = tmp2_array[tmp3_index0] + a3[i];
              var tmp4_array = b;
              var tmp5_index0 = i + 1 | 0;
              tmp4_array[tmp5_index0] = tmp4_array[tmp5_index0] + this.k_1[p] * a3[p - i | 0];
              var tmp6 = i;
              i = tmp6 + 1 | 0;
            }
            var inductionVariable_1 = 0;
            var last_1 = p + 2 | 0;
            if (inductionVariable_1 <= last_1)
              do {
                var k2 = inductionVariable_1;
                inductionVariable_1 = inductionVariable_1 + 1 | 0;
                a3[k2] = b[k2];
              } while (!(k2 === last_1));
          } while (!(p === last));
        var inductionVariable_2 = 0;
        var last_2 = b.length - 1 | 0;
        if (inductionVariable_2 <= last_2)
          do {
            var j_0 = inductionVariable_2;
            inductionVariable_2 = inductionVariable_2 + 1 | 0;
            b[j_0] = 0;
          } while (inductionVariable_2 <= last_2);
        var inductionVariable_3 = 0;
        var last_3 = this.order_1;
        if (inductionVariable_3 <= last_3)
          do {
            var i_0 = inductionVariable_3;
            inductionVariable_3 = inductionVariable_3 + 1 | 0;
            b[i_0] = a3[this.order_1 - i_0 | 0];
          } while (!(i_0 === last_3));
        this.T_1 = Rational_ofPolynomials(Polynomial_ofArray(b), Polynomial_ofArray(a3));
      };
      Allpass2.prototype.rationalRepresentation = function() {
        return Rational_ofRational(this.T);
      };
      Allpass2.prototype.toString = function() {
        var out = "Allpass _order:  " + this.order_1 + new Char(_Char___init__impl__6a9atx(10));
        var inductionVariable = 0;
        var last = this.order_1 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            if (i < this.order_1) {
              if (this.k_1[i] < 0)
                out = out + ("  " + this.k_1[i] + "  " + this.state_1[i] + new Char(_Char___init__impl__6a9atx(10)));
              else
                out = out + ("   " + this.k_1[i] + "  " + this.state_1[i] + new Char(_Char___init__impl__6a9atx(10)));
            } else
              out = out + ("             " + this.state_1[i] + new Char(_Char___init__impl__6a9atx(10)));
          } while (!(i === last));
        return out;
      };
      Allpass2.$metadata$ = classMeta("Allpass");
      Object.defineProperty(Allpass2.prototype, "k", {
        configurable: true,
        get: Allpass2.prototype.get_k_1mhr5u_k$,
        set: Allpass2.prototype.set_k_3rn45h_k$
      });
      Object.defineProperty(Allpass2.prototype, "order", {
        configurable: true,
        get: Allpass2.prototype.get_order_iwhiqt_k$,
        set: Allpass2.prototype.set_order_nhlmht_k$
      });
      Object.defineProperty(Allpass2.prototype, "state", {
        configurable: true,
        get: Allpass2.prototype.get_state_iypx7s_k$,
        set: Allpass2.prototype.set_state_4gdqnf_k$
      });
      Object.defineProperty(Allpass2.prototype, "T", {
        configurable: true,
        get: Allpass2.prototype.get_T_1mhr57_k$,
        set: Allpass2.prototype.set_T_dortqy_k$
      });
      function AnalogButterworth(order) {
        AnalogPrototype2.call(this);
        var nRealPoles = order - imul(2, order / 2 | 0) | 0;
        var nComplexPolePairs = order / 2 | 0;
        var nPoles = nRealPoles + imul(2, nComplexPolePairs) | 0;
        if (nRealPoles === 1) {
          var tmp$ret$0;
          {
            tmp$ret$0 = new Float64Array([1, 1]);
          }
          var td = tmp$ret$0;
          this.addSection(Rational_ofPolynomials(Polynomial_ofConstant(1), Polynomial_ofArray(td)));
        }
        var dAngle = get_PI() / nPoles;
        var inductionVariable = 0;
        var last = nComplexPolePairs - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var angle2 = -get_PI() / 2 + dAngle / 2 * (1 + nRealPoles | 0) + i * dAngle;
            var tmp$ret$2;
            {
              var tmp$ret$1;
              {
                tmp$ret$1 = Math.sin(angle2);
              }
              var tmp0_doubleArrayOf = new Float64Array([1, -2 * tmp$ret$1, 1]);
              tmp$ret$2 = tmp0_doubleArrayOf;
            }
            var td_0 = tmp$ret$2;
            this.addSection(Rational_ofPolynomials(Polynomial_ofConstant(1), Polynomial_ofArray(td_0)));
          } while (!(i === last));
      }
      AnalogButterworth.$metadata$ = classMeta("AnalogButterworth", void 0, void 0, void 0, void 0, AnalogPrototype2.prototype);
      function AnalogChebyshevI(order, epsilon8) {
        AnalogPrototype2.call(this);
        var tmp$ret$0;
        {
          var tmp0_sqrt = 1 + epsilon8 * epsilon8;
          tmp$ret$0 = Math.sqrt(tmp0_sqrt);
        }
        var alpha = (1 + tmp$ret$0) / epsilon8;
        var tmp$ret$1;
        {
          var tmp1_pow = 1 / order;
          tmp$ret$1 = Math.pow(alpha, tmp1_pow);
        }
        var p = tmp$ret$1;
        var a3 = 0.5 * (p - 1 / p);
        var b = 0.5 * (p + 1 / p);
        println("alpha: " + alpha);
        println("p:     " + p);
        println("a:     " + a3);
        println("b:     " + b);
        var nRealPoles = order - imul(2, order / 2 | 0) | 0;
        var nComplexPolePairs = order / 2 | 0;
        var nPoles = nRealPoles + imul(2, nComplexPolePairs) | 0;
        if (nRealPoles === 1) {
          var tmp$ret$2;
          {
            tmp$ret$2 = new Float64Array([a3, 1]);
          }
          var td = tmp$ret$2;
          this.addSection(Rational_ofPolynomials(Polynomial_ofConstant(1), Polynomial_ofArray(td)));
        }
        var dAngle = get_PI() / nPoles;
        var inductionVariable = 0;
        var last = nComplexPolePairs - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var angle2 = -get_PI() / 2 + dAngle / 2 * (1 + nRealPoles | 0) + i * dAngle;
            var tmp$ret$3;
            {
              tmp$ret$3 = Math.sin(angle2);
            }
            var tmp = a3 * tmp$ret$3;
            var tmp$ret$4;
            {
              tmp$ret$4 = Math.cos(angle2);
            }
            var pole = new Complex2(tmp, b * tmp$ret$4);
            var tmp$ret$5;
            {
              var tmp2_doubleArrayOf = new Float64Array([pole.real() * pole.real() + pole.imag() * pole.imag(), -2 * pole.real(), 1]);
              tmp$ret$5 = tmp2_doubleArrayOf;
            }
            var td_0 = tmp$ret$5;
            this.addSection(Rational_ofPolynomials(Polynomial_ofConstant(1), Polynomial_ofArray(td_0)));
          } while (!(i === last));
        var tmp_0 = this.sections.get_fkrdnv_k$(0);
        var tmp$ret$6;
        {
          var tmp3_pow = order - 1 | 0;
          tmp$ret$6 = Math.pow(2, tmp3_pow);
        }
        tmp_0.timesEqualsReal(1 / (tmp$ret$6 * epsilon8));
      }
      AnalogChebyshevI.$metadata$ = classMeta("AnalogChebyshevI", void 0, void 0, void 0, void 0, AnalogPrototype2.prototype);
      function AnalogChebyshevII(order, epsilon8) {
        AnalogPrototype2.call(this);
        var tmp$ret$0;
        {
          var tmp0_sqrt = 1 + epsilon8 * epsilon8;
          tmp$ret$0 = Math.sqrt(tmp0_sqrt);
        }
        var alpha = (1 + tmp$ret$0) / epsilon8;
        var tmp$ret$1;
        {
          var tmp1_pow = 1 / order;
          tmp$ret$1 = Math.pow(alpha, tmp1_pow);
        }
        var p = tmp$ret$1;
        var a3 = 0.5 * (p - 1 / p);
        var b = 0.5 * (p + 1 / p);
        println("alpha: " + alpha);
        println("p:     " + p);
        println("a:     " + a3);
        println("b:     " + b);
        var nRealPoles = order - imul(2, order / 2 | 0) | 0;
        var nComplexPolePairs = order / 2 | 0;
        var nPoles = nRealPoles + imul(2, nComplexPolePairs) | 0;
        if (nRealPoles === 1) {
          var tmp$ret$2;
          {
            var tmp2_doubleArrayOf = new Float64Array([1 / a3, 1]);
            tmp$ret$2 = tmp2_doubleArrayOf;
          }
          var td = tmp$ret$2;
          this.addSection(Rational_ofPolynomials(Polynomial_ofConstant(1), Polynomial_ofArray(td)));
        }
        var dAngle = get_PI() / nPoles;
        var inductionVariable = 0;
        var last = nComplexPolePairs - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var angle2 = -get_PI() / 2 + dAngle / 2 * (1 + nRealPoles | 0) + i * dAngle;
            var tmp = Companion_getInstance_8();
            var tmp$ret$3;
            {
              tmp$ret$3 = Math.sin(angle2);
            }
            var tmp_0 = a3 * tmp$ret$3;
            var tmp$ret$4;
            {
              tmp$ret$4 = Math.cos(angle2);
            }
            var pole = tmp.divideRealComplex(1, new Complex2(tmp_0, b * tmp$ret$4));
            var tmp$ret$5;
            {
              var tmp3_doubleArrayOf = new Float64Array([pole.real() * pole.real() + pole.imag() * pole.imag(), -2 * pole.real(), 1]);
              tmp$ret$5 = tmp3_doubleArrayOf;
            }
            var td_0 = tmp$ret$5;
            var tmp$ret$6;
            {
              var tmp4_cos = (imul(2, i) + 1 | 0) * get_PI() / imul(2, order);
              tmp$ret$6 = Math.cos(tmp4_cos);
            }
            var zeroimag = 1 / tmp$ret$6;
            var tmp$ret$7;
            {
              var tmp5_doubleArrayOf = new Float64Array([zeroimag * zeroimag, 0, 1]);
              tmp$ret$7 = tmp5_doubleArrayOf;
            }
            var tn = tmp$ret$7;
            this.addSection(Rational_ofPolynomials(Polynomial_ofArray(tn), Polynomial_ofArray(td_0)));
          } while (!(i === last));
        var DCvalue = this.evaluate(0).abs();
        this.sections.get_fkrdnv_k$(0).timesEqualsReal(1 / DCvalue);
      }
      AnalogChebyshevII.$metadata$ = classMeta("AnalogChebyshevII", void 0, void 0, void 0, void 0, AnalogPrototype2.prototype);
      function _set__T__dl8vxa($this, _set____db54di) {
        $this._T_1 = _set____db54di;
      }
      function _get__T__ndbvbq($this) {
        return $this._T_1;
      }
      function lptobpFactors($this, P, BW, prod) {
        var p = P.coefficients();
        var c5 = p[0] / p[2];
        var b = p[1] / p[2];
        var discriminant = b * b - 4 * c5;
        var t03;
        var t13;
        if (discriminant >= 0) {
          var tmp = -b;
          var tmp$ret$0;
          {
            tmp$ret$0 = Math.sqrt(discriminant);
          }
          var root3 = (tmp + tmp$ret$0) / 2;
          var f1 = root3 * BW / 2;
          var f2 = f1 * f1 - prod;
          var C2 = Complex_fromReal(f1).plusComplex(Companion_getInstance_8().sqrt(Complex_fromReal(f2)));
          var tmp$ret$1;
          {
            var tmp0_doubleArrayOf = new Float64Array([C2.conjugate().timesComplex(C2).real(), -2 * C2.real(), 1]);
            tmp$ret$1 = tmp0_doubleArrayOf;
          }
          t03 = Polynomial_ofArray(tmp$ret$1);
          var tmp_0 = -b;
          var tmp$ret$2;
          {
            tmp$ret$2 = Math.sqrt(discriminant);
          }
          root3 = (tmp_0 - tmp$ret$2) / 2;
          f1 = root3 * BW / 2;
          f2 = f1 * f1 - prod;
          C2 = Complex_fromReal(f1).plusComplex(Companion_getInstance_8().sqrt(Complex_fromReal(f2)));
          var tmp$ret$3;
          {
            var tmp1_doubleArrayOf = new Float64Array([C2.conjugate().timesComplex(C2).real(), -2 * C2.real(), 1]);
            tmp$ret$3 = tmp1_doubleArrayOf;
          }
          t13 = Polynomial_ofArray(tmp$ret$3);
        } else {
          var tmp_1 = -b / 2;
          var tmp$ret$4;
          {
            var tmp2_sqrt = -discriminant;
            tmp$ret$4 = Math.sqrt(tmp2_sqrt);
          }
          var root_0 = new Complex2(tmp_1, tmp$ret$4 / 2);
          var f1_0 = root_0.timesReal(BW / 2);
          var f2_0 = f1_0.timesComplex(f1_0).minusReal(prod);
          var C_0 = f1_0.plusComplex(Companion_getInstance_8().sqrt(f2_0));
          var tmp$ret$5;
          {
            var tmp3_doubleArrayOf = new Float64Array([C_0.conjugate().timesComplex(C_0).real(), -2 * C_0.real(), 1]);
            tmp$ret$5 = tmp3_doubleArrayOf;
          }
          t03 = Polynomial_ofArray(tmp$ret$5);
          C_0 = f1_0.minusComplex(Companion_getInstance_8().sqrt(f2_0));
          var tmp$ret$6;
          {
            var tmp4_doubleArrayOf = new Float64Array([C_0.conjugate().timesComplex(C_0).real(), -2 * C_0.real(), 1]);
            tmp$ret$6 = tmp4_doubleArrayOf;
          }
          t13 = Polynomial_ofArray(tmp$ret$6);
        }
        var tmp$ret$9;
        {
          var tmp5_arrayOf = [Polynomial_ofPolynomial(t03), Polynomial_ofPolynomial(t13)];
          var tmp$ret$8;
          {
            var tmp$ret$7;
            {
              tmp$ret$7 = tmp5_arrayOf;
            }
            tmp$ret$8 = tmp$ret$7;
          }
          tmp$ret$9 = tmp$ret$8;
        }
        return tmp$ret$9;
      }
      function AnalogPrototype2() {
        this._T_1 = null;
        this.sections_1 = ArrayList_init_$Create$();
      }
      AnalogPrototype2.prototype.set_sections_8qbcpz_k$ = function(_set____db54di) {
        this.sections_1 = _set____db54di;
      };
      AnalogPrototype2.prototype.get_sections_g4k5xl_k$ = function() {
        return this.sections_1;
      };
      AnalogPrototype2.prototype.get_T_1mhr57_k$ = function() {
        if (this._T_1 == null) {
          this._T_1 = this.computeTransferFunction();
        }
        var tmp0_elvis_lhs = this._T_1;
        var tmp;
        if (tmp0_elvis_lhs == null) {
          throw RuntimeException_init_$Create$("SHould not happen, _T is null");
        } else {
          tmp = tmp0_elvis_lhs;
        }
        return tmp;
      };
      AnalogPrototype2.prototype.addSection = function(R) {
        this.sections_1.add_1j60pz_k$(R);
        this._T_1 = null;
      };
      AnalogPrototype2.prototype.nSections = function() {
        return this.sections_1.get_size_woubt6_k$();
      };
      AnalogPrototype2.prototype.getSection = function(index3) {
        return Rational_ofRational(this.sections_1.get_fkrdnv_k$(index3));
      };
      AnalogPrototype2.prototype.lptolp = function(omega0) {
        var tmp$ret$0;
        {
          tmp$ret$0 = new Float64Array([0, 1]);
        }
        var tn = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = new Float64Array([omega0]);
        }
        var td = tmp$ret$1;
        var T = Rational_ofArrays(tn, td);
        var retval = new AnalogPrototype2();
        var inductionVariable = 0;
        var last = this.sections_1.get_size_woubt6_k$() - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            retval.addSection(this.sections_1.get_fkrdnv_k$(i).mapRational(T));
          } while (inductionVariable <= last);
        return retval;
      };
      AnalogPrototype2.prototype.lptohp = function(omega0) {
        var tmp$ret$0;
        {
          tmp$ret$0 = new Float64Array([omega0]);
        }
        var tn = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = new Float64Array([0, 1]);
        }
        var td = tmp$ret$1;
        var T = Rational_ofArrays(tn, td);
        var retval = new AnalogPrototype2();
        var inductionVariable = 0;
        var last = this.sections_1.get_size_woubt6_k$() - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            retval.addSection(this.sections_1.get_fkrdnv_k$(i).mapRational(T));
          } while (inductionVariable <= last);
        return retval;
      };
      AnalogPrototype2.prototype.lptobp = function(omega1, omega2) {
        var BW = omega2 - omega1;
        var prod = omega1 * omega2;
        var tmp$ret$0;
        {
          tmp$ret$0 = new Float64Array([prod, 0, 1]);
        }
        var tn = tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = new Float64Array([0, BW]);
        }
        var td = tmp$ret$1;
        var T = Rational_ofArrays(tn, td);
        var retval = new AnalogPrototype2();
        var A5 = 1;
        var inductionVariable = 0;
        var last = this.sections_1.get_size_woubt6_k$() - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var section = this.sections_1.get_fkrdnv_k$(i);
            var Tsection = section.mapRational(T);
            A5 = A5 * Tsection.canonicalForm();
            var order = section.order();
            if (order[0] < 2 ? order[1] < 2 : false)
              retval.addSection(Tsection);
            else if (order[1] === 2) {
              var DT = lptobpFactors(this, section.denominator(), BW, prod);
              var tmp$ret$2;
              {
                tmp$ret$2 = new Float64Array([0, 1]);
              }
              var t13 = tmp$ret$2;
              if (order[0] === 0) {
                retval.addSection(Rational_ofPolynomials(Polynomial_ofArray(t13), DT[0]));
                retval.addSection(Rational_ofPolynomials(Polynomial_ofArray(t13), DT[1]));
              } else if (order[0] === 1) {
                retval.addSection(Rational_ofPolynomials(Polynomial_ofArray(t13), DT[0]));
                var t22 = new Float64Array(3);
                var tc = Tsection.numerator().coefficients();
                var inductionVariable_0 = 0;
                if (inductionVariable_0 <= 2)
                  do {
                    var j = inductionVariable_0;
                    inductionVariable_0 = inductionVariable_0 + 1 | 0;
                    t22[j] = tc[j + 1 | 0];
                  } while (inductionVariable_0 <= 2);
                retval.addSection(Rational_ofPolynomials(Polynomial_ofArray(t22), DT[1]));
              } else if (order[0] === 2) {
                var NT = lptobpFactors(this, section.numerator(), BW, prod);
                retval.addSection(Rational_ofPolynomials(NT[0], DT[0]));
                retval.addSection(Rational_ofPolynomials(NT[1], DT[1]));
              }
            }
          } while (inductionVariable <= last);
        retval.sections_1.get_fkrdnv_k$(0).timesEqualsReal(A5);
        return retval;
      };
      AnalogPrototype2.prototype.computeTransferFunction = function() {
        var T = Rational_ofConstant(1);
        var inductionVariable = 0;
        var last = this.sections_1.get_size_woubt6_k$() - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            T.timesEqualsRational(this.sections_1.get_fkrdnv_k$(i));
          } while (inductionVariable <= last);
        return T;
      };
      AnalogPrototype2.prototype.get_transferFunction_b52pik_k$ = function() {
        return Rational_ofRational(this.T);
      };
      AnalogPrototype2.prototype.evaluate = function(omega) {
        return this.T.evaluateComplex(new Complex2(0, omega));
      };
      AnalogPrototype2.prototype.groupDelay = function(omega) {
        return this.T.groupDelay(omega);
      };
      AnalogPrototype2.prototype.toString = function() {
        var out = "AnalogPrototype: \n";
        var inductionVariable = 0;
        var last = this.sections_1.get_size_woubt6_k$() - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            out = out + ("  section " + i + ":" + new Char(_Char___init__impl__6a9atx(10)));
            out = out + this.sections_1.get_fkrdnv_k$(i);
          } while (inductionVariable <= last);
        return out;
      };
      AnalogPrototype2.$metadata$ = classMeta("AnalogPrototype");
      Object.defineProperty(AnalogPrototype2.prototype, "sections", {
        configurable: true,
        get: AnalogPrototype2.prototype.get_sections_g4k5xl_k$,
        set: AnalogPrototype2.prototype.set_sections_8qbcpz_k$
      });
      Object.defineProperty(AnalogPrototype2.prototype, "T", {
        configurable: true,
        get: AnalogPrototype2.prototype.get_T_1mhr57_k$
      });
      Object.defineProperty(AnalogPrototype2.prototype, "transferFunction", {
        configurable: true,
        get: AnalogPrototype2.prototype.get_transferFunction_b52pik_k$
      });
      function Butterworth2(order, type2, f1, f2, delta) {
        IIRFilter3.call(this, new AnalogButterworth(order), type2, f1, f2, delta);
      }
      Butterworth2.$metadata$ = classMeta("Butterworth", void 0, void 0, void 0, void 0, IIRFilter3.prototype);
      function ChebyshevI2(order, epsilon8, type2, f1, f2, delta) {
        IIRFilter3.call(this, new AnalogChebyshevI(order, epsilon8), type2, f1, f2, delta);
      }
      ChebyshevI2.$metadata$ = classMeta("ChebyshevI", void 0, void 0, void 0, void 0, IIRFilter3.prototype);
      function ChebyshevII2(order, epsilon8, type2, f1, f2, delta) {
        IIRFilter3.call(this, new AnalogChebyshevII(order, epsilon8), type2, f1, f2, delta);
      }
      ChebyshevII2.$metadata$ = classMeta("ChebyshevII", void 0, void 0, void 0, void 0, IIRFilter3.prototype);
      function _set_real__9t9mrd($this, _set____db54di) {
        $this.real_1 = _set____db54di;
      }
      function _get_real__dd1mct($this) {
        return $this.real_1;
      }
      function _set_imag__9ogl71($this, _set____db54di) {
        $this.imag_1 = _set____db54di;
      }
      function _get_imag__d88ksh($this) {
        return $this.imag_1;
      }
      function Complex_init_$Init$(real, $this) {
        Complex2.call($this, real, 0);
        return $this;
      }
      function Complex_fromReal(real) {
        return Complex_init_$Init$(real, Object.create(Complex2.prototype));
      }
      function Companion_8() {
        Companion_instance_8 = this;
      }
      Companion_8.prototype.ComplexFromPolar = function(r, phi2) {
        var tmp$ret$0;
        {
          tmp$ret$0 = Math.cos(phi2);
        }
        var tmp = r * tmp$ret$0;
        var tmp$ret$1;
        {
          tmp$ret$1 = Math.sin(phi2);
        }
        return new Complex2(tmp, r * tmp$ret$1);
      };
      Companion_8.prototype.addRealComplex = function(a3, c5) {
        return new Complex2(a3 + c5.real_1, c5.imag_1);
      };
      Companion_8.prototype.addComplexReal = function(c5, a3) {
        return this.addRealComplex(a3, c5);
      };
      Companion_8.prototype.subtractComplexReal = function(c5, a3) {
        return new Complex2(c5.real_1 - a3, c5.imag_1);
      };
      Companion_8.prototype.subtractRealComplex = function(a3, c5) {
        return new Complex2(a3 - c5.real_1, c5.imag_1);
      };
      Companion_8.prototype.unaryMinus = function(c5) {
        return new Complex2(-c5.real_1, -c5.imag_1);
      };
      Companion_8.prototype.multiplyRealComplex = function(a3, c5) {
        return new Complex2(a3 * c5.real_1, a3 * c5.imag_1);
      };
      Companion_8.prototype.multiplyComplexReal = function(c5, a3) {
        return this.multiplyRealComplex(a3, c5);
      };
      Companion_8.prototype.addComplexComplex = function(c1, c22) {
        return new Complex2(c1.real_1 + c22.real_1, c1.imag_1 + c22.imag_1);
      };
      Companion_8.prototype.subtractComplexComplex = function(c1, c22) {
        return new Complex2(c1.real_1 - c22.real_1, c1.imag_1 - c22.imag_1);
      };
      Companion_8.prototype.multiplyComplexComplex = function(c1, c22) {
        return new Complex2(c1.real_1 * c22.real_1 - c1.imag_1 * c22.imag_1, c1.real_1 * c22.imag_1 + c1.imag_1 * c22.real_1);
      };
      Companion_8.prototype.divideComplexReal = function(c5, a3) {
        return new Complex2(c5.real_1 / a3, c5.imag_1 / a3);
      };
      Companion_8.prototype.divideRealComplex = function(a3, c5) {
        var scale = c5.real_1 * c5.real_1 + c5.imag_1 * c5.imag_1;
        return new Complex2(a3 * c5.real_1 / scale, a3 * -c5.imag_1 / scale);
      };
      Companion_8.prototype.divideComplexComplex = function(c1, c22) {
        var scale = c22.real_1 * c22.real_1 + c22.imag_1 * c22.imag_1;
        return new Complex2((c1.real_1 * c22.real_1 + c1.imag_1 * c22.imag_1) / scale, (c1.imag_1 * c22.real_1 - c1.real_1 * c22.imag_1) / scale);
      };
      Companion_8.prototype.sqrt = function(c5) {
        var tmp$ret$0;
        {
          var tmp0_sqrt = this.abs(c5);
          tmp$ret$0 = Math.sqrt(tmp0_sqrt);
        }
        return this.ComplexFromPolar(tmp$ret$0, this.angle(c5) / 2);
      };
      Companion_8.prototype.abs = function(c5) {
        var tmp$ret$0;
        {
          var tmp0_sqrt = c5.real_1 * c5.real_1 + c5.imag_1 * c5.imag_1;
          tmp$ret$0 = Math.sqrt(tmp0_sqrt);
        }
        return tmp$ret$0;
      };
      Companion_8.prototype.angle = function(c5) {
        var tmp$ret$0;
        {
          var tmp0_atan2 = c5.imag_1;
          var tmp1_atan2 = c5.real_1;
          tmp$ret$0 = Math.atan2(tmp0_atan2, tmp1_atan2);
        }
        return tmp$ret$0;
      };
      Companion_8.prototype.exp = function(c5) {
        var tmp$ret$0;
        {
          var tmp0_exp = c5.real_1;
          tmp$ret$0 = Math.exp(tmp0_exp);
        }
        var r = tmp$ret$0;
        var tmp$ret$1;
        {
          var tmp1_cos = c5.imag_1;
          tmp$ret$1 = Math.cos(tmp1_cos);
        }
        var tmp = r * tmp$ret$1;
        var tmp$ret$2;
        {
          var tmp2_sin = c5.imag_1;
          tmp$ret$2 = Math.sin(tmp2_sin);
        }
        return new Complex2(tmp, r * tmp$ret$2);
      };
      Companion_8.prototype.conjugate = function(c5) {
        return new Complex2(c5.real_1, -c5.imag_1);
      };
      Companion_8.$metadata$ = objectMeta("Companion");
      var Companion_instance_8;
      function Companion_getInstance_8() {
        if (Companion_instance_8 == null)
          new Companion_8();
        return Companion_instance_8;
      }
      function Complex2(realpart, imagpart) {
        Companion_getInstance_8();
        this.real_1 = realpart;
        this.imag_1 = imagpart;
      }
      Complex2.prototype.real = function() {
        return this.real_1;
      };
      Complex2.prototype.imag = function() {
        return this.imag_1;
      };
      Complex2.prototype.abs = function() {
        return Companion_getInstance_8().abs(this);
      };
      Complex2.prototype.angle = function() {
        return Companion_getInstance_8().angle(this);
      };
      Complex2.prototype.timesComplex = function(c5) {
        return Companion_getInstance_8().multiplyComplexComplex(this, c5);
      };
      Complex2.prototype.timesReal = function(a3) {
        return Companion_getInstance_8().multiplyComplexReal(this, a3);
      };
      Complex2.prototype.conjugate = function() {
        return Companion_getInstance_8().conjugate(this);
      };
      Complex2.prototype.plusComplex = function(c5) {
        return Companion_getInstance_8().addComplexComplex(this, c5);
      };
      Complex2.prototype.plusReal = function(a3) {
        return Companion_getInstance_8().addComplexReal(this, a3);
      };
      Complex2.prototype.minusComplex = function(c5) {
        return Companion_getInstance_8().subtractComplexComplex(this, c5);
      };
      Complex2.prototype.minusReal = function(a3) {
        return Companion_getInstance_8().subtractComplexReal(this, a3);
      };
      Complex2.prototype.overReal = function(a3) {
        return Companion_getInstance_8().divideComplexReal(this, a3);
      };
      Complex2.prototype.overComplex = function(c5) {
        return Companion_getInstance_8().divideComplexComplex(this, c5);
      };
      Complex2.prototype.plusEqualsReal = function(a3) {
        var tmp0_this = this;
        tmp0_this.real_1 = tmp0_this.real_1 + a3;
      };
      Complex2.prototype.plusEqualsComplex = function(c5) {
        var tmp0_this = this;
        tmp0_this.real_1 = tmp0_this.real_1 + c5.real_1;
        var tmp1_this = this;
        tmp1_this.imag_1 = tmp1_this.imag_1 + c5.imag_1;
      };
      Complex2.prototype.minusEqualsReal = function(a3) {
        var tmp0_this = this;
        tmp0_this.real_1 = tmp0_this.real_1 - a3;
      };
      Complex2.prototype.minusEqualsComplex = function(c5) {
        var tmp0_this = this;
        tmp0_this.real_1 = tmp0_this.real_1 - c5.real_1;
        var tmp1_this = this;
        tmp1_this.imag_1 = tmp1_this.imag_1 - c5.imag_1;
      };
      Complex2.prototype.timesEqualsReal = function(a3) {
        var tmp0_this = this;
        tmp0_this.real_1 = tmp0_this.real_1 * a3;
        var tmp1_this = this;
        tmp1_this.imag_1 = tmp1_this.imag_1 * a3;
      };
      Complex2.prototype.timesEqualsComplex = function(c5) {
        var tmp = this.real_1 * c5.real_1 - this.imag_1 * c5.imag_1;
        this.imag_1 = this.real_1 * c5.imag_1 + this.imag_1 * c5.real_1;
        this.real_1 = tmp;
      };
      Complex2.prototype.divideEqualsReal = function(a3) {
        var tmp0_this = this;
        tmp0_this.real_1 = tmp0_this.real_1 / a3;
        var tmp1_this = this;
        tmp1_this.imag_1 = tmp1_this.imag_1 / a3;
      };
      Complex2.prototype.divideEqualsComplex = function(c5) {
        var scale = c5.real_1 * c5.real_1 + c5.imag_1 * c5.imag_1;
        var tmp = c5.real_1 * this.real_1 + c5.imag_1 * this.imag_1;
        this.imag_1 = c5.real_1 * this.imag_1 - c5.imag_1 * this.real_1;
        this.real_1 = tmp;
        this.divideEqualsReal(scale);
      };
      Complex2.prototype.toString = function() {
        return "" + this.real_1 + "  +  i * " + this.imag_1 + "\n";
      };
      Complex2.$metadata$ = classMeta("Complex");
      function warp($this, f, delta) {
        var tmp$ret$0;
        {
          var tmp0_tan = get_PI() * f * delta;
          tmp$ret$0 = Math.tan(tmp0_tan);
        }
        return tmp$ret$0;
      }
      function IIRFilter3(baseFilter, type2, f1, f2, delta) {
        this.delta_1 = delta;
        this.f1__1 = f1;
        this.f2__1 = f2;
        var prototype;
        var tmp0_subject = type2;
        var tmp0 = tmp0_subject.get_ordinal_ip24qg_k$();
        switch (tmp0) {
          case 0:
            prototype = baseFilter.lptolp(warp(this, f2, delta));
            break;
          case 1:
            prototype = baseFilter.lptobp(warp(this, f1, delta), warp(this, f2, delta));
            break;
          case 2:
            prototype = baseFilter.lptohp(warp(this, f1, delta));
            break;
          default:
            throw IllegalStateException_init_$Create$("Undefined passband type");
        }
        var tn = new Float64Array(2);
        var td = new Float64Array(2);
        tn[0] = 1;
        tn[1] = -1;
        td[0] = 1;
        td[1] = 1;
        var S = Rational_ofArrays(tn, td);
        this.T_1 = Rational_ofConstant(1);
        this.sections_1 = ArrayList_init_$Create$();
        var inductionVariable = 0;
        var last = prototype.nSections() - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var R = prototype.getSection(i).mapRational(S);
            this.T_1.timesEqualsRational(R);
            var cn = R.numerator().coefficients();
            var cd = R.denominator().coefficients();
            var s3 = 1;
            if (!(cd[0] === 0))
              s3 = cd[0];
            var b02 = cn[0] / s3;
            var b12 = 0;
            if (cn.length >= 2)
              b12 = cn[1] / s3;
            var b22 = 0;
            if (cn.length >= 3)
              b22 = cn[2] / s3;
            var a1 = 0;
            if (cd.length >= 2)
              a1 = cd[1] / s3;
            var a22 = 0;
            if (cd.length >= 3)
              a22 = cd[2] / s3;
            this.sections_1.add_1j60pz_k$(new SecondOrderSection(b02, b12, b22, a1, a22));
          } while (!(i === last));
      }
      IIRFilter3.prototype.set_sections_7e6foy_k$ = function(_set____db54di) {
        this.sections_1 = _set____db54di;
      };
      IIRFilter3.prototype.get_sections_g4k5xl_k$ = function() {
        return this.sections_1;
      };
      IIRFilter3.prototype.set_T_dortqy_k$ = function(_set____db54di) {
        this.T_1 = _set____db54di;
      };
      IIRFilter3.prototype.get_T_1mhr57_k$ = function() {
        return this.T_1;
      };
      IIRFilter3.prototype.get_delta_iq7nnz_k$ = function() {
        return this.delta_1;
      };
      IIRFilter3.prototype.get_f1_knto18_k$ = function() {
        return this.f1__1;
      };
      IIRFilter3.prototype.get_f2_knto17_k$ = function() {
        return this.f2__1;
      };
      IIRFilter3.prototype.initialize = function() {
        var inductionVariable = 0;
        var last = this.sections_1.get_size_woubt6_k$() - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            this.sections_1.get_fkrdnv_k$(i).initialize_oabr29_k$();
          } while (inductionVariable <= last);
      };
      IIRFilter3.prototype.getDelta = function() {
        return this.delta_1;
      };
      IIRFilter3.prototype.getLowCorner = function() {
        return this.f1__1;
      };
      IIRFilter3.prototype.getHighCorner = function() {
        return this.f2__1;
      };
      IIRFilter3.prototype.filterNextSample = function(x4) {
        var retval = this.sections_1.get_fkrdnv_k$(0).filterSingle(x4);
        var inductionVariable = 1;
        var last = this.sections_1.get_size_woubt6_k$() - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            retval = this.sections_1.get_fkrdnv_k$(i).filterSingle(retval);
          } while (!(i === last));
        return retval;
      };
      IIRFilter3.prototype.filter = function(x4, y4) {
        var inductionVariable = 0;
        var last = y4.length - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            y4[i] = 0;
          } while (inductionVariable <= last);
        this.sections_1.get_fkrdnv_k$(0).filter(x4, y4);
        var inductionVariable_0 = 1;
        var last_0 = this.sections_1.get_size_woubt6_k$() - 1 | 0;
        if (inductionVariable_0 <= last_0)
          do {
            var i_0 = inductionVariable_0;
            inductionVariable_0 = inductionVariable_0 + 1 | 0;
            this.sections_1.get_fkrdnv_k$(i_0).filter(y4, y4);
          } while (!(i_0 === last_0));
      };
      IIRFilter3.prototype.filterInPlace = function(x4) {
        var tmp0_iterator = this.sections_1.iterator_jk1svi_k$();
        while (tmp0_iterator.hasNext_bitz1p_k$()) {
          var section = tmp0_iterator.next_20eer_k$();
          section.filter(x4, x4);
        }
      };
      IIRFilter3.prototype.evaluate = function(Omega) {
        var ejOmega = Companion_getInstance_8().exp(new Complex2(0, -Omega));
        return this.T_1.evaluateComplex(ejOmega);
      };
      IIRFilter3.prototype.groupDelay = function(Omega) {
        return this.T_1.discreteTimeGroupDelay(Omega);
      };
      IIRFilter3.prototype.toString = function() {
        var out = "IIR Filter:\n";
        var inductionVariable = 0;
        var last = this.sections_1.get_size_woubt6_k$() - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            out = out + ("\n  Section " + i + "\n");
            out = out + this.sections_1.get_fkrdnv_k$(i);
            out = out + new Char(_Char___init__impl__6a9atx(10));
          } while (inductionVariable <= last);
        return out;
      };
      IIRFilter3.$metadata$ = classMeta("IIRFilter");
      Object.defineProperty(IIRFilter3.prototype, "sections", {
        configurable: true,
        get: IIRFilter3.prototype.get_sections_g4k5xl_k$,
        set: IIRFilter3.prototype.set_sections_7e6foy_k$
      });
      Object.defineProperty(IIRFilter3.prototype, "T", {
        configurable: true,
        get: IIRFilter3.prototype.get_T_1mhr57_k$,
        set: IIRFilter3.prototype.set_T_dortqy_k$
      });
      Object.defineProperty(IIRFilter3.prototype, "delta", {
        configurable: true,
        get: IIRFilter3.prototype.get_delta_iq7nnz_k$
      });
      Object.defineProperty(IIRFilter3.prototype, "f1", {
        configurable: true,
        get: IIRFilter3.prototype.get_f1_knto18_k$
      });
      Object.defineProperty(IIRFilter3.prototype, "f2", {
        configurable: true,
        get: IIRFilter3.prototype.get_f2_knto17_k$
      });
      var PassbandType_LOWPASS_instance;
      var PassbandType_BANDPASS_instance;
      var PassbandType_HIGHPASS_instance;
      function values() {
        return [PassbandType_LOWPASS_getInstance(), PassbandType_BANDPASS_getInstance(), PassbandType_HIGHPASS_getInstance()];
      }
      function valueOf(value) {
        switch (value) {
          case "LOWPASS":
            return PassbandType_LOWPASS_getInstance();
          case "BANDPASS":
            return PassbandType_BANDPASS_getInstance();
          case "HIGHPASS":
            return PassbandType_HIGHPASS_getInstance();
          default:
            PassbandType_initEntries();
            THROW_ISE();
            break;
        }
      }
      var PassbandType_entriesInitialized;
      function PassbandType_initEntries() {
        if (PassbandType_entriesInitialized)
          return Unit_getInstance();
        PassbandType_entriesInitialized = true;
        PassbandType_LOWPASS_instance = new PassbandType2("LOWPASS", 0);
        PassbandType_BANDPASS_instance = new PassbandType2("BANDPASS", 1);
        PassbandType_HIGHPASS_instance = new PassbandType2("HIGHPASS", 2);
      }
      function PassbandType2(name, ordinal2) {
        Enum.call(this, name, ordinal2);
      }
      PassbandType2.$metadata$ = classMeta("PassbandType", void 0, void 0, void 0, void 0, Enum.prototype);
      Object.defineProperty(PassbandType2.prototype, "name", {
        configurable: true,
        get: PassbandType2.prototype.get_name_woqyms_k$
      });
      Object.defineProperty(PassbandType2.prototype, "ordinal", {
        configurable: true,
        get: PassbandType2.prototype.get_ordinal_ip24qg_k$
      });
      function PassbandType_LOWPASS_getInstance() {
        PassbandType_initEntries();
        return PassbandType_LOWPASS_instance;
      }
      function PassbandType_BANDPASS_getInstance() {
        PassbandType_initEntries();
        return PassbandType_BANDPASS_instance;
      }
      function PassbandType_HIGHPASS_getInstance() {
        PassbandType_initEntries();
        return PassbandType_HIGHPASS_instance;
      }
      function SecondOrderSection(b02, b12, b22, a1, a22) {
        this.b0__1 = b02;
        this.b1__1 = b12;
        this.b2__1 = b22;
        this.a1__1 = a1;
        this.a2__1 = a22;
        this.s1__1 = 0;
        this.s2__1 = 0;
        this.initialize_oabr29_k$();
      }
      SecondOrderSection.prototype.set_b0_6y8ao7_k$ = function(_set____db54di) {
        this.b0__1 = _set____db54di;
      };
      SecondOrderSection.prototype.get_b0_knto4p_k$ = function() {
        return this.b0__1;
      };
      SecondOrderSection.prototype.set_b1_15dfpi_k$ = function(_set____db54di) {
        this.b1__1 = _set____db54di;
      };
      SecondOrderSection.prototype.get_b1_knto4o_k$ = function() {
        return this.b1__1;
      };
      SecondOrderSection.prototype.set_b2_4nhf97_k$ = function(_set____db54di) {
        this.b2__1 = _set____db54di;
      };
      SecondOrderSection.prototype.get_b2_knto4n_k$ = function() {
        return this.b2__1;
      };
      SecondOrderSection.prototype.set_a1_w3e2cb_k$ = function(_set____db54di) {
        this.a1__1 = _set____db54di;
      };
      SecondOrderSection.prototype.get_a1_knto5j_k$ = function() {
        return this.a1__1;
      };
      SecondOrderSection.prototype.set_a2_x4v4o4_k$ = function(_set____db54di) {
        this.a2__1 = _set____db54di;
      };
      SecondOrderSection.prototype.get_a2_knto5i_k$ = function() {
        return this.a2__1;
      };
      SecondOrderSection.prototype.set_s1_1yjh8p_k$ = function(_set____db54di) {
        this.s1__1 = _set____db54di;
      };
      SecondOrderSection.prototype.get_s1_kntnq1_k$ = function() {
        return this.s1__1;
      };
      SecondOrderSection.prototype.set_s2_7rec7e_k$ = function(_set____db54di) {
        this.s2__1 = _set____db54di;
      };
      SecondOrderSection.prototype.get_s2_kntnq0_k$ = function() {
        return this.s2__1;
      };
      SecondOrderSection.prototype.initialize_oabr29_k$ = function() {
        this.s1__1 = 0;
        this.s2__1 = 0;
      };
      SecondOrderSection.prototype.filterSingle = function(x4) {
        var s0 = x4 - this.a1__1 * this.s1__1 - this.a2__1 * this.s2__1;
        var retval = this.b0__1 * s0 + this.b1__1 * this.s1__1 + this.b2__1 * this.s2__1;
        this.s2__1 = this.s1__1;
        this.s1__1 = s0;
        return retval;
      };
      SecondOrderSection.prototype.filter = function(x4, y4) {
        var s0;
        var tmp$ret$0;
        {
          var tmp0_min = x4.length;
          var tmp1_min = y4.length;
          tmp$ret$0 = Math.min(tmp0_min, tmp1_min);
        }
        var n2 = tmp$ret$0;
        var inductionVariable = 0;
        var last = n2 - 1 | 0;
        if (inductionVariable <= last)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            s0 = x4[i] - this.a1__1 * this.s1__1 - this.a2__1 * this.s2__1;
            y4[i] = this.b0__1 * s0 + this.b1__1 * this.s1__1 + this.b2__1 * this.s2__1;
            this.s2__1 = this.s1__1;
            this.s1__1 = s0;
          } while (!(i === last));
      };
      SecondOrderSection.prototype.toString = function() {
        var out = "  coefficients: \n";
        out = out + ("    b0: " + this.b0__1 + new Char(_Char___init__impl__6a9atx(10)));
        out = out + ("    b1: " + this.b1__1 + new Char(_Char___init__impl__6a9atx(10)));
        out = out + ("    b2: " + this.b2__1 + new Char(_Char___init__impl__6a9atx(10)));
        out = out + new Char(_Char___init__impl__6a9atx(10));
        out = out + ("    a1: " + this.a1__1 + new Char(_Char___init__impl__6a9atx(10)));
        out = out + ("    a2: " + this.a2__1 + new Char(_Char___init__impl__6a9atx(10)));
        out = out + "\n  states:  \n";
        out = out + ("    s1: " + this.s1__1 + new Char(_Char___init__impl__6a9atx(10)));
        out = out + ("    s2: " + this.s2__1 + new Char(_Char___init__impl__6a9atx(10)));
        return out;
      };
      SecondOrderSection.$metadata$ = classMeta("SecondOrderSection");
      function factorial($this, n2) {
        var retval = 1;
        if (n2 > 1) {
          var inductionVariable = 2;
          if (inductionVariable <= n2)
            do {
              var i = inductionVariable;
              inductionVariable = inductionVariable + 1 | 0;
              retval = imul(retval, i);
            } while (!(i === n2));
        }
        return retval;
      }
      function ThiranAllpass2(N, D2) {
        Allpass2.call(this, N);
        var a3 = new Float64Array(N + 1 | 0);
        a3[0] = 1;
        var inductionVariable = 1;
        if (inductionVariable <= N)
          do {
            var i = inductionVariable;
            inductionVariable = inductionVariable + 1 | 0;
            var prod = 1;
            var inductionVariable_0 = 0;
            if (inductionVariable_0 <= N)
              do {
                var n2 = inductionVariable_0;
                inductionVariable_0 = inductionVariable_0 + 1 | 0;
                prod = prod * ((D2 - N + n2) / (D2 - N + i + n2));
              } while (!(n2 === N));
            var tmp$ret$0;
            {
              var tmp0_pow = i;
              tmp$ret$0 = Math.pow(-1, tmp0_pow);
            }
            a3[i] = tmp$ret$0 * (factorial(this, N) / imul(factorial(this, N - i | 0), factorial(this, i)) | 0) * prod;
          } while (!(i === N));
        var P = Polynomial_ofArray(a3);
        this.k = P.reflectionCoefficients();
        this.constructRationalRepresentation();
      }
      ThiranAllpass2.$metadata$ = classMeta("ThiranAllpass", void 0, void 0, void 0, void 0, Allpass2.prototype);
      function $jsExportAll$(_2) {
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        $com$oregondsp$signalProcessing.HammingWindow = HammingWindow2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        $com$oregondsp$signalProcessing.HanningWindow = HanningWindow2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        $com$oregondsp$signalProcessing.Sequence = Sequence2;
        $com$oregondsp$signalProcessing.Sequence.Sequence_fromArray = Sequence_fromArray;
        $com$oregondsp$signalProcessing.Sequence.Sequence_ofSize = Sequence_ofSize;
        Object.defineProperty($com$oregondsp$signalProcessing.Sequence, "Companion", {
          configurable: true,
          get: Companion_getInstance
        });
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        $com$oregondsp$signalProcessing.Window = Window2;
        $com$oregondsp$signalProcessing.Window.Window_fromArray = Window_fromArray;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$fft = $com$oregondsp$signalProcessing.fft || ($com$oregondsp$signalProcessing.fft = {});
        $com$oregondsp$signalProcessing$fft.CDFT = CDFT2;
        $com$oregondsp$signalProcessing$fft.CDFT.CDFT_ofLogSize = CDFT_ofLogSize;
        $com$oregondsp$signalProcessing$fft.CDFT.CDFT_ofArrays = CDFT_ofArrays;
        Object.defineProperty($com$oregondsp$signalProcessing$fft.CDFT, "Companion", {
          configurable: true,
          get: Companion_getInstance_0
        });
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$fft = $com$oregondsp$signalProcessing.fft || ($com$oregondsp$signalProcessing.fft = {});
        $com$oregondsp$signalProcessing$fft.RDFT = RDFT2;
        Object.defineProperty($com$oregondsp$signalProcessing$fft.RDFT, "Companion", {
          configurable: true,
          get: Companion_getInstance_4
        });
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        $com$oregondsp$signalProcessing$filter.LagrangePolynomial = LagrangePolynomial2;
        Object.defineProperty($com$oregondsp$signalProcessing$filter.LagrangePolynomial, "Companion", {
          configurable: true,
          get: Companion_getInstance_5
        });
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        $com$oregondsp$signalProcessing$filter.Polynomial = Polynomial2;
        $com$oregondsp$signalProcessing$filter.Polynomial.Polynomial_ofArray = Polynomial_ofArray;
        $com$oregondsp$signalProcessing$filter.Polynomial.Polynomial_ofPolynomial = Polynomial_ofPolynomial;
        $com$oregondsp$signalProcessing$filter.Polynomial.Polynomial_ofDegree = Polynomial_ofDegree;
        $com$oregondsp$signalProcessing$filter.Polynomial.Polynomial_ofConstant = Polynomial_ofConstant;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        $com$oregondsp$signalProcessing$filter.Rational = Rational2;
        $com$oregondsp$signalProcessing$filter.Rational.Rational_ofArrays = Rational_ofArrays;
        $com$oregondsp$signalProcessing$filter.Rational.Rational_ofPolynomials = Rational_ofPolynomials;
        $com$oregondsp$signalProcessing$filter.Rational.Rational_ofRational = Rational_ofRational;
        $com$oregondsp$signalProcessing$filter.Rational.Rational_ofConstant = Rational_ofConstant;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        $com$oregondsp$signalProcessing$filter$fir.ComplexAnalyticSignal = ComplexAnalyticSignal2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        $com$oregondsp$signalProcessing$filter$fir.Interpolator = Interpolator2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        $com$oregondsp$signalProcessing$filter$fir.OverlapAdd = OverlapAdd2;
        $com$oregondsp$signalProcessing$filter$fir.OverlapAdd.OverlapAdd_ofArray = OverlapAdd_ofArray;
        $com$oregondsp$signalProcessing$filter$fir.OverlapAdd.OverlapAdd_ofArrayOverlapAdd = OverlapAdd_ofArrayOverlapAdd;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.CenteredDifferentiator = CenteredDifferentiator2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.CenteredHilbertTransform = CenteredHilbertTransform2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.EquirippleBandpass = EquirippleBandpass2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.EquirippleFIRFilter = EquirippleFIRFilter2;
        Object.defineProperty($com$oregondsp$signalProcessing$filter$fir$equiripple.EquirippleFIRFilter, "Companion", {
          configurable: true,
          get: Companion_getInstance_7
        });
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.EquirippleHalfBand = EquirippleHalfBand2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.EquirippleHighpass = EquirippleHighpass2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.EquirippleLowpass = EquirippleLowpass2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.FIRTypeI = FIRTypeI2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.FIRTypeII = FIRTypeII2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.FIRTypeIII = FIRTypeIII2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.FIRTypeIV = FIRTypeIV;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.StaggeredDifferentiator = StaggeredDifferentiator2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$fir = $com$oregondsp$signalProcessing$filter.fir || ($com$oregondsp$signalProcessing$filter.fir = {});
        var $com$oregondsp$signalProcessing$filter$fir$equiripple = $com$oregondsp$signalProcessing$filter$fir.equiripple || ($com$oregondsp$signalProcessing$filter$fir.equiripple = {});
        $com$oregondsp$signalProcessing$filter$fir$equiripple.StaggeredHilbertTranform = StaggeredHilbertTranform2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$iir = $com$oregondsp$signalProcessing$filter.iir || ($com$oregondsp$signalProcessing$filter.iir = {});
        $com$oregondsp$signalProcessing$filter$iir.Allpass = Allpass2;
        $com$oregondsp$signalProcessing$filter$iir.Allpass.Allpass_ofPolynomial = Allpass_ofPolynomial;
        $com$oregondsp$signalProcessing$filter$iir.Allpass.Allpass_ofArray = Allpass_ofArray;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$iir = $com$oregondsp$signalProcessing$filter.iir || ($com$oregondsp$signalProcessing$filter.iir = {});
        $com$oregondsp$signalProcessing$filter$iir.AnalogPrototype = AnalogPrototype2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$iir = $com$oregondsp$signalProcessing$filter.iir || ($com$oregondsp$signalProcessing$filter.iir = {});
        $com$oregondsp$signalProcessing$filter$iir.Butterworth = Butterworth2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$iir = $com$oregondsp$signalProcessing$filter.iir || ($com$oregondsp$signalProcessing$filter.iir = {});
        $com$oregondsp$signalProcessing$filter$iir.ChebyshevI = ChebyshevI2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$iir = $com$oregondsp$signalProcessing$filter.iir || ($com$oregondsp$signalProcessing$filter.iir = {});
        $com$oregondsp$signalProcessing$filter$iir.ChebyshevII = ChebyshevII2;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$iir = $com$oregondsp$signalProcessing$filter.iir || ($com$oregondsp$signalProcessing$filter.iir = {});
        $com$oregondsp$signalProcessing$filter$iir.Complex = Complex2;
        $com$oregondsp$signalProcessing$filter$iir.Complex.Complex_fromReal = Complex_fromReal;
        Object.defineProperty($com$oregondsp$signalProcessing$filter$iir.Complex, "Companion", {
          configurable: true,
          get: Companion_getInstance_8
        });
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$iir = $com$oregondsp$signalProcessing$filter.iir || ($com$oregondsp$signalProcessing$filter.iir = {});
        $com$oregondsp$signalProcessing$filter$iir.IIRFilter = IIRFilter3;
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$iir = $com$oregondsp$signalProcessing$filter.iir || ($com$oregondsp$signalProcessing$filter.iir = {});
        $com$oregondsp$signalProcessing$filter$iir.PassbandType = PassbandType2;
        $com$oregondsp$signalProcessing$filter$iir.PassbandType.values = values;
        $com$oregondsp$signalProcessing$filter$iir.PassbandType.valueOf = valueOf;
        Object.defineProperty($com$oregondsp$signalProcessing$filter$iir.PassbandType, "LOWPASS", {
          configurable: true,
          get: PassbandType_LOWPASS_getInstance
        });
        Object.defineProperty($com$oregondsp$signalProcessing$filter$iir.PassbandType, "BANDPASS", {
          configurable: true,
          get: PassbandType_BANDPASS_getInstance
        });
        Object.defineProperty($com$oregondsp$signalProcessing$filter$iir.PassbandType, "HIGHPASS", {
          configurable: true,
          get: PassbandType_HIGHPASS_getInstance
        });
        var $com = _2.com || (_2.com = {});
        var $com$oregondsp = $com.oregondsp || ($com.oregondsp = {});
        var $com$oregondsp$signalProcessing = $com$oregondsp.signalProcessing || ($com$oregondsp.signalProcessing = {});
        var $com$oregondsp$signalProcessing$filter = $com$oregondsp$signalProcessing.filter || ($com$oregondsp$signalProcessing.filter = {});
        var $com$oregondsp$signalProcessing$filter$iir = $com$oregondsp$signalProcessing$filter.iir || ($com$oregondsp$signalProcessing$filter.iir = {});
        $com$oregondsp$signalProcessing$filter$iir.ThiranAllpass = ThiranAllpass2;
      }
      $jsExportAll$(_);
      return _;
    });
  }
});

// node_modules/jszip/dist/jszip.min.js
var require_jszip_min = __commonJS({
  "node_modules/jszip/dist/jszip.min.js"(exports, module) {
    !function(e) {
      if ("object" == typeof exports && "undefined" != typeof module)
        module.exports = e();
      else if ("function" == typeof define && define.amd)
        define([], e);
      else {
        ("undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this).JSZip = e();
      }
    }(function() {
      return function s3(a3, o, h) {
        function u(r, e3) {
          if (!o[r]) {
            if (!a3[r]) {
              var t = "function" == typeof __require && __require;
              if (!e3 && t)
                return t(r, true);
              if (l2)
                return l2(r, true);
              var n2 = new Error("Cannot find module '" + r + "'");
              throw n2.code = "MODULE_NOT_FOUND", n2;
            }
            var i = o[r] = { exports: {} };
            a3[r][0].call(i.exports, function(e4) {
              var t4 = a3[r][1][e4];
              return u(t4 || e4);
            }, i, i.exports, s3, a3, o, h);
          }
          return o[r].exports;
        }
        for (var l2 = "function" == typeof __require && __require, e = 0; e < h.length; e++)
          u(h[e]);
        return u;
      }({ 1: [function(e, t, r) {
        "use strict";
        var d = e("./utils"), c5 = e("./support"), p = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
        r.encode = function(e3) {
          for (var t4, r2, n2, i, s3, a3, o, h = [], u = 0, l2 = e3.length, f = l2, c6 = "string" !== d.getTypeOf(e3); u < e3.length; )
            f = l2 - u, n2 = c6 ? (t4 = e3[u++], r2 = u < l2 ? e3[u++] : 0, u < l2 ? e3[u++] : 0) : (t4 = e3.charCodeAt(u++), r2 = u < l2 ? e3.charCodeAt(u++) : 0, u < l2 ? e3.charCodeAt(u++) : 0), i = t4 >> 2, s3 = (3 & t4) << 4 | r2 >> 4, a3 = 1 < f ? (15 & r2) << 2 | n2 >> 6 : 64, o = 2 < f ? 63 & n2 : 64, h.push(p.charAt(i) + p.charAt(s3) + p.charAt(a3) + p.charAt(o));
          return h.join("");
        }, r.decode = function(e3) {
          var t4, r2, n2, i, s3, a3, o = 0, h = 0, u = "data:";
          if (e3.substr(0, u.length) === u)
            throw new Error("Invalid base64 input, it looks like a data url.");
          var l2, f = 3 * (e3 = e3.replace(/[^A-Za-z0-9+/=]/g, "")).length / 4;
          if (e3.charAt(e3.length - 1) === p.charAt(64) && f--, e3.charAt(e3.length - 2) === p.charAt(64) && f--, f % 1 != 0)
            throw new Error("Invalid base64 input, bad content length.");
          for (l2 = c5.uint8array ? new Uint8Array(0 | f) : new Array(0 | f); o < e3.length; )
            t4 = p.indexOf(e3.charAt(o++)) << 2 | (i = p.indexOf(e3.charAt(o++))) >> 4, r2 = (15 & i) << 4 | (s3 = p.indexOf(e3.charAt(o++))) >> 2, n2 = (3 & s3) << 6 | (a3 = p.indexOf(e3.charAt(o++))), l2[h++] = t4, 64 !== s3 && (l2[h++] = r2), 64 !== a3 && (l2[h++] = n2);
          return l2;
        };
      }, { "./support": 30, "./utils": 32 }], 2: [function(e, t, r) {
        "use strict";
        var n2 = e("./external"), i = e("./stream/DataWorker"), s3 = e("./stream/Crc32Probe"), a3 = e("./stream/DataLengthProbe");
        function o(e3, t4, r2, n3, i2) {
          this.compressedSize = e3, this.uncompressedSize = t4, this.crc32 = r2, this.compression = n3, this.compressedContent = i2;
        }
        o.prototype = { getContentWorker: function() {
          var e3 = new i(n2.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a3("data_length")), t4 = this;
          return e3.on("end", function() {
            if (this.streamInfo.data_length !== t4.uncompressedSize)
              throw new Error("Bug : uncompressed data size mismatch");
          }), e3;
        }, getCompressedWorker: function() {
          return new i(n2.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize", this.compressedSize).withStreamInfo("uncompressedSize", this.uncompressedSize).withStreamInfo("crc32", this.crc32).withStreamInfo("compression", this.compression);
        } }, o.createWorkerFrom = function(e3, t4, r2) {
          return e3.pipe(new s3()).pipe(new a3("uncompressedSize")).pipe(t4.compressWorker(r2)).pipe(new a3("compressedSize")).withStreamInfo("compression", t4);
        }, t.exports = o;
      }, { "./external": 6, "./stream/Crc32Probe": 25, "./stream/DataLengthProbe": 26, "./stream/DataWorker": 27 }], 3: [function(e, t, r) {
        "use strict";
        var n2 = e("./stream/GenericWorker");
        r.STORE = { magic: "\0\0", compressWorker: function() {
          return new n2("STORE compression");
        }, uncompressWorker: function() {
          return new n2("STORE decompression");
        } }, r.DEFLATE = e("./flate");
      }, { "./flate": 7, "./stream/GenericWorker": 28 }], 4: [function(e, t, r) {
        "use strict";
        var n2 = e("./utils");
        var o = function() {
          for (var e3, t4 = [], r2 = 0; r2 < 256; r2++) {
            e3 = r2;
            for (var n3 = 0; n3 < 8; n3++)
              e3 = 1 & e3 ? 3988292384 ^ e3 >>> 1 : e3 >>> 1;
            t4[r2] = e3;
          }
          return t4;
        }();
        t.exports = function(e3, t4) {
          return void 0 !== e3 && e3.length ? "string" !== n2.getTypeOf(e3) ? function(e4, t5, r2, n3) {
            var i = o, s3 = n3 + r2;
            e4 ^= -1;
            for (var a3 = n3; a3 < s3; a3++)
              e4 = e4 >>> 8 ^ i[255 & (e4 ^ t5[a3])];
            return -1 ^ e4;
          }(0 | t4, e3, e3.length, 0) : function(e4, t5, r2, n3) {
            var i = o, s3 = n3 + r2;
            e4 ^= -1;
            for (var a3 = n3; a3 < s3; a3++)
              e4 = e4 >>> 8 ^ i[255 & (e4 ^ t5.charCodeAt(a3))];
            return -1 ^ e4;
          }(0 | t4, e3, e3.length, 0) : 0;
        };
      }, { "./utils": 32 }], 5: [function(e, t, r) {
        "use strict";
        r.base64 = false, r.binary = false, r.dir = false, r.createFolders = true, r.date = null, r.compression = null, r.compressionOptions = null, r.comment = null, r.unixPermissions = null, r.dosPermissions = null;
      }, {}], 6: [function(e, t, r) {
        "use strict";
        var n2 = null;
        n2 = "undefined" != typeof Promise ? Promise : e("lie"), t.exports = { Promise: n2 };
      }, { lie: 37 }], 7: [function(e, t, r) {
        "use strict";
        var n2 = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Uint32Array, i = e("pako"), s3 = e("./utils"), a3 = e("./stream/GenericWorker"), o = n2 ? "uint8array" : "array";
        function h(e3, t4) {
          a3.call(this, "FlateWorker/" + e3), this._pako = null, this._pakoAction = e3, this._pakoOptions = t4, this.meta = {};
        }
        r.magic = "\b\0", s3.inherits(h, a3), h.prototype.processChunk = function(e3) {
          this.meta = e3.meta, null === this._pako && this._createPako(), this._pako.push(s3.transformTo(o, e3.data), false);
        }, h.prototype.flush = function() {
          a3.prototype.flush.call(this), null === this._pako && this._createPako(), this._pako.push([], true);
        }, h.prototype.cleanUp = function() {
          a3.prototype.cleanUp.call(this), this._pako = null;
        }, h.prototype._createPako = function() {
          this._pako = new i[this._pakoAction]({ raw: true, level: this._pakoOptions.level || -1 });
          var t4 = this;
          this._pako.onData = function(e3) {
            t4.push({ data: e3, meta: t4.meta });
          };
        }, r.compressWorker = function(e3) {
          return new h("Deflate", e3);
        }, r.uncompressWorker = function() {
          return new h("Inflate", {});
        };
      }, { "./stream/GenericWorker": 28, "./utils": 32, pako: 38 }], 8: [function(e, t, r) {
        "use strict";
        function A5(e3, t4) {
          var r2, n3 = "";
          for (r2 = 0; r2 < t4; r2++)
            n3 += String.fromCharCode(255 & e3), e3 >>>= 8;
          return n3;
        }
        function n2(e3, t4, r2, n3, i2, s4) {
          var a3, o, h = e3.file, u = e3.compression, l2 = s4 !== O.utf8encode, f = I.transformTo("string", s4(h.name)), c5 = I.transformTo("string", O.utf8encode(h.name)), d = h.comment, p = I.transformTo("string", s4(d)), m2 = I.transformTo("string", O.utf8encode(d)), _ = c5.length !== h.name.length, g = m2.length !== d.length, b = "", v = "", y4 = "", w = h.dir, k2 = h.date, x4 = { crc32: 0, compressedSize: 0, uncompressedSize: 0 };
          t4 && !r2 || (x4.crc32 = e3.crc32, x4.compressedSize = e3.compressedSize, x4.uncompressedSize = e3.uncompressedSize);
          var S = 0;
          t4 && (S |= 8), l2 || !_ && !g || (S |= 2048);
          var z = 0, C2 = 0;
          w && (z |= 16), "UNIX" === i2 ? (C2 = 798, z |= function(e4, t5) {
            var r3 = e4;
            return e4 || (r3 = t5 ? 16893 : 33204), (65535 & r3) << 16;
          }(h.unixPermissions, w)) : (C2 = 20, z |= function(e4) {
            return 63 & (e4 || 0);
          }(h.dosPermissions)), a3 = k2.getUTCHours(), a3 <<= 6, a3 |= k2.getUTCMinutes(), a3 <<= 5, a3 |= k2.getUTCSeconds() / 2, o = k2.getUTCFullYear() - 1980, o <<= 4, o |= k2.getUTCMonth() + 1, o <<= 5, o |= k2.getUTCDate(), _ && (v = A5(1, 1) + A5(B2(f), 4) + c5, b += "up" + A5(v.length, 2) + v), g && (y4 = A5(1, 1) + A5(B2(p), 4) + m2, b += "uc" + A5(y4.length, 2) + y4);
          var E2 = "";
          return E2 += "\n\0", E2 += A5(S, 2), E2 += u.magic, E2 += A5(a3, 2), E2 += A5(o, 2), E2 += A5(x4.crc32, 4), E2 += A5(x4.compressedSize, 4), E2 += A5(x4.uncompressedSize, 4), E2 += A5(f.length, 2), E2 += A5(b.length, 2), { fileRecord: R.LOCAL_FILE_HEADER + E2 + f + b, dirRecord: R.CENTRAL_FILE_HEADER + A5(C2, 2) + E2 + A5(p.length, 2) + "\0\0\0\0" + A5(z, 4) + A5(n3, 4) + f + b + p };
        }
        var I = e("../utils"), i = e("../stream/GenericWorker"), O = e("../utf8"), B2 = e("../crc32"), R = e("../signature");
        function s3(e3, t4, r2, n3) {
          i.call(this, "ZipFileWorker"), this.bytesWritten = 0, this.zipComment = t4, this.zipPlatform = r2, this.encodeFileName = n3, this.streamFiles = e3, this.accumulate = false, this.contentBuffer = [], this.dirRecords = [], this.currentSourceOffset = 0, this.entriesCount = 0, this.currentFile = null, this._sources = [];
        }
        I.inherits(s3, i), s3.prototype.push = function(e3) {
          var t4 = e3.meta.percent || 0, r2 = this.entriesCount, n3 = this._sources.length;
          this.accumulate ? this.contentBuffer.push(e3) : (this.bytesWritten += e3.data.length, i.prototype.push.call(this, { data: e3.data, meta: { currentFile: this.currentFile, percent: r2 ? (t4 + 100 * (r2 - n3 - 1)) / r2 : 100 } }));
        }, s3.prototype.openedSource = function(e3) {
          this.currentSourceOffset = this.bytesWritten, this.currentFile = e3.file.name;
          var t4 = this.streamFiles && !e3.file.dir;
          if (t4) {
            var r2 = n2(e3, t4, false, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
            this.push({ data: r2.fileRecord, meta: { percent: 0 } });
          } else
            this.accumulate = true;
        }, s3.prototype.closedSource = function(e3) {
          this.accumulate = false;
          var t4 = this.streamFiles && !e3.file.dir, r2 = n2(e3, t4, true, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
          if (this.dirRecords.push(r2.dirRecord), t4)
            this.push({ data: function(e4) {
              return R.DATA_DESCRIPTOR + A5(e4.crc32, 4) + A5(e4.compressedSize, 4) + A5(e4.uncompressedSize, 4);
            }(e3), meta: { percent: 100 } });
          else
            for (this.push({ data: r2.fileRecord, meta: { percent: 0 } }); this.contentBuffer.length; )
              this.push(this.contentBuffer.shift());
          this.currentFile = null;
        }, s3.prototype.flush = function() {
          for (var e3 = this.bytesWritten, t4 = 0; t4 < this.dirRecords.length; t4++)
            this.push({ data: this.dirRecords[t4], meta: { percent: 100 } });
          var r2 = this.bytesWritten - e3, n3 = function(e4, t5, r3, n4, i2) {
            var s4 = I.transformTo("string", i2(n4));
            return R.CENTRAL_DIRECTORY_END + "\0\0\0\0" + A5(e4, 2) + A5(e4, 2) + A5(t5, 4) + A5(r3, 4) + A5(s4.length, 2) + s4;
          }(this.dirRecords.length, r2, e3, this.zipComment, this.encodeFileName);
          this.push({ data: n3, meta: { percent: 100 } });
        }, s3.prototype.prepareNextSource = function() {
          this.previous = this._sources.shift(), this.openedSource(this.previous.streamInfo), this.isPaused ? this.previous.pause() : this.previous.resume();
        }, s3.prototype.registerPrevious = function(e3) {
          this._sources.push(e3);
          var t4 = this;
          return e3.on("data", function(e4) {
            t4.processChunk(e4);
          }), e3.on("end", function() {
            t4.closedSource(t4.previous.streamInfo), t4._sources.length ? t4.prepareNextSource() : t4.end();
          }), e3.on("error", function(e4) {
            t4.error(e4);
          }), this;
        }, s3.prototype.resume = function() {
          return !!i.prototype.resume.call(this) && (!this.previous && this._sources.length ? (this.prepareNextSource(), true) : this.previous || this._sources.length || this.generatedError ? void 0 : (this.end(), true));
        }, s3.prototype.error = function(e3) {
          var t4 = this._sources;
          if (!i.prototype.error.call(this, e3))
            return false;
          for (var r2 = 0; r2 < t4.length; r2++)
            try {
              t4[r2].error(e3);
            } catch (e4) {
            }
          return true;
        }, s3.prototype.lock = function() {
          i.prototype.lock.call(this);
          for (var e3 = this._sources, t4 = 0; t4 < e3.length; t4++)
            e3[t4].lock();
        }, t.exports = s3;
      }, { "../crc32": 4, "../signature": 23, "../stream/GenericWorker": 28, "../utf8": 31, "../utils": 32 }], 9: [function(e, t, r) {
        "use strict";
        var u = e("../compressions"), n2 = e("./ZipFileWorker");
        r.generateWorker = function(e3, a3, t4) {
          var o = new n2(a3.streamFiles, t4, a3.platform, a3.encodeFileName), h = 0;
          try {
            e3.forEach(function(e4, t5) {
              h++;
              var r2 = function(e6, t6) {
                var r3 = e6 || t6, n4 = u[r3];
                if (!n4)
                  throw new Error(r3 + " is not a valid compression method !");
                return n4;
              }(t5.options.compression, a3.compression), n3 = t5.options.compressionOptions || a3.compressionOptions || {}, i = t5.dir, s3 = t5.date;
              t5._compressWorker(r2, n3).withStreamInfo("file", { name: e4, dir: i, date: s3, comment: t5.comment || "", unixPermissions: t5.unixPermissions, dosPermissions: t5.dosPermissions }).pipe(o);
            }), o.entriesCount = h;
          } catch (e4) {
            o.error(e4);
          }
          return o;
        };
      }, { "../compressions": 3, "./ZipFileWorker": 8 }], 10: [function(e, t, r) {
        "use strict";
        function n2() {
          if (!(this instanceof n2))
            return new n2();
          if (arguments.length)
            throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");
          this.files = /* @__PURE__ */ Object.create(null), this.comment = null, this.root = "", this.clone = function() {
            var e3 = new n2();
            for (var t4 in this)
              "function" != typeof this[t4] && (e3[t4] = this[t4]);
            return e3;
          };
        }
        (n2.prototype = e("./object")).loadAsync = e("./load"), n2.support = e("./support"), n2.defaults = e("./defaults"), n2.version = "3.10.1", n2.loadAsync = function(e3, t4) {
          return new n2().loadAsync(e3, t4);
        }, n2.external = e("./external"), t.exports = n2;
      }, { "./defaults": 5, "./external": 6, "./load": 11, "./object": 15, "./support": 30 }], 11: [function(e, t, r) {
        "use strict";
        var u = e("./utils"), i = e("./external"), n2 = e("./utf8"), s3 = e("./zipEntries"), a3 = e("./stream/Crc32Probe"), l2 = e("./nodejsUtils");
        function f(n3) {
          return new i.Promise(function(e3, t4) {
            var r2 = n3.decompressed.getContentWorker().pipe(new a3());
            r2.on("error", function(e4) {
              t4(e4);
            }).on("end", function() {
              r2.streamInfo.crc32 !== n3.decompressed.crc32 ? t4(new Error("Corrupted zip : CRC32 mismatch")) : e3();
            }).resume();
          });
        }
        t.exports = function(e3, o) {
          var h = this;
          return o = u.extend(o || {}, { base64: false, checkCRC32: false, optimizedBinaryString: false, createFolders: false, decodeFileName: n2.utf8decode }), l2.isNode && l2.isStream(e3) ? i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")) : u.prepareContent("the loaded zip file", e3, true, o.optimizedBinaryString, o.base64).then(function(e4) {
            var t4 = new s3(o);
            return t4.load(e4), t4;
          }).then(function(e4) {
            var t4 = [i.Promise.resolve(e4)], r2 = e4.files;
            if (o.checkCRC32)
              for (var n3 = 0; n3 < r2.length; n3++)
                t4.push(f(r2[n3]));
            return i.Promise.all(t4);
          }).then(function(e4) {
            for (var t4 = e4.shift(), r2 = t4.files, n3 = 0; n3 < r2.length; n3++) {
              var i2 = r2[n3], s4 = i2.fileNameStr, a4 = u.resolve(i2.fileNameStr);
              h.file(a4, i2.decompressed, { binary: true, optimizedBinaryString: true, date: i2.date, dir: i2.dir, comment: i2.fileCommentStr.length ? i2.fileCommentStr : null, unixPermissions: i2.unixPermissions, dosPermissions: i2.dosPermissions, createFolders: o.createFolders }), i2.dir || (h.file(a4).unsafeOriginalName = s4);
            }
            return t4.zipComment.length && (h.comment = t4.zipComment), h;
          });
        };
      }, { "./external": 6, "./nodejsUtils": 14, "./stream/Crc32Probe": 25, "./utf8": 31, "./utils": 32, "./zipEntries": 33 }], 12: [function(e, t, r) {
        "use strict";
        var n2 = e("../utils"), i = e("../stream/GenericWorker");
        function s3(e3, t4) {
          i.call(this, "Nodejs stream input adapter for " + e3), this._upstreamEnded = false, this._bindStream(t4);
        }
        n2.inherits(s3, i), s3.prototype._bindStream = function(e3) {
          var t4 = this;
          (this._stream = e3).pause(), e3.on("data", function(e4) {
            t4.push({ data: e4, meta: { percent: 0 } });
          }).on("error", function(e4) {
            t4.isPaused ? this.generatedError = e4 : t4.error(e4);
          }).on("end", function() {
            t4.isPaused ? t4._upstreamEnded = true : t4.end();
          });
        }, s3.prototype.pause = function() {
          return !!i.prototype.pause.call(this) && (this._stream.pause(), true);
        }, s3.prototype.resume = function() {
          return !!i.prototype.resume.call(this) && (this._upstreamEnded ? this.end() : this._stream.resume(), true);
        }, t.exports = s3;
      }, { "../stream/GenericWorker": 28, "../utils": 32 }], 13: [function(e, t, r) {
        "use strict";
        var i = e("readable-stream").Readable;
        function n2(e3, t4, r2) {
          i.call(this, t4), this._helper = e3;
          var n3 = this;
          e3.on("data", function(e4, t5) {
            n3.push(e4) || n3._helper.pause(), r2 && r2(t5);
          }).on("error", function(e4) {
            n3.emit("error", e4);
          }).on("end", function() {
            n3.push(null);
          });
        }
        e("../utils").inherits(n2, i), n2.prototype._read = function() {
          this._helper.resume();
        }, t.exports = n2;
      }, { "../utils": 32, "readable-stream": 16 }], 14: [function(e, t, r) {
        "use strict";
        t.exports = { isNode: "undefined" != typeof Buffer, newBufferFrom: function(e3, t4) {
          if (Buffer.from && Buffer.from !== Uint8Array.from)
            return Buffer.from(e3, t4);
          if ("number" == typeof e3)
            throw new Error('The "data" argument must not be a number');
          return new Buffer(e3, t4);
        }, allocBuffer: function(e3) {
          if (Buffer.alloc)
            return Buffer.alloc(e3);
          var t4 = new Buffer(e3);
          return t4.fill(0), t4;
        }, isBuffer: function(e3) {
          return Buffer.isBuffer(e3);
        }, isStream: function(e3) {
          return e3 && "function" == typeof e3.on && "function" == typeof e3.pause && "function" == typeof e3.resume;
        } };
      }, {}], 15: [function(e, t, r) {
        "use strict";
        function s3(e3, t4, r2) {
          var n3, i2 = u.getTypeOf(t4), s4 = u.extend(r2 || {}, f);
          s4.date = s4.date || new Date(), null !== s4.compression && (s4.compression = s4.compression.toUpperCase()), "string" == typeof s4.unixPermissions && (s4.unixPermissions = parseInt(s4.unixPermissions, 8)), s4.unixPermissions && 16384 & s4.unixPermissions && (s4.dir = true), s4.dosPermissions && 16 & s4.dosPermissions && (s4.dir = true), s4.dir && (e3 = g(e3)), s4.createFolders && (n3 = _(e3)) && b.call(this, n3, true);
          var a4 = "string" === i2 && false === s4.binary && false === s4.base64;
          r2 && void 0 !== r2.binary || (s4.binary = !a4), (t4 instanceof c5 && 0 === t4.uncompressedSize || s4.dir || !t4 || 0 === t4.length) && (s4.base64 = false, s4.binary = true, t4 = "", s4.compression = "STORE", i2 = "string");
          var o2 = null;
          o2 = t4 instanceof c5 || t4 instanceof l2 ? t4 : p.isNode && p.isStream(t4) ? new m2(e3, t4) : u.prepareContent(e3, t4, s4.binary, s4.optimizedBinaryString, s4.base64);
          var h2 = new d(e3, o2, s4);
          this.files[e3] = h2;
        }
        var i = e("./utf8"), u = e("./utils"), l2 = e("./stream/GenericWorker"), a3 = e("./stream/StreamHelper"), f = e("./defaults"), c5 = e("./compressedObject"), d = e("./zipObject"), o = e("./generate"), p = e("./nodejsUtils"), m2 = e("./nodejs/NodejsStreamInputAdapter"), _ = function(e3) {
          "/" === e3.slice(-1) && (e3 = e3.substring(0, e3.length - 1));
          var t4 = e3.lastIndexOf("/");
          return 0 < t4 ? e3.substring(0, t4) : "";
        }, g = function(e3) {
          return "/" !== e3.slice(-1) && (e3 += "/"), e3;
        }, b = function(e3, t4) {
          return t4 = void 0 !== t4 ? t4 : f.createFolders, e3 = g(e3), this.files[e3] || s3.call(this, e3, null, { dir: true, createFolders: t4 }), this.files[e3];
        };
        function h(e3) {
          return "[object RegExp]" === Object.prototype.toString.call(e3);
        }
        var n2 = { load: function() {
          throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
        }, forEach: function(e3) {
          var t4, r2, n3;
          for (t4 in this.files)
            n3 = this.files[t4], (r2 = t4.slice(this.root.length, t4.length)) && t4.slice(0, this.root.length) === this.root && e3(r2, n3);
        }, filter: function(r2) {
          var n3 = [];
          return this.forEach(function(e3, t4) {
            r2(e3, t4) && n3.push(t4);
          }), n3;
        }, file: function(e3, t4, r2) {
          if (1 !== arguments.length)
            return e3 = this.root + e3, s3.call(this, e3, t4, r2), this;
          if (h(e3)) {
            var n3 = e3;
            return this.filter(function(e4, t5) {
              return !t5.dir && n3.test(e4);
            });
          }
          var i2 = this.files[this.root + e3];
          return i2 && !i2.dir ? i2 : null;
        }, folder: function(r2) {
          if (!r2)
            return this;
          if (h(r2))
            return this.filter(function(e4, t5) {
              return t5.dir && r2.test(e4);
            });
          var e3 = this.root + r2, t4 = b.call(this, e3), n3 = this.clone();
          return n3.root = t4.name, n3;
        }, remove: function(r2) {
          r2 = this.root + r2;
          var e3 = this.files[r2];
          if (e3 || ("/" !== r2.slice(-1) && (r2 += "/"), e3 = this.files[r2]), e3 && !e3.dir)
            delete this.files[r2];
          else
            for (var t4 = this.filter(function(e4, t5) {
              return t5.name.slice(0, r2.length) === r2;
            }), n3 = 0; n3 < t4.length; n3++)
              delete this.files[t4[n3].name];
          return this;
        }, generate: function() {
          throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
        }, generateInternalStream: function(e3) {
          var t4, r2 = {};
          try {
            if ((r2 = u.extend(e3 || {}, { streamFiles: false, compression: "STORE", compressionOptions: null, type: "", platform: "DOS", comment: null, mimeType: "application/zip", encodeFileName: i.utf8encode })).type = r2.type.toLowerCase(), r2.compression = r2.compression.toUpperCase(), "binarystring" === r2.type && (r2.type = "string"), !r2.type)
              throw new Error("No output type specified.");
            u.checkSupport(r2.type), "darwin" !== r2.platform && "freebsd" !== r2.platform && "linux" !== r2.platform && "sunos" !== r2.platform || (r2.platform = "UNIX"), "win32" === r2.platform && (r2.platform = "DOS");
            var n3 = r2.comment || this.comment || "";
            t4 = o.generateWorker(this, r2, n3);
          } catch (e4) {
            (t4 = new l2("error")).error(e4);
          }
          return new a3(t4, r2.type || "string", r2.mimeType);
        }, generateAsync: function(e3, t4) {
          return this.generateInternalStream(e3).accumulate(t4);
        }, generateNodeStream: function(e3, t4) {
          return (e3 = e3 || {}).type || (e3.type = "nodebuffer"), this.generateInternalStream(e3).toNodejsStream(t4);
        } };
        t.exports = n2;
      }, { "./compressedObject": 2, "./defaults": 5, "./generate": 9, "./nodejs/NodejsStreamInputAdapter": 12, "./nodejsUtils": 14, "./stream/GenericWorker": 28, "./stream/StreamHelper": 29, "./utf8": 31, "./utils": 32, "./zipObject": 35 }], 16: [function(e, t, r) {
        "use strict";
        t.exports = e("stream");
      }, { stream: void 0 }], 17: [function(e, t, r) {
        "use strict";
        var n2 = e("./DataReader");
        function i(e3) {
          n2.call(this, e3);
          for (var t4 = 0; t4 < this.data.length; t4++)
            e3[t4] = 255 & e3[t4];
        }
        e("../utils").inherits(i, n2), i.prototype.byteAt = function(e3) {
          return this.data[this.zero + e3];
        }, i.prototype.lastIndexOfSignature = function(e3) {
          for (var t4 = e3.charCodeAt(0), r2 = e3.charCodeAt(1), n3 = e3.charCodeAt(2), i2 = e3.charCodeAt(3), s3 = this.length - 4; 0 <= s3; --s3)
            if (this.data[s3] === t4 && this.data[s3 + 1] === r2 && this.data[s3 + 2] === n3 && this.data[s3 + 3] === i2)
              return s3 - this.zero;
          return -1;
        }, i.prototype.readAndCheckSignature = function(e3) {
          var t4 = e3.charCodeAt(0), r2 = e3.charCodeAt(1), n3 = e3.charCodeAt(2), i2 = e3.charCodeAt(3), s3 = this.readData(4);
          return t4 === s3[0] && r2 === s3[1] && n3 === s3[2] && i2 === s3[3];
        }, i.prototype.readData = function(e3) {
          if (this.checkOffset(e3), 0 === e3)
            return [];
          var t4 = this.data.slice(this.zero + this.index, this.zero + this.index + e3);
          return this.index += e3, t4;
        }, t.exports = i;
      }, { "../utils": 32, "./DataReader": 18 }], 18: [function(e, t, r) {
        "use strict";
        var n2 = e("../utils");
        function i(e3) {
          this.data = e3, this.length = e3.length, this.index = 0, this.zero = 0;
        }
        i.prototype = { checkOffset: function(e3) {
          this.checkIndex(this.index + e3);
        }, checkIndex: function(e3) {
          if (this.length < this.zero + e3 || e3 < 0)
            throw new Error("End of data reached (data length = " + this.length + ", asked index = " + e3 + "). Corrupted zip ?");
        }, setIndex: function(e3) {
          this.checkIndex(e3), this.index = e3;
        }, skip: function(e3) {
          this.setIndex(this.index + e3);
        }, byteAt: function() {
        }, readInt: function(e3) {
          var t4, r2 = 0;
          for (this.checkOffset(e3), t4 = this.index + e3 - 1; t4 >= this.index; t4--)
            r2 = (r2 << 8) + this.byteAt(t4);
          return this.index += e3, r2;
        }, readString: function(e3) {
          return n2.transformTo("string", this.readData(e3));
        }, readData: function() {
        }, lastIndexOfSignature: function() {
        }, readAndCheckSignature: function() {
        }, readDate: function() {
          var e3 = this.readInt(4);
          return new Date(Date.UTC(1980 + (e3 >> 25 & 127), (e3 >> 21 & 15) - 1, e3 >> 16 & 31, e3 >> 11 & 31, e3 >> 5 & 63, (31 & e3) << 1));
        } }, t.exports = i;
      }, { "../utils": 32 }], 19: [function(e, t, r) {
        "use strict";
        var n2 = e("./Uint8ArrayReader");
        function i(e3) {
          n2.call(this, e3);
        }
        e("../utils").inherits(i, n2), i.prototype.readData = function(e3) {
          this.checkOffset(e3);
          var t4 = this.data.slice(this.zero + this.index, this.zero + this.index + e3);
          return this.index += e3, t4;
        }, t.exports = i;
      }, { "../utils": 32, "./Uint8ArrayReader": 21 }], 20: [function(e, t, r) {
        "use strict";
        var n2 = e("./DataReader");
        function i(e3) {
          n2.call(this, e3);
        }
        e("../utils").inherits(i, n2), i.prototype.byteAt = function(e3) {
          return this.data.charCodeAt(this.zero + e3);
        }, i.prototype.lastIndexOfSignature = function(e3) {
          return this.data.lastIndexOf(e3) - this.zero;
        }, i.prototype.readAndCheckSignature = function(e3) {
          return e3 === this.readData(4);
        }, i.prototype.readData = function(e3) {
          this.checkOffset(e3);
          var t4 = this.data.slice(this.zero + this.index, this.zero + this.index + e3);
          return this.index += e3, t4;
        }, t.exports = i;
      }, { "../utils": 32, "./DataReader": 18 }], 21: [function(e, t, r) {
        "use strict";
        var n2 = e("./ArrayReader");
        function i(e3) {
          n2.call(this, e3);
        }
        e("../utils").inherits(i, n2), i.prototype.readData = function(e3) {
          if (this.checkOffset(e3), 0 === e3)
            return new Uint8Array(0);
          var t4 = this.data.subarray(this.zero + this.index, this.zero + this.index + e3);
          return this.index += e3, t4;
        }, t.exports = i;
      }, { "../utils": 32, "./ArrayReader": 17 }], 22: [function(e, t, r) {
        "use strict";
        var n2 = e("../utils"), i = e("../support"), s3 = e("./ArrayReader"), a3 = e("./StringReader"), o = e("./NodeBufferReader"), h = e("./Uint8ArrayReader");
        t.exports = function(e3) {
          var t4 = n2.getTypeOf(e3);
          return n2.checkSupport(t4), "string" !== t4 || i.uint8array ? "nodebuffer" === t4 ? new o(e3) : i.uint8array ? new h(n2.transformTo("uint8array", e3)) : new s3(n2.transformTo("array", e3)) : new a3(e3);
        };
      }, { "../support": 30, "../utils": 32, "./ArrayReader": 17, "./NodeBufferReader": 19, "./StringReader": 20, "./Uint8ArrayReader": 21 }], 23: [function(e, t, r) {
        "use strict";
        r.LOCAL_FILE_HEADER = "PK", r.CENTRAL_FILE_HEADER = "PK", r.CENTRAL_DIRECTORY_END = "PK", r.ZIP64_CENTRAL_DIRECTORY_LOCATOR = "PK\x07", r.ZIP64_CENTRAL_DIRECTORY_END = "PK", r.DATA_DESCRIPTOR = "PK\x07\b";
      }, {}], 24: [function(e, t, r) {
        "use strict";
        var n2 = e("./GenericWorker"), i = e("../utils");
        function s3(e3) {
          n2.call(this, "ConvertWorker to " + e3), this.destType = e3;
        }
        i.inherits(s3, n2), s3.prototype.processChunk = function(e3) {
          this.push({ data: i.transformTo(this.destType, e3.data), meta: e3.meta });
        }, t.exports = s3;
      }, { "../utils": 32, "./GenericWorker": 28 }], 25: [function(e, t, r) {
        "use strict";
        var n2 = e("./GenericWorker"), i = e("../crc32");
        function s3() {
          n2.call(this, "Crc32Probe"), this.withStreamInfo("crc32", 0);
        }
        e("../utils").inherits(s3, n2), s3.prototype.processChunk = function(e3) {
          this.streamInfo.crc32 = i(e3.data, this.streamInfo.crc32 || 0), this.push(e3);
        }, t.exports = s3;
      }, { "../crc32": 4, "../utils": 32, "./GenericWorker": 28 }], 26: [function(e, t, r) {
        "use strict";
        var n2 = e("../utils"), i = e("./GenericWorker");
        function s3(e3) {
          i.call(this, "DataLengthProbe for " + e3), this.propName = e3, this.withStreamInfo(e3, 0);
        }
        n2.inherits(s3, i), s3.prototype.processChunk = function(e3) {
          if (e3) {
            var t4 = this.streamInfo[this.propName] || 0;
            this.streamInfo[this.propName] = t4 + e3.data.length;
          }
          i.prototype.processChunk.call(this, e3);
        }, t.exports = s3;
      }, { "../utils": 32, "./GenericWorker": 28 }], 27: [function(e, t, r) {
        "use strict";
        var n2 = e("../utils"), i = e("./GenericWorker");
        function s3(e3) {
          i.call(this, "DataWorker");
          var t4 = this;
          this.dataIsReady = false, this.index = 0, this.max = 0, this.data = null, this.type = "", this._tickScheduled = false, e3.then(function(e4) {
            t4.dataIsReady = true, t4.data = e4, t4.max = e4 && e4.length || 0, t4.type = n2.getTypeOf(e4), t4.isPaused || t4._tickAndRepeat();
          }, function(e4) {
            t4.error(e4);
          });
        }
        n2.inherits(s3, i), s3.prototype.cleanUp = function() {
          i.prototype.cleanUp.call(this), this.data = null;
        }, s3.prototype.resume = function() {
          return !!i.prototype.resume.call(this) && (!this._tickScheduled && this.dataIsReady && (this._tickScheduled = true, n2.delay(this._tickAndRepeat, [], this)), true);
        }, s3.prototype._tickAndRepeat = function() {
          this._tickScheduled = false, this.isPaused || this.isFinished || (this._tick(), this.isFinished || (n2.delay(this._tickAndRepeat, [], this), this._tickScheduled = true));
        }, s3.prototype._tick = function() {
          if (this.isPaused || this.isFinished)
            return false;
          var e3 = null, t4 = Math.min(this.max, this.index + 16384);
          if (this.index >= this.max)
            return this.end();
          switch (this.type) {
            case "string":
              e3 = this.data.substring(this.index, t4);
              break;
            case "uint8array":
              e3 = this.data.subarray(this.index, t4);
              break;
            case "array":
            case "nodebuffer":
              e3 = this.data.slice(this.index, t4);
          }
          return this.index = t4, this.push({ data: e3, meta: { percent: this.max ? this.index / this.max * 100 : 0 } });
        }, t.exports = s3;
      }, { "../utils": 32, "./GenericWorker": 28 }], 28: [function(e, t, r) {
        "use strict";
        function n2(e3) {
          this.name = e3 || "default", this.streamInfo = {}, this.generatedError = null, this.extraStreamInfo = {}, this.isPaused = true, this.isFinished = false, this.isLocked = false, this._listeners = { data: [], end: [], error: [] }, this.previous = null;
        }
        n2.prototype = { push: function(e3) {
          this.emit("data", e3);
        }, end: function() {
          if (this.isFinished)
            return false;
          this.flush();
          try {
            this.emit("end"), this.cleanUp(), this.isFinished = true;
          } catch (e3) {
            this.emit("error", e3);
          }
          return true;
        }, error: function(e3) {
          return !this.isFinished && (this.isPaused ? this.generatedError = e3 : (this.isFinished = true, this.emit("error", e3), this.previous && this.previous.error(e3), this.cleanUp()), true);
        }, on: function(e3, t4) {
          return this._listeners[e3].push(t4), this;
        }, cleanUp: function() {
          this.streamInfo = this.generatedError = this.extraStreamInfo = null, this._listeners = [];
        }, emit: function(e3, t4) {
          if (this._listeners[e3])
            for (var r2 = 0; r2 < this._listeners[e3].length; r2++)
              this._listeners[e3][r2].call(this, t4);
        }, pipe: function(e3) {
          return e3.registerPrevious(this);
        }, registerPrevious: function(e3) {
          if (this.isLocked)
            throw new Error("The stream '" + this + "' has already been used.");
          this.streamInfo = e3.streamInfo, this.mergeStreamInfo(), this.previous = e3;
          var t4 = this;
          return e3.on("data", function(e4) {
            t4.processChunk(e4);
          }), e3.on("end", function() {
            t4.end();
          }), e3.on("error", function(e4) {
            t4.error(e4);
          }), this;
        }, pause: function() {
          return !this.isPaused && !this.isFinished && (this.isPaused = true, this.previous && this.previous.pause(), true);
        }, resume: function() {
          if (!this.isPaused || this.isFinished)
            return false;
          var e3 = this.isPaused = false;
          return this.generatedError && (this.error(this.generatedError), e3 = true), this.previous && this.previous.resume(), !e3;
        }, flush: function() {
        }, processChunk: function(e3) {
          this.push(e3);
        }, withStreamInfo: function(e3, t4) {
          return this.extraStreamInfo[e3] = t4, this.mergeStreamInfo(), this;
        }, mergeStreamInfo: function() {
          for (var e3 in this.extraStreamInfo)
            Object.prototype.hasOwnProperty.call(this.extraStreamInfo, e3) && (this.streamInfo[e3] = this.extraStreamInfo[e3]);
        }, lock: function() {
          if (this.isLocked)
            throw new Error("The stream '" + this + "' has already been used.");
          this.isLocked = true, this.previous && this.previous.lock();
        }, toString: function() {
          var e3 = "Worker " + this.name;
          return this.previous ? this.previous + " -> " + e3 : e3;
        } }, t.exports = n2;
      }, {}], 29: [function(e, t, r) {
        "use strict";
        var h = e("../utils"), i = e("./ConvertWorker"), s3 = e("./GenericWorker"), u = e("../base64"), n2 = e("../support"), a3 = e("../external"), o = null;
        if (n2.nodestream)
          try {
            o = e("../nodejs/NodejsStreamOutputAdapter");
          } catch (e3) {
          }
        function l2(e3, o2) {
          return new a3.Promise(function(t4, r2) {
            var n3 = [], i2 = e3._internalType, s4 = e3._outputType, a4 = e3._mimeType;
            e3.on("data", function(e4, t5) {
              n3.push(e4), o2 && o2(t5);
            }).on("error", function(e4) {
              n3 = [], r2(e4);
            }).on("end", function() {
              try {
                var e4 = function(e6, t5, r3) {
                  switch (e6) {
                    case "blob":
                      return h.newBlob(h.transformTo("arraybuffer", t5), r3);
                    case "base64":
                      return u.encode(t5);
                    default:
                      return h.transformTo(e6, t5);
                  }
                }(s4, function(e6, t5) {
                  var r3, n4 = 0, i3 = null, s5 = 0;
                  for (r3 = 0; r3 < t5.length; r3++)
                    s5 += t5[r3].length;
                  switch (e6) {
                    case "string":
                      return t5.join("");
                    case "array":
                      return Array.prototype.concat.apply([], t5);
                    case "uint8array":
                      for (i3 = new Uint8Array(s5), r3 = 0; r3 < t5.length; r3++)
                        i3.set(t5[r3], n4), n4 += t5[r3].length;
                      return i3;
                    case "nodebuffer":
                      return Buffer.concat(t5);
                    default:
                      throw new Error("concat : unsupported type '" + e6 + "'");
                  }
                }(i2, n3), a4);
                t4(e4);
              } catch (e6) {
                r2(e6);
              }
              n3 = [];
            }).resume();
          });
        }
        function f(e3, t4, r2) {
          var n3 = t4;
          switch (t4) {
            case "blob":
            case "arraybuffer":
              n3 = "uint8array";
              break;
            case "base64":
              n3 = "string";
          }
          try {
            this._internalType = n3, this._outputType = t4, this._mimeType = r2, h.checkSupport(n3), this._worker = e3.pipe(new i(n3)), e3.lock();
          } catch (e4) {
            this._worker = new s3("error"), this._worker.error(e4);
          }
        }
        f.prototype = { accumulate: function(e3) {
          return l2(this, e3);
        }, on: function(e3, t4) {
          var r2 = this;
          return "data" === e3 ? this._worker.on(e3, function(e4) {
            t4.call(r2, e4.data, e4.meta);
          }) : this._worker.on(e3, function() {
            h.delay(t4, arguments, r2);
          }), this;
        }, resume: function() {
          return h.delay(this._worker.resume, [], this._worker), this;
        }, pause: function() {
          return this._worker.pause(), this;
        }, toNodejsStream: function(e3) {
          if (h.checkSupport("nodestream"), "nodebuffer" !== this._outputType)
            throw new Error(this._outputType + " is not supported by this method");
          return new o(this, { objectMode: "nodebuffer" !== this._outputType }, e3);
        } }, t.exports = f;
      }, { "../base64": 1, "../external": 6, "../nodejs/NodejsStreamOutputAdapter": 13, "../support": 30, "../utils": 32, "./ConvertWorker": 24, "./GenericWorker": 28 }], 30: [function(e, t, r) {
        "use strict";
        if (r.base64 = true, r.array = true, r.string = true, r.arraybuffer = "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array, r.nodebuffer = "undefined" != typeof Buffer, r.uint8array = "undefined" != typeof Uint8Array, "undefined" == typeof ArrayBuffer)
          r.blob = false;
        else {
          var n2 = new ArrayBuffer(0);
          try {
            r.blob = 0 === new Blob([n2], { type: "application/zip" }).size;
          } catch (e3) {
            try {
              var i = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
              i.append(n2), r.blob = 0 === i.getBlob("application/zip").size;
            } catch (e4) {
              r.blob = false;
            }
          }
        }
        try {
          r.nodestream = !!e("readable-stream").Readable;
        } catch (e3) {
          r.nodestream = false;
        }
      }, { "readable-stream": 16 }], 31: [function(e, t, s3) {
        "use strict";
        for (var o = e("./utils"), h = e("./support"), r = e("./nodejsUtils"), n2 = e("./stream/GenericWorker"), u = new Array(256), i = 0; i < 256; i++)
          u[i] = 252 <= i ? 6 : 248 <= i ? 5 : 240 <= i ? 4 : 224 <= i ? 3 : 192 <= i ? 2 : 1;
        u[254] = u[254] = 1;
        function a3() {
          n2.call(this, "utf-8 decode"), this.leftOver = null;
        }
        function l2() {
          n2.call(this, "utf-8 encode");
        }
        s3.utf8encode = function(e3) {
          return h.nodebuffer ? r.newBufferFrom(e3, "utf-8") : function(e4) {
            var t4, r2, n3, i2, s4, a4 = e4.length, o2 = 0;
            for (i2 = 0; i2 < a4; i2++)
              55296 == (64512 & (r2 = e4.charCodeAt(i2))) && i2 + 1 < a4 && 56320 == (64512 & (n3 = e4.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n3 - 56320), i2++), o2 += r2 < 128 ? 1 : r2 < 2048 ? 2 : r2 < 65536 ? 3 : 4;
            for (t4 = h.uint8array ? new Uint8Array(o2) : new Array(o2), i2 = s4 = 0; s4 < o2; i2++)
              55296 == (64512 & (r2 = e4.charCodeAt(i2))) && i2 + 1 < a4 && 56320 == (64512 & (n3 = e4.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n3 - 56320), i2++), r2 < 128 ? t4[s4++] = r2 : (r2 < 2048 ? t4[s4++] = 192 | r2 >>> 6 : (r2 < 65536 ? t4[s4++] = 224 | r2 >>> 12 : (t4[s4++] = 240 | r2 >>> 18, t4[s4++] = 128 | r2 >>> 12 & 63), t4[s4++] = 128 | r2 >>> 6 & 63), t4[s4++] = 128 | 63 & r2);
            return t4;
          }(e3);
        }, s3.utf8decode = function(e3) {
          return h.nodebuffer ? o.transformTo("nodebuffer", e3).toString("utf-8") : function(e4) {
            var t4, r2, n3, i2, s4 = e4.length, a4 = new Array(2 * s4);
            for (t4 = r2 = 0; t4 < s4; )
              if ((n3 = e4[t4++]) < 128)
                a4[r2++] = n3;
              else if (4 < (i2 = u[n3]))
                a4[r2++] = 65533, t4 += i2 - 1;
              else {
                for (n3 &= 2 === i2 ? 31 : 3 === i2 ? 15 : 7; 1 < i2 && t4 < s4; )
                  n3 = n3 << 6 | 63 & e4[t4++], i2--;
                1 < i2 ? a4[r2++] = 65533 : n3 < 65536 ? a4[r2++] = n3 : (n3 -= 65536, a4[r2++] = 55296 | n3 >> 10 & 1023, a4[r2++] = 56320 | 1023 & n3);
              }
            return a4.length !== r2 && (a4.subarray ? a4 = a4.subarray(0, r2) : a4.length = r2), o.applyFromCharCode(a4);
          }(e3 = o.transformTo(h.uint8array ? "uint8array" : "array", e3));
        }, o.inherits(a3, n2), a3.prototype.processChunk = function(e3) {
          var t4 = o.transformTo(h.uint8array ? "uint8array" : "array", e3.data);
          if (this.leftOver && this.leftOver.length) {
            if (h.uint8array) {
              var r2 = t4;
              (t4 = new Uint8Array(r2.length + this.leftOver.length)).set(this.leftOver, 0), t4.set(r2, this.leftOver.length);
            } else
              t4 = this.leftOver.concat(t4);
            this.leftOver = null;
          }
          var n3 = function(e4, t5) {
            var r3;
            for ((t5 = t5 || e4.length) > e4.length && (t5 = e4.length), r3 = t5 - 1; 0 <= r3 && 128 == (192 & e4[r3]); )
              r3--;
            return r3 < 0 ? t5 : 0 === r3 ? t5 : r3 + u[e4[r3]] > t5 ? r3 : t5;
          }(t4), i2 = t4;
          n3 !== t4.length && (h.uint8array ? (i2 = t4.subarray(0, n3), this.leftOver = t4.subarray(n3, t4.length)) : (i2 = t4.slice(0, n3), this.leftOver = t4.slice(n3, t4.length))), this.push({ data: s3.utf8decode(i2), meta: e3.meta });
        }, a3.prototype.flush = function() {
          this.leftOver && this.leftOver.length && (this.push({ data: s3.utf8decode(this.leftOver), meta: {} }), this.leftOver = null);
        }, s3.Utf8DecodeWorker = a3, o.inherits(l2, n2), l2.prototype.processChunk = function(e3) {
          this.push({ data: s3.utf8encode(e3.data), meta: e3.meta });
        }, s3.Utf8EncodeWorker = l2;
      }, { "./nodejsUtils": 14, "./stream/GenericWorker": 28, "./support": 30, "./utils": 32 }], 32: [function(e, t, a3) {
        "use strict";
        var o = e("./support"), h = e("./base64"), r = e("./nodejsUtils"), u = e("./external");
        function n2(e3) {
          return e3;
        }
        function l2(e3, t4) {
          for (var r2 = 0; r2 < e3.length; ++r2)
            t4[r2] = 255 & e3.charCodeAt(r2);
          return t4;
        }
        e("setimmediate"), a3.newBlob = function(t4, r2) {
          a3.checkSupport("blob");
          try {
            return new Blob([t4], { type: r2 });
          } catch (e3) {
            try {
              var n3 = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
              return n3.append(t4), n3.getBlob(r2);
            } catch (e4) {
              throw new Error("Bug : can't construct the Blob.");
            }
          }
        };
        var i = { stringifyByChunk: function(e3, t4, r2) {
          var n3 = [], i2 = 0, s4 = e3.length;
          if (s4 <= r2)
            return String.fromCharCode.apply(null, e3);
          for (; i2 < s4; )
            "array" === t4 || "nodebuffer" === t4 ? n3.push(String.fromCharCode.apply(null, e3.slice(i2, Math.min(i2 + r2, s4)))) : n3.push(String.fromCharCode.apply(null, e3.subarray(i2, Math.min(i2 + r2, s4)))), i2 += r2;
          return n3.join("");
        }, stringifyByChar: function(e3) {
          for (var t4 = "", r2 = 0; r2 < e3.length; r2++)
            t4 += String.fromCharCode(e3[r2]);
          return t4;
        }, applyCanBeUsed: { uint8array: function() {
          try {
            return o.uint8array && 1 === String.fromCharCode.apply(null, new Uint8Array(1)).length;
          } catch (e3) {
            return false;
          }
        }(), nodebuffer: function() {
          try {
            return o.nodebuffer && 1 === String.fromCharCode.apply(null, r.allocBuffer(1)).length;
          } catch (e3) {
            return false;
          }
        }() } };
        function s3(e3) {
          var t4 = 65536, r2 = a3.getTypeOf(e3), n3 = true;
          if ("uint8array" === r2 ? n3 = i.applyCanBeUsed.uint8array : "nodebuffer" === r2 && (n3 = i.applyCanBeUsed.nodebuffer), n3)
            for (; 1 < t4; )
              try {
                return i.stringifyByChunk(e3, r2, t4);
              } catch (e4) {
                t4 = Math.floor(t4 / 2);
              }
          return i.stringifyByChar(e3);
        }
        function f(e3, t4) {
          for (var r2 = 0; r2 < e3.length; r2++)
            t4[r2] = e3[r2];
          return t4;
        }
        a3.applyFromCharCode = s3;
        var c5 = {};
        c5.string = { string: n2, array: function(e3) {
          return l2(e3, new Array(e3.length));
        }, arraybuffer: function(e3) {
          return c5.string.uint8array(e3).buffer;
        }, uint8array: function(e3) {
          return l2(e3, new Uint8Array(e3.length));
        }, nodebuffer: function(e3) {
          return l2(e3, r.allocBuffer(e3.length));
        } }, c5.array = { string: s3, array: n2, arraybuffer: function(e3) {
          return new Uint8Array(e3).buffer;
        }, uint8array: function(e3) {
          return new Uint8Array(e3);
        }, nodebuffer: function(e3) {
          return r.newBufferFrom(e3);
        } }, c5.arraybuffer = { string: function(e3) {
          return s3(new Uint8Array(e3));
        }, array: function(e3) {
          return f(new Uint8Array(e3), new Array(e3.byteLength));
        }, arraybuffer: n2, uint8array: function(e3) {
          return new Uint8Array(e3);
        }, nodebuffer: function(e3) {
          return r.newBufferFrom(new Uint8Array(e3));
        } }, c5.uint8array = { string: s3, array: function(e3) {
          return f(e3, new Array(e3.length));
        }, arraybuffer: function(e3) {
          return e3.buffer;
        }, uint8array: n2, nodebuffer: function(e3) {
          return r.newBufferFrom(e3);
        } }, c5.nodebuffer = { string: s3, array: function(e3) {
          return f(e3, new Array(e3.length));
        }, arraybuffer: function(e3) {
          return c5.nodebuffer.uint8array(e3).buffer;
        }, uint8array: function(e3) {
          return f(e3, new Uint8Array(e3.length));
        }, nodebuffer: n2 }, a3.transformTo = function(e3, t4) {
          if (t4 = t4 || "", !e3)
            return t4;
          a3.checkSupport(e3);
          var r2 = a3.getTypeOf(t4);
          return c5[r2][e3](t4);
        }, a3.resolve = function(e3) {
          for (var t4 = e3.split("/"), r2 = [], n3 = 0; n3 < t4.length; n3++) {
            var i2 = t4[n3];
            "." === i2 || "" === i2 && 0 !== n3 && n3 !== t4.length - 1 || (".." === i2 ? r2.pop() : r2.push(i2));
          }
          return r2.join("/");
        }, a3.getTypeOf = function(e3) {
          return "string" == typeof e3 ? "string" : "[object Array]" === Object.prototype.toString.call(e3) ? "array" : o.nodebuffer && r.isBuffer(e3) ? "nodebuffer" : o.uint8array && e3 instanceof Uint8Array ? "uint8array" : o.arraybuffer && e3 instanceof ArrayBuffer ? "arraybuffer" : void 0;
        }, a3.checkSupport = function(e3) {
          if (!o[e3.toLowerCase()])
            throw new Error(e3 + " is not supported by this platform");
        }, a3.MAX_VALUE_16BITS = 65535, a3.MAX_VALUE_32BITS = -1, a3.pretty = function(e3) {
          var t4, r2, n3 = "";
          for (r2 = 0; r2 < (e3 || "").length; r2++)
            n3 += "\\x" + ((t4 = e3.charCodeAt(r2)) < 16 ? "0" : "") + t4.toString(16).toUpperCase();
          return n3;
        }, a3.delay = function(e3, t4, r2) {
          setImmediate(function() {
            e3.apply(r2 || null, t4 || []);
          });
        }, a3.inherits = function(e3, t4) {
          function r2() {
          }
          r2.prototype = t4.prototype, e3.prototype = new r2();
        }, a3.extend = function() {
          var e3, t4, r2 = {};
          for (e3 = 0; e3 < arguments.length; e3++)
            for (t4 in arguments[e3])
              Object.prototype.hasOwnProperty.call(arguments[e3], t4) && void 0 === r2[t4] && (r2[t4] = arguments[e3][t4]);
          return r2;
        }, a3.prepareContent = function(r2, e3, n3, i2, s4) {
          return u.Promise.resolve(e3).then(function(n4) {
            return o.blob && (n4 instanceof Blob || -1 !== ["[object File]", "[object Blob]"].indexOf(Object.prototype.toString.call(n4))) && "undefined" != typeof FileReader ? new u.Promise(function(t4, r3) {
              var e4 = new FileReader();
              e4.onload = function(e6) {
                t4(e6.target.result);
              }, e4.onerror = function(e6) {
                r3(e6.target.error);
              }, e4.readAsArrayBuffer(n4);
            }) : n4;
          }).then(function(e4) {
            var t4 = a3.getTypeOf(e4);
            return t4 ? ("arraybuffer" === t4 ? e4 = a3.transformTo("uint8array", e4) : "string" === t4 && (s4 ? e4 = h.decode(e4) : n3 && true !== i2 && (e4 = function(e6) {
              return l2(e6, o.uint8array ? new Uint8Array(e6.length) : new Array(e6.length));
            }(e4))), e4) : u.Promise.reject(new Error("Can't read the data of '" + r2 + "'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));
          });
        };
      }, { "./base64": 1, "./external": 6, "./nodejsUtils": 14, "./support": 30, setimmediate: 54 }], 33: [function(e, t, r) {
        "use strict";
        var n2 = e("./reader/readerFor"), i = e("./utils"), s3 = e("./signature"), a3 = e("./zipEntry"), o = e("./support");
        function h(e3) {
          this.files = [], this.loadOptions = e3;
        }
        h.prototype = { checkSignature: function(e3) {
          if (!this.reader.readAndCheckSignature(e3)) {
            this.reader.index -= 4;
            var t4 = this.reader.readString(4);
            throw new Error("Corrupted zip or bug: unexpected signature (" + i.pretty(t4) + ", expected " + i.pretty(e3) + ")");
          }
        }, isSignature: function(e3, t4) {
          var r2 = this.reader.index;
          this.reader.setIndex(e3);
          var n3 = this.reader.readString(4) === t4;
          return this.reader.setIndex(r2), n3;
        }, readBlockEndOfCentral: function() {
          this.diskNumber = this.reader.readInt(2), this.diskWithCentralDirStart = this.reader.readInt(2), this.centralDirRecordsOnThisDisk = this.reader.readInt(2), this.centralDirRecords = this.reader.readInt(2), this.centralDirSize = this.reader.readInt(4), this.centralDirOffset = this.reader.readInt(4), this.zipCommentLength = this.reader.readInt(2);
          var e3 = this.reader.readData(this.zipCommentLength), t4 = o.uint8array ? "uint8array" : "array", r2 = i.transformTo(t4, e3);
          this.zipComment = this.loadOptions.decodeFileName(r2);
        }, readBlockZip64EndOfCentral: function() {
          this.zip64EndOfCentralSize = this.reader.readInt(8), this.reader.skip(4), this.diskNumber = this.reader.readInt(4), this.diskWithCentralDirStart = this.reader.readInt(4), this.centralDirRecordsOnThisDisk = this.reader.readInt(8), this.centralDirRecords = this.reader.readInt(8), this.centralDirSize = this.reader.readInt(8), this.centralDirOffset = this.reader.readInt(8), this.zip64ExtensibleData = {};
          for (var e3, t4, r2, n3 = this.zip64EndOfCentralSize - 44; 0 < n3; )
            e3 = this.reader.readInt(2), t4 = this.reader.readInt(4), r2 = this.reader.readData(t4), this.zip64ExtensibleData[e3] = { id: e3, length: t4, value: r2 };
        }, readBlockZip64EndOfCentralLocator: function() {
          if (this.diskWithZip64CentralDirStart = this.reader.readInt(4), this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8), this.disksCount = this.reader.readInt(4), 1 < this.disksCount)
            throw new Error("Multi-volumes zip are not supported");
        }, readLocalFiles: function() {
          var e3, t4;
          for (e3 = 0; e3 < this.files.length; e3++)
            t4 = this.files[e3], this.reader.setIndex(t4.localHeaderOffset), this.checkSignature(s3.LOCAL_FILE_HEADER), t4.readLocalPart(this.reader), t4.handleUTF8(), t4.processAttributes();
        }, readCentralDir: function() {
          var e3;
          for (this.reader.setIndex(this.centralDirOffset); this.reader.readAndCheckSignature(s3.CENTRAL_FILE_HEADER); )
            (e3 = new a3({ zip64: this.zip64 }, this.loadOptions)).readCentralPart(this.reader), this.files.push(e3);
          if (this.centralDirRecords !== this.files.length && 0 !== this.centralDirRecords && 0 === this.files.length)
            throw new Error("Corrupted zip or bug: expected " + this.centralDirRecords + " records in central dir, got " + this.files.length);
        }, readEndOfCentral: function() {
          var e3 = this.reader.lastIndexOfSignature(s3.CENTRAL_DIRECTORY_END);
          if (e3 < 0)
            throw !this.isSignature(0, s3.LOCAL_FILE_HEADER) ? new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html") : new Error("Corrupted zip: can't find end of central directory");
          this.reader.setIndex(e3);
          var t4 = e3;
          if (this.checkSignature(s3.CENTRAL_DIRECTORY_END), this.readBlockEndOfCentral(), this.diskNumber === i.MAX_VALUE_16BITS || this.diskWithCentralDirStart === i.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === i.MAX_VALUE_16BITS || this.centralDirRecords === i.MAX_VALUE_16BITS || this.centralDirSize === i.MAX_VALUE_32BITS || this.centralDirOffset === i.MAX_VALUE_32BITS) {
            if (this.zip64 = true, (e3 = this.reader.lastIndexOfSignature(s3.ZIP64_CENTRAL_DIRECTORY_LOCATOR)) < 0)
              throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");
            if (this.reader.setIndex(e3), this.checkSignature(s3.ZIP64_CENTRAL_DIRECTORY_LOCATOR), this.readBlockZip64EndOfCentralLocator(), !this.isSignature(this.relativeOffsetEndOfZip64CentralDir, s3.ZIP64_CENTRAL_DIRECTORY_END) && (this.relativeOffsetEndOfZip64CentralDir = this.reader.lastIndexOfSignature(s3.ZIP64_CENTRAL_DIRECTORY_END), this.relativeOffsetEndOfZip64CentralDir < 0))
              throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");
            this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir), this.checkSignature(s3.ZIP64_CENTRAL_DIRECTORY_END), this.readBlockZip64EndOfCentral();
          }
          var r2 = this.centralDirOffset + this.centralDirSize;
          this.zip64 && (r2 += 20, r2 += 12 + this.zip64EndOfCentralSize);
          var n3 = t4 - r2;
          if (0 < n3)
            this.isSignature(t4, s3.CENTRAL_FILE_HEADER) || (this.reader.zero = n3);
          else if (n3 < 0)
            throw new Error("Corrupted zip: missing " + Math.abs(n3) + " bytes.");
        }, prepareReader: function(e3) {
          this.reader = n2(e3);
        }, load: function(e3) {
          this.prepareReader(e3), this.readEndOfCentral(), this.readCentralDir(), this.readLocalFiles();
        } }, t.exports = h;
      }, { "./reader/readerFor": 22, "./signature": 23, "./support": 30, "./utils": 32, "./zipEntry": 34 }], 34: [function(e, t, r) {
        "use strict";
        var n2 = e("./reader/readerFor"), s3 = e("./utils"), i = e("./compressedObject"), a3 = e("./crc32"), o = e("./utf8"), h = e("./compressions"), u = e("./support");
        function l2(e3, t4) {
          this.options = e3, this.loadOptions = t4;
        }
        l2.prototype = { isEncrypted: function() {
          return 1 == (1 & this.bitFlag);
        }, useUTF8: function() {
          return 2048 == (2048 & this.bitFlag);
        }, readLocalPart: function(e3) {
          var t4, r2;
          if (e3.skip(22), this.fileNameLength = e3.readInt(2), r2 = e3.readInt(2), this.fileName = e3.readData(this.fileNameLength), e3.skip(r2), -1 === this.compressedSize || -1 === this.uncompressedSize)
            throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");
          if (null === (t4 = function(e4) {
            for (var t5 in h)
              if (Object.prototype.hasOwnProperty.call(h, t5) && h[t5].magic === e4)
                return h[t5];
            return null;
          }(this.compressionMethod)))
            throw new Error("Corrupted zip : compression " + s3.pretty(this.compressionMethod) + " unknown (inner file : " + s3.transformTo("string", this.fileName) + ")");
          this.decompressed = new i(this.compressedSize, this.uncompressedSize, this.crc32, t4, e3.readData(this.compressedSize));
        }, readCentralPart: function(e3) {
          this.versionMadeBy = e3.readInt(2), e3.skip(2), this.bitFlag = e3.readInt(2), this.compressionMethod = e3.readString(2), this.date = e3.readDate(), this.crc32 = e3.readInt(4), this.compressedSize = e3.readInt(4), this.uncompressedSize = e3.readInt(4);
          var t4 = e3.readInt(2);
          if (this.extraFieldsLength = e3.readInt(2), this.fileCommentLength = e3.readInt(2), this.diskNumberStart = e3.readInt(2), this.internalFileAttributes = e3.readInt(2), this.externalFileAttributes = e3.readInt(4), this.localHeaderOffset = e3.readInt(4), this.isEncrypted())
            throw new Error("Encrypted zip are not supported");
          e3.skip(t4), this.readExtraFields(e3), this.parseZIP64ExtraField(e3), this.fileComment = e3.readData(this.fileCommentLength);
        }, processAttributes: function() {
          this.unixPermissions = null, this.dosPermissions = null;
          var e3 = this.versionMadeBy >> 8;
          this.dir = !!(16 & this.externalFileAttributes), 0 == e3 && (this.dosPermissions = 63 & this.externalFileAttributes), 3 == e3 && (this.unixPermissions = this.externalFileAttributes >> 16 & 65535), this.dir || "/" !== this.fileNameStr.slice(-1) || (this.dir = true);
        }, parseZIP64ExtraField: function() {
          if (this.extraFields[1]) {
            var e3 = n2(this.extraFields[1].value);
            this.uncompressedSize === s3.MAX_VALUE_32BITS && (this.uncompressedSize = e3.readInt(8)), this.compressedSize === s3.MAX_VALUE_32BITS && (this.compressedSize = e3.readInt(8)), this.localHeaderOffset === s3.MAX_VALUE_32BITS && (this.localHeaderOffset = e3.readInt(8)), this.diskNumberStart === s3.MAX_VALUE_32BITS && (this.diskNumberStart = e3.readInt(4));
          }
        }, readExtraFields: function(e3) {
          var t4, r2, n3, i2 = e3.index + this.extraFieldsLength;
          for (this.extraFields || (this.extraFields = {}); e3.index + 4 < i2; )
            t4 = e3.readInt(2), r2 = e3.readInt(2), n3 = e3.readData(r2), this.extraFields[t4] = { id: t4, length: r2, value: n3 };
          e3.setIndex(i2);
        }, handleUTF8: function() {
          var e3 = u.uint8array ? "uint8array" : "array";
          if (this.useUTF8())
            this.fileNameStr = o.utf8decode(this.fileName), this.fileCommentStr = o.utf8decode(this.fileComment);
          else {
            var t4 = this.findExtraFieldUnicodePath();
            if (null !== t4)
              this.fileNameStr = t4;
            else {
              var r2 = s3.transformTo(e3, this.fileName);
              this.fileNameStr = this.loadOptions.decodeFileName(r2);
            }
            var n3 = this.findExtraFieldUnicodeComment();
            if (null !== n3)
              this.fileCommentStr = n3;
            else {
              var i2 = s3.transformTo(e3, this.fileComment);
              this.fileCommentStr = this.loadOptions.decodeFileName(i2);
            }
          }
        }, findExtraFieldUnicodePath: function() {
          var e3 = this.extraFields[28789];
          if (e3) {
            var t4 = n2(e3.value);
            return 1 !== t4.readInt(1) ? null : a3(this.fileName) !== t4.readInt(4) ? null : o.utf8decode(t4.readData(e3.length - 5));
          }
          return null;
        }, findExtraFieldUnicodeComment: function() {
          var e3 = this.extraFields[25461];
          if (e3) {
            var t4 = n2(e3.value);
            return 1 !== t4.readInt(1) ? null : a3(this.fileComment) !== t4.readInt(4) ? null : o.utf8decode(t4.readData(e3.length - 5));
          }
          return null;
        } }, t.exports = l2;
      }, { "./compressedObject": 2, "./compressions": 3, "./crc32": 4, "./reader/readerFor": 22, "./support": 30, "./utf8": 31, "./utils": 32 }], 35: [function(e, t, r) {
        "use strict";
        function n2(e3, t4, r2) {
          this.name = e3, this.dir = r2.dir, this.date = r2.date, this.comment = r2.comment, this.unixPermissions = r2.unixPermissions, this.dosPermissions = r2.dosPermissions, this._data = t4, this._dataBinary = r2.binary, this.options = { compression: r2.compression, compressionOptions: r2.compressionOptions };
        }
        var s3 = e("./stream/StreamHelper"), i = e("./stream/DataWorker"), a3 = e("./utf8"), o = e("./compressedObject"), h = e("./stream/GenericWorker");
        n2.prototype = { internalStream: function(e3) {
          var t4 = null, r2 = "string";
          try {
            if (!e3)
              throw new Error("No output type specified.");
            var n3 = "string" === (r2 = e3.toLowerCase()) || "text" === r2;
            "binarystring" !== r2 && "text" !== r2 || (r2 = "string"), t4 = this._decompressWorker();
            var i2 = !this._dataBinary;
            i2 && !n3 && (t4 = t4.pipe(new a3.Utf8EncodeWorker())), !i2 && n3 && (t4 = t4.pipe(new a3.Utf8DecodeWorker()));
          } catch (e4) {
            (t4 = new h("error")).error(e4);
          }
          return new s3(t4, r2, "");
        }, async: function(e3, t4) {
          return this.internalStream(e3).accumulate(t4);
        }, nodeStream: function(e3, t4) {
          return this.internalStream(e3 || "nodebuffer").toNodejsStream(t4);
        }, _compressWorker: function(e3, t4) {
          if (this._data instanceof o && this._data.compression.magic === e3.magic)
            return this._data.getCompressedWorker();
          var r2 = this._decompressWorker();
          return this._dataBinary || (r2 = r2.pipe(new a3.Utf8EncodeWorker())), o.createWorkerFrom(r2, e3, t4);
        }, _decompressWorker: function() {
          return this._data instanceof o ? this._data.getContentWorker() : this._data instanceof h ? this._data : new i(this._data);
        } };
        for (var u = ["asText", "asBinary", "asNodeBuffer", "asUint8Array", "asArrayBuffer"], l2 = function() {
          throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
        }, f = 0; f < u.length; f++)
          n2.prototype[u[f]] = l2;
        t.exports = n2;
      }, { "./compressedObject": 2, "./stream/DataWorker": 27, "./stream/GenericWorker": 28, "./stream/StreamHelper": 29, "./utf8": 31 }], 36: [function(e, l2, t) {
        (function(t4) {
          "use strict";
          var r, n2, e3 = t4.MutationObserver || t4.WebKitMutationObserver;
          if (e3) {
            var i = 0, s3 = new e3(u), a3 = t4.document.createTextNode("");
            s3.observe(a3, { characterData: true }), r = function() {
              a3.data = i = ++i % 2;
            };
          } else if (t4.setImmediate || void 0 === t4.MessageChannel)
            r = "document" in t4 && "onreadystatechange" in t4.document.createElement("script") ? function() {
              var e4 = t4.document.createElement("script");
              e4.onreadystatechange = function() {
                u(), e4.onreadystatechange = null, e4.parentNode.removeChild(e4), e4 = null;
              }, t4.document.documentElement.appendChild(e4);
            } : function() {
              setTimeout(u, 0);
            };
          else {
            var o = new t4.MessageChannel();
            o.port1.onmessage = u, r = function() {
              o.port2.postMessage(0);
            };
          }
          var h = [];
          function u() {
            var e4, t5;
            n2 = true;
            for (var r2 = h.length; r2; ) {
              for (t5 = h, h = [], e4 = -1; ++e4 < r2; )
                t5[e4]();
              r2 = h.length;
            }
            n2 = false;
          }
          l2.exports = function(e4) {
            1 !== h.push(e4) || n2 || r();
          };
        }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
      }, {}], 37: [function(e, t, r) {
        "use strict";
        var i = e("immediate");
        function u() {
        }
        var l2 = {}, s3 = ["REJECTED"], a3 = ["FULFILLED"], n2 = ["PENDING"];
        function o(e3) {
          if ("function" != typeof e3)
            throw new TypeError("resolver must be a function");
          this.state = n2, this.queue = [], this.outcome = void 0, e3 !== u && d(this, e3);
        }
        function h(e3, t4, r2) {
          this.promise = e3, "function" == typeof t4 && (this.onFulfilled = t4, this.callFulfilled = this.otherCallFulfilled), "function" == typeof r2 && (this.onRejected = r2, this.callRejected = this.otherCallRejected);
        }
        function f(t4, r2, n3) {
          i(function() {
            var e3;
            try {
              e3 = r2(n3);
            } catch (e4) {
              return l2.reject(t4, e4);
            }
            e3 === t4 ? l2.reject(t4, new TypeError("Cannot resolve promise with itself")) : l2.resolve(t4, e3);
          });
        }
        function c5(e3) {
          var t4 = e3 && e3.then;
          if (e3 && ("object" == typeof e3 || "function" == typeof e3) && "function" == typeof t4)
            return function() {
              t4.apply(e3, arguments);
            };
        }
        function d(t4, e3) {
          var r2 = false;
          function n3(e4) {
            r2 || (r2 = true, l2.reject(t4, e4));
          }
          function i2(e4) {
            r2 || (r2 = true, l2.resolve(t4, e4));
          }
          var s4 = p(function() {
            e3(i2, n3);
          });
          "error" === s4.status && n3(s4.value);
        }
        function p(e3, t4) {
          var r2 = {};
          try {
            r2.value = e3(t4), r2.status = "success";
          } catch (e4) {
            r2.status = "error", r2.value = e4;
          }
          return r2;
        }
        (t.exports = o).prototype.finally = function(t4) {
          if ("function" != typeof t4)
            return this;
          var r2 = this.constructor;
          return this.then(function(e3) {
            return r2.resolve(t4()).then(function() {
              return e3;
            });
          }, function(e3) {
            return r2.resolve(t4()).then(function() {
              throw e3;
            });
          });
        }, o.prototype.catch = function(e3) {
          return this.then(null, e3);
        }, o.prototype.then = function(e3, t4) {
          if ("function" != typeof e3 && this.state === a3 || "function" != typeof t4 && this.state === s3)
            return this;
          var r2 = new this.constructor(u);
          this.state !== n2 ? f(r2, this.state === a3 ? e3 : t4, this.outcome) : this.queue.push(new h(r2, e3, t4));
          return r2;
        }, h.prototype.callFulfilled = function(e3) {
          l2.resolve(this.promise, e3);
        }, h.prototype.otherCallFulfilled = function(e3) {
          f(this.promise, this.onFulfilled, e3);
        }, h.prototype.callRejected = function(e3) {
          l2.reject(this.promise, e3);
        }, h.prototype.otherCallRejected = function(e3) {
          f(this.promise, this.onRejected, e3);
        }, l2.resolve = function(e3, t4) {
          var r2 = p(c5, t4);
          if ("error" === r2.status)
            return l2.reject(e3, r2.value);
          var n3 = r2.value;
          if (n3)
            d(e3, n3);
          else {
            e3.state = a3, e3.outcome = t4;
            for (var i2 = -1, s4 = e3.queue.length; ++i2 < s4; )
              e3.queue[i2].callFulfilled(t4);
          }
          return e3;
        }, l2.reject = function(e3, t4) {
          e3.state = s3, e3.outcome = t4;
          for (var r2 = -1, n3 = e3.queue.length; ++r2 < n3; )
            e3.queue[r2].callRejected(t4);
          return e3;
        }, o.resolve = function(e3) {
          if (e3 instanceof this)
            return e3;
          return l2.resolve(new this(u), e3);
        }, o.reject = function(e3) {
          var t4 = new this(u);
          return l2.reject(t4, e3);
        }, o.all = function(e3) {
          var r2 = this;
          if ("[object Array]" !== Object.prototype.toString.call(e3))
            return this.reject(new TypeError("must be an array"));
          var n3 = e3.length, i2 = false;
          if (!n3)
            return this.resolve([]);
          var s4 = new Array(n3), a4 = 0, t4 = -1, o2 = new this(u);
          for (; ++t4 < n3; )
            h2(e3[t4], t4);
          return o2;
          function h2(e4, t5) {
            r2.resolve(e4).then(function(e6) {
              s4[t5] = e6, ++a4 !== n3 || i2 || (i2 = true, l2.resolve(o2, s4));
            }, function(e6) {
              i2 || (i2 = true, l2.reject(o2, e6));
            });
          }
        }, o.race = function(e3) {
          var t4 = this;
          if ("[object Array]" !== Object.prototype.toString.call(e3))
            return this.reject(new TypeError("must be an array"));
          var r2 = e3.length, n3 = false;
          if (!r2)
            return this.resolve([]);
          var i2 = -1, s4 = new this(u);
          for (; ++i2 < r2; )
            a4 = e3[i2], t4.resolve(a4).then(function(e4) {
              n3 || (n3 = true, l2.resolve(s4, e4));
            }, function(e4) {
              n3 || (n3 = true, l2.reject(s4, e4));
            });
          var a4;
          return s4;
        };
      }, { immediate: 36 }], 38: [function(e, t, r) {
        "use strict";
        var n2 = {};
        (0, e("./lib/utils/common").assign)(n2, e("./lib/deflate"), e("./lib/inflate"), e("./lib/zlib/constants")), t.exports = n2;
      }, { "./lib/deflate": 39, "./lib/inflate": 40, "./lib/utils/common": 41, "./lib/zlib/constants": 44 }], 39: [function(e, t, r) {
        "use strict";
        var a3 = e("./zlib/deflate"), o = e("./utils/common"), h = e("./utils/strings"), i = e("./zlib/messages"), s3 = e("./zlib/zstream"), u = Object.prototype.toString, l2 = 0, f = -1, c5 = 0, d = 8;
        function p(e3) {
          if (!(this instanceof p))
            return new p(e3);
          this.options = o.assign({ level: f, method: d, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: c5, to: "" }, e3 || {});
          var t4 = this.options;
          t4.raw && 0 < t4.windowBits ? t4.windowBits = -t4.windowBits : t4.gzip && 0 < t4.windowBits && t4.windowBits < 16 && (t4.windowBits += 16), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new s3(), this.strm.avail_out = 0;
          var r2 = a3.deflateInit2(this.strm, t4.level, t4.method, t4.windowBits, t4.memLevel, t4.strategy);
          if (r2 !== l2)
            throw new Error(i[r2]);
          if (t4.header && a3.deflateSetHeader(this.strm, t4.header), t4.dictionary) {
            var n3;
            if (n3 = "string" == typeof t4.dictionary ? h.string2buf(t4.dictionary) : "[object ArrayBuffer]" === u.call(t4.dictionary) ? new Uint8Array(t4.dictionary) : t4.dictionary, (r2 = a3.deflateSetDictionary(this.strm, n3)) !== l2)
              throw new Error(i[r2]);
            this._dict_set = true;
          }
        }
        function n2(e3, t4) {
          var r2 = new p(t4);
          if (r2.push(e3, true), r2.err)
            throw r2.msg || i[r2.err];
          return r2.result;
        }
        p.prototype.push = function(e3, t4) {
          var r2, n3, i2 = this.strm, s4 = this.options.chunkSize;
          if (this.ended)
            return false;
          n3 = t4 === ~~t4 ? t4 : true === t4 ? 4 : 0, "string" == typeof e3 ? i2.input = h.string2buf(e3) : "[object ArrayBuffer]" === u.call(e3) ? i2.input = new Uint8Array(e3) : i2.input = e3, i2.next_in = 0, i2.avail_in = i2.input.length;
          do {
            if (0 === i2.avail_out && (i2.output = new o.Buf8(s4), i2.next_out = 0, i2.avail_out = s4), 1 !== (r2 = a3.deflate(i2, n3)) && r2 !== l2)
              return this.onEnd(r2), !(this.ended = true);
            0 !== i2.avail_out && (0 !== i2.avail_in || 4 !== n3 && 2 !== n3) || ("string" === this.options.to ? this.onData(h.buf2binstring(o.shrinkBuf(i2.output, i2.next_out))) : this.onData(o.shrinkBuf(i2.output, i2.next_out)));
          } while ((0 < i2.avail_in || 0 === i2.avail_out) && 1 !== r2);
          return 4 === n3 ? (r2 = a3.deflateEnd(this.strm), this.onEnd(r2), this.ended = true, r2 === l2) : 2 !== n3 || (this.onEnd(l2), !(i2.avail_out = 0));
        }, p.prototype.onData = function(e3) {
          this.chunks.push(e3);
        }, p.prototype.onEnd = function(e3) {
          e3 === l2 && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = o.flattenChunks(this.chunks)), this.chunks = [], this.err = e3, this.msg = this.strm.msg;
        }, r.Deflate = p, r.deflate = n2, r.deflateRaw = function(e3, t4) {
          return (t4 = t4 || {}).raw = true, n2(e3, t4);
        }, r.gzip = function(e3, t4) {
          return (t4 = t4 || {}).gzip = true, n2(e3, t4);
        };
      }, { "./utils/common": 41, "./utils/strings": 42, "./zlib/deflate": 46, "./zlib/messages": 51, "./zlib/zstream": 53 }], 40: [function(e, t, r) {
        "use strict";
        var c5 = e("./zlib/inflate"), d = e("./utils/common"), p = e("./utils/strings"), m2 = e("./zlib/constants"), n2 = e("./zlib/messages"), i = e("./zlib/zstream"), s3 = e("./zlib/gzheader"), _ = Object.prototype.toString;
        function a3(e3) {
          if (!(this instanceof a3))
            return new a3(e3);
          this.options = d.assign({ chunkSize: 16384, windowBits: 0, to: "" }, e3 || {});
          var t4 = this.options;
          t4.raw && 0 <= t4.windowBits && t4.windowBits < 16 && (t4.windowBits = -t4.windowBits, 0 === t4.windowBits && (t4.windowBits = -15)), !(0 <= t4.windowBits && t4.windowBits < 16) || e3 && e3.windowBits || (t4.windowBits += 32), 15 < t4.windowBits && t4.windowBits < 48 && 0 == (15 & t4.windowBits) && (t4.windowBits |= 15), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new i(), this.strm.avail_out = 0;
          var r2 = c5.inflateInit2(this.strm, t4.windowBits);
          if (r2 !== m2.Z_OK)
            throw new Error(n2[r2]);
          this.header = new s3(), c5.inflateGetHeader(this.strm, this.header);
        }
        function o(e3, t4) {
          var r2 = new a3(t4);
          if (r2.push(e3, true), r2.err)
            throw r2.msg || n2[r2.err];
          return r2.result;
        }
        a3.prototype.push = function(e3, t4) {
          var r2, n3, i2, s4, a4, o2, h = this.strm, u = this.options.chunkSize, l2 = this.options.dictionary, f = false;
          if (this.ended)
            return false;
          n3 = t4 === ~~t4 ? t4 : true === t4 ? m2.Z_FINISH : m2.Z_NO_FLUSH, "string" == typeof e3 ? h.input = p.binstring2buf(e3) : "[object ArrayBuffer]" === _.call(e3) ? h.input = new Uint8Array(e3) : h.input = e3, h.next_in = 0, h.avail_in = h.input.length;
          do {
            if (0 === h.avail_out && (h.output = new d.Buf8(u), h.next_out = 0, h.avail_out = u), (r2 = c5.inflate(h, m2.Z_NO_FLUSH)) === m2.Z_NEED_DICT && l2 && (o2 = "string" == typeof l2 ? p.string2buf(l2) : "[object ArrayBuffer]" === _.call(l2) ? new Uint8Array(l2) : l2, r2 = c5.inflateSetDictionary(this.strm, o2)), r2 === m2.Z_BUF_ERROR && true === f && (r2 = m2.Z_OK, f = false), r2 !== m2.Z_STREAM_END && r2 !== m2.Z_OK)
              return this.onEnd(r2), !(this.ended = true);
            h.next_out && (0 !== h.avail_out && r2 !== m2.Z_STREAM_END && (0 !== h.avail_in || n3 !== m2.Z_FINISH && n3 !== m2.Z_SYNC_FLUSH) || ("string" === this.options.to ? (i2 = p.utf8border(h.output, h.next_out), s4 = h.next_out - i2, a4 = p.buf2string(h.output, i2), h.next_out = s4, h.avail_out = u - s4, s4 && d.arraySet(h.output, h.output, i2, s4, 0), this.onData(a4)) : this.onData(d.shrinkBuf(h.output, h.next_out)))), 0 === h.avail_in && 0 === h.avail_out && (f = true);
          } while ((0 < h.avail_in || 0 === h.avail_out) && r2 !== m2.Z_STREAM_END);
          return r2 === m2.Z_STREAM_END && (n3 = m2.Z_FINISH), n3 === m2.Z_FINISH ? (r2 = c5.inflateEnd(this.strm), this.onEnd(r2), this.ended = true, r2 === m2.Z_OK) : n3 !== m2.Z_SYNC_FLUSH || (this.onEnd(m2.Z_OK), !(h.avail_out = 0));
        }, a3.prototype.onData = function(e3) {
          this.chunks.push(e3);
        }, a3.prototype.onEnd = function(e3) {
          e3 === m2.Z_OK && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = d.flattenChunks(this.chunks)), this.chunks = [], this.err = e3, this.msg = this.strm.msg;
        }, r.Inflate = a3, r.inflate = o, r.inflateRaw = function(e3, t4) {
          return (t4 = t4 || {}).raw = true, o(e3, t4);
        }, r.ungzip = o;
      }, { "./utils/common": 41, "./utils/strings": 42, "./zlib/constants": 44, "./zlib/gzheader": 47, "./zlib/inflate": 49, "./zlib/messages": 51, "./zlib/zstream": 53 }], 41: [function(e, t, r) {
        "use strict";
        var n2 = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array;
        r.assign = function(e3) {
          for (var t4 = Array.prototype.slice.call(arguments, 1); t4.length; ) {
            var r2 = t4.shift();
            if (r2) {
              if ("object" != typeof r2)
                throw new TypeError(r2 + "must be non-object");
              for (var n3 in r2)
                r2.hasOwnProperty(n3) && (e3[n3] = r2[n3]);
            }
          }
          return e3;
        }, r.shrinkBuf = function(e3, t4) {
          return e3.length === t4 ? e3 : e3.subarray ? e3.subarray(0, t4) : (e3.length = t4, e3);
        };
        var i = { arraySet: function(e3, t4, r2, n3, i2) {
          if (t4.subarray && e3.subarray)
            e3.set(t4.subarray(r2, r2 + n3), i2);
          else
            for (var s4 = 0; s4 < n3; s4++)
              e3[i2 + s4] = t4[r2 + s4];
        }, flattenChunks: function(e3) {
          var t4, r2, n3, i2, s4, a3;
          for (t4 = n3 = 0, r2 = e3.length; t4 < r2; t4++)
            n3 += e3[t4].length;
          for (a3 = new Uint8Array(n3), t4 = i2 = 0, r2 = e3.length; t4 < r2; t4++)
            s4 = e3[t4], a3.set(s4, i2), i2 += s4.length;
          return a3;
        } }, s3 = { arraySet: function(e3, t4, r2, n3, i2) {
          for (var s4 = 0; s4 < n3; s4++)
            e3[i2 + s4] = t4[r2 + s4];
        }, flattenChunks: function(e3) {
          return [].concat.apply([], e3);
        } };
        r.setTyped = function(e3) {
          e3 ? (r.Buf8 = Uint8Array, r.Buf16 = Uint16Array, r.Buf32 = Int32Array, r.assign(r, i)) : (r.Buf8 = Array, r.Buf16 = Array, r.Buf32 = Array, r.assign(r, s3));
        }, r.setTyped(n2);
      }, {}], 42: [function(e, t, r) {
        "use strict";
        var h = e("./common"), i = true, s3 = true;
        try {
          String.fromCharCode.apply(null, [0]);
        } catch (e3) {
          i = false;
        }
        try {
          String.fromCharCode.apply(null, new Uint8Array(1));
        } catch (e3) {
          s3 = false;
        }
        for (var u = new h.Buf8(256), n2 = 0; n2 < 256; n2++)
          u[n2] = 252 <= n2 ? 6 : 248 <= n2 ? 5 : 240 <= n2 ? 4 : 224 <= n2 ? 3 : 192 <= n2 ? 2 : 1;
        function l2(e3, t4) {
          if (t4 < 65537 && (e3.subarray && s3 || !e3.subarray && i))
            return String.fromCharCode.apply(null, h.shrinkBuf(e3, t4));
          for (var r2 = "", n3 = 0; n3 < t4; n3++)
            r2 += String.fromCharCode(e3[n3]);
          return r2;
        }
        u[254] = u[254] = 1, r.string2buf = function(e3) {
          var t4, r2, n3, i2, s4, a3 = e3.length, o = 0;
          for (i2 = 0; i2 < a3; i2++)
            55296 == (64512 & (r2 = e3.charCodeAt(i2))) && i2 + 1 < a3 && 56320 == (64512 & (n3 = e3.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n3 - 56320), i2++), o += r2 < 128 ? 1 : r2 < 2048 ? 2 : r2 < 65536 ? 3 : 4;
          for (t4 = new h.Buf8(o), i2 = s4 = 0; s4 < o; i2++)
            55296 == (64512 & (r2 = e3.charCodeAt(i2))) && i2 + 1 < a3 && 56320 == (64512 & (n3 = e3.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n3 - 56320), i2++), r2 < 128 ? t4[s4++] = r2 : (r2 < 2048 ? t4[s4++] = 192 | r2 >>> 6 : (r2 < 65536 ? t4[s4++] = 224 | r2 >>> 12 : (t4[s4++] = 240 | r2 >>> 18, t4[s4++] = 128 | r2 >>> 12 & 63), t4[s4++] = 128 | r2 >>> 6 & 63), t4[s4++] = 128 | 63 & r2);
          return t4;
        }, r.buf2binstring = function(e3) {
          return l2(e3, e3.length);
        }, r.binstring2buf = function(e3) {
          for (var t4 = new h.Buf8(e3.length), r2 = 0, n3 = t4.length; r2 < n3; r2++)
            t4[r2] = e3.charCodeAt(r2);
          return t4;
        }, r.buf2string = function(e3, t4) {
          var r2, n3, i2, s4, a3 = t4 || e3.length, o = new Array(2 * a3);
          for (r2 = n3 = 0; r2 < a3; )
            if ((i2 = e3[r2++]) < 128)
              o[n3++] = i2;
            else if (4 < (s4 = u[i2]))
              o[n3++] = 65533, r2 += s4 - 1;
            else {
              for (i2 &= 2 === s4 ? 31 : 3 === s4 ? 15 : 7; 1 < s4 && r2 < a3; )
                i2 = i2 << 6 | 63 & e3[r2++], s4--;
              1 < s4 ? o[n3++] = 65533 : i2 < 65536 ? o[n3++] = i2 : (i2 -= 65536, o[n3++] = 55296 | i2 >> 10 & 1023, o[n3++] = 56320 | 1023 & i2);
            }
          return l2(o, n3);
        }, r.utf8border = function(e3, t4) {
          var r2;
          for ((t4 = t4 || e3.length) > e3.length && (t4 = e3.length), r2 = t4 - 1; 0 <= r2 && 128 == (192 & e3[r2]); )
            r2--;
          return r2 < 0 ? t4 : 0 === r2 ? t4 : r2 + u[e3[r2]] > t4 ? r2 : t4;
        };
      }, { "./common": 41 }], 43: [function(e, t, r) {
        "use strict";
        t.exports = function(e3, t4, r2, n2) {
          for (var i = 65535 & e3 | 0, s3 = e3 >>> 16 & 65535 | 0, a3 = 0; 0 !== r2; ) {
            for (r2 -= a3 = 2e3 < r2 ? 2e3 : r2; s3 = s3 + (i = i + t4[n2++] | 0) | 0, --a3; )
              ;
            i %= 65521, s3 %= 65521;
          }
          return i | s3 << 16 | 0;
        };
      }, {}], 44: [function(e, t, r) {
        "use strict";
        t.exports = { Z_NO_FLUSH: 0, Z_PARTIAL_FLUSH: 1, Z_SYNC_FLUSH: 2, Z_FULL_FLUSH: 3, Z_FINISH: 4, Z_BLOCK: 5, Z_TREES: 6, Z_OK: 0, Z_STREAM_END: 1, Z_NEED_DICT: 2, Z_ERRNO: -1, Z_STREAM_ERROR: -2, Z_DATA_ERROR: -3, Z_BUF_ERROR: -5, Z_NO_COMPRESSION: 0, Z_BEST_SPEED: 1, Z_BEST_COMPRESSION: 9, Z_DEFAULT_COMPRESSION: -1, Z_FILTERED: 1, Z_HUFFMAN_ONLY: 2, Z_RLE: 3, Z_FIXED: 4, Z_DEFAULT_STRATEGY: 0, Z_BINARY: 0, Z_TEXT: 1, Z_UNKNOWN: 2, Z_DEFLATED: 8 };
      }, {}], 45: [function(e, t, r) {
        "use strict";
        var o = function() {
          for (var e3, t4 = [], r2 = 0; r2 < 256; r2++) {
            e3 = r2;
            for (var n2 = 0; n2 < 8; n2++)
              e3 = 1 & e3 ? 3988292384 ^ e3 >>> 1 : e3 >>> 1;
            t4[r2] = e3;
          }
          return t4;
        }();
        t.exports = function(e3, t4, r2, n2) {
          var i = o, s3 = n2 + r2;
          e3 ^= -1;
          for (var a3 = n2; a3 < s3; a3++)
            e3 = e3 >>> 8 ^ i[255 & (e3 ^ t4[a3])];
          return -1 ^ e3;
        };
      }, {}], 46: [function(e, t, r) {
        "use strict";
        var h, c5 = e("../utils/common"), u = e("./trees"), d = e("./adler32"), p = e("./crc32"), n2 = e("./messages"), l2 = 0, f = 4, m2 = 0, _ = -2, g = -1, b = 4, i = 2, v = 8, y4 = 9, s3 = 286, a3 = 30, o = 19, w = 2 * s3 + 1, k2 = 15, x4 = 3, S = 258, z = S + x4 + 1, C2 = 42, E2 = 113, A5 = 1, I = 2, O = 3, B2 = 4;
        function R(e3, t4) {
          return e3.msg = n2[t4], t4;
        }
        function T(e3) {
          return (e3 << 1) - (4 < e3 ? 9 : 0);
        }
        function D2(e3) {
          for (var t4 = e3.length; 0 <= --t4; )
            e3[t4] = 0;
        }
        function F(e3) {
          var t4 = e3.state, r2 = t4.pending;
          r2 > e3.avail_out && (r2 = e3.avail_out), 0 !== r2 && (c5.arraySet(e3.output, t4.pending_buf, t4.pending_out, r2, e3.next_out), e3.next_out += r2, t4.pending_out += r2, e3.total_out += r2, e3.avail_out -= r2, t4.pending -= r2, 0 === t4.pending && (t4.pending_out = 0));
        }
        function N(e3, t4) {
          u._tr_flush_block(e3, 0 <= e3.block_start ? e3.block_start : -1, e3.strstart - e3.block_start, t4), e3.block_start = e3.strstart, F(e3.strm);
        }
        function U(e3, t4) {
          e3.pending_buf[e3.pending++] = t4;
        }
        function P(e3, t4) {
          e3.pending_buf[e3.pending++] = t4 >>> 8 & 255, e3.pending_buf[e3.pending++] = 255 & t4;
        }
        function L3(e3, t4) {
          var r2, n3, i2 = e3.max_chain_length, s4 = e3.strstart, a4 = e3.prev_length, o2 = e3.nice_match, h2 = e3.strstart > e3.w_size - z ? e3.strstart - (e3.w_size - z) : 0, u2 = e3.window, l3 = e3.w_mask, f2 = e3.prev, c6 = e3.strstart + S, d2 = u2[s4 + a4 - 1], p2 = u2[s4 + a4];
          e3.prev_length >= e3.good_match && (i2 >>= 2), o2 > e3.lookahead && (o2 = e3.lookahead);
          do {
            if (u2[(r2 = t4) + a4] === p2 && u2[r2 + a4 - 1] === d2 && u2[r2] === u2[s4] && u2[++r2] === u2[s4 + 1]) {
              s4 += 2, r2++;
              do {
              } while (u2[++s4] === u2[++r2] && u2[++s4] === u2[++r2] && u2[++s4] === u2[++r2] && u2[++s4] === u2[++r2] && u2[++s4] === u2[++r2] && u2[++s4] === u2[++r2] && u2[++s4] === u2[++r2] && u2[++s4] === u2[++r2] && s4 < c6);
              if (n3 = S - (c6 - s4), s4 = c6 - S, a4 < n3) {
                if (e3.match_start = t4, o2 <= (a4 = n3))
                  break;
                d2 = u2[s4 + a4 - 1], p2 = u2[s4 + a4];
              }
            }
          } while ((t4 = f2[t4 & l3]) > h2 && 0 != --i2);
          return a4 <= e3.lookahead ? a4 : e3.lookahead;
        }
        function j(e3) {
          var t4, r2, n3, i2, s4, a4, o2, h2, u2, l3, f2 = e3.w_size;
          do {
            if (i2 = e3.window_size - e3.lookahead - e3.strstart, e3.strstart >= f2 + (f2 - z)) {
              for (c5.arraySet(e3.window, e3.window, f2, f2, 0), e3.match_start -= f2, e3.strstart -= f2, e3.block_start -= f2, t4 = r2 = e3.hash_size; n3 = e3.head[--t4], e3.head[t4] = f2 <= n3 ? n3 - f2 : 0, --r2; )
                ;
              for (t4 = r2 = f2; n3 = e3.prev[--t4], e3.prev[t4] = f2 <= n3 ? n3 - f2 : 0, --r2; )
                ;
              i2 += f2;
            }
            if (0 === e3.strm.avail_in)
              break;
            if (a4 = e3.strm, o2 = e3.window, h2 = e3.strstart + e3.lookahead, u2 = i2, l3 = void 0, l3 = a4.avail_in, u2 < l3 && (l3 = u2), r2 = 0 === l3 ? 0 : (a4.avail_in -= l3, c5.arraySet(o2, a4.input, a4.next_in, l3, h2), 1 === a4.state.wrap ? a4.adler = d(a4.adler, o2, l3, h2) : 2 === a4.state.wrap && (a4.adler = p(a4.adler, o2, l3, h2)), a4.next_in += l3, a4.total_in += l3, l3), e3.lookahead += r2, e3.lookahead + e3.insert >= x4)
              for (s4 = e3.strstart - e3.insert, e3.ins_h = e3.window[s4], e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[s4 + 1]) & e3.hash_mask; e3.insert && (e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[s4 + x4 - 1]) & e3.hash_mask, e3.prev[s4 & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = s4, s4++, e3.insert--, !(e3.lookahead + e3.insert < x4)); )
                ;
          } while (e3.lookahead < z && 0 !== e3.strm.avail_in);
        }
        function Z(e3, t4) {
          for (var r2, n3; ; ) {
            if (e3.lookahead < z) {
              if (j(e3), e3.lookahead < z && t4 === l2)
                return A5;
              if (0 === e3.lookahead)
                break;
            }
            if (r2 = 0, e3.lookahead >= x4 && (e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + x4 - 1]) & e3.hash_mask, r2 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart), 0 !== r2 && e3.strstart - r2 <= e3.w_size - z && (e3.match_length = L3(e3, r2)), e3.match_length >= x4)
              if (n3 = u._tr_tally(e3, e3.strstart - e3.match_start, e3.match_length - x4), e3.lookahead -= e3.match_length, e3.match_length <= e3.max_lazy_match && e3.lookahead >= x4) {
                for (e3.match_length--; e3.strstart++, e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + x4 - 1]) & e3.hash_mask, r2 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart, 0 != --e3.match_length; )
                  ;
                e3.strstart++;
              } else
                e3.strstart += e3.match_length, e3.match_length = 0, e3.ins_h = e3.window[e3.strstart], e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + 1]) & e3.hash_mask;
            else
              n3 = u._tr_tally(e3, 0, e3.window[e3.strstart]), e3.lookahead--, e3.strstart++;
            if (n3 && (N(e3, false), 0 === e3.strm.avail_out))
              return A5;
          }
          return e3.insert = e3.strstart < x4 - 1 ? e3.strstart : x4 - 1, t4 === f ? (N(e3, true), 0 === e3.strm.avail_out ? O : B2) : e3.last_lit && (N(e3, false), 0 === e3.strm.avail_out) ? A5 : I;
        }
        function W(e3, t4) {
          for (var r2, n3, i2; ; ) {
            if (e3.lookahead < z) {
              if (j(e3), e3.lookahead < z && t4 === l2)
                return A5;
              if (0 === e3.lookahead)
                break;
            }
            if (r2 = 0, e3.lookahead >= x4 && (e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + x4 - 1]) & e3.hash_mask, r2 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart), e3.prev_length = e3.match_length, e3.prev_match = e3.match_start, e3.match_length = x4 - 1, 0 !== r2 && e3.prev_length < e3.max_lazy_match && e3.strstart - r2 <= e3.w_size - z && (e3.match_length = L3(e3, r2), e3.match_length <= 5 && (1 === e3.strategy || e3.match_length === x4 && 4096 < e3.strstart - e3.match_start) && (e3.match_length = x4 - 1)), e3.prev_length >= x4 && e3.match_length <= e3.prev_length) {
              for (i2 = e3.strstart + e3.lookahead - x4, n3 = u._tr_tally(e3, e3.strstart - 1 - e3.prev_match, e3.prev_length - x4), e3.lookahead -= e3.prev_length - 1, e3.prev_length -= 2; ++e3.strstart <= i2 && (e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + x4 - 1]) & e3.hash_mask, r2 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart), 0 != --e3.prev_length; )
                ;
              if (e3.match_available = 0, e3.match_length = x4 - 1, e3.strstart++, n3 && (N(e3, false), 0 === e3.strm.avail_out))
                return A5;
            } else if (e3.match_available) {
              if ((n3 = u._tr_tally(e3, 0, e3.window[e3.strstart - 1])) && N(e3, false), e3.strstart++, e3.lookahead--, 0 === e3.strm.avail_out)
                return A5;
            } else
              e3.match_available = 1, e3.strstart++, e3.lookahead--;
          }
          return e3.match_available && (n3 = u._tr_tally(e3, 0, e3.window[e3.strstart - 1]), e3.match_available = 0), e3.insert = e3.strstart < x4 - 1 ? e3.strstart : x4 - 1, t4 === f ? (N(e3, true), 0 === e3.strm.avail_out ? O : B2) : e3.last_lit && (N(e3, false), 0 === e3.strm.avail_out) ? A5 : I;
        }
        function M2(e3, t4, r2, n3, i2) {
          this.good_length = e3, this.max_lazy = t4, this.nice_length = r2, this.max_chain = n3, this.func = i2;
        }
        function H() {
          this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = v, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new c5.Buf16(2 * w), this.dyn_dtree = new c5.Buf16(2 * (2 * a3 + 1)), this.bl_tree = new c5.Buf16(2 * (2 * o + 1)), D2(this.dyn_ltree), D2(this.dyn_dtree), D2(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new c5.Buf16(k2 + 1), this.heap = new c5.Buf16(2 * s3 + 1), D2(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new c5.Buf16(2 * s3 + 1), D2(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
        }
        function G(e3) {
          var t4;
          return e3 && e3.state ? (e3.total_in = e3.total_out = 0, e3.data_type = i, (t4 = e3.state).pending = 0, t4.pending_out = 0, t4.wrap < 0 && (t4.wrap = -t4.wrap), t4.status = t4.wrap ? C2 : E2, e3.adler = 2 === t4.wrap ? 0 : 1, t4.last_flush = l2, u._tr_init(t4), m2) : R(e3, _);
        }
        function K2(e3) {
          var t4 = G(e3);
          return t4 === m2 && function(e4) {
            e4.window_size = 2 * e4.w_size, D2(e4.head), e4.max_lazy_match = h[e4.level].max_lazy, e4.good_match = h[e4.level].good_length, e4.nice_match = h[e4.level].nice_length, e4.max_chain_length = h[e4.level].max_chain, e4.strstart = 0, e4.block_start = 0, e4.lookahead = 0, e4.insert = 0, e4.match_length = e4.prev_length = x4 - 1, e4.match_available = 0, e4.ins_h = 0;
          }(e3.state), t4;
        }
        function Y3(e3, t4, r2, n3, i2, s4) {
          if (!e3)
            return _;
          var a4 = 1;
          if (t4 === g && (t4 = 6), n3 < 0 ? (a4 = 0, n3 = -n3) : 15 < n3 && (a4 = 2, n3 -= 16), i2 < 1 || y4 < i2 || r2 !== v || n3 < 8 || 15 < n3 || t4 < 0 || 9 < t4 || s4 < 0 || b < s4)
            return R(e3, _);
          8 === n3 && (n3 = 9);
          var o2 = new H();
          return (e3.state = o2).strm = e3, o2.wrap = a4, o2.gzhead = null, o2.w_bits = n3, o2.w_size = 1 << o2.w_bits, o2.w_mask = o2.w_size - 1, o2.hash_bits = i2 + 7, o2.hash_size = 1 << o2.hash_bits, o2.hash_mask = o2.hash_size - 1, o2.hash_shift = ~~((o2.hash_bits + x4 - 1) / x4), o2.window = new c5.Buf8(2 * o2.w_size), o2.head = new c5.Buf16(o2.hash_size), o2.prev = new c5.Buf16(o2.w_size), o2.lit_bufsize = 1 << i2 + 6, o2.pending_buf_size = 4 * o2.lit_bufsize, o2.pending_buf = new c5.Buf8(o2.pending_buf_size), o2.d_buf = 1 * o2.lit_bufsize, o2.l_buf = 3 * o2.lit_bufsize, o2.level = t4, o2.strategy = s4, o2.method = r2, K2(e3);
        }
        h = [new M2(0, 0, 0, 0, function(e3, t4) {
          var r2 = 65535;
          for (r2 > e3.pending_buf_size - 5 && (r2 = e3.pending_buf_size - 5); ; ) {
            if (e3.lookahead <= 1) {
              if (j(e3), 0 === e3.lookahead && t4 === l2)
                return A5;
              if (0 === e3.lookahead)
                break;
            }
            e3.strstart += e3.lookahead, e3.lookahead = 0;
            var n3 = e3.block_start + r2;
            if ((0 === e3.strstart || e3.strstart >= n3) && (e3.lookahead = e3.strstart - n3, e3.strstart = n3, N(e3, false), 0 === e3.strm.avail_out))
              return A5;
            if (e3.strstart - e3.block_start >= e3.w_size - z && (N(e3, false), 0 === e3.strm.avail_out))
              return A5;
          }
          return e3.insert = 0, t4 === f ? (N(e3, true), 0 === e3.strm.avail_out ? O : B2) : (e3.strstart > e3.block_start && (N(e3, false), e3.strm.avail_out), A5);
        }), new M2(4, 4, 8, 4, Z), new M2(4, 5, 16, 8, Z), new M2(4, 6, 32, 32, Z), new M2(4, 4, 16, 16, W), new M2(8, 16, 32, 32, W), new M2(8, 16, 128, 128, W), new M2(8, 32, 128, 256, W), new M2(32, 128, 258, 1024, W), new M2(32, 258, 258, 4096, W)], r.deflateInit = function(e3, t4) {
          return Y3(e3, t4, v, 15, 8, 0);
        }, r.deflateInit2 = Y3, r.deflateReset = K2, r.deflateResetKeep = G, r.deflateSetHeader = function(e3, t4) {
          return e3 && e3.state ? 2 !== e3.state.wrap ? _ : (e3.state.gzhead = t4, m2) : _;
        }, r.deflate = function(e3, t4) {
          var r2, n3, i2, s4;
          if (!e3 || !e3.state || 5 < t4 || t4 < 0)
            return e3 ? R(e3, _) : _;
          if (n3 = e3.state, !e3.output || !e3.input && 0 !== e3.avail_in || 666 === n3.status && t4 !== f)
            return R(e3, 0 === e3.avail_out ? -5 : _);
          if (n3.strm = e3, r2 = n3.last_flush, n3.last_flush = t4, n3.status === C2)
            if (2 === n3.wrap)
              e3.adler = 0, U(n3, 31), U(n3, 139), U(n3, 8), n3.gzhead ? (U(n3, (n3.gzhead.text ? 1 : 0) + (n3.gzhead.hcrc ? 2 : 0) + (n3.gzhead.extra ? 4 : 0) + (n3.gzhead.name ? 8 : 0) + (n3.gzhead.comment ? 16 : 0)), U(n3, 255 & n3.gzhead.time), U(n3, n3.gzhead.time >> 8 & 255), U(n3, n3.gzhead.time >> 16 & 255), U(n3, n3.gzhead.time >> 24 & 255), U(n3, 9 === n3.level ? 2 : 2 <= n3.strategy || n3.level < 2 ? 4 : 0), U(n3, 255 & n3.gzhead.os), n3.gzhead.extra && n3.gzhead.extra.length && (U(n3, 255 & n3.gzhead.extra.length), U(n3, n3.gzhead.extra.length >> 8 & 255)), n3.gzhead.hcrc && (e3.adler = p(e3.adler, n3.pending_buf, n3.pending, 0)), n3.gzindex = 0, n3.status = 69) : (U(n3, 0), U(n3, 0), U(n3, 0), U(n3, 0), U(n3, 0), U(n3, 9 === n3.level ? 2 : 2 <= n3.strategy || n3.level < 2 ? 4 : 0), U(n3, 3), n3.status = E2);
            else {
              var a4 = v + (n3.w_bits - 8 << 4) << 8;
              a4 |= (2 <= n3.strategy || n3.level < 2 ? 0 : n3.level < 6 ? 1 : 6 === n3.level ? 2 : 3) << 6, 0 !== n3.strstart && (a4 |= 32), a4 += 31 - a4 % 31, n3.status = E2, P(n3, a4), 0 !== n3.strstart && (P(n3, e3.adler >>> 16), P(n3, 65535 & e3.adler)), e3.adler = 1;
            }
          if (69 === n3.status)
            if (n3.gzhead.extra) {
              for (i2 = n3.pending; n3.gzindex < (65535 & n3.gzhead.extra.length) && (n3.pending !== n3.pending_buf_size || (n3.gzhead.hcrc && n3.pending > i2 && (e3.adler = p(e3.adler, n3.pending_buf, n3.pending - i2, i2)), F(e3), i2 = n3.pending, n3.pending !== n3.pending_buf_size)); )
                U(n3, 255 & n3.gzhead.extra[n3.gzindex]), n3.gzindex++;
              n3.gzhead.hcrc && n3.pending > i2 && (e3.adler = p(e3.adler, n3.pending_buf, n3.pending - i2, i2)), n3.gzindex === n3.gzhead.extra.length && (n3.gzindex = 0, n3.status = 73);
            } else
              n3.status = 73;
          if (73 === n3.status)
            if (n3.gzhead.name) {
              i2 = n3.pending;
              do {
                if (n3.pending === n3.pending_buf_size && (n3.gzhead.hcrc && n3.pending > i2 && (e3.adler = p(e3.adler, n3.pending_buf, n3.pending - i2, i2)), F(e3), i2 = n3.pending, n3.pending === n3.pending_buf_size)) {
                  s4 = 1;
                  break;
                }
                s4 = n3.gzindex < n3.gzhead.name.length ? 255 & n3.gzhead.name.charCodeAt(n3.gzindex++) : 0, U(n3, s4);
              } while (0 !== s4);
              n3.gzhead.hcrc && n3.pending > i2 && (e3.adler = p(e3.adler, n3.pending_buf, n3.pending - i2, i2)), 0 === s4 && (n3.gzindex = 0, n3.status = 91);
            } else
              n3.status = 91;
          if (91 === n3.status)
            if (n3.gzhead.comment) {
              i2 = n3.pending;
              do {
                if (n3.pending === n3.pending_buf_size && (n3.gzhead.hcrc && n3.pending > i2 && (e3.adler = p(e3.adler, n3.pending_buf, n3.pending - i2, i2)), F(e3), i2 = n3.pending, n3.pending === n3.pending_buf_size)) {
                  s4 = 1;
                  break;
                }
                s4 = n3.gzindex < n3.gzhead.comment.length ? 255 & n3.gzhead.comment.charCodeAt(n3.gzindex++) : 0, U(n3, s4);
              } while (0 !== s4);
              n3.gzhead.hcrc && n3.pending > i2 && (e3.adler = p(e3.adler, n3.pending_buf, n3.pending - i2, i2)), 0 === s4 && (n3.status = 103);
            } else
              n3.status = 103;
          if (103 === n3.status && (n3.gzhead.hcrc ? (n3.pending + 2 > n3.pending_buf_size && F(e3), n3.pending + 2 <= n3.pending_buf_size && (U(n3, 255 & e3.adler), U(n3, e3.adler >> 8 & 255), e3.adler = 0, n3.status = E2)) : n3.status = E2), 0 !== n3.pending) {
            if (F(e3), 0 === e3.avail_out)
              return n3.last_flush = -1, m2;
          } else if (0 === e3.avail_in && T(t4) <= T(r2) && t4 !== f)
            return R(e3, -5);
          if (666 === n3.status && 0 !== e3.avail_in)
            return R(e3, -5);
          if (0 !== e3.avail_in || 0 !== n3.lookahead || t4 !== l2 && 666 !== n3.status) {
            var o2 = 2 === n3.strategy ? function(e4, t5) {
              for (var r3; ; ) {
                if (0 === e4.lookahead && (j(e4), 0 === e4.lookahead)) {
                  if (t5 === l2)
                    return A5;
                  break;
                }
                if (e4.match_length = 0, r3 = u._tr_tally(e4, 0, e4.window[e4.strstart]), e4.lookahead--, e4.strstart++, r3 && (N(e4, false), 0 === e4.strm.avail_out))
                  return A5;
              }
              return e4.insert = 0, t5 === f ? (N(e4, true), 0 === e4.strm.avail_out ? O : B2) : e4.last_lit && (N(e4, false), 0 === e4.strm.avail_out) ? A5 : I;
            }(n3, t4) : 3 === n3.strategy ? function(e4, t5) {
              for (var r3, n4, i3, s5, a5 = e4.window; ; ) {
                if (e4.lookahead <= S) {
                  if (j(e4), e4.lookahead <= S && t5 === l2)
                    return A5;
                  if (0 === e4.lookahead)
                    break;
                }
                if (e4.match_length = 0, e4.lookahead >= x4 && 0 < e4.strstart && (n4 = a5[i3 = e4.strstart - 1]) === a5[++i3] && n4 === a5[++i3] && n4 === a5[++i3]) {
                  s5 = e4.strstart + S;
                  do {
                  } while (n4 === a5[++i3] && n4 === a5[++i3] && n4 === a5[++i3] && n4 === a5[++i3] && n4 === a5[++i3] && n4 === a5[++i3] && n4 === a5[++i3] && n4 === a5[++i3] && i3 < s5);
                  e4.match_length = S - (s5 - i3), e4.match_length > e4.lookahead && (e4.match_length = e4.lookahead);
                }
                if (e4.match_length >= x4 ? (r3 = u._tr_tally(e4, 1, e4.match_length - x4), e4.lookahead -= e4.match_length, e4.strstart += e4.match_length, e4.match_length = 0) : (r3 = u._tr_tally(e4, 0, e4.window[e4.strstart]), e4.lookahead--, e4.strstart++), r3 && (N(e4, false), 0 === e4.strm.avail_out))
                  return A5;
              }
              return e4.insert = 0, t5 === f ? (N(e4, true), 0 === e4.strm.avail_out ? O : B2) : e4.last_lit && (N(e4, false), 0 === e4.strm.avail_out) ? A5 : I;
            }(n3, t4) : h[n3.level].func(n3, t4);
            if (o2 !== O && o2 !== B2 || (n3.status = 666), o2 === A5 || o2 === O)
              return 0 === e3.avail_out && (n3.last_flush = -1), m2;
            if (o2 === I && (1 === t4 ? u._tr_align(n3) : 5 !== t4 && (u._tr_stored_block(n3, 0, 0, false), 3 === t4 && (D2(n3.head), 0 === n3.lookahead && (n3.strstart = 0, n3.block_start = 0, n3.insert = 0))), F(e3), 0 === e3.avail_out))
              return n3.last_flush = -1, m2;
          }
          return t4 !== f ? m2 : n3.wrap <= 0 ? 1 : (2 === n3.wrap ? (U(n3, 255 & e3.adler), U(n3, e3.adler >> 8 & 255), U(n3, e3.adler >> 16 & 255), U(n3, e3.adler >> 24 & 255), U(n3, 255 & e3.total_in), U(n3, e3.total_in >> 8 & 255), U(n3, e3.total_in >> 16 & 255), U(n3, e3.total_in >> 24 & 255)) : (P(n3, e3.adler >>> 16), P(n3, 65535 & e3.adler)), F(e3), 0 < n3.wrap && (n3.wrap = -n3.wrap), 0 !== n3.pending ? m2 : 1);
        }, r.deflateEnd = function(e3) {
          var t4;
          return e3 && e3.state ? (t4 = e3.state.status) !== C2 && 69 !== t4 && 73 !== t4 && 91 !== t4 && 103 !== t4 && t4 !== E2 && 666 !== t4 ? R(e3, _) : (e3.state = null, t4 === E2 ? R(e3, -3) : m2) : _;
        }, r.deflateSetDictionary = function(e3, t4) {
          var r2, n3, i2, s4, a4, o2, h2, u2, l3 = t4.length;
          if (!e3 || !e3.state)
            return _;
          if (2 === (s4 = (r2 = e3.state).wrap) || 1 === s4 && r2.status !== C2 || r2.lookahead)
            return _;
          for (1 === s4 && (e3.adler = d(e3.adler, t4, l3, 0)), r2.wrap = 0, l3 >= r2.w_size && (0 === s4 && (D2(r2.head), r2.strstart = 0, r2.block_start = 0, r2.insert = 0), u2 = new c5.Buf8(r2.w_size), c5.arraySet(u2, t4, l3 - r2.w_size, r2.w_size, 0), t4 = u2, l3 = r2.w_size), a4 = e3.avail_in, o2 = e3.next_in, h2 = e3.input, e3.avail_in = l3, e3.next_in = 0, e3.input = t4, j(r2); r2.lookahead >= x4; ) {
            for (n3 = r2.strstart, i2 = r2.lookahead - (x4 - 1); r2.ins_h = (r2.ins_h << r2.hash_shift ^ r2.window[n3 + x4 - 1]) & r2.hash_mask, r2.prev[n3 & r2.w_mask] = r2.head[r2.ins_h], r2.head[r2.ins_h] = n3, n3++, --i2; )
              ;
            r2.strstart = n3, r2.lookahead = x4 - 1, j(r2);
          }
          return r2.strstart += r2.lookahead, r2.block_start = r2.strstart, r2.insert = r2.lookahead, r2.lookahead = 0, r2.match_length = r2.prev_length = x4 - 1, r2.match_available = 0, e3.next_in = o2, e3.input = h2, e3.avail_in = a4, r2.wrap = s4, m2;
        }, r.deflateInfo = "pako deflate (from Nodeca project)";
      }, { "../utils/common": 41, "./adler32": 43, "./crc32": 45, "./messages": 51, "./trees": 52 }], 47: [function(e, t, r) {
        "use strict";
        t.exports = function() {
          this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = false;
        };
      }, {}], 48: [function(e, t, r) {
        "use strict";
        t.exports = function(e3, t4) {
          var r2, n2, i, s3, a3, o, h, u, l2, f, c5, d, p, m2, _, g, b, v, y4, w, k2, x4, S, z, C2;
          r2 = e3.state, n2 = e3.next_in, z = e3.input, i = n2 + (e3.avail_in - 5), s3 = e3.next_out, C2 = e3.output, a3 = s3 - (t4 - e3.avail_out), o = s3 + (e3.avail_out - 257), h = r2.dmax, u = r2.wsize, l2 = r2.whave, f = r2.wnext, c5 = r2.window, d = r2.hold, p = r2.bits, m2 = r2.lencode, _ = r2.distcode, g = (1 << r2.lenbits) - 1, b = (1 << r2.distbits) - 1;
          e:
            do {
              p < 15 && (d += z[n2++] << p, p += 8, d += z[n2++] << p, p += 8), v = m2[d & g];
              t:
                for (; ; ) {
                  if (d >>>= y4 = v >>> 24, p -= y4, 0 === (y4 = v >>> 16 & 255))
                    C2[s3++] = 65535 & v;
                  else {
                    if (!(16 & y4)) {
                      if (0 == (64 & y4)) {
                        v = m2[(65535 & v) + (d & (1 << y4) - 1)];
                        continue t;
                      }
                      if (32 & y4) {
                        r2.mode = 12;
                        break e;
                      }
                      e3.msg = "invalid literal/length code", r2.mode = 30;
                      break e;
                    }
                    w = 65535 & v, (y4 &= 15) && (p < y4 && (d += z[n2++] << p, p += 8), w += d & (1 << y4) - 1, d >>>= y4, p -= y4), p < 15 && (d += z[n2++] << p, p += 8, d += z[n2++] << p, p += 8), v = _[d & b];
                    r:
                      for (; ; ) {
                        if (d >>>= y4 = v >>> 24, p -= y4, !(16 & (y4 = v >>> 16 & 255))) {
                          if (0 == (64 & y4)) {
                            v = _[(65535 & v) + (d & (1 << y4) - 1)];
                            continue r;
                          }
                          e3.msg = "invalid distance code", r2.mode = 30;
                          break e;
                        }
                        if (k2 = 65535 & v, p < (y4 &= 15) && (d += z[n2++] << p, (p += 8) < y4 && (d += z[n2++] << p, p += 8)), h < (k2 += d & (1 << y4) - 1)) {
                          e3.msg = "invalid distance too far back", r2.mode = 30;
                          break e;
                        }
                        if (d >>>= y4, p -= y4, (y4 = s3 - a3) < k2) {
                          if (l2 < (y4 = k2 - y4) && r2.sane) {
                            e3.msg = "invalid distance too far back", r2.mode = 30;
                            break e;
                          }
                          if (S = c5, (x4 = 0) === f) {
                            if (x4 += u - y4, y4 < w) {
                              for (w -= y4; C2[s3++] = c5[x4++], --y4; )
                                ;
                              x4 = s3 - k2, S = C2;
                            }
                          } else if (f < y4) {
                            if (x4 += u + f - y4, (y4 -= f) < w) {
                              for (w -= y4; C2[s3++] = c5[x4++], --y4; )
                                ;
                              if (x4 = 0, f < w) {
                                for (w -= y4 = f; C2[s3++] = c5[x4++], --y4; )
                                  ;
                                x4 = s3 - k2, S = C2;
                              }
                            }
                          } else if (x4 += f - y4, y4 < w) {
                            for (w -= y4; C2[s3++] = c5[x4++], --y4; )
                              ;
                            x4 = s3 - k2, S = C2;
                          }
                          for (; 2 < w; )
                            C2[s3++] = S[x4++], C2[s3++] = S[x4++], C2[s3++] = S[x4++], w -= 3;
                          w && (C2[s3++] = S[x4++], 1 < w && (C2[s3++] = S[x4++]));
                        } else {
                          for (x4 = s3 - k2; C2[s3++] = C2[x4++], C2[s3++] = C2[x4++], C2[s3++] = C2[x4++], 2 < (w -= 3); )
                            ;
                          w && (C2[s3++] = C2[x4++], 1 < w && (C2[s3++] = C2[x4++]));
                        }
                        break;
                      }
                  }
                  break;
                }
            } while (n2 < i && s3 < o);
          n2 -= w = p >> 3, d &= (1 << (p -= w << 3)) - 1, e3.next_in = n2, e3.next_out = s3, e3.avail_in = n2 < i ? i - n2 + 5 : 5 - (n2 - i), e3.avail_out = s3 < o ? o - s3 + 257 : 257 - (s3 - o), r2.hold = d, r2.bits = p;
        };
      }, {}], 49: [function(e, t, r) {
        "use strict";
        var I = e("../utils/common"), O = e("./adler32"), B2 = e("./crc32"), R = e("./inffast"), T = e("./inftrees"), D2 = 1, F = 2, N = 0, U = -2, P = 1, n2 = 852, i = 592;
        function L3(e3) {
          return (e3 >>> 24 & 255) + (e3 >>> 8 & 65280) + ((65280 & e3) << 8) + ((255 & e3) << 24);
        }
        function s3() {
          this.mode = 0, this.last = false, this.wrap = 0, this.havedict = false, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new I.Buf16(320), this.work = new I.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;
        }
        function a3(e3) {
          var t4;
          return e3 && e3.state ? (t4 = e3.state, e3.total_in = e3.total_out = t4.total = 0, e3.msg = "", t4.wrap && (e3.adler = 1 & t4.wrap), t4.mode = P, t4.last = 0, t4.havedict = 0, t4.dmax = 32768, t4.head = null, t4.hold = 0, t4.bits = 0, t4.lencode = t4.lendyn = new I.Buf32(n2), t4.distcode = t4.distdyn = new I.Buf32(i), t4.sane = 1, t4.back = -1, N) : U;
        }
        function o(e3) {
          var t4;
          return e3 && e3.state ? ((t4 = e3.state).wsize = 0, t4.whave = 0, t4.wnext = 0, a3(e3)) : U;
        }
        function h(e3, t4) {
          var r2, n3;
          return e3 && e3.state ? (n3 = e3.state, t4 < 0 ? (r2 = 0, t4 = -t4) : (r2 = 1 + (t4 >> 4), t4 < 48 && (t4 &= 15)), t4 && (t4 < 8 || 15 < t4) ? U : (null !== n3.window && n3.wbits !== t4 && (n3.window = null), n3.wrap = r2, n3.wbits = t4, o(e3))) : U;
        }
        function u(e3, t4) {
          var r2, n3;
          return e3 ? (n3 = new s3(), (e3.state = n3).window = null, (r2 = h(e3, t4)) !== N && (e3.state = null), r2) : U;
        }
        var l2, f, c5 = true;
        function j(e3) {
          if (c5) {
            var t4;
            for (l2 = new I.Buf32(512), f = new I.Buf32(32), t4 = 0; t4 < 144; )
              e3.lens[t4++] = 8;
            for (; t4 < 256; )
              e3.lens[t4++] = 9;
            for (; t4 < 280; )
              e3.lens[t4++] = 7;
            for (; t4 < 288; )
              e3.lens[t4++] = 8;
            for (T(D2, e3.lens, 0, 288, l2, 0, e3.work, { bits: 9 }), t4 = 0; t4 < 32; )
              e3.lens[t4++] = 5;
            T(F, e3.lens, 0, 32, f, 0, e3.work, { bits: 5 }), c5 = false;
          }
          e3.lencode = l2, e3.lenbits = 9, e3.distcode = f, e3.distbits = 5;
        }
        function Z(e3, t4, r2, n3) {
          var i2, s4 = e3.state;
          return null === s4.window && (s4.wsize = 1 << s4.wbits, s4.wnext = 0, s4.whave = 0, s4.window = new I.Buf8(s4.wsize)), n3 >= s4.wsize ? (I.arraySet(s4.window, t4, r2 - s4.wsize, s4.wsize, 0), s4.wnext = 0, s4.whave = s4.wsize) : (n3 < (i2 = s4.wsize - s4.wnext) && (i2 = n3), I.arraySet(s4.window, t4, r2 - n3, i2, s4.wnext), (n3 -= i2) ? (I.arraySet(s4.window, t4, r2 - n3, n3, 0), s4.wnext = n3, s4.whave = s4.wsize) : (s4.wnext += i2, s4.wnext === s4.wsize && (s4.wnext = 0), s4.whave < s4.wsize && (s4.whave += i2))), 0;
        }
        r.inflateReset = o, r.inflateReset2 = h, r.inflateResetKeep = a3, r.inflateInit = function(e3) {
          return u(e3, 15);
        }, r.inflateInit2 = u, r.inflate = function(e3, t4) {
          var r2, n3, i2, s4, a4, o2, h2, u2, l3, f2, c6, d, p, m2, _, g, b, v, y4, w, k2, x4, S, z, C2 = 0, E2 = new I.Buf8(4), A5 = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
          if (!e3 || !e3.state || !e3.output || !e3.input && 0 !== e3.avail_in)
            return U;
          12 === (r2 = e3.state).mode && (r2.mode = 13), a4 = e3.next_out, i2 = e3.output, h2 = e3.avail_out, s4 = e3.next_in, n3 = e3.input, o2 = e3.avail_in, u2 = r2.hold, l3 = r2.bits, f2 = o2, c6 = h2, x4 = N;
          e:
            for (; ; )
              switch (r2.mode) {
                case P:
                  if (0 === r2.wrap) {
                    r2.mode = 13;
                    break;
                  }
                  for (; l3 < 16; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n3[s4++] << l3, l3 += 8;
                  }
                  if (2 & r2.wrap && 35615 === u2) {
                    E2[r2.check = 0] = 255 & u2, E2[1] = u2 >>> 8 & 255, r2.check = B2(r2.check, E2, 2, 0), l3 = u2 = 0, r2.mode = 2;
                    break;
                  }
                  if (r2.flags = 0, r2.head && (r2.head.done = false), !(1 & r2.wrap) || (((255 & u2) << 8) + (u2 >> 8)) % 31) {
                    e3.msg = "incorrect header check", r2.mode = 30;
                    break;
                  }
                  if (8 != (15 & u2)) {
                    e3.msg = "unknown compression method", r2.mode = 30;
                    break;
                  }
                  if (l3 -= 4, k2 = 8 + (15 & (u2 >>>= 4)), 0 === r2.wbits)
                    r2.wbits = k2;
                  else if (k2 > r2.wbits) {
                    e3.msg = "invalid window size", r2.mode = 30;
                    break;
                  }
                  r2.dmax = 1 << k2, e3.adler = r2.check = 1, r2.mode = 512 & u2 ? 10 : 12, l3 = u2 = 0;
                  break;
                case 2:
                  for (; l3 < 16; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n3[s4++] << l3, l3 += 8;
                  }
                  if (r2.flags = u2, 8 != (255 & r2.flags)) {
                    e3.msg = "unknown compression method", r2.mode = 30;
                    break;
                  }
                  if (57344 & r2.flags) {
                    e3.msg = "unknown header flags set", r2.mode = 30;
                    break;
                  }
                  r2.head && (r2.head.text = u2 >> 8 & 1), 512 & r2.flags && (E2[0] = 255 & u2, E2[1] = u2 >>> 8 & 255, r2.check = B2(r2.check, E2, 2, 0)), l3 = u2 = 0, r2.mode = 3;
                case 3:
                  for (; l3 < 32; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n3[s4++] << l3, l3 += 8;
                  }
                  r2.head && (r2.head.time = u2), 512 & r2.flags && (E2[0] = 255 & u2, E2[1] = u2 >>> 8 & 255, E2[2] = u2 >>> 16 & 255, E2[3] = u2 >>> 24 & 255, r2.check = B2(r2.check, E2, 4, 0)), l3 = u2 = 0, r2.mode = 4;
                case 4:
                  for (; l3 < 16; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n3[s4++] << l3, l3 += 8;
                  }
                  r2.head && (r2.head.xflags = 255 & u2, r2.head.os = u2 >> 8), 512 & r2.flags && (E2[0] = 255 & u2, E2[1] = u2 >>> 8 & 255, r2.check = B2(r2.check, E2, 2, 0)), l3 = u2 = 0, r2.mode = 5;
                case 5:
                  if (1024 & r2.flags) {
                    for (; l3 < 16; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n3[s4++] << l3, l3 += 8;
                    }
                    r2.length = u2, r2.head && (r2.head.extra_len = u2), 512 & r2.flags && (E2[0] = 255 & u2, E2[1] = u2 >>> 8 & 255, r2.check = B2(r2.check, E2, 2, 0)), l3 = u2 = 0;
                  } else
                    r2.head && (r2.head.extra = null);
                  r2.mode = 6;
                case 6:
                  if (1024 & r2.flags && (o2 < (d = r2.length) && (d = o2), d && (r2.head && (k2 = r2.head.extra_len - r2.length, r2.head.extra || (r2.head.extra = new Array(r2.head.extra_len)), I.arraySet(r2.head.extra, n3, s4, d, k2)), 512 & r2.flags && (r2.check = B2(r2.check, n3, d, s4)), o2 -= d, s4 += d, r2.length -= d), r2.length))
                    break e;
                  r2.length = 0, r2.mode = 7;
                case 7:
                  if (2048 & r2.flags) {
                    if (0 === o2)
                      break e;
                    for (d = 0; k2 = n3[s4 + d++], r2.head && k2 && r2.length < 65536 && (r2.head.name += String.fromCharCode(k2)), k2 && d < o2; )
                      ;
                    if (512 & r2.flags && (r2.check = B2(r2.check, n3, d, s4)), o2 -= d, s4 += d, k2)
                      break e;
                  } else
                    r2.head && (r2.head.name = null);
                  r2.length = 0, r2.mode = 8;
                case 8:
                  if (4096 & r2.flags) {
                    if (0 === o2)
                      break e;
                    for (d = 0; k2 = n3[s4 + d++], r2.head && k2 && r2.length < 65536 && (r2.head.comment += String.fromCharCode(k2)), k2 && d < o2; )
                      ;
                    if (512 & r2.flags && (r2.check = B2(r2.check, n3, d, s4)), o2 -= d, s4 += d, k2)
                      break e;
                  } else
                    r2.head && (r2.head.comment = null);
                  r2.mode = 9;
                case 9:
                  if (512 & r2.flags) {
                    for (; l3 < 16; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n3[s4++] << l3, l3 += 8;
                    }
                    if (u2 !== (65535 & r2.check)) {
                      e3.msg = "header crc mismatch", r2.mode = 30;
                      break;
                    }
                    l3 = u2 = 0;
                  }
                  r2.head && (r2.head.hcrc = r2.flags >> 9 & 1, r2.head.done = true), e3.adler = r2.check = 0, r2.mode = 12;
                  break;
                case 10:
                  for (; l3 < 32; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n3[s4++] << l3, l3 += 8;
                  }
                  e3.adler = r2.check = L3(u2), l3 = u2 = 0, r2.mode = 11;
                case 11:
                  if (0 === r2.havedict)
                    return e3.next_out = a4, e3.avail_out = h2, e3.next_in = s4, e3.avail_in = o2, r2.hold = u2, r2.bits = l3, 2;
                  e3.adler = r2.check = 1, r2.mode = 12;
                case 12:
                  if (5 === t4 || 6 === t4)
                    break e;
                case 13:
                  if (r2.last) {
                    u2 >>>= 7 & l3, l3 -= 7 & l3, r2.mode = 27;
                    break;
                  }
                  for (; l3 < 3; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n3[s4++] << l3, l3 += 8;
                  }
                  switch (r2.last = 1 & u2, l3 -= 1, 3 & (u2 >>>= 1)) {
                    case 0:
                      r2.mode = 14;
                      break;
                    case 1:
                      if (j(r2), r2.mode = 20, 6 !== t4)
                        break;
                      u2 >>>= 2, l3 -= 2;
                      break e;
                    case 2:
                      r2.mode = 17;
                      break;
                    case 3:
                      e3.msg = "invalid block type", r2.mode = 30;
                  }
                  u2 >>>= 2, l3 -= 2;
                  break;
                case 14:
                  for (u2 >>>= 7 & l3, l3 -= 7 & l3; l3 < 32; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n3[s4++] << l3, l3 += 8;
                  }
                  if ((65535 & u2) != (u2 >>> 16 ^ 65535)) {
                    e3.msg = "invalid stored block lengths", r2.mode = 30;
                    break;
                  }
                  if (r2.length = 65535 & u2, l3 = u2 = 0, r2.mode = 15, 6 === t4)
                    break e;
                case 15:
                  r2.mode = 16;
                case 16:
                  if (d = r2.length) {
                    if (o2 < d && (d = o2), h2 < d && (d = h2), 0 === d)
                      break e;
                    I.arraySet(i2, n3, s4, d, a4), o2 -= d, s4 += d, h2 -= d, a4 += d, r2.length -= d;
                    break;
                  }
                  r2.mode = 12;
                  break;
                case 17:
                  for (; l3 < 14; ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n3[s4++] << l3, l3 += 8;
                  }
                  if (r2.nlen = 257 + (31 & u2), u2 >>>= 5, l3 -= 5, r2.ndist = 1 + (31 & u2), u2 >>>= 5, l3 -= 5, r2.ncode = 4 + (15 & u2), u2 >>>= 4, l3 -= 4, 286 < r2.nlen || 30 < r2.ndist) {
                    e3.msg = "too many length or distance symbols", r2.mode = 30;
                    break;
                  }
                  r2.have = 0, r2.mode = 18;
                case 18:
                  for (; r2.have < r2.ncode; ) {
                    for (; l3 < 3; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n3[s4++] << l3, l3 += 8;
                    }
                    r2.lens[A5[r2.have++]] = 7 & u2, u2 >>>= 3, l3 -= 3;
                  }
                  for (; r2.have < 19; )
                    r2.lens[A5[r2.have++]] = 0;
                  if (r2.lencode = r2.lendyn, r2.lenbits = 7, S = { bits: r2.lenbits }, x4 = T(0, r2.lens, 0, 19, r2.lencode, 0, r2.work, S), r2.lenbits = S.bits, x4) {
                    e3.msg = "invalid code lengths set", r2.mode = 30;
                    break;
                  }
                  r2.have = 0, r2.mode = 19;
                case 19:
                  for (; r2.have < r2.nlen + r2.ndist; ) {
                    for (; g = (C2 = r2.lencode[u2 & (1 << r2.lenbits) - 1]) >>> 16 & 255, b = 65535 & C2, !((_ = C2 >>> 24) <= l3); ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n3[s4++] << l3, l3 += 8;
                    }
                    if (b < 16)
                      u2 >>>= _, l3 -= _, r2.lens[r2.have++] = b;
                    else {
                      if (16 === b) {
                        for (z = _ + 2; l3 < z; ) {
                          if (0 === o2)
                            break e;
                          o2--, u2 += n3[s4++] << l3, l3 += 8;
                        }
                        if (u2 >>>= _, l3 -= _, 0 === r2.have) {
                          e3.msg = "invalid bit length repeat", r2.mode = 30;
                          break;
                        }
                        k2 = r2.lens[r2.have - 1], d = 3 + (3 & u2), u2 >>>= 2, l3 -= 2;
                      } else if (17 === b) {
                        for (z = _ + 3; l3 < z; ) {
                          if (0 === o2)
                            break e;
                          o2--, u2 += n3[s4++] << l3, l3 += 8;
                        }
                        l3 -= _, k2 = 0, d = 3 + (7 & (u2 >>>= _)), u2 >>>= 3, l3 -= 3;
                      } else {
                        for (z = _ + 7; l3 < z; ) {
                          if (0 === o2)
                            break e;
                          o2--, u2 += n3[s4++] << l3, l3 += 8;
                        }
                        l3 -= _, k2 = 0, d = 11 + (127 & (u2 >>>= _)), u2 >>>= 7, l3 -= 7;
                      }
                      if (r2.have + d > r2.nlen + r2.ndist) {
                        e3.msg = "invalid bit length repeat", r2.mode = 30;
                        break;
                      }
                      for (; d--; )
                        r2.lens[r2.have++] = k2;
                    }
                  }
                  if (30 === r2.mode)
                    break;
                  if (0 === r2.lens[256]) {
                    e3.msg = "invalid code -- missing end-of-block", r2.mode = 30;
                    break;
                  }
                  if (r2.lenbits = 9, S = { bits: r2.lenbits }, x4 = T(D2, r2.lens, 0, r2.nlen, r2.lencode, 0, r2.work, S), r2.lenbits = S.bits, x4) {
                    e3.msg = "invalid literal/lengths set", r2.mode = 30;
                    break;
                  }
                  if (r2.distbits = 6, r2.distcode = r2.distdyn, S = { bits: r2.distbits }, x4 = T(F, r2.lens, r2.nlen, r2.ndist, r2.distcode, 0, r2.work, S), r2.distbits = S.bits, x4) {
                    e3.msg = "invalid distances set", r2.mode = 30;
                    break;
                  }
                  if (r2.mode = 20, 6 === t4)
                    break e;
                case 20:
                  r2.mode = 21;
                case 21:
                  if (6 <= o2 && 258 <= h2) {
                    e3.next_out = a4, e3.avail_out = h2, e3.next_in = s4, e3.avail_in = o2, r2.hold = u2, r2.bits = l3, R(e3, c6), a4 = e3.next_out, i2 = e3.output, h2 = e3.avail_out, s4 = e3.next_in, n3 = e3.input, o2 = e3.avail_in, u2 = r2.hold, l3 = r2.bits, 12 === r2.mode && (r2.back = -1);
                    break;
                  }
                  for (r2.back = 0; g = (C2 = r2.lencode[u2 & (1 << r2.lenbits) - 1]) >>> 16 & 255, b = 65535 & C2, !((_ = C2 >>> 24) <= l3); ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n3[s4++] << l3, l3 += 8;
                  }
                  if (g && 0 == (240 & g)) {
                    for (v = _, y4 = g, w = b; g = (C2 = r2.lencode[w + ((u2 & (1 << v + y4) - 1) >> v)]) >>> 16 & 255, b = 65535 & C2, !(v + (_ = C2 >>> 24) <= l3); ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n3[s4++] << l3, l3 += 8;
                    }
                    u2 >>>= v, l3 -= v, r2.back += v;
                  }
                  if (u2 >>>= _, l3 -= _, r2.back += _, r2.length = b, 0 === g) {
                    r2.mode = 26;
                    break;
                  }
                  if (32 & g) {
                    r2.back = -1, r2.mode = 12;
                    break;
                  }
                  if (64 & g) {
                    e3.msg = "invalid literal/length code", r2.mode = 30;
                    break;
                  }
                  r2.extra = 15 & g, r2.mode = 22;
                case 22:
                  if (r2.extra) {
                    for (z = r2.extra; l3 < z; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n3[s4++] << l3, l3 += 8;
                    }
                    r2.length += u2 & (1 << r2.extra) - 1, u2 >>>= r2.extra, l3 -= r2.extra, r2.back += r2.extra;
                  }
                  r2.was = r2.length, r2.mode = 23;
                case 23:
                  for (; g = (C2 = r2.distcode[u2 & (1 << r2.distbits) - 1]) >>> 16 & 255, b = 65535 & C2, !((_ = C2 >>> 24) <= l3); ) {
                    if (0 === o2)
                      break e;
                    o2--, u2 += n3[s4++] << l3, l3 += 8;
                  }
                  if (0 == (240 & g)) {
                    for (v = _, y4 = g, w = b; g = (C2 = r2.distcode[w + ((u2 & (1 << v + y4) - 1) >> v)]) >>> 16 & 255, b = 65535 & C2, !(v + (_ = C2 >>> 24) <= l3); ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n3[s4++] << l3, l3 += 8;
                    }
                    u2 >>>= v, l3 -= v, r2.back += v;
                  }
                  if (u2 >>>= _, l3 -= _, r2.back += _, 64 & g) {
                    e3.msg = "invalid distance code", r2.mode = 30;
                    break;
                  }
                  r2.offset = b, r2.extra = 15 & g, r2.mode = 24;
                case 24:
                  if (r2.extra) {
                    for (z = r2.extra; l3 < z; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n3[s4++] << l3, l3 += 8;
                    }
                    r2.offset += u2 & (1 << r2.extra) - 1, u2 >>>= r2.extra, l3 -= r2.extra, r2.back += r2.extra;
                  }
                  if (r2.offset > r2.dmax) {
                    e3.msg = "invalid distance too far back", r2.mode = 30;
                    break;
                  }
                  r2.mode = 25;
                case 25:
                  if (0 === h2)
                    break e;
                  if (d = c6 - h2, r2.offset > d) {
                    if ((d = r2.offset - d) > r2.whave && r2.sane) {
                      e3.msg = "invalid distance too far back", r2.mode = 30;
                      break;
                    }
                    p = d > r2.wnext ? (d -= r2.wnext, r2.wsize - d) : r2.wnext - d, d > r2.length && (d = r2.length), m2 = r2.window;
                  } else
                    m2 = i2, p = a4 - r2.offset, d = r2.length;
                  for (h2 < d && (d = h2), h2 -= d, r2.length -= d; i2[a4++] = m2[p++], --d; )
                    ;
                  0 === r2.length && (r2.mode = 21);
                  break;
                case 26:
                  if (0 === h2)
                    break e;
                  i2[a4++] = r2.length, h2--, r2.mode = 21;
                  break;
                case 27:
                  if (r2.wrap) {
                    for (; l3 < 32; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 |= n3[s4++] << l3, l3 += 8;
                    }
                    if (c6 -= h2, e3.total_out += c6, r2.total += c6, c6 && (e3.adler = r2.check = r2.flags ? B2(r2.check, i2, c6, a4 - c6) : O(r2.check, i2, c6, a4 - c6)), c6 = h2, (r2.flags ? u2 : L3(u2)) !== r2.check) {
                      e3.msg = "incorrect data check", r2.mode = 30;
                      break;
                    }
                    l3 = u2 = 0;
                  }
                  r2.mode = 28;
                case 28:
                  if (r2.wrap && r2.flags) {
                    for (; l3 < 32; ) {
                      if (0 === o2)
                        break e;
                      o2--, u2 += n3[s4++] << l3, l3 += 8;
                    }
                    if (u2 !== (4294967295 & r2.total)) {
                      e3.msg = "incorrect length check", r2.mode = 30;
                      break;
                    }
                    l3 = u2 = 0;
                  }
                  r2.mode = 29;
                case 29:
                  x4 = 1;
                  break e;
                case 30:
                  x4 = -3;
                  break e;
                case 31:
                  return -4;
                case 32:
                default:
                  return U;
              }
          return e3.next_out = a4, e3.avail_out = h2, e3.next_in = s4, e3.avail_in = o2, r2.hold = u2, r2.bits = l3, (r2.wsize || c6 !== e3.avail_out && r2.mode < 30 && (r2.mode < 27 || 4 !== t4)) && Z(e3, e3.output, e3.next_out, c6 - e3.avail_out) ? (r2.mode = 31, -4) : (f2 -= e3.avail_in, c6 -= e3.avail_out, e3.total_in += f2, e3.total_out += c6, r2.total += c6, r2.wrap && c6 && (e3.adler = r2.check = r2.flags ? B2(r2.check, i2, c6, e3.next_out - c6) : O(r2.check, i2, c6, e3.next_out - c6)), e3.data_type = r2.bits + (r2.last ? 64 : 0) + (12 === r2.mode ? 128 : 0) + (20 === r2.mode || 15 === r2.mode ? 256 : 0), (0 == f2 && 0 === c6 || 4 === t4) && x4 === N && (x4 = -5), x4);
        }, r.inflateEnd = function(e3) {
          if (!e3 || !e3.state)
            return U;
          var t4 = e3.state;
          return t4.window && (t4.window = null), e3.state = null, N;
        }, r.inflateGetHeader = function(e3, t4) {
          var r2;
          return e3 && e3.state ? 0 == (2 & (r2 = e3.state).wrap) ? U : ((r2.head = t4).done = false, N) : U;
        }, r.inflateSetDictionary = function(e3, t4) {
          var r2, n3 = t4.length;
          return e3 && e3.state ? 0 !== (r2 = e3.state).wrap && 11 !== r2.mode ? U : 11 === r2.mode && O(1, t4, n3, 0) !== r2.check ? -3 : Z(e3, t4, n3, n3) ? (r2.mode = 31, -4) : (r2.havedict = 1, N) : U;
        }, r.inflateInfo = "pako inflate (from Nodeca project)";
      }, { "../utils/common": 41, "./adler32": 43, "./crc32": 45, "./inffast": 48, "./inftrees": 50 }], 50: [function(e, t, r) {
        "use strict";
        var D2 = e("../utils/common"), F = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0], N = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78], U = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0], P = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
        t.exports = function(e3, t4, r2, n2, i, s3, a3, o) {
          var h, u, l2, f, c5, d, p, m2, _, g = o.bits, b = 0, v = 0, y4 = 0, w = 0, k2 = 0, x4 = 0, S = 0, z = 0, C2 = 0, E2 = 0, A5 = null, I = 0, O = new D2.Buf16(16), B2 = new D2.Buf16(16), R = null, T = 0;
          for (b = 0; b <= 15; b++)
            O[b] = 0;
          for (v = 0; v < n2; v++)
            O[t4[r2 + v]]++;
          for (k2 = g, w = 15; 1 <= w && 0 === O[w]; w--)
            ;
          if (w < k2 && (k2 = w), 0 === w)
            return i[s3++] = 20971520, i[s3++] = 20971520, o.bits = 1, 0;
          for (y4 = 1; y4 < w && 0 === O[y4]; y4++)
            ;
          for (k2 < y4 && (k2 = y4), b = z = 1; b <= 15; b++)
            if (z <<= 1, (z -= O[b]) < 0)
              return -1;
          if (0 < z && (0 === e3 || 1 !== w))
            return -1;
          for (B2[1] = 0, b = 1; b < 15; b++)
            B2[b + 1] = B2[b] + O[b];
          for (v = 0; v < n2; v++)
            0 !== t4[r2 + v] && (a3[B2[t4[r2 + v]]++] = v);
          if (d = 0 === e3 ? (A5 = R = a3, 19) : 1 === e3 ? (A5 = F, I -= 257, R = N, T -= 257, 256) : (A5 = U, R = P, -1), b = y4, c5 = s3, S = v = E2 = 0, l2 = -1, f = (C2 = 1 << (x4 = k2)) - 1, 1 === e3 && 852 < C2 || 2 === e3 && 592 < C2)
            return 1;
          for (; ; ) {
            for (p = b - S, _ = a3[v] < d ? (m2 = 0, a3[v]) : a3[v] > d ? (m2 = R[T + a3[v]], A5[I + a3[v]]) : (m2 = 96, 0), h = 1 << b - S, y4 = u = 1 << x4; i[c5 + (E2 >> S) + (u -= h)] = p << 24 | m2 << 16 | _ | 0, 0 !== u; )
              ;
            for (h = 1 << b - 1; E2 & h; )
              h >>= 1;
            if (0 !== h ? (E2 &= h - 1, E2 += h) : E2 = 0, v++, 0 == --O[b]) {
              if (b === w)
                break;
              b = t4[r2 + a3[v]];
            }
            if (k2 < b && (E2 & f) !== l2) {
              for (0 === S && (S = k2), c5 += y4, z = 1 << (x4 = b - S); x4 + S < w && !((z -= O[x4 + S]) <= 0); )
                x4++, z <<= 1;
              if (C2 += 1 << x4, 1 === e3 && 852 < C2 || 2 === e3 && 592 < C2)
                return 1;
              i[l2 = E2 & f] = k2 << 24 | x4 << 16 | c5 - s3 | 0;
            }
          }
          return 0 !== E2 && (i[c5 + E2] = b - S << 24 | 64 << 16 | 0), o.bits = k2, 0;
        };
      }, { "../utils/common": 41 }], 51: [function(e, t, r) {
        "use strict";
        t.exports = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" };
      }, {}], 52: [function(e, t, r) {
        "use strict";
        var i = e("../utils/common"), o = 0, h = 1;
        function n2(e3) {
          for (var t4 = e3.length; 0 <= --t4; )
            e3[t4] = 0;
        }
        var s3 = 0, a3 = 29, u = 256, l2 = u + 1 + a3, f = 30, c5 = 19, _ = 2 * l2 + 1, g = 15, d = 16, p = 7, m2 = 256, b = 16, v = 17, y4 = 18, w = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0], k2 = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13], x4 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7], S = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], z = new Array(2 * (l2 + 2));
        n2(z);
        var C2 = new Array(2 * f);
        n2(C2);
        var E2 = new Array(512);
        n2(E2);
        var A5 = new Array(256);
        n2(A5);
        var I = new Array(a3);
        n2(I);
        var O, B2, R, T = new Array(f);
        function D2(e3, t4, r2, n3, i2) {
          this.static_tree = e3, this.extra_bits = t4, this.extra_base = r2, this.elems = n3, this.max_length = i2, this.has_stree = e3 && e3.length;
        }
        function F(e3, t4) {
          this.dyn_tree = e3, this.max_code = 0, this.stat_desc = t4;
        }
        function N(e3) {
          return e3 < 256 ? E2[e3] : E2[256 + (e3 >>> 7)];
        }
        function U(e3, t4) {
          e3.pending_buf[e3.pending++] = 255 & t4, e3.pending_buf[e3.pending++] = t4 >>> 8 & 255;
        }
        function P(e3, t4, r2) {
          e3.bi_valid > d - r2 ? (e3.bi_buf |= t4 << e3.bi_valid & 65535, U(e3, e3.bi_buf), e3.bi_buf = t4 >> d - e3.bi_valid, e3.bi_valid += r2 - d) : (e3.bi_buf |= t4 << e3.bi_valid & 65535, e3.bi_valid += r2);
        }
        function L3(e3, t4, r2) {
          P(e3, r2[2 * t4], r2[2 * t4 + 1]);
        }
        function j(e3, t4) {
          for (var r2 = 0; r2 |= 1 & e3, e3 >>>= 1, r2 <<= 1, 0 < --t4; )
            ;
          return r2 >>> 1;
        }
        function Z(e3, t4, r2) {
          var n3, i2, s4 = new Array(g + 1), a4 = 0;
          for (n3 = 1; n3 <= g; n3++)
            s4[n3] = a4 = a4 + r2[n3 - 1] << 1;
          for (i2 = 0; i2 <= t4; i2++) {
            var o2 = e3[2 * i2 + 1];
            0 !== o2 && (e3[2 * i2] = j(s4[o2]++, o2));
          }
        }
        function W(e3) {
          var t4;
          for (t4 = 0; t4 < l2; t4++)
            e3.dyn_ltree[2 * t4] = 0;
          for (t4 = 0; t4 < f; t4++)
            e3.dyn_dtree[2 * t4] = 0;
          for (t4 = 0; t4 < c5; t4++)
            e3.bl_tree[2 * t4] = 0;
          e3.dyn_ltree[2 * m2] = 1, e3.opt_len = e3.static_len = 0, e3.last_lit = e3.matches = 0;
        }
        function M2(e3) {
          8 < e3.bi_valid ? U(e3, e3.bi_buf) : 0 < e3.bi_valid && (e3.pending_buf[e3.pending++] = e3.bi_buf), e3.bi_buf = 0, e3.bi_valid = 0;
        }
        function H(e3, t4, r2, n3) {
          var i2 = 2 * t4, s4 = 2 * r2;
          return e3[i2] < e3[s4] || e3[i2] === e3[s4] && n3[t4] <= n3[r2];
        }
        function G(e3, t4, r2) {
          for (var n3 = e3.heap[r2], i2 = r2 << 1; i2 <= e3.heap_len && (i2 < e3.heap_len && H(t4, e3.heap[i2 + 1], e3.heap[i2], e3.depth) && i2++, !H(t4, n3, e3.heap[i2], e3.depth)); )
            e3.heap[r2] = e3.heap[i2], r2 = i2, i2 <<= 1;
          e3.heap[r2] = n3;
        }
        function K2(e3, t4, r2) {
          var n3, i2, s4, a4, o2 = 0;
          if (0 !== e3.last_lit)
            for (; n3 = e3.pending_buf[e3.d_buf + 2 * o2] << 8 | e3.pending_buf[e3.d_buf + 2 * o2 + 1], i2 = e3.pending_buf[e3.l_buf + o2], o2++, 0 === n3 ? L3(e3, i2, t4) : (L3(e3, (s4 = A5[i2]) + u + 1, t4), 0 !== (a4 = w[s4]) && P(e3, i2 -= I[s4], a4), L3(e3, s4 = N(--n3), r2), 0 !== (a4 = k2[s4]) && P(e3, n3 -= T[s4], a4)), o2 < e3.last_lit; )
              ;
          L3(e3, m2, t4);
        }
        function Y3(e3, t4) {
          var r2, n3, i2, s4 = t4.dyn_tree, a4 = t4.stat_desc.static_tree, o2 = t4.stat_desc.has_stree, h2 = t4.stat_desc.elems, u2 = -1;
          for (e3.heap_len = 0, e3.heap_max = _, r2 = 0; r2 < h2; r2++)
            0 !== s4[2 * r2] ? (e3.heap[++e3.heap_len] = u2 = r2, e3.depth[r2] = 0) : s4[2 * r2 + 1] = 0;
          for (; e3.heap_len < 2; )
            s4[2 * (i2 = e3.heap[++e3.heap_len] = u2 < 2 ? ++u2 : 0)] = 1, e3.depth[i2] = 0, e3.opt_len--, o2 && (e3.static_len -= a4[2 * i2 + 1]);
          for (t4.max_code = u2, r2 = e3.heap_len >> 1; 1 <= r2; r2--)
            G(e3, s4, r2);
          for (i2 = h2; r2 = e3.heap[1], e3.heap[1] = e3.heap[e3.heap_len--], G(e3, s4, 1), n3 = e3.heap[1], e3.heap[--e3.heap_max] = r2, e3.heap[--e3.heap_max] = n3, s4[2 * i2] = s4[2 * r2] + s4[2 * n3], e3.depth[i2] = (e3.depth[r2] >= e3.depth[n3] ? e3.depth[r2] : e3.depth[n3]) + 1, s4[2 * r2 + 1] = s4[2 * n3 + 1] = i2, e3.heap[1] = i2++, G(e3, s4, 1), 2 <= e3.heap_len; )
            ;
          e3.heap[--e3.heap_max] = e3.heap[1], function(e4, t5) {
            var r3, n4, i3, s5, a5, o3, h3 = t5.dyn_tree, u3 = t5.max_code, l3 = t5.stat_desc.static_tree, f2 = t5.stat_desc.has_stree, c6 = t5.stat_desc.extra_bits, d2 = t5.stat_desc.extra_base, p2 = t5.stat_desc.max_length, m3 = 0;
            for (s5 = 0; s5 <= g; s5++)
              e4.bl_count[s5] = 0;
            for (h3[2 * e4.heap[e4.heap_max] + 1] = 0, r3 = e4.heap_max + 1; r3 < _; r3++)
              p2 < (s5 = h3[2 * h3[2 * (n4 = e4.heap[r3]) + 1] + 1] + 1) && (s5 = p2, m3++), h3[2 * n4 + 1] = s5, u3 < n4 || (e4.bl_count[s5]++, a5 = 0, d2 <= n4 && (a5 = c6[n4 - d2]), o3 = h3[2 * n4], e4.opt_len += o3 * (s5 + a5), f2 && (e4.static_len += o3 * (l3[2 * n4 + 1] + a5)));
            if (0 !== m3) {
              do {
                for (s5 = p2 - 1; 0 === e4.bl_count[s5]; )
                  s5--;
                e4.bl_count[s5]--, e4.bl_count[s5 + 1] += 2, e4.bl_count[p2]--, m3 -= 2;
              } while (0 < m3);
              for (s5 = p2; 0 !== s5; s5--)
                for (n4 = e4.bl_count[s5]; 0 !== n4; )
                  u3 < (i3 = e4.heap[--r3]) || (h3[2 * i3 + 1] !== s5 && (e4.opt_len += (s5 - h3[2 * i3 + 1]) * h3[2 * i3], h3[2 * i3 + 1] = s5), n4--);
            }
          }(e3, t4), Z(s4, u2, e3.bl_count);
        }
        function X3(e3, t4, r2) {
          var n3, i2, s4 = -1, a4 = t4[1], o2 = 0, h2 = 7, u2 = 4;
          for (0 === a4 && (h2 = 138, u2 = 3), t4[2 * (r2 + 1) + 1] = 65535, n3 = 0; n3 <= r2; n3++)
            i2 = a4, a4 = t4[2 * (n3 + 1) + 1], ++o2 < h2 && i2 === a4 || (o2 < u2 ? e3.bl_tree[2 * i2] += o2 : 0 !== i2 ? (i2 !== s4 && e3.bl_tree[2 * i2]++, e3.bl_tree[2 * b]++) : o2 <= 10 ? e3.bl_tree[2 * v]++ : e3.bl_tree[2 * y4]++, s4 = i2, u2 = (o2 = 0) === a4 ? (h2 = 138, 3) : i2 === a4 ? (h2 = 6, 3) : (h2 = 7, 4));
        }
        function V(e3, t4, r2) {
          var n3, i2, s4 = -1, a4 = t4[1], o2 = 0, h2 = 7, u2 = 4;
          for (0 === a4 && (h2 = 138, u2 = 3), n3 = 0; n3 <= r2; n3++)
            if (i2 = a4, a4 = t4[2 * (n3 + 1) + 1], !(++o2 < h2 && i2 === a4)) {
              if (o2 < u2)
                for (; L3(e3, i2, e3.bl_tree), 0 != --o2; )
                  ;
              else
                0 !== i2 ? (i2 !== s4 && (L3(e3, i2, e3.bl_tree), o2--), L3(e3, b, e3.bl_tree), P(e3, o2 - 3, 2)) : o2 <= 10 ? (L3(e3, v, e3.bl_tree), P(e3, o2 - 3, 3)) : (L3(e3, y4, e3.bl_tree), P(e3, o2 - 11, 7));
              s4 = i2, u2 = (o2 = 0) === a4 ? (h2 = 138, 3) : i2 === a4 ? (h2 = 6, 3) : (h2 = 7, 4);
            }
        }
        n2(T);
        var q = false;
        function J(e3, t4, r2, n3) {
          P(e3, (s3 << 1) + (n3 ? 1 : 0), 3), function(e4, t5, r3, n4) {
            M2(e4), n4 && (U(e4, r3), U(e4, ~r3)), i.arraySet(e4.pending_buf, e4.window, t5, r3, e4.pending), e4.pending += r3;
          }(e3, t4, r2, true);
        }
        r._tr_init = function(e3) {
          q || (function() {
            var e4, t4, r2, n3, i2, s4 = new Array(g + 1);
            for (n3 = r2 = 0; n3 < a3 - 1; n3++)
              for (I[n3] = r2, e4 = 0; e4 < 1 << w[n3]; e4++)
                A5[r2++] = n3;
            for (A5[r2 - 1] = n3, n3 = i2 = 0; n3 < 16; n3++)
              for (T[n3] = i2, e4 = 0; e4 < 1 << k2[n3]; e4++)
                E2[i2++] = n3;
            for (i2 >>= 7; n3 < f; n3++)
              for (T[n3] = i2 << 7, e4 = 0; e4 < 1 << k2[n3] - 7; e4++)
                E2[256 + i2++] = n3;
            for (t4 = 0; t4 <= g; t4++)
              s4[t4] = 0;
            for (e4 = 0; e4 <= 143; )
              z[2 * e4 + 1] = 8, e4++, s4[8]++;
            for (; e4 <= 255; )
              z[2 * e4 + 1] = 9, e4++, s4[9]++;
            for (; e4 <= 279; )
              z[2 * e4 + 1] = 7, e4++, s4[7]++;
            for (; e4 <= 287; )
              z[2 * e4 + 1] = 8, e4++, s4[8]++;
            for (Z(z, l2 + 1, s4), e4 = 0; e4 < f; e4++)
              C2[2 * e4 + 1] = 5, C2[2 * e4] = j(e4, 5);
            O = new D2(z, w, u + 1, l2, g), B2 = new D2(C2, k2, 0, f, g), R = new D2(new Array(0), x4, 0, c5, p);
          }(), q = true), e3.l_desc = new F(e3.dyn_ltree, O), e3.d_desc = new F(e3.dyn_dtree, B2), e3.bl_desc = new F(e3.bl_tree, R), e3.bi_buf = 0, e3.bi_valid = 0, W(e3);
        }, r._tr_stored_block = J, r._tr_flush_block = function(e3, t4, r2, n3) {
          var i2, s4, a4 = 0;
          0 < e3.level ? (2 === e3.strm.data_type && (e3.strm.data_type = function(e4) {
            var t5, r3 = 4093624447;
            for (t5 = 0; t5 <= 31; t5++, r3 >>>= 1)
              if (1 & r3 && 0 !== e4.dyn_ltree[2 * t5])
                return o;
            if (0 !== e4.dyn_ltree[18] || 0 !== e4.dyn_ltree[20] || 0 !== e4.dyn_ltree[26])
              return h;
            for (t5 = 32; t5 < u; t5++)
              if (0 !== e4.dyn_ltree[2 * t5])
                return h;
            return o;
          }(e3)), Y3(e3, e3.l_desc), Y3(e3, e3.d_desc), a4 = function(e4) {
            var t5;
            for (X3(e4, e4.dyn_ltree, e4.l_desc.max_code), X3(e4, e4.dyn_dtree, e4.d_desc.max_code), Y3(e4, e4.bl_desc), t5 = c5 - 1; 3 <= t5 && 0 === e4.bl_tree[2 * S[t5] + 1]; t5--)
              ;
            return e4.opt_len += 3 * (t5 + 1) + 5 + 5 + 4, t5;
          }(e3), i2 = e3.opt_len + 3 + 7 >>> 3, (s4 = e3.static_len + 3 + 7 >>> 3) <= i2 && (i2 = s4)) : i2 = s4 = r2 + 5, r2 + 4 <= i2 && -1 !== t4 ? J(e3, t4, r2, n3) : 4 === e3.strategy || s4 === i2 ? (P(e3, 2 + (n3 ? 1 : 0), 3), K2(e3, z, C2)) : (P(e3, 4 + (n3 ? 1 : 0), 3), function(e4, t5, r3, n4) {
            var i3;
            for (P(e4, t5 - 257, 5), P(e4, r3 - 1, 5), P(e4, n4 - 4, 4), i3 = 0; i3 < n4; i3++)
              P(e4, e4.bl_tree[2 * S[i3] + 1], 3);
            V(e4, e4.dyn_ltree, t5 - 1), V(e4, e4.dyn_dtree, r3 - 1);
          }(e3, e3.l_desc.max_code + 1, e3.d_desc.max_code + 1, a4 + 1), K2(e3, e3.dyn_ltree, e3.dyn_dtree)), W(e3), n3 && M2(e3);
        }, r._tr_tally = function(e3, t4, r2) {
          return e3.pending_buf[e3.d_buf + 2 * e3.last_lit] = t4 >>> 8 & 255, e3.pending_buf[e3.d_buf + 2 * e3.last_lit + 1] = 255 & t4, e3.pending_buf[e3.l_buf + e3.last_lit] = 255 & r2, e3.last_lit++, 0 === t4 ? e3.dyn_ltree[2 * r2]++ : (e3.matches++, t4--, e3.dyn_ltree[2 * (A5[r2] + u + 1)]++, e3.dyn_dtree[2 * N(t4)]++), e3.last_lit === e3.lit_bufsize - 1;
        }, r._tr_align = function(e3) {
          P(e3, 2, 3), L3(e3, m2, z), function(e4) {
            16 === e4.bi_valid ? (U(e4, e4.bi_buf), e4.bi_buf = 0, e4.bi_valid = 0) : 8 <= e4.bi_valid && (e4.pending_buf[e4.pending++] = 255 & e4.bi_buf, e4.bi_buf >>= 8, e4.bi_valid -= 8);
          }(e3);
        };
      }, { "../utils/common": 41 }], 53: [function(e, t, r) {
        "use strict";
        t.exports = function() {
          this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
        };
      }, {}], 54: [function(e, t, r) {
        (function(e3) {
          !function(r2, n2) {
            "use strict";
            if (!r2.setImmediate) {
              var i, s3, t4, a3, o = 1, h = {}, u = false, l2 = r2.document, e4 = Object.getPrototypeOf && Object.getPrototypeOf(r2);
              e4 = e4 && e4.setTimeout ? e4 : r2, i = "[object process]" === {}.toString.call(r2.process) ? function(e6) {
                process.nextTick(function() {
                  c5(e6);
                });
              } : function() {
                if (r2.postMessage && !r2.importScripts) {
                  var e6 = true, t5 = r2.onmessage;
                  return r2.onmessage = function() {
                    e6 = false;
                  }, r2.postMessage("", "*"), r2.onmessage = t5, e6;
                }
              }() ? (a3 = "setImmediate$" + Math.random() + "$", r2.addEventListener ? r2.addEventListener("message", d, false) : r2.attachEvent("onmessage", d), function(e6) {
                r2.postMessage(a3 + e6, "*");
              }) : r2.MessageChannel ? ((t4 = new MessageChannel()).port1.onmessage = function(e6) {
                c5(e6.data);
              }, function(e6) {
                t4.port2.postMessage(e6);
              }) : l2 && "onreadystatechange" in l2.createElement("script") ? (s3 = l2.documentElement, function(e6) {
                var t5 = l2.createElement("script");
                t5.onreadystatechange = function() {
                  c5(e6), t5.onreadystatechange = null, s3.removeChild(t5), t5 = null;
                }, s3.appendChild(t5);
              }) : function(e6) {
                setTimeout(c5, 0, e6);
              }, e4.setImmediate = function(e6) {
                "function" != typeof e6 && (e6 = new Function("" + e6));
                for (var t5 = new Array(arguments.length - 1), r3 = 0; r3 < t5.length; r3++)
                  t5[r3] = arguments[r3 + 1];
                var n3 = { callback: e6, args: t5 };
                return h[o] = n3, i(o), o++;
              }, e4.clearImmediate = f;
            }
            function f(e6) {
              delete h[e6];
            }
            function c5(e6) {
              if (u)
                setTimeout(c5, 0, e6);
              else {
                var t5 = h[e6];
                if (t5) {
                  u = true;
                  try {
                    !function(e7) {
                      var t6 = e7.callback, r3 = e7.args;
                      switch (r3.length) {
                        case 0:
                          t6();
                          break;
                        case 1:
                          t6(r3[0]);
                          break;
                        case 2:
                          t6(r3[0], r3[1]);
                          break;
                        case 3:
                          t6(r3[0], r3[1], r3[2]);
                          break;
                        default:
                          t6.apply(n2, r3);
                      }
                    }(t5);
                  } finally {
                    f(e6), u = false;
                  }
                }
              }
            }
            function d(e6) {
              e6.source === r2 && "string" == typeof e6.data && 0 === e6.data.indexOf(a3) && c5(+e6.data.slice(a3.length));
            }
          }("undefined" == typeof self ? void 0 === e3 ? this : e3 : self);
        }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
      }, {}] }, {}, [10])(10);
    });
  }
});

// node_modules/handlebars/dist/cjs/handlebars/utils.js
var require_utils = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/utils.js"(exports) {
    "use strict";
    exports.__esModule = true;
    exports.extend = extend2;
    exports.indexOf = indexOf;
    exports.escapeExpression = escapeExpression;
    exports.isEmpty = isEmpty;
    exports.createFrame = createFrame;
    exports.blockParams = blockParams;
    exports.appendContextPath = appendContextPath;
    var escape = {
      "&": "&amp;",
      "<": "&lt;",
      ">": "&gt;",
      '"': "&quot;",
      "'": "&#x27;",
      "`": "&#x60;",
      "=": "&#x3D;"
    };
    var badChars = /[&<>"'`=]/g;
    var possible = /[&<>"'`=]/;
    function escapeChar(chr) {
      return escape[chr];
    }
    function extend2(obj) {
      for (var i = 1; i < arguments.length; i++) {
        for (var key in arguments[i]) {
          if (Object.prototype.hasOwnProperty.call(arguments[i], key)) {
            obj[key] = arguments[i][key];
          }
        }
      }
      return obj;
    }
    var toString = Object.prototype.toString;
    exports.toString = toString;
    var isFunction = function isFunction2(value) {
      return typeof value === "function";
    };
    if (isFunction(/x/)) {
      exports.isFunction = isFunction = function(value) {
        return typeof value === "function" && toString.call(value) === "[object Function]";
      };
    }
    exports.isFunction = isFunction;
    var isArray = Array.isArray || function(value) {
      return value && typeof value === "object" ? toString.call(value) === "[object Array]" : false;
    };
    exports.isArray = isArray;
    function indexOf(array3, value) {
      for (var i = 0, len = array3.length; i < len; i++) {
        if (array3[i] === value) {
          return i;
        }
      }
      return -1;
    }
    function escapeExpression(string) {
      if (typeof string !== "string") {
        if (string && string.toHTML) {
          return string.toHTML();
        } else if (string == null) {
          return "";
        } else if (!string) {
          return string + "";
        }
        string = "" + string;
      }
      if (!possible.test(string)) {
        return string;
      }
      return string.replace(badChars, escapeChar);
    }
    function isEmpty(value) {
      if (!value && value !== 0) {
        return true;
      } else if (isArray(value) && value.length === 0) {
        return true;
      } else {
        return false;
      }
    }
    function createFrame(object2) {
      var frame2 = extend2({}, object2);
      frame2._parent = object2;
      return frame2;
    }
    function blockParams(params, ids) {
      params.path = ids;
      return params;
    }
    function appendContextPath(contextPath, id2) {
      return (contextPath ? contextPath + "." : "") + id2;
    }
  }
});

// node_modules/handlebars/dist/cjs/handlebars/exception.js
var require_exception = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/exception.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    var errorProps = ["description", "fileName", "lineNumber", "endLineNumber", "message", "name", "number", "stack"];
    function Exception(message, node) {
      var loc = node && node.loc, line = void 0, endLineNumber = void 0, column = void 0, endColumn = void 0;
      if (loc) {
        line = loc.start.line;
        endLineNumber = loc.end.line;
        column = loc.start.column;
        endColumn = loc.end.column;
        message += " - " + line + ":" + column;
      }
      var tmp = Error.prototype.constructor.call(this, message);
      for (var idx = 0; idx < errorProps.length; idx++) {
        this[errorProps[idx]] = tmp[errorProps[idx]];
      }
      if (Error.captureStackTrace) {
        Error.captureStackTrace(this, Exception);
      }
      try {
        if (loc) {
          this.lineNumber = line;
          this.endLineNumber = endLineNumber;
          if (Object.defineProperty) {
            Object.defineProperty(this, "column", {
              value: column,
              enumerable: true
            });
            Object.defineProperty(this, "endColumn", {
              value: endColumn,
              enumerable: true
            });
          } else {
            this.column = column;
            this.endColumn = endColumn;
          }
        }
      } catch (nop) {
      }
    }
    Exception.prototype = new Error();
    exports["default"] = Exception;
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/helpers/block-helper-missing.js
var require_block_helper_missing = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/helpers/block-helper-missing.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    var _utils = require_utils();
    exports["default"] = function(instance) {
      instance.registerHelper("blockHelperMissing", function(context, options) {
        var inverse = options.inverse, fn = options.fn;
        if (context === true) {
          return fn(this);
        } else if (context === false || context == null) {
          return inverse(this);
        } else if (_utils.isArray(context)) {
          if (context.length > 0) {
            if (options.ids) {
              options.ids = [options.name];
            }
            return instance.helpers.each(context, options);
          } else {
            return inverse(this);
          }
        } else {
          if (options.data && options.ids) {
            var data = _utils.createFrame(options.data);
            data.contextPath = _utils.appendContextPath(options.data.contextPath, options.name);
            options = { data };
          }
          return fn(context, options);
        }
      });
    };
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/helpers/each.js
var require_each = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/helpers/each.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _utils = require_utils();
    var _exception = require_exception();
    var _exception2 = _interopRequireDefault(_exception);
    exports["default"] = function(instance) {
      instance.registerHelper("each", function(context, options) {
        if (!options) {
          throw new _exception2["default"]("Must pass iterator to #each");
        }
        var fn = options.fn, inverse = options.inverse, i = 0, ret = "", data = void 0, contextPath = void 0;
        if (options.data && options.ids) {
          contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]) + ".";
        }
        if (_utils.isFunction(context)) {
          context = context.call(this);
        }
        if (options.data) {
          data = _utils.createFrame(options.data);
        }
        function execIteration(field, index3, last) {
          if (data) {
            data.key = field;
            data.index = index3;
            data.first = index3 === 0;
            data.last = !!last;
            if (contextPath) {
              data.contextPath = contextPath + field;
            }
          }
          ret = ret + fn(context[field], {
            data,
            blockParams: _utils.blockParams([context[field], field], [contextPath + field, null])
          });
        }
        if (context && typeof context === "object") {
          if (_utils.isArray(context)) {
            for (var j = context.length; i < j; i++) {
              if (i in context) {
                execIteration(i, i, i === context.length - 1);
              }
            }
          } else if (global.Symbol && context[global.Symbol.iterator]) {
            var newContext = [];
            var iterator = context[global.Symbol.iterator]();
            for (var it = iterator.next(); !it.done; it = iterator.next()) {
              newContext.push(it.value);
            }
            context = newContext;
            for (var j = context.length; i < j; i++) {
              execIteration(i, i, i === context.length - 1);
            }
          } else {
            (function() {
              var priorKey = void 0;
              Object.keys(context).forEach(function(key) {
                if (priorKey !== void 0) {
                  execIteration(priorKey, i - 1);
                }
                priorKey = key;
                i++;
              });
              if (priorKey !== void 0) {
                execIteration(priorKey, i - 1, true);
              }
            })();
          }
        }
        if (i === 0) {
          ret = inverse(this);
        }
        return ret;
      });
    };
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/helpers/helper-missing.js
var require_helper_missing = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/helpers/helper-missing.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _exception = require_exception();
    var _exception2 = _interopRequireDefault(_exception);
    exports["default"] = function(instance) {
      instance.registerHelper("helperMissing", function() {
        if (arguments.length === 1) {
          return void 0;
        } else {
          throw new _exception2["default"]('Missing helper: "' + arguments[arguments.length - 1].name + '"');
        }
      });
    };
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/helpers/if.js
var require_if = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/helpers/if.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _utils = require_utils();
    var _exception = require_exception();
    var _exception2 = _interopRequireDefault(_exception);
    exports["default"] = function(instance) {
      instance.registerHelper("if", function(conditional, options) {
        if (arguments.length != 2) {
          throw new _exception2["default"]("#if requires exactly one argument");
        }
        if (_utils.isFunction(conditional)) {
          conditional = conditional.call(this);
        }
        if (!options.hash.includeZero && !conditional || _utils.isEmpty(conditional)) {
          return options.inverse(this);
        } else {
          return options.fn(this);
        }
      });
      instance.registerHelper("unless", function(conditional, options) {
        if (arguments.length != 2) {
          throw new _exception2["default"]("#unless requires exactly one argument");
        }
        return instance.helpers["if"].call(this, conditional, {
          fn: options.inverse,
          inverse: options.fn,
          hash: options.hash
        });
      });
    };
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/helpers/log.js
var require_log = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/helpers/log.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    exports["default"] = function(instance) {
      instance.registerHelper("log", function() {
        var args = [void 0], options = arguments[arguments.length - 1];
        for (var i = 0; i < arguments.length - 1; i++) {
          args.push(arguments[i]);
        }
        var level = 1;
        if (options.hash.level != null) {
          level = options.hash.level;
        } else if (options.data && options.data.level != null) {
          level = options.data.level;
        }
        args[0] = level;
        instance.log.apply(instance, args);
      });
    };
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/helpers/lookup.js
var require_lookup = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/helpers/lookup.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    exports["default"] = function(instance) {
      instance.registerHelper("lookup", function(obj, field, options) {
        if (!obj) {
          return obj;
        }
        return options.lookupProperty(obj, field);
      });
    };
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/helpers/with.js
var require_with = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/helpers/with.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _utils = require_utils();
    var _exception = require_exception();
    var _exception2 = _interopRequireDefault(_exception);
    exports["default"] = function(instance) {
      instance.registerHelper("with", function(context, options) {
        if (arguments.length != 2) {
          throw new _exception2["default"]("#with requires exactly one argument");
        }
        if (_utils.isFunction(context)) {
          context = context.call(this);
        }
        var fn = options.fn;
        if (!_utils.isEmpty(context)) {
          var data = options.data;
          if (options.data && options.ids) {
            data = _utils.createFrame(options.data);
            data.contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]);
          }
          return fn(context, {
            data,
            blockParams: _utils.blockParams([context], [data && data.contextPath])
          });
        } else {
          return options.inverse(this);
        }
      });
    };
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/helpers.js
var require_helpers = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/helpers.js"(exports) {
    "use strict";
    exports.__esModule = true;
    exports.registerDefaultHelpers = registerDefaultHelpers;
    exports.moveHelperToHooks = moveHelperToHooks;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _helpersBlockHelperMissing = require_block_helper_missing();
    var _helpersBlockHelperMissing2 = _interopRequireDefault(_helpersBlockHelperMissing);
    var _helpersEach = require_each();
    var _helpersEach2 = _interopRequireDefault(_helpersEach);
    var _helpersHelperMissing = require_helper_missing();
    var _helpersHelperMissing2 = _interopRequireDefault(_helpersHelperMissing);
    var _helpersIf = require_if();
    var _helpersIf2 = _interopRequireDefault(_helpersIf);
    var _helpersLog = require_log();
    var _helpersLog2 = _interopRequireDefault(_helpersLog);
    var _helpersLookup = require_lookup();
    var _helpersLookup2 = _interopRequireDefault(_helpersLookup);
    var _helpersWith = require_with();
    var _helpersWith2 = _interopRequireDefault(_helpersWith);
    function registerDefaultHelpers(instance) {
      _helpersBlockHelperMissing2["default"](instance);
      _helpersEach2["default"](instance);
      _helpersHelperMissing2["default"](instance);
      _helpersIf2["default"](instance);
      _helpersLog2["default"](instance);
      _helpersLookup2["default"](instance);
      _helpersWith2["default"](instance);
    }
    function moveHelperToHooks(instance, helperName, keepHelper) {
      if (instance.helpers[helperName]) {
        instance.hooks[helperName] = instance.helpers[helperName];
        if (!keepHelper) {
          delete instance.helpers[helperName];
        }
      }
    }
  }
});

// node_modules/handlebars/dist/cjs/handlebars/decorators/inline.js
var require_inline = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/decorators/inline.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    var _utils = require_utils();
    exports["default"] = function(instance) {
      instance.registerDecorator("inline", function(fn, props, container, options) {
        var ret = fn;
        if (!props.partials) {
          props.partials = {};
          ret = function(context, options2) {
            var original = container.partials;
            container.partials = _utils.extend({}, original, props.partials);
            var ret2 = fn(context, options2);
            container.partials = original;
            return ret2;
          };
        }
        props.partials[options.args[0]] = options.fn;
        return ret;
      });
    };
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/decorators.js
var require_decorators = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/decorators.js"(exports) {
    "use strict";
    exports.__esModule = true;
    exports.registerDefaultDecorators = registerDefaultDecorators;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _decoratorsInline = require_inline();
    var _decoratorsInline2 = _interopRequireDefault(_decoratorsInline);
    function registerDefaultDecorators(instance) {
      _decoratorsInline2["default"](instance);
    }
  }
});

// node_modules/handlebars/dist/cjs/handlebars/logger.js
var require_logger = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/logger.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    var _utils = require_utils();
    var logger = {
      methodMap: ["debug", "info", "warn", "error"],
      level: "info",
      lookupLevel: function lookupLevel(level) {
        if (typeof level === "string") {
          var levelMap = _utils.indexOf(logger.methodMap, level.toLowerCase());
          if (levelMap >= 0) {
            level = levelMap;
          } else {
            level = parseInt(level, 10);
          }
        }
        return level;
      },
      log: function log4(level) {
        level = logger.lookupLevel(level);
        if (typeof console !== "undefined" && logger.lookupLevel(logger.level) <= level) {
          var method = logger.methodMap[level];
          if (!console[method]) {
            method = "log";
          }
          for (var _len = arguments.length, message = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
            message[_key - 1] = arguments[_key];
          }
          console[method].apply(console, message);
        }
      }
    };
    exports["default"] = logger;
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/internal/create-new-lookup-object.js
var require_create_new_lookup_object = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/internal/create-new-lookup-object.js"(exports) {
    "use strict";
    exports.__esModule = true;
    exports.createNewLookupObject = createNewLookupObject;
    var _utils = require_utils();
    function createNewLookupObject() {
      for (var _len = arguments.length, sources = Array(_len), _key = 0; _key < _len; _key++) {
        sources[_key] = arguments[_key];
      }
      return _utils.extend.apply(void 0, [/* @__PURE__ */ Object.create(null)].concat(sources));
    }
  }
});

// node_modules/handlebars/dist/cjs/handlebars/internal/proto-access.js
var require_proto_access = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/internal/proto-access.js"(exports) {
    "use strict";
    exports.__esModule = true;
    exports.createProtoAccessControl = createProtoAccessControl;
    exports.resultIsAllowed = resultIsAllowed;
    exports.resetLoggedProperties = resetLoggedProperties;
    function _interopRequireWildcard(obj) {
      if (obj && obj.__esModule) {
        return obj;
      } else {
        var newObj = {};
        if (obj != null) {
          for (var key in obj) {
            if (Object.prototype.hasOwnProperty.call(obj, key))
              newObj[key] = obj[key];
          }
        }
        newObj["default"] = obj;
        return newObj;
      }
    }
    var _createNewLookupObject = require_create_new_lookup_object();
    var _logger = require_logger();
    var logger = _interopRequireWildcard(_logger);
    var loggedProperties = /* @__PURE__ */ Object.create(null);
    function createProtoAccessControl(runtimeOptions) {
      var defaultMethodWhiteList = /* @__PURE__ */ Object.create(null);
      defaultMethodWhiteList["constructor"] = false;
      defaultMethodWhiteList["__defineGetter__"] = false;
      defaultMethodWhiteList["__defineSetter__"] = false;
      defaultMethodWhiteList["__lookupGetter__"] = false;
      var defaultPropertyWhiteList = /* @__PURE__ */ Object.create(null);
      defaultPropertyWhiteList["__proto__"] = false;
      return {
        properties: {
          whitelist: _createNewLookupObject.createNewLookupObject(defaultPropertyWhiteList, runtimeOptions.allowedProtoProperties),
          defaultValue: runtimeOptions.allowProtoPropertiesByDefault
        },
        methods: {
          whitelist: _createNewLookupObject.createNewLookupObject(defaultMethodWhiteList, runtimeOptions.allowedProtoMethods),
          defaultValue: runtimeOptions.allowProtoMethodsByDefault
        }
      };
    }
    function resultIsAllowed(result, protoAccessControl, propertyName) {
      if (typeof result === "function") {
        return checkWhiteList(protoAccessControl.methods, propertyName);
      } else {
        return checkWhiteList(protoAccessControl.properties, propertyName);
      }
    }
    function checkWhiteList(protoAccessControlForType, propertyName) {
      if (protoAccessControlForType.whitelist[propertyName] !== void 0) {
        return protoAccessControlForType.whitelist[propertyName] === true;
      }
      if (protoAccessControlForType.defaultValue !== void 0) {
        return protoAccessControlForType.defaultValue;
      }
      logUnexpecedPropertyAccessOnce(propertyName);
      return false;
    }
    function logUnexpecedPropertyAccessOnce(propertyName) {
      if (loggedProperties[propertyName] !== true) {
        loggedProperties[propertyName] = true;
        logger.log("error", 'Handlebars: Access has been denied to resolve the property "' + propertyName + '" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details');
      }
    }
    function resetLoggedProperties() {
      Object.keys(loggedProperties).forEach(function(propertyName) {
        delete loggedProperties[propertyName];
      });
    }
  }
});

// node_modules/handlebars/dist/cjs/handlebars/base.js
var require_base = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/base.js"(exports) {
    "use strict";
    exports.__esModule = true;
    exports.HandlebarsEnvironment = HandlebarsEnvironment;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _utils = require_utils();
    var _exception = require_exception();
    var _exception2 = _interopRequireDefault(_exception);
    var _helpers = require_helpers();
    var _decorators = require_decorators();
    var _logger = require_logger();
    var _logger2 = _interopRequireDefault(_logger);
    var _internalProtoAccess = require_proto_access();
    var VERSION2 = "4.7.7";
    exports.VERSION = VERSION2;
    var COMPILER_REVISION = 8;
    exports.COMPILER_REVISION = COMPILER_REVISION;
    var LAST_COMPATIBLE_COMPILER_REVISION = 7;
    exports.LAST_COMPATIBLE_COMPILER_REVISION = LAST_COMPATIBLE_COMPILER_REVISION;
    var REVISION_CHANGES = {
      1: "<= 1.0.rc.2",
      2: "== 1.0.0-rc.3",
      3: "== 1.0.0-rc.4",
      4: "== 1.x.x",
      5: "== 2.0.0-alpha.x",
      6: ">= 2.0.0-beta.1",
      7: ">= 4.0.0 <4.3.0",
      8: ">= 4.3.0"
    };
    exports.REVISION_CHANGES = REVISION_CHANGES;
    var objectType = "[object Object]";
    function HandlebarsEnvironment(helpers, partials, decorators) {
      this.helpers = helpers || {};
      this.partials = partials || {};
      this.decorators = decorators || {};
      _helpers.registerDefaultHelpers(this);
      _decorators.registerDefaultDecorators(this);
    }
    HandlebarsEnvironment.prototype = {
      constructor: HandlebarsEnvironment,
      logger: _logger2["default"],
      log: _logger2["default"].log,
      registerHelper: function registerHelper(name, fn) {
        if (_utils.toString.call(name) === objectType) {
          if (fn) {
            throw new _exception2["default"]("Arg not supported with multiple helpers");
          }
          _utils.extend(this.helpers, name);
        } else {
          this.helpers[name] = fn;
        }
      },
      unregisterHelper: function unregisterHelper(name) {
        delete this.helpers[name];
      },
      registerPartial: function registerPartial(name, partial) {
        if (_utils.toString.call(name) === objectType) {
          _utils.extend(this.partials, name);
        } else {
          if (typeof partial === "undefined") {
            throw new _exception2["default"]('Attempting to register a partial called "' + name + '" as undefined');
          }
          this.partials[name] = partial;
        }
      },
      unregisterPartial: function unregisterPartial(name) {
        delete this.partials[name];
      },
      registerDecorator: function registerDecorator(name, fn) {
        if (_utils.toString.call(name) === objectType) {
          if (fn) {
            throw new _exception2["default"]("Arg not supported with multiple decorators");
          }
          _utils.extend(this.decorators, name);
        } else {
          this.decorators[name] = fn;
        }
      },
      unregisterDecorator: function unregisterDecorator(name) {
        delete this.decorators[name];
      },
      resetLoggedPropertyAccesses: function resetLoggedPropertyAccesses() {
        _internalProtoAccess.resetLoggedProperties();
      }
    };
    var log4 = _logger2["default"].log;
    exports.log = log4;
    exports.createFrame = _utils.createFrame;
    exports.logger = _logger2["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/safe-string.js
var require_safe_string = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/safe-string.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    function SafeString(string) {
      this.string = string;
    }
    SafeString.prototype.toString = SafeString.prototype.toHTML = function() {
      return "" + this.string;
    };
    exports["default"] = SafeString;
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/internal/wrapHelper.js
var require_wrapHelper = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/internal/wrapHelper.js"(exports) {
    "use strict";
    exports.__esModule = true;
    exports.wrapHelper = wrapHelper;
    function wrapHelper(helper, transformOptionsFn) {
      if (typeof helper !== "function") {
        return helper;
      }
      var wrapper = function wrapper2() {
        var options = arguments[arguments.length - 1];
        arguments[arguments.length - 1] = transformOptionsFn(options);
        return helper.apply(this, arguments);
      };
      return wrapper;
    }
  }
});

// node_modules/handlebars/dist/cjs/handlebars/runtime.js
var require_runtime = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/runtime.js"(exports) {
    "use strict";
    exports.__esModule = true;
    exports.checkRevision = checkRevision;
    exports.template = template;
    exports.wrapProgram = wrapProgram;
    exports.resolvePartial = resolvePartial;
    exports.invokePartial = invokePartial;
    exports.noop = noop3;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    function _interopRequireWildcard(obj) {
      if (obj && obj.__esModule) {
        return obj;
      } else {
        var newObj = {};
        if (obj != null) {
          for (var key in obj) {
            if (Object.prototype.hasOwnProperty.call(obj, key))
              newObj[key] = obj[key];
          }
        }
        newObj["default"] = obj;
        return newObj;
      }
    }
    var _utils = require_utils();
    var Utils = _interopRequireWildcard(_utils);
    var _exception = require_exception();
    var _exception2 = _interopRequireDefault(_exception);
    var _base = require_base();
    var _helpers = require_helpers();
    var _internalWrapHelper = require_wrapHelper();
    var _internalProtoAccess = require_proto_access();
    function checkRevision(compilerInfo) {
      var compilerRevision = compilerInfo && compilerInfo[0] || 1, currentRevision = _base.COMPILER_REVISION;
      if (compilerRevision >= _base.LAST_COMPATIBLE_COMPILER_REVISION && compilerRevision <= _base.COMPILER_REVISION) {
        return;
      }
      if (compilerRevision < _base.LAST_COMPATIBLE_COMPILER_REVISION) {
        var runtimeVersions = _base.REVISION_CHANGES[currentRevision], compilerVersions = _base.REVISION_CHANGES[compilerRevision];
        throw new _exception2["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (" + runtimeVersions + ") or downgrade your runtime to an older version (" + compilerVersions + ").");
      } else {
        throw new _exception2["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (" + compilerInfo[1] + ").");
      }
    }
    function template(templateSpec, env) {
      if (!env) {
        throw new _exception2["default"]("No environment passed to template");
      }
      if (!templateSpec || !templateSpec.main) {
        throw new _exception2["default"]("Unknown template object: " + typeof templateSpec);
      }
      templateSpec.main.decorator = templateSpec.main_d;
      env.VM.checkRevision(templateSpec.compiler);
      var templateWasPrecompiledWithCompilerV7 = templateSpec.compiler && templateSpec.compiler[0] === 7;
      function invokePartialWrapper(partial, context, options) {
        if (options.hash) {
          context = Utils.extend({}, context, options.hash);
          if (options.ids) {
            options.ids[0] = true;
          }
        }
        partial = env.VM.resolvePartial.call(this, partial, context, options);
        var extendedOptions = Utils.extend({}, options, {
          hooks: this.hooks,
          protoAccessControl: this.protoAccessControl
        });
        var result = env.VM.invokePartial.call(this, partial, context, extendedOptions);
        if (result == null && env.compile) {
          options.partials[options.name] = env.compile(partial, templateSpec.compilerOptions, env);
          result = options.partials[options.name](context, extendedOptions);
        }
        if (result != null) {
          if (options.indent) {
            var lines = result.split("\n");
            for (var i = 0, l2 = lines.length; i < l2; i++) {
              if (!lines[i] && i + 1 === l2) {
                break;
              }
              lines[i] = options.indent + lines[i];
            }
            result = lines.join("\n");
          }
          return result;
        } else {
          throw new _exception2["default"]("The partial " + options.name + " could not be compiled when running in runtime-only mode");
        }
      }
      var container = {
        strict: function strict(obj, name, loc) {
          if (!obj || !(name in obj)) {
            throw new _exception2["default"]('"' + name + '" not defined in ' + obj, {
              loc
            });
          }
          return container.lookupProperty(obj, name);
        },
        lookupProperty: function lookupProperty(parent, propertyName) {
          var result = parent[propertyName];
          if (result == null) {
            return result;
          }
          if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
            return result;
          }
          if (_internalProtoAccess.resultIsAllowed(result, container.protoAccessControl, propertyName)) {
            return result;
          }
          return void 0;
        },
        lookup: function lookup(depths, name) {
          var len = depths.length;
          for (var i = 0; i < len; i++) {
            var result = depths[i] && container.lookupProperty(depths[i], name);
            if (result != null) {
              return depths[i][name];
            }
          }
        },
        lambda: function lambda(current, context) {
          return typeof current === "function" ? current.call(context) : current;
        },
        escapeExpression: Utils.escapeExpression,
        invokePartial: invokePartialWrapper,
        fn: function fn(i) {
          var ret2 = templateSpec[i];
          ret2.decorator = templateSpec[i + "_d"];
          return ret2;
        },
        programs: [],
        program: function program(i, data, declaredBlockParams, blockParams, depths) {
          var programWrapper = this.programs[i], fn = this.fn(i);
          if (data || depths || blockParams || declaredBlockParams) {
            programWrapper = wrapProgram(this, i, fn, data, declaredBlockParams, blockParams, depths);
          } else if (!programWrapper) {
            programWrapper = this.programs[i] = wrapProgram(this, i, fn);
          }
          return programWrapper;
        },
        data: function data(value, depth) {
          while (value && depth--) {
            value = value._parent;
          }
          return value;
        },
        mergeIfNeeded: function mergeIfNeeded(param, common) {
          var obj = param || common;
          if (param && common && param !== common) {
            obj = Utils.extend({}, common, param);
          }
          return obj;
        },
        nullContext: Object.seal({}),
        noop: env.VM.noop,
        compilerInfo: templateSpec.compiler
      };
      function ret(context) {
        var options = arguments.length <= 1 || arguments[1] === void 0 ? {} : arguments[1];
        var data = options.data;
        ret._setup(options);
        if (!options.partial && templateSpec.useData) {
          data = initData(context, data);
        }
        var depths = void 0, blockParams = templateSpec.useBlockParams ? [] : void 0;
        if (templateSpec.useDepths) {
          if (options.depths) {
            depths = context != options.depths[0] ? [context].concat(options.depths) : options.depths;
          } else {
            depths = [context];
          }
        }
        function main(context2) {
          return "" + templateSpec.main(container, context2, container.helpers, container.partials, data, blockParams, depths);
        }
        main = executeDecorators(templateSpec.main, main, container, options.depths || [], data, blockParams);
        return main(context, options);
      }
      ret.isTop = true;
      ret._setup = function(options) {
        if (!options.partial) {
          var mergedHelpers = Utils.extend({}, env.helpers, options.helpers);
          wrapHelpersToPassLookupProperty(mergedHelpers, container);
          container.helpers = mergedHelpers;
          if (templateSpec.usePartial) {
            container.partials = container.mergeIfNeeded(options.partials, env.partials);
          }
          if (templateSpec.usePartial || templateSpec.useDecorators) {
            container.decorators = Utils.extend({}, env.decorators, options.decorators);
          }
          container.hooks = {};
          container.protoAccessControl = _internalProtoAccess.createProtoAccessControl(options);
          var keepHelperInHelpers = options.allowCallsToHelperMissing || templateWasPrecompiledWithCompilerV7;
          _helpers.moveHelperToHooks(container, "helperMissing", keepHelperInHelpers);
          _helpers.moveHelperToHooks(container, "blockHelperMissing", keepHelperInHelpers);
        } else {
          container.protoAccessControl = options.protoAccessControl;
          container.helpers = options.helpers;
          container.partials = options.partials;
          container.decorators = options.decorators;
          container.hooks = options.hooks;
        }
      };
      ret._child = function(i, data, blockParams, depths) {
        if (templateSpec.useBlockParams && !blockParams) {
          throw new _exception2["default"]("must pass block params");
        }
        if (templateSpec.useDepths && !depths) {
          throw new _exception2["default"]("must pass parent depths");
        }
        return wrapProgram(container, i, templateSpec[i], data, 0, blockParams, depths);
      };
      return ret;
    }
    function wrapProgram(container, i, fn, data, declaredBlockParams, blockParams, depths) {
      function prog(context) {
        var options = arguments.length <= 1 || arguments[1] === void 0 ? {} : arguments[1];
        var currentDepths = depths;
        if (depths && context != depths[0] && !(context === container.nullContext && depths[0] === null)) {
          currentDepths = [context].concat(depths);
        }
        return fn(container, context, container.helpers, container.partials, options.data || data, blockParams && [options.blockParams].concat(blockParams), currentDepths);
      }
      prog = executeDecorators(fn, prog, container, depths, data, blockParams);
      prog.program = i;
      prog.depth = depths ? depths.length : 0;
      prog.blockParams = declaredBlockParams || 0;
      return prog;
    }
    function resolvePartial(partial, context, options) {
      if (!partial) {
        if (options.name === "@partial-block") {
          partial = options.data["partial-block"];
        } else {
          partial = options.partials[options.name];
        }
      } else if (!partial.call && !options.name) {
        options.name = partial;
        partial = options.partials[partial];
      }
      return partial;
    }
    function invokePartial(partial, context, options) {
      var currentPartialBlock = options.data && options.data["partial-block"];
      options.partial = true;
      if (options.ids) {
        options.data.contextPath = options.ids[0] || options.data.contextPath;
      }
      var partialBlock = void 0;
      if (options.fn && options.fn !== noop3) {
        (function() {
          options.data = _base.createFrame(options.data);
          var fn = options.fn;
          partialBlock = options.data["partial-block"] = function partialBlockWrapper(context2) {
            var options2 = arguments.length <= 1 || arguments[1] === void 0 ? {} : arguments[1];
            options2.data = _base.createFrame(options2.data);
            options2.data["partial-block"] = currentPartialBlock;
            return fn(context2, options2);
          };
          if (fn.partials) {
            options.partials = Utils.extend({}, options.partials, fn.partials);
          }
        })();
      }
      if (partial === void 0 && partialBlock) {
        partial = partialBlock;
      }
      if (partial === void 0) {
        throw new _exception2["default"]("The partial " + options.name + " could not be found");
      } else if (partial instanceof Function) {
        return partial(context, options);
      }
    }
    function noop3() {
      return "";
    }
    function initData(context, data) {
      if (!data || !("root" in data)) {
        data = data ? _base.createFrame(data) : {};
        data.root = context;
      }
      return data;
    }
    function executeDecorators(fn, prog, container, depths, data, blockParams) {
      if (fn.decorator) {
        var props = {};
        prog = fn.decorator(prog, props, container, depths && depths[0], data, blockParams, depths);
        Utils.extend(prog, props);
      }
      return prog;
    }
    function wrapHelpersToPassLookupProperty(mergedHelpers, container) {
      Object.keys(mergedHelpers).forEach(function(helperName) {
        var helper = mergedHelpers[helperName];
        mergedHelpers[helperName] = passLookupPropertyOption(helper, container);
      });
    }
    function passLookupPropertyOption(helper, container) {
      var lookupProperty = container.lookupProperty;
      return _internalWrapHelper.wrapHelper(helper, function(options) {
        return Utils.extend({ lookupProperty }, options);
      });
    }
  }
});

// node_modules/handlebars/dist/cjs/handlebars/no-conflict.js
var require_no_conflict = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/no-conflict.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    exports["default"] = function(Handlebars2) {
      var root3 = typeof global !== "undefined" ? global : window, $Handlebars = root3.Handlebars;
      Handlebars2.noConflict = function() {
        if (root3.Handlebars === Handlebars2) {
          root3.Handlebars = $Handlebars;
        }
        return Handlebars2;
      };
    };
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars.runtime.js
var require_handlebars_runtime = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars.runtime.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    function _interopRequireWildcard(obj) {
      if (obj && obj.__esModule) {
        return obj;
      } else {
        var newObj = {};
        if (obj != null) {
          for (var key in obj) {
            if (Object.prototype.hasOwnProperty.call(obj, key))
              newObj[key] = obj[key];
          }
        }
        newObj["default"] = obj;
        return newObj;
      }
    }
    var _handlebarsBase = require_base();
    var base = _interopRequireWildcard(_handlebarsBase);
    var _handlebarsSafeString = require_safe_string();
    var _handlebarsSafeString2 = _interopRequireDefault(_handlebarsSafeString);
    var _handlebarsException = require_exception();
    var _handlebarsException2 = _interopRequireDefault(_handlebarsException);
    var _handlebarsUtils = require_utils();
    var Utils = _interopRequireWildcard(_handlebarsUtils);
    var _handlebarsRuntime = require_runtime();
    var runtime = _interopRequireWildcard(_handlebarsRuntime);
    var _handlebarsNoConflict = require_no_conflict();
    var _handlebarsNoConflict2 = _interopRequireDefault(_handlebarsNoConflict);
    function create2() {
      var hb = new base.HandlebarsEnvironment();
      Utils.extend(hb, base);
      hb.SafeString = _handlebarsSafeString2["default"];
      hb.Exception = _handlebarsException2["default"];
      hb.Utils = Utils;
      hb.escapeExpression = Utils.escapeExpression;
      hb.VM = runtime;
      hb.template = function(spec) {
        return runtime.template(spec, hb);
      };
      return hb;
    }
    var inst = create2();
    inst.create = create2;
    _handlebarsNoConflict2["default"](inst);
    inst["default"] = inst;
    exports["default"] = inst;
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/compiler/ast.js
var require_ast = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/compiler/ast.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    var AST = {
      helpers: {
        helperExpression: function helperExpression(node) {
          return node.type === "SubExpression" || (node.type === "MustacheStatement" || node.type === "BlockStatement") && !!(node.params && node.params.length || node.hash);
        },
        scopedId: function scopedId(path2) {
          return /^\.|this\b/.test(path2.original);
        },
        simpleId: function simpleId(path2) {
          return path2.parts.length === 1 && !AST.helpers.scopedId(path2) && !path2.depth;
        }
      }
    };
    exports["default"] = AST;
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/compiler/parser.js
var require_parser = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/compiler/parser.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    var handlebars = function() {
      var parser2 = {
        trace: function trace() {
        },
        yy: {},
        symbols_: { "error": 2, "root": 3, "program": 4, "EOF": 5, "program_repetition0": 6, "statement": 7, "mustache": 8, "block": 9, "rawBlock": 10, "partial": 11, "partialBlock": 12, "content": 13, "COMMENT": 14, "CONTENT": 15, "openRawBlock": 16, "rawBlock_repetition0": 17, "END_RAW_BLOCK": 18, "OPEN_RAW_BLOCK": 19, "helperName": 20, "openRawBlock_repetition0": 21, "openRawBlock_option0": 22, "CLOSE_RAW_BLOCK": 23, "openBlock": 24, "block_option0": 25, "closeBlock": 26, "openInverse": 27, "block_option1": 28, "OPEN_BLOCK": 29, "openBlock_repetition0": 30, "openBlock_option0": 31, "openBlock_option1": 32, "CLOSE": 33, "OPEN_INVERSE": 34, "openInverse_repetition0": 35, "openInverse_option0": 36, "openInverse_option1": 37, "openInverseChain": 38, "OPEN_INVERSE_CHAIN": 39, "openInverseChain_repetition0": 40, "openInverseChain_option0": 41, "openInverseChain_option1": 42, "inverseAndProgram": 43, "INVERSE": 44, "inverseChain": 45, "inverseChain_option0": 46, "OPEN_ENDBLOCK": 47, "OPEN": 48, "mustache_repetition0": 49, "mustache_option0": 50, "OPEN_UNESCAPED": 51, "mustache_repetition1": 52, "mustache_option1": 53, "CLOSE_UNESCAPED": 54, "OPEN_PARTIAL": 55, "partialName": 56, "partial_repetition0": 57, "partial_option0": 58, "openPartialBlock": 59, "OPEN_PARTIAL_BLOCK": 60, "openPartialBlock_repetition0": 61, "openPartialBlock_option0": 62, "param": 63, "sexpr": 64, "OPEN_SEXPR": 65, "sexpr_repetition0": 66, "sexpr_option0": 67, "CLOSE_SEXPR": 68, "hash": 69, "hash_repetition_plus0": 70, "hashSegment": 71, "ID": 72, "EQUALS": 73, "blockParams": 74, "OPEN_BLOCK_PARAMS": 75, "blockParams_repetition_plus0": 76, "CLOSE_BLOCK_PARAMS": 77, "path": 78, "dataName": 79, "STRING": 80, "NUMBER": 81, "BOOLEAN": 82, "UNDEFINED": 83, "NULL": 84, "DATA": 85, "pathSegments": 86, "SEP": 87, "$accept": 0, "$end": 1 },
        terminals_: { 2: "error", 5: "EOF", 14: "COMMENT", 15: "CONTENT", 18: "END_RAW_BLOCK", 19: "OPEN_RAW_BLOCK", 23: "CLOSE_RAW_BLOCK", 29: "OPEN_BLOCK", 33: "CLOSE", 34: "OPEN_INVERSE", 39: "OPEN_INVERSE_CHAIN", 44: "INVERSE", 47: "OPEN_ENDBLOCK", 48: "OPEN", 51: "OPEN_UNESCAPED", 54: "CLOSE_UNESCAPED", 55: "OPEN_PARTIAL", 60: "OPEN_PARTIAL_BLOCK", 65: "OPEN_SEXPR", 68: "CLOSE_SEXPR", 72: "ID", 73: "EQUALS", 75: "OPEN_BLOCK_PARAMS", 77: "CLOSE_BLOCK_PARAMS", 80: "STRING", 81: "NUMBER", 82: "BOOLEAN", 83: "UNDEFINED", 84: "NULL", 85: "DATA", 87: "SEP" },
        productions_: [0, [3, 2], [4, 1], [7, 1], [7, 1], [7, 1], [7, 1], [7, 1], [7, 1], [7, 1], [13, 1], [10, 3], [16, 5], [9, 4], [9, 4], [24, 6], [27, 6], [38, 6], [43, 2], [45, 3], [45, 1], [26, 3], [8, 5], [8, 5], [11, 5], [12, 3], [59, 5], [63, 1], [63, 1], [64, 5], [69, 1], [71, 3], [74, 3], [20, 1], [20, 1], [20, 1], [20, 1], [20, 1], [20, 1], [20, 1], [56, 1], [56, 1], [79, 2], [78, 1], [86, 3], [86, 1], [6, 0], [6, 2], [17, 0], [17, 2], [21, 0], [21, 2], [22, 0], [22, 1], [25, 0], [25, 1], [28, 0], [28, 1], [30, 0], [30, 2], [31, 0], [31, 1], [32, 0], [32, 1], [35, 0], [35, 2], [36, 0], [36, 1], [37, 0], [37, 1], [40, 0], [40, 2], [41, 0], [41, 1], [42, 0], [42, 1], [46, 0], [46, 1], [49, 0], [49, 2], [50, 0], [50, 1], [52, 0], [52, 2], [53, 0], [53, 1], [57, 0], [57, 2], [58, 0], [58, 1], [61, 0], [61, 2], [62, 0], [62, 1], [66, 0], [66, 2], [67, 0], [67, 1], [70, 1], [70, 2], [76, 1], [76, 2]],
        performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$) {
          var $0 = $$.length - 1;
          switch (yystate) {
            case 1:
              return $$[$0 - 1];
              break;
            case 2:
              this.$ = yy.prepareProgram($$[$0]);
              break;
            case 3:
              this.$ = $$[$0];
              break;
            case 4:
              this.$ = $$[$0];
              break;
            case 5:
              this.$ = $$[$0];
              break;
            case 6:
              this.$ = $$[$0];
              break;
            case 7:
              this.$ = $$[$0];
              break;
            case 8:
              this.$ = $$[$0];
              break;
            case 9:
              this.$ = {
                type: "CommentStatement",
                value: yy.stripComment($$[$0]),
                strip: yy.stripFlags($$[$0], $$[$0]),
                loc: yy.locInfo(this._$)
              };
              break;
            case 10:
              this.$ = {
                type: "ContentStatement",
                original: $$[$0],
                value: $$[$0],
                loc: yy.locInfo(this._$)
              };
              break;
            case 11:
              this.$ = yy.prepareRawBlock($$[$0 - 2], $$[$0 - 1], $$[$0], this._$);
              break;
            case 12:
              this.$ = { path: $$[$0 - 3], params: $$[$0 - 2], hash: $$[$0 - 1] };
              break;
            case 13:
              this.$ = yy.prepareBlock($$[$0 - 3], $$[$0 - 2], $$[$0 - 1], $$[$0], false, this._$);
              break;
            case 14:
              this.$ = yy.prepareBlock($$[$0 - 3], $$[$0 - 2], $$[$0 - 1], $$[$0], true, this._$);
              break;
            case 15:
              this.$ = { open: $$[$0 - 5], path: $$[$0 - 4], params: $$[$0 - 3], hash: $$[$0 - 2], blockParams: $$[$0 - 1], strip: yy.stripFlags($$[$0 - 5], $$[$0]) };
              break;
            case 16:
              this.$ = { path: $$[$0 - 4], params: $$[$0 - 3], hash: $$[$0 - 2], blockParams: $$[$0 - 1], strip: yy.stripFlags($$[$0 - 5], $$[$0]) };
              break;
            case 17:
              this.$ = { path: $$[$0 - 4], params: $$[$0 - 3], hash: $$[$0 - 2], blockParams: $$[$0 - 1], strip: yy.stripFlags($$[$0 - 5], $$[$0]) };
              break;
            case 18:
              this.$ = { strip: yy.stripFlags($$[$0 - 1], $$[$0 - 1]), program: $$[$0] };
              break;
            case 19:
              var inverse = yy.prepareBlock($$[$0 - 2], $$[$0 - 1], $$[$0], $$[$0], false, this._$), program = yy.prepareProgram([inverse], $$[$0 - 1].loc);
              program.chained = true;
              this.$ = { strip: $$[$0 - 2].strip, program, chain: true };
              break;
            case 20:
              this.$ = $$[$0];
              break;
            case 21:
              this.$ = { path: $$[$0 - 1], strip: yy.stripFlags($$[$0 - 2], $$[$0]) };
              break;
            case 22:
              this.$ = yy.prepareMustache($$[$0 - 3], $$[$0 - 2], $$[$0 - 1], $$[$0 - 4], yy.stripFlags($$[$0 - 4], $$[$0]), this._$);
              break;
            case 23:
              this.$ = yy.prepareMustache($$[$0 - 3], $$[$0 - 2], $$[$0 - 1], $$[$0 - 4], yy.stripFlags($$[$0 - 4], $$[$0]), this._$);
              break;
            case 24:
              this.$ = {
                type: "PartialStatement",
                name: $$[$0 - 3],
                params: $$[$0 - 2],
                hash: $$[$0 - 1],
                indent: "",
                strip: yy.stripFlags($$[$0 - 4], $$[$0]),
                loc: yy.locInfo(this._$)
              };
              break;
            case 25:
              this.$ = yy.preparePartialBlock($$[$0 - 2], $$[$0 - 1], $$[$0], this._$);
              break;
            case 26:
              this.$ = { path: $$[$0 - 3], params: $$[$0 - 2], hash: $$[$0 - 1], strip: yy.stripFlags($$[$0 - 4], $$[$0]) };
              break;
            case 27:
              this.$ = $$[$0];
              break;
            case 28:
              this.$ = $$[$0];
              break;
            case 29:
              this.$ = {
                type: "SubExpression",
                path: $$[$0 - 3],
                params: $$[$0 - 2],
                hash: $$[$0 - 1],
                loc: yy.locInfo(this._$)
              };
              break;
            case 30:
              this.$ = { type: "Hash", pairs: $$[$0], loc: yy.locInfo(this._$) };
              break;
            case 31:
              this.$ = { type: "HashPair", key: yy.id($$[$0 - 2]), value: $$[$0], loc: yy.locInfo(this._$) };
              break;
            case 32:
              this.$ = yy.id($$[$0 - 1]);
              break;
            case 33:
              this.$ = $$[$0];
              break;
            case 34:
              this.$ = $$[$0];
              break;
            case 35:
              this.$ = { type: "StringLiteral", value: $$[$0], original: $$[$0], loc: yy.locInfo(this._$) };
              break;
            case 36:
              this.$ = { type: "NumberLiteral", value: Number($$[$0]), original: Number($$[$0]), loc: yy.locInfo(this._$) };
              break;
            case 37:
              this.$ = { type: "BooleanLiteral", value: $$[$0] === "true", original: $$[$0] === "true", loc: yy.locInfo(this._$) };
              break;
            case 38:
              this.$ = { type: "UndefinedLiteral", original: void 0, value: void 0, loc: yy.locInfo(this._$) };
              break;
            case 39:
              this.$ = { type: "NullLiteral", original: null, value: null, loc: yy.locInfo(this._$) };
              break;
            case 40:
              this.$ = $$[$0];
              break;
            case 41:
              this.$ = $$[$0];
              break;
            case 42:
              this.$ = yy.preparePath(true, $$[$0], this._$);
              break;
            case 43:
              this.$ = yy.preparePath(false, $$[$0], this._$);
              break;
            case 44:
              $$[$0 - 2].push({ part: yy.id($$[$0]), original: $$[$0], separator: $$[$0 - 1] });
              this.$ = $$[$0 - 2];
              break;
            case 45:
              this.$ = [{ part: yy.id($$[$0]), original: $$[$0] }];
              break;
            case 46:
              this.$ = [];
              break;
            case 47:
              $$[$0 - 1].push($$[$0]);
              break;
            case 48:
              this.$ = [];
              break;
            case 49:
              $$[$0 - 1].push($$[$0]);
              break;
            case 50:
              this.$ = [];
              break;
            case 51:
              $$[$0 - 1].push($$[$0]);
              break;
            case 58:
              this.$ = [];
              break;
            case 59:
              $$[$0 - 1].push($$[$0]);
              break;
            case 64:
              this.$ = [];
              break;
            case 65:
              $$[$0 - 1].push($$[$0]);
              break;
            case 70:
              this.$ = [];
              break;
            case 71:
              $$[$0 - 1].push($$[$0]);
              break;
            case 78:
              this.$ = [];
              break;
            case 79:
              $$[$0 - 1].push($$[$0]);
              break;
            case 82:
              this.$ = [];
              break;
            case 83:
              $$[$0 - 1].push($$[$0]);
              break;
            case 86:
              this.$ = [];
              break;
            case 87:
              $$[$0 - 1].push($$[$0]);
              break;
            case 90:
              this.$ = [];
              break;
            case 91:
              $$[$0 - 1].push($$[$0]);
              break;
            case 94:
              this.$ = [];
              break;
            case 95:
              $$[$0 - 1].push($$[$0]);
              break;
            case 98:
              this.$ = [$$[$0]];
              break;
            case 99:
              $$[$0 - 1].push($$[$0]);
              break;
            case 100:
              this.$ = [$$[$0]];
              break;
            case 101:
              $$[$0 - 1].push($$[$0]);
              break;
          }
        },
        table: [{ 3: 1, 4: 2, 5: [2, 46], 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 1: [3] }, { 5: [1, 4] }, { 5: [2, 2], 7: 5, 8: 6, 9: 7, 10: 8, 11: 9, 12: 10, 13: 11, 14: [1, 12], 15: [1, 20], 16: 17, 19: [1, 23], 24: 15, 27: 16, 29: [1, 21], 34: [1, 22], 39: [2, 2], 44: [2, 2], 47: [2, 2], 48: [1, 13], 51: [1, 14], 55: [1, 18], 59: 19, 60: [1, 24] }, { 1: [2, 1] }, { 5: [2, 47], 14: [2, 47], 15: [2, 47], 19: [2, 47], 29: [2, 47], 34: [2, 47], 39: [2, 47], 44: [2, 47], 47: [2, 47], 48: [2, 47], 51: [2, 47], 55: [2, 47], 60: [2, 47] }, { 5: [2, 3], 14: [2, 3], 15: [2, 3], 19: [2, 3], 29: [2, 3], 34: [2, 3], 39: [2, 3], 44: [2, 3], 47: [2, 3], 48: [2, 3], 51: [2, 3], 55: [2, 3], 60: [2, 3] }, { 5: [2, 4], 14: [2, 4], 15: [2, 4], 19: [2, 4], 29: [2, 4], 34: [2, 4], 39: [2, 4], 44: [2, 4], 47: [2, 4], 48: [2, 4], 51: [2, 4], 55: [2, 4], 60: [2, 4] }, { 5: [2, 5], 14: [2, 5], 15: [2, 5], 19: [2, 5], 29: [2, 5], 34: [2, 5], 39: [2, 5], 44: [2, 5], 47: [2, 5], 48: [2, 5], 51: [2, 5], 55: [2, 5], 60: [2, 5] }, { 5: [2, 6], 14: [2, 6], 15: [2, 6], 19: [2, 6], 29: [2, 6], 34: [2, 6], 39: [2, 6], 44: [2, 6], 47: [2, 6], 48: [2, 6], 51: [2, 6], 55: [2, 6], 60: [2, 6] }, { 5: [2, 7], 14: [2, 7], 15: [2, 7], 19: [2, 7], 29: [2, 7], 34: [2, 7], 39: [2, 7], 44: [2, 7], 47: [2, 7], 48: [2, 7], 51: [2, 7], 55: [2, 7], 60: [2, 7] }, { 5: [2, 8], 14: [2, 8], 15: [2, 8], 19: [2, 8], 29: [2, 8], 34: [2, 8], 39: [2, 8], 44: [2, 8], 47: [2, 8], 48: [2, 8], 51: [2, 8], 55: [2, 8], 60: [2, 8] }, { 5: [2, 9], 14: [2, 9], 15: [2, 9], 19: [2, 9], 29: [2, 9], 34: [2, 9], 39: [2, 9], 44: [2, 9], 47: [2, 9], 48: [2, 9], 51: [2, 9], 55: [2, 9], 60: [2, 9] }, { 20: 25, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 36, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 4: 37, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 39: [2, 46], 44: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 4: 38, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 44: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 15: [2, 48], 17: 39, 18: [2, 48] }, { 20: 41, 56: 40, 64: 42, 65: [1, 43], 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 4: 44, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 5: [2, 10], 14: [2, 10], 15: [2, 10], 18: [2, 10], 19: [2, 10], 29: [2, 10], 34: [2, 10], 39: [2, 10], 44: [2, 10], 47: [2, 10], 48: [2, 10], 51: [2, 10], 55: [2, 10], 60: [2, 10] }, { 20: 45, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 46, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 47, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 41, 56: 48, 64: 42, 65: [1, 43], 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 33: [2, 78], 49: 49, 65: [2, 78], 72: [2, 78], 80: [2, 78], 81: [2, 78], 82: [2, 78], 83: [2, 78], 84: [2, 78], 85: [2, 78] }, { 23: [2, 33], 33: [2, 33], 54: [2, 33], 65: [2, 33], 68: [2, 33], 72: [2, 33], 75: [2, 33], 80: [2, 33], 81: [2, 33], 82: [2, 33], 83: [2, 33], 84: [2, 33], 85: [2, 33] }, { 23: [2, 34], 33: [2, 34], 54: [2, 34], 65: [2, 34], 68: [2, 34], 72: [2, 34], 75: [2, 34], 80: [2, 34], 81: [2, 34], 82: [2, 34], 83: [2, 34], 84: [2, 34], 85: [2, 34] }, { 23: [2, 35], 33: [2, 35], 54: [2, 35], 65: [2, 35], 68: [2, 35], 72: [2, 35], 75: [2, 35], 80: [2, 35], 81: [2, 35], 82: [2, 35], 83: [2, 35], 84: [2, 35], 85: [2, 35] }, { 23: [2, 36], 33: [2, 36], 54: [2, 36], 65: [2, 36], 68: [2, 36], 72: [2, 36], 75: [2, 36], 80: [2, 36], 81: [2, 36], 82: [2, 36], 83: [2, 36], 84: [2, 36], 85: [2, 36] }, { 23: [2, 37], 33: [2, 37], 54: [2, 37], 65: [2, 37], 68: [2, 37], 72: [2, 37], 75: [2, 37], 80: [2, 37], 81: [2, 37], 82: [2, 37], 83: [2, 37], 84: [2, 37], 85: [2, 37] }, { 23: [2, 38], 33: [2, 38], 54: [2, 38], 65: [2, 38], 68: [2, 38], 72: [2, 38], 75: [2, 38], 80: [2, 38], 81: [2, 38], 82: [2, 38], 83: [2, 38], 84: [2, 38], 85: [2, 38] }, { 23: [2, 39], 33: [2, 39], 54: [2, 39], 65: [2, 39], 68: [2, 39], 72: [2, 39], 75: [2, 39], 80: [2, 39], 81: [2, 39], 82: [2, 39], 83: [2, 39], 84: [2, 39], 85: [2, 39] }, { 23: [2, 43], 33: [2, 43], 54: [2, 43], 65: [2, 43], 68: [2, 43], 72: [2, 43], 75: [2, 43], 80: [2, 43], 81: [2, 43], 82: [2, 43], 83: [2, 43], 84: [2, 43], 85: [2, 43], 87: [1, 50] }, { 72: [1, 35], 86: 51 }, { 23: [2, 45], 33: [2, 45], 54: [2, 45], 65: [2, 45], 68: [2, 45], 72: [2, 45], 75: [2, 45], 80: [2, 45], 81: [2, 45], 82: [2, 45], 83: [2, 45], 84: [2, 45], 85: [2, 45], 87: [2, 45] }, { 52: 52, 54: [2, 82], 65: [2, 82], 72: [2, 82], 80: [2, 82], 81: [2, 82], 82: [2, 82], 83: [2, 82], 84: [2, 82], 85: [2, 82] }, { 25: 53, 38: 55, 39: [1, 57], 43: 56, 44: [1, 58], 45: 54, 47: [2, 54] }, { 28: 59, 43: 60, 44: [1, 58], 47: [2, 56] }, { 13: 62, 15: [1, 20], 18: [1, 61] }, { 33: [2, 86], 57: 63, 65: [2, 86], 72: [2, 86], 80: [2, 86], 81: [2, 86], 82: [2, 86], 83: [2, 86], 84: [2, 86], 85: [2, 86] }, { 33: [2, 40], 65: [2, 40], 72: [2, 40], 80: [2, 40], 81: [2, 40], 82: [2, 40], 83: [2, 40], 84: [2, 40], 85: [2, 40] }, { 33: [2, 41], 65: [2, 41], 72: [2, 41], 80: [2, 41], 81: [2, 41], 82: [2, 41], 83: [2, 41], 84: [2, 41], 85: [2, 41] }, { 20: 64, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 26: 65, 47: [1, 66] }, { 30: 67, 33: [2, 58], 65: [2, 58], 72: [2, 58], 75: [2, 58], 80: [2, 58], 81: [2, 58], 82: [2, 58], 83: [2, 58], 84: [2, 58], 85: [2, 58] }, { 33: [2, 64], 35: 68, 65: [2, 64], 72: [2, 64], 75: [2, 64], 80: [2, 64], 81: [2, 64], 82: [2, 64], 83: [2, 64], 84: [2, 64], 85: [2, 64] }, { 21: 69, 23: [2, 50], 65: [2, 50], 72: [2, 50], 80: [2, 50], 81: [2, 50], 82: [2, 50], 83: [2, 50], 84: [2, 50], 85: [2, 50] }, { 33: [2, 90], 61: 70, 65: [2, 90], 72: [2, 90], 80: [2, 90], 81: [2, 90], 82: [2, 90], 83: [2, 90], 84: [2, 90], 85: [2, 90] }, { 20: 74, 33: [2, 80], 50: 71, 63: 72, 64: 75, 65: [1, 43], 69: 73, 70: 76, 71: 77, 72: [1, 78], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 72: [1, 79] }, { 23: [2, 42], 33: [2, 42], 54: [2, 42], 65: [2, 42], 68: [2, 42], 72: [2, 42], 75: [2, 42], 80: [2, 42], 81: [2, 42], 82: [2, 42], 83: [2, 42], 84: [2, 42], 85: [2, 42], 87: [1, 50] }, { 20: 74, 53: 80, 54: [2, 84], 63: 81, 64: 75, 65: [1, 43], 69: 82, 70: 76, 71: 77, 72: [1, 78], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 26: 83, 47: [1, 66] }, { 47: [2, 55] }, { 4: 84, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 39: [2, 46], 44: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 47: [2, 20] }, { 20: 85, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 4: 86, 6: 3, 14: [2, 46], 15: [2, 46], 19: [2, 46], 29: [2, 46], 34: [2, 46], 47: [2, 46], 48: [2, 46], 51: [2, 46], 55: [2, 46], 60: [2, 46] }, { 26: 87, 47: [1, 66] }, { 47: [2, 57] }, { 5: [2, 11], 14: [2, 11], 15: [2, 11], 19: [2, 11], 29: [2, 11], 34: [2, 11], 39: [2, 11], 44: [2, 11], 47: [2, 11], 48: [2, 11], 51: [2, 11], 55: [2, 11], 60: [2, 11] }, { 15: [2, 49], 18: [2, 49] }, { 20: 74, 33: [2, 88], 58: 88, 63: 89, 64: 75, 65: [1, 43], 69: 90, 70: 76, 71: 77, 72: [1, 78], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 65: [2, 94], 66: 91, 68: [2, 94], 72: [2, 94], 80: [2, 94], 81: [2, 94], 82: [2, 94], 83: [2, 94], 84: [2, 94], 85: [2, 94] }, { 5: [2, 25], 14: [2, 25], 15: [2, 25], 19: [2, 25], 29: [2, 25], 34: [2, 25], 39: [2, 25], 44: [2, 25], 47: [2, 25], 48: [2, 25], 51: [2, 25], 55: [2, 25], 60: [2, 25] }, { 20: 92, 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 74, 31: 93, 33: [2, 60], 63: 94, 64: 75, 65: [1, 43], 69: 95, 70: 76, 71: 77, 72: [1, 78], 75: [2, 60], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 74, 33: [2, 66], 36: 96, 63: 97, 64: 75, 65: [1, 43], 69: 98, 70: 76, 71: 77, 72: [1, 78], 75: [2, 66], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 74, 22: 99, 23: [2, 52], 63: 100, 64: 75, 65: [1, 43], 69: 101, 70: 76, 71: 77, 72: [1, 78], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 20: 74, 33: [2, 92], 62: 102, 63: 103, 64: 75, 65: [1, 43], 69: 104, 70: 76, 71: 77, 72: [1, 78], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 33: [1, 105] }, { 33: [2, 79], 65: [2, 79], 72: [2, 79], 80: [2, 79], 81: [2, 79], 82: [2, 79], 83: [2, 79], 84: [2, 79], 85: [2, 79] }, { 33: [2, 81] }, { 23: [2, 27], 33: [2, 27], 54: [2, 27], 65: [2, 27], 68: [2, 27], 72: [2, 27], 75: [2, 27], 80: [2, 27], 81: [2, 27], 82: [2, 27], 83: [2, 27], 84: [2, 27], 85: [2, 27] }, { 23: [2, 28], 33: [2, 28], 54: [2, 28], 65: [2, 28], 68: [2, 28], 72: [2, 28], 75: [2, 28], 80: [2, 28], 81: [2, 28], 82: [2, 28], 83: [2, 28], 84: [2, 28], 85: [2, 28] }, { 23: [2, 30], 33: [2, 30], 54: [2, 30], 68: [2, 30], 71: 106, 72: [1, 107], 75: [2, 30] }, { 23: [2, 98], 33: [2, 98], 54: [2, 98], 68: [2, 98], 72: [2, 98], 75: [2, 98] }, { 23: [2, 45], 33: [2, 45], 54: [2, 45], 65: [2, 45], 68: [2, 45], 72: [2, 45], 73: [1, 108], 75: [2, 45], 80: [2, 45], 81: [2, 45], 82: [2, 45], 83: [2, 45], 84: [2, 45], 85: [2, 45], 87: [2, 45] }, { 23: [2, 44], 33: [2, 44], 54: [2, 44], 65: [2, 44], 68: [2, 44], 72: [2, 44], 75: [2, 44], 80: [2, 44], 81: [2, 44], 82: [2, 44], 83: [2, 44], 84: [2, 44], 85: [2, 44], 87: [2, 44] }, { 54: [1, 109] }, { 54: [2, 83], 65: [2, 83], 72: [2, 83], 80: [2, 83], 81: [2, 83], 82: [2, 83], 83: [2, 83], 84: [2, 83], 85: [2, 83] }, { 54: [2, 85] }, { 5: [2, 13], 14: [2, 13], 15: [2, 13], 19: [2, 13], 29: [2, 13], 34: [2, 13], 39: [2, 13], 44: [2, 13], 47: [2, 13], 48: [2, 13], 51: [2, 13], 55: [2, 13], 60: [2, 13] }, { 38: 55, 39: [1, 57], 43: 56, 44: [1, 58], 45: 111, 46: 110, 47: [2, 76] }, { 33: [2, 70], 40: 112, 65: [2, 70], 72: [2, 70], 75: [2, 70], 80: [2, 70], 81: [2, 70], 82: [2, 70], 83: [2, 70], 84: [2, 70], 85: [2, 70] }, { 47: [2, 18] }, { 5: [2, 14], 14: [2, 14], 15: [2, 14], 19: [2, 14], 29: [2, 14], 34: [2, 14], 39: [2, 14], 44: [2, 14], 47: [2, 14], 48: [2, 14], 51: [2, 14], 55: [2, 14], 60: [2, 14] }, { 33: [1, 113] }, { 33: [2, 87], 65: [2, 87], 72: [2, 87], 80: [2, 87], 81: [2, 87], 82: [2, 87], 83: [2, 87], 84: [2, 87], 85: [2, 87] }, { 33: [2, 89] }, { 20: 74, 63: 115, 64: 75, 65: [1, 43], 67: 114, 68: [2, 96], 69: 116, 70: 76, 71: 77, 72: [1, 78], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 33: [1, 117] }, { 32: 118, 33: [2, 62], 74: 119, 75: [1, 120] }, { 33: [2, 59], 65: [2, 59], 72: [2, 59], 75: [2, 59], 80: [2, 59], 81: [2, 59], 82: [2, 59], 83: [2, 59], 84: [2, 59], 85: [2, 59] }, { 33: [2, 61], 75: [2, 61] }, { 33: [2, 68], 37: 121, 74: 122, 75: [1, 120] }, { 33: [2, 65], 65: [2, 65], 72: [2, 65], 75: [2, 65], 80: [2, 65], 81: [2, 65], 82: [2, 65], 83: [2, 65], 84: [2, 65], 85: [2, 65] }, { 33: [2, 67], 75: [2, 67] }, { 23: [1, 123] }, { 23: [2, 51], 65: [2, 51], 72: [2, 51], 80: [2, 51], 81: [2, 51], 82: [2, 51], 83: [2, 51], 84: [2, 51], 85: [2, 51] }, { 23: [2, 53] }, { 33: [1, 124] }, { 33: [2, 91], 65: [2, 91], 72: [2, 91], 80: [2, 91], 81: [2, 91], 82: [2, 91], 83: [2, 91], 84: [2, 91], 85: [2, 91] }, { 33: [2, 93] }, { 5: [2, 22], 14: [2, 22], 15: [2, 22], 19: [2, 22], 29: [2, 22], 34: [2, 22], 39: [2, 22], 44: [2, 22], 47: [2, 22], 48: [2, 22], 51: [2, 22], 55: [2, 22], 60: [2, 22] }, { 23: [2, 99], 33: [2, 99], 54: [2, 99], 68: [2, 99], 72: [2, 99], 75: [2, 99] }, { 73: [1, 108] }, { 20: 74, 63: 125, 64: 75, 65: [1, 43], 72: [1, 35], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 5: [2, 23], 14: [2, 23], 15: [2, 23], 19: [2, 23], 29: [2, 23], 34: [2, 23], 39: [2, 23], 44: [2, 23], 47: [2, 23], 48: [2, 23], 51: [2, 23], 55: [2, 23], 60: [2, 23] }, { 47: [2, 19] }, { 47: [2, 77] }, { 20: 74, 33: [2, 72], 41: 126, 63: 127, 64: 75, 65: [1, 43], 69: 128, 70: 76, 71: 77, 72: [1, 78], 75: [2, 72], 78: 26, 79: 27, 80: [1, 28], 81: [1, 29], 82: [1, 30], 83: [1, 31], 84: [1, 32], 85: [1, 34], 86: 33 }, { 5: [2, 24], 14: [2, 24], 15: [2, 24], 19: [2, 24], 29: [2, 24], 34: [2, 24], 39: [2, 24], 44: [2, 24], 47: [2, 24], 48: [2, 24], 51: [2, 24], 55: [2, 24], 60: [2, 24] }, { 68: [1, 129] }, { 65: [2, 95], 68: [2, 95], 72: [2, 95], 80: [2, 95], 81: [2, 95], 82: [2, 95], 83: [2, 95], 84: [2, 95], 85: [2, 95] }, { 68: [2, 97] }, { 5: [2, 21], 14: [2, 21], 15: [2, 21], 19: [2, 21], 29: [2, 21], 34: [2, 21], 39: [2, 21], 44: [2, 21], 47: [2, 21], 48: [2, 21], 51: [2, 21], 55: [2, 21], 60: [2, 21] }, { 33: [1, 130] }, { 33: [2, 63] }, { 72: [1, 132], 76: 131 }, { 33: [1, 133] }, { 33: [2, 69] }, { 15: [2, 12], 18: [2, 12] }, { 14: [2, 26], 15: [2, 26], 19: [2, 26], 29: [2, 26], 34: [2, 26], 47: [2, 26], 48: [2, 26], 51: [2, 26], 55: [2, 26], 60: [2, 26] }, { 23: [2, 31], 33: [2, 31], 54: [2, 31], 68: [2, 31], 72: [2, 31], 75: [2, 31] }, { 33: [2, 74], 42: 134, 74: 135, 75: [1, 120] }, { 33: [2, 71], 65: [2, 71], 72: [2, 71], 75: [2, 71], 80: [2, 71], 81: [2, 71], 82: [2, 71], 83: [2, 71], 84: [2, 71], 85: [2, 71] }, { 33: [2, 73], 75: [2, 73] }, { 23: [2, 29], 33: [2, 29], 54: [2, 29], 65: [2, 29], 68: [2, 29], 72: [2, 29], 75: [2, 29], 80: [2, 29], 81: [2, 29], 82: [2, 29], 83: [2, 29], 84: [2, 29], 85: [2, 29] }, { 14: [2, 15], 15: [2, 15], 19: [2, 15], 29: [2, 15], 34: [2, 15], 39: [2, 15], 44: [2, 15], 47: [2, 15], 48: [2, 15], 51: [2, 15], 55: [2, 15], 60: [2, 15] }, { 72: [1, 137], 77: [1, 136] }, { 72: [2, 100], 77: [2, 100] }, { 14: [2, 16], 15: [2, 16], 19: [2, 16], 29: [2, 16], 34: [2, 16], 44: [2, 16], 47: [2, 16], 48: [2, 16], 51: [2, 16], 55: [2, 16], 60: [2, 16] }, { 33: [1, 138] }, { 33: [2, 75] }, { 33: [2, 32] }, { 72: [2, 101], 77: [2, 101] }, { 14: [2, 17], 15: [2, 17], 19: [2, 17], 29: [2, 17], 34: [2, 17], 39: [2, 17], 44: [2, 17], 47: [2, 17], 48: [2, 17], 51: [2, 17], 55: [2, 17], 60: [2, 17] }],
        defaultActions: { 4: [2, 1], 54: [2, 55], 56: [2, 20], 60: [2, 57], 73: [2, 81], 82: [2, 85], 86: [2, 18], 90: [2, 89], 101: [2, 53], 104: [2, 93], 110: [2, 19], 111: [2, 77], 116: [2, 97], 119: [2, 63], 122: [2, 69], 135: [2, 75], 136: [2, 32] },
        parseError: function parseError(str, hash) {
          throw new Error(str);
        },
        parse: function parse3(input) {
          var self2 = this, stack = [0], vstack = [null], lstack = [], table = this.table, yytext = "", yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF2 = 1;
          this.lexer.setInput(input);
          this.lexer.yy = this.yy;
          this.yy.lexer = this.lexer;
          this.yy.parser = this;
          if (typeof this.lexer.yylloc == "undefined")
            this.lexer.yylloc = {};
          var yyloc = this.lexer.yylloc;
          lstack.push(yyloc);
          var ranges2 = this.lexer.options && this.lexer.options.ranges;
          if (typeof this.yy.parseError === "function")
            this.parseError = this.yy.parseError;
          function popStack(n2) {
            stack.length = stack.length - 2 * n2;
            vstack.length = vstack.length - n2;
            lstack.length = lstack.length - n2;
          }
          function lex() {
            var token;
            token = self2.lexer.lex() || 1;
            if (typeof token !== "number") {
              token = self2.symbols_[token] || token;
            }
            return token;
          }
          var symbol, preErrorSymbol, state, action, a3, r, yyval = {}, p, len, newState, expected;
          while (true) {
            state = stack[stack.length - 1];
            if (this.defaultActions[state]) {
              action = this.defaultActions[state];
            } else {
              if (symbol === null || typeof symbol == "undefined") {
                symbol = lex();
              }
              action = table[state] && table[state][symbol];
            }
            if (typeof action === "undefined" || !action.length || !action[0]) {
              var errStr = "";
              if (!recovering) {
                expected = [];
                for (p in table[state])
                  if (this.terminals_[p] && p > 2) {
                    expected.push("'" + this.terminals_[p] + "'");
                  }
                if (this.lexer.showPosition) {
                  errStr = "Parse error on line " + (yylineno + 1) + ":\n" + this.lexer.showPosition() + "\nExpecting " + expected.join(", ") + ", got '" + (this.terminals_[symbol] || symbol) + "'";
                } else {
                  errStr = "Parse error on line " + (yylineno + 1) + ": Unexpected " + (symbol == 1 ? "end of input" : "'" + (this.terminals_[symbol] || symbol) + "'");
                }
                this.parseError(errStr, { text: this.lexer.match, token: this.terminals_[symbol] || symbol, line: this.lexer.yylineno, loc: yyloc, expected });
              }
            }
            if (action[0] instanceof Array && action.length > 1) {
              throw new Error("Parse Error: multiple actions possible at state: " + state + ", token: " + symbol);
            }
            switch (action[0]) {
              case 1:
                stack.push(symbol);
                vstack.push(this.lexer.yytext);
                lstack.push(this.lexer.yylloc);
                stack.push(action[1]);
                symbol = null;
                if (!preErrorSymbol) {
                  yyleng = this.lexer.yyleng;
                  yytext = this.lexer.yytext;
                  yylineno = this.lexer.yylineno;
                  yyloc = this.lexer.yylloc;
                  if (recovering > 0)
                    recovering--;
                } else {
                  symbol = preErrorSymbol;
                  preErrorSymbol = null;
                }
                break;
              case 2:
                len = this.productions_[action[1]][1];
                yyval.$ = vstack[vstack.length - len];
                yyval._$ = { first_line: lstack[lstack.length - (len || 1)].first_line, last_line: lstack[lstack.length - 1].last_line, first_column: lstack[lstack.length - (len || 1)].first_column, last_column: lstack[lstack.length - 1].last_column };
                if (ranges2) {
                  yyval._$.range = [lstack[lstack.length - (len || 1)].range[0], lstack[lstack.length - 1].range[1]];
                }
                r = this.performAction.call(yyval, yytext, yyleng, yylineno, this.yy, action[1], vstack, lstack);
                if (typeof r !== "undefined") {
                  return r;
                }
                if (len) {
                  stack = stack.slice(0, -1 * len * 2);
                  vstack = vstack.slice(0, -1 * len);
                  lstack = lstack.slice(0, -1 * len);
                }
                stack.push(this.productions_[action[1]][0]);
                vstack.push(yyval.$);
                lstack.push(yyval._$);
                newState = table[stack[stack.length - 2]][stack[stack.length - 1]];
                stack.push(newState);
                break;
              case 3:
                return true;
            }
          }
          return true;
        }
      };
      var lexer = function() {
        var lexer2 = {
          EOF: 1,
          parseError: function parseError(str, hash) {
            if (this.yy.parser) {
              this.yy.parser.parseError(str, hash);
            } else {
              throw new Error(str);
            }
          },
          setInput: function setInput(input) {
            this._input = input;
            this._more = this._less = this.done = false;
            this.yylineno = this.yyleng = 0;
            this.yytext = this.matched = this.match = "";
            this.conditionStack = ["INITIAL"];
            this.yylloc = { first_line: 1, first_column: 0, last_line: 1, last_column: 0 };
            if (this.options.ranges)
              this.yylloc.range = [0, 0];
            this.offset = 0;
            return this;
          },
          input: function input() {
            var ch = this._input[0];
            this.yytext += ch;
            this.yyleng++;
            this.offset++;
            this.match += ch;
            this.matched += ch;
            var lines = ch.match(/(?:\r\n?|\n).*/g);
            if (lines) {
              this.yylineno++;
              this.yylloc.last_line++;
            } else {
              this.yylloc.last_column++;
            }
            if (this.options.ranges)
              this.yylloc.range[1]++;
            this._input = this._input.slice(1);
            return ch;
          },
          unput: function unput(ch) {
            var len = ch.length;
            var lines = ch.split(/(?:\r\n?|\n)/g);
            this._input = ch + this._input;
            this.yytext = this.yytext.substr(0, this.yytext.length - len - 1);
            this.offset -= len;
            var oldLines = this.match.split(/(?:\r\n?|\n)/g);
            this.match = this.match.substr(0, this.match.length - 1);
            this.matched = this.matched.substr(0, this.matched.length - 1);
            if (lines.length - 1)
              this.yylineno -= lines.length - 1;
            var r = this.yylloc.range;
            this.yylloc = {
              first_line: this.yylloc.first_line,
              last_line: this.yylineno + 1,
              first_column: this.yylloc.first_column,
              last_column: lines ? (lines.length === oldLines.length ? this.yylloc.first_column : 0) + oldLines[oldLines.length - lines.length].length - lines[0].length : this.yylloc.first_column - len
            };
            if (this.options.ranges) {
              this.yylloc.range = [r[0], r[0] + this.yyleng - len];
            }
            return this;
          },
          more: function more() {
            this._more = true;
            return this;
          },
          less: function less(n2) {
            this.unput(this.match.slice(n2));
          },
          pastInput: function pastInput() {
            var past = this.matched.substr(0, this.matched.length - this.match.length);
            return (past.length > 20 ? "..." : "") + past.substr(-20).replace(/\n/g, "");
          },
          upcomingInput: function upcomingInput() {
            var next = this.match;
            if (next.length < 20) {
              next += this._input.substr(0, 20 - next.length);
            }
            return (next.substr(0, 20) + (next.length > 20 ? "..." : "")).replace(/\n/g, "");
          },
          showPosition: function showPosition() {
            var pre = this.pastInput();
            var c5 = new Array(pre.length + 1).join("-");
            return pre + this.upcomingInput() + "\n" + c5 + "^";
          },
          next: function next() {
            if (this.done) {
              return this.EOF;
            }
            if (!this._input)
              this.done = true;
            var token, match2, tempMatch, index3, col, lines;
            if (!this._more) {
              this.yytext = "";
              this.match = "";
            }
            var rules = this._currentRules();
            for (var i = 0; i < rules.length; i++) {
              tempMatch = this._input.match(this.rules[rules[i]]);
              if (tempMatch && (!match2 || tempMatch[0].length > match2[0].length)) {
                match2 = tempMatch;
                index3 = i;
                if (!this.options.flex)
                  break;
              }
            }
            if (match2) {
              lines = match2[0].match(/(?:\r\n?|\n).*/g);
              if (lines)
                this.yylineno += lines.length;
              this.yylloc = {
                first_line: this.yylloc.last_line,
                last_line: this.yylineno + 1,
                first_column: this.yylloc.last_column,
                last_column: lines ? lines[lines.length - 1].length - lines[lines.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + match2[0].length
              };
              this.yytext += match2[0];
              this.match += match2[0];
              this.matches = match2;
              this.yyleng = this.yytext.length;
              if (this.options.ranges) {
                this.yylloc.range = [this.offset, this.offset += this.yyleng];
              }
              this._more = false;
              this._input = this._input.slice(match2[0].length);
              this.matched += match2[0];
              token = this.performAction.call(this, this.yy, this, rules[index3], this.conditionStack[this.conditionStack.length - 1]);
              if (this.done && this._input)
                this.done = false;
              if (token)
                return token;
              else
                return;
            }
            if (this._input === "") {
              return this.EOF;
            } else {
              return this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), { text: "", token: null, line: this.yylineno });
            }
          },
          lex: function lex() {
            var r = this.next();
            if (typeof r !== "undefined") {
              return r;
            } else {
              return this.lex();
            }
          },
          begin: function begin(condition) {
            this.conditionStack.push(condition);
          },
          popState: function popState() {
            return this.conditionStack.pop();
          },
          _currentRules: function _currentRules() {
            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;
          },
          topState: function topState() {
            return this.conditionStack[this.conditionStack.length - 2];
          },
          pushState: function begin(condition) {
            this.begin(condition);
          }
        };
        lexer2.options = {};
        lexer2.performAction = function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {
          function strip(start2, end) {
            return yy_.yytext = yy_.yytext.substring(start2, yy_.yyleng - end + start2);
          }
          var YYSTATE = YY_START;
          switch ($avoiding_name_collisions) {
            case 0:
              if (yy_.yytext.slice(-2) === "\\\\") {
                strip(0, 1);
                this.begin("mu");
              } else if (yy_.yytext.slice(-1) === "\\") {
                strip(0, 1);
                this.begin("emu");
              } else {
                this.begin("mu");
              }
              if (yy_.yytext)
                return 15;
              break;
            case 1:
              return 15;
              break;
            case 2:
              this.popState();
              return 15;
              break;
            case 3:
              this.begin("raw");
              return 15;
              break;
            case 4:
              this.popState();
              if (this.conditionStack[this.conditionStack.length - 1] === "raw") {
                return 15;
              } else {
                strip(5, 9);
                return "END_RAW_BLOCK";
              }
              break;
            case 5:
              return 15;
              break;
            case 6:
              this.popState();
              return 14;
              break;
            case 7:
              return 65;
              break;
            case 8:
              return 68;
              break;
            case 9:
              return 19;
              break;
            case 10:
              this.popState();
              this.begin("raw");
              return 23;
              break;
            case 11:
              return 55;
              break;
            case 12:
              return 60;
              break;
            case 13:
              return 29;
              break;
            case 14:
              return 47;
              break;
            case 15:
              this.popState();
              return 44;
              break;
            case 16:
              this.popState();
              return 44;
              break;
            case 17:
              return 34;
              break;
            case 18:
              return 39;
              break;
            case 19:
              return 51;
              break;
            case 20:
              return 48;
              break;
            case 21:
              this.unput(yy_.yytext);
              this.popState();
              this.begin("com");
              break;
            case 22:
              this.popState();
              return 14;
              break;
            case 23:
              return 48;
              break;
            case 24:
              return 73;
              break;
            case 25:
              return 72;
              break;
            case 26:
              return 72;
              break;
            case 27:
              return 87;
              break;
            case 28:
              break;
            case 29:
              this.popState();
              return 54;
              break;
            case 30:
              this.popState();
              return 33;
              break;
            case 31:
              yy_.yytext = strip(1, 2).replace(/\\"/g, '"');
              return 80;
              break;
            case 32:
              yy_.yytext = strip(1, 2).replace(/\\'/g, "'");
              return 80;
              break;
            case 33:
              return 85;
              break;
            case 34:
              return 82;
              break;
            case 35:
              return 82;
              break;
            case 36:
              return 83;
              break;
            case 37:
              return 84;
              break;
            case 38:
              return 81;
              break;
            case 39:
              return 75;
              break;
            case 40:
              return 77;
              break;
            case 41:
              return 72;
              break;
            case 42:
              yy_.yytext = yy_.yytext.replace(/\\([\\\]])/g, "$1");
              return 72;
              break;
            case 43:
              return "INVALID";
              break;
            case 44:
              return 5;
              break;
          }
        };
        lexer2.rules = [/^(?:[^\x00]*?(?=(\{\{)))/, /^(?:[^\x00]+)/, /^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/, /^(?:\{\{\{\{(?=[^\/]))/, /^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/, /^(?:[^\x00]+?(?=(\{\{\{\{)))/, /^(?:[\s\S]*?--(~)?\}\})/, /^(?:\()/, /^(?:\))/, /^(?:\{\{\{\{)/, /^(?:\}\}\}\})/, /^(?:\{\{(~)?>)/, /^(?:\{\{(~)?#>)/, /^(?:\{\{(~)?#\*?)/, /^(?:\{\{(~)?\/)/, /^(?:\{\{(~)?\^\s*(~)?\}\})/, /^(?:\{\{(~)?\s*else\s*(~)?\}\})/, /^(?:\{\{(~)?\^)/, /^(?:\{\{(~)?\s*else\b)/, /^(?:\{\{(~)?\{)/, /^(?:\{\{(~)?&)/, /^(?:\{\{(~)?!--)/, /^(?:\{\{(~)?![\s\S]*?\}\})/, /^(?:\{\{(~)?\*?)/, /^(?:=)/, /^(?:\.\.)/, /^(?:\.(?=([=~}\s\/.)|])))/, /^(?:[\/.])/, /^(?:\s+)/, /^(?:\}(~)?\}\})/, /^(?:(~)?\}\})/, /^(?:"(\\["]|[^"])*")/, /^(?:'(\\[']|[^'])*')/, /^(?:@)/, /^(?:true(?=([~}\s)])))/, /^(?:false(?=([~}\s)])))/, /^(?:undefined(?=([~}\s)])))/, /^(?:null(?=([~}\s)])))/, /^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/, /^(?:as\s+\|)/, /^(?:\|)/, /^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/, /^(?:\[(\\\]|[^\]])*\])/, /^(?:.)/, /^(?:$)/];
        lexer2.conditions = { "mu": { "rules": [7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44], "inclusive": false }, "emu": { "rules": [2], "inclusive": false }, "com": { "rules": [6], "inclusive": false }, "raw": { "rules": [3, 4, 5], "inclusive": false }, "INITIAL": { "rules": [0, 1, 44], "inclusive": true } };
        return lexer2;
      }();
      parser2.lexer = lexer;
      function Parser() {
        this.yy = {};
      }
      Parser.prototype = parser2;
      parser2.Parser = Parser;
      return new Parser();
    }();
    exports["default"] = handlebars;
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/compiler/visitor.js
var require_visitor = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/compiler/visitor.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _exception = require_exception();
    var _exception2 = _interopRequireDefault(_exception);
    function Visitor() {
      this.parents = [];
    }
    Visitor.prototype = {
      constructor: Visitor,
      mutating: false,
      acceptKey: function acceptKey(node, name) {
        var value = this.accept(node[name]);
        if (this.mutating) {
          if (value && !Visitor.prototype[value.type]) {
            throw new _exception2["default"]('Unexpected node type "' + value.type + '" found when accepting ' + name + " on " + node.type);
          }
          node[name] = value;
        }
      },
      acceptRequired: function acceptRequired(node, name) {
        this.acceptKey(node, name);
        if (!node[name]) {
          throw new _exception2["default"](node.type + " requires " + name);
        }
      },
      acceptArray: function acceptArray(array3) {
        for (var i = 0, l2 = array3.length; i < l2; i++) {
          this.acceptKey(array3, i);
          if (!array3[i]) {
            array3.splice(i, 1);
            i--;
            l2--;
          }
        }
      },
      accept: function accept(object2) {
        if (!object2) {
          return;
        }
        if (!this[object2.type]) {
          throw new _exception2["default"]("Unknown type: " + object2.type, object2);
        }
        if (this.current) {
          this.parents.unshift(this.current);
        }
        this.current = object2;
        var ret = this[object2.type](object2);
        this.current = this.parents.shift();
        if (!this.mutating || ret) {
          return ret;
        } else if (ret !== false) {
          return object2;
        }
      },
      Program: function Program(program) {
        this.acceptArray(program.body);
      },
      MustacheStatement: visitSubExpression,
      Decorator: visitSubExpression,
      BlockStatement: visitBlock,
      DecoratorBlock: visitBlock,
      PartialStatement: visitPartial,
      PartialBlockStatement: function PartialBlockStatement(partial) {
        visitPartial.call(this, partial);
        this.acceptKey(partial, "program");
      },
      ContentStatement: function ContentStatement() {
      },
      CommentStatement: function CommentStatement() {
      },
      SubExpression: visitSubExpression,
      PathExpression: function PathExpression() {
      },
      StringLiteral: function StringLiteral() {
      },
      NumberLiteral: function NumberLiteral() {
      },
      BooleanLiteral: function BooleanLiteral() {
      },
      UndefinedLiteral: function UndefinedLiteral() {
      },
      NullLiteral: function NullLiteral() {
      },
      Hash: function Hash(hash) {
        this.acceptArray(hash.pairs);
      },
      HashPair: function HashPair(pair2) {
        this.acceptRequired(pair2, "value");
      }
    };
    function visitSubExpression(mustache) {
      this.acceptRequired(mustache, "path");
      this.acceptArray(mustache.params);
      this.acceptKey(mustache, "hash");
    }
    function visitBlock(block) {
      visitSubExpression.call(this, block);
      this.acceptKey(block, "program");
      this.acceptKey(block, "inverse");
    }
    function visitPartial(partial) {
      this.acceptRequired(partial, "name");
      this.acceptArray(partial.params);
      this.acceptKey(partial, "hash");
    }
    exports["default"] = Visitor;
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/compiler/whitespace-control.js
var require_whitespace_control = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/compiler/whitespace-control.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _visitor = require_visitor();
    var _visitor2 = _interopRequireDefault(_visitor);
    function WhitespaceControl() {
      var options = arguments.length <= 0 || arguments[0] === void 0 ? {} : arguments[0];
      this.options = options;
    }
    WhitespaceControl.prototype = new _visitor2["default"]();
    WhitespaceControl.prototype.Program = function(program) {
      var doStandalone = !this.options.ignoreStandalone;
      var isRoot = !this.isRootSeen;
      this.isRootSeen = true;
      var body = program.body;
      for (var i = 0, l2 = body.length; i < l2; i++) {
        var current = body[i], strip = this.accept(current);
        if (!strip) {
          continue;
        }
        var _isPrevWhitespace = isPrevWhitespace(body, i, isRoot), _isNextWhitespace = isNextWhitespace(body, i, isRoot), openStandalone = strip.openStandalone && _isPrevWhitespace, closeStandalone = strip.closeStandalone && _isNextWhitespace, inlineStandalone = strip.inlineStandalone && _isPrevWhitespace && _isNextWhitespace;
        if (strip.close) {
          omitRight(body, i, true);
        }
        if (strip.open) {
          omitLeft(body, i, true);
        }
        if (doStandalone && inlineStandalone) {
          omitRight(body, i);
          if (omitLeft(body, i)) {
            if (current.type === "PartialStatement") {
              current.indent = /([ \t]+$)/.exec(body[i - 1].original)[1];
            }
          }
        }
        if (doStandalone && openStandalone) {
          omitRight((current.program || current.inverse).body);
          omitLeft(body, i);
        }
        if (doStandalone && closeStandalone) {
          omitRight(body, i);
          omitLeft((current.inverse || current.program).body);
        }
      }
      return program;
    };
    WhitespaceControl.prototype.BlockStatement = WhitespaceControl.prototype.DecoratorBlock = WhitespaceControl.prototype.PartialBlockStatement = function(block) {
      this.accept(block.program);
      this.accept(block.inverse);
      var program = block.program || block.inverse, inverse = block.program && block.inverse, firstInverse = inverse, lastInverse = inverse;
      if (inverse && inverse.chained) {
        firstInverse = inverse.body[0].program;
        while (lastInverse.chained) {
          lastInverse = lastInverse.body[lastInverse.body.length - 1].program;
        }
      }
      var strip = {
        open: block.openStrip.open,
        close: block.closeStrip.close,
        openStandalone: isNextWhitespace(program.body),
        closeStandalone: isPrevWhitespace((firstInverse || program).body)
      };
      if (block.openStrip.close) {
        omitRight(program.body, null, true);
      }
      if (inverse) {
        var inverseStrip = block.inverseStrip;
        if (inverseStrip.open) {
          omitLeft(program.body, null, true);
        }
        if (inverseStrip.close) {
          omitRight(firstInverse.body, null, true);
        }
        if (block.closeStrip.open) {
          omitLeft(lastInverse.body, null, true);
        }
        if (!this.options.ignoreStandalone && isPrevWhitespace(program.body) && isNextWhitespace(firstInverse.body)) {
          omitLeft(program.body);
          omitRight(firstInverse.body);
        }
      } else if (block.closeStrip.open) {
        omitLeft(program.body, null, true);
      }
      return strip;
    };
    WhitespaceControl.prototype.Decorator = WhitespaceControl.prototype.MustacheStatement = function(mustache) {
      return mustache.strip;
    };
    WhitespaceControl.prototype.PartialStatement = WhitespaceControl.prototype.CommentStatement = function(node) {
      var strip = node.strip || {};
      return {
        inlineStandalone: true,
        open: strip.open,
        close: strip.close
      };
    };
    function isPrevWhitespace(body, i, isRoot) {
      if (i === void 0) {
        i = body.length;
      }
      var prev = body[i - 1], sibling = body[i - 2];
      if (!prev) {
        return isRoot;
      }
      if (prev.type === "ContentStatement") {
        return (sibling || !isRoot ? /\r?\n\s*?$/ : /(^|\r?\n)\s*?$/).test(prev.original);
      }
    }
    function isNextWhitespace(body, i, isRoot) {
      if (i === void 0) {
        i = -1;
      }
      var next = body[i + 1], sibling = body[i + 2];
      if (!next) {
        return isRoot;
      }
      if (next.type === "ContentStatement") {
        return (sibling || !isRoot ? /^\s*?\r?\n/ : /^\s*?(\r?\n|$)/).test(next.original);
      }
    }
    function omitRight(body, i, multiple) {
      var current = body[i == null ? 0 : i + 1];
      if (!current || current.type !== "ContentStatement" || !multiple && current.rightStripped) {
        return;
      }
      var original = current.value;
      current.value = current.value.replace(multiple ? /^\s+/ : /^[ \t]*\r?\n?/, "");
      current.rightStripped = current.value !== original;
    }
    function omitLeft(body, i, multiple) {
      var current = body[i == null ? body.length - 1 : i - 1];
      if (!current || current.type !== "ContentStatement" || !multiple && current.leftStripped) {
        return;
      }
      var original = current.value;
      current.value = current.value.replace(multiple ? /\s+$/ : /[ \t]+$/, "");
      current.leftStripped = current.value !== original;
      return current.leftStripped;
    }
    exports["default"] = WhitespaceControl;
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/compiler/helpers.js
var require_helpers2 = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/compiler/helpers.js"(exports) {
    "use strict";
    exports.__esModule = true;
    exports.SourceLocation = SourceLocation;
    exports.id = id2;
    exports.stripFlags = stripFlags;
    exports.stripComment = stripComment;
    exports.preparePath = preparePath;
    exports.prepareMustache = prepareMustache;
    exports.prepareRawBlock = prepareRawBlock;
    exports.prepareBlock = prepareBlock;
    exports.prepareProgram = prepareProgram;
    exports.preparePartialBlock = preparePartialBlock;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _exception = require_exception();
    var _exception2 = _interopRequireDefault(_exception);
    function validateClose(open, close) {
      close = close.path ? close.path.original : close;
      if (open.path.original !== close) {
        var errorNode = { loc: open.path.loc };
        throw new _exception2["default"](open.path.original + " doesn't match " + close, errorNode);
      }
    }
    function SourceLocation(source, locInfo) {
      this.source = source;
      this.start = {
        line: locInfo.first_line,
        column: locInfo.first_column
      };
      this.end = {
        line: locInfo.last_line,
        column: locInfo.last_column
      };
    }
    function id2(token) {
      if (/^\[.*\]$/.test(token)) {
        return token.substring(1, token.length - 1);
      } else {
        return token;
      }
    }
    function stripFlags(open, close) {
      return {
        open: open.charAt(2) === "~",
        close: close.charAt(close.length - 3) === "~"
      };
    }
    function stripComment(comment) {
      return comment.replace(/^\{\{~?!-?-?/, "").replace(/-?-?~?\}\}$/, "");
    }
    function preparePath(data, parts, loc) {
      loc = this.locInfo(loc);
      var original = data ? "@" : "", dig = [], depth = 0;
      for (var i = 0, l2 = parts.length; i < l2; i++) {
        var part = parts[i].part, isLiteral = parts[i].original !== part;
        original += (parts[i].separator || "") + part;
        if (!isLiteral && (part === ".." || part === "." || part === "this")) {
          if (dig.length > 0) {
            throw new _exception2["default"]("Invalid path: " + original, { loc });
          } else if (part === "..") {
            depth++;
          }
        } else {
          dig.push(part);
        }
      }
      return {
        type: "PathExpression",
        data,
        depth,
        parts: dig,
        original,
        loc
      };
    }
    function prepareMustache(path2, params, hash, open, strip, locInfo) {
      var escapeFlag = open.charAt(3) || open.charAt(2), escaped = escapeFlag !== "{" && escapeFlag !== "&";
      var decorator = /\*/.test(open);
      return {
        type: decorator ? "Decorator" : "MustacheStatement",
        path: path2,
        params,
        hash,
        escaped,
        strip,
        loc: this.locInfo(locInfo)
      };
    }
    function prepareRawBlock(openRawBlock, contents, close, locInfo) {
      validateClose(openRawBlock, close);
      locInfo = this.locInfo(locInfo);
      var program = {
        type: "Program",
        body: contents,
        strip: {},
        loc: locInfo
      };
      return {
        type: "BlockStatement",
        path: openRawBlock.path,
        params: openRawBlock.params,
        hash: openRawBlock.hash,
        program,
        openStrip: {},
        inverseStrip: {},
        closeStrip: {},
        loc: locInfo
      };
    }
    function prepareBlock(openBlock, program, inverseAndProgram, close, inverted, locInfo) {
      if (close && close.path) {
        validateClose(openBlock, close);
      }
      var decorator = /\*/.test(openBlock.open);
      program.blockParams = openBlock.blockParams;
      var inverse = void 0, inverseStrip = void 0;
      if (inverseAndProgram) {
        if (decorator) {
          throw new _exception2["default"]("Unexpected inverse block on decorator", inverseAndProgram);
        }
        if (inverseAndProgram.chain) {
          inverseAndProgram.program.body[0].closeStrip = close.strip;
        }
        inverseStrip = inverseAndProgram.strip;
        inverse = inverseAndProgram.program;
      }
      if (inverted) {
        inverted = inverse;
        inverse = program;
        program = inverted;
      }
      return {
        type: decorator ? "DecoratorBlock" : "BlockStatement",
        path: openBlock.path,
        params: openBlock.params,
        hash: openBlock.hash,
        program,
        inverse,
        openStrip: openBlock.strip,
        inverseStrip,
        closeStrip: close && close.strip,
        loc: this.locInfo(locInfo)
      };
    }
    function prepareProgram(statements, loc) {
      if (!loc && statements.length) {
        var firstLoc = statements[0].loc, lastLoc = statements[statements.length - 1].loc;
        if (firstLoc && lastLoc) {
          loc = {
            source: firstLoc.source,
            start: {
              line: firstLoc.start.line,
              column: firstLoc.start.column
            },
            end: {
              line: lastLoc.end.line,
              column: lastLoc.end.column
            }
          };
        }
      }
      return {
        type: "Program",
        body: statements,
        strip: {},
        loc
      };
    }
    function preparePartialBlock(open, program, close, locInfo) {
      validateClose(open, close);
      return {
        type: "PartialBlockStatement",
        name: open.path,
        params: open.params,
        hash: open.hash,
        program,
        openStrip: open.strip,
        closeStrip: close && close.strip,
        loc: this.locInfo(locInfo)
      };
    }
  }
});

// node_modules/handlebars/dist/cjs/handlebars/compiler/base.js
var require_base2 = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/compiler/base.js"(exports) {
    "use strict";
    exports.__esModule = true;
    exports.parseWithoutProcessing = parseWithoutProcessing;
    exports.parse = parse3;
    function _interopRequireWildcard(obj) {
      if (obj && obj.__esModule) {
        return obj;
      } else {
        var newObj = {};
        if (obj != null) {
          for (var key in obj) {
            if (Object.prototype.hasOwnProperty.call(obj, key))
              newObj[key] = obj[key];
          }
        }
        newObj["default"] = obj;
        return newObj;
      }
    }
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _parser = require_parser();
    var _parser2 = _interopRequireDefault(_parser);
    var _whitespaceControl = require_whitespace_control();
    var _whitespaceControl2 = _interopRequireDefault(_whitespaceControl);
    var _helpers = require_helpers2();
    var Helpers = _interopRequireWildcard(_helpers);
    var _utils = require_utils();
    exports.parser = _parser2["default"];
    var yy = {};
    _utils.extend(yy, Helpers);
    function parseWithoutProcessing(input, options) {
      if (input.type === "Program") {
        return input;
      }
      _parser2["default"].yy = yy;
      yy.locInfo = function(locInfo) {
        return new yy.SourceLocation(options && options.srcName, locInfo);
      };
      var ast = _parser2["default"].parse(input);
      return ast;
    }
    function parse3(input, options) {
      var ast = parseWithoutProcessing(input, options);
      var strip = new _whitespaceControl2["default"](options);
      return strip.accept(ast);
    }
  }
});

// node_modules/handlebars/dist/cjs/handlebars/compiler/compiler.js
var require_compiler = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/compiler/compiler.js"(exports) {
    "use strict";
    exports.__esModule = true;
    exports.Compiler = Compiler;
    exports.precompile = precompile;
    exports.compile = compile;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _exception = require_exception();
    var _exception2 = _interopRequireDefault(_exception);
    var _utils = require_utils();
    var _ast = require_ast();
    var _ast2 = _interopRequireDefault(_ast);
    var slice6 = [].slice;
    function Compiler() {
    }
    Compiler.prototype = {
      compiler: Compiler,
      equals: function equals(other) {
        var len = this.opcodes.length;
        if (other.opcodes.length !== len) {
          return false;
        }
        for (var i = 0; i < len; i++) {
          var opcode = this.opcodes[i], otherOpcode = other.opcodes[i];
          if (opcode.opcode !== otherOpcode.opcode || !argEquals(opcode.args, otherOpcode.args)) {
            return false;
          }
        }
        len = this.children.length;
        for (var i = 0; i < len; i++) {
          if (!this.children[i].equals(other.children[i])) {
            return false;
          }
        }
        return true;
      },
      guid: 0,
      compile: function compile2(program, options) {
        this.sourceNode = [];
        this.opcodes = [];
        this.children = [];
        this.options = options;
        this.stringParams = options.stringParams;
        this.trackIds = options.trackIds;
        options.blockParams = options.blockParams || [];
        options.knownHelpers = _utils.extend(/* @__PURE__ */ Object.create(null), {
          helperMissing: true,
          blockHelperMissing: true,
          each: true,
          "if": true,
          unless: true,
          "with": true,
          log: true,
          lookup: true
        }, options.knownHelpers);
        return this.accept(program);
      },
      compileProgram: function compileProgram(program) {
        var childCompiler = new this.compiler(), result = childCompiler.compile(program, this.options), guid = this.guid++;
        this.usePartial = this.usePartial || result.usePartial;
        this.children[guid] = result;
        this.useDepths = this.useDepths || result.useDepths;
        return guid;
      },
      accept: function accept(node) {
        if (!this[node.type]) {
          throw new _exception2["default"]("Unknown type: " + node.type, node);
        }
        this.sourceNode.unshift(node);
        var ret = this[node.type](node);
        this.sourceNode.shift();
        return ret;
      },
      Program: function Program(program) {
        this.options.blockParams.unshift(program.blockParams);
        var body = program.body, bodyLength = body.length;
        for (var i = 0; i < bodyLength; i++) {
          this.accept(body[i]);
        }
        this.options.blockParams.shift();
        this.isSimple = bodyLength === 1;
        this.blockParams = program.blockParams ? program.blockParams.length : 0;
        return this;
      },
      BlockStatement: function BlockStatement(block) {
        transformLiteralToPath(block);
        var program = block.program, inverse = block.inverse;
        program = program && this.compileProgram(program);
        inverse = inverse && this.compileProgram(inverse);
        var type2 = this.classifySexpr(block);
        if (type2 === "helper") {
          this.helperSexpr(block, program, inverse);
        } else if (type2 === "simple") {
          this.simpleSexpr(block);
          this.opcode("pushProgram", program);
          this.opcode("pushProgram", inverse);
          this.opcode("emptyHash");
          this.opcode("blockValue", block.path.original);
        } else {
          this.ambiguousSexpr(block, program, inverse);
          this.opcode("pushProgram", program);
          this.opcode("pushProgram", inverse);
          this.opcode("emptyHash");
          this.opcode("ambiguousBlockValue");
        }
        this.opcode("append");
      },
      DecoratorBlock: function DecoratorBlock(decorator) {
        var program = decorator.program && this.compileProgram(decorator.program);
        var params = this.setupFullMustacheParams(decorator, program, void 0), path2 = decorator.path;
        this.useDecorators = true;
        this.opcode("registerDecorator", params.length, path2.original);
      },
      PartialStatement: function PartialStatement(partial) {
        this.usePartial = true;
        var program = partial.program;
        if (program) {
          program = this.compileProgram(partial.program);
        }
        var params = partial.params;
        if (params.length > 1) {
          throw new _exception2["default"]("Unsupported number of partial arguments: " + params.length, partial);
        } else if (!params.length) {
          if (this.options.explicitPartialContext) {
            this.opcode("pushLiteral", "undefined");
          } else {
            params.push({ type: "PathExpression", parts: [], depth: 0 });
          }
        }
        var partialName = partial.name.original, isDynamic = partial.name.type === "SubExpression";
        if (isDynamic) {
          this.accept(partial.name);
        }
        this.setupFullMustacheParams(partial, program, void 0, true);
        var indent = partial.indent || "";
        if (this.options.preventIndent && indent) {
          this.opcode("appendContent", indent);
          indent = "";
        }
        this.opcode("invokePartial", isDynamic, partialName, indent);
        this.opcode("append");
      },
      PartialBlockStatement: function PartialBlockStatement(partialBlock) {
        this.PartialStatement(partialBlock);
      },
      MustacheStatement: function MustacheStatement(mustache) {
        this.SubExpression(mustache);
        if (mustache.escaped && !this.options.noEscape) {
          this.opcode("appendEscaped");
        } else {
          this.opcode("append");
        }
      },
      Decorator: function Decorator(decorator) {
        this.DecoratorBlock(decorator);
      },
      ContentStatement: function ContentStatement(content) {
        if (content.value) {
          this.opcode("appendContent", content.value);
        }
      },
      CommentStatement: function CommentStatement() {
      },
      SubExpression: function SubExpression(sexpr) {
        transformLiteralToPath(sexpr);
        var type2 = this.classifySexpr(sexpr);
        if (type2 === "simple") {
          this.simpleSexpr(sexpr);
        } else if (type2 === "helper") {
          this.helperSexpr(sexpr);
        } else {
          this.ambiguousSexpr(sexpr);
        }
      },
      ambiguousSexpr: function ambiguousSexpr(sexpr, program, inverse) {
        var path2 = sexpr.path, name = path2.parts[0], isBlock = program != null || inverse != null;
        this.opcode("getContext", path2.depth);
        this.opcode("pushProgram", program);
        this.opcode("pushProgram", inverse);
        path2.strict = true;
        this.accept(path2);
        this.opcode("invokeAmbiguous", name, isBlock);
      },
      simpleSexpr: function simpleSexpr(sexpr) {
        var path2 = sexpr.path;
        path2.strict = true;
        this.accept(path2);
        this.opcode("resolvePossibleLambda");
      },
      helperSexpr: function helperSexpr(sexpr, program, inverse) {
        var params = this.setupFullMustacheParams(sexpr, program, inverse), path2 = sexpr.path, name = path2.parts[0];
        if (this.options.knownHelpers[name]) {
          this.opcode("invokeKnownHelper", params.length, name);
        } else if (this.options.knownHelpersOnly) {
          throw new _exception2["default"]("You specified knownHelpersOnly, but used the unknown helper " + name, sexpr);
        } else {
          path2.strict = true;
          path2.falsy = true;
          this.accept(path2);
          this.opcode("invokeHelper", params.length, path2.original, _ast2["default"].helpers.simpleId(path2));
        }
      },
      PathExpression: function PathExpression(path2) {
        this.addDepth(path2.depth);
        this.opcode("getContext", path2.depth);
        var name = path2.parts[0], scoped = _ast2["default"].helpers.scopedId(path2), blockParamId = !path2.depth && !scoped && this.blockParamIndex(name);
        if (blockParamId) {
          this.opcode("lookupBlockParam", blockParamId, path2.parts);
        } else if (!name) {
          this.opcode("pushContext");
        } else if (path2.data) {
          this.options.data = true;
          this.opcode("lookupData", path2.depth, path2.parts, path2.strict);
        } else {
          this.opcode("lookupOnContext", path2.parts, path2.falsy, path2.strict, scoped);
        }
      },
      StringLiteral: function StringLiteral(string) {
        this.opcode("pushString", string.value);
      },
      NumberLiteral: function NumberLiteral(number5) {
        this.opcode("pushLiteral", number5.value);
      },
      BooleanLiteral: function BooleanLiteral(bool) {
        this.opcode("pushLiteral", bool.value);
      },
      UndefinedLiteral: function UndefinedLiteral() {
        this.opcode("pushLiteral", "undefined");
      },
      NullLiteral: function NullLiteral() {
        this.opcode("pushLiteral", "null");
      },
      Hash: function Hash(hash) {
        var pairs2 = hash.pairs, i = 0, l2 = pairs2.length;
        this.opcode("pushHash");
        for (; i < l2; i++) {
          this.pushParam(pairs2[i].value);
        }
        while (i--) {
          this.opcode("assignToHash", pairs2[i].key);
        }
        this.opcode("popHash");
      },
      opcode: function opcode(name) {
        this.opcodes.push({
          opcode: name,
          args: slice6.call(arguments, 1),
          loc: this.sourceNode[0].loc
        });
      },
      addDepth: function addDepth(depth) {
        if (!depth) {
          return;
        }
        this.useDepths = true;
      },
      classifySexpr: function classifySexpr(sexpr) {
        var isSimple = _ast2["default"].helpers.simpleId(sexpr.path);
        var isBlockParam = isSimple && !!this.blockParamIndex(sexpr.path.parts[0]);
        var isHelper = !isBlockParam && _ast2["default"].helpers.helperExpression(sexpr);
        var isEligible = !isBlockParam && (isHelper || isSimple);
        if (isEligible && !isHelper) {
          var _name = sexpr.path.parts[0], options = this.options;
          if (options.knownHelpers[_name]) {
            isHelper = true;
          } else if (options.knownHelpersOnly) {
            isEligible = false;
          }
        }
        if (isHelper) {
          return "helper";
        } else if (isEligible) {
          return "ambiguous";
        } else {
          return "simple";
        }
      },
      pushParams: function pushParams(params) {
        for (var i = 0, l2 = params.length; i < l2; i++) {
          this.pushParam(params[i]);
        }
      },
      pushParam: function pushParam(val) {
        var value = val.value != null ? val.value : val.original || "";
        if (this.stringParams) {
          if (value.replace) {
            value = value.replace(/^(\.?\.\/)*/g, "").replace(/\//g, ".");
          }
          if (val.depth) {
            this.addDepth(val.depth);
          }
          this.opcode("getContext", val.depth || 0);
          this.opcode("pushStringParam", value, val.type);
          if (val.type === "SubExpression") {
            this.accept(val);
          }
        } else {
          if (this.trackIds) {
            var blockParamIndex = void 0;
            if (val.parts && !_ast2["default"].helpers.scopedId(val) && !val.depth) {
              blockParamIndex = this.blockParamIndex(val.parts[0]);
            }
            if (blockParamIndex) {
              var blockParamChild = val.parts.slice(1).join(".");
              this.opcode("pushId", "BlockParam", blockParamIndex, blockParamChild);
            } else {
              value = val.original || value;
              if (value.replace) {
                value = value.replace(/^this(?:\.|$)/, "").replace(/^\.\//, "").replace(/^\.$/, "");
              }
              this.opcode("pushId", val.type, value);
            }
          }
          this.accept(val);
        }
      },
      setupFullMustacheParams: function setupFullMustacheParams(sexpr, program, inverse, omitEmpty) {
        var params = sexpr.params;
        this.pushParams(params);
        this.opcode("pushProgram", program);
        this.opcode("pushProgram", inverse);
        if (sexpr.hash) {
          this.accept(sexpr.hash);
        } else {
          this.opcode("emptyHash", omitEmpty);
        }
        return params;
      },
      blockParamIndex: function blockParamIndex(name) {
        for (var depth = 0, len = this.options.blockParams.length; depth < len; depth++) {
          var blockParams = this.options.blockParams[depth], param = blockParams && _utils.indexOf(blockParams, name);
          if (blockParams && param >= 0) {
            return [depth, param];
          }
        }
      }
    };
    function precompile(input, options, env) {
      if (input == null || typeof input !== "string" && input.type !== "Program") {
        throw new _exception2["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed " + input);
      }
      options = options || {};
      if (!("data" in options)) {
        options.data = true;
      }
      if (options.compat) {
        options.useDepths = true;
      }
      var ast = env.parse(input, options), environment = new env.Compiler().compile(ast, options);
      return new env.JavaScriptCompiler().compile(environment, options);
    }
    function compile(input, options, env) {
      if (options === void 0)
        options = {};
      if (input == null || typeof input !== "string" && input.type !== "Program") {
        throw new _exception2["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed " + input);
      }
      options = _utils.extend({}, options);
      if (!("data" in options)) {
        options.data = true;
      }
      if (options.compat) {
        options.useDepths = true;
      }
      var compiled = void 0;
      function compileInput() {
        var ast = env.parse(input, options), environment = new env.Compiler().compile(ast, options), templateSpec = new env.JavaScriptCompiler().compile(environment, options, void 0, true);
        return env.template(templateSpec);
      }
      function ret(context, execOptions) {
        if (!compiled) {
          compiled = compileInput();
        }
        return compiled.call(this, context, execOptions);
      }
      ret._setup = function(setupOptions) {
        if (!compiled) {
          compiled = compileInput();
        }
        return compiled._setup(setupOptions);
      };
      ret._child = function(i, data, blockParams, depths) {
        if (!compiled) {
          compiled = compileInput();
        }
        return compiled._child(i, data, blockParams, depths);
      };
      return ret;
    }
    function argEquals(a3, b) {
      if (a3 === b) {
        return true;
      }
      if (_utils.isArray(a3) && _utils.isArray(b) && a3.length === b.length) {
        for (var i = 0; i < a3.length; i++) {
          if (!argEquals(a3[i], b[i])) {
            return false;
          }
        }
        return true;
      }
    }
    function transformLiteralToPath(sexpr) {
      if (!sexpr.path.parts) {
        var literal = sexpr.path;
        sexpr.path = {
          type: "PathExpression",
          data: false,
          depth: 0,
          parts: [literal.original + ""],
          original: literal.original + "",
          loc: literal.loc
        };
      }
    }
  }
});

// node_modules/handlebars/node_modules/source-map/lib/base64.js
var require_base64 = __commonJS({
  "node_modules/handlebars/node_modules/source-map/lib/base64.js"(exports) {
    var intToCharMap = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");
    exports.encode = function(number5) {
      if (0 <= number5 && number5 < intToCharMap.length) {
        return intToCharMap[number5];
      }
      throw new TypeError("Must be between 0 and 63: " + number5);
    };
    exports.decode = function(charCode) {
      var bigA = 65;
      var bigZ = 90;
      var littleA = 97;
      var littleZ = 122;
      var zero2 = 48;
      var nine = 57;
      var plus = 43;
      var slash = 47;
      var littleOffset = 26;
      var numberOffset = 52;
      if (bigA <= charCode && charCode <= bigZ) {
        return charCode - bigA;
      }
      if (littleA <= charCode && charCode <= littleZ) {
        return charCode - littleA + littleOffset;
      }
      if (zero2 <= charCode && charCode <= nine) {
        return charCode - zero2 + numberOffset;
      }
      if (charCode == plus) {
        return 62;
      }
      if (charCode == slash) {
        return 63;
      }
      return -1;
    };
  }
});

// node_modules/handlebars/node_modules/source-map/lib/base64-vlq.js
var require_base64_vlq = __commonJS({
  "node_modules/handlebars/node_modules/source-map/lib/base64-vlq.js"(exports) {
    var base64 = require_base64();
    var VLQ_BASE_SHIFT = 5;
    var VLQ_BASE = 1 << VLQ_BASE_SHIFT;
    var VLQ_BASE_MASK = VLQ_BASE - 1;
    var VLQ_CONTINUATION_BIT = VLQ_BASE;
    function toVLQSigned(aValue) {
      return aValue < 0 ? (-aValue << 1) + 1 : (aValue << 1) + 0;
    }
    function fromVLQSigned(aValue) {
      var isNegative = (aValue & 1) === 1;
      var shifted = aValue >> 1;
      return isNegative ? -shifted : shifted;
    }
    exports.encode = function base64VLQ_encode(aValue) {
      var encoded = "";
      var digit;
      var vlq = toVLQSigned(aValue);
      do {
        digit = vlq & VLQ_BASE_MASK;
        vlq >>>= VLQ_BASE_SHIFT;
        if (vlq > 0) {
          digit |= VLQ_CONTINUATION_BIT;
        }
        encoded += base64.encode(digit);
      } while (vlq > 0);
      return encoded;
    };
    exports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {
      var strLen = aStr.length;
      var result = 0;
      var shift = 0;
      var continuation, digit;
      do {
        if (aIndex >= strLen) {
          throw new Error("Expected more digits in base 64 VLQ value.");
        }
        digit = base64.decode(aStr.charCodeAt(aIndex++));
        if (digit === -1) {
          throw new Error("Invalid base64 digit: " + aStr.charAt(aIndex - 1));
        }
        continuation = !!(digit & VLQ_CONTINUATION_BIT);
        digit &= VLQ_BASE_MASK;
        result = result + (digit << shift);
        shift += VLQ_BASE_SHIFT;
      } while (continuation);
      aOutParam.value = fromVLQSigned(result);
      aOutParam.rest = aIndex;
    };
  }
});

// node_modules/handlebars/node_modules/source-map/lib/util.js
var require_util = __commonJS({
  "node_modules/handlebars/node_modules/source-map/lib/util.js"(exports) {
    function getArg(aArgs, aName, aDefaultValue) {
      if (aName in aArgs) {
        return aArgs[aName];
      } else if (arguments.length === 3) {
        return aDefaultValue;
      } else {
        throw new Error('"' + aName + '" is a required argument.');
      }
    }
    exports.getArg = getArg;
    var urlRegexp = /^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/;
    var dataUrlRegexp = /^data:.+\,.+$/;
    function urlParse(aUrl) {
      var match2 = aUrl.match(urlRegexp);
      if (!match2) {
        return null;
      }
      return {
        scheme: match2[1],
        auth: match2[2],
        host: match2[3],
        port: match2[4],
        path: match2[5]
      };
    }
    exports.urlParse = urlParse;
    function urlGenerate(aParsedUrl) {
      var url = "";
      if (aParsedUrl.scheme) {
        url += aParsedUrl.scheme + ":";
      }
      url += "//";
      if (aParsedUrl.auth) {
        url += aParsedUrl.auth + "@";
      }
      if (aParsedUrl.host) {
        url += aParsedUrl.host;
      }
      if (aParsedUrl.port) {
        url += ":" + aParsedUrl.port;
      }
      if (aParsedUrl.path) {
        url += aParsedUrl.path;
      }
      return url;
    }
    exports.urlGenerate = urlGenerate;
    function normalize2(aPath) {
      var path2 = aPath;
      var url = urlParse(aPath);
      if (url) {
        if (!url.path) {
          return aPath;
        }
        path2 = url.path;
      }
      var isAbsolute = exports.isAbsolute(path2);
      var parts = path2.split(/\/+/);
      for (var part, up = 0, i = parts.length - 1; i >= 0; i--) {
        part = parts[i];
        if (part === ".") {
          parts.splice(i, 1);
        } else if (part === "..") {
          up++;
        } else if (up > 0) {
          if (part === "") {
            parts.splice(i + 1, up);
            up = 0;
          } else {
            parts.splice(i, 2);
            up--;
          }
        }
      }
      path2 = parts.join("/");
      if (path2 === "") {
        path2 = isAbsolute ? "/" : ".";
      }
      if (url) {
        url.path = path2;
        return urlGenerate(url);
      }
      return path2;
    }
    exports.normalize = normalize2;
    function join(aRoot, aPath) {
      if (aRoot === "") {
        aRoot = ".";
      }
      if (aPath === "") {
        aPath = ".";
      }
      var aPathUrl = urlParse(aPath);
      var aRootUrl = urlParse(aRoot);
      if (aRootUrl) {
        aRoot = aRootUrl.path || "/";
      }
      if (aPathUrl && !aPathUrl.scheme) {
        if (aRootUrl) {
          aPathUrl.scheme = aRootUrl.scheme;
        }
        return urlGenerate(aPathUrl);
      }
      if (aPathUrl || aPath.match(dataUrlRegexp)) {
        return aPath;
      }
      if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {
        aRootUrl.host = aPath;
        return urlGenerate(aRootUrl);
      }
      var joined = aPath.charAt(0) === "/" ? aPath : normalize2(aRoot.replace(/\/+$/, "") + "/" + aPath);
      if (aRootUrl) {
        aRootUrl.path = joined;
        return urlGenerate(aRootUrl);
      }
      return joined;
    }
    exports.join = join;
    exports.isAbsolute = function(aPath) {
      return aPath.charAt(0) === "/" || urlRegexp.test(aPath);
    };
    function relative(aRoot, aPath) {
      if (aRoot === "") {
        aRoot = ".";
      }
      aRoot = aRoot.replace(/\/$/, "");
      var level = 0;
      while (aPath.indexOf(aRoot + "/") !== 0) {
        var index3 = aRoot.lastIndexOf("/");
        if (index3 < 0) {
          return aPath;
        }
        aRoot = aRoot.slice(0, index3);
        if (aRoot.match(/^([^\/]+:\/)?\/*$/)) {
          return aPath;
        }
        ++level;
      }
      return Array(level + 1).join("../") + aPath.substr(aRoot.length + 1);
    }
    exports.relative = relative;
    var supportsNullProto = function() {
      var obj = /* @__PURE__ */ Object.create(null);
      return !("__proto__" in obj);
    }();
    function identity5(s3) {
      return s3;
    }
    function toSetString(aStr) {
      if (isProtoString(aStr)) {
        return "$" + aStr;
      }
      return aStr;
    }
    exports.toSetString = supportsNullProto ? identity5 : toSetString;
    function fromSetString(aStr) {
      if (isProtoString(aStr)) {
        return aStr.slice(1);
      }
      return aStr;
    }
    exports.fromSetString = supportsNullProto ? identity5 : fromSetString;
    function isProtoString(s3) {
      if (!s3) {
        return false;
      }
      var length3 = s3.length;
      if (length3 < 9) {
        return false;
      }
      if (s3.charCodeAt(length3 - 1) !== 95 || s3.charCodeAt(length3 - 2) !== 95 || s3.charCodeAt(length3 - 3) !== 111 || s3.charCodeAt(length3 - 4) !== 116 || s3.charCodeAt(length3 - 5) !== 111 || s3.charCodeAt(length3 - 6) !== 114 || s3.charCodeAt(length3 - 7) !== 112 || s3.charCodeAt(length3 - 8) !== 95 || s3.charCodeAt(length3 - 9) !== 95) {
        return false;
      }
      for (var i = length3 - 10; i >= 0; i--) {
        if (s3.charCodeAt(i) !== 36) {
          return false;
        }
      }
      return true;
    }
    function compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {
      var cmp = strcmp(mappingA.source, mappingB.source);
      if (cmp !== 0) {
        return cmp;
      }
      cmp = mappingA.originalLine - mappingB.originalLine;
      if (cmp !== 0) {
        return cmp;
      }
      cmp = mappingA.originalColumn - mappingB.originalColumn;
      if (cmp !== 0 || onlyCompareOriginal) {
        return cmp;
      }
      cmp = mappingA.generatedColumn - mappingB.generatedColumn;
      if (cmp !== 0) {
        return cmp;
      }
      cmp = mappingA.generatedLine - mappingB.generatedLine;
      if (cmp !== 0) {
        return cmp;
      }
      return strcmp(mappingA.name, mappingB.name);
    }
    exports.compareByOriginalPositions = compareByOriginalPositions;
    function compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {
      var cmp = mappingA.generatedLine - mappingB.generatedLine;
      if (cmp !== 0) {
        return cmp;
      }
      cmp = mappingA.generatedColumn - mappingB.generatedColumn;
      if (cmp !== 0 || onlyCompareGenerated) {
        return cmp;
      }
      cmp = strcmp(mappingA.source, mappingB.source);
      if (cmp !== 0) {
        return cmp;
      }
      cmp = mappingA.originalLine - mappingB.originalLine;
      if (cmp !== 0) {
        return cmp;
      }
      cmp = mappingA.originalColumn - mappingB.originalColumn;
      if (cmp !== 0) {
        return cmp;
      }
      return strcmp(mappingA.name, mappingB.name);
    }
    exports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;
    function strcmp(aStr1, aStr2) {
      if (aStr1 === aStr2) {
        return 0;
      }
      if (aStr1 === null) {
        return 1;
      }
      if (aStr2 === null) {
        return -1;
      }
      if (aStr1 > aStr2) {
        return 1;
      }
      return -1;
    }
    function compareByGeneratedPositionsInflated(mappingA, mappingB) {
      var cmp = mappingA.generatedLine - mappingB.generatedLine;
      if (cmp !== 0) {
        return cmp;
      }
      cmp = mappingA.generatedColumn - mappingB.generatedColumn;
      if (cmp !== 0) {
        return cmp;
      }
      cmp = strcmp(mappingA.source, mappingB.source);
      if (cmp !== 0) {
        return cmp;
      }
      cmp = mappingA.originalLine - mappingB.originalLine;
      if (cmp !== 0) {
        return cmp;
      }
      cmp = mappingA.originalColumn - mappingB.originalColumn;
      if (cmp !== 0) {
        return cmp;
      }
      return strcmp(mappingA.name, mappingB.name);
    }
    exports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;
    function parseSourceMapInput(str) {
      return JSON.parse(str.replace(/^\)]}'[^\n]*\n/, ""));
    }
    exports.parseSourceMapInput = parseSourceMapInput;
    function computeSourceURL(sourceRoot, sourceURL, sourceMapURL) {
      sourceURL = sourceURL || "";
      if (sourceRoot) {
        if (sourceRoot[sourceRoot.length - 1] !== "/" && sourceURL[0] !== "/") {
          sourceRoot += "/";
        }
        sourceURL = sourceRoot + sourceURL;
      }
      if (sourceMapURL) {
        var parsed = urlParse(sourceMapURL);
        if (!parsed) {
          throw new Error("sourceMapURL could not be parsed");
        }
        if (parsed.path) {
          var index3 = parsed.path.lastIndexOf("/");
          if (index3 >= 0) {
            parsed.path = parsed.path.substring(0, index3 + 1);
          }
        }
        sourceURL = join(urlGenerate(parsed), sourceURL);
      }
      return normalize2(sourceURL);
    }
    exports.computeSourceURL = computeSourceURL;
  }
});

// node_modules/handlebars/node_modules/source-map/lib/array-set.js
var require_array_set = __commonJS({
  "node_modules/handlebars/node_modules/source-map/lib/array-set.js"(exports) {
    var util = require_util();
    var has = Object.prototype.hasOwnProperty;
    var hasNativeMap = typeof Map !== "undefined";
    function ArraySet() {
      this._array = [];
      this._set = hasNativeMap ? /* @__PURE__ */ new Map() : /* @__PURE__ */ Object.create(null);
    }
    ArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {
      var set4 = new ArraySet();
      for (var i = 0, len = aArray.length; i < len; i++) {
        set4.add(aArray[i], aAllowDuplicates);
      }
      return set4;
    };
    ArraySet.prototype.size = function ArraySet_size() {
      return hasNativeMap ? this._set.size : Object.getOwnPropertyNames(this._set).length;
    };
    ArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {
      var sStr = hasNativeMap ? aStr : util.toSetString(aStr);
      var isDuplicate = hasNativeMap ? this.has(aStr) : has.call(this._set, sStr);
      var idx = this._array.length;
      if (!isDuplicate || aAllowDuplicates) {
        this._array.push(aStr);
      }
      if (!isDuplicate) {
        if (hasNativeMap) {
          this._set.set(aStr, idx);
        } else {
          this._set[sStr] = idx;
        }
      }
    };
    ArraySet.prototype.has = function ArraySet_has(aStr) {
      if (hasNativeMap) {
        return this._set.has(aStr);
      } else {
        var sStr = util.toSetString(aStr);
        return has.call(this._set, sStr);
      }
    };
    ArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {
      if (hasNativeMap) {
        var idx = this._set.get(aStr);
        if (idx >= 0) {
          return idx;
        }
      } else {
        var sStr = util.toSetString(aStr);
        if (has.call(this._set, sStr)) {
          return this._set[sStr];
        }
      }
      throw new Error('"' + aStr + '" is not in the set.');
    };
    ArraySet.prototype.at = function ArraySet_at(aIdx) {
      if (aIdx >= 0 && aIdx < this._array.length) {
        return this._array[aIdx];
      }
      throw new Error("No element indexed by " + aIdx);
    };
    ArraySet.prototype.toArray = function ArraySet_toArray() {
      return this._array.slice();
    };
    exports.ArraySet = ArraySet;
  }
});

// node_modules/handlebars/node_modules/source-map/lib/mapping-list.js
var require_mapping_list = __commonJS({
  "node_modules/handlebars/node_modules/source-map/lib/mapping-list.js"(exports) {
    var util = require_util();
    function generatedPositionAfter(mappingA, mappingB) {
      var lineA = mappingA.generatedLine;
      var lineB = mappingB.generatedLine;
      var columnA = mappingA.generatedColumn;
      var columnB = mappingB.generatedColumn;
      return lineB > lineA || lineB == lineA && columnB >= columnA || util.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;
    }
    function MappingList() {
      this._array = [];
      this._sorted = true;
      this._last = { generatedLine: -1, generatedColumn: 0 };
    }
    MappingList.prototype.unsortedForEach = function MappingList_forEach(aCallback, aThisArg) {
      this._array.forEach(aCallback, aThisArg);
    };
    MappingList.prototype.add = function MappingList_add(aMapping) {
      if (generatedPositionAfter(this._last, aMapping)) {
        this._last = aMapping;
        this._array.push(aMapping);
      } else {
        this._sorted = false;
        this._array.push(aMapping);
      }
    };
    MappingList.prototype.toArray = function MappingList_toArray() {
      if (!this._sorted) {
        this._array.sort(util.compareByGeneratedPositionsInflated);
        this._sorted = true;
      }
      return this._array;
    };
    exports.MappingList = MappingList;
  }
});

// node_modules/handlebars/node_modules/source-map/lib/source-map-generator.js
var require_source_map_generator = __commonJS({
  "node_modules/handlebars/node_modules/source-map/lib/source-map-generator.js"(exports) {
    var base64VLQ = require_base64_vlq();
    var util = require_util();
    var ArraySet = require_array_set().ArraySet;
    var MappingList = require_mapping_list().MappingList;
    function SourceMapGenerator(aArgs) {
      if (!aArgs) {
        aArgs = {};
      }
      this._file = util.getArg(aArgs, "file", null);
      this._sourceRoot = util.getArg(aArgs, "sourceRoot", null);
      this._skipValidation = util.getArg(aArgs, "skipValidation", false);
      this._sources = new ArraySet();
      this._names = new ArraySet();
      this._mappings = new MappingList();
      this._sourcesContents = null;
    }
    SourceMapGenerator.prototype._version = 3;
    SourceMapGenerator.fromSourceMap = function SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {
      var sourceRoot = aSourceMapConsumer.sourceRoot;
      var generator = new SourceMapGenerator({
        file: aSourceMapConsumer.file,
        sourceRoot
      });
      aSourceMapConsumer.eachMapping(function(mapping) {
        var newMapping = {
          generated: {
            line: mapping.generatedLine,
            column: mapping.generatedColumn
          }
        };
        if (mapping.source != null) {
          newMapping.source = mapping.source;
          if (sourceRoot != null) {
            newMapping.source = util.relative(sourceRoot, newMapping.source);
          }
          newMapping.original = {
            line: mapping.originalLine,
            column: mapping.originalColumn
          };
          if (mapping.name != null) {
            newMapping.name = mapping.name;
          }
        }
        generator.addMapping(newMapping);
      });
      aSourceMapConsumer.sources.forEach(function(sourceFile) {
        var sourceRelative = sourceFile;
        if (sourceRoot !== null) {
          sourceRelative = util.relative(sourceRoot, sourceFile);
        }
        if (!generator._sources.has(sourceRelative)) {
          generator._sources.add(sourceRelative);
        }
        var content = aSourceMapConsumer.sourceContentFor(sourceFile);
        if (content != null) {
          generator.setSourceContent(sourceFile, content);
        }
      });
      return generator;
    };
    SourceMapGenerator.prototype.addMapping = function SourceMapGenerator_addMapping(aArgs) {
      var generated = util.getArg(aArgs, "generated");
      var original = util.getArg(aArgs, "original", null);
      var source = util.getArg(aArgs, "source", null);
      var name = util.getArg(aArgs, "name", null);
      if (!this._skipValidation) {
        this._validateMapping(generated, original, source, name);
      }
      if (source != null) {
        source = String(source);
        if (!this._sources.has(source)) {
          this._sources.add(source);
        }
      }
      if (name != null) {
        name = String(name);
        if (!this._names.has(name)) {
          this._names.add(name);
        }
      }
      this._mappings.add({
        generatedLine: generated.line,
        generatedColumn: generated.column,
        originalLine: original != null && original.line,
        originalColumn: original != null && original.column,
        source,
        name
      });
    };
    SourceMapGenerator.prototype.setSourceContent = function SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {
      var source = aSourceFile;
      if (this._sourceRoot != null) {
        source = util.relative(this._sourceRoot, source);
      }
      if (aSourceContent != null) {
        if (!this._sourcesContents) {
          this._sourcesContents = /* @__PURE__ */ Object.create(null);
        }
        this._sourcesContents[util.toSetString(source)] = aSourceContent;
      } else if (this._sourcesContents) {
        delete this._sourcesContents[util.toSetString(source)];
        if (Object.keys(this._sourcesContents).length === 0) {
          this._sourcesContents = null;
        }
      }
    };
    SourceMapGenerator.prototype.applySourceMap = function SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {
      var sourceFile = aSourceFile;
      if (aSourceFile == null) {
        if (aSourceMapConsumer.file == null) {
          throw new Error(
            `SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`
          );
        }
        sourceFile = aSourceMapConsumer.file;
      }
      var sourceRoot = this._sourceRoot;
      if (sourceRoot != null) {
        sourceFile = util.relative(sourceRoot, sourceFile);
      }
      var newSources = new ArraySet();
      var newNames = new ArraySet();
      this._mappings.unsortedForEach(function(mapping) {
        if (mapping.source === sourceFile && mapping.originalLine != null) {
          var original = aSourceMapConsumer.originalPositionFor({
            line: mapping.originalLine,
            column: mapping.originalColumn
          });
          if (original.source != null) {
            mapping.source = original.source;
            if (aSourceMapPath != null) {
              mapping.source = util.join(aSourceMapPath, mapping.source);
            }
            if (sourceRoot != null) {
              mapping.source = util.relative(sourceRoot, mapping.source);
            }
            mapping.originalLine = original.line;
            mapping.originalColumn = original.column;
            if (original.name != null) {
              mapping.name = original.name;
            }
          }
        }
        var source = mapping.source;
        if (source != null && !newSources.has(source)) {
          newSources.add(source);
        }
        var name = mapping.name;
        if (name != null && !newNames.has(name)) {
          newNames.add(name);
        }
      }, this);
      this._sources = newSources;
      this._names = newNames;
      aSourceMapConsumer.sources.forEach(function(sourceFile2) {
        var content = aSourceMapConsumer.sourceContentFor(sourceFile2);
        if (content != null) {
          if (aSourceMapPath != null) {
            sourceFile2 = util.join(aSourceMapPath, sourceFile2);
          }
          if (sourceRoot != null) {
            sourceFile2 = util.relative(sourceRoot, sourceFile2);
          }
          this.setSourceContent(sourceFile2, content);
        }
      }, this);
    };
    SourceMapGenerator.prototype._validateMapping = function SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource, aName) {
      if (aOriginal && typeof aOriginal.line !== "number" && typeof aOriginal.column !== "number") {
        throw new Error(
          "original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values."
        );
      }
      if (aGenerated && "line" in aGenerated && "column" in aGenerated && aGenerated.line > 0 && aGenerated.column >= 0 && !aOriginal && !aSource && !aName) {
        return;
      } else if (aGenerated && "line" in aGenerated && "column" in aGenerated && aOriginal && "line" in aOriginal && "column" in aOriginal && aGenerated.line > 0 && aGenerated.column >= 0 && aOriginal.line > 0 && aOriginal.column >= 0 && aSource) {
        return;
      } else {
        throw new Error("Invalid mapping: " + JSON.stringify({
          generated: aGenerated,
          source: aSource,
          original: aOriginal,
          name: aName
        }));
      }
    };
    SourceMapGenerator.prototype._serializeMappings = function SourceMapGenerator_serializeMappings() {
      var previousGeneratedColumn = 0;
      var previousGeneratedLine = 1;
      var previousOriginalColumn = 0;
      var previousOriginalLine = 0;
      var previousName = 0;
      var previousSource = 0;
      var result = "";
      var next;
      var mapping;
      var nameIdx;
      var sourceIdx;
      var mappings = this._mappings.toArray();
      for (var i = 0, len = mappings.length; i < len; i++) {
        mapping = mappings[i];
        next = "";
        if (mapping.generatedLine !== previousGeneratedLine) {
          previousGeneratedColumn = 0;
          while (mapping.generatedLine !== previousGeneratedLine) {
            next += ";";
            previousGeneratedLine++;
          }
        } else {
          if (i > 0) {
            if (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {
              continue;
            }
            next += ",";
          }
        }
        next += base64VLQ.encode(mapping.generatedColumn - previousGeneratedColumn);
        previousGeneratedColumn = mapping.generatedColumn;
        if (mapping.source != null) {
          sourceIdx = this._sources.indexOf(mapping.source);
          next += base64VLQ.encode(sourceIdx - previousSource);
          previousSource = sourceIdx;
          next += base64VLQ.encode(mapping.originalLine - 1 - previousOriginalLine);
          previousOriginalLine = mapping.originalLine - 1;
          next += base64VLQ.encode(mapping.originalColumn - previousOriginalColumn);
          previousOriginalColumn = mapping.originalColumn;
          if (mapping.name != null) {
            nameIdx = this._names.indexOf(mapping.name);
            next += base64VLQ.encode(nameIdx - previousName);
            previousName = nameIdx;
          }
        }
        result += next;
      }
      return result;
    };
    SourceMapGenerator.prototype._generateSourcesContent = function SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {
      return aSources.map(function(source) {
        if (!this._sourcesContents) {
          return null;
        }
        if (aSourceRoot != null) {
          source = util.relative(aSourceRoot, source);
        }
        var key = util.toSetString(source);
        return Object.prototype.hasOwnProperty.call(this._sourcesContents, key) ? this._sourcesContents[key] : null;
      }, this);
    };
    SourceMapGenerator.prototype.toJSON = function SourceMapGenerator_toJSON() {
      var map5 = {
        version: this._version,
        sources: this._sources.toArray(),
        names: this._names.toArray(),
        mappings: this._serializeMappings()
      };
      if (this._file != null) {
        map5.file = this._file;
      }
      if (this._sourceRoot != null) {
        map5.sourceRoot = this._sourceRoot;
      }
      if (this._sourcesContents) {
        map5.sourcesContent = this._generateSourcesContent(map5.sources, map5.sourceRoot);
      }
      return map5;
    };
    SourceMapGenerator.prototype.toString = function SourceMapGenerator_toString() {
      return JSON.stringify(this.toJSON());
    };
    exports.SourceMapGenerator = SourceMapGenerator;
  }
});

// node_modules/handlebars/node_modules/source-map/lib/binary-search.js
var require_binary_search = __commonJS({
  "node_modules/handlebars/node_modules/source-map/lib/binary-search.js"(exports) {
    exports.GREATEST_LOWER_BOUND = 1;
    exports.LEAST_UPPER_BOUND = 2;
    function recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {
      var mid = Math.floor((aHigh - aLow) / 2) + aLow;
      var cmp = aCompare(aNeedle, aHaystack[mid], true);
      if (cmp === 0) {
        return mid;
      } else if (cmp > 0) {
        if (aHigh - mid > 1) {
          return recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);
        }
        if (aBias == exports.LEAST_UPPER_BOUND) {
          return aHigh < aHaystack.length ? aHigh : -1;
        } else {
          return mid;
        }
      } else {
        if (mid - aLow > 1) {
          return recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);
        }
        if (aBias == exports.LEAST_UPPER_BOUND) {
          return mid;
        } else {
          return aLow < 0 ? -1 : aLow;
        }
      }
    }
    exports.search = function search(aNeedle, aHaystack, aCompare, aBias) {
      if (aHaystack.length === 0) {
        return -1;
      }
      var index3 = recursiveSearch(
        -1,
        aHaystack.length,
        aNeedle,
        aHaystack,
        aCompare,
        aBias || exports.GREATEST_LOWER_BOUND
      );
      if (index3 < 0) {
        return -1;
      }
      while (index3 - 1 >= 0) {
        if (aCompare(aHaystack[index3], aHaystack[index3 - 1], true) !== 0) {
          break;
        }
        --index3;
      }
      return index3;
    };
  }
});

// node_modules/handlebars/node_modules/source-map/lib/quick-sort.js
var require_quick_sort = __commonJS({
  "node_modules/handlebars/node_modules/source-map/lib/quick-sort.js"(exports) {
    function swap3(ary, x4, y4) {
      var temp = ary[x4];
      ary[x4] = ary[y4];
      ary[y4] = temp;
    }
    function randomIntInRange(low, high) {
      return Math.round(low + Math.random() * (high - low));
    }
    function doQuickSort(ary, comparator, p, r) {
      if (p < r) {
        var pivotIndex = randomIntInRange(p, r);
        var i = p - 1;
        swap3(ary, pivotIndex, r);
        var pivot = ary[r];
        for (var j = p; j < r; j++) {
          if (comparator(ary[j], pivot) <= 0) {
            i += 1;
            swap3(ary, i, j);
          }
        }
        swap3(ary, i + 1, j);
        var q = i + 1;
        doQuickSort(ary, comparator, p, q - 1);
        doQuickSort(ary, comparator, q + 1, r);
      }
    }
    exports.quickSort = function(ary, comparator) {
      doQuickSort(ary, comparator, 0, ary.length - 1);
    };
  }
});

// node_modules/handlebars/node_modules/source-map/lib/source-map-consumer.js
var require_source_map_consumer = __commonJS({
  "node_modules/handlebars/node_modules/source-map/lib/source-map-consumer.js"(exports) {
    var util = require_util();
    var binarySearch = require_binary_search();
    var ArraySet = require_array_set().ArraySet;
    var base64VLQ = require_base64_vlq();
    var quickSort = require_quick_sort().quickSort;
    function SourceMapConsumer(aSourceMap, aSourceMapURL) {
      var sourceMap = aSourceMap;
      if (typeof aSourceMap === "string") {
        sourceMap = util.parseSourceMapInput(aSourceMap);
      }
      return sourceMap.sections != null ? new IndexedSourceMapConsumer(sourceMap, aSourceMapURL) : new BasicSourceMapConsumer(sourceMap, aSourceMapURL);
    }
    SourceMapConsumer.fromSourceMap = function(aSourceMap, aSourceMapURL) {
      return BasicSourceMapConsumer.fromSourceMap(aSourceMap, aSourceMapURL);
    };
    SourceMapConsumer.prototype._version = 3;
    SourceMapConsumer.prototype.__generatedMappings = null;
    Object.defineProperty(SourceMapConsumer.prototype, "_generatedMappings", {
      configurable: true,
      enumerable: true,
      get: function() {
        if (!this.__generatedMappings) {
          this._parseMappings(this._mappings, this.sourceRoot);
        }
        return this.__generatedMappings;
      }
    });
    SourceMapConsumer.prototype.__originalMappings = null;
    Object.defineProperty(SourceMapConsumer.prototype, "_originalMappings", {
      configurable: true,
      enumerable: true,
      get: function() {
        if (!this.__originalMappings) {
          this._parseMappings(this._mappings, this.sourceRoot);
        }
        return this.__originalMappings;
      }
    });
    SourceMapConsumer.prototype._charIsMappingSeparator = function SourceMapConsumer_charIsMappingSeparator(aStr, index3) {
      var c5 = aStr.charAt(index3);
      return c5 === ";" || c5 === ",";
    };
    SourceMapConsumer.prototype._parseMappings = function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {
      throw new Error("Subclasses must implement _parseMappings");
    };
    SourceMapConsumer.GENERATED_ORDER = 1;
    SourceMapConsumer.ORIGINAL_ORDER = 2;
    SourceMapConsumer.GREATEST_LOWER_BOUND = 1;
    SourceMapConsumer.LEAST_UPPER_BOUND = 2;
    SourceMapConsumer.prototype.eachMapping = function SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {
      var context = aContext || null;
      var order = aOrder || SourceMapConsumer.GENERATED_ORDER;
      var mappings;
      switch (order) {
        case SourceMapConsumer.GENERATED_ORDER:
          mappings = this._generatedMappings;
          break;
        case SourceMapConsumer.ORIGINAL_ORDER:
          mappings = this._originalMappings;
          break;
        default:
          throw new Error("Unknown order of iteration.");
      }
      var sourceRoot = this.sourceRoot;
      mappings.map(function(mapping) {
        var source = mapping.source === null ? null : this._sources.at(mapping.source);
        source = util.computeSourceURL(sourceRoot, source, this._sourceMapURL);
        return {
          source,
          generatedLine: mapping.generatedLine,
          generatedColumn: mapping.generatedColumn,
          originalLine: mapping.originalLine,
          originalColumn: mapping.originalColumn,
          name: mapping.name === null ? null : this._names.at(mapping.name)
        };
      }, this).forEach(aCallback, context);
    };
    SourceMapConsumer.prototype.allGeneratedPositionsFor = function SourceMapConsumer_allGeneratedPositionsFor(aArgs) {
      var line = util.getArg(aArgs, "line");
      var needle = {
        source: util.getArg(aArgs, "source"),
        originalLine: line,
        originalColumn: util.getArg(aArgs, "column", 0)
      };
      needle.source = this._findSourceIndex(needle.source);
      if (needle.source < 0) {
        return [];
      }
      var mappings = [];
      var index3 = this._findMapping(
        needle,
        this._originalMappings,
        "originalLine",
        "originalColumn",
        util.compareByOriginalPositions,
        binarySearch.LEAST_UPPER_BOUND
      );
      if (index3 >= 0) {
        var mapping = this._originalMappings[index3];
        if (aArgs.column === void 0) {
          var originalLine = mapping.originalLine;
          while (mapping && mapping.originalLine === originalLine) {
            mappings.push({
              line: util.getArg(mapping, "generatedLine", null),
              column: util.getArg(mapping, "generatedColumn", null),
              lastColumn: util.getArg(mapping, "lastGeneratedColumn", null)
            });
            mapping = this._originalMappings[++index3];
          }
        } else {
          var originalColumn = mapping.originalColumn;
          while (mapping && mapping.originalLine === line && mapping.originalColumn == originalColumn) {
            mappings.push({
              line: util.getArg(mapping, "generatedLine", null),
              column: util.getArg(mapping, "generatedColumn", null),
              lastColumn: util.getArg(mapping, "lastGeneratedColumn", null)
            });
            mapping = this._originalMappings[++index3];
          }
        }
      }
      return mappings;
    };
    exports.SourceMapConsumer = SourceMapConsumer;
    function BasicSourceMapConsumer(aSourceMap, aSourceMapURL) {
      var sourceMap = aSourceMap;
      if (typeof aSourceMap === "string") {
        sourceMap = util.parseSourceMapInput(aSourceMap);
      }
      var version3 = util.getArg(sourceMap, "version");
      var sources = util.getArg(sourceMap, "sources");
      var names = util.getArg(sourceMap, "names", []);
      var sourceRoot = util.getArg(sourceMap, "sourceRoot", null);
      var sourcesContent = util.getArg(sourceMap, "sourcesContent", null);
      var mappings = util.getArg(sourceMap, "mappings");
      var file = util.getArg(sourceMap, "file", null);
      if (version3 != this._version) {
        throw new Error("Unsupported version: " + version3);
      }
      if (sourceRoot) {
        sourceRoot = util.normalize(sourceRoot);
      }
      sources = sources.map(String).map(util.normalize).map(function(source) {
        return sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source) ? util.relative(sourceRoot, source) : source;
      });
      this._names = ArraySet.fromArray(names.map(String), true);
      this._sources = ArraySet.fromArray(sources, true);
      this._absoluteSources = this._sources.toArray().map(function(s3) {
        return util.computeSourceURL(sourceRoot, s3, aSourceMapURL);
      });
      this.sourceRoot = sourceRoot;
      this.sourcesContent = sourcesContent;
      this._mappings = mappings;
      this._sourceMapURL = aSourceMapURL;
      this.file = file;
    }
    BasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);
    BasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;
    BasicSourceMapConsumer.prototype._findSourceIndex = function(aSource) {
      var relativeSource = aSource;
      if (this.sourceRoot != null) {
        relativeSource = util.relative(this.sourceRoot, relativeSource);
      }
      if (this._sources.has(relativeSource)) {
        return this._sources.indexOf(relativeSource);
      }
      var i;
      for (i = 0; i < this._absoluteSources.length; ++i) {
        if (this._absoluteSources[i] == aSource) {
          return i;
        }
      }
      return -1;
    };
    BasicSourceMapConsumer.fromSourceMap = function SourceMapConsumer_fromSourceMap(aSourceMap, aSourceMapURL) {
      var smc = Object.create(BasicSourceMapConsumer.prototype);
      var names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);
      var sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);
      smc.sourceRoot = aSourceMap._sourceRoot;
      smc.sourcesContent = aSourceMap._generateSourcesContent(
        smc._sources.toArray(),
        smc.sourceRoot
      );
      smc.file = aSourceMap._file;
      smc._sourceMapURL = aSourceMapURL;
      smc._absoluteSources = smc._sources.toArray().map(function(s3) {
        return util.computeSourceURL(smc.sourceRoot, s3, aSourceMapURL);
      });
      var generatedMappings = aSourceMap._mappings.toArray().slice();
      var destGeneratedMappings = smc.__generatedMappings = [];
      var destOriginalMappings = smc.__originalMappings = [];
      for (var i = 0, length3 = generatedMappings.length; i < length3; i++) {
        var srcMapping = generatedMappings[i];
        var destMapping = new Mapping();
        destMapping.generatedLine = srcMapping.generatedLine;
        destMapping.generatedColumn = srcMapping.generatedColumn;
        if (srcMapping.source) {
          destMapping.source = sources.indexOf(srcMapping.source);
          destMapping.originalLine = srcMapping.originalLine;
          destMapping.originalColumn = srcMapping.originalColumn;
          if (srcMapping.name) {
            destMapping.name = names.indexOf(srcMapping.name);
          }
          destOriginalMappings.push(destMapping);
        }
        destGeneratedMappings.push(destMapping);
      }
      quickSort(smc.__originalMappings, util.compareByOriginalPositions);
      return smc;
    };
    BasicSourceMapConsumer.prototype._version = 3;
    Object.defineProperty(BasicSourceMapConsumer.prototype, "sources", {
      get: function() {
        return this._absoluteSources.slice();
      }
    });
    function Mapping() {
      this.generatedLine = 0;
      this.generatedColumn = 0;
      this.source = null;
      this.originalLine = null;
      this.originalColumn = null;
      this.name = null;
    }
    BasicSourceMapConsumer.prototype._parseMappings = function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {
      var generatedLine = 1;
      var previousGeneratedColumn = 0;
      var previousOriginalLine = 0;
      var previousOriginalColumn = 0;
      var previousSource = 0;
      var previousName = 0;
      var length3 = aStr.length;
      var index3 = 0;
      var cachedSegments = {};
      var temp = {};
      var originalMappings = [];
      var generatedMappings = [];
      var mapping, str, segment, end, value;
      while (index3 < length3) {
        if (aStr.charAt(index3) === ";") {
          generatedLine++;
          index3++;
          previousGeneratedColumn = 0;
        } else if (aStr.charAt(index3) === ",") {
          index3++;
        } else {
          mapping = new Mapping();
          mapping.generatedLine = generatedLine;
          for (end = index3; end < length3; end++) {
            if (this._charIsMappingSeparator(aStr, end)) {
              break;
            }
          }
          str = aStr.slice(index3, end);
          segment = cachedSegments[str];
          if (segment) {
            index3 += str.length;
          } else {
            segment = [];
            while (index3 < end) {
              base64VLQ.decode(aStr, index3, temp);
              value = temp.value;
              index3 = temp.rest;
              segment.push(value);
            }
            if (segment.length === 2) {
              throw new Error("Found a source, but no line and column");
            }
            if (segment.length === 3) {
              throw new Error("Found a source and line, but no column");
            }
            cachedSegments[str] = segment;
          }
          mapping.generatedColumn = previousGeneratedColumn + segment[0];
          previousGeneratedColumn = mapping.generatedColumn;
          if (segment.length > 1) {
            mapping.source = previousSource + segment[1];
            previousSource += segment[1];
            mapping.originalLine = previousOriginalLine + segment[2];
            previousOriginalLine = mapping.originalLine;
            mapping.originalLine += 1;
            mapping.originalColumn = previousOriginalColumn + segment[3];
            previousOriginalColumn = mapping.originalColumn;
            if (segment.length > 4) {
              mapping.name = previousName + segment[4];
              previousName += segment[4];
            }
          }
          generatedMappings.push(mapping);
          if (typeof mapping.originalLine === "number") {
            originalMappings.push(mapping);
          }
        }
      }
      quickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);
      this.__generatedMappings = generatedMappings;
      quickSort(originalMappings, util.compareByOriginalPositions);
      this.__originalMappings = originalMappings;
    };
    BasicSourceMapConsumer.prototype._findMapping = function SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName, aColumnName, aComparator, aBias) {
      if (aNeedle[aLineName] <= 0) {
        throw new TypeError("Line must be greater than or equal to 1, got " + aNeedle[aLineName]);
      }
      if (aNeedle[aColumnName] < 0) {
        throw new TypeError("Column must be greater than or equal to 0, got " + aNeedle[aColumnName]);
      }
      return binarySearch.search(aNeedle, aMappings, aComparator, aBias);
    };
    BasicSourceMapConsumer.prototype.computeColumnSpans = function SourceMapConsumer_computeColumnSpans() {
      for (var index3 = 0; index3 < this._generatedMappings.length; ++index3) {
        var mapping = this._generatedMappings[index3];
        if (index3 + 1 < this._generatedMappings.length) {
          var nextMapping = this._generatedMappings[index3 + 1];
          if (mapping.generatedLine === nextMapping.generatedLine) {
            mapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;
            continue;
          }
        }
        mapping.lastGeneratedColumn = Infinity;
      }
    };
    BasicSourceMapConsumer.prototype.originalPositionFor = function SourceMapConsumer_originalPositionFor(aArgs) {
      var needle = {
        generatedLine: util.getArg(aArgs, "line"),
        generatedColumn: util.getArg(aArgs, "column")
      };
      var index3 = this._findMapping(
        needle,
        this._generatedMappings,
        "generatedLine",
        "generatedColumn",
        util.compareByGeneratedPositionsDeflated,
        util.getArg(aArgs, "bias", SourceMapConsumer.GREATEST_LOWER_BOUND)
      );
      if (index3 >= 0) {
        var mapping = this._generatedMappings[index3];
        if (mapping.generatedLine === needle.generatedLine) {
          var source = util.getArg(mapping, "source", null);
          if (source !== null) {
            source = this._sources.at(source);
            source = util.computeSourceURL(this.sourceRoot, source, this._sourceMapURL);
          }
          var name = util.getArg(mapping, "name", null);
          if (name !== null) {
            name = this._names.at(name);
          }
          return {
            source,
            line: util.getArg(mapping, "originalLine", null),
            column: util.getArg(mapping, "originalColumn", null),
            name
          };
        }
      }
      return {
        source: null,
        line: null,
        column: null,
        name: null
      };
    };
    BasicSourceMapConsumer.prototype.hasContentsOfAllSources = function BasicSourceMapConsumer_hasContentsOfAllSources() {
      if (!this.sourcesContent) {
        return false;
      }
      return this.sourcesContent.length >= this._sources.size() && !this.sourcesContent.some(function(sc) {
        return sc == null;
      });
    };
    BasicSourceMapConsumer.prototype.sourceContentFor = function SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {
      if (!this.sourcesContent) {
        return null;
      }
      var index3 = this._findSourceIndex(aSource);
      if (index3 >= 0) {
        return this.sourcesContent[index3];
      }
      var relativeSource = aSource;
      if (this.sourceRoot != null) {
        relativeSource = util.relative(this.sourceRoot, relativeSource);
      }
      var url;
      if (this.sourceRoot != null && (url = util.urlParse(this.sourceRoot))) {
        var fileUriAbsPath = relativeSource.replace(/^file:\/\//, "");
        if (url.scheme == "file" && this._sources.has(fileUriAbsPath)) {
          return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)];
        }
        if ((!url.path || url.path == "/") && this._sources.has("/" + relativeSource)) {
          return this.sourcesContent[this._sources.indexOf("/" + relativeSource)];
        }
      }
      if (nullOnMissing) {
        return null;
      } else {
        throw new Error('"' + relativeSource + '" is not in the SourceMap.');
      }
    };
    BasicSourceMapConsumer.prototype.generatedPositionFor = function SourceMapConsumer_generatedPositionFor(aArgs) {
      var source = util.getArg(aArgs, "source");
      source = this._findSourceIndex(source);
      if (source < 0) {
        return {
          line: null,
          column: null,
          lastColumn: null
        };
      }
      var needle = {
        source,
        originalLine: util.getArg(aArgs, "line"),
        originalColumn: util.getArg(aArgs, "column")
      };
      var index3 = this._findMapping(
        needle,
        this._originalMappings,
        "originalLine",
        "originalColumn",
        util.compareByOriginalPositions,
        util.getArg(aArgs, "bias", SourceMapConsumer.GREATEST_LOWER_BOUND)
      );
      if (index3 >= 0) {
        var mapping = this._originalMappings[index3];
        if (mapping.source === needle.source) {
          return {
            line: util.getArg(mapping, "generatedLine", null),
            column: util.getArg(mapping, "generatedColumn", null),
            lastColumn: util.getArg(mapping, "lastGeneratedColumn", null)
          };
        }
      }
      return {
        line: null,
        column: null,
        lastColumn: null
      };
    };
    exports.BasicSourceMapConsumer = BasicSourceMapConsumer;
    function IndexedSourceMapConsumer(aSourceMap, aSourceMapURL) {
      var sourceMap = aSourceMap;
      if (typeof aSourceMap === "string") {
        sourceMap = util.parseSourceMapInput(aSourceMap);
      }
      var version3 = util.getArg(sourceMap, "version");
      var sections = util.getArg(sourceMap, "sections");
      if (version3 != this._version) {
        throw new Error("Unsupported version: " + version3);
      }
      this._sources = new ArraySet();
      this._names = new ArraySet();
      var lastOffset = {
        line: -1,
        column: 0
      };
      this._sections = sections.map(function(s3) {
        if (s3.url) {
          throw new Error("Support for url field in sections not implemented.");
        }
        var offset2 = util.getArg(s3, "offset");
        var offsetLine = util.getArg(offset2, "line");
        var offsetColumn = util.getArg(offset2, "column");
        if (offsetLine < lastOffset.line || offsetLine === lastOffset.line && offsetColumn < lastOffset.column) {
          throw new Error("Section offsets must be ordered and non-overlapping.");
        }
        lastOffset = offset2;
        return {
          generatedOffset: {
            generatedLine: offsetLine + 1,
            generatedColumn: offsetColumn + 1
          },
          consumer: new SourceMapConsumer(util.getArg(s3, "map"), aSourceMapURL)
        };
      });
    }
    IndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);
    IndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;
    IndexedSourceMapConsumer.prototype._version = 3;
    Object.defineProperty(IndexedSourceMapConsumer.prototype, "sources", {
      get: function() {
        var sources = [];
        for (var i = 0; i < this._sections.length; i++) {
          for (var j = 0; j < this._sections[i].consumer.sources.length; j++) {
            sources.push(this._sections[i].consumer.sources[j]);
          }
        }
        return sources;
      }
    });
    IndexedSourceMapConsumer.prototype.originalPositionFor = function IndexedSourceMapConsumer_originalPositionFor(aArgs) {
      var needle = {
        generatedLine: util.getArg(aArgs, "line"),
        generatedColumn: util.getArg(aArgs, "column")
      };
      var sectionIndex = binarySearch.search(
        needle,
        this._sections,
        function(needle2, section2) {
          var cmp = needle2.generatedLine - section2.generatedOffset.generatedLine;
          if (cmp) {
            return cmp;
          }
          return needle2.generatedColumn - section2.generatedOffset.generatedColumn;
        }
      );
      var section = this._sections[sectionIndex];
      if (!section) {
        return {
          source: null,
          line: null,
          column: null,
          name: null
        };
      }
      return section.consumer.originalPositionFor({
        line: needle.generatedLine - (section.generatedOffset.generatedLine - 1),
        column: needle.generatedColumn - (section.generatedOffset.generatedLine === needle.generatedLine ? section.generatedOffset.generatedColumn - 1 : 0),
        bias: aArgs.bias
      });
    };
    IndexedSourceMapConsumer.prototype.hasContentsOfAllSources = function IndexedSourceMapConsumer_hasContentsOfAllSources() {
      return this._sections.every(function(s3) {
        return s3.consumer.hasContentsOfAllSources();
      });
    };
    IndexedSourceMapConsumer.prototype.sourceContentFor = function IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {
      for (var i = 0; i < this._sections.length; i++) {
        var section = this._sections[i];
        var content = section.consumer.sourceContentFor(aSource, true);
        if (content) {
          return content;
        }
      }
      if (nullOnMissing) {
        return null;
      } else {
        throw new Error('"' + aSource + '" is not in the SourceMap.');
      }
    };
    IndexedSourceMapConsumer.prototype.generatedPositionFor = function IndexedSourceMapConsumer_generatedPositionFor(aArgs) {
      for (var i = 0; i < this._sections.length; i++) {
        var section = this._sections[i];
        if (section.consumer._findSourceIndex(util.getArg(aArgs, "source")) === -1) {
          continue;
        }
        var generatedPosition = section.consumer.generatedPositionFor(aArgs);
        if (generatedPosition) {
          var ret = {
            line: generatedPosition.line + (section.generatedOffset.generatedLine - 1),
            column: generatedPosition.column + (section.generatedOffset.generatedLine === generatedPosition.line ? section.generatedOffset.generatedColumn - 1 : 0)
          };
          return ret;
        }
      }
      return {
        line: null,
        column: null
      };
    };
    IndexedSourceMapConsumer.prototype._parseMappings = function IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {
      this.__generatedMappings = [];
      this.__originalMappings = [];
      for (var i = 0; i < this._sections.length; i++) {
        var section = this._sections[i];
        var sectionMappings = section.consumer._generatedMappings;
        for (var j = 0; j < sectionMappings.length; j++) {
          var mapping = sectionMappings[j];
          var source = section.consumer._sources.at(mapping.source);
          source = util.computeSourceURL(section.consumer.sourceRoot, source, this._sourceMapURL);
          this._sources.add(source);
          source = this._sources.indexOf(source);
          var name = null;
          if (mapping.name) {
            name = section.consumer._names.at(mapping.name);
            this._names.add(name);
            name = this._names.indexOf(name);
          }
          var adjustedMapping = {
            source,
            generatedLine: mapping.generatedLine + (section.generatedOffset.generatedLine - 1),
            generatedColumn: mapping.generatedColumn + (section.generatedOffset.generatedLine === mapping.generatedLine ? section.generatedOffset.generatedColumn - 1 : 0),
            originalLine: mapping.originalLine,
            originalColumn: mapping.originalColumn,
            name
          };
          this.__generatedMappings.push(adjustedMapping);
          if (typeof adjustedMapping.originalLine === "number") {
            this.__originalMappings.push(adjustedMapping);
          }
        }
      }
      quickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);
      quickSort(this.__originalMappings, util.compareByOriginalPositions);
    };
    exports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;
  }
});

// node_modules/handlebars/node_modules/source-map/lib/source-node.js
var require_source_node = __commonJS({
  "node_modules/handlebars/node_modules/source-map/lib/source-node.js"(exports) {
    var SourceMapGenerator = require_source_map_generator().SourceMapGenerator;
    var util = require_util();
    var REGEX_NEWLINE = /(\r?\n)/;
    var NEWLINE_CODE = 10;
    var isSourceNode = "$$$isSourceNode$$$";
    function SourceNode(aLine, aColumn, aSource, aChunks, aName) {
      this.children = [];
      this.sourceContents = {};
      this.line = aLine == null ? null : aLine;
      this.column = aColumn == null ? null : aColumn;
      this.source = aSource == null ? null : aSource;
      this.name = aName == null ? null : aName;
      this[isSourceNode] = true;
      if (aChunks != null)
        this.add(aChunks);
    }
    SourceNode.fromStringWithSourceMap = function SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {
      var node = new SourceNode();
      var remainingLines = aGeneratedCode.split(REGEX_NEWLINE);
      var remainingLinesIndex = 0;
      var shiftNextLine = function() {
        var lineContents = getNextLine();
        var newLine = getNextLine() || "";
        return lineContents + newLine;
        function getNextLine() {
          return remainingLinesIndex < remainingLines.length ? remainingLines[remainingLinesIndex++] : void 0;
        }
      };
      var lastGeneratedLine = 1, lastGeneratedColumn = 0;
      var lastMapping = null;
      aSourceMapConsumer.eachMapping(function(mapping) {
        if (lastMapping !== null) {
          if (lastGeneratedLine < mapping.generatedLine) {
            addMappingWithCode(lastMapping, shiftNextLine());
            lastGeneratedLine++;
            lastGeneratedColumn = 0;
          } else {
            var nextLine = remainingLines[remainingLinesIndex] || "";
            var code = nextLine.substr(0, mapping.generatedColumn - lastGeneratedColumn);
            remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn - lastGeneratedColumn);
            lastGeneratedColumn = mapping.generatedColumn;
            addMappingWithCode(lastMapping, code);
            lastMapping = mapping;
            return;
          }
        }
        while (lastGeneratedLine < mapping.generatedLine) {
          node.add(shiftNextLine());
          lastGeneratedLine++;
        }
        if (lastGeneratedColumn < mapping.generatedColumn) {
          var nextLine = remainingLines[remainingLinesIndex] || "";
          node.add(nextLine.substr(0, mapping.generatedColumn));
          remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn);
          lastGeneratedColumn = mapping.generatedColumn;
        }
        lastMapping = mapping;
      }, this);
      if (remainingLinesIndex < remainingLines.length) {
        if (lastMapping) {
          addMappingWithCode(lastMapping, shiftNextLine());
        }
        node.add(remainingLines.splice(remainingLinesIndex).join(""));
      }
      aSourceMapConsumer.sources.forEach(function(sourceFile) {
        var content = aSourceMapConsumer.sourceContentFor(sourceFile);
        if (content != null) {
          if (aRelativePath != null) {
            sourceFile = util.join(aRelativePath, sourceFile);
          }
          node.setSourceContent(sourceFile, content);
        }
      });
      return node;
      function addMappingWithCode(mapping, code) {
        if (mapping === null || mapping.source === void 0) {
          node.add(code);
        } else {
          var source = aRelativePath ? util.join(aRelativePath, mapping.source) : mapping.source;
          node.add(new SourceNode(
            mapping.originalLine,
            mapping.originalColumn,
            source,
            code,
            mapping.name
          ));
        }
      }
    };
    SourceNode.prototype.add = function SourceNode_add(aChunk) {
      if (Array.isArray(aChunk)) {
        aChunk.forEach(function(chunk) {
          this.add(chunk);
        }, this);
      } else if (aChunk[isSourceNode] || typeof aChunk === "string") {
        if (aChunk) {
          this.children.push(aChunk);
        }
      } else {
        throw new TypeError(
          "Expected a SourceNode, string, or an array of SourceNodes and strings. Got " + aChunk
        );
      }
      return this;
    };
    SourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {
      if (Array.isArray(aChunk)) {
        for (var i = aChunk.length - 1; i >= 0; i--) {
          this.prepend(aChunk[i]);
        }
      } else if (aChunk[isSourceNode] || typeof aChunk === "string") {
        this.children.unshift(aChunk);
      } else {
        throw new TypeError(
          "Expected a SourceNode, string, or an array of SourceNodes and strings. Got " + aChunk
        );
      }
      return this;
    };
    SourceNode.prototype.walk = function SourceNode_walk(aFn) {
      var chunk;
      for (var i = 0, len = this.children.length; i < len; i++) {
        chunk = this.children[i];
        if (chunk[isSourceNode]) {
          chunk.walk(aFn);
        } else {
          if (chunk !== "") {
            aFn(chunk, {
              source: this.source,
              line: this.line,
              column: this.column,
              name: this.name
            });
          }
        }
      }
    };
    SourceNode.prototype.join = function SourceNode_join(aSep) {
      var newChildren;
      var i;
      var len = this.children.length;
      if (len > 0) {
        newChildren = [];
        for (i = 0; i < len - 1; i++) {
          newChildren.push(this.children[i]);
          newChildren.push(aSep);
        }
        newChildren.push(this.children[i]);
        this.children = newChildren;
      }
      return this;
    };
    SourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {
      var lastChild = this.children[this.children.length - 1];
      if (lastChild[isSourceNode]) {
        lastChild.replaceRight(aPattern, aReplacement);
      } else if (typeof lastChild === "string") {
        this.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);
      } else {
        this.children.push("".replace(aPattern, aReplacement));
      }
      return this;
    };
    SourceNode.prototype.setSourceContent = function SourceNode_setSourceContent(aSourceFile, aSourceContent) {
      this.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;
    };
    SourceNode.prototype.walkSourceContents = function SourceNode_walkSourceContents(aFn) {
      for (var i = 0, len = this.children.length; i < len; i++) {
        if (this.children[i][isSourceNode]) {
          this.children[i].walkSourceContents(aFn);
        }
      }
      var sources = Object.keys(this.sourceContents);
      for (var i = 0, len = sources.length; i < len; i++) {
        aFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);
      }
    };
    SourceNode.prototype.toString = function SourceNode_toString() {
      var str = "";
      this.walk(function(chunk) {
        str += chunk;
      });
      return str;
    };
    SourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {
      var generated = {
        code: "",
        line: 1,
        column: 0
      };
      var map5 = new SourceMapGenerator(aArgs);
      var sourceMappingActive = false;
      var lastOriginalSource = null;
      var lastOriginalLine = null;
      var lastOriginalColumn = null;
      var lastOriginalName = null;
      this.walk(function(chunk, original) {
        generated.code += chunk;
        if (original.source !== null && original.line !== null && original.column !== null) {
          if (lastOriginalSource !== original.source || lastOriginalLine !== original.line || lastOriginalColumn !== original.column || lastOriginalName !== original.name) {
            map5.addMapping({
              source: original.source,
              original: {
                line: original.line,
                column: original.column
              },
              generated: {
                line: generated.line,
                column: generated.column
              },
              name: original.name
            });
          }
          lastOriginalSource = original.source;
          lastOriginalLine = original.line;
          lastOriginalColumn = original.column;
          lastOriginalName = original.name;
          sourceMappingActive = true;
        } else if (sourceMappingActive) {
          map5.addMapping({
            generated: {
              line: generated.line,
              column: generated.column
            }
          });
          lastOriginalSource = null;
          sourceMappingActive = false;
        }
        for (var idx = 0, length3 = chunk.length; idx < length3; idx++) {
          if (chunk.charCodeAt(idx) === NEWLINE_CODE) {
            generated.line++;
            generated.column = 0;
            if (idx + 1 === length3) {
              lastOriginalSource = null;
              sourceMappingActive = false;
            } else if (sourceMappingActive) {
              map5.addMapping({
                source: original.source,
                original: {
                  line: original.line,
                  column: original.column
                },
                generated: {
                  line: generated.line,
                  column: generated.column
                },
                name: original.name
              });
            }
          } else {
            generated.column++;
          }
        }
      });
      this.walkSourceContents(function(sourceFile, sourceContent) {
        map5.setSourceContent(sourceFile, sourceContent);
      });
      return { code: generated.code, map: map5 };
    };
    exports.SourceNode = SourceNode;
  }
});

// node_modules/handlebars/node_modules/source-map/source-map.js
var require_source_map = __commonJS({
  "node_modules/handlebars/node_modules/source-map/source-map.js"(exports) {
    exports.SourceMapGenerator = require_source_map_generator().SourceMapGenerator;
    exports.SourceMapConsumer = require_source_map_consumer().SourceMapConsumer;
    exports.SourceNode = require_source_node().SourceNode;
  }
});

// node_modules/handlebars/dist/cjs/handlebars/compiler/code-gen.js
var require_code_gen = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/compiler/code-gen.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    var _utils = require_utils();
    var SourceNode = void 0;
    try {
      if (typeof define !== "function" || !define.amd) {
        SourceMap = require_source_map();
        SourceNode = SourceMap.SourceNode;
      }
    } catch (err) {
    }
    var SourceMap;
    if (!SourceNode) {
      SourceNode = function(line, column, srcFile, chunks) {
        this.src = "";
        if (chunks) {
          this.add(chunks);
        }
      };
      SourceNode.prototype = {
        add: function add2(chunks) {
          if (_utils.isArray(chunks)) {
            chunks = chunks.join("");
          }
          this.src += chunks;
        },
        prepend: function prepend(chunks) {
          if (_utils.isArray(chunks)) {
            chunks = chunks.join("");
          }
          this.src = chunks + this.src;
        },
        toStringWithSourceMap: function toStringWithSourceMap() {
          return { code: this.toString() };
        },
        toString: function toString() {
          return this.src;
        }
      };
    }
    function castChunk(chunk, codeGen, loc) {
      if (_utils.isArray(chunk)) {
        var ret = [];
        for (var i = 0, len = chunk.length; i < len; i++) {
          ret.push(codeGen.wrap(chunk[i], loc));
        }
        return ret;
      } else if (typeof chunk === "boolean" || typeof chunk === "number") {
        return chunk + "";
      }
      return chunk;
    }
    function CodeGen(srcFile) {
      this.srcFile = srcFile;
      this.source = [];
    }
    CodeGen.prototype = {
      isEmpty: function isEmpty() {
        return !this.source.length;
      },
      prepend: function prepend(source, loc) {
        this.source.unshift(this.wrap(source, loc));
      },
      push: function push(source, loc) {
        this.source.push(this.wrap(source, loc));
      },
      merge: function merge4() {
        var source = this.empty();
        this.each(function(line) {
          source.add(["  ", line, "\n"]);
        });
        return source;
      },
      each: function each(iter) {
        for (var i = 0, len = this.source.length; i < len; i++) {
          iter(this.source[i]);
        }
      },
      empty: function empty4() {
        var loc = this.currentLocation || { start: {} };
        return new SourceNode(loc.start.line, loc.start.column, this.srcFile);
      },
      wrap: function wrap(chunk) {
        var loc = arguments.length <= 1 || arguments[1] === void 0 ? this.currentLocation || { start: {} } : arguments[1];
        if (chunk instanceof SourceNode) {
          return chunk;
        }
        chunk = castChunk(chunk, this, loc);
        return new SourceNode(loc.start.line, loc.start.column, this.srcFile, chunk);
      },
      functionCall: function functionCall(fn, type2, params) {
        params = this.generateList(params);
        return this.wrap([fn, type2 ? "." + type2 + "(" : "(", params, ")"]);
      },
      quotedString: function quotedString(str) {
        return '"' + (str + "").replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029") + '"';
      },
      objectLiteral: function objectLiteral(obj) {
        var _this = this;
        var pairs2 = [];
        Object.keys(obj).forEach(function(key) {
          var value = castChunk(obj[key], _this);
          if (value !== "undefined") {
            pairs2.push([_this.quotedString(key), ":", value]);
          }
        });
        var ret = this.generateList(pairs2);
        ret.prepend("{");
        ret.add("}");
        return ret;
      },
      generateList: function generateList(entries) {
        var ret = this.empty();
        for (var i = 0, len = entries.length; i < len; i++) {
          if (i) {
            ret.add(",");
          }
          ret.add(castChunk(entries[i], this));
        }
        return ret;
      },
      generateArray: function generateArray(entries) {
        var ret = this.generateList(entries);
        ret.prepend("[");
        ret.add("]");
        return ret;
      }
    };
    exports["default"] = CodeGen;
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js
var require_javascript_compiler = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars/compiler/javascript-compiler.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _base = require_base();
    var _exception = require_exception();
    var _exception2 = _interopRequireDefault(_exception);
    var _utils = require_utils();
    var _codeGen = require_code_gen();
    var _codeGen2 = _interopRequireDefault(_codeGen);
    function Literal(value) {
      this.value = value;
    }
    function JavaScriptCompiler() {
    }
    JavaScriptCompiler.prototype = {
      nameLookup: function nameLookup(parent, name) {
        return this.internalNameLookup(parent, name);
      },
      depthedLookup: function depthedLookup(name) {
        return [this.aliasable("container.lookup"), "(depths, ", JSON.stringify(name), ")"];
      },
      compilerInfo: function compilerInfo() {
        var revision = _base.COMPILER_REVISION, versions = _base.REVISION_CHANGES[revision];
        return [revision, versions];
      },
      appendToBuffer: function appendToBuffer(source, location, explicit) {
        if (!_utils.isArray(source)) {
          source = [source];
        }
        source = this.source.wrap(source, location);
        if (this.environment.isSimple) {
          return ["return ", source, ";"];
        } else if (explicit) {
          return ["buffer += ", source, ";"];
        } else {
          source.appendToBuffer = true;
          return source;
        }
      },
      initializeBuffer: function initializeBuffer() {
        return this.quotedString("");
      },
      internalNameLookup: function internalNameLookup(parent, name) {
        this.lookupPropertyFunctionIsUsed = true;
        return ["lookupProperty(", parent, ",", JSON.stringify(name), ")"];
      },
      lookupPropertyFunctionIsUsed: false,
      compile: function compile(environment, options, context, asObject) {
        this.environment = environment;
        this.options = options;
        this.stringParams = this.options.stringParams;
        this.trackIds = this.options.trackIds;
        this.precompile = !asObject;
        this.name = this.environment.name;
        this.isChild = !!context;
        this.context = context || {
          decorators: [],
          programs: [],
          environments: []
        };
        this.preamble();
        this.stackSlot = 0;
        this.stackVars = [];
        this.aliases = {};
        this.registers = { list: [] };
        this.hashes = [];
        this.compileStack = [];
        this.inlineStack = [];
        this.blockParams = [];
        this.compileChildren(environment, options);
        this.useDepths = this.useDepths || environment.useDepths || environment.useDecorators || this.options.compat;
        this.useBlockParams = this.useBlockParams || environment.useBlockParams;
        var opcodes = environment.opcodes, opcode = void 0, firstLoc = void 0, i = void 0, l2 = void 0;
        for (i = 0, l2 = opcodes.length; i < l2; i++) {
          opcode = opcodes[i];
          this.source.currentLocation = opcode.loc;
          firstLoc = firstLoc || opcode.loc;
          this[opcode.opcode].apply(this, opcode.args);
        }
        this.source.currentLocation = firstLoc;
        this.pushSource("");
        if (this.stackSlot || this.inlineStack.length || this.compileStack.length) {
          throw new _exception2["default"]("Compile completed with content left on stack");
        }
        if (!this.decorators.isEmpty()) {
          this.useDecorators = true;
          this.decorators.prepend(["var decorators = container.decorators, ", this.lookupPropertyFunctionVarDeclaration(), ";\n"]);
          this.decorators.push("return fn;");
          if (asObject) {
            this.decorators = Function.apply(this, ["fn", "props", "container", "depth0", "data", "blockParams", "depths", this.decorators.merge()]);
          } else {
            this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n");
            this.decorators.push("}\n");
            this.decorators = this.decorators.merge();
          }
        } else {
          this.decorators = void 0;
        }
        var fn = this.createFunctionContext(asObject);
        if (!this.isChild) {
          var ret = {
            compiler: this.compilerInfo(),
            main: fn
          };
          if (this.decorators) {
            ret.main_d = this.decorators;
            ret.useDecorators = true;
          }
          var _context = this.context;
          var programs = _context.programs;
          var decorators = _context.decorators;
          for (i = 0, l2 = programs.length; i < l2; i++) {
            if (programs[i]) {
              ret[i] = programs[i];
              if (decorators[i]) {
                ret[i + "_d"] = decorators[i];
                ret.useDecorators = true;
              }
            }
          }
          if (this.environment.usePartial) {
            ret.usePartial = true;
          }
          if (this.options.data) {
            ret.useData = true;
          }
          if (this.useDepths) {
            ret.useDepths = true;
          }
          if (this.useBlockParams) {
            ret.useBlockParams = true;
          }
          if (this.options.compat) {
            ret.compat = true;
          }
          if (!asObject) {
            ret.compiler = JSON.stringify(ret.compiler);
            this.source.currentLocation = { start: { line: 1, column: 0 } };
            ret = this.objectLiteral(ret);
            if (options.srcName) {
              ret = ret.toStringWithSourceMap({ file: options.destName });
              ret.map = ret.map && ret.map.toString();
            } else {
              ret = ret.toString();
            }
          } else {
            ret.compilerOptions = this.options;
          }
          return ret;
        } else {
          return fn;
        }
      },
      preamble: function preamble() {
        this.lastContext = 0;
        this.source = new _codeGen2["default"](this.options.srcName);
        this.decorators = new _codeGen2["default"](this.options.srcName);
      },
      createFunctionContext: function createFunctionContext(asObject) {
        var _this = this;
        var varDeclarations = "";
        var locals = this.stackVars.concat(this.registers.list);
        if (locals.length > 0) {
          varDeclarations += ", " + locals.join(", ");
        }
        var aliasCount = 0;
        Object.keys(this.aliases).forEach(function(alias) {
          var node = _this.aliases[alias];
          if (node.children && node.referenceCount > 1) {
            varDeclarations += ", alias" + ++aliasCount + "=" + alias;
            node.children[0] = "alias" + aliasCount;
          }
        });
        if (this.lookupPropertyFunctionIsUsed) {
          varDeclarations += ", " + this.lookupPropertyFunctionVarDeclaration();
        }
        var params = ["container", "depth0", "helpers", "partials", "data"];
        if (this.useBlockParams || this.useDepths) {
          params.push("blockParams");
        }
        if (this.useDepths) {
          params.push("depths");
        }
        var source = this.mergeSource(varDeclarations);
        if (asObject) {
          params.push(source);
          return Function.apply(this, params);
        } else {
          return this.source.wrap(["function(", params.join(","), ") {\n  ", source, "}"]);
        }
      },
      mergeSource: function mergeSource(varDeclarations) {
        var isSimple = this.environment.isSimple, appendOnly = !this.forceBuffer, appendFirst = void 0, sourceSeen = void 0, bufferStart = void 0, bufferEnd = void 0;
        this.source.each(function(line) {
          if (line.appendToBuffer) {
            if (bufferStart) {
              line.prepend("  + ");
            } else {
              bufferStart = line;
            }
            bufferEnd = line;
          } else {
            if (bufferStart) {
              if (!sourceSeen) {
                appendFirst = true;
              } else {
                bufferStart.prepend("buffer += ");
              }
              bufferEnd.add(";");
              bufferStart = bufferEnd = void 0;
            }
            sourceSeen = true;
            if (!isSimple) {
              appendOnly = false;
            }
          }
        });
        if (appendOnly) {
          if (bufferStart) {
            bufferStart.prepend("return ");
            bufferEnd.add(";");
          } else if (!sourceSeen) {
            this.source.push('return "";');
          }
        } else {
          varDeclarations += ", buffer = " + (appendFirst ? "" : this.initializeBuffer());
          if (bufferStart) {
            bufferStart.prepend("return buffer + ");
            bufferEnd.add(";");
          } else {
            this.source.push("return buffer;");
          }
        }
        if (varDeclarations) {
          this.source.prepend("var " + varDeclarations.substring(2) + (appendFirst ? "" : ";\n"));
        }
        return this.source.merge();
      },
      lookupPropertyFunctionVarDeclaration: function lookupPropertyFunctionVarDeclaration() {
        return "\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim();
      },
      blockValue: function blockValue(name) {
        var blockHelperMissing = this.aliasable("container.hooks.blockHelperMissing"), params = [this.contextName(0)];
        this.setupHelperArgs(name, 0, params);
        var blockName = this.popStack();
        params.splice(1, 0, blockName);
        this.push(this.source.functionCall(blockHelperMissing, "call", params));
      },
      ambiguousBlockValue: function ambiguousBlockValue() {
        var blockHelperMissing = this.aliasable("container.hooks.blockHelperMissing"), params = [this.contextName(0)];
        this.setupHelperArgs("", 0, params, true);
        this.flushInline();
        var current = this.topStack();
        params.splice(1, 0, current);
        this.pushSource(["if (!", this.lastHelper, ") { ", current, " = ", this.source.functionCall(blockHelperMissing, "call", params), "}"]);
      },
      appendContent: function appendContent(content) {
        if (this.pendingContent) {
          content = this.pendingContent + content;
        } else {
          this.pendingLocation = this.source.currentLocation;
        }
        this.pendingContent = content;
      },
      append: function append() {
        if (this.isInline()) {
          this.replaceStack(function(current) {
            return [" != null ? ", current, ' : ""'];
          });
          this.pushSource(this.appendToBuffer(this.popStack()));
        } else {
          var local3 = this.popStack();
          this.pushSource(["if (", local3, " != null) { ", this.appendToBuffer(local3, void 0, true), " }"]);
          if (this.environment.isSimple) {
            this.pushSource(["else { ", this.appendToBuffer("''", void 0, true), " }"]);
          }
        }
      },
      appendEscaped: function appendEscaped() {
        this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"), "(", this.popStack(), ")"]));
      },
      getContext: function getContext(depth) {
        this.lastContext = depth;
      },
      pushContext: function pushContext() {
        this.pushStackLiteral(this.contextName(this.lastContext));
      },
      lookupOnContext: function lookupOnContext(parts, falsy, strict, scoped) {
        var i = 0;
        if (!scoped && this.options.compat && !this.lastContext) {
          this.push(this.depthedLookup(parts[i++]));
        } else {
          this.pushContext();
        }
        this.resolvePath("context", parts, i, falsy, strict);
      },
      lookupBlockParam: function lookupBlockParam(blockParamId, parts) {
        this.useBlockParams = true;
        this.push(["blockParams[", blockParamId[0], "][", blockParamId[1], "]"]);
        this.resolvePath("context", parts, 1);
      },
      lookupData: function lookupData(depth, parts, strict) {
        if (!depth) {
          this.pushStackLiteral("data");
        } else {
          this.pushStackLiteral("container.data(data, " + depth + ")");
        }
        this.resolvePath("data", parts, 0, true, strict);
      },
      resolvePath: function resolvePath(type2, parts, i, falsy, strict) {
        var _this2 = this;
        if (this.options.strict || this.options.assumeObjects) {
          this.push(strictLookup(this.options.strict && strict, this, parts, type2));
          return;
        }
        var len = parts.length;
        for (; i < len; i++) {
          this.replaceStack(function(current) {
            var lookup = _this2.nameLookup(current, parts[i], type2);
            if (!falsy) {
              return [" != null ? ", lookup, " : ", current];
            } else {
              return [" && ", lookup];
            }
          });
        }
      },
      resolvePossibleLambda: function resolvePossibleLambda() {
        this.push([this.aliasable("container.lambda"), "(", this.popStack(), ", ", this.contextName(0), ")"]);
      },
      pushStringParam: function pushStringParam(string, type2) {
        this.pushContext();
        this.pushString(type2);
        if (type2 !== "SubExpression") {
          if (typeof string === "string") {
            this.pushString(string);
          } else {
            this.pushStackLiteral(string);
          }
        }
      },
      emptyHash: function emptyHash(omitEmpty) {
        if (this.trackIds) {
          this.push("{}");
        }
        if (this.stringParams) {
          this.push("{}");
          this.push("{}");
        }
        this.pushStackLiteral(omitEmpty ? "undefined" : "{}");
      },
      pushHash: function pushHash() {
        if (this.hash) {
          this.hashes.push(this.hash);
        }
        this.hash = { values: {}, types: [], contexts: [], ids: [] };
      },
      popHash: function popHash() {
        var hash = this.hash;
        this.hash = this.hashes.pop();
        if (this.trackIds) {
          this.push(this.objectLiteral(hash.ids));
        }
        if (this.stringParams) {
          this.push(this.objectLiteral(hash.contexts));
          this.push(this.objectLiteral(hash.types));
        }
        this.push(this.objectLiteral(hash.values));
      },
      pushString: function pushString(string) {
        this.pushStackLiteral(this.quotedString(string));
      },
      pushLiteral: function pushLiteral(value) {
        this.pushStackLiteral(value);
      },
      pushProgram: function pushProgram(guid) {
        if (guid != null) {
          this.pushStackLiteral(this.programExpression(guid));
        } else {
          this.pushStackLiteral(null);
        }
      },
      registerDecorator: function registerDecorator(paramSize, name) {
        var foundDecorator = this.nameLookup("decorators", name, "decorator"), options = this.setupHelperArgs(name, paramSize);
        this.decorators.push(["fn = ", this.decorators.functionCall(foundDecorator, "", ["fn", "props", "container", options]), " || fn;"]);
      },
      invokeHelper: function invokeHelper(paramSize, name, isSimple) {
        var nonHelper = this.popStack(), helper = this.setupHelper(paramSize, name);
        var possibleFunctionCalls = [];
        if (isSimple) {
          possibleFunctionCalls.push(helper.name);
        }
        possibleFunctionCalls.push(nonHelper);
        if (!this.options.strict) {
          possibleFunctionCalls.push(this.aliasable("container.hooks.helperMissing"));
        }
        var functionLookupCode = ["(", this.itemsSeparatedBy(possibleFunctionCalls, "||"), ")"];
        var functionCall = this.source.functionCall(functionLookupCode, "call", helper.callParams);
        this.push(functionCall);
      },
      itemsSeparatedBy: function itemsSeparatedBy(items, separator) {
        var result = [];
        result.push(items[0]);
        for (var i = 1; i < items.length; i++) {
          result.push(separator, items[i]);
        }
        return result;
      },
      invokeKnownHelper: function invokeKnownHelper(paramSize, name) {
        var helper = this.setupHelper(paramSize, name);
        this.push(this.source.functionCall(helper.name, "call", helper.callParams));
      },
      invokeAmbiguous: function invokeAmbiguous(name, helperCall) {
        this.useRegister("helper");
        var nonHelper = this.popStack();
        this.emptyHash();
        var helper = this.setupHelper(0, name, helperCall);
        var helperName = this.lastHelper = this.nameLookup("helpers", name, "helper");
        var lookup = ["(", "(helper = ", helperName, " || ", nonHelper, ")"];
        if (!this.options.strict) {
          lookup[0] = "(helper = ";
          lookup.push(" != null ? helper : ", this.aliasable("container.hooks.helperMissing"));
        }
        this.push(["(", lookup, helper.paramsInit ? ["),(", helper.paramsInit] : [], "),", "(typeof helper === ", this.aliasable('"function"'), " ? ", this.source.functionCall("helper", "call", helper.callParams), " : helper))"]);
      },
      invokePartial: function invokePartial(isDynamic, name, indent) {
        var params = [], options = this.setupParams(name, 1, params);
        if (isDynamic) {
          name = this.popStack();
          delete options.name;
        }
        if (indent) {
          options.indent = JSON.stringify(indent);
        }
        options.helpers = "helpers";
        options.partials = "partials";
        options.decorators = "container.decorators";
        if (!isDynamic) {
          params.unshift(this.nameLookup("partials", name, "partial"));
        } else {
          params.unshift(name);
        }
        if (this.options.compat) {
          options.depths = "depths";
        }
        options = this.objectLiteral(options);
        params.push(options);
        this.push(this.source.functionCall("container.invokePartial", "", params));
      },
      assignToHash: function assignToHash(key) {
        var value = this.popStack(), context = void 0, type2 = void 0, id2 = void 0;
        if (this.trackIds) {
          id2 = this.popStack();
        }
        if (this.stringParams) {
          type2 = this.popStack();
          context = this.popStack();
        }
        var hash = this.hash;
        if (context) {
          hash.contexts[key] = context;
        }
        if (type2) {
          hash.types[key] = type2;
        }
        if (id2) {
          hash.ids[key] = id2;
        }
        hash.values[key] = value;
      },
      pushId: function pushId(type2, name, child) {
        if (type2 === "BlockParam") {
          this.pushStackLiteral("blockParams[" + name[0] + "].path[" + name[1] + "]" + (child ? " + " + JSON.stringify("." + child) : ""));
        } else if (type2 === "PathExpression") {
          this.pushString(name);
        } else if (type2 === "SubExpression") {
          this.pushStackLiteral("true");
        } else {
          this.pushStackLiteral("null");
        }
      },
      compiler: JavaScriptCompiler,
      compileChildren: function compileChildren(environment, options) {
        var children2 = environment.children, child = void 0, compiler = void 0;
        for (var i = 0, l2 = children2.length; i < l2; i++) {
          child = children2[i];
          compiler = new this.compiler();
          var existing = this.matchExistingProgram(child);
          if (existing == null) {
            this.context.programs.push("");
            var index3 = this.context.programs.length;
            child.index = index3;
            child.name = "program" + index3;
            this.context.programs[index3] = compiler.compile(child, options, this.context, !this.precompile);
            this.context.decorators[index3] = compiler.decorators;
            this.context.environments[index3] = child;
            this.useDepths = this.useDepths || compiler.useDepths;
            this.useBlockParams = this.useBlockParams || compiler.useBlockParams;
            child.useDepths = this.useDepths;
            child.useBlockParams = this.useBlockParams;
          } else {
            child.index = existing.index;
            child.name = "program" + existing.index;
            this.useDepths = this.useDepths || existing.useDepths;
            this.useBlockParams = this.useBlockParams || existing.useBlockParams;
          }
        }
      },
      matchExistingProgram: function matchExistingProgram(child) {
        for (var i = 0, len = this.context.environments.length; i < len; i++) {
          var environment = this.context.environments[i];
          if (environment && environment.equals(child)) {
            return environment;
          }
        }
      },
      programExpression: function programExpression(guid) {
        var child = this.environment.children[guid], programParams = [child.index, "data", child.blockParams];
        if (this.useBlockParams || this.useDepths) {
          programParams.push("blockParams");
        }
        if (this.useDepths) {
          programParams.push("depths");
        }
        return "container.program(" + programParams.join(", ") + ")";
      },
      useRegister: function useRegister(name) {
        if (!this.registers[name]) {
          this.registers[name] = true;
          this.registers.list.push(name);
        }
      },
      push: function push(expr) {
        if (!(expr instanceof Literal)) {
          expr = this.source.wrap(expr);
        }
        this.inlineStack.push(expr);
        return expr;
      },
      pushStackLiteral: function pushStackLiteral(item) {
        this.push(new Literal(item));
      },
      pushSource: function pushSource(source) {
        if (this.pendingContent) {
          this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent), this.pendingLocation));
          this.pendingContent = void 0;
        }
        if (source) {
          this.source.push(source);
        }
      },
      replaceStack: function replaceStack(callback) {
        var prefix = ["("], stack = void 0, createdStack = void 0, usedLiteral = void 0;
        if (!this.isInline()) {
          throw new _exception2["default"]("replaceStack on non-inline");
        }
        var top2 = this.popStack(true);
        if (top2 instanceof Literal) {
          stack = [top2.value];
          prefix = ["(", stack];
          usedLiteral = true;
        } else {
          createdStack = true;
          var _name = this.incrStack();
          prefix = ["((", this.push(_name), " = ", top2, ")"];
          stack = this.topStack();
        }
        var item = callback.call(this, stack);
        if (!usedLiteral) {
          this.popStack();
        }
        if (createdStack) {
          this.stackSlot--;
        }
        this.push(prefix.concat(item, ")"));
      },
      incrStack: function incrStack() {
        this.stackSlot++;
        if (this.stackSlot > this.stackVars.length) {
          this.stackVars.push("stack" + this.stackSlot);
        }
        return this.topStackName();
      },
      topStackName: function topStackName() {
        return "stack" + this.stackSlot;
      },
      flushInline: function flushInline() {
        var inlineStack = this.inlineStack;
        this.inlineStack = [];
        for (var i = 0, len = inlineStack.length; i < len; i++) {
          var entry = inlineStack[i];
          if (entry instanceof Literal) {
            this.compileStack.push(entry);
          } else {
            var stack = this.incrStack();
            this.pushSource([stack, " = ", entry, ";"]);
            this.compileStack.push(stack);
          }
        }
      },
      isInline: function isInline() {
        return this.inlineStack.length;
      },
      popStack: function popStack(wrapped) {
        var inline = this.isInline(), item = (inline ? this.inlineStack : this.compileStack).pop();
        if (!wrapped && item instanceof Literal) {
          return item.value;
        } else {
          if (!inline) {
            if (!this.stackSlot) {
              throw new _exception2["default"]("Invalid stack pop");
            }
            this.stackSlot--;
          }
          return item;
        }
      },
      topStack: function topStack() {
        var stack = this.isInline() ? this.inlineStack : this.compileStack, item = stack[stack.length - 1];
        if (item instanceof Literal) {
          return item.value;
        } else {
          return item;
        }
      },
      contextName: function contextName(context) {
        if (this.useDepths && context) {
          return "depths[" + context + "]";
        } else {
          return "depth" + context;
        }
      },
      quotedString: function quotedString(str) {
        return this.source.quotedString(str);
      },
      objectLiteral: function objectLiteral(obj) {
        return this.source.objectLiteral(obj);
      },
      aliasable: function aliasable(name) {
        var ret = this.aliases[name];
        if (ret) {
          ret.referenceCount++;
          return ret;
        }
        ret = this.aliases[name] = this.source.wrap(name);
        ret.aliasable = true;
        ret.referenceCount = 1;
        return ret;
      },
      setupHelper: function setupHelper(paramSize, name, blockHelper) {
        var params = [], paramsInit = this.setupHelperArgs(name, paramSize, params, blockHelper);
        var foundHelper = this.nameLookup("helpers", name, "helper"), callContext = this.aliasable(this.contextName(0) + " != null ? " + this.contextName(0) + " : (container.nullContext || {})");
        return {
          params,
          paramsInit,
          name: foundHelper,
          callParams: [callContext].concat(params)
        };
      },
      setupParams: function setupParams(helper, paramSize, params) {
        var options = {}, contexts = [], types = [], ids = [], objectArgs = !params, param = void 0;
        if (objectArgs) {
          params = [];
        }
        options.name = this.quotedString(helper);
        options.hash = this.popStack();
        if (this.trackIds) {
          options.hashIds = this.popStack();
        }
        if (this.stringParams) {
          options.hashTypes = this.popStack();
          options.hashContexts = this.popStack();
        }
        var inverse = this.popStack(), program = this.popStack();
        if (program || inverse) {
          options.fn = program || "container.noop";
          options.inverse = inverse || "container.noop";
        }
        var i = paramSize;
        while (i--) {
          param = this.popStack();
          params[i] = param;
          if (this.trackIds) {
            ids[i] = this.popStack();
          }
          if (this.stringParams) {
            types[i] = this.popStack();
            contexts[i] = this.popStack();
          }
        }
        if (objectArgs) {
          options.args = this.source.generateArray(params);
        }
        if (this.trackIds) {
          options.ids = this.source.generateArray(ids);
        }
        if (this.stringParams) {
          options.types = this.source.generateArray(types);
          options.contexts = this.source.generateArray(contexts);
        }
        if (this.options.data) {
          options.data = "data";
        }
        if (this.useBlockParams) {
          options.blockParams = "blockParams";
        }
        return options;
      },
      setupHelperArgs: function setupHelperArgs(helper, paramSize, params, useRegister) {
        var options = this.setupParams(helper, paramSize, params);
        options.loc = JSON.stringify(this.source.currentLocation);
        options = this.objectLiteral(options);
        if (useRegister) {
          this.useRegister("options");
          params.push("options");
          return ["options=", options];
        } else if (params) {
          params.push(options);
          return "";
        } else {
          return options;
        }
      }
    };
    (function() {
      var reservedWords = "break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" ");
      var compilerWords = JavaScriptCompiler.RESERVED_WORDS = {};
      for (var i = 0, l2 = reservedWords.length; i < l2; i++) {
        compilerWords[reservedWords[i]] = true;
      }
    })();
    JavaScriptCompiler.isValidJavaScriptVariableName = function(name) {
      return !JavaScriptCompiler.RESERVED_WORDS[name] && /^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name);
    };
    function strictLookup(requireTerminal, compiler, parts, type2) {
      var stack = compiler.popStack(), i = 0, len = parts.length;
      if (requireTerminal) {
        len--;
      }
      for (; i < len; i++) {
        stack = compiler.nameLookup(stack, parts[i], type2);
      }
      if (requireTerminal) {
        return [compiler.aliasable("container.strict"), "(", stack, ", ", compiler.quotedString(parts[i]), ", ", JSON.stringify(compiler.source.currentLocation), " )"];
      } else {
        return stack;
      }
    }
    exports["default"] = JavaScriptCompiler;
    module.exports = exports["default"];
  }
});

// node_modules/handlebars/dist/cjs/handlebars.js
var require_handlebars = __commonJS({
  "node_modules/handlebars/dist/cjs/handlebars.js"(exports, module) {
    "use strict";
    exports.__esModule = true;
    function _interopRequireDefault(obj) {
      return obj && obj.__esModule ? obj : { "default": obj };
    }
    var _handlebarsRuntime = require_handlebars_runtime();
    var _handlebarsRuntime2 = _interopRequireDefault(_handlebarsRuntime);
    var _handlebarsCompilerAst = require_ast();
    var _handlebarsCompilerAst2 = _interopRequireDefault(_handlebarsCompilerAst);
    var _handlebarsCompilerBase = require_base2();
    var _handlebarsCompilerCompiler = require_compiler();
    var _handlebarsCompilerJavascriptCompiler = require_javascript_compiler();
    var _handlebarsCompilerJavascriptCompiler2 = _interopRequireDefault(_handlebarsCompilerJavascriptCompiler);
    var _handlebarsCompilerVisitor = require_visitor();
    var _handlebarsCompilerVisitor2 = _interopRequireDefault(_handlebarsCompilerVisitor);
    var _handlebarsNoConflict = require_no_conflict();
    var _handlebarsNoConflict2 = _interopRequireDefault(_handlebarsNoConflict);
    var _create = _handlebarsRuntime2["default"].create;
    function create2() {
      var hb = _create();
      hb.compile = function(input, options) {
        return _handlebarsCompilerCompiler.compile(input, options, hb);
      };
      hb.precompile = function(input, options) {
        return _handlebarsCompilerCompiler.precompile(input, options, hb);
      };
      hb.AST = _handlebarsCompilerAst2["default"];
      hb.Compiler = _handlebarsCompilerCompiler.Compiler;
      hb.JavaScriptCompiler = _handlebarsCompilerJavascriptCompiler2["default"];
      hb.Parser = _handlebarsCompilerBase.parser;
      hb.parse = _handlebarsCompilerBase.parse;
      hb.parseWithoutProcessing = _handlebarsCompilerBase.parseWithoutProcessing;
      return hb;
    }
    var inst = create2();
    inst.create = create2;
    _handlebarsNoConflict2["default"](inst);
    inst.Visitor = _handlebarsCompilerVisitor2["default"];
    inst["default"] = inst;
    exports["default"] = inst;
    module.exports = exports["default"];
  }
});

// node_modules/leaflet/dist/leaflet-src.js
var require_leaflet_src = __commonJS({
  "node_modules/leaflet/dist/leaflet-src.js"(exports, module) {
    (function(global2, factory) {
      typeof exports === "object" && typeof module !== "undefined" ? factory(exports) : typeof define === "function" && define.amd ? define(["exports"], factory) : (global2 = typeof globalThis !== "undefined" ? globalThis : global2 || self, factory(global2.leaflet = {}));
    })(exports, function(exports2) {
      "use strict";
      var version3 = "1.8.0";
      function extend2(dest) {
        var i, j, len, src;
        for (j = 1, len = arguments.length; j < len; j++) {
          src = arguments[j];
          for (i in src) {
            dest[i] = src[i];
          }
        }
        return dest;
      }
      var create$2 = Object.create || function() {
        function F() {
        }
        return function(proto) {
          F.prototype = proto;
          return new F();
        };
      }();
      function bind(fn, obj) {
        var slice6 = Array.prototype.slice;
        if (fn.bind) {
          return fn.bind.apply(fn, slice6.call(arguments, 1));
        }
        var args = slice6.call(arguments, 2);
        return function() {
          return fn.apply(obj, args.length ? args.concat(slice6.call(arguments)) : arguments);
        };
      }
      var lastId = 0;
      function stamp(obj) {
        if (!("_leaflet_id" in obj)) {
          obj["_leaflet_id"] = ++lastId;
        }
        return obj._leaflet_id;
      }
      function throttle(fn, time2, context) {
        var lock, args, wrapperFn, later;
        later = function() {
          lock = false;
          if (args) {
            wrapperFn.apply(context, args);
            args = false;
          }
        };
        wrapperFn = function() {
          if (lock) {
            args = arguments;
          } else {
            fn.apply(context, arguments);
            setTimeout(later, time2);
            lock = true;
          }
        };
        return wrapperFn;
      }
      function wrapNum(x4, range3, includeMax) {
        var max5 = range3[1], min4 = range3[0], d = max5 - min4;
        return x4 === max5 && includeMax ? x4 : ((x4 - min4) % d + d) % d + min4;
      }
      function falseFn() {
        return false;
      }
      function formatNum(num, precision) {
        if (precision === false) {
          return num;
        }
        var pow4 = Math.pow(10, precision === void 0 ? 6 : precision);
        return Math.round(num * pow4) / pow4;
      }
      function trim(str) {
        return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g, "");
      }
      function splitWords(str) {
        return trim(str).split(/\s+/);
      }
      function setOptions(obj, options) {
        if (!Object.prototype.hasOwnProperty.call(obj, "options")) {
          obj.options = obj.options ? create$2(obj.options) : {};
        }
        for (var i in options) {
          obj.options[i] = options[i];
        }
        return obj.options;
      }
      function getParamString(obj, existingUrl, uppercase) {
        var params = [];
        for (var i in obj) {
          params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + "=" + encodeURIComponent(obj[i]));
        }
        return (!existingUrl || existingUrl.indexOf("?") === -1 ? "?" : "&") + params.join("&");
      }
      var templateRe = /\{ *([\w_ -]+) *\}/g;
      function template(str, data) {
        return str.replace(templateRe, function(str2, key) {
          var value = data[key];
          if (value === void 0) {
            throw new Error("No value provided for variable " + str2);
          } else if (typeof value === "function") {
            value = value(data);
          }
          return value;
        });
      }
      var isArray = Array.isArray || function(obj) {
        return Object.prototype.toString.call(obj) === "[object Array]";
      };
      function indexOf(array3, el) {
        for (var i = 0; i < array3.length; i++) {
          if (array3[i] === el) {
            return i;
          }
        }
        return -1;
      }
      var emptyImageUrl = "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";
      function getPrefixed(name) {
        return window["webkit" + name] || window["moz" + name] || window["ms" + name];
      }
      var lastTime = 0;
      function timeoutDefer(fn) {
        var time2 = +new Date(), timeToCall = Math.max(0, 16 - (time2 - lastTime));
        lastTime = time2 + timeToCall;
        return window.setTimeout(fn, timeToCall);
      }
      var requestFn = window.requestAnimationFrame || getPrefixed("RequestAnimationFrame") || timeoutDefer;
      var cancelFn = window.cancelAnimationFrame || getPrefixed("CancelAnimationFrame") || getPrefixed("CancelRequestAnimationFrame") || function(id2) {
        window.clearTimeout(id2);
      };
      function requestAnimFrame(fn, context, immediate) {
        if (immediate && requestFn === timeoutDefer) {
          fn.call(context);
        } else {
          return requestFn.call(window, bind(fn, context));
        }
      }
      function cancelAnimFrame(id2) {
        if (id2) {
          cancelFn.call(window, id2);
        }
      }
      var Util = {
        __proto__: null,
        extend: extend2,
        create: create$2,
        bind,
        get lastId() {
          return lastId;
        },
        stamp,
        throttle,
        wrapNum,
        falseFn,
        formatNum,
        trim,
        splitWords,
        setOptions,
        getParamString,
        template,
        isArray,
        indexOf,
        emptyImageUrl,
        requestFn,
        cancelFn,
        requestAnimFrame,
        cancelAnimFrame
      };
      function Class() {
      }
      Class.extend = function(props) {
        var NewClass = function() {
          setOptions(this);
          if (this.initialize) {
            this.initialize.apply(this, arguments);
          }
          this.callInitHooks();
        };
        var parentProto = NewClass.__super__ = this.prototype;
        var proto = create$2(parentProto);
        proto.constructor = NewClass;
        NewClass.prototype = proto;
        for (var i in this) {
          if (Object.prototype.hasOwnProperty.call(this, i) && i !== "prototype" && i !== "__super__") {
            NewClass[i] = this[i];
          }
        }
        if (props.statics) {
          extend2(NewClass, props.statics);
        }
        if (props.includes) {
          checkDeprecatedMixinEvents(props.includes);
          extend2.apply(null, [proto].concat(props.includes));
        }
        extend2(proto, props);
        delete proto.statics;
        delete proto.includes;
        if (proto.options) {
          proto.options = parentProto.options ? create$2(parentProto.options) : {};
          extend2(proto.options, props.options);
        }
        proto._initHooks = [];
        proto.callInitHooks = function() {
          if (this._initHooksCalled) {
            return;
          }
          if (parentProto.callInitHooks) {
            parentProto.callInitHooks.call(this);
          }
          this._initHooksCalled = true;
          for (var i2 = 0, len = proto._initHooks.length; i2 < len; i2++) {
            proto._initHooks[i2].call(this);
          }
        };
        return NewClass;
      };
      Class.include = function(props) {
        var parentOptions = this.prototype.options;
        extend2(this.prototype, props);
        if (props.options) {
          this.prototype.options = parentOptions;
          this.mergeOptions(props.options);
        }
        return this;
      };
      Class.mergeOptions = function(options) {
        extend2(this.prototype.options, options);
        return this;
      };
      Class.addInitHook = function(fn) {
        var args = Array.prototype.slice.call(arguments, 1);
        var init2 = typeof fn === "function" ? fn : function() {
          this[fn].apply(this, args);
        };
        this.prototype._initHooks = this.prototype._initHooks || [];
        this.prototype._initHooks.push(init2);
        return this;
      };
      function checkDeprecatedMixinEvents(includes) {
        if (typeof L === "undefined" || !L || !L.Mixin) {
          return;
        }
        includes = isArray(includes) ? includes : [includes];
        for (var i = 0; i < includes.length; i++) {
          if (includes[i] === L.Mixin.Events) {
            console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.", new Error().stack);
          }
        }
      }
      var Events = {
        on: function(types, fn, context) {
          if (typeof types === "object") {
            for (var type2 in types) {
              this._on(type2, types[type2], fn);
            }
          } else {
            types = splitWords(types);
            for (var i = 0, len = types.length; i < len; i++) {
              this._on(types[i], fn, context);
            }
          }
          return this;
        },
        off: function(types, fn, context) {
          if (!arguments.length) {
            delete this._events;
          } else if (typeof types === "object") {
            for (var type2 in types) {
              this._off(type2, types[type2], fn);
            }
          } else {
            types = splitWords(types);
            var removeAll2 = arguments.length === 1;
            for (var i = 0, len = types.length; i < len; i++) {
              if (removeAll2) {
                this._off(types[i]);
              } else {
                this._off(types[i], fn, context);
              }
            }
          }
          return this;
        },
        _on: function(type2, fn, context) {
          if (typeof fn !== "function") {
            console.warn("wrong listener type: " + typeof fn);
            return;
          }
          this._events = this._events || {};
          var typeListeners = this._events[type2];
          if (!typeListeners) {
            typeListeners = [];
            this._events[type2] = typeListeners;
          }
          if (context === this) {
            context = void 0;
          }
          var newListener = { fn, ctx: context }, listeners = typeListeners;
          for (var i = 0, len = listeners.length; i < len; i++) {
            if (listeners[i].fn === fn && listeners[i].ctx === context) {
              return;
            }
          }
          listeners.push(newListener);
        },
        _off: function(type2, fn, context) {
          var listeners, i, len;
          if (!this._events) {
            return;
          }
          listeners = this._events[type2];
          if (!listeners) {
            return;
          }
          if (arguments.length === 1) {
            if (this._firingCount) {
              for (i = 0, len = listeners.length; i < len; i++) {
                listeners[i].fn = falseFn;
              }
            }
            delete this._events[type2];
            return;
          }
          if (context === this) {
            context = void 0;
          }
          if (typeof fn !== "function") {
            console.warn("wrong listener type: " + typeof fn);
            return;
          }
          for (i = 0, len = listeners.length; i < len; i++) {
            var l2 = listeners[i];
            if (l2.ctx !== context) {
              continue;
            }
            if (l2.fn === fn) {
              if (this._firingCount) {
                l2.fn = falseFn;
                this._events[type2] = listeners = listeners.slice();
              }
              listeners.splice(i, 1);
              return;
            }
          }
          console.warn("listener not found");
        },
        fire: function(type2, data, propagate) {
          if (!this.listens(type2, propagate)) {
            return this;
          }
          var event = extend2({}, data, {
            type: type2,
            target: this,
            sourceTarget: data && data.sourceTarget || this
          });
          if (this._events) {
            var listeners = this._events[type2];
            if (listeners) {
              this._firingCount = this._firingCount + 1 || 1;
              for (var i = 0, len = listeners.length; i < len; i++) {
                var l2 = listeners[i];
                l2.fn.call(l2.ctx || this, event);
              }
              this._firingCount--;
            }
          }
          if (propagate) {
            this._propagateEvent(event);
          }
          return this;
        },
        listens: function(type2, propagate) {
          if (typeof type2 !== "string") {
            console.warn('"string" type argument expected');
          }
          var listeners = this._events && this._events[type2];
          if (listeners && listeners.length) {
            return true;
          }
          if (propagate) {
            for (var id2 in this._eventParents) {
              if (this._eventParents[id2].listens(type2, propagate)) {
                return true;
              }
            }
          }
          return false;
        },
        once: function(types, fn, context) {
          if (typeof types === "object") {
            for (var type2 in types) {
              this.once(type2, types[type2], fn);
            }
            return this;
          }
          var handler = bind(function() {
            this.off(types, fn, context).off(types, handler, context);
          }, this);
          return this.on(types, fn, context).on(types, handler, context);
        },
        addEventParent: function(obj) {
          this._eventParents = this._eventParents || {};
          this._eventParents[stamp(obj)] = obj;
          return this;
        },
        removeEventParent: function(obj) {
          if (this._eventParents) {
            delete this._eventParents[stamp(obj)];
          }
          return this;
        },
        _propagateEvent: function(e) {
          for (var id2 in this._eventParents) {
            this._eventParents[id2].fire(e.type, extend2({
              layer: e.target,
              propagatedFrom: e.target
            }, e), true);
          }
        }
      };
      Events.addEventListener = Events.on;
      Events.removeEventListener = Events.clearAllEventListeners = Events.off;
      Events.addOneTimeEventListener = Events.once;
      Events.fireEvent = Events.fire;
      Events.hasEventListeners = Events.listens;
      var Evented = Class.extend(Events);
      function Point(x4, y4, round) {
        this.x = round ? Math.round(x4) : x4;
        this.y = round ? Math.round(y4) : y4;
      }
      var trunc = Math.trunc || function(v) {
        return v > 0 ? Math.floor(v) : Math.ceil(v);
      };
      Point.prototype = {
        clone: function() {
          return new Point(this.x, this.y);
        },
        add: function(point6) {
          return this.clone()._add(toPoint(point6));
        },
        _add: function(point6) {
          this.x += point6.x;
          this.y += point6.y;
          return this;
        },
        subtract: function(point6) {
          return this.clone()._subtract(toPoint(point6));
        },
        _subtract: function(point6) {
          this.x -= point6.x;
          this.y -= point6.y;
          return this;
        },
        divideBy: function(num) {
          return this.clone()._divideBy(num);
        },
        _divideBy: function(num) {
          this.x /= num;
          this.y /= num;
          return this;
        },
        multiplyBy: function(num) {
          return this.clone()._multiplyBy(num);
        },
        _multiplyBy: function(num) {
          this.x *= num;
          this.y *= num;
          return this;
        },
        scaleBy: function(point6) {
          return new Point(this.x * point6.x, this.y * point6.y);
        },
        unscaleBy: function(point6) {
          return new Point(this.x / point6.x, this.y / point6.y);
        },
        round: function() {
          return this.clone()._round();
        },
        _round: function() {
          this.x = Math.round(this.x);
          this.y = Math.round(this.y);
          return this;
        },
        floor: function() {
          return this.clone()._floor();
        },
        _floor: function() {
          this.x = Math.floor(this.x);
          this.y = Math.floor(this.y);
          return this;
        },
        ceil: function() {
          return this.clone()._ceil();
        },
        _ceil: function() {
          this.x = Math.ceil(this.x);
          this.y = Math.ceil(this.y);
          return this;
        },
        trunc: function() {
          return this.clone()._trunc();
        },
        _trunc: function() {
          this.x = trunc(this.x);
          this.y = trunc(this.y);
          return this;
        },
        distanceTo: function(point6) {
          point6 = toPoint(point6);
          var x4 = point6.x - this.x, y4 = point6.y - this.y;
          return Math.sqrt(x4 * x4 + y4 * y4);
        },
        equals: function(point6) {
          point6 = toPoint(point6);
          return point6.x === this.x && point6.y === this.y;
        },
        contains: function(point6) {
          point6 = toPoint(point6);
          return Math.abs(point6.x) <= Math.abs(this.x) && Math.abs(point6.y) <= Math.abs(this.y);
        },
        toString: function() {
          return "Point(" + formatNum(this.x) + ", " + formatNum(this.y) + ")";
        }
      };
      function toPoint(x4, y4, round) {
        if (x4 instanceof Point) {
          return x4;
        }
        if (isArray(x4)) {
          return new Point(x4[0], x4[1]);
        }
        if (x4 === void 0 || x4 === null) {
          return x4;
        }
        if (typeof x4 === "object" && "x" in x4 && "y" in x4) {
          return new Point(x4.x, x4.y);
        }
        return new Point(x4, y4, round);
      }
      function Bounds(a3, b) {
        if (!a3) {
          return;
        }
        var points = b ? [a3, b] : a3;
        for (var i = 0, len = points.length; i < len; i++) {
          this.extend(points[i]);
        }
      }
      Bounds.prototype = {
        extend: function(point6) {
          point6 = toPoint(point6);
          if (!this.min && !this.max) {
            this.min = point6.clone();
            this.max = point6.clone();
          } else {
            this.min.x = Math.min(point6.x, this.min.x);
            this.max.x = Math.max(point6.x, this.max.x);
            this.min.y = Math.min(point6.y, this.min.y);
            this.max.y = Math.max(point6.y, this.max.y);
          }
          return this;
        },
        getCenter: function(round) {
          return new Point(
            (this.min.x + this.max.x) / 2,
            (this.min.y + this.max.y) / 2,
            round
          );
        },
        getBottomLeft: function() {
          return new Point(this.min.x, this.max.y);
        },
        getTopRight: function() {
          return new Point(this.max.x, this.min.y);
        },
        getTopLeft: function() {
          return this.min;
        },
        getBottomRight: function() {
          return this.max;
        },
        getSize: function() {
          return this.max.subtract(this.min);
        },
        contains: function(obj) {
          var min4, max5;
          if (typeof obj[0] === "number" || obj instanceof Point) {
            obj = toPoint(obj);
          } else {
            obj = toBounds(obj);
          }
          if (obj instanceof Bounds) {
            min4 = obj.min;
            max5 = obj.max;
          } else {
            min4 = max5 = obj;
          }
          return min4.x >= this.min.x && max5.x <= this.max.x && min4.y >= this.min.y && max5.y <= this.max.y;
        },
        intersects: function(bounds) {
          bounds = toBounds(bounds);
          var min4 = this.min, max5 = this.max, min22 = bounds.min, max22 = bounds.max, xIntersects = max22.x >= min4.x && min22.x <= max5.x, yIntersects = max22.y >= min4.y && min22.y <= max5.y;
          return xIntersects && yIntersects;
        },
        overlaps: function(bounds) {
          bounds = toBounds(bounds);
          var min4 = this.min, max5 = this.max, min22 = bounds.min, max22 = bounds.max, xOverlaps = max22.x > min4.x && min22.x < max5.x, yOverlaps = max22.y > min4.y && min22.y < max5.y;
          return xOverlaps && yOverlaps;
        },
        isValid: function() {
          return !!(this.min && this.max);
        }
      };
      function toBounds(a3, b) {
        if (!a3 || a3 instanceof Bounds) {
          return a3;
        }
        return new Bounds(a3, b);
      }
      function LatLngBounds(corner1, corner2) {
        if (!corner1) {
          return;
        }
        var latlngs = corner2 ? [corner1, corner2] : corner1;
        for (var i = 0, len = latlngs.length; i < len; i++) {
          this.extend(latlngs[i]);
        }
      }
      LatLngBounds.prototype = {
        extend: function(obj) {
          var sw = this._southWest, ne = this._northEast, sw2, ne2;
          if (obj instanceof LatLng) {
            sw2 = obj;
            ne2 = obj;
          } else if (obj instanceof LatLngBounds) {
            sw2 = obj._southWest;
            ne2 = obj._northEast;
            if (!sw2 || !ne2) {
              return this;
            }
          } else {
            return obj ? this.extend(toLatLng(obj) || toLatLngBounds(obj)) : this;
          }
          if (!sw && !ne) {
            this._southWest = new LatLng(sw2.lat, sw2.lng);
            this._northEast = new LatLng(ne2.lat, ne2.lng);
          } else {
            sw.lat = Math.min(sw2.lat, sw.lat);
            sw.lng = Math.min(sw2.lng, sw.lng);
            ne.lat = Math.max(ne2.lat, ne.lat);
            ne.lng = Math.max(ne2.lng, ne.lng);
          }
          return this;
        },
        pad: function(bufferRatio) {
          var sw = this._southWest, ne = this._northEast, heightBuffer = Math.abs(sw.lat - ne.lat) * bufferRatio, widthBuffer = Math.abs(sw.lng - ne.lng) * bufferRatio;
          return new LatLngBounds(
            new LatLng(sw.lat - heightBuffer, sw.lng - widthBuffer),
            new LatLng(ne.lat + heightBuffer, ne.lng + widthBuffer)
          );
        },
        getCenter: function() {
          return new LatLng(
            (this._southWest.lat + this._northEast.lat) / 2,
            (this._southWest.lng + this._northEast.lng) / 2
          );
        },
        getSouthWest: function() {
          return this._southWest;
        },
        getNorthEast: function() {
          return this._northEast;
        },
        getNorthWest: function() {
          return new LatLng(this.getNorth(), this.getWest());
        },
        getSouthEast: function() {
          return new LatLng(this.getSouth(), this.getEast());
        },
        getWest: function() {
          return this._southWest.lng;
        },
        getSouth: function() {
          return this._southWest.lat;
        },
        getEast: function() {
          return this._northEast.lng;
        },
        getNorth: function() {
          return this._northEast.lat;
        },
        contains: function(obj) {
          if (typeof obj[0] === "number" || obj instanceof LatLng || "lat" in obj) {
            obj = toLatLng(obj);
          } else {
            obj = toLatLngBounds(obj);
          }
          var sw = this._southWest, ne = this._northEast, sw2, ne2;
          if (obj instanceof LatLngBounds) {
            sw2 = obj.getSouthWest();
            ne2 = obj.getNorthEast();
          } else {
            sw2 = ne2 = obj;
          }
          return sw2.lat >= sw.lat && ne2.lat <= ne.lat && sw2.lng >= sw.lng && ne2.lng <= ne.lng;
        },
        intersects: function(bounds) {
          bounds = toLatLngBounds(bounds);
          var sw = this._southWest, ne = this._northEast, sw2 = bounds.getSouthWest(), ne2 = bounds.getNorthEast(), latIntersects = ne2.lat >= sw.lat && sw2.lat <= ne.lat, lngIntersects = ne2.lng >= sw.lng && sw2.lng <= ne.lng;
          return latIntersects && lngIntersects;
        },
        overlaps: function(bounds) {
          bounds = toLatLngBounds(bounds);
          var sw = this._southWest, ne = this._northEast, sw2 = bounds.getSouthWest(), ne2 = bounds.getNorthEast(), latOverlaps = ne2.lat > sw.lat && sw2.lat < ne.lat, lngOverlaps = ne2.lng > sw.lng && sw2.lng < ne.lng;
          return latOverlaps && lngOverlaps;
        },
        toBBoxString: function() {
          return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(",");
        },
        equals: function(bounds, maxMargin) {
          if (!bounds) {
            return false;
          }
          bounds = toLatLngBounds(bounds);
          return this._southWest.equals(bounds.getSouthWest(), maxMargin) && this._northEast.equals(bounds.getNorthEast(), maxMargin);
        },
        isValid: function() {
          return !!(this._southWest && this._northEast);
        }
      };
      function toLatLngBounds(a3, b) {
        if (a3 instanceof LatLngBounds) {
          return a3;
        }
        return new LatLngBounds(a3, b);
      }
      function LatLng(lat, lng, alt) {
        if (isNaN(lat) || isNaN(lng)) {
          throw new Error("Invalid LatLng object: (" + lat + ", " + lng + ")");
        }
        this.lat = +lat;
        this.lng = +lng;
        if (alt !== void 0) {
          this.alt = +alt;
        }
      }
      LatLng.prototype = {
        equals: function(obj, maxMargin) {
          if (!obj) {
            return false;
          }
          obj = toLatLng(obj);
          var margin = Math.max(
            Math.abs(this.lat - obj.lat),
            Math.abs(this.lng - obj.lng)
          );
          return margin <= (maxMargin === void 0 ? 1e-9 : maxMargin);
        },
        toString: function(precision) {
          return "LatLng(" + formatNum(this.lat, precision) + ", " + formatNum(this.lng, precision) + ")";
        },
        distanceTo: function(other) {
          return Earth.distance(this, toLatLng(other));
        },
        wrap: function() {
          return Earth.wrapLatLng(this);
        },
        toBounds: function(sizeInMeters) {
          var latAccuracy = 180 * sizeInMeters / 40075017, lngAccuracy = latAccuracy / Math.cos(Math.PI / 180 * this.lat);
          return toLatLngBounds(
            [this.lat - latAccuracy, this.lng - lngAccuracy],
            [this.lat + latAccuracy, this.lng + lngAccuracy]
          );
        },
        clone: function() {
          return new LatLng(this.lat, this.lng, this.alt);
        }
      };
      function toLatLng(a3, b, c5) {
        if (a3 instanceof LatLng) {
          return a3;
        }
        if (isArray(a3) && typeof a3[0] !== "object") {
          if (a3.length === 3) {
            return new LatLng(a3[0], a3[1], a3[2]);
          }
          if (a3.length === 2) {
            return new LatLng(a3[0], a3[1]);
          }
          return null;
        }
        if (a3 === void 0 || a3 === null) {
          return a3;
        }
        if (typeof a3 === "object" && "lat" in a3) {
          return new LatLng(a3.lat, "lng" in a3 ? a3.lng : a3.lon, a3.alt);
        }
        if (b === void 0) {
          return null;
        }
        return new LatLng(a3, b, c5);
      }
      var CRS = {
        latLngToPoint: function(latlng, zoom2) {
          var projectedPoint = this.projection.project(latlng), scale2 = this.scale(zoom2);
          return this.transformation._transform(projectedPoint, scale2);
        },
        pointToLatLng: function(point6, zoom2) {
          var scale2 = this.scale(zoom2), untransformedPoint = this.transformation.untransform(point6, scale2);
          return this.projection.unproject(untransformedPoint);
        },
        project: function(latlng) {
          return this.projection.project(latlng);
        },
        unproject: function(point6) {
          return this.projection.unproject(point6);
        },
        scale: function(zoom2) {
          return 256 * Math.pow(2, zoom2);
        },
        zoom: function(scale2) {
          return Math.log(scale2 / 256) / Math.LN2;
        },
        getProjectedBounds: function(zoom2) {
          if (this.infinite) {
            return null;
          }
          var b = this.projection.bounds, s3 = this.scale(zoom2), min4 = this.transformation.transform(b.min, s3), max5 = this.transformation.transform(b.max, s3);
          return new Bounds(min4, max5);
        },
        infinite: false,
        wrapLatLng: function(latlng) {
          var lng = this.wrapLng ? wrapNum(latlng.lng, this.wrapLng, true) : latlng.lng, lat = this.wrapLat ? wrapNum(latlng.lat, this.wrapLat, true) : latlng.lat, alt = latlng.alt;
          return new LatLng(lat, lng, alt);
        },
        wrapLatLngBounds: function(bounds) {
          var center2 = bounds.getCenter(), newCenter = this.wrapLatLng(center2), latShift = center2.lat - newCenter.lat, lngShift = center2.lng - newCenter.lng;
          if (latShift === 0 && lngShift === 0) {
            return bounds;
          }
          var sw = bounds.getSouthWest(), ne = bounds.getNorthEast(), newSw = new LatLng(sw.lat - latShift, sw.lng - lngShift), newNe = new LatLng(ne.lat - latShift, ne.lng - lngShift);
          return new LatLngBounds(newSw, newNe);
        }
      };
      var Earth = extend2({}, CRS, {
        wrapLng: [-180, 180],
        R: 6371e3,
        distance: function(latlng1, latlng2) {
          var rad = Math.PI / 180, lat1 = latlng1.lat * rad, lat2 = latlng2.lat * rad, sinDLat = Math.sin((latlng2.lat - latlng1.lat) * rad / 2), sinDLon = Math.sin((latlng2.lng - latlng1.lng) * rad / 2), a3 = sinDLat * sinDLat + Math.cos(lat1) * Math.cos(lat2) * sinDLon * sinDLon, c5 = 2 * Math.atan2(Math.sqrt(a3), Math.sqrt(1 - a3));
          return this.R * c5;
        }
      });
      var earthRadius = 6378137;
      var SphericalMercator = {
        R: earthRadius,
        MAX_LATITUDE: 85.0511287798,
        project: function(latlng) {
          var d = Math.PI / 180, max5 = this.MAX_LATITUDE, lat = Math.max(Math.min(max5, latlng.lat), -max5), sin4 = Math.sin(lat * d);
          return new Point(
            this.R * latlng.lng * d,
            this.R * Math.log((1 + sin4) / (1 - sin4)) / 2
          );
        },
        unproject: function(point6) {
          var d = 180 / Math.PI;
          return new LatLng(
            (2 * Math.atan(Math.exp(point6.y / this.R)) - Math.PI / 2) * d,
            point6.x * d / this.R
          );
        },
        bounds: function() {
          var d = earthRadius * Math.PI;
          return new Bounds([-d, -d], [d, d]);
        }()
      };
      function Transformation(a3, b, c5, d) {
        if (isArray(a3)) {
          this._a = a3[0];
          this._b = a3[1];
          this._c = a3[2];
          this._d = a3[3];
          return;
        }
        this._a = a3;
        this._b = b;
        this._c = c5;
        this._d = d;
      }
      Transformation.prototype = {
        transform: function(point6, scale2) {
          return this._transform(point6.clone(), scale2);
        },
        _transform: function(point6, scale2) {
          scale2 = scale2 || 1;
          point6.x = scale2 * (this._a * point6.x + this._b);
          point6.y = scale2 * (this._c * point6.y + this._d);
          return point6;
        },
        untransform: function(point6, scale2) {
          scale2 = scale2 || 1;
          return new Point(
            (point6.x / scale2 - this._b) / this._a,
            (point6.y / scale2 - this._d) / this._c
          );
        }
      };
      function toTransformation(a3, b, c5, d) {
        return new Transformation(a3, b, c5, d);
      }
      var EPSG3857 = extend2({}, Earth, {
        code: "EPSG:3857",
        projection: SphericalMercator,
        transformation: function() {
          var scale2 = 0.5 / (Math.PI * SphericalMercator.R);
          return toTransformation(scale2, 0.5, -scale2, 0.5);
        }()
      });
      var EPSG900913 = extend2({}, EPSG3857, {
        code: "EPSG:900913"
      });
      function svgCreate(name) {
        return document.createElementNS("http://www.w3.org/2000/svg", name);
      }
      function pointsToPath(rings, closed) {
        var str = "", i, j, len, len2, points, p;
        for (i = 0, len = rings.length; i < len; i++) {
          points = rings[i];
          for (j = 0, len2 = points.length; j < len2; j++) {
            p = points[j];
            str += (j ? "L" : "M") + p.x + " " + p.y;
          }
          str += closed ? Browser.svg ? "z" : "x" : "";
        }
        return str || "M0 0";
      }
      var style = document.documentElement.style;
      var ie = "ActiveXObject" in window;
      var ielt9 = ie && !document.addEventListener;
      var edge = "msLaunchUri" in navigator && !("documentMode" in document);
      var webkit = userAgentContains("webkit");
      var android = userAgentContains("android");
      var android23 = userAgentContains("android 2") || userAgentContains("android 3");
      var webkitVer = parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1], 10);
      var androidStock = android && userAgentContains("Google") && webkitVer < 537 && !("AudioNode" in window);
      var opera = !!window.opera;
      var chrome = !edge && userAgentContains("chrome");
      var gecko = userAgentContains("gecko") && !webkit && !opera && !ie;
      var safari = !chrome && userAgentContains("safari");
      var phantom = userAgentContains("phantom");
      var opera12 = "OTransition" in style;
      var win = navigator.platform.indexOf("Win") === 0;
      var ie3d = ie && "transition" in style;
      var webkit3d = "WebKitCSSMatrix" in window && "m11" in new window.WebKitCSSMatrix() && !android23;
      var gecko3d = "MozPerspective" in style;
      var any3d = !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d) && !opera12 && !phantom;
      var mobile = typeof orientation !== "undefined" || userAgentContains("mobile");
      var mobileWebkit = mobile && webkit;
      var mobileWebkit3d = mobile && webkit3d;
      var msPointer = !window.PointerEvent && window.MSPointerEvent;
      var pointer = !!(window.PointerEvent || msPointer);
      var touchNative = "ontouchstart" in window || !!window.TouchEvent;
      var touch = !window.L_NO_TOUCH && (touchNative || pointer);
      var mobileOpera = mobile && opera;
      var mobileGecko = mobile && gecko;
      var retina = (window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI) > 1;
      var passiveEvents = function() {
        var supportsPassiveOption = false;
        try {
          var opts = Object.defineProperty({}, "passive", {
            get: function() {
              supportsPassiveOption = true;
            }
          });
          window.addEventListener("testPassiveEventSupport", falseFn, opts);
          window.removeEventListener("testPassiveEventSupport", falseFn, opts);
        } catch (e) {
        }
        return supportsPassiveOption;
      }();
      var canvas$1 = function() {
        return !!document.createElement("canvas").getContext;
      }();
      var svg$1 = !!(document.createElementNS && svgCreate("svg").createSVGRect);
      var inlineSvg = !!svg$1 && function() {
        var div = document.createElement("div");
        div.innerHTML = "<svg/>";
        return (div.firstChild && div.firstChild.namespaceURI) === "http://www.w3.org/2000/svg";
      }();
      var vml = !svg$1 && function() {
        try {
          var div = document.createElement("div");
          div.innerHTML = '<v:shape adj="1"/>';
          var shape = div.firstChild;
          shape.style.behavior = "url(#default#VML)";
          return shape && typeof shape.adj === "object";
        } catch (e) {
          return false;
        }
      }();
      function userAgentContains(str) {
        return navigator.userAgent.toLowerCase().indexOf(str) >= 0;
      }
      var Browser = {
        ie,
        ielt9,
        edge,
        webkit,
        android,
        android23,
        androidStock,
        opera,
        chrome,
        gecko,
        safari,
        phantom,
        opera12,
        win,
        ie3d,
        webkit3d,
        gecko3d,
        any3d,
        mobile,
        mobileWebkit,
        mobileWebkit3d,
        msPointer,
        pointer,
        touch,
        touchNative,
        mobileOpera,
        mobileGecko,
        retina,
        passiveEvents,
        canvas: canvas$1,
        svg: svg$1,
        vml,
        inlineSvg
      };
      var POINTER_DOWN = Browser.msPointer ? "MSPointerDown" : "pointerdown";
      var POINTER_MOVE = Browser.msPointer ? "MSPointerMove" : "pointermove";
      var POINTER_UP = Browser.msPointer ? "MSPointerUp" : "pointerup";
      var POINTER_CANCEL = Browser.msPointer ? "MSPointerCancel" : "pointercancel";
      var pEvent = {
        touchstart: POINTER_DOWN,
        touchmove: POINTER_MOVE,
        touchend: POINTER_UP,
        touchcancel: POINTER_CANCEL
      };
      var handle = {
        touchstart: _onPointerStart,
        touchmove: _handlePointer,
        touchend: _handlePointer,
        touchcancel: _handlePointer
      };
      var _pointers = {};
      var _pointerDocListener = false;
      function addPointerListener(obj, type2, handler) {
        if (type2 === "touchstart") {
          _addPointerDocListener();
        }
        if (!handle[type2]) {
          console.warn("wrong event specified:", type2);
          return L.Util.falseFn;
        }
        handler = handle[type2].bind(this, handler);
        obj.addEventListener(pEvent[type2], handler, false);
        return handler;
      }
      function removePointerListener(obj, type2, handler) {
        if (!pEvent[type2]) {
          console.warn("wrong event specified:", type2);
          return;
        }
        obj.removeEventListener(pEvent[type2], handler, false);
      }
      function _globalPointerDown(e) {
        _pointers[e.pointerId] = e;
      }
      function _globalPointerMove(e) {
        if (_pointers[e.pointerId]) {
          _pointers[e.pointerId] = e;
        }
      }
      function _globalPointerUp(e) {
        delete _pointers[e.pointerId];
      }
      function _addPointerDocListener() {
        if (!_pointerDocListener) {
          document.addEventListener(POINTER_DOWN, _globalPointerDown, true);
          document.addEventListener(POINTER_MOVE, _globalPointerMove, true);
          document.addEventListener(POINTER_UP, _globalPointerUp, true);
          document.addEventListener(POINTER_CANCEL, _globalPointerUp, true);
          _pointerDocListener = true;
        }
      }
      function _handlePointer(handler, e) {
        if (e.pointerType === (e.MSPOINTER_TYPE_MOUSE || "mouse")) {
          return;
        }
        e.touches = [];
        for (var i in _pointers) {
          e.touches.push(_pointers[i]);
        }
        e.changedTouches = [e];
        handler(e);
      }
      function _onPointerStart(handler, e) {
        if (e.MSPOINTER_TYPE_TOUCH && e.pointerType === e.MSPOINTER_TYPE_TOUCH) {
          preventDefault(e);
        }
        _handlePointer(handler, e);
      }
      function makeDblclick(event) {
        var newEvent = {}, prop, i;
        for (i in event) {
          prop = event[i];
          newEvent[i] = prop && prop.bind ? prop.bind(event) : prop;
        }
        event = newEvent;
        newEvent.type = "dblclick";
        newEvent.detail = 2;
        newEvent.isTrusted = false;
        newEvent._simulated = true;
        return newEvent;
      }
      var delay = 200;
      function addDoubleTapListener(obj, handler) {
        obj.addEventListener("dblclick", handler);
        var last = 0, detail;
        function simDblclick(e) {
          if (e.detail !== 1) {
            detail = e.detail;
            return;
          }
          if (e.pointerType === "mouse" || e.sourceCapabilities && !e.sourceCapabilities.firesTouchEvents) {
            return;
          }
          var now3 = Date.now();
          if (now3 - last <= delay) {
            detail++;
            if (detail === 2) {
              handler(makeDblclick(e));
            }
          } else {
            detail = 1;
          }
          last = now3;
        }
        obj.addEventListener("click", simDblclick);
        return {
          dblclick: handler,
          simDblclick
        };
      }
      function removeDoubleTapListener(obj, handlers) {
        obj.removeEventListener("dblclick", handlers.dblclick);
        obj.removeEventListener("click", handlers.simDblclick);
      }
      var TRANSFORM = testProp(
        ["transform", "webkitTransform", "OTransform", "MozTransform", "msTransform"]
      );
      var TRANSITION = testProp(
        ["webkitTransition", "transition", "OTransition", "MozTransition", "msTransition"]
      );
      var TRANSITION_END = TRANSITION === "webkitTransition" || TRANSITION === "OTransition" ? TRANSITION + "End" : "transitionend";
      function get3(id2) {
        return typeof id2 === "string" ? document.getElementById(id2) : id2;
      }
      function getStyle(el, style2) {
        var value = el.style[style2] || el.currentStyle && el.currentStyle[style2];
        if ((!value || value === "auto") && document.defaultView) {
          var css = document.defaultView.getComputedStyle(el, null);
          value = css ? css[style2] : null;
        }
        return value === "auto" ? null : value;
      }
      function create$1(tagName, className, container) {
        var el = document.createElement(tagName);
        el.className = className || "";
        if (container) {
          container.appendChild(el);
        }
        return el;
      }
      function remove2(el) {
        var parent = el.parentNode;
        if (parent) {
          parent.removeChild(el);
        }
      }
      function empty4(el) {
        while (el.firstChild) {
          el.removeChild(el.firstChild);
        }
      }
      function toFront(el) {
        var parent = el.parentNode;
        if (parent && parent.lastChild !== el) {
          parent.appendChild(el);
        }
      }
      function toBack(el) {
        var parent = el.parentNode;
        if (parent && parent.firstChild !== el) {
          parent.insertBefore(el, parent.firstChild);
        }
      }
      function hasClass(el, name) {
        if (el.classList !== void 0) {
          return el.classList.contains(name);
        }
        var className = getClass(el);
        return className.length > 0 && new RegExp("(^|\\s)" + name + "(\\s|$)").test(className);
      }
      function addClass(el, name) {
        if (el.classList !== void 0) {
          var classes = splitWords(name);
          for (var i = 0, len = classes.length; i < len; i++) {
            el.classList.add(classes[i]);
          }
        } else if (!hasClass(el, name)) {
          var className = getClass(el);
          setClass(el, (className ? className + " " : "") + name);
        }
      }
      function removeClass(el, name) {
        if (el.classList !== void 0) {
          el.classList.remove(name);
        } else {
          setClass(el, trim((" " + getClass(el) + " ").replace(" " + name + " ", " ")));
        }
      }
      function setClass(el, name) {
        if (el.className.baseVal === void 0) {
          el.className = name;
        } else {
          el.className.baseVal = name;
        }
      }
      function getClass(el) {
        if (el.correspondingElement) {
          el = el.correspondingElement;
        }
        return el.className.baseVal === void 0 ? el.className : el.className.baseVal;
      }
      function setOpacity(el, value) {
        if ("opacity" in el.style) {
          el.style.opacity = value;
        } else if ("filter" in el.style) {
          _setOpacityIE(el, value);
        }
      }
      function _setOpacityIE(el, value) {
        var filter3 = false, filterName = "DXImageTransform.Microsoft.Alpha";
        try {
          filter3 = el.filters.item(filterName);
        } catch (e) {
          if (value === 1) {
            return;
          }
        }
        value = Math.round(value * 100);
        if (filter3) {
          filter3.Enabled = value !== 100;
          filter3.Opacity = value;
        } else {
          el.style.filter += " progid:" + filterName + "(opacity=" + value + ")";
        }
      }
      function testProp(props) {
        var style2 = document.documentElement.style;
        for (var i = 0; i < props.length; i++) {
          if (props[i] in style2) {
            return props[i];
          }
        }
        return false;
      }
      function setTransform(el, offset2, scale2) {
        var pos = offset2 || new Point(0, 0);
        el.style[TRANSFORM] = (Browser.ie3d ? "translate(" + pos.x + "px," + pos.y + "px)" : "translate3d(" + pos.x + "px," + pos.y + "px,0)") + (scale2 ? " scale(" + scale2 + ")" : "");
      }
      function setPosition(el, point6) {
        el._leaflet_pos = point6;
        if (Browser.any3d) {
          setTransform(el, point6);
        } else {
          el.style.left = point6.x + "px";
          el.style.top = point6.y + "px";
        }
      }
      function getPosition(el) {
        return el._leaflet_pos || new Point(0, 0);
      }
      var disableTextSelection;
      var enableTextSelection;
      var _userSelect;
      if ("onselectstart" in document) {
        disableTextSelection = function() {
          on(window, "selectstart", preventDefault);
        };
        enableTextSelection = function() {
          off(window, "selectstart", preventDefault);
        };
      } else {
        var userSelectProperty = testProp(
          ["userSelect", "WebkitUserSelect", "OUserSelect", "MozUserSelect", "msUserSelect"]
        );
        disableTextSelection = function() {
          if (userSelectProperty) {
            var style2 = document.documentElement.style;
            _userSelect = style2[userSelectProperty];
            style2[userSelectProperty] = "none";
          }
        };
        enableTextSelection = function() {
          if (userSelectProperty) {
            document.documentElement.style[userSelectProperty] = _userSelect;
            _userSelect = void 0;
          }
        };
      }
      function disableImageDrag() {
        on(window, "dragstart", preventDefault);
      }
      function enableImageDrag() {
        off(window, "dragstart", preventDefault);
      }
      var _outlineElement, _outlineStyle;
      function preventOutline(element) {
        while (element.tabIndex === -1) {
          element = element.parentNode;
        }
        if (!element.style) {
          return;
        }
        restoreOutline();
        _outlineElement = element;
        _outlineStyle = element.style.outline;
        element.style.outline = "none";
        on(window, "keydown", restoreOutline);
      }
      function restoreOutline() {
        if (!_outlineElement) {
          return;
        }
        _outlineElement.style.outline = _outlineStyle;
        _outlineElement = void 0;
        _outlineStyle = void 0;
        off(window, "keydown", restoreOutline);
      }
      function getSizedParentNode(element) {
        do {
          element = element.parentNode;
        } while ((!element.offsetWidth || !element.offsetHeight) && element !== document.body);
        return element;
      }
      function getScale(element) {
        var rect = element.getBoundingClientRect();
        return {
          x: rect.width / element.offsetWidth || 1,
          y: rect.height / element.offsetHeight || 1,
          boundingClientRect: rect
        };
      }
      var DomUtil = {
        __proto__: null,
        TRANSFORM,
        TRANSITION,
        TRANSITION_END,
        get: get3,
        getStyle,
        create: create$1,
        remove: remove2,
        empty: empty4,
        toFront,
        toBack,
        hasClass,
        addClass,
        removeClass,
        setClass,
        getClass,
        setOpacity,
        testProp,
        setTransform,
        setPosition,
        getPosition,
        get disableTextSelection() {
          return disableTextSelection;
        },
        get enableTextSelection() {
          return enableTextSelection;
        },
        disableImageDrag,
        enableImageDrag,
        preventOutline,
        restoreOutline,
        getSizedParentNode,
        getScale
      };
      function on(obj, types, fn, context) {
        if (types && typeof types === "object") {
          for (var type2 in types) {
            addOne(obj, type2, types[type2], fn);
          }
        } else {
          types = splitWords(types);
          for (var i = 0, len = types.length; i < len; i++) {
            addOne(obj, types[i], fn, context);
          }
        }
        return this;
      }
      var eventsKey = "_leaflet_events";
      function off(obj, types, fn, context) {
        if (arguments.length === 1) {
          batchRemove(obj);
          delete obj[eventsKey];
        } else if (types && typeof types === "object") {
          for (var type2 in types) {
            removeOne(obj, type2, types[type2], fn);
          }
        } else {
          types = splitWords(types);
          if (arguments.length === 2) {
            batchRemove(obj, function(type3) {
              return indexOf(types, type3) !== -1;
            });
          } else {
            for (var i = 0, len = types.length; i < len; i++) {
              removeOne(obj, types[i], fn, context);
            }
          }
        }
        return this;
      }
      function batchRemove(obj, filterFn) {
        for (var id2 in obj[eventsKey]) {
          var type2 = id2.split(/\d/)[0];
          if (!filterFn || filterFn(type2)) {
            removeOne(obj, type2, null, null, id2);
          }
        }
      }
      var mouseSubst = {
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        wheel: !("onwheel" in window) && "mousewheel"
      };
      function addOne(obj, type2, fn, context) {
        var id2 = type2 + stamp(fn) + (context ? "_" + stamp(context) : "");
        if (obj[eventsKey] && obj[eventsKey][id2]) {
          return this;
        }
        var handler = function(e) {
          return fn.call(context || obj, e || window.event);
        };
        var originalHandler = handler;
        if (!Browser.touchNative && Browser.pointer && type2.indexOf("touch") === 0) {
          handler = addPointerListener(obj, type2, handler);
        } else if (Browser.touch && type2 === "dblclick") {
          handler = addDoubleTapListener(obj, handler);
        } else if ("addEventListener" in obj) {
          if (type2 === "touchstart" || type2 === "touchmove" || type2 === "wheel" || type2 === "mousewheel") {
            obj.addEventListener(mouseSubst[type2] || type2, handler, Browser.passiveEvents ? { passive: false } : false);
          } else if (type2 === "mouseenter" || type2 === "mouseleave") {
            handler = function(e) {
              e = e || window.event;
              if (isExternalTarget(obj, e)) {
                originalHandler(e);
              }
            };
            obj.addEventListener(mouseSubst[type2], handler, false);
          } else {
            obj.addEventListener(type2, originalHandler, false);
          }
        } else {
          obj.attachEvent("on" + type2, handler);
        }
        obj[eventsKey] = obj[eventsKey] || {};
        obj[eventsKey][id2] = handler;
      }
      function removeOne(obj, type2, fn, context, id2) {
        id2 = id2 || type2 + stamp(fn) + (context ? "_" + stamp(context) : "");
        var handler = obj[eventsKey] && obj[eventsKey][id2];
        if (!handler) {
          return this;
        }
        if (!Browser.touchNative && Browser.pointer && type2.indexOf("touch") === 0) {
          removePointerListener(obj, type2, handler);
        } else if (Browser.touch && type2 === "dblclick") {
          removeDoubleTapListener(obj, handler);
        } else if ("removeEventListener" in obj) {
          obj.removeEventListener(mouseSubst[type2] || type2, handler, false);
        } else {
          obj.detachEvent("on" + type2, handler);
        }
        obj[eventsKey][id2] = null;
      }
      function stopPropagation(e) {
        if (e.stopPropagation) {
          e.stopPropagation();
        } else if (e.originalEvent) {
          e.originalEvent._stopped = true;
        } else {
          e.cancelBubble = true;
        }
        return this;
      }
      function disableScrollPropagation(el) {
        addOne(el, "wheel", stopPropagation);
        return this;
      }
      function disableClickPropagation(el) {
        on(el, "mousedown touchstart dblclick contextmenu", stopPropagation);
        el["_leaflet_disable_click"] = true;
        return this;
      }
      function preventDefault(e) {
        if (e.preventDefault) {
          e.preventDefault();
        } else {
          e.returnValue = false;
        }
        return this;
      }
      function stop(e) {
        preventDefault(e);
        stopPropagation(e);
        return this;
      }
      function getMousePosition(e, container) {
        if (!container) {
          return new Point(e.clientX, e.clientY);
        }
        var scale2 = getScale(container), offset2 = scale2.boundingClientRect;
        return new Point(
          (e.clientX - offset2.left) / scale2.x - container.clientLeft,
          (e.clientY - offset2.top) / scale2.y - container.clientTop
        );
      }
      var wheelPxFactor = Browser.win && Browser.chrome ? 2 * window.devicePixelRatio : Browser.gecko ? window.devicePixelRatio : 1;
      function getWheelDelta(e) {
        return Browser.edge ? e.wheelDeltaY / 2 : e.deltaY && e.deltaMode === 0 ? -e.deltaY / wheelPxFactor : e.deltaY && e.deltaMode === 1 ? -e.deltaY * 20 : e.deltaY && e.deltaMode === 2 ? -e.deltaY * 60 : e.deltaX || e.deltaZ ? 0 : e.wheelDelta ? (e.wheelDeltaY || e.wheelDelta) / 2 : e.detail && Math.abs(e.detail) < 32765 ? -e.detail * 20 : e.detail ? e.detail / -32765 * 60 : 0;
      }
      function isExternalTarget(el, e) {
        var related = e.relatedTarget;
        if (!related) {
          return true;
        }
        try {
          while (related && related !== el) {
            related = related.parentNode;
          }
        } catch (err) {
          return false;
        }
        return related !== el;
      }
      var DomEvent = {
        __proto__: null,
        on,
        off,
        stopPropagation,
        disableScrollPropagation,
        disableClickPropagation,
        preventDefault,
        stop,
        getMousePosition,
        getWheelDelta,
        isExternalTarget,
        addListener: on,
        removeListener: off
      };
      var PosAnimation = Evented.extend({
        run: function(el, newPos, duration, easeLinearity) {
          this.stop();
          this._el = el;
          this._inProgress = true;
          this._duration = duration || 0.25;
          this._easeOutPower = 1 / Math.max(easeLinearity || 0.5, 0.2);
          this._startPos = getPosition(el);
          this._offset = newPos.subtract(this._startPos);
          this._startTime = +new Date();
          this.fire("start");
          this._animate();
        },
        stop: function() {
          if (!this._inProgress) {
            return;
          }
          this._step(true);
          this._complete();
        },
        _animate: function() {
          this._animId = requestAnimFrame(this._animate, this);
          this._step();
        },
        _step: function(round) {
          var elapsed = +new Date() - this._startTime, duration = this._duration * 1e3;
          if (elapsed < duration) {
            this._runFrame(this._easeOut(elapsed / duration), round);
          } else {
            this._runFrame(1);
            this._complete();
          }
        },
        _runFrame: function(progress, round) {
          var pos = this._startPos.add(this._offset.multiplyBy(progress));
          if (round) {
            pos._round();
          }
          setPosition(this._el, pos);
          this.fire("step");
        },
        _complete: function() {
          cancelAnimFrame(this._animId);
          this._inProgress = false;
          this.fire("end");
        },
        _easeOut: function(t) {
          return 1 - Math.pow(1 - t, this._easeOutPower);
        }
      });
      var Map2 = Evented.extend({
        options: {
          crs: EPSG3857,
          center: void 0,
          zoom: void 0,
          minZoom: void 0,
          maxZoom: void 0,
          layers: [],
          maxBounds: void 0,
          renderer: void 0,
          zoomAnimation: true,
          zoomAnimationThreshold: 4,
          fadeAnimation: true,
          markerZoomAnimation: true,
          transform3DLimit: 8388608,
          zoomSnap: 1,
          zoomDelta: 1,
          trackResize: true
        },
        initialize: function(id2, options) {
          options = setOptions(this, options);
          this._handlers = [];
          this._layers = {};
          this._zoomBoundLayers = {};
          this._sizeChanged = true;
          this._initContainer(id2);
          this._initLayout();
          this._onResize = bind(this._onResize, this);
          this._initEvents();
          if (options.maxBounds) {
            this.setMaxBounds(options.maxBounds);
          }
          if (options.zoom !== void 0) {
            this._zoom = this._limitZoom(options.zoom);
          }
          if (options.center && options.zoom !== void 0) {
            this.setView(toLatLng(options.center), options.zoom, { reset: true });
          }
          this.callInitHooks();
          this._zoomAnimated = TRANSITION && Browser.any3d && !Browser.mobileOpera && this.options.zoomAnimation;
          if (this._zoomAnimated) {
            this._createAnimProxy();
            on(this._proxy, TRANSITION_END, this._catchTransitionEnd, this);
          }
          this._addLayers(this.options.layers);
        },
        setView: function(center2, zoom2, options) {
          zoom2 = zoom2 === void 0 ? this._zoom : this._limitZoom(zoom2);
          center2 = this._limitCenter(toLatLng(center2), zoom2, this.options.maxBounds);
          options = options || {};
          this._stop();
          if (this._loaded && !options.reset && options !== true) {
            if (options.animate !== void 0) {
              options.zoom = extend2({ animate: options.animate }, options.zoom);
              options.pan = extend2({ animate: options.animate, duration: options.duration }, options.pan);
            }
            var moved = this._zoom !== zoom2 ? this._tryAnimatedZoom && this._tryAnimatedZoom(center2, zoom2, options.zoom) : this._tryAnimatedPan(center2, options.pan);
            if (moved) {
              clearTimeout(this._sizeTimer);
              return this;
            }
          }
          this._resetView(center2, zoom2);
          return this;
        },
        setZoom: function(zoom2, options) {
          if (!this._loaded) {
            this._zoom = zoom2;
            return this;
          }
          return this.setView(this.getCenter(), zoom2, { zoom: options });
        },
        zoomIn: function(delta, options) {
          delta = delta || (Browser.any3d ? this.options.zoomDelta : 1);
          return this.setZoom(this._zoom + delta, options);
        },
        zoomOut: function(delta, options) {
          delta = delta || (Browser.any3d ? this.options.zoomDelta : 1);
          return this.setZoom(this._zoom - delta, options);
        },
        setZoomAround: function(latlng, zoom2, options) {
          var scale2 = this.getZoomScale(zoom2), viewHalf = this.getSize().divideBy(2), containerPoint = latlng instanceof Point ? latlng : this.latLngToContainerPoint(latlng), centerOffset = containerPoint.subtract(viewHalf).multiplyBy(1 - 1 / scale2), newCenter = this.containerPointToLatLng(viewHalf.add(centerOffset));
          return this.setView(newCenter, zoom2, { zoom: options });
        },
        _getBoundsCenterZoom: function(bounds, options) {
          options = options || {};
          bounds = bounds.getBounds ? bounds.getBounds() : toLatLngBounds(bounds);
          var paddingTL = toPoint(options.paddingTopLeft || options.padding || [0, 0]), paddingBR = toPoint(options.paddingBottomRight || options.padding || [0, 0]), zoom2 = this.getBoundsZoom(bounds, false, paddingTL.add(paddingBR));
          zoom2 = typeof options.maxZoom === "number" ? Math.min(options.maxZoom, zoom2) : zoom2;
          if (zoom2 === Infinity) {
            return {
              center: bounds.getCenter(),
              zoom: zoom2
            };
          }
          var paddingOffset = paddingBR.subtract(paddingTL).divideBy(2), swPoint = this.project(bounds.getSouthWest(), zoom2), nePoint = this.project(bounds.getNorthEast(), zoom2), center2 = this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset), zoom2);
          return {
            center: center2,
            zoom: zoom2
          };
        },
        fitBounds: function(bounds, options) {
          bounds = toLatLngBounds(bounds);
          if (!bounds.isValid()) {
            throw new Error("Bounds are not valid.");
          }
          var target = this._getBoundsCenterZoom(bounds, options);
          return this.setView(target.center, target.zoom, options);
        },
        fitWorld: function(options) {
          return this.fitBounds([[-90, -180], [90, 180]], options);
        },
        panTo: function(center2, options) {
          return this.setView(center2, this._zoom, { pan: options });
        },
        panBy: function(offset2, options) {
          offset2 = toPoint(offset2).round();
          options = options || {};
          if (!offset2.x && !offset2.y) {
            return this.fire("moveend");
          }
          if (options.animate !== true && !this.getSize().contains(offset2)) {
            this._resetView(this.unproject(this.project(this.getCenter()).add(offset2)), this.getZoom());
            return this;
          }
          if (!this._panAnim) {
            this._panAnim = new PosAnimation();
            this._panAnim.on({
              "step": this._onPanTransitionStep,
              "end": this._onPanTransitionEnd
            }, this);
          }
          if (!options.noMoveStart) {
            this.fire("movestart");
          }
          if (options.animate !== false) {
            addClass(this._mapPane, "leaflet-pan-anim");
            var newPos = this._getMapPanePos().subtract(offset2).round();
            this._panAnim.run(this._mapPane, newPos, options.duration || 0.25, options.easeLinearity);
          } else {
            this._rawPanBy(offset2);
            this.fire("move").fire("moveend");
          }
          return this;
        },
        flyTo: function(targetCenter, targetZoom, options) {
          options = options || {};
          if (options.animate === false || !Browser.any3d) {
            return this.setView(targetCenter, targetZoom, options);
          }
          this._stop();
          var from = this.project(this.getCenter()), to = this.project(targetCenter), size = this.getSize(), startZoom = this._zoom;
          targetCenter = toLatLng(targetCenter);
          targetZoom = targetZoom === void 0 ? startZoom : targetZoom;
          var w0 = Math.max(size.x, size.y), w1 = w0 * this.getZoomScale(startZoom, targetZoom), u1 = to.distanceTo(from) || 1, rho = 1.42, rho2 = rho * rho;
          function r(i) {
            var s1 = i ? -1 : 1, s22 = i ? w1 : w0, t13 = w1 * w1 - w0 * w0 + s1 * rho2 * rho2 * u1 * u1, b12 = 2 * s22 * rho2 * u1, b = t13 / b12, sq = Math.sqrt(b * b + 1) - b;
            var log4 = sq < 1e-9 ? -18 : Math.log(sq);
            return log4;
          }
          function sinh2(n2) {
            return (Math.exp(n2) - Math.exp(-n2)) / 2;
          }
          function cosh2(n2) {
            return (Math.exp(n2) + Math.exp(-n2)) / 2;
          }
          function tanh2(n2) {
            return sinh2(n2) / cosh2(n2);
          }
          var r0 = r(0);
          function w(s3) {
            return w0 * (cosh2(r0) / cosh2(r0 + rho * s3));
          }
          function u(s3) {
            return w0 * (cosh2(r0) * tanh2(r0 + rho * s3) - sinh2(r0)) / rho2;
          }
          function easeOut(t) {
            return 1 - Math.pow(1 - t, 1.5);
          }
          var start2 = Date.now(), S = (r(1) - r0) / rho, duration = options.duration ? 1e3 * options.duration : 1e3 * S * 0.8;
          function frame2() {
            var t = (Date.now() - start2) / duration, s3 = easeOut(t) * S;
            if (t <= 1) {
              this._flyToFrame = requestAnimFrame(frame2, this);
              this._move(
                this.unproject(from.add(to.subtract(from).multiplyBy(u(s3) / u1)), startZoom),
                this.getScaleZoom(w0 / w(s3), startZoom),
                { flyTo: true }
              );
            } else {
              this._move(targetCenter, targetZoom)._moveEnd(true);
            }
          }
          this._moveStart(true, options.noMoveStart);
          frame2.call(this);
          return this;
        },
        flyToBounds: function(bounds, options) {
          var target = this._getBoundsCenterZoom(bounds, options);
          return this.flyTo(target.center, target.zoom, options);
        },
        setMaxBounds: function(bounds) {
          bounds = toLatLngBounds(bounds);
          if (!bounds.isValid()) {
            this.options.maxBounds = null;
            return this.off("moveend", this._panInsideMaxBounds);
          } else if (this.options.maxBounds) {
            this.off("moveend", this._panInsideMaxBounds);
          }
          this.options.maxBounds = bounds;
          if (this._loaded) {
            this._panInsideMaxBounds();
          }
          return this.on("moveend", this._panInsideMaxBounds);
        },
        setMinZoom: function(zoom2) {
          var oldZoom = this.options.minZoom;
          this.options.minZoom = zoom2;
          if (this._loaded && oldZoom !== zoom2) {
            this.fire("zoomlevelschange");
            if (this.getZoom() < this.options.minZoom) {
              return this.setZoom(zoom2);
            }
          }
          return this;
        },
        setMaxZoom: function(zoom2) {
          var oldZoom = this.options.maxZoom;
          this.options.maxZoom = zoom2;
          if (this._loaded && oldZoom !== zoom2) {
            this.fire("zoomlevelschange");
            if (this.getZoom() > this.options.maxZoom) {
              return this.setZoom(zoom2);
            }
          }
          return this;
        },
        panInsideBounds: function(bounds, options) {
          this._enforcingBounds = true;
          var center2 = this.getCenter(), newCenter = this._limitCenter(center2, this._zoom, toLatLngBounds(bounds));
          if (!center2.equals(newCenter)) {
            this.panTo(newCenter, options);
          }
          this._enforcingBounds = false;
          return this;
        },
        panInside: function(latlng, options) {
          options = options || {};
          var paddingTL = toPoint(options.paddingTopLeft || options.padding || [0, 0]), paddingBR = toPoint(options.paddingBottomRight || options.padding || [0, 0]), pixelCenter = this.project(this.getCenter()), pixelPoint = this.project(latlng), pixelBounds = this.getPixelBounds(), paddedBounds = toBounds([pixelBounds.min.add(paddingTL), pixelBounds.max.subtract(paddingBR)]), paddedSize = paddedBounds.getSize();
          if (!paddedBounds.contains(pixelPoint)) {
            this._enforcingBounds = true;
            var centerOffset = pixelPoint.subtract(paddedBounds.getCenter());
            var offset2 = paddedBounds.extend(pixelPoint).getSize().subtract(paddedSize);
            pixelCenter.x += centerOffset.x < 0 ? -offset2.x : offset2.x;
            pixelCenter.y += centerOffset.y < 0 ? -offset2.y : offset2.y;
            this.panTo(this.unproject(pixelCenter), options);
            this._enforcingBounds = false;
          }
          return this;
        },
        invalidateSize: function(options) {
          if (!this._loaded) {
            return this;
          }
          options = extend2({
            animate: false,
            pan: true
          }, options === true ? { animate: true } : options);
          var oldSize = this.getSize();
          this._sizeChanged = true;
          this._lastCenter = null;
          var newSize = this.getSize(), oldCenter = oldSize.divideBy(2).round(), newCenter = newSize.divideBy(2).round(), offset2 = oldCenter.subtract(newCenter);
          if (!offset2.x && !offset2.y) {
            return this;
          }
          if (options.animate && options.pan) {
            this.panBy(offset2);
          } else {
            if (options.pan) {
              this._rawPanBy(offset2);
            }
            this.fire("move");
            if (options.debounceMoveend) {
              clearTimeout(this._sizeTimer);
              this._sizeTimer = setTimeout(bind(this.fire, this, "moveend"), 200);
            } else {
              this.fire("moveend");
            }
          }
          return this.fire("resize", {
            oldSize,
            newSize
          });
        },
        stop: function() {
          this.setZoom(this._limitZoom(this._zoom));
          if (!this.options.zoomSnap) {
            this.fire("viewreset");
          }
          return this._stop();
        },
        locate: function(options) {
          options = this._locateOptions = extend2({
            timeout: 1e4,
            watch: false
          }, options);
          if (!("geolocation" in navigator)) {
            this._handleGeolocationError({
              code: 0,
              message: "Geolocation not supported."
            });
            return this;
          }
          var onResponse = bind(this._handleGeolocationResponse, this), onError = bind(this._handleGeolocationError, this);
          if (options.watch) {
            this._locationWatchId = navigator.geolocation.watchPosition(onResponse, onError, options);
          } else {
            navigator.geolocation.getCurrentPosition(onResponse, onError, options);
          }
          return this;
        },
        stopLocate: function() {
          if (navigator.geolocation && navigator.geolocation.clearWatch) {
            navigator.geolocation.clearWatch(this._locationWatchId);
          }
          if (this._locateOptions) {
            this._locateOptions.setView = false;
          }
          return this;
        },
        _handleGeolocationError: function(error) {
          if (!this._container._leaflet_id) {
            return;
          }
          var c5 = error.code, message = error.message || (c5 === 1 ? "permission denied" : c5 === 2 ? "position unavailable" : "timeout");
          if (this._locateOptions.setView && !this._loaded) {
            this.fitWorld();
          }
          this.fire("locationerror", {
            code: c5,
            message: "Geolocation error: " + message + "."
          });
        },
        _handleGeolocationResponse: function(pos) {
          if (!this._container._leaflet_id) {
            return;
          }
          var lat = pos.coords.latitude, lng = pos.coords.longitude, latlng = new LatLng(lat, lng), bounds = latlng.toBounds(pos.coords.accuracy * 2), options = this._locateOptions;
          if (options.setView) {
            var zoom2 = this.getBoundsZoom(bounds);
            this.setView(latlng, options.maxZoom ? Math.min(zoom2, options.maxZoom) : zoom2);
          }
          var data = {
            latlng,
            bounds,
            timestamp: pos.timestamp
          };
          for (var i in pos.coords) {
            if (typeof pos.coords[i] === "number") {
              data[i] = pos.coords[i];
            }
          }
          this.fire("locationfound", data);
        },
        addHandler: function(name, HandlerClass) {
          if (!HandlerClass) {
            return this;
          }
          var handler = this[name] = new HandlerClass(this);
          this._handlers.push(handler);
          if (this.options[name]) {
            handler.enable();
          }
          return this;
        },
        remove: function() {
          this._initEvents(true);
          if (this.options.maxBounds) {
            this.off("moveend", this._panInsideMaxBounds);
          }
          if (this._containerId !== this._container._leaflet_id) {
            throw new Error("Map container is being reused by another instance");
          }
          try {
            delete this._container._leaflet_id;
            delete this._containerId;
          } catch (e) {
            this._container._leaflet_id = void 0;
            this._containerId = void 0;
          }
          if (this._locationWatchId !== void 0) {
            this.stopLocate();
          }
          this._stop();
          remove2(this._mapPane);
          if (this._clearControlPos) {
            this._clearControlPos();
          }
          if (this._resizeRequest) {
            cancelAnimFrame(this._resizeRequest);
            this._resizeRequest = null;
          }
          this._clearHandlers();
          if (this._loaded) {
            this.fire("unload");
          }
          var i;
          for (i in this._layers) {
            this._layers[i].remove();
          }
          for (i in this._panes) {
            remove2(this._panes[i]);
          }
          this._layers = [];
          this._panes = [];
          delete this._mapPane;
          delete this._renderer;
          return this;
        },
        createPane: function(name, container) {
          var className = "leaflet-pane" + (name ? " leaflet-" + name.replace("Pane", "") + "-pane" : ""), pane = create$1("div", className, container || this._mapPane);
          if (name) {
            this._panes[name] = pane;
          }
          return pane;
        },
        getCenter: function() {
          this._checkIfLoaded();
          if (this._lastCenter && !this._moved()) {
            return this._lastCenter;
          }
          return this.layerPointToLatLng(this._getCenterLayerPoint());
        },
        getZoom: function() {
          return this._zoom;
        },
        getBounds: function() {
          var bounds = this.getPixelBounds(), sw = this.unproject(bounds.getBottomLeft()), ne = this.unproject(bounds.getTopRight());
          return new LatLngBounds(sw, ne);
        },
        getMinZoom: function() {
          return this.options.minZoom === void 0 ? this._layersMinZoom || 0 : this.options.minZoom;
        },
        getMaxZoom: function() {
          return this.options.maxZoom === void 0 ? this._layersMaxZoom === void 0 ? Infinity : this._layersMaxZoom : this.options.maxZoom;
        },
        getBoundsZoom: function(bounds, inside, padding) {
          bounds = toLatLngBounds(bounds);
          padding = toPoint(padding || [0, 0]);
          var zoom2 = this.getZoom() || 0, min4 = this.getMinZoom(), max5 = this.getMaxZoom(), nw = bounds.getNorthWest(), se = bounds.getSouthEast(), size = this.getSize().subtract(padding), boundsSize = toBounds(this.project(se, zoom2), this.project(nw, zoom2)).getSize(), snap = Browser.any3d ? this.options.zoomSnap : 1, scalex = size.x / boundsSize.x, scaley = size.y / boundsSize.y, scale2 = inside ? Math.max(scalex, scaley) : Math.min(scalex, scaley);
          zoom2 = this.getScaleZoom(scale2, zoom2);
          if (snap) {
            zoom2 = Math.round(zoom2 / (snap / 100)) * (snap / 100);
            zoom2 = inside ? Math.ceil(zoom2 / snap) * snap : Math.floor(zoom2 / snap) * snap;
          }
          return Math.max(min4, Math.min(max5, zoom2));
        },
        getSize: function() {
          if (!this._size || this._sizeChanged) {
            this._size = new Point(
              this._container.clientWidth || 0,
              this._container.clientHeight || 0
            );
            this._sizeChanged = false;
          }
          return this._size.clone();
        },
        getPixelBounds: function(center2, zoom2) {
          var topLeftPoint = this._getTopLeftPoint(center2, zoom2);
          return new Bounds(topLeftPoint, topLeftPoint.add(this.getSize()));
        },
        getPixelOrigin: function() {
          this._checkIfLoaded();
          return this._pixelOrigin;
        },
        getPixelWorldBounds: function(zoom2) {
          return this.options.crs.getProjectedBounds(zoom2 === void 0 ? this.getZoom() : zoom2);
        },
        getPane: function(pane) {
          return typeof pane === "string" ? this._panes[pane] : pane;
        },
        getPanes: function() {
          return this._panes;
        },
        getContainer: function() {
          return this._container;
        },
        getZoomScale: function(toZoom, fromZoom) {
          var crs = this.options.crs;
          fromZoom = fromZoom === void 0 ? this._zoom : fromZoom;
          return crs.scale(toZoom) / crs.scale(fromZoom);
        },
        getScaleZoom: function(scale2, fromZoom) {
          var crs = this.options.crs;
          fromZoom = fromZoom === void 0 ? this._zoom : fromZoom;
          var zoom2 = crs.zoom(scale2 * crs.scale(fromZoom));
          return isNaN(zoom2) ? Infinity : zoom2;
        },
        project: function(latlng, zoom2) {
          zoom2 = zoom2 === void 0 ? this._zoom : zoom2;
          return this.options.crs.latLngToPoint(toLatLng(latlng), zoom2);
        },
        unproject: function(point6, zoom2) {
          zoom2 = zoom2 === void 0 ? this._zoom : zoom2;
          return this.options.crs.pointToLatLng(toPoint(point6), zoom2);
        },
        layerPointToLatLng: function(point6) {
          var projectedPoint = toPoint(point6).add(this.getPixelOrigin());
          return this.unproject(projectedPoint);
        },
        latLngToLayerPoint: function(latlng) {
          var projectedPoint = this.project(toLatLng(latlng))._round();
          return projectedPoint._subtract(this.getPixelOrigin());
        },
        wrapLatLng: function(latlng) {
          return this.options.crs.wrapLatLng(toLatLng(latlng));
        },
        wrapLatLngBounds: function(latlng) {
          return this.options.crs.wrapLatLngBounds(toLatLngBounds(latlng));
        },
        distance: function(latlng1, latlng2) {
          return this.options.crs.distance(toLatLng(latlng1), toLatLng(latlng2));
        },
        containerPointToLayerPoint: function(point6) {
          return toPoint(point6).subtract(this._getMapPanePos());
        },
        layerPointToContainerPoint: function(point6) {
          return toPoint(point6).add(this._getMapPanePos());
        },
        containerPointToLatLng: function(point6) {
          var layerPoint = this.containerPointToLayerPoint(toPoint(point6));
          return this.layerPointToLatLng(layerPoint);
        },
        latLngToContainerPoint: function(latlng) {
          return this.layerPointToContainerPoint(this.latLngToLayerPoint(toLatLng(latlng)));
        },
        mouseEventToContainerPoint: function(e) {
          return getMousePosition(e, this._container);
        },
        mouseEventToLayerPoint: function(e) {
          return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e));
        },
        mouseEventToLatLng: function(e) {
          return this.layerPointToLatLng(this.mouseEventToLayerPoint(e));
        },
        _initContainer: function(id2) {
          var container = this._container = get3(id2);
          if (!container) {
            throw new Error("Map container not found.");
          } else if (container._leaflet_id) {
            throw new Error("Map container is already initialized.");
          }
          on(container, "scroll", this._onScroll, this);
          this._containerId = stamp(container);
        },
        _initLayout: function() {
          var container = this._container;
          this._fadeAnimated = this.options.fadeAnimation && Browser.any3d;
          addClass(container, "leaflet-container" + (Browser.touch ? " leaflet-touch" : "") + (Browser.retina ? " leaflet-retina" : "") + (Browser.ielt9 ? " leaflet-oldie" : "") + (Browser.safari ? " leaflet-safari" : "") + (this._fadeAnimated ? " leaflet-fade-anim" : ""));
          var position = getStyle(container, "position");
          if (position !== "absolute" && position !== "relative" && position !== "fixed") {
            container.style.position = "relative";
          }
          this._initPanes();
          if (this._initControlPos) {
            this._initControlPos();
          }
        },
        _initPanes: function() {
          var panes = this._panes = {};
          this._paneRenderers = {};
          this._mapPane = this.createPane("mapPane", this._container);
          setPosition(this._mapPane, new Point(0, 0));
          this.createPane("tilePane");
          this.createPane("overlayPane");
          this.createPane("shadowPane");
          this.createPane("markerPane");
          this.createPane("tooltipPane");
          this.createPane("popupPane");
          if (!this.options.markerZoomAnimation) {
            addClass(panes.markerPane, "leaflet-zoom-hide");
            addClass(panes.shadowPane, "leaflet-zoom-hide");
          }
        },
        _resetView: function(center2, zoom2) {
          setPosition(this._mapPane, new Point(0, 0));
          var loading = !this._loaded;
          this._loaded = true;
          zoom2 = this._limitZoom(zoom2);
          this.fire("viewprereset");
          var zoomChanged = this._zoom !== zoom2;
          this._moveStart(zoomChanged, false)._move(center2, zoom2)._moveEnd(zoomChanged);
          this.fire("viewreset");
          if (loading) {
            this.fire("load");
          }
        },
        _moveStart: function(zoomChanged, noMoveStart) {
          if (zoomChanged) {
            this.fire("zoomstart");
          }
          if (!noMoveStart) {
            this.fire("movestart");
          }
          return this;
        },
        _move: function(center2, zoom2, data, supressEvent) {
          if (zoom2 === void 0) {
            zoom2 = this._zoom;
          }
          var zoomChanged = this._zoom !== zoom2;
          this._zoom = zoom2;
          this._lastCenter = center2;
          this._pixelOrigin = this._getNewPixelOrigin(center2);
          if (!supressEvent) {
            if (zoomChanged || data && data.pinch) {
              this.fire("zoom", data);
            }
            this.fire("move", data);
          } else if (data && data.pinch) {
            this.fire("zoom", data);
          }
          return this;
        },
        _moveEnd: function(zoomChanged) {
          if (zoomChanged) {
            this.fire("zoomend");
          }
          return this.fire("moveend");
        },
        _stop: function() {
          cancelAnimFrame(this._flyToFrame);
          if (this._panAnim) {
            this._panAnim.stop();
          }
          return this;
        },
        _rawPanBy: function(offset2) {
          setPosition(this._mapPane, this._getMapPanePos().subtract(offset2));
        },
        _getZoomSpan: function() {
          return this.getMaxZoom() - this.getMinZoom();
        },
        _panInsideMaxBounds: function() {
          if (!this._enforcingBounds) {
            this.panInsideBounds(this.options.maxBounds);
          }
        },
        _checkIfLoaded: function() {
          if (!this._loaded) {
            throw new Error("Set map center and zoom first.");
          }
        },
        _initEvents: function(remove3) {
          this._targets = {};
          this._targets[stamp(this._container)] = this;
          var onOff = remove3 ? off : on;
          onOff(this._container, "click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup", this._handleDOMEvent, this);
          if (this.options.trackResize) {
            onOff(window, "resize", this._onResize, this);
          }
          if (Browser.any3d && this.options.transform3DLimit) {
            (remove3 ? this.off : this.on).call(this, "moveend", this._onMoveEnd);
          }
        },
        _onResize: function() {
          cancelAnimFrame(this._resizeRequest);
          this._resizeRequest = requestAnimFrame(
            function() {
              this.invalidateSize({ debounceMoveend: true });
            },
            this
          );
        },
        _onScroll: function() {
          this._container.scrollTop = 0;
          this._container.scrollLeft = 0;
        },
        _onMoveEnd: function() {
          var pos = this._getMapPanePos();
          if (Math.max(Math.abs(pos.x), Math.abs(pos.y)) >= this.options.transform3DLimit) {
            this._resetView(this.getCenter(), this.getZoom());
          }
        },
        _findEventTargets: function(e, type2) {
          var targets = [], target, isHover = type2 === "mouseout" || type2 === "mouseover", src = e.target || e.srcElement, dragging = false;
          while (src) {
            target = this._targets[stamp(src)];
            if (target && (type2 === "click" || type2 === "preclick") && this._draggableMoved(target)) {
              dragging = true;
              break;
            }
            if (target && target.listens(type2, true)) {
              if (isHover && !isExternalTarget(src, e)) {
                break;
              }
              targets.push(target);
              if (isHover) {
                break;
              }
            }
            if (src === this._container) {
              break;
            }
            src = src.parentNode;
          }
          if (!targets.length && !dragging && !isHover && this.listens(type2, true)) {
            targets = [this];
          }
          return targets;
        },
        _isClickDisabled: function(el) {
          while (el !== this._container) {
            if (el["_leaflet_disable_click"]) {
              return true;
            }
            el = el.parentNode;
          }
        },
        _handleDOMEvent: function(e) {
          var el = e.target || e.srcElement;
          if (!this._loaded || el["_leaflet_disable_events"] || e.type === "click" && this._isClickDisabled(el)) {
            return;
          }
          var type2 = e.type;
          if (type2 === "mousedown") {
            preventOutline(el);
          }
          this._fireDOMEvent(e, type2);
        },
        _mouseEvents: ["click", "dblclick", "mouseover", "mouseout", "contextmenu"],
        _fireDOMEvent: function(e, type2, canvasTargets) {
          if (e.type === "click") {
            var synth = extend2({}, e);
            synth.type = "preclick";
            this._fireDOMEvent(synth, synth.type, canvasTargets);
          }
          var targets = this._findEventTargets(e, type2);
          if (canvasTargets) {
            var filtered = [];
            for (var i = 0; i < canvasTargets.length; i++) {
              if (canvasTargets[i].listens(type2, true)) {
                filtered.push(canvasTargets[i]);
              }
            }
            targets = filtered.concat(targets);
          }
          if (!targets.length) {
            return;
          }
          if (type2 === "contextmenu") {
            preventDefault(e);
          }
          var target = targets[0];
          var data = {
            originalEvent: e
          };
          if (e.type !== "keypress" && e.type !== "keydown" && e.type !== "keyup") {
            var isMarker = target.getLatLng && (!target._radius || target._radius <= 10);
            data.containerPoint = isMarker ? this.latLngToContainerPoint(target.getLatLng()) : this.mouseEventToContainerPoint(e);
            data.layerPoint = this.containerPointToLayerPoint(data.containerPoint);
            data.latlng = isMarker ? target.getLatLng() : this.layerPointToLatLng(data.layerPoint);
          }
          for (i = 0; i < targets.length; i++) {
            targets[i].fire(type2, data, true);
            if (data.originalEvent._stopped || targets[i].options.bubblingMouseEvents === false && indexOf(this._mouseEvents, type2) !== -1) {
              return;
            }
          }
        },
        _draggableMoved: function(obj) {
          obj = obj.dragging && obj.dragging.enabled() ? obj : this;
          return obj.dragging && obj.dragging.moved() || this.boxZoom && this.boxZoom.moved();
        },
        _clearHandlers: function() {
          for (var i = 0, len = this._handlers.length; i < len; i++) {
            this._handlers[i].disable();
          }
        },
        whenReady: function(callback, context) {
          if (this._loaded) {
            callback.call(context || this, { target: this });
          } else {
            this.on("load", callback, context);
          }
          return this;
        },
        _getMapPanePos: function() {
          return getPosition(this._mapPane) || new Point(0, 0);
        },
        _moved: function() {
          var pos = this._getMapPanePos();
          return pos && !pos.equals([0, 0]);
        },
        _getTopLeftPoint: function(center2, zoom2) {
          var pixelOrigin = center2 && zoom2 !== void 0 ? this._getNewPixelOrigin(center2, zoom2) : this.getPixelOrigin();
          return pixelOrigin.subtract(this._getMapPanePos());
        },
        _getNewPixelOrigin: function(center2, zoom2) {
          var viewHalf = this.getSize()._divideBy(2);
          return this.project(center2, zoom2)._subtract(viewHalf)._add(this._getMapPanePos())._round();
        },
        _latLngToNewLayerPoint: function(latlng, zoom2, center2) {
          var topLeft = this._getNewPixelOrigin(center2, zoom2);
          return this.project(latlng, zoom2)._subtract(topLeft);
        },
        _latLngBoundsToNewLayerBounds: function(latLngBounds, zoom2, center2) {
          var topLeft = this._getNewPixelOrigin(center2, zoom2);
          return toBounds([
            this.project(latLngBounds.getSouthWest(), zoom2)._subtract(topLeft),
            this.project(latLngBounds.getNorthWest(), zoom2)._subtract(topLeft),
            this.project(latLngBounds.getSouthEast(), zoom2)._subtract(topLeft),
            this.project(latLngBounds.getNorthEast(), zoom2)._subtract(topLeft)
          ]);
        },
        _getCenterLayerPoint: function() {
          return this.containerPointToLayerPoint(this.getSize()._divideBy(2));
        },
        _getCenterOffset: function(latlng) {
          return this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint());
        },
        _limitCenter: function(center2, zoom2, bounds) {
          if (!bounds) {
            return center2;
          }
          var centerPoint = this.project(center2, zoom2), viewHalf = this.getSize().divideBy(2), viewBounds = new Bounds(centerPoint.subtract(viewHalf), centerPoint.add(viewHalf)), offset2 = this._getBoundsOffset(viewBounds, bounds, zoom2);
          if (offset2.round().equals([0, 0])) {
            return center2;
          }
          return this.unproject(centerPoint.add(offset2), zoom2);
        },
        _limitOffset: function(offset2, bounds) {
          if (!bounds) {
            return offset2;
          }
          var viewBounds = this.getPixelBounds(), newBounds = new Bounds(viewBounds.min.add(offset2), viewBounds.max.add(offset2));
          return offset2.add(this._getBoundsOffset(newBounds, bounds));
        },
        _getBoundsOffset: function(pxBounds, maxBounds, zoom2) {
          var projectedMaxBounds = toBounds(
            this.project(maxBounds.getNorthEast(), zoom2),
            this.project(maxBounds.getSouthWest(), zoom2)
          ), minOffset = projectedMaxBounds.min.subtract(pxBounds.min), maxOffset = projectedMaxBounds.max.subtract(pxBounds.max), dx = this._rebound(minOffset.x, -maxOffset.x), dy = this._rebound(minOffset.y, -maxOffset.y);
          return new Point(dx, dy);
        },
        _rebound: function(left2, right2) {
          return left2 + right2 > 0 ? Math.round(left2 - right2) / 2 : Math.max(0, Math.ceil(left2)) - Math.max(0, Math.floor(right2));
        },
        _limitZoom: function(zoom2) {
          var min4 = this.getMinZoom(), max5 = this.getMaxZoom(), snap = Browser.any3d ? this.options.zoomSnap : 1;
          if (snap) {
            zoom2 = Math.round(zoom2 / snap) * snap;
          }
          return Math.max(min4, Math.min(max5, zoom2));
        },
        _onPanTransitionStep: function() {
          this.fire("move");
        },
        _onPanTransitionEnd: function() {
          removeClass(this._mapPane, "leaflet-pan-anim");
          this.fire("moveend");
        },
        _tryAnimatedPan: function(center2, options) {
          var offset2 = this._getCenterOffset(center2)._trunc();
          if ((options && options.animate) !== true && !this.getSize().contains(offset2)) {
            return false;
          }
          this.panBy(offset2, options);
          return true;
        },
        _createAnimProxy: function() {
          var proxy = this._proxy = create$1("div", "leaflet-proxy leaflet-zoom-animated");
          this._panes.mapPane.appendChild(proxy);
          this.on("zoomanim", function(e) {
            var prop = TRANSFORM, transform2 = this._proxy.style[prop];
            setTransform(this._proxy, this.project(e.center, e.zoom), this.getZoomScale(e.zoom, 1));
            if (transform2 === this._proxy.style[prop] && this._animatingZoom) {
              this._onZoomTransitionEnd();
            }
          }, this);
          this.on("load moveend", this._animMoveEnd, this);
          this._on("unload", this._destroyAnimProxy, this);
        },
        _destroyAnimProxy: function() {
          remove2(this._proxy);
          this.off("load moveend", this._animMoveEnd, this);
          delete this._proxy;
        },
        _animMoveEnd: function() {
          var c5 = this.getCenter(), z = this.getZoom();
          setTransform(this._proxy, this.project(c5, z), this.getZoomScale(z, 1));
        },
        _catchTransitionEnd: function(e) {
          if (this._animatingZoom && e.propertyName.indexOf("transform") >= 0) {
            this._onZoomTransitionEnd();
          }
        },
        _nothingToAnimate: function() {
          return !this._container.getElementsByClassName("leaflet-zoom-animated").length;
        },
        _tryAnimatedZoom: function(center2, zoom2, options) {
          if (this._animatingZoom) {
            return true;
          }
          options = options || {};
          if (!this._zoomAnimated || options.animate === false || this._nothingToAnimate() || Math.abs(zoom2 - this._zoom) > this.options.zoomAnimationThreshold) {
            return false;
          }
          var scale2 = this.getZoomScale(zoom2), offset2 = this._getCenterOffset(center2)._divideBy(1 - 1 / scale2);
          if (options.animate !== true && !this.getSize().contains(offset2)) {
            return false;
          }
          requestAnimFrame(function() {
            this._moveStart(true, false)._animateZoom(center2, zoom2, true);
          }, this);
          return true;
        },
        _animateZoom: function(center2, zoom2, startAnim, noUpdate) {
          if (!this._mapPane) {
            return;
          }
          if (startAnim) {
            this._animatingZoom = true;
            this._animateToCenter = center2;
            this._animateToZoom = zoom2;
            addClass(this._mapPane, "leaflet-zoom-anim");
          }
          this.fire("zoomanim", {
            center: center2,
            zoom: zoom2,
            noUpdate
          });
          if (!this._tempFireZoomEvent) {
            this._tempFireZoomEvent = this._zoom !== this._animateToZoom;
          }
          this._move(this._animateToCenter, this._animateToZoom, void 0, true);
          setTimeout(bind(this._onZoomTransitionEnd, this), 250);
        },
        _onZoomTransitionEnd: function() {
          if (!this._animatingZoom) {
            return;
          }
          if (this._mapPane) {
            removeClass(this._mapPane, "leaflet-zoom-anim");
          }
          this._animatingZoom = false;
          this._move(this._animateToCenter, this._animateToZoom, void 0, true);
          if (this._tempFireZoomEvent) {
            this.fire("zoom");
          }
          delete this._tempFireZoomEvent;
          this.fire("move");
          this._moveEnd(true);
        }
      });
      function createMap(id2, options) {
        return new Map2(id2, options);
      }
      var Control = Class.extend({
        options: {
          position: "topright"
        },
        initialize: function(options) {
          setOptions(this, options);
        },
        getPosition: function() {
          return this.options.position;
        },
        setPosition: function(position) {
          var map5 = this._map;
          if (map5) {
            map5.removeControl(this);
          }
          this.options.position = position;
          if (map5) {
            map5.addControl(this);
          }
          return this;
        },
        getContainer: function() {
          return this._container;
        },
        addTo: function(map5) {
          this.remove();
          this._map = map5;
          var container = this._container = this.onAdd(map5), pos = this.getPosition(), corner = map5._controlCorners[pos];
          addClass(container, "leaflet-control");
          if (pos.indexOf("bottom") !== -1) {
            corner.insertBefore(container, corner.firstChild);
          } else {
            corner.appendChild(container);
          }
          this._map.on("unload", this.remove, this);
          return this;
        },
        remove: function() {
          if (!this._map) {
            return this;
          }
          remove2(this._container);
          if (this.onRemove) {
            this.onRemove(this._map);
          }
          this._map.off("unload", this.remove, this);
          this._map = null;
          return this;
        },
        _refocusOnMap: function(e) {
          if (this._map && e && e.screenX > 0 && e.screenY > 0) {
            this._map.getContainer().focus();
          }
        }
      });
      var control = function(options) {
        return new Control(options);
      };
      Map2.include({
        addControl: function(control2) {
          control2.addTo(this);
          return this;
        },
        removeControl: function(control2) {
          control2.remove();
          return this;
        },
        _initControlPos: function() {
          var corners = this._controlCorners = {}, l2 = "leaflet-", container = this._controlContainer = create$1("div", l2 + "control-container", this._container);
          function createCorner(vSide, hSide) {
            var className = l2 + vSide + " " + l2 + hSide;
            corners[vSide + hSide] = create$1("div", className, container);
          }
          createCorner("top", "left");
          createCorner("top", "right");
          createCorner("bottom", "left");
          createCorner("bottom", "right");
        },
        _clearControlPos: function() {
          for (var i in this._controlCorners) {
            remove2(this._controlCorners[i]);
          }
          remove2(this._controlContainer);
          delete this._controlCorners;
          delete this._controlContainer;
        }
      });
      var Layers = Control.extend({
        options: {
          collapsed: true,
          position: "topright",
          autoZIndex: true,
          hideSingleBase: false,
          sortLayers: false,
          sortFunction: function(layerA, layerB, nameA, nameB) {
            return nameA < nameB ? -1 : nameB < nameA ? 1 : 0;
          }
        },
        initialize: function(baseLayers, overlays, options) {
          setOptions(this, options);
          this._layerControlInputs = [];
          this._layers = [];
          this._lastZIndex = 0;
          this._handlingClick = false;
          for (var i in baseLayers) {
            this._addLayer(baseLayers[i], i);
          }
          for (i in overlays) {
            this._addLayer(overlays[i], i, true);
          }
        },
        onAdd: function(map5) {
          this._initLayout();
          this._update();
          this._map = map5;
          map5.on("zoomend", this._checkDisabledLayers, this);
          for (var i = 0; i < this._layers.length; i++) {
            this._layers[i].layer.on("add remove", this._onLayerChange, this);
          }
          return this._container;
        },
        addTo: function(map5) {
          Control.prototype.addTo.call(this, map5);
          return this._expandIfNotCollapsed();
        },
        onRemove: function() {
          this._map.off("zoomend", this._checkDisabledLayers, this);
          for (var i = 0; i < this._layers.length; i++) {
            this._layers[i].layer.off("add remove", this._onLayerChange, this);
          }
        },
        addBaseLayer: function(layer, name) {
          this._addLayer(layer, name);
          return this._map ? this._update() : this;
        },
        addOverlay: function(layer, name) {
          this._addLayer(layer, name, true);
          return this._map ? this._update() : this;
        },
        removeLayer: function(layer) {
          layer.off("add remove", this._onLayerChange, this);
          var obj = this._getLayer(stamp(layer));
          if (obj) {
            this._layers.splice(this._layers.indexOf(obj), 1);
          }
          return this._map ? this._update() : this;
        },
        expand: function() {
          addClass(this._container, "leaflet-control-layers-expanded");
          this._section.style.height = null;
          var acceptableHeight = this._map.getSize().y - (this._container.offsetTop + 50);
          if (acceptableHeight < this._section.clientHeight) {
            addClass(this._section, "leaflet-control-layers-scrollbar");
            this._section.style.height = acceptableHeight + "px";
          } else {
            removeClass(this._section, "leaflet-control-layers-scrollbar");
          }
          this._checkDisabledLayers();
          return this;
        },
        collapse: function() {
          removeClass(this._container, "leaflet-control-layers-expanded");
          return this;
        },
        _initLayout: function() {
          var className = "leaflet-control-layers", container = this._container = create$1("div", className), collapsed = this.options.collapsed;
          container.setAttribute("aria-haspopup", true);
          disableClickPropagation(container);
          disableScrollPropagation(container);
          var section = this._section = create$1("section", className + "-list");
          if (collapsed) {
            this._map.on("click", this.collapse, this);
            on(container, {
              mouseenter: function() {
                on(section, "click", preventDefault);
                this.expand();
                setTimeout(function() {
                  off(section, "click", preventDefault);
                });
              },
              mouseleave: this.collapse
            }, this);
          }
          var link3 = this._layersLink = create$1("a", className + "-toggle", container);
          link3.href = "#";
          link3.title = "Layers";
          link3.setAttribute("role", "button");
          on(link3, "click", preventDefault);
          on(link3, "focus", this.expand, this);
          if (!collapsed) {
            this.expand();
          }
          this._baseLayersList = create$1("div", className + "-base", section);
          this._separator = create$1("div", className + "-separator", section);
          this._overlaysList = create$1("div", className + "-overlays", section);
          container.appendChild(section);
        },
        _getLayer: function(id2) {
          for (var i = 0; i < this._layers.length; i++) {
            if (this._layers[i] && stamp(this._layers[i].layer) === id2) {
              return this._layers[i];
            }
          }
        },
        _addLayer: function(layer, name, overlay) {
          if (this._map) {
            layer.on("add remove", this._onLayerChange, this);
          }
          this._layers.push({
            layer,
            name,
            overlay
          });
          if (this.options.sortLayers) {
            this._layers.sort(bind(function(a3, b) {
              return this.options.sortFunction(a3.layer, b.layer, a3.name, b.name);
            }, this));
          }
          if (this.options.autoZIndex && layer.setZIndex) {
            this._lastZIndex++;
            layer.setZIndex(this._lastZIndex);
          }
          this._expandIfNotCollapsed();
        },
        _update: function() {
          if (!this._container) {
            return this;
          }
          empty4(this._baseLayersList);
          empty4(this._overlaysList);
          this._layerControlInputs = [];
          var baseLayersPresent, overlaysPresent, i, obj, baseLayersCount = 0;
          for (i = 0; i < this._layers.length; i++) {
            obj = this._layers[i];
            this._addItem(obj);
            overlaysPresent = overlaysPresent || obj.overlay;
            baseLayersPresent = baseLayersPresent || !obj.overlay;
            baseLayersCount += !obj.overlay ? 1 : 0;
          }
          if (this.options.hideSingleBase) {
            baseLayersPresent = baseLayersPresent && baseLayersCount > 1;
            this._baseLayersList.style.display = baseLayersPresent ? "" : "none";
          }
          this._separator.style.display = overlaysPresent && baseLayersPresent ? "" : "none";
          return this;
        },
        _onLayerChange: function(e) {
          if (!this._handlingClick) {
            this._update();
          }
          var obj = this._getLayer(stamp(e.target));
          var type2 = obj.overlay ? e.type === "add" ? "overlayadd" : "overlayremove" : e.type === "add" ? "baselayerchange" : null;
          if (type2) {
            this._map.fire(type2, obj);
          }
        },
        _createRadioElement: function(name, checked) {
          var radioHtml = '<input type="radio" class="leaflet-control-layers-selector" name="' + name + '"' + (checked ? ' checked="checked"' : "") + "/>";
          var radioFragment = document.createElement("div");
          radioFragment.innerHTML = radioHtml;
          return radioFragment.firstChild;
        },
        _addItem: function(obj) {
          var label = document.createElement("label"), checked = this._map.hasLayer(obj.layer), input;
          if (obj.overlay) {
            input = document.createElement("input");
            input.type = "checkbox";
            input.className = "leaflet-control-layers-selector";
            input.defaultChecked = checked;
          } else {
            input = this._createRadioElement("leaflet-base-layers_" + stamp(this), checked);
          }
          this._layerControlInputs.push(input);
          input.layerId = stamp(obj.layer);
          on(input, "click", this._onInputClick, this);
          var name = document.createElement("span");
          name.innerHTML = " " + obj.name;
          var holder = document.createElement("span");
          label.appendChild(holder);
          holder.appendChild(input);
          holder.appendChild(name);
          var container = obj.overlay ? this._overlaysList : this._baseLayersList;
          container.appendChild(label);
          this._checkDisabledLayers();
          return label;
        },
        _onInputClick: function() {
          var inputs = this._layerControlInputs, input, layer;
          var addedLayers = [], removedLayers = [];
          this._handlingClick = true;
          for (var i = inputs.length - 1; i >= 0; i--) {
            input = inputs[i];
            layer = this._getLayer(input.layerId).layer;
            if (input.checked) {
              addedLayers.push(layer);
            } else if (!input.checked) {
              removedLayers.push(layer);
            }
          }
          for (i = 0; i < removedLayers.length; i++) {
            if (this._map.hasLayer(removedLayers[i])) {
              this._map.removeLayer(removedLayers[i]);
            }
          }
          for (i = 0; i < addedLayers.length; i++) {
            if (!this._map.hasLayer(addedLayers[i])) {
              this._map.addLayer(addedLayers[i]);
            }
          }
          this._handlingClick = false;
          this._refocusOnMap();
        },
        _checkDisabledLayers: function() {
          var inputs = this._layerControlInputs, input, layer, zoom2 = this._map.getZoom();
          for (var i = inputs.length - 1; i >= 0; i--) {
            input = inputs[i];
            layer = this._getLayer(input.layerId).layer;
            input.disabled = layer.options.minZoom !== void 0 && zoom2 < layer.options.minZoom || layer.options.maxZoom !== void 0 && zoom2 > layer.options.maxZoom;
          }
        },
        _expandIfNotCollapsed: function() {
          if (this._map && !this.options.collapsed) {
            this.expand();
          }
          return this;
        }
      });
      var layers = function(baseLayers, overlays, options) {
        return new Layers(baseLayers, overlays, options);
      };
      var Zoom = Control.extend({
        options: {
          position: "topleft",
          zoomInText: '<span aria-hidden="true">+</span>',
          zoomInTitle: "Zoom in",
          zoomOutText: '<span aria-hidden="true">&#x2212;</span>',
          zoomOutTitle: "Zoom out"
        },
        onAdd: function(map5) {
          var zoomName = "leaflet-control-zoom", container = create$1("div", zoomName + " leaflet-bar"), options = this.options;
          this._zoomInButton = this._createButton(
            options.zoomInText,
            options.zoomInTitle,
            zoomName + "-in",
            container,
            this._zoomIn
          );
          this._zoomOutButton = this._createButton(
            options.zoomOutText,
            options.zoomOutTitle,
            zoomName + "-out",
            container,
            this._zoomOut
          );
          this._updateDisabled();
          map5.on("zoomend zoomlevelschange", this._updateDisabled, this);
          return container;
        },
        onRemove: function(map5) {
          map5.off("zoomend zoomlevelschange", this._updateDisabled, this);
        },
        disable: function() {
          this._disabled = true;
          this._updateDisabled();
          return this;
        },
        enable: function() {
          this._disabled = false;
          this._updateDisabled();
          return this;
        },
        _zoomIn: function(e) {
          if (!this._disabled && this._map._zoom < this._map.getMaxZoom()) {
            this._map.zoomIn(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1));
          }
        },
        _zoomOut: function(e) {
          if (!this._disabled && this._map._zoom > this._map.getMinZoom()) {
            this._map.zoomOut(this._map.options.zoomDelta * (e.shiftKey ? 3 : 1));
          }
        },
        _createButton: function(html2, title, className, container, fn) {
          var link3 = create$1("a", className, container);
          link3.innerHTML = html2;
          link3.href = "#";
          link3.title = title;
          link3.setAttribute("role", "button");
          link3.setAttribute("aria-label", title);
          disableClickPropagation(link3);
          on(link3, "click", stop);
          on(link3, "click", fn, this);
          on(link3, "click", this._refocusOnMap, this);
          return link3;
        },
        _updateDisabled: function() {
          var map5 = this._map, className = "leaflet-disabled";
          removeClass(this._zoomInButton, className);
          removeClass(this._zoomOutButton, className);
          this._zoomInButton.setAttribute("aria-disabled", "false");
          this._zoomOutButton.setAttribute("aria-disabled", "false");
          if (this._disabled || map5._zoom === map5.getMinZoom()) {
            addClass(this._zoomOutButton, className);
            this._zoomOutButton.setAttribute("aria-disabled", "true");
          }
          if (this._disabled || map5._zoom === map5.getMaxZoom()) {
            addClass(this._zoomInButton, className);
            this._zoomInButton.setAttribute("aria-disabled", "true");
          }
        }
      });
      Map2.mergeOptions({
        zoomControl: true
      });
      Map2.addInitHook(function() {
        if (this.options.zoomControl) {
          this.zoomControl = new Zoom();
          this.addControl(this.zoomControl);
        }
      });
      var zoom = function(options) {
        return new Zoom(options);
      };
      var Scale = Control.extend({
        options: {
          position: "bottomleft",
          maxWidth: 100,
          metric: true,
          imperial: true
        },
        onAdd: function(map5) {
          var className = "leaflet-control-scale", container = create$1("div", className), options = this.options;
          this._addScales(options, className + "-line", container);
          map5.on(options.updateWhenIdle ? "moveend" : "move", this._update, this);
          map5.whenReady(this._update, this);
          return container;
        },
        onRemove: function(map5) {
          map5.off(this.options.updateWhenIdle ? "moveend" : "move", this._update, this);
        },
        _addScales: function(options, className, container) {
          if (options.metric) {
            this._mScale = create$1("div", className, container);
          }
          if (options.imperial) {
            this._iScale = create$1("div", className, container);
          }
        },
        _update: function() {
          var map5 = this._map, y4 = map5.getSize().y / 2;
          var maxMeters = map5.distance(
            map5.containerPointToLatLng([0, y4]),
            map5.containerPointToLatLng([this.options.maxWidth, y4])
          );
          this._updateScales(maxMeters);
        },
        _updateScales: function(maxMeters) {
          if (this.options.metric && maxMeters) {
            this._updateMetric(maxMeters);
          }
          if (this.options.imperial && maxMeters) {
            this._updateImperial(maxMeters);
          }
        },
        _updateMetric: function(maxMeters) {
          var meters = this._getRoundNum(maxMeters), label = meters < 1e3 ? meters + " m" : meters / 1e3 + " km";
          this._updateScale(this._mScale, label, meters / maxMeters);
        },
        _updateImperial: function(maxMeters) {
          var maxFeet = maxMeters * 3.2808399, maxMiles, miles, feet;
          if (maxFeet > 5280) {
            maxMiles = maxFeet / 5280;
            miles = this._getRoundNum(maxMiles);
            this._updateScale(this._iScale, miles + " mi", miles / maxMiles);
          } else {
            feet = this._getRoundNum(maxFeet);
            this._updateScale(this._iScale, feet + " ft", feet / maxFeet);
          }
        },
        _updateScale: function(scale2, text, ratio) {
          scale2.style.width = Math.round(this.options.maxWidth * ratio) + "px";
          scale2.innerHTML = text;
        },
        _getRoundNum: function(num) {
          var pow102 = Math.pow(10, (Math.floor(num) + "").length - 1), d = num / pow102;
          d = d >= 10 ? 10 : d >= 5 ? 5 : d >= 3 ? 3 : d >= 2 ? 2 : 1;
          return pow102 * d;
        }
      });
      var scale = function(options) {
        return new Scale(options);
      };
      var ukrainianFlag = '<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>';
      var Attribution = Control.extend({
        options: {
          position: "bottomright",
          prefix: '<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">' + (Browser.inlineSvg ? ukrainianFlag + " " : "") + "Leaflet</a>"
        },
        initialize: function(options) {
          setOptions(this, options);
          this._attributions = {};
        },
        onAdd: function(map5) {
          map5.attributionControl = this;
          this._container = create$1("div", "leaflet-control-attribution");
          disableClickPropagation(this._container);
          for (var i in map5._layers) {
            if (map5._layers[i].getAttribution) {
              this.addAttribution(map5._layers[i].getAttribution());
            }
          }
          this._update();
          map5.on("layeradd", this._addAttribution, this);
          return this._container;
        },
        onRemove: function(map5) {
          map5.off("layeradd", this._addAttribution, this);
        },
        _addAttribution: function(ev) {
          if (ev.layer.getAttribution) {
            this.addAttribution(ev.layer.getAttribution());
            ev.layer.once("remove", function() {
              this.removeAttribution(ev.layer.getAttribution());
            }, this);
          }
        },
        setPrefix: function(prefix) {
          this.options.prefix = prefix;
          this._update();
          return this;
        },
        addAttribution: function(text) {
          if (!text) {
            return this;
          }
          if (!this._attributions[text]) {
            this._attributions[text] = 0;
          }
          this._attributions[text]++;
          this._update();
          return this;
        },
        removeAttribution: function(text) {
          if (!text) {
            return this;
          }
          if (this._attributions[text]) {
            this._attributions[text]--;
            this._update();
          }
          return this;
        },
        _update: function() {
          if (!this._map) {
            return;
          }
          var attribs = [];
          for (var i in this._attributions) {
            if (this._attributions[i]) {
              attribs.push(i);
            }
          }
          var prefixAndAttribs = [];
          if (this.options.prefix) {
            prefixAndAttribs.push(this.options.prefix);
          }
          if (attribs.length) {
            prefixAndAttribs.push(attribs.join(", "));
          }
          this._container.innerHTML = prefixAndAttribs.join(' <span aria-hidden="true">|</span> ');
        }
      });
      Map2.mergeOptions({
        attributionControl: true
      });
      Map2.addInitHook(function() {
        if (this.options.attributionControl) {
          new Attribution().addTo(this);
        }
      });
      var attribution = function(options) {
        return new Attribution(options);
      };
      Control.Layers = Layers;
      Control.Zoom = Zoom;
      Control.Scale = Scale;
      Control.Attribution = Attribution;
      control.layers = layers;
      control.zoom = zoom;
      control.scale = scale;
      control.attribution = attribution;
      var Handler = Class.extend({
        initialize: function(map5) {
          this._map = map5;
        },
        enable: function() {
          if (this._enabled) {
            return this;
          }
          this._enabled = true;
          this.addHooks();
          return this;
        },
        disable: function() {
          if (!this._enabled) {
            return this;
          }
          this._enabled = false;
          this.removeHooks();
          return this;
        },
        enabled: function() {
          return !!this._enabled;
        }
      });
      Handler.addTo = function(map5, name) {
        map5.addHandler(name, this);
        return this;
      };
      var Mixin = { Events };
      var START = Browser.touch ? "touchstart mousedown" : "mousedown";
      var Draggable = Evented.extend({
        options: {
          clickTolerance: 3
        },
        initialize: function(element, dragStartTarget, preventOutline2, options) {
          setOptions(this, options);
          this._element = element;
          this._dragStartTarget = dragStartTarget || element;
          this._preventOutline = preventOutline2;
        },
        enable: function() {
          if (this._enabled) {
            return;
          }
          on(this._dragStartTarget, START, this._onDown, this);
          this._enabled = true;
        },
        disable: function() {
          if (!this._enabled) {
            return;
          }
          if (Draggable._dragging === this) {
            this.finishDrag(true);
          }
          off(this._dragStartTarget, START, this._onDown, this);
          this._enabled = false;
          this._moved = false;
        },
        _onDown: function(e) {
          if (!this._enabled) {
            return;
          }
          this._moved = false;
          if (hasClass(this._element, "leaflet-zoom-anim")) {
            return;
          }
          if (e.touches && e.touches.length !== 1) {
            if (Draggable._dragging === this) {
              this.finishDrag();
            }
            return;
          }
          if (Draggable._dragging || e.shiftKey || e.which !== 1 && e.button !== 1 && !e.touches) {
            return;
          }
          Draggable._dragging = this;
          if (this._preventOutline) {
            preventOutline(this._element);
          }
          disableImageDrag();
          disableTextSelection();
          if (this._moving) {
            return;
          }
          this.fire("down");
          var first = e.touches ? e.touches[0] : e, sizedParent = getSizedParentNode(this._element);
          this._startPoint = new Point(first.clientX, first.clientY);
          this._startPos = getPosition(this._element);
          this._parentScale = getScale(sizedParent);
          var mouseevent = e.type === "mousedown";
          on(document, mouseevent ? "mousemove" : "touchmove", this._onMove, this);
          on(document, mouseevent ? "mouseup" : "touchend touchcancel", this._onUp, this);
        },
        _onMove: function(e) {
          if (!this._enabled) {
            return;
          }
          if (e.touches && e.touches.length > 1) {
            this._moved = true;
            return;
          }
          var first = e.touches && e.touches.length === 1 ? e.touches[0] : e, offset2 = new Point(first.clientX, first.clientY)._subtract(this._startPoint);
          if (!offset2.x && !offset2.y) {
            return;
          }
          if (Math.abs(offset2.x) + Math.abs(offset2.y) < this.options.clickTolerance) {
            return;
          }
          offset2.x /= this._parentScale.x;
          offset2.y /= this._parentScale.y;
          preventDefault(e);
          if (!this._moved) {
            this.fire("dragstart");
            this._moved = true;
            addClass(document.body, "leaflet-dragging");
            this._lastTarget = e.target || e.srcElement;
            if (window.SVGElementInstance && this._lastTarget instanceof window.SVGElementInstance) {
              this._lastTarget = this._lastTarget.correspondingUseElement;
            }
            addClass(this._lastTarget, "leaflet-drag-target");
          }
          this._newPos = this._startPos.add(offset2);
          this._moving = true;
          this._lastEvent = e;
          this._updatePosition();
        },
        _updatePosition: function() {
          var e = { originalEvent: this._lastEvent };
          this.fire("predrag", e);
          setPosition(this._element, this._newPos);
          this.fire("drag", e);
        },
        _onUp: function() {
          if (!this._enabled) {
            return;
          }
          this.finishDrag();
        },
        finishDrag: function(noInertia) {
          removeClass(document.body, "leaflet-dragging");
          if (this._lastTarget) {
            removeClass(this._lastTarget, "leaflet-drag-target");
            this._lastTarget = null;
          }
          off(document, "mousemove touchmove", this._onMove, this);
          off(document, "mouseup touchend touchcancel", this._onUp, this);
          enableImageDrag();
          enableTextSelection();
          if (this._moved && this._moving) {
            this.fire("dragend", {
              noInertia,
              distance: this._newPos.distanceTo(this._startPos)
            });
          }
          this._moving = false;
          Draggable._dragging = false;
        }
      });
      function simplify(points, tolerance) {
        if (!tolerance || !points.length) {
          return points.slice();
        }
        var sqTolerance = tolerance * tolerance;
        points = _reducePoints(points, sqTolerance);
        points = _simplifyDP(points, sqTolerance);
        return points;
      }
      function pointToSegmentDistance(p, p1, p2) {
        return Math.sqrt(_sqClosestPointOnSegment(p, p1, p2, true));
      }
      function closestPointOnSegment(p, p1, p2) {
        return _sqClosestPointOnSegment(p, p1, p2);
      }
      function _simplifyDP(points, sqTolerance) {
        var len = points.length, ArrayConstructor = typeof Uint8Array !== void 0 + "" ? Uint8Array : Array, markers = new ArrayConstructor(len);
        markers[0] = markers[len - 1] = 1;
        _simplifyDPStep(points, markers, sqTolerance, 0, len - 1);
        var i, newPoints = [];
        for (i = 0; i < len; i++) {
          if (markers[i]) {
            newPoints.push(points[i]);
          }
        }
        return newPoints;
      }
      function _simplifyDPStep(points, markers, sqTolerance, first, last) {
        var maxSqDist = 0, index4, i, sqDist;
        for (i = first + 1; i <= last - 1; i++) {
          sqDist = _sqClosestPointOnSegment(points[i], points[first], points[last], true);
          if (sqDist > maxSqDist) {
            index4 = i;
            maxSqDist = sqDist;
          }
        }
        if (maxSqDist > sqTolerance) {
          markers[index4] = 1;
          _simplifyDPStep(points, markers, sqTolerance, first, index4);
          _simplifyDPStep(points, markers, sqTolerance, index4, last);
        }
      }
      function _reducePoints(points, sqTolerance) {
        var reducedPoints = [points[0]];
        for (var i = 1, prev = 0, len = points.length; i < len; i++) {
          if (_sqDist(points[i], points[prev]) > sqTolerance) {
            reducedPoints.push(points[i]);
            prev = i;
          }
        }
        if (prev < len - 1) {
          reducedPoints.push(points[len - 1]);
        }
        return reducedPoints;
      }
      var _lastCode;
      function clipSegment(a3, b, bounds, useLastCode, round) {
        var codeA = useLastCode ? _lastCode : _getBitCode(a3, bounds), codeB = _getBitCode(b, bounds), codeOut, p, newCode;
        _lastCode = codeB;
        while (true) {
          if (!(codeA | codeB)) {
            return [a3, b];
          }
          if (codeA & codeB) {
            return false;
          }
          codeOut = codeA || codeB;
          p = _getEdgeIntersection(a3, b, codeOut, bounds, round);
          newCode = _getBitCode(p, bounds);
          if (codeOut === codeA) {
            a3 = p;
            codeA = newCode;
          } else {
            b = p;
            codeB = newCode;
          }
        }
      }
      function _getEdgeIntersection(a3, b, code, bounds, round) {
        var dx = b.x - a3.x, dy = b.y - a3.y, min4 = bounds.min, max5 = bounds.max, x4, y4;
        if (code & 8) {
          x4 = a3.x + dx * (max5.y - a3.y) / dy;
          y4 = max5.y;
        } else if (code & 4) {
          x4 = a3.x + dx * (min4.y - a3.y) / dy;
          y4 = min4.y;
        } else if (code & 2) {
          x4 = max5.x;
          y4 = a3.y + dy * (max5.x - a3.x) / dx;
        } else if (code & 1) {
          x4 = min4.x;
          y4 = a3.y + dy * (min4.x - a3.x) / dx;
        }
        return new Point(x4, y4, round);
      }
      function _getBitCode(p, bounds) {
        var code = 0;
        if (p.x < bounds.min.x) {
          code |= 1;
        } else if (p.x > bounds.max.x) {
          code |= 2;
        }
        if (p.y < bounds.min.y) {
          code |= 4;
        } else if (p.y > bounds.max.y) {
          code |= 8;
        }
        return code;
      }
      function _sqDist(p1, p2) {
        var dx = p2.x - p1.x, dy = p2.y - p1.y;
        return dx * dx + dy * dy;
      }
      function _sqClosestPointOnSegment(p, p1, p2, sqDist) {
        var x4 = p1.x, y4 = p1.y, dx = p2.x - x4, dy = p2.y - y4, dot = dx * dx + dy * dy, t;
        if (dot > 0) {
          t = ((p.x - x4) * dx + (p.y - y4) * dy) / dot;
          if (t > 1) {
            x4 = p2.x;
            y4 = p2.y;
          } else if (t > 0) {
            x4 += dx * t;
            y4 += dy * t;
          }
        }
        dx = p.x - x4;
        dy = p.y - y4;
        return sqDist ? dx * dx + dy * dy : new Point(x4, y4);
      }
      function isFlat(latlngs) {
        return !isArray(latlngs[0]) || typeof latlngs[0][0] !== "object" && typeof latlngs[0][0] !== "undefined";
      }
      function _flat(latlngs) {
        console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead.");
        return isFlat(latlngs);
      }
      var LineUtil = {
        __proto__: null,
        simplify,
        pointToSegmentDistance,
        closestPointOnSegment,
        clipSegment,
        _getEdgeIntersection,
        _getBitCode,
        _sqClosestPointOnSegment,
        isFlat,
        _flat
      };
      function clipPolygon(points, bounds, round) {
        var clippedPoints, edges = [1, 4, 2, 8], i, j, k2, a3, b, len, edge2, p;
        for (i = 0, len = points.length; i < len; i++) {
          points[i]._code = _getBitCode(points[i], bounds);
        }
        for (k2 = 0; k2 < 4; k2++) {
          edge2 = edges[k2];
          clippedPoints = [];
          for (i = 0, len = points.length, j = len - 1; i < len; j = i++) {
            a3 = points[i];
            b = points[j];
            if (!(a3._code & edge2)) {
              if (b._code & edge2) {
                p = _getEdgeIntersection(b, a3, edge2, bounds, round);
                p._code = _getBitCode(p, bounds);
                clippedPoints.push(p);
              }
              clippedPoints.push(a3);
            } else if (!(b._code & edge2)) {
              p = _getEdgeIntersection(b, a3, edge2, bounds, round);
              p._code = _getBitCode(p, bounds);
              clippedPoints.push(p);
            }
          }
          points = clippedPoints;
        }
        return points;
      }
      var PolyUtil = {
        __proto__: null,
        clipPolygon
      };
      var LonLat = {
        project: function(latlng) {
          return new Point(latlng.lng, latlng.lat);
        },
        unproject: function(point6) {
          return new LatLng(point6.y, point6.x);
        },
        bounds: new Bounds([-180, -90], [180, 90])
      };
      var Mercator = {
        R: 6378137,
        R_MINOR: 6356752314245179e-9,
        bounds: new Bounds([-2003750834279e-5, -1549657073972e-5], [2003750834279e-5, 1876465623138e-5]),
        project: function(latlng) {
          var d = Math.PI / 180, r = this.R, y4 = latlng.lat * d, tmp = this.R_MINOR / r, e = Math.sqrt(1 - tmp * tmp), con = e * Math.sin(y4);
          var ts = Math.tan(Math.PI / 4 - y4 / 2) / Math.pow((1 - con) / (1 + con), e / 2);
          y4 = -r * Math.log(Math.max(ts, 1e-10));
          return new Point(latlng.lng * d * r, y4);
        },
        unproject: function(point6) {
          var d = 180 / Math.PI, r = this.R, tmp = this.R_MINOR / r, e = Math.sqrt(1 - tmp * tmp), ts = Math.exp(-point6.y / r), phi2 = Math.PI / 2 - 2 * Math.atan(ts);
          for (var i = 0, dphi = 0.1, con; i < 15 && Math.abs(dphi) > 1e-7; i++) {
            con = e * Math.sin(phi2);
            con = Math.pow((1 - con) / (1 + con), e / 2);
            dphi = Math.PI / 2 - 2 * Math.atan(ts * con) - phi2;
            phi2 += dphi;
          }
          return new LatLng(phi2 * d, point6.x * d / r);
        }
      };
      var index3 = {
        __proto__: null,
        LonLat,
        Mercator,
        SphericalMercator
      };
      var EPSG3395 = extend2({}, Earth, {
        code: "EPSG:3395",
        projection: Mercator,
        transformation: function() {
          var scale2 = 0.5 / (Math.PI * Mercator.R);
          return toTransformation(scale2, 0.5, -scale2, 0.5);
        }()
      });
      var EPSG4326 = extend2({}, Earth, {
        code: "EPSG:4326",
        projection: LonLat,
        transformation: toTransformation(1 / 180, 1, -1 / 180, 0.5)
      });
      var Simple = extend2({}, CRS, {
        projection: LonLat,
        transformation: toTransformation(1, 0, -1, 0),
        scale: function(zoom2) {
          return Math.pow(2, zoom2);
        },
        zoom: function(scale2) {
          return Math.log(scale2) / Math.LN2;
        },
        distance: function(latlng1, latlng2) {
          var dx = latlng2.lng - latlng1.lng, dy = latlng2.lat - latlng1.lat;
          return Math.sqrt(dx * dx + dy * dy);
        },
        infinite: true
      });
      CRS.Earth = Earth;
      CRS.EPSG3395 = EPSG3395;
      CRS.EPSG3857 = EPSG3857;
      CRS.EPSG900913 = EPSG900913;
      CRS.EPSG4326 = EPSG4326;
      CRS.Simple = Simple;
      var Layer = Evented.extend({
        options: {
          pane: "overlayPane",
          attribution: null,
          bubblingMouseEvents: true
        },
        addTo: function(map5) {
          map5.addLayer(this);
          return this;
        },
        remove: function() {
          return this.removeFrom(this._map || this._mapToAdd);
        },
        removeFrom: function(obj) {
          if (obj) {
            obj.removeLayer(this);
          }
          return this;
        },
        getPane: function(name) {
          return this._map.getPane(name ? this.options[name] || name : this.options.pane);
        },
        addInteractiveTarget: function(targetEl) {
          this._map._targets[stamp(targetEl)] = this;
          return this;
        },
        removeInteractiveTarget: function(targetEl) {
          delete this._map._targets[stamp(targetEl)];
          return this;
        },
        getAttribution: function() {
          return this.options.attribution;
        },
        _layerAdd: function(e) {
          var map5 = e.target;
          if (!map5.hasLayer(this)) {
            return;
          }
          this._map = map5;
          this._zoomAnimated = map5._zoomAnimated;
          if (this.getEvents) {
            var events = this.getEvents();
            map5.on(events, this);
            this.once("remove", function() {
              map5.off(events, this);
            }, this);
          }
          this.onAdd(map5);
          this.fire("add");
          map5.fire("layeradd", { layer: this });
        }
      });
      Map2.include({
        addLayer: function(layer) {
          if (!layer._layerAdd) {
            throw new Error("The provided object is not a Layer.");
          }
          var id2 = stamp(layer);
          if (this._layers[id2]) {
            return this;
          }
          this._layers[id2] = layer;
          layer._mapToAdd = this;
          if (layer.beforeAdd) {
            layer.beforeAdd(this);
          }
          this.whenReady(layer._layerAdd, layer);
          return this;
        },
        removeLayer: function(layer) {
          var id2 = stamp(layer);
          if (!this._layers[id2]) {
            return this;
          }
          if (this._loaded) {
            layer.onRemove(this);
          }
          delete this._layers[id2];
          if (this._loaded) {
            this.fire("layerremove", { layer });
            layer.fire("remove");
          }
          layer._map = layer._mapToAdd = null;
          return this;
        },
        hasLayer: function(layer) {
          return stamp(layer) in this._layers;
        },
        eachLayer: function(method, context) {
          for (var i in this._layers) {
            method.call(context, this._layers[i]);
          }
          return this;
        },
        _addLayers: function(layers2) {
          layers2 = layers2 ? isArray(layers2) ? layers2 : [layers2] : [];
          for (var i = 0, len = layers2.length; i < len; i++) {
            this.addLayer(layers2[i]);
          }
        },
        _addZoomLimit: function(layer) {
          if (!isNaN(layer.options.maxZoom) || !isNaN(layer.options.minZoom)) {
            this._zoomBoundLayers[stamp(layer)] = layer;
            this._updateZoomLevels();
          }
        },
        _removeZoomLimit: function(layer) {
          var id2 = stamp(layer);
          if (this._zoomBoundLayers[id2]) {
            delete this._zoomBoundLayers[id2];
            this._updateZoomLevels();
          }
        },
        _updateZoomLevels: function() {
          var minZoom = Infinity, maxZoom = -Infinity, oldZoomSpan = this._getZoomSpan();
          for (var i in this._zoomBoundLayers) {
            var options = this._zoomBoundLayers[i].options;
            minZoom = options.minZoom === void 0 ? minZoom : Math.min(minZoom, options.minZoom);
            maxZoom = options.maxZoom === void 0 ? maxZoom : Math.max(maxZoom, options.maxZoom);
          }
          this._layersMaxZoom = maxZoom === -Infinity ? void 0 : maxZoom;
          this._layersMinZoom = minZoom === Infinity ? void 0 : minZoom;
          if (oldZoomSpan !== this._getZoomSpan()) {
            this.fire("zoomlevelschange");
          }
          if (this.options.maxZoom === void 0 && this._layersMaxZoom && this.getZoom() > this._layersMaxZoom) {
            this.setZoom(this._layersMaxZoom);
          }
          if (this.options.minZoom === void 0 && this._layersMinZoom && this.getZoom() < this._layersMinZoom) {
            this.setZoom(this._layersMinZoom);
          }
        }
      });
      var LayerGroup = Layer.extend({
        initialize: function(layers2, options) {
          setOptions(this, options);
          this._layers = {};
          var i, len;
          if (layers2) {
            for (i = 0, len = layers2.length; i < len; i++) {
              this.addLayer(layers2[i]);
            }
          }
        },
        addLayer: function(layer) {
          var id2 = this.getLayerId(layer);
          this._layers[id2] = layer;
          if (this._map) {
            this._map.addLayer(layer);
          }
          return this;
        },
        removeLayer: function(layer) {
          var id2 = layer in this._layers ? layer : this.getLayerId(layer);
          if (this._map && this._layers[id2]) {
            this._map.removeLayer(this._layers[id2]);
          }
          delete this._layers[id2];
          return this;
        },
        hasLayer: function(layer) {
          var layerId = typeof layer === "number" ? layer : this.getLayerId(layer);
          return layerId in this._layers;
        },
        clearLayers: function() {
          return this.eachLayer(this.removeLayer, this);
        },
        invoke: function(methodName) {
          var args = Array.prototype.slice.call(arguments, 1), i, layer;
          for (i in this._layers) {
            layer = this._layers[i];
            if (layer[methodName]) {
              layer[methodName].apply(layer, args);
            }
          }
          return this;
        },
        onAdd: function(map5) {
          this.eachLayer(map5.addLayer, map5);
        },
        onRemove: function(map5) {
          this.eachLayer(map5.removeLayer, map5);
        },
        eachLayer: function(method, context) {
          for (var i in this._layers) {
            method.call(context, this._layers[i]);
          }
          return this;
        },
        getLayer: function(id2) {
          return this._layers[id2];
        },
        getLayers: function() {
          var layers2 = [];
          this.eachLayer(layers2.push, layers2);
          return layers2;
        },
        setZIndex: function(zIndex) {
          return this.invoke("setZIndex", zIndex);
        },
        getLayerId: function(layer) {
          return stamp(layer);
        }
      });
      var layerGroup = function(layers2, options) {
        return new LayerGroup(layers2, options);
      };
      var FeatureGroup = LayerGroup.extend({
        addLayer: function(layer) {
          if (this.hasLayer(layer)) {
            return this;
          }
          layer.addEventParent(this);
          LayerGroup.prototype.addLayer.call(this, layer);
          return this.fire("layeradd", { layer });
        },
        removeLayer: function(layer) {
          if (!this.hasLayer(layer)) {
            return this;
          }
          if (layer in this._layers) {
            layer = this._layers[layer];
          }
          layer.removeEventParent(this);
          LayerGroup.prototype.removeLayer.call(this, layer);
          return this.fire("layerremove", { layer });
        },
        setStyle: function(style2) {
          return this.invoke("setStyle", style2);
        },
        bringToFront: function() {
          return this.invoke("bringToFront");
        },
        bringToBack: function() {
          return this.invoke("bringToBack");
        },
        getBounds: function() {
          var bounds = new LatLngBounds();
          for (var id2 in this._layers) {
            var layer = this._layers[id2];
            bounds.extend(layer.getBounds ? layer.getBounds() : layer.getLatLng());
          }
          return bounds;
        }
      });
      var featureGroup = function(layers2, options) {
        return new FeatureGroup(layers2, options);
      };
      var Icon = Class.extend({
        options: {
          popupAnchor: [0, 0],
          tooltipAnchor: [0, 0],
          crossOrigin: false
        },
        initialize: function(options) {
          setOptions(this, options);
        },
        createIcon: function(oldIcon) {
          return this._createIcon("icon", oldIcon);
        },
        createShadow: function(oldIcon) {
          return this._createIcon("shadow", oldIcon);
        },
        _createIcon: function(name, oldIcon) {
          var src = this._getIconUrl(name);
          if (!src) {
            if (name === "icon") {
              throw new Error("iconUrl not set in Icon options (see the docs).");
            }
            return null;
          }
          var img = this._createImg(src, oldIcon && oldIcon.tagName === "IMG" ? oldIcon : null);
          this._setIconStyles(img, name);
          if (this.options.crossOrigin || this.options.crossOrigin === "") {
            img.crossOrigin = this.options.crossOrigin === true ? "" : this.options.crossOrigin;
          }
          return img;
        },
        _setIconStyles: function(img, name) {
          var options = this.options;
          var sizeOption = options[name + "Size"];
          if (typeof sizeOption === "number") {
            sizeOption = [sizeOption, sizeOption];
          }
          var size = toPoint(sizeOption), anchor = toPoint(name === "shadow" && options.shadowAnchor || options.iconAnchor || size && size.divideBy(2, true));
          img.className = "leaflet-marker-" + name + " " + (options.className || "");
          if (anchor) {
            img.style.marginLeft = -anchor.x + "px";
            img.style.marginTop = -anchor.y + "px";
          }
          if (size) {
            img.style.width = size.x + "px";
            img.style.height = size.y + "px";
          }
        },
        _createImg: function(src, el) {
          el = el || document.createElement("img");
          el.src = src;
          return el;
        },
        _getIconUrl: function(name) {
          return Browser.retina && this.options[name + "RetinaUrl"] || this.options[name + "Url"];
        }
      });
      function icon(options) {
        return new Icon(options);
      }
      var IconDefault = Icon.extend({
        options: {
          iconUrl: "marker-icon.png",
          iconRetinaUrl: "marker-icon-2x.png",
          shadowUrl: "marker-shadow.png",
          iconSize: [25, 41],
          iconAnchor: [12, 41],
          popupAnchor: [1, -34],
          tooltipAnchor: [16, -28],
          shadowSize: [41, 41]
        },
        _getIconUrl: function(name) {
          if (typeof IconDefault.imagePath !== "string") {
            IconDefault.imagePath = this._detectIconPath();
          }
          return (this.options.imagePath || IconDefault.imagePath) + Icon.prototype._getIconUrl.call(this, name);
        },
        _stripUrl: function(path2) {
          var strip = function(str, re2, idx) {
            var match2 = re2.exec(str);
            return match2 && match2[idx];
          };
          path2 = strip(path2, /^url\((['"])?(.+)\1\)$/, 2);
          return path2 && strip(path2, /^(.*)marker-icon\.png$/, 1);
        },
        _detectIconPath: function() {
          var el = create$1("div", "leaflet-default-icon-path", document.body);
          var path2 = getStyle(el, "background-image") || getStyle(el, "backgroundImage");
          document.body.removeChild(el);
          path2 = this._stripUrl(path2);
          if (path2) {
            return path2;
          }
          var link3 = document.querySelector('link[href$="leaflet.css"]');
          if (!link3) {
            return "";
          }
          return link3.href.substring(0, link3.href.length - "leaflet.css".length - 1);
        }
      });
      var MarkerDrag = Handler.extend({
        initialize: function(marker3) {
          this._marker = marker3;
        },
        addHooks: function() {
          var icon2 = this._marker._icon;
          if (!this._draggable) {
            this._draggable = new Draggable(icon2, icon2, true);
          }
          this._draggable.on({
            dragstart: this._onDragStart,
            predrag: this._onPreDrag,
            drag: this._onDrag,
            dragend: this._onDragEnd
          }, this).enable();
          addClass(icon2, "leaflet-marker-draggable");
        },
        removeHooks: function() {
          this._draggable.off({
            dragstart: this._onDragStart,
            predrag: this._onPreDrag,
            drag: this._onDrag,
            dragend: this._onDragEnd
          }, this).disable();
          if (this._marker._icon) {
            removeClass(this._marker._icon, "leaflet-marker-draggable");
          }
        },
        moved: function() {
          return this._draggable && this._draggable._moved;
        },
        _adjustPan: function(e) {
          var marker3 = this._marker, map5 = marker3._map, speed = this._marker.options.autoPanSpeed, padding = this._marker.options.autoPanPadding, iconPos = getPosition(marker3._icon), bounds = map5.getPixelBounds(), origin = map5.getPixelOrigin();
          var panBounds = toBounds(
            bounds.min._subtract(origin).add(padding),
            bounds.max._subtract(origin).subtract(padding)
          );
          if (!panBounds.contains(iconPos)) {
            var movement = toPoint(
              (Math.max(panBounds.max.x, iconPos.x) - panBounds.max.x) / (bounds.max.x - panBounds.max.x) - (Math.min(panBounds.min.x, iconPos.x) - panBounds.min.x) / (bounds.min.x - panBounds.min.x),
              (Math.max(panBounds.max.y, iconPos.y) - panBounds.max.y) / (bounds.max.y - panBounds.max.y) - (Math.min(panBounds.min.y, iconPos.y) - panBounds.min.y) / (bounds.min.y - panBounds.min.y)
            ).multiplyBy(speed);
            map5.panBy(movement, { animate: false });
            this._draggable._newPos._add(movement);
            this._draggable._startPos._add(movement);
            setPosition(marker3._icon, this._draggable._newPos);
            this._onDrag(e);
            this._panRequest = requestAnimFrame(this._adjustPan.bind(this, e));
          }
        },
        _onDragStart: function() {
          this._oldLatLng = this._marker.getLatLng();
          this._marker.closePopup && this._marker.closePopup();
          this._marker.fire("movestart").fire("dragstart");
        },
        _onPreDrag: function(e) {
          if (this._marker.options.autoPan) {
            cancelAnimFrame(this._panRequest);
            this._panRequest = requestAnimFrame(this._adjustPan.bind(this, e));
          }
        },
        _onDrag: function(e) {
          var marker3 = this._marker, shadow = marker3._shadow, iconPos = getPosition(marker3._icon), latlng = marker3._map.layerPointToLatLng(iconPos);
          if (shadow) {
            setPosition(shadow, iconPos);
          }
          marker3._latlng = latlng;
          e.latlng = latlng;
          e.oldLatLng = this._oldLatLng;
          marker3.fire("move", e).fire("drag", e);
        },
        _onDragEnd: function(e) {
          cancelAnimFrame(this._panRequest);
          delete this._oldLatLng;
          this._marker.fire("moveend").fire("dragend", e);
        }
      });
      var Marker = Layer.extend({
        options: {
          icon: new IconDefault(),
          interactive: true,
          keyboard: true,
          title: "",
          alt: "Marker",
          zIndexOffset: 0,
          opacity: 1,
          riseOnHover: false,
          riseOffset: 250,
          pane: "markerPane",
          shadowPane: "shadowPane",
          bubblingMouseEvents: false,
          autoPanOnFocus: true,
          draggable: false,
          autoPan: false,
          autoPanPadding: [50, 50],
          autoPanSpeed: 10
        },
        initialize: function(latlng, options) {
          setOptions(this, options);
          this._latlng = toLatLng(latlng);
        },
        onAdd: function(map5) {
          this._zoomAnimated = this._zoomAnimated && map5.options.markerZoomAnimation;
          if (this._zoomAnimated) {
            map5.on("zoomanim", this._animateZoom, this);
          }
          this._initIcon();
          this.update();
        },
        onRemove: function(map5) {
          if (this.dragging && this.dragging.enabled()) {
            this.options.draggable = true;
            this.dragging.removeHooks();
          }
          delete this.dragging;
          if (this._zoomAnimated) {
            map5.off("zoomanim", this._animateZoom, this);
          }
          this._removeIcon();
          this._removeShadow();
        },
        getEvents: function() {
          return {
            zoom: this.update,
            viewreset: this.update
          };
        },
        getLatLng: function() {
          return this._latlng;
        },
        setLatLng: function(latlng) {
          var oldLatLng = this._latlng;
          this._latlng = toLatLng(latlng);
          this.update();
          return this.fire("move", { oldLatLng, latlng: this._latlng });
        },
        setZIndexOffset: function(offset2) {
          this.options.zIndexOffset = offset2;
          return this.update();
        },
        getIcon: function() {
          return this.options.icon;
        },
        setIcon: function(icon2) {
          this.options.icon = icon2;
          if (this._map) {
            this._initIcon();
            this.update();
          }
          if (this._popup) {
            this.bindPopup(this._popup, this._popup.options);
          }
          return this;
        },
        getElement: function() {
          return this._icon;
        },
        update: function() {
          if (this._icon && this._map) {
            var pos = this._map.latLngToLayerPoint(this._latlng).round();
            this._setPos(pos);
          }
          return this;
        },
        _initIcon: function() {
          var options = this.options, classToAdd = "leaflet-zoom-" + (this._zoomAnimated ? "animated" : "hide");
          var icon2 = options.icon.createIcon(this._icon), addIcon = false;
          if (icon2 !== this._icon) {
            if (this._icon) {
              this._removeIcon();
            }
            addIcon = true;
            if (options.title) {
              icon2.title = options.title;
            }
            if (icon2.tagName === "IMG") {
              icon2.alt = options.alt || "";
            }
          }
          addClass(icon2, classToAdd);
          if (options.keyboard) {
            icon2.tabIndex = "0";
            icon2.setAttribute("role", "button");
          }
          this._icon = icon2;
          if (options.riseOnHover) {
            this.on({
              mouseover: this._bringToFront,
              mouseout: this._resetZIndex
            });
          }
          if (this.options.autoPanOnFocus) {
            on(icon2, "focus", this._panOnFocus, this);
          }
          var newShadow = options.icon.createShadow(this._shadow), addShadow = false;
          if (newShadow !== this._shadow) {
            this._removeShadow();
            addShadow = true;
          }
          if (newShadow) {
            addClass(newShadow, classToAdd);
            newShadow.alt = "";
          }
          this._shadow = newShadow;
          if (options.opacity < 1) {
            this._updateOpacity();
          }
          if (addIcon) {
            this.getPane().appendChild(this._icon);
          }
          this._initInteraction();
          if (newShadow && addShadow) {
            this.getPane(options.shadowPane).appendChild(this._shadow);
          }
        },
        _removeIcon: function() {
          if (this.options.riseOnHover) {
            this.off({
              mouseover: this._bringToFront,
              mouseout: this._resetZIndex
            });
          }
          if (this.options.autoPanOnFocus) {
            off(this._icon, "focus", this._panOnFocus, this);
          }
          remove2(this._icon);
          this.removeInteractiveTarget(this._icon);
          this._icon = null;
        },
        _removeShadow: function() {
          if (this._shadow) {
            remove2(this._shadow);
          }
          this._shadow = null;
        },
        _setPos: function(pos) {
          if (this._icon) {
            setPosition(this._icon, pos);
          }
          if (this._shadow) {
            setPosition(this._shadow, pos);
          }
          this._zIndex = pos.y + this.options.zIndexOffset;
          this._resetZIndex();
        },
        _updateZIndex: function(offset2) {
          if (this._icon) {
            this._icon.style.zIndex = this._zIndex + offset2;
          }
        },
        _animateZoom: function(opt) {
          var pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();
          this._setPos(pos);
        },
        _initInteraction: function() {
          if (!this.options.interactive) {
            return;
          }
          addClass(this._icon, "leaflet-interactive");
          this.addInteractiveTarget(this._icon);
          if (MarkerDrag) {
            var draggable = this.options.draggable;
            if (this.dragging) {
              draggable = this.dragging.enabled();
              this.dragging.disable();
            }
            this.dragging = new MarkerDrag(this);
            if (draggable) {
              this.dragging.enable();
            }
          }
        },
        setOpacity: function(opacity) {
          this.options.opacity = opacity;
          if (this._map) {
            this._updateOpacity();
          }
          return this;
        },
        _updateOpacity: function() {
          var opacity = this.options.opacity;
          if (this._icon) {
            setOpacity(this._icon, opacity);
          }
          if (this._shadow) {
            setOpacity(this._shadow, opacity);
          }
        },
        _bringToFront: function() {
          this._updateZIndex(this.options.riseOffset);
        },
        _resetZIndex: function() {
          this._updateZIndex(0);
        },
        _panOnFocus: function() {
          var map5 = this._map;
          if (!map5) {
            return;
          }
          var iconOpts = this.options.icon.options;
          var size = iconOpts.iconSize ? toPoint(iconOpts.iconSize) : toPoint(0, 0);
          var anchor = iconOpts.iconAnchor ? toPoint(iconOpts.iconAnchor) : toPoint(0, 0);
          map5.panInside(this._latlng, {
            paddingTopLeft: anchor,
            paddingBottomRight: size.subtract(anchor)
          });
        },
        _getPopupAnchor: function() {
          return this.options.icon.options.popupAnchor;
        },
        _getTooltipAnchor: function() {
          return this.options.icon.options.tooltipAnchor;
        }
      });
      function marker2(latlng, options) {
        return new Marker(latlng, options);
      }
      var Path3 = Layer.extend({
        options: {
          stroke: true,
          color: "#3388ff",
          weight: 3,
          opacity: 1,
          lineCap: "round",
          lineJoin: "round",
          dashArray: null,
          dashOffset: null,
          fill: false,
          fillColor: null,
          fillOpacity: 0.2,
          fillRule: "evenodd",
          interactive: true,
          bubblingMouseEvents: true
        },
        beforeAdd: function(map5) {
          this._renderer = map5.getRenderer(this);
        },
        onAdd: function() {
          this._renderer._initPath(this);
          this._reset();
          this._renderer._addPath(this);
        },
        onRemove: function() {
          this._renderer._removePath(this);
        },
        redraw: function() {
          if (this._map) {
            this._renderer._updatePath(this);
          }
          return this;
        },
        setStyle: function(style2) {
          setOptions(this, style2);
          if (this._renderer) {
            this._renderer._updateStyle(this);
            if (this.options.stroke && style2 && Object.prototype.hasOwnProperty.call(style2, "weight")) {
              this._updateBounds();
            }
          }
          return this;
        },
        bringToFront: function() {
          if (this._renderer) {
            this._renderer._bringToFront(this);
          }
          return this;
        },
        bringToBack: function() {
          if (this._renderer) {
            this._renderer._bringToBack(this);
          }
          return this;
        },
        getElement: function() {
          return this._path;
        },
        _reset: function() {
          this._project();
          this._update();
        },
        _clickTolerance: function() {
          return (this.options.stroke ? this.options.weight / 2 : 0) + (this._renderer.options.tolerance || 0);
        }
      });
      var CircleMarker = Path3.extend({
        options: {
          fill: true,
          radius: 10
        },
        initialize: function(latlng, options) {
          setOptions(this, options);
          this._latlng = toLatLng(latlng);
          this._radius = this.options.radius;
        },
        setLatLng: function(latlng) {
          var oldLatLng = this._latlng;
          this._latlng = toLatLng(latlng);
          this.redraw();
          return this.fire("move", { oldLatLng, latlng: this._latlng });
        },
        getLatLng: function() {
          return this._latlng;
        },
        setRadius: function(radius) {
          this.options.radius = this._radius = radius;
          return this.redraw();
        },
        getRadius: function() {
          return this._radius;
        },
        setStyle: function(options) {
          var radius = options && options.radius || this._radius;
          Path3.prototype.setStyle.call(this, options);
          this.setRadius(radius);
          return this;
        },
        _project: function() {
          this._point = this._map.latLngToLayerPoint(this._latlng);
          this._updateBounds();
        },
        _updateBounds: function() {
          var r = this._radius, r2 = this._radiusY || r, w = this._clickTolerance(), p = [r + w, r2 + w];
          this._pxBounds = new Bounds(this._point.subtract(p), this._point.add(p));
        },
        _update: function() {
          if (this._map) {
            this._updatePath();
          }
        },
        _updatePath: function() {
          this._renderer._updateCircle(this);
        },
        _empty: function() {
          return this._radius && !this._renderer._bounds.intersects(this._pxBounds);
        },
        _containsPoint: function(p) {
          return p.distanceTo(this._point) <= this._radius + this._clickTolerance();
        }
      });
      function circleMarker2(latlng, options) {
        return new CircleMarker(latlng, options);
      }
      var Circle = CircleMarker.extend({
        initialize: function(latlng, options, legacyOptions) {
          if (typeof options === "number") {
            options = extend2({}, legacyOptions, { radius: options });
          }
          setOptions(this, options);
          this._latlng = toLatLng(latlng);
          if (isNaN(this.options.radius)) {
            throw new Error("Circle radius cannot be NaN");
          }
          this._mRadius = this.options.radius;
        },
        setRadius: function(radius) {
          this._mRadius = radius;
          return this.redraw();
        },
        getRadius: function() {
          return this._mRadius;
        },
        getBounds: function() {
          var half = [this._radius, this._radiusY || this._radius];
          return new LatLngBounds(
            this._map.layerPointToLatLng(this._point.subtract(half)),
            this._map.layerPointToLatLng(this._point.add(half))
          );
        },
        setStyle: Path3.prototype.setStyle,
        _project: function() {
          var lng = this._latlng.lng, lat = this._latlng.lat, map5 = this._map, crs = map5.options.crs;
          if (crs.distance === Earth.distance) {
            var d = Math.PI / 180, latR = this._mRadius / Earth.R / d, top2 = map5.project([lat + latR, lng]), bottom2 = map5.project([lat - latR, lng]), p = top2.add(bottom2).divideBy(2), lat2 = map5.unproject(p).lat, lngR = Math.acos((Math.cos(latR * d) - Math.sin(lat * d) * Math.sin(lat2 * d)) / (Math.cos(lat * d) * Math.cos(lat2 * d))) / d;
            if (isNaN(lngR) || lngR === 0) {
              lngR = latR / Math.cos(Math.PI / 180 * lat);
            }
            this._point = p.subtract(map5.getPixelOrigin());
            this._radius = isNaN(lngR) ? 0 : p.x - map5.project([lat2, lng - lngR]).x;
            this._radiusY = p.y - top2.y;
          } else {
            var latlng2 = crs.unproject(crs.project(this._latlng).subtract([this._mRadius, 0]));
            this._point = map5.latLngToLayerPoint(this._latlng);
            this._radius = this._point.x - map5.latLngToLayerPoint(latlng2).x;
          }
          this._updateBounds();
        }
      });
      function circle3(latlng, options, legacyOptions) {
        return new Circle(latlng, options, legacyOptions);
      }
      var Polyline = Path3.extend({
        options: {
          smoothFactor: 1,
          noClip: false
        },
        initialize: function(latlngs, options) {
          setOptions(this, options);
          this._setLatLngs(latlngs);
        },
        getLatLngs: function() {
          return this._latlngs;
        },
        setLatLngs: function(latlngs) {
          this._setLatLngs(latlngs);
          return this.redraw();
        },
        isEmpty: function() {
          return !this._latlngs.length;
        },
        closestLayerPoint: function(p) {
          var minDistance = Infinity, minPoint = null, closest = _sqClosestPointOnSegment, p1, p2;
          for (var j = 0, jLen = this._parts.length; j < jLen; j++) {
            var points = this._parts[j];
            for (var i = 1, len = points.length; i < len; i++) {
              p1 = points[i - 1];
              p2 = points[i];
              var sqDist = closest(p, p1, p2, true);
              if (sqDist < minDistance) {
                minDistance = sqDist;
                minPoint = closest(p, p1, p2);
              }
            }
          }
          if (minPoint) {
            minPoint.distance = Math.sqrt(minDistance);
          }
          return minPoint;
        },
        getCenter: function() {
          if (!this._map) {
            throw new Error("Must add layer to map before using getCenter()");
          }
          var i, halfDist, segDist, dist2, p1, p2, ratio, points = this._rings[0], len = points.length;
          if (!len) {
            return null;
          }
          for (i = 0, halfDist = 0; i < len - 1; i++) {
            halfDist += points[i].distanceTo(points[i + 1]) / 2;
          }
          if (halfDist === 0) {
            return this._map.layerPointToLatLng(points[0]);
          }
          for (i = 0, dist2 = 0; i < len - 1; i++) {
            p1 = points[i];
            p2 = points[i + 1];
            segDist = p1.distanceTo(p2);
            dist2 += segDist;
            if (dist2 > halfDist) {
              ratio = (dist2 - halfDist) / segDist;
              return this._map.layerPointToLatLng([
                p2.x - ratio * (p2.x - p1.x),
                p2.y - ratio * (p2.y - p1.y)
              ]);
            }
          }
        },
        getBounds: function() {
          return this._bounds;
        },
        addLatLng: function(latlng, latlngs) {
          latlngs = latlngs || this._defaultShape();
          latlng = toLatLng(latlng);
          latlngs.push(latlng);
          this._bounds.extend(latlng);
          return this.redraw();
        },
        _setLatLngs: function(latlngs) {
          this._bounds = new LatLngBounds();
          this._latlngs = this._convertLatLngs(latlngs);
        },
        _defaultShape: function() {
          return isFlat(this._latlngs) ? this._latlngs : this._latlngs[0];
        },
        _convertLatLngs: function(latlngs) {
          var result = [], flat = isFlat(latlngs);
          for (var i = 0, len = latlngs.length; i < len; i++) {
            if (flat) {
              result[i] = toLatLng(latlngs[i]);
              this._bounds.extend(result[i]);
            } else {
              result[i] = this._convertLatLngs(latlngs[i]);
            }
          }
          return result;
        },
        _project: function() {
          var pxBounds = new Bounds();
          this._rings = [];
          this._projectLatlngs(this._latlngs, this._rings, pxBounds);
          if (this._bounds.isValid() && pxBounds.isValid()) {
            this._rawPxBounds = pxBounds;
            this._updateBounds();
          }
        },
        _updateBounds: function() {
          var w = this._clickTolerance(), p = new Point(w, w);
          if (!this._rawPxBounds) {
            return;
          }
          this._pxBounds = new Bounds([
            this._rawPxBounds.min.subtract(p),
            this._rawPxBounds.max.add(p)
          ]);
        },
        _projectLatlngs: function(latlngs, result, projectedBounds) {
          var flat = latlngs[0] instanceof LatLng, len = latlngs.length, i, ring;
          if (flat) {
            ring = [];
            for (i = 0; i < len; i++) {
              ring[i] = this._map.latLngToLayerPoint(latlngs[i]);
              projectedBounds.extend(ring[i]);
            }
            result.push(ring);
          } else {
            for (i = 0; i < len; i++) {
              this._projectLatlngs(latlngs[i], result, projectedBounds);
            }
          }
        },
        _clipPoints: function() {
          var bounds = this._renderer._bounds;
          this._parts = [];
          if (!this._pxBounds || !this._pxBounds.intersects(bounds)) {
            return;
          }
          if (this.options.noClip) {
            this._parts = this._rings;
            return;
          }
          var parts = this._parts, i, j, k2, len, len2, segment, points;
          for (i = 0, k2 = 0, len = this._rings.length; i < len; i++) {
            points = this._rings[i];
            for (j = 0, len2 = points.length; j < len2 - 1; j++) {
              segment = clipSegment(points[j], points[j + 1], bounds, j, true);
              if (!segment) {
                continue;
              }
              parts[k2] = parts[k2] || [];
              parts[k2].push(segment[0]);
              if (segment[1] !== points[j + 1] || j === len2 - 2) {
                parts[k2].push(segment[1]);
                k2++;
              }
            }
          }
        },
        _simplifyPoints: function() {
          var parts = this._parts, tolerance = this.options.smoothFactor;
          for (var i = 0, len = parts.length; i < len; i++) {
            parts[i] = simplify(parts[i], tolerance);
          }
        },
        _update: function() {
          if (!this._map) {
            return;
          }
          this._clipPoints();
          this._simplifyPoints();
          this._updatePath();
        },
        _updatePath: function() {
          this._renderer._updatePoly(this);
        },
        _containsPoint: function(p, closed) {
          var i, j, k2, len, len2, part, w = this._clickTolerance();
          if (!this._pxBounds || !this._pxBounds.contains(p)) {
            return false;
          }
          for (i = 0, len = this._parts.length; i < len; i++) {
            part = this._parts[i];
            for (j = 0, len2 = part.length, k2 = len2 - 1; j < len2; k2 = j++) {
              if (!closed && j === 0) {
                continue;
              }
              if (pointToSegmentDistance(p, part[k2], part[j]) <= w) {
                return true;
              }
            }
          }
          return false;
        }
      });
      function polyline(latlngs, options) {
        return new Polyline(latlngs, options);
      }
      Polyline._flat = _flat;
      var Polygon2 = Polyline.extend({
        options: {
          fill: true
        },
        isEmpty: function() {
          return !this._latlngs.length || !this._latlngs[0].length;
        },
        getCenter: function() {
          if (!this._map) {
            throw new Error("Must add layer to map before using getCenter()");
          }
          var i, j, p1, p2, f, area, x4, y4, center2, points = this._rings[0], len = points.length;
          if (!len) {
            return null;
          }
          area = x4 = y4 = 0;
          for (i = 0, j = len - 1; i < len; j = i++) {
            p1 = points[i];
            p2 = points[j];
            f = p1.y * p2.x - p2.y * p1.x;
            x4 += (p1.x + p2.x) * f;
            y4 += (p1.y + p2.y) * f;
            area += f * 3;
          }
          if (area === 0) {
            center2 = points[0];
          } else {
            center2 = [x4 / area, y4 / area];
          }
          return this._map.layerPointToLatLng(center2);
        },
        _convertLatLngs: function(latlngs) {
          var result = Polyline.prototype._convertLatLngs.call(this, latlngs), len = result.length;
          if (len >= 2 && result[0] instanceof LatLng && result[0].equals(result[len - 1])) {
            result.pop();
          }
          return result;
        },
        _setLatLngs: function(latlngs) {
          Polyline.prototype._setLatLngs.call(this, latlngs);
          if (isFlat(this._latlngs)) {
            this._latlngs = [this._latlngs];
          }
        },
        _defaultShape: function() {
          return isFlat(this._latlngs[0]) ? this._latlngs[0] : this._latlngs[0][0];
        },
        _clipPoints: function() {
          var bounds = this._renderer._bounds, w = this.options.weight, p = new Point(w, w);
          bounds = new Bounds(bounds.min.subtract(p), bounds.max.add(p));
          this._parts = [];
          if (!this._pxBounds || !this._pxBounds.intersects(bounds)) {
            return;
          }
          if (this.options.noClip) {
            this._parts = this._rings;
            return;
          }
          for (var i = 0, len = this._rings.length, clipped; i < len; i++) {
            clipped = clipPolygon(this._rings[i], bounds, true);
            if (clipped.length) {
              this._parts.push(clipped);
            }
          }
        },
        _updatePath: function() {
          this._renderer._updatePoly(this, true);
        },
        _containsPoint: function(p) {
          var inside = false, part, p1, p2, i, j, k2, len, len2;
          if (!this._pxBounds || !this._pxBounds.contains(p)) {
            return false;
          }
          for (i = 0, len = this._parts.length; i < len; i++) {
            part = this._parts[i];
            for (j = 0, len2 = part.length, k2 = len2 - 1; j < len2; k2 = j++) {
              p1 = part[j];
              p2 = part[k2];
              if (p1.y > p.y !== p2.y > p.y && p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x) {
                inside = !inside;
              }
            }
          }
          return inside || Polyline.prototype._containsPoint.call(this, p, true);
        }
      });
      function polygon(latlngs, options) {
        return new Polygon2(latlngs, options);
      }
      var GeoJSON = FeatureGroup.extend({
        initialize: function(geojson, options) {
          setOptions(this, options);
          this._layers = {};
          if (geojson) {
            this.addData(geojson);
          }
        },
        addData: function(geojson) {
          var features = isArray(geojson) ? geojson : geojson.features, i, len, feature;
          if (features) {
            for (i = 0, len = features.length; i < len; i++) {
              feature = features[i];
              if (feature.geometries || feature.geometry || feature.features || feature.coordinates) {
                this.addData(feature);
              }
            }
            return this;
          }
          var options = this.options;
          if (options.filter && !options.filter(geojson)) {
            return this;
          }
          var layer = geometryToLayer(geojson, options);
          if (!layer) {
            return this;
          }
          layer.feature = asFeature(geojson);
          layer.defaultOptions = layer.options;
          this.resetStyle(layer);
          if (options.onEachFeature) {
            options.onEachFeature(geojson, layer);
          }
          return this.addLayer(layer);
        },
        resetStyle: function(layer) {
          if (layer === void 0) {
            return this.eachLayer(this.resetStyle, this);
          }
          layer.options = extend2({}, layer.defaultOptions);
          this._setLayerStyle(layer, this.options.style);
          return this;
        },
        setStyle: function(style2) {
          return this.eachLayer(function(layer) {
            this._setLayerStyle(layer, style2);
          }, this);
        },
        _setLayerStyle: function(layer, style2) {
          if (layer.setStyle) {
            if (typeof style2 === "function") {
              style2 = style2(layer.feature);
            }
            layer.setStyle(style2);
          }
        }
      });
      function geometryToLayer(geojson, options) {
        var geometry = geojson.type === "Feature" ? geojson.geometry : geojson, coords = geometry ? geometry.coordinates : null, layers2 = [], pointToLayer = options && options.pointToLayer, _coordsToLatLng = options && options.coordsToLatLng || coordsToLatLng, latlng, latlngs, i, len;
        if (!coords && !geometry) {
          return null;
        }
        switch (geometry.type) {
          case "Point":
            latlng = _coordsToLatLng(coords);
            return _pointToLayer(pointToLayer, geojson, latlng, options);
          case "MultiPoint":
            for (i = 0, len = coords.length; i < len; i++) {
              latlng = _coordsToLatLng(coords[i]);
              layers2.push(_pointToLayer(pointToLayer, geojson, latlng, options));
            }
            return new FeatureGroup(layers2);
          case "LineString":
          case "MultiLineString":
            latlngs = coordsToLatLngs(coords, geometry.type === "LineString" ? 0 : 1, _coordsToLatLng);
            return new Polyline(latlngs, options);
          case "Polygon":
          case "MultiPolygon":
            latlngs = coordsToLatLngs(coords, geometry.type === "Polygon" ? 1 : 2, _coordsToLatLng);
            return new Polygon2(latlngs, options);
          case "GeometryCollection":
            for (i = 0, len = geometry.geometries.length; i < len; i++) {
              var layer = geometryToLayer({
                geometry: geometry.geometries[i],
                type: "Feature",
                properties: geojson.properties
              }, options);
              if (layer) {
                layers2.push(layer);
              }
            }
            return new FeatureGroup(layers2);
          default:
            throw new Error("Invalid GeoJSON object.");
        }
      }
      function _pointToLayer(pointToLayerFn, geojson, latlng, options) {
        return pointToLayerFn ? pointToLayerFn(geojson, latlng) : new Marker(latlng, options && options.markersInheritOptions && options);
      }
      function coordsToLatLng(coords) {
        return new LatLng(coords[1], coords[0], coords[2]);
      }
      function coordsToLatLngs(coords, levelsDeep, _coordsToLatLng) {
        var latlngs = [];
        for (var i = 0, len = coords.length, latlng; i < len; i++) {
          latlng = levelsDeep ? coordsToLatLngs(coords[i], levelsDeep - 1, _coordsToLatLng) : (_coordsToLatLng || coordsToLatLng)(coords[i]);
          latlngs.push(latlng);
        }
        return latlngs;
      }
      function latLngToCoords(latlng, precision) {
        latlng = toLatLng(latlng);
        return latlng.alt !== void 0 ? [formatNum(latlng.lng, precision), formatNum(latlng.lat, precision), formatNum(latlng.alt, precision)] : [formatNum(latlng.lng, precision), formatNum(latlng.lat, precision)];
      }
      function latLngsToCoords(latlngs, levelsDeep, closed, precision) {
        var coords = [];
        for (var i = 0, len = latlngs.length; i < len; i++) {
          coords.push(levelsDeep ? latLngsToCoords(latlngs[i], levelsDeep - 1, closed, precision) : latLngToCoords(latlngs[i], precision));
        }
        if (!levelsDeep && closed) {
          coords.push(coords[0]);
        }
        return coords;
      }
      function getFeature(layer, newGeometry) {
        return layer.feature ? extend2({}, layer.feature, { geometry: newGeometry }) : asFeature(newGeometry);
      }
      function asFeature(geojson) {
        if (geojson.type === "Feature" || geojson.type === "FeatureCollection") {
          return geojson;
        }
        return {
          type: "Feature",
          properties: {},
          geometry: geojson
        };
      }
      var PointToGeoJSON = {
        toGeoJSON: function(precision) {
          return getFeature(this, {
            type: "Point",
            coordinates: latLngToCoords(this.getLatLng(), precision)
          });
        }
      };
      Marker.include(PointToGeoJSON);
      Circle.include(PointToGeoJSON);
      CircleMarker.include(PointToGeoJSON);
      Polyline.include({
        toGeoJSON: function(precision) {
          var multi = !isFlat(this._latlngs);
          var coords = latLngsToCoords(this._latlngs, multi ? 1 : 0, false, precision);
          return getFeature(this, {
            type: (multi ? "Multi" : "") + "LineString",
            coordinates: coords
          });
        }
      });
      Polygon2.include({
        toGeoJSON: function(precision) {
          var holes = !isFlat(this._latlngs), multi = holes && !isFlat(this._latlngs[0]);
          var coords = latLngsToCoords(this._latlngs, multi ? 2 : holes ? 1 : 0, true, precision);
          if (!holes) {
            coords = [coords];
          }
          return getFeature(this, {
            type: (multi ? "Multi" : "") + "Polygon",
            coordinates: coords
          });
        }
      });
      LayerGroup.include({
        toMultiPoint: function(precision) {
          var coords = [];
          this.eachLayer(function(layer) {
            coords.push(layer.toGeoJSON(precision).geometry.coordinates);
          });
          return getFeature(this, {
            type: "MultiPoint",
            coordinates: coords
          });
        },
        toGeoJSON: function(precision) {
          var type2 = this.feature && this.feature.geometry && this.feature.geometry.type;
          if (type2 === "MultiPoint") {
            return this.toMultiPoint(precision);
          }
          var isGeometryCollection = type2 === "GeometryCollection", jsons = [];
          this.eachLayer(function(layer) {
            if (layer.toGeoJSON) {
              var json = layer.toGeoJSON(precision);
              if (isGeometryCollection) {
                jsons.push(json.geometry);
              } else {
                var feature = asFeature(json);
                if (feature.type === "FeatureCollection") {
                  jsons.push.apply(jsons, feature.features);
                } else {
                  jsons.push(feature);
                }
              }
            }
          });
          if (isGeometryCollection) {
            return getFeature(this, {
              geometries: jsons,
              type: "GeometryCollection"
            });
          }
          return {
            type: "FeatureCollection",
            features: jsons
          };
        }
      });
      function geoJSON(geojson, options) {
        return new GeoJSON(geojson, options);
      }
      var geoJson = geoJSON;
      var ImageOverlay = Layer.extend({
        options: {
          opacity: 1,
          alt: "",
          interactive: false,
          crossOrigin: false,
          errorOverlayUrl: "",
          zIndex: 1,
          className: ""
        },
        initialize: function(url, bounds, options) {
          this._url = url;
          this._bounds = toLatLngBounds(bounds);
          setOptions(this, options);
        },
        onAdd: function() {
          if (!this._image) {
            this._initImage();
            if (this.options.opacity < 1) {
              this._updateOpacity();
            }
          }
          if (this.options.interactive) {
            addClass(this._image, "leaflet-interactive");
            this.addInteractiveTarget(this._image);
          }
          this.getPane().appendChild(this._image);
          this._reset();
        },
        onRemove: function() {
          remove2(this._image);
          if (this.options.interactive) {
            this.removeInteractiveTarget(this._image);
          }
        },
        setOpacity: function(opacity) {
          this.options.opacity = opacity;
          if (this._image) {
            this._updateOpacity();
          }
          return this;
        },
        setStyle: function(styleOpts) {
          if (styleOpts.opacity) {
            this.setOpacity(styleOpts.opacity);
          }
          return this;
        },
        bringToFront: function() {
          if (this._map) {
            toFront(this._image);
          }
          return this;
        },
        bringToBack: function() {
          if (this._map) {
            toBack(this._image);
          }
          return this;
        },
        setUrl: function(url) {
          this._url = url;
          if (this._image) {
            this._image.src = url;
          }
          return this;
        },
        setBounds: function(bounds) {
          this._bounds = toLatLngBounds(bounds);
          if (this._map) {
            this._reset();
          }
          return this;
        },
        getEvents: function() {
          var events = {
            zoom: this._reset,
            viewreset: this._reset
          };
          if (this._zoomAnimated) {
            events.zoomanim = this._animateZoom;
          }
          return events;
        },
        setZIndex: function(value) {
          this.options.zIndex = value;
          this._updateZIndex();
          return this;
        },
        getBounds: function() {
          return this._bounds;
        },
        getElement: function() {
          return this._image;
        },
        _initImage: function() {
          var wasElementSupplied = this._url.tagName === "IMG";
          var img = this._image = wasElementSupplied ? this._url : create$1("img");
          addClass(img, "leaflet-image-layer");
          if (this._zoomAnimated) {
            addClass(img, "leaflet-zoom-animated");
          }
          if (this.options.className) {
            addClass(img, this.options.className);
          }
          img.onselectstart = falseFn;
          img.onmousemove = falseFn;
          img.onload = bind(this.fire, this, "load");
          img.onerror = bind(this._overlayOnError, this, "error");
          if (this.options.crossOrigin || this.options.crossOrigin === "") {
            img.crossOrigin = this.options.crossOrigin === true ? "" : this.options.crossOrigin;
          }
          if (this.options.zIndex) {
            this._updateZIndex();
          }
          if (wasElementSupplied) {
            this._url = img.src;
            return;
          }
          img.src = this._url;
          img.alt = this.options.alt;
        },
        _animateZoom: function(e) {
          var scale2 = this._map.getZoomScale(e.zoom), offset2 = this._map._latLngBoundsToNewLayerBounds(this._bounds, e.zoom, e.center).min;
          setTransform(this._image, offset2, scale2);
        },
        _reset: function() {
          var image = this._image, bounds = new Bounds(
            this._map.latLngToLayerPoint(this._bounds.getNorthWest()),
            this._map.latLngToLayerPoint(this._bounds.getSouthEast())
          ), size = bounds.getSize();
          setPosition(image, bounds.min);
          image.style.width = size.x + "px";
          image.style.height = size.y + "px";
        },
        _updateOpacity: function() {
          setOpacity(this._image, this.options.opacity);
        },
        _updateZIndex: function() {
          if (this._image && this.options.zIndex !== void 0 && this.options.zIndex !== null) {
            this._image.style.zIndex = this.options.zIndex;
          }
        },
        _overlayOnError: function() {
          this.fire("error");
          var errorUrl = this.options.errorOverlayUrl;
          if (errorUrl && this._url !== errorUrl) {
            this._url = errorUrl;
            this._image.src = errorUrl;
          }
        },
        getCenter: function() {
          return this._bounds.getCenter();
        }
      });
      var imageOverlay = function(url, bounds, options) {
        return new ImageOverlay(url, bounds, options);
      };
      var VideoOverlay = ImageOverlay.extend({
        options: {
          autoplay: true,
          loop: true,
          keepAspectRatio: true,
          muted: false,
          playsInline: true
        },
        _initImage: function() {
          var wasElementSupplied = this._url.tagName === "VIDEO";
          var vid = this._image = wasElementSupplied ? this._url : create$1("video");
          addClass(vid, "leaflet-image-layer");
          if (this._zoomAnimated) {
            addClass(vid, "leaflet-zoom-animated");
          }
          if (this.options.className) {
            addClass(vid, this.options.className);
          }
          vid.onselectstart = falseFn;
          vid.onmousemove = falseFn;
          vid.onloadeddata = bind(this.fire, this, "load");
          if (wasElementSupplied) {
            var sourceElements = vid.getElementsByTagName("source");
            var sources = [];
            for (var j = 0; j < sourceElements.length; j++) {
              sources.push(sourceElements[j].src);
            }
            this._url = sourceElements.length > 0 ? sources : [vid.src];
            return;
          }
          if (!isArray(this._url)) {
            this._url = [this._url];
          }
          if (!this.options.keepAspectRatio && Object.prototype.hasOwnProperty.call(vid.style, "objectFit")) {
            vid.style["objectFit"] = "fill";
          }
          vid.autoplay = !!this.options.autoplay;
          vid.loop = !!this.options.loop;
          vid.muted = !!this.options.muted;
          vid.playsInline = !!this.options.playsInline;
          for (var i = 0; i < this._url.length; i++) {
            var source = create$1("source");
            source.src = this._url[i];
            vid.appendChild(source);
          }
        }
      });
      function videoOverlay(video, bounds, options) {
        return new VideoOverlay(video, bounds, options);
      }
      var SVGOverlay = ImageOverlay.extend({
        _initImage: function() {
          var el = this._image = this._url;
          addClass(el, "leaflet-image-layer");
          if (this._zoomAnimated) {
            addClass(el, "leaflet-zoom-animated");
          }
          if (this.options.className) {
            addClass(el, this.options.className);
          }
          el.onselectstart = falseFn;
          el.onmousemove = falseFn;
        }
      });
      function svgOverlay(el, bounds, options) {
        return new SVGOverlay(el, bounds, options);
      }
      var DivOverlay = Layer.extend({
        options: {
          interactive: false,
          offset: [0, 0],
          className: "",
          pane: void 0
        },
        initialize: function(options, source) {
          setOptions(this, options);
          this._source = source;
        },
        openOn: function(map5) {
          map5 = arguments.length ? map5 : this._source._map;
          if (!map5.hasLayer(this)) {
            map5.addLayer(this);
          }
          return this;
        },
        close: function() {
          if (this._map) {
            this._map.removeLayer(this);
          }
          return this;
        },
        toggle: function(layer) {
          if (this._map) {
            this.close();
          } else {
            if (arguments.length) {
              this._source = layer;
            } else {
              layer = this._source;
            }
            this._prepareOpen();
            this.openOn(layer._map);
          }
          return this;
        },
        onAdd: function(map5) {
          this._zoomAnimated = map5._zoomAnimated;
          if (!this._container) {
            this._initLayout();
          }
          if (map5._fadeAnimated) {
            setOpacity(this._container, 0);
          }
          clearTimeout(this._removeTimeout);
          this.getPane().appendChild(this._container);
          this.update();
          if (map5._fadeAnimated) {
            setOpacity(this._container, 1);
          }
          this.bringToFront();
          if (this.options.interactive) {
            addClass(this._container, "leaflet-interactive");
            this.addInteractiveTarget(this._container);
          }
        },
        onRemove: function(map5) {
          if (map5._fadeAnimated) {
            setOpacity(this._container, 0);
            this._removeTimeout = setTimeout(bind(remove2, void 0, this._container), 200);
          } else {
            remove2(this._container);
          }
          if (this.options.interactive) {
            removeClass(this._container, "leaflet-interactive");
            this.removeInteractiveTarget(this._container);
          }
        },
        getLatLng: function() {
          return this._latlng;
        },
        setLatLng: function(latlng) {
          this._latlng = toLatLng(latlng);
          if (this._map) {
            this._updatePosition();
            this._adjustPan();
          }
          return this;
        },
        getContent: function() {
          return this._content;
        },
        setContent: function(content) {
          this._content = content;
          this.update();
          return this;
        },
        getElement: function() {
          return this._container;
        },
        update: function() {
          if (!this._map) {
            return;
          }
          this._container.style.visibility = "hidden";
          this._updateContent();
          this._updateLayout();
          this._updatePosition();
          this._container.style.visibility = "";
          this._adjustPan();
        },
        getEvents: function() {
          var events = {
            zoom: this._updatePosition,
            viewreset: this._updatePosition
          };
          if (this._zoomAnimated) {
            events.zoomanim = this._animateZoom;
          }
          return events;
        },
        isOpen: function() {
          return !!this._map && this._map.hasLayer(this);
        },
        bringToFront: function() {
          if (this._map) {
            toFront(this._container);
          }
          return this;
        },
        bringToBack: function() {
          if (this._map) {
            toBack(this._container);
          }
          return this;
        },
        _prepareOpen: function(latlng) {
          var source = this._source;
          if (!source._map) {
            return false;
          }
          if (source instanceof FeatureGroup) {
            source = null;
            var layers2 = this._source._layers;
            for (var id2 in layers2) {
              if (layers2[id2]._map) {
                source = layers2[id2];
                break;
              }
            }
            if (!source) {
              return false;
            }
            this._source = source;
          }
          if (!latlng) {
            if (source.getCenter) {
              latlng = source.getCenter();
            } else if (source.getLatLng) {
              latlng = source.getLatLng();
            } else if (source.getBounds) {
              latlng = source.getBounds().getCenter();
            } else {
              throw new Error("Unable to get source layer LatLng.");
            }
          }
          this.setLatLng(latlng);
          if (this._map) {
            this.update();
          }
          return true;
        },
        _updateContent: function() {
          if (!this._content) {
            return;
          }
          var node = this._contentNode;
          var content = typeof this._content === "function" ? this._content(this._source || this) : this._content;
          if (typeof content === "string") {
            node.innerHTML = content;
          } else {
            while (node.hasChildNodes()) {
              node.removeChild(node.firstChild);
            }
            node.appendChild(content);
          }
          this.fire("contentupdate");
        },
        _updatePosition: function() {
          if (!this._map) {
            return;
          }
          var pos = this._map.latLngToLayerPoint(this._latlng), offset2 = toPoint(this.options.offset), anchor = this._getAnchor();
          if (this._zoomAnimated) {
            setPosition(this._container, pos.add(anchor));
          } else {
            offset2 = offset2.add(pos).add(anchor);
          }
          var bottom2 = this._containerBottom = -offset2.y, left2 = this._containerLeft = -Math.round(this._containerWidth / 2) + offset2.x;
          this._container.style.bottom = bottom2 + "px";
          this._container.style.left = left2 + "px";
        },
        _getAnchor: function() {
          return [0, 0];
        }
      });
      Map2.include({
        _initOverlay: function(OverlayClass, content, latlng, options) {
          var overlay = content;
          if (!(overlay instanceof OverlayClass)) {
            overlay = new OverlayClass(options).setContent(content);
          }
          if (latlng) {
            overlay.setLatLng(latlng);
          }
          return overlay;
        }
      });
      Layer.include({
        _initOverlay: function(OverlayClass, old, content, options) {
          var overlay = content;
          if (overlay instanceof OverlayClass) {
            setOptions(overlay, options);
            overlay._source = this;
          } else {
            overlay = old && !options ? old : new OverlayClass(options, this);
            overlay.setContent(content);
          }
          return overlay;
        }
      });
      var Popup = DivOverlay.extend({
        options: {
          pane: "popupPane",
          offset: [0, 7],
          maxWidth: 300,
          minWidth: 50,
          maxHeight: null,
          autoPan: true,
          autoPanPaddingTopLeft: null,
          autoPanPaddingBottomRight: null,
          autoPanPadding: [5, 5],
          keepInView: false,
          closeButton: true,
          autoClose: true,
          closeOnEscapeKey: true,
          className: ""
        },
        openOn: function(map5) {
          map5 = arguments.length ? map5 : this._source._map;
          if (!map5.hasLayer(this) && map5._popup && map5._popup.options.autoClose) {
            map5.removeLayer(map5._popup);
          }
          map5._popup = this;
          return DivOverlay.prototype.openOn.call(this, map5);
        },
        onAdd: function(map5) {
          DivOverlay.prototype.onAdd.call(this, map5);
          map5.fire("popupopen", { popup: this });
          if (this._source) {
            this._source.fire("popupopen", { popup: this }, true);
            if (!(this._source instanceof Path3)) {
              this._source.on("preclick", stopPropagation);
            }
          }
        },
        onRemove: function(map5) {
          DivOverlay.prototype.onRemove.call(this, map5);
          map5.fire("popupclose", { popup: this });
          if (this._source) {
            this._source.fire("popupclose", { popup: this }, true);
            if (!(this._source instanceof Path3)) {
              this._source.off("preclick", stopPropagation);
            }
          }
        },
        getEvents: function() {
          var events = DivOverlay.prototype.getEvents.call(this);
          if (this.options.closeOnClick !== void 0 ? this.options.closeOnClick : this._map.options.closePopupOnClick) {
            events.preclick = this.close;
          }
          if (this.options.keepInView) {
            events.moveend = this._adjustPan;
          }
          return events;
        },
        _initLayout: function() {
          var prefix = "leaflet-popup", container = this._container = create$1(
            "div",
            prefix + " " + (this.options.className || "") + " leaflet-zoom-animated"
          );
          var wrapper = this._wrapper = create$1("div", prefix + "-content-wrapper", container);
          this._contentNode = create$1("div", prefix + "-content", wrapper);
          disableClickPropagation(container);
          disableScrollPropagation(this._contentNode);
          on(container, "contextmenu", stopPropagation);
          this._tipContainer = create$1("div", prefix + "-tip-container", container);
          this._tip = create$1("div", prefix + "-tip", this._tipContainer);
          if (this.options.closeButton) {
            var closeButton = this._closeButton = create$1("a", prefix + "-close-button", container);
            closeButton.setAttribute("role", "button");
            closeButton.setAttribute("aria-label", "Close popup");
            closeButton.href = "#close";
            closeButton.innerHTML = '<span aria-hidden="true">&#215;</span>';
            on(closeButton, "click", this.close, this);
          }
        },
        _updateLayout: function() {
          var container = this._contentNode, style2 = container.style;
          style2.width = "";
          style2.whiteSpace = "nowrap";
          var width = container.offsetWidth;
          width = Math.min(width, this.options.maxWidth);
          width = Math.max(width, this.options.minWidth);
          style2.width = width + 1 + "px";
          style2.whiteSpace = "";
          style2.height = "";
          var height = container.offsetHeight, maxHeight = this.options.maxHeight, scrolledClass = "leaflet-popup-scrolled";
          if (maxHeight && height > maxHeight) {
            style2.height = maxHeight + "px";
            addClass(container, scrolledClass);
          } else {
            removeClass(container, scrolledClass);
          }
          this._containerWidth = this._container.offsetWidth;
        },
        _animateZoom: function(e) {
          var pos = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center), anchor = this._getAnchor();
          setPosition(this._container, pos.add(anchor));
        },
        _adjustPan: function(e) {
          if (!this.options.autoPan) {
            return;
          }
          if (this._map._panAnim) {
            this._map._panAnim.stop();
          }
          var map5 = this._map, marginBottom = parseInt(getStyle(this._container, "marginBottom"), 10) || 0, containerHeight = this._container.offsetHeight + marginBottom, containerWidth = this._containerWidth, layerPos = new Point(this._containerLeft, -containerHeight - this._containerBottom);
          layerPos._add(getPosition(this._container));
          var containerPos = map5.layerPointToContainerPoint(layerPos), padding = toPoint(this.options.autoPanPadding), paddingTL = toPoint(this.options.autoPanPaddingTopLeft || padding), paddingBR = toPoint(this.options.autoPanPaddingBottomRight || padding), size = map5.getSize(), dx = 0, dy = 0;
          if (containerPos.x + containerWidth + paddingBR.x > size.x) {
            dx = containerPos.x + containerWidth - size.x + paddingBR.x;
          }
          if (containerPos.x - dx - paddingTL.x < 0) {
            dx = containerPos.x - paddingTL.x;
          }
          if (containerPos.y + containerHeight + paddingBR.y > size.y) {
            dy = containerPos.y + containerHeight - size.y + paddingBR.y;
          }
          if (containerPos.y - dy - paddingTL.y < 0) {
            dy = containerPos.y - paddingTL.y;
          }
          if (dx || dy) {
            map5.fire("autopanstart").panBy([dx, dy], { animate: e && e.type === "moveend" });
          }
        },
        _getAnchor: function() {
          return toPoint(this._source && this._source._getPopupAnchor ? this._source._getPopupAnchor() : [0, 0]);
        }
      });
      var popup = function(options, source) {
        return new Popup(options, source);
      };
      Map2.mergeOptions({
        closePopupOnClick: true
      });
      Map2.include({
        openPopup: function(popup2, latlng, options) {
          this._initOverlay(Popup, popup2, latlng, options).openOn(this);
          return this;
        },
        closePopup: function(popup2) {
          popup2 = arguments.length ? popup2 : this._popup;
          if (popup2) {
            popup2.close();
          }
          return this;
        }
      });
      Layer.include({
        bindPopup: function(content, options) {
          this._popup = this._initOverlay(Popup, this._popup, content, options);
          if (!this._popupHandlersAdded) {
            this.on({
              click: this._openPopup,
              keypress: this._onKeyPress,
              remove: this.closePopup,
              move: this._movePopup
            });
            this._popupHandlersAdded = true;
          }
          return this;
        },
        unbindPopup: function() {
          if (this._popup) {
            this.off({
              click: this._openPopup,
              keypress: this._onKeyPress,
              remove: this.closePopup,
              move: this._movePopup
            });
            this._popupHandlersAdded = false;
            this._popup = null;
          }
          return this;
        },
        openPopup: function(latlng) {
          if (this._popup && this._popup._prepareOpen(latlng)) {
            this._popup.openOn(this._map);
          }
          return this;
        },
        closePopup: function() {
          if (this._popup) {
            this._popup.close();
          }
          return this;
        },
        togglePopup: function() {
          if (this._popup) {
            this._popup.toggle(this);
          }
          return this;
        },
        isPopupOpen: function() {
          return this._popup ? this._popup.isOpen() : false;
        },
        setPopupContent: function(content) {
          if (this._popup) {
            this._popup.setContent(content);
          }
          return this;
        },
        getPopup: function() {
          return this._popup;
        },
        _openPopup: function(e) {
          if (!this._popup || !this._map) {
            return;
          }
          stop(e);
          var target = e.layer || e.target;
          if (this._popup._source === target && !(target instanceof Path3)) {
            if (this._map.hasLayer(this._popup)) {
              this.closePopup();
            } else {
              this.openPopup(e.latlng);
            }
            return;
          }
          this._popup._source = target;
          this.openPopup(e.latlng);
        },
        _movePopup: function(e) {
          this._popup.setLatLng(e.latlng);
        },
        _onKeyPress: function(e) {
          if (e.originalEvent.keyCode === 13) {
            this._openPopup(e);
          }
        }
      });
      var Tooltip = DivOverlay.extend({
        options: {
          pane: "tooltipPane",
          offset: [0, 0],
          direction: "auto",
          permanent: false,
          sticky: false,
          opacity: 0.9
        },
        onAdd: function(map5) {
          DivOverlay.prototype.onAdd.call(this, map5);
          this.setOpacity(this.options.opacity);
          map5.fire("tooltipopen", { tooltip: this });
          if (this._source) {
            this.addEventParent(this._source);
            this._source.fire("tooltipopen", { tooltip: this }, true);
          }
        },
        onRemove: function(map5) {
          DivOverlay.prototype.onRemove.call(this, map5);
          map5.fire("tooltipclose", { tooltip: this });
          if (this._source) {
            this.removeEventParent(this._source);
            this._source.fire("tooltipclose", { tooltip: this }, true);
          }
        },
        getEvents: function() {
          var events = DivOverlay.prototype.getEvents.call(this);
          if (!this.options.permanent) {
            events.preclick = this.close;
          }
          return events;
        },
        _initLayout: function() {
          var prefix = "leaflet-tooltip", className = prefix + " " + (this.options.className || "") + " leaflet-zoom-" + (this._zoomAnimated ? "animated" : "hide");
          this._contentNode = this._container = create$1("div", className);
        },
        _updateLayout: function() {
        },
        _adjustPan: function() {
        },
        _setPosition: function(pos) {
          var subX, subY, map5 = this._map, container = this._container, centerPoint = map5.latLngToContainerPoint(map5.getCenter()), tooltipPoint = map5.layerPointToContainerPoint(pos), direction = this.options.direction, tooltipWidth = container.offsetWidth, tooltipHeight = container.offsetHeight, offset2 = toPoint(this.options.offset), anchor = this._getAnchor();
          if (direction === "top") {
            subX = tooltipWidth / 2;
            subY = tooltipHeight;
          } else if (direction === "bottom") {
            subX = tooltipWidth / 2;
            subY = 0;
          } else if (direction === "center") {
            subX = tooltipWidth / 2;
            subY = tooltipHeight / 2;
          } else if (direction === "right") {
            subX = 0;
            subY = tooltipHeight / 2;
          } else if (direction === "left") {
            subX = tooltipWidth;
            subY = tooltipHeight / 2;
          } else if (tooltipPoint.x < centerPoint.x) {
            direction = "right";
            subX = 0;
            subY = tooltipHeight / 2;
          } else {
            direction = "left";
            subX = tooltipWidth + (offset2.x + anchor.x) * 2;
            subY = tooltipHeight / 2;
          }
          pos = pos.subtract(toPoint(subX, subY, true)).add(offset2).add(anchor);
          removeClass(container, "leaflet-tooltip-right");
          removeClass(container, "leaflet-tooltip-left");
          removeClass(container, "leaflet-tooltip-top");
          removeClass(container, "leaflet-tooltip-bottom");
          addClass(container, "leaflet-tooltip-" + direction);
          setPosition(container, pos);
        },
        _updatePosition: function() {
          var pos = this._map.latLngToLayerPoint(this._latlng);
          this._setPosition(pos);
        },
        setOpacity: function(opacity) {
          this.options.opacity = opacity;
          if (this._container) {
            setOpacity(this._container, opacity);
          }
        },
        _animateZoom: function(e) {
          var pos = this._map._latLngToNewLayerPoint(this._latlng, e.zoom, e.center);
          this._setPosition(pos);
        },
        _getAnchor: function() {
          return toPoint(this._source && this._source._getTooltipAnchor && !this.options.sticky ? this._source._getTooltipAnchor() : [0, 0]);
        }
      });
      var tooltip = function(options, source) {
        return new Tooltip(options, source);
      };
      Map2.include({
        openTooltip: function(tooltip2, latlng, options) {
          this._initOverlay(Tooltip, tooltip2, latlng, options).openOn(this);
          return this;
        },
        closeTooltip: function(tooltip2) {
          tooltip2.close();
          return this;
        }
      });
      Layer.include({
        bindTooltip: function(content, options) {
          if (this._tooltip && this.isTooltipOpen()) {
            this.unbindTooltip();
          }
          this._tooltip = this._initOverlay(Tooltip, this._tooltip, content, options);
          this._initTooltipInteractions();
          if (this._tooltip.options.permanent && this._map && this._map.hasLayer(this)) {
            this.openTooltip();
          }
          return this;
        },
        unbindTooltip: function() {
          if (this._tooltip) {
            this._initTooltipInteractions(true);
            this.closeTooltip();
            this._tooltip = null;
          }
          return this;
        },
        _initTooltipInteractions: function(remove3) {
          if (!remove3 && this._tooltipHandlersAdded) {
            return;
          }
          var onOff = remove3 ? "off" : "on", events = {
            remove: this.closeTooltip,
            move: this._moveTooltip
          };
          if (!this._tooltip.options.permanent) {
            events.mouseover = this._openTooltip;
            events.mouseout = this.closeTooltip;
            events.click = this._openTooltip;
          } else {
            events.add = this._openTooltip;
          }
          if (this._tooltip.options.sticky) {
            events.mousemove = this._moveTooltip;
          }
          this[onOff](events);
          this._tooltipHandlersAdded = !remove3;
        },
        openTooltip: function(latlng) {
          if (this._tooltip && this._tooltip._prepareOpen(latlng)) {
            this._tooltip.openOn(this._map);
          }
          return this;
        },
        closeTooltip: function() {
          if (this._tooltip) {
            return this._tooltip.close();
          }
        },
        toggleTooltip: function() {
          if (this._tooltip) {
            this._tooltip.toggle(this);
          }
          return this;
        },
        isTooltipOpen: function() {
          return this._tooltip.isOpen();
        },
        setTooltipContent: function(content) {
          if (this._tooltip) {
            this._tooltip.setContent(content);
          }
          return this;
        },
        getTooltip: function() {
          return this._tooltip;
        },
        _openTooltip: function(e) {
          if (!this._tooltip || !this._map || this._map.dragging && this._map.dragging.moving()) {
            return;
          }
          this._tooltip._source = e.layer || e.target;
          this.openTooltip(this._tooltip.options.sticky ? e.latlng : void 0);
        },
        _moveTooltip: function(e) {
          var latlng = e.latlng, containerPoint, layerPoint;
          if (this._tooltip.options.sticky && e.originalEvent) {
            containerPoint = this._map.mouseEventToContainerPoint(e.originalEvent);
            layerPoint = this._map.containerPointToLayerPoint(containerPoint);
            latlng = this._map.layerPointToLatLng(layerPoint);
          }
          this._tooltip.setLatLng(latlng);
        }
      });
      var DivIcon = Icon.extend({
        options: {
          iconSize: [12, 12],
          html: false,
          bgPos: null,
          className: "leaflet-div-icon"
        },
        createIcon: function(oldIcon) {
          var div = oldIcon && oldIcon.tagName === "DIV" ? oldIcon : document.createElement("div"), options = this.options;
          if (options.html instanceof Element) {
            empty4(div);
            div.appendChild(options.html);
          } else {
            div.innerHTML = options.html !== false ? options.html : "";
          }
          if (options.bgPos) {
            var bgPos = toPoint(options.bgPos);
            div.style.backgroundPosition = -bgPos.x + "px " + -bgPos.y + "px";
          }
          this._setIconStyles(div, "icon");
          return div;
        },
        createShadow: function() {
          return null;
        }
      });
      function divIcon2(options) {
        return new DivIcon(options);
      }
      Icon.Default = IconDefault;
      var GridLayer = Layer.extend({
        options: {
          tileSize: 256,
          opacity: 1,
          updateWhenIdle: Browser.mobile,
          updateWhenZooming: true,
          updateInterval: 200,
          zIndex: 1,
          bounds: null,
          minZoom: 0,
          maxZoom: void 0,
          maxNativeZoom: void 0,
          minNativeZoom: void 0,
          noWrap: false,
          pane: "tilePane",
          className: "",
          keepBuffer: 2
        },
        initialize: function(options) {
          setOptions(this, options);
        },
        onAdd: function() {
          this._initContainer();
          this._levels = {};
          this._tiles = {};
          this._resetView();
        },
        beforeAdd: function(map5) {
          map5._addZoomLimit(this);
        },
        onRemove: function(map5) {
          this._removeAllTiles();
          remove2(this._container);
          map5._removeZoomLimit(this);
          this._container = null;
          this._tileZoom = void 0;
        },
        bringToFront: function() {
          if (this._map) {
            toFront(this._container);
            this._setAutoZIndex(Math.max);
          }
          return this;
        },
        bringToBack: function() {
          if (this._map) {
            toBack(this._container);
            this._setAutoZIndex(Math.min);
          }
          return this;
        },
        getContainer: function() {
          return this._container;
        },
        setOpacity: function(opacity) {
          this.options.opacity = opacity;
          this._updateOpacity();
          return this;
        },
        setZIndex: function(zIndex) {
          this.options.zIndex = zIndex;
          this._updateZIndex();
          return this;
        },
        isLoading: function() {
          return this._loading;
        },
        redraw: function() {
          if (this._map) {
            this._removeAllTiles();
            var tileZoom = this._clampZoom(this._map.getZoom());
            if (tileZoom !== this._tileZoom) {
              this._tileZoom = tileZoom;
              this._updateLevels();
            }
            this._update();
          }
          return this;
        },
        getEvents: function() {
          var events = {
            viewprereset: this._invalidateAll,
            viewreset: this._resetView,
            zoom: this._resetView,
            moveend: this._onMoveEnd
          };
          if (!this.options.updateWhenIdle) {
            if (!this._onMove) {
              this._onMove = throttle(this._onMoveEnd, this.options.updateInterval, this);
            }
            events.move = this._onMove;
          }
          if (this._zoomAnimated) {
            events.zoomanim = this._animateZoom;
          }
          return events;
        },
        createTile: function() {
          return document.createElement("div");
        },
        getTileSize: function() {
          var s3 = this.options.tileSize;
          return s3 instanceof Point ? s3 : new Point(s3, s3);
        },
        _updateZIndex: function() {
          if (this._container && this.options.zIndex !== void 0 && this.options.zIndex !== null) {
            this._container.style.zIndex = this.options.zIndex;
          }
        },
        _setAutoZIndex: function(compare) {
          var layers2 = this.getPane().children, edgeZIndex = -compare(-Infinity, Infinity);
          for (var i = 0, len = layers2.length, zIndex; i < len; i++) {
            zIndex = layers2[i].style.zIndex;
            if (layers2[i] !== this._container && zIndex) {
              edgeZIndex = compare(edgeZIndex, +zIndex);
            }
          }
          if (isFinite(edgeZIndex)) {
            this.options.zIndex = edgeZIndex + compare(-1, 1);
            this._updateZIndex();
          }
        },
        _updateOpacity: function() {
          if (!this._map) {
            return;
          }
          if (Browser.ielt9) {
            return;
          }
          setOpacity(this._container, this.options.opacity);
          var now3 = +new Date(), nextFrame = false, willPrune = false;
          for (var key in this._tiles) {
            var tile = this._tiles[key];
            if (!tile.current || !tile.loaded) {
              continue;
            }
            var fade = Math.min(1, (now3 - tile.loaded) / 200);
            setOpacity(tile.el, fade);
            if (fade < 1) {
              nextFrame = true;
            } else {
              if (tile.active) {
                willPrune = true;
              } else {
                this._onOpaqueTile(tile);
              }
              tile.active = true;
            }
          }
          if (willPrune && !this._noPrune) {
            this._pruneTiles();
          }
          if (nextFrame) {
            cancelAnimFrame(this._fadeFrame);
            this._fadeFrame = requestAnimFrame(this._updateOpacity, this);
          }
        },
        _onOpaqueTile: falseFn,
        _initContainer: function() {
          if (this._container) {
            return;
          }
          this._container = create$1("div", "leaflet-layer " + (this.options.className || ""));
          this._updateZIndex();
          if (this.options.opacity < 1) {
            this._updateOpacity();
          }
          this.getPane().appendChild(this._container);
        },
        _updateLevels: function() {
          var zoom2 = this._tileZoom, maxZoom = this.options.maxZoom;
          if (zoom2 === void 0) {
            return void 0;
          }
          for (var z in this._levels) {
            z = Number(z);
            if (this._levels[z].el.children.length || z === zoom2) {
              this._levels[z].el.style.zIndex = maxZoom - Math.abs(zoom2 - z);
              this._onUpdateLevel(z);
            } else {
              remove2(this._levels[z].el);
              this._removeTilesAtZoom(z);
              this._onRemoveLevel(z);
              delete this._levels[z];
            }
          }
          var level = this._levels[zoom2], map5 = this._map;
          if (!level) {
            level = this._levels[zoom2] = {};
            level.el = create$1("div", "leaflet-tile-container leaflet-zoom-animated", this._container);
            level.el.style.zIndex = maxZoom;
            level.origin = map5.project(map5.unproject(map5.getPixelOrigin()), zoom2).round();
            level.zoom = zoom2;
            this._setZoomTransform(level, map5.getCenter(), map5.getZoom());
            falseFn(level.el.offsetWidth);
            this._onCreateLevel(level);
          }
          this._level = level;
          return level;
        },
        _onUpdateLevel: falseFn,
        _onRemoveLevel: falseFn,
        _onCreateLevel: falseFn,
        _pruneTiles: function() {
          if (!this._map) {
            return;
          }
          var key, tile;
          var zoom2 = this._map.getZoom();
          if (zoom2 > this.options.maxZoom || zoom2 < this.options.minZoom) {
            this._removeAllTiles();
            return;
          }
          for (key in this._tiles) {
            tile = this._tiles[key];
            tile.retain = tile.current;
          }
          for (key in this._tiles) {
            tile = this._tiles[key];
            if (tile.current && !tile.active) {
              var coords = tile.coords;
              if (!this._retainParent(coords.x, coords.y, coords.z, coords.z - 5)) {
                this._retainChildren(coords.x, coords.y, coords.z, coords.z + 2);
              }
            }
          }
          for (key in this._tiles) {
            if (!this._tiles[key].retain) {
              this._removeTile(key);
            }
          }
        },
        _removeTilesAtZoom: function(zoom2) {
          for (var key in this._tiles) {
            if (this._tiles[key].coords.z !== zoom2) {
              continue;
            }
            this._removeTile(key);
          }
        },
        _removeAllTiles: function() {
          for (var key in this._tiles) {
            this._removeTile(key);
          }
        },
        _invalidateAll: function() {
          for (var z in this._levels) {
            remove2(this._levels[z].el);
            this._onRemoveLevel(Number(z));
            delete this._levels[z];
          }
          this._removeAllTiles();
          this._tileZoom = void 0;
        },
        _retainParent: function(x4, y4, z, minZoom) {
          var x22 = Math.floor(x4 / 2), y22 = Math.floor(y4 / 2), z2 = z - 1, coords2 = new Point(+x22, +y22);
          coords2.z = +z2;
          var key = this._tileCoordsToKey(coords2), tile = this._tiles[key];
          if (tile && tile.active) {
            tile.retain = true;
            return true;
          } else if (tile && tile.loaded) {
            tile.retain = true;
          }
          if (z2 > minZoom) {
            return this._retainParent(x22, y22, z2, minZoom);
          }
          return false;
        },
        _retainChildren: function(x4, y4, z, maxZoom) {
          for (var i = 2 * x4; i < 2 * x4 + 2; i++) {
            for (var j = 2 * y4; j < 2 * y4 + 2; j++) {
              var coords = new Point(i, j);
              coords.z = z + 1;
              var key = this._tileCoordsToKey(coords), tile = this._tiles[key];
              if (tile && tile.active) {
                tile.retain = true;
                continue;
              } else if (tile && tile.loaded) {
                tile.retain = true;
              }
              if (z + 1 < maxZoom) {
                this._retainChildren(i, j, z + 1, maxZoom);
              }
            }
          }
        },
        _resetView: function(e) {
          var animating = e && (e.pinch || e.flyTo);
          this._setView(this._map.getCenter(), this._map.getZoom(), animating, animating);
        },
        _animateZoom: function(e) {
          this._setView(e.center, e.zoom, true, e.noUpdate);
        },
        _clampZoom: function(zoom2) {
          var options = this.options;
          if (void 0 !== options.minNativeZoom && zoom2 < options.minNativeZoom) {
            return options.minNativeZoom;
          }
          if (void 0 !== options.maxNativeZoom && options.maxNativeZoom < zoom2) {
            return options.maxNativeZoom;
          }
          return zoom2;
        },
        _setView: function(center2, zoom2, noPrune, noUpdate) {
          var tileZoom = Math.round(zoom2);
          if (this.options.maxZoom !== void 0 && tileZoom > this.options.maxZoom || this.options.minZoom !== void 0 && tileZoom < this.options.minZoom) {
            tileZoom = void 0;
          } else {
            tileZoom = this._clampZoom(tileZoom);
          }
          var tileZoomChanged = this.options.updateWhenZooming && tileZoom !== this._tileZoom;
          if (!noUpdate || tileZoomChanged) {
            this._tileZoom = tileZoom;
            if (this._abortLoading) {
              this._abortLoading();
            }
            this._updateLevels();
            this._resetGrid();
            if (tileZoom !== void 0) {
              this._update(center2);
            }
            if (!noPrune) {
              this._pruneTiles();
            }
            this._noPrune = !!noPrune;
          }
          this._setZoomTransforms(center2, zoom2);
        },
        _setZoomTransforms: function(center2, zoom2) {
          for (var i in this._levels) {
            this._setZoomTransform(this._levels[i], center2, zoom2);
          }
        },
        _setZoomTransform: function(level, center2, zoom2) {
          var scale2 = this._map.getZoomScale(zoom2, level.zoom), translate = level.origin.multiplyBy(scale2).subtract(this._map._getNewPixelOrigin(center2, zoom2)).round();
          if (Browser.any3d) {
            setTransform(level.el, translate, scale2);
          } else {
            setPosition(level.el, translate);
          }
        },
        _resetGrid: function() {
          var map5 = this._map, crs = map5.options.crs, tileSize = this._tileSize = this.getTileSize(), tileZoom = this._tileZoom;
          var bounds = this._map.getPixelWorldBounds(this._tileZoom);
          if (bounds) {
            this._globalTileRange = this._pxBoundsToTileRange(bounds);
          }
          this._wrapX = crs.wrapLng && !this.options.noWrap && [
            Math.floor(map5.project([0, crs.wrapLng[0]], tileZoom).x / tileSize.x),
            Math.ceil(map5.project([0, crs.wrapLng[1]], tileZoom).x / tileSize.y)
          ];
          this._wrapY = crs.wrapLat && !this.options.noWrap && [
            Math.floor(map5.project([crs.wrapLat[0], 0], tileZoom).y / tileSize.x),
            Math.ceil(map5.project([crs.wrapLat[1], 0], tileZoom).y / tileSize.y)
          ];
        },
        _onMoveEnd: function() {
          if (!this._map || this._map._animatingZoom) {
            return;
          }
          this._update();
        },
        _getTiledPixelBounds: function(center2) {
          var map5 = this._map, mapZoom = map5._animatingZoom ? Math.max(map5._animateToZoom, map5.getZoom()) : map5.getZoom(), scale2 = map5.getZoomScale(mapZoom, this._tileZoom), pixelCenter = map5.project(center2, this._tileZoom).floor(), halfSize = map5.getSize().divideBy(scale2 * 2);
          return new Bounds(pixelCenter.subtract(halfSize), pixelCenter.add(halfSize));
        },
        _update: function(center2) {
          var map5 = this._map;
          if (!map5) {
            return;
          }
          var zoom2 = this._clampZoom(map5.getZoom());
          if (center2 === void 0) {
            center2 = map5.getCenter();
          }
          if (this._tileZoom === void 0) {
            return;
          }
          var pixelBounds = this._getTiledPixelBounds(center2), tileRange = this._pxBoundsToTileRange(pixelBounds), tileCenter = tileRange.getCenter(), queue = [], margin = this.options.keepBuffer, noPruneRange = new Bounds(
            tileRange.getBottomLeft().subtract([margin, -margin]),
            tileRange.getTopRight().add([margin, -margin])
          );
          if (!(isFinite(tileRange.min.x) && isFinite(tileRange.min.y) && isFinite(tileRange.max.x) && isFinite(tileRange.max.y))) {
            throw new Error("Attempted to load an infinite number of tiles");
          }
          for (var key in this._tiles) {
            var c5 = this._tiles[key].coords;
            if (c5.z !== this._tileZoom || !noPruneRange.contains(new Point(c5.x, c5.y))) {
              this._tiles[key].current = false;
            }
          }
          if (Math.abs(zoom2 - this._tileZoom) > 1) {
            this._setView(center2, zoom2);
            return;
          }
          for (var j = tileRange.min.y; j <= tileRange.max.y; j++) {
            for (var i = tileRange.min.x; i <= tileRange.max.x; i++) {
              var coords = new Point(i, j);
              coords.z = this._tileZoom;
              if (!this._isValidTile(coords)) {
                continue;
              }
              var tile = this._tiles[this._tileCoordsToKey(coords)];
              if (tile) {
                tile.current = true;
              } else {
                queue.push(coords);
              }
            }
          }
          queue.sort(function(a3, b) {
            return a3.distanceTo(tileCenter) - b.distanceTo(tileCenter);
          });
          if (queue.length !== 0) {
            if (!this._loading) {
              this._loading = true;
              this.fire("loading");
            }
            var fragment = document.createDocumentFragment();
            for (i = 0; i < queue.length; i++) {
              this._addTile(queue[i], fragment);
            }
            this._level.el.appendChild(fragment);
          }
        },
        _isValidTile: function(coords) {
          var crs = this._map.options.crs;
          if (!crs.infinite) {
            var bounds = this._globalTileRange;
            if (!crs.wrapLng && (coords.x < bounds.min.x || coords.x > bounds.max.x) || !crs.wrapLat && (coords.y < bounds.min.y || coords.y > bounds.max.y)) {
              return false;
            }
          }
          if (!this.options.bounds) {
            return true;
          }
          var tileBounds = this._tileCoordsToBounds(coords);
          return toLatLngBounds(this.options.bounds).overlaps(tileBounds);
        },
        _keyToBounds: function(key) {
          return this._tileCoordsToBounds(this._keyToTileCoords(key));
        },
        _tileCoordsToNwSe: function(coords) {
          var map5 = this._map, tileSize = this.getTileSize(), nwPoint = coords.scaleBy(tileSize), sePoint = nwPoint.add(tileSize), nw = map5.unproject(nwPoint, coords.z), se = map5.unproject(sePoint, coords.z);
          return [nw, se];
        },
        _tileCoordsToBounds: function(coords) {
          var bp = this._tileCoordsToNwSe(coords), bounds = new LatLngBounds(bp[0], bp[1]);
          if (!this.options.noWrap) {
            bounds = this._map.wrapLatLngBounds(bounds);
          }
          return bounds;
        },
        _tileCoordsToKey: function(coords) {
          return coords.x + ":" + coords.y + ":" + coords.z;
        },
        _keyToTileCoords: function(key) {
          var k2 = key.split(":"), coords = new Point(+k2[0], +k2[1]);
          coords.z = +k2[2];
          return coords;
        },
        _removeTile: function(key) {
          var tile = this._tiles[key];
          if (!tile) {
            return;
          }
          remove2(tile.el);
          delete this._tiles[key];
          this.fire("tileunload", {
            tile: tile.el,
            coords: this._keyToTileCoords(key)
          });
        },
        _initTile: function(tile) {
          addClass(tile, "leaflet-tile");
          var tileSize = this.getTileSize();
          tile.style.width = tileSize.x + "px";
          tile.style.height = tileSize.y + "px";
          tile.onselectstart = falseFn;
          tile.onmousemove = falseFn;
          if (Browser.ielt9 && this.options.opacity < 1) {
            setOpacity(tile, this.options.opacity);
          }
        },
        _addTile: function(coords, container) {
          var tilePos = this._getTilePos(coords), key = this._tileCoordsToKey(coords);
          var tile = this.createTile(this._wrapCoords(coords), bind(this._tileReady, this, coords));
          this._initTile(tile);
          if (this.createTile.length < 2) {
            requestAnimFrame(bind(this._tileReady, this, coords, null, tile));
          }
          setPosition(tile, tilePos);
          this._tiles[key] = {
            el: tile,
            coords,
            current: true
          };
          container.appendChild(tile);
          this.fire("tileloadstart", {
            tile,
            coords
          });
        },
        _tileReady: function(coords, err, tile) {
          if (err) {
            this.fire("tileerror", {
              error: err,
              tile,
              coords
            });
          }
          var key = this._tileCoordsToKey(coords);
          tile = this._tiles[key];
          if (!tile) {
            return;
          }
          tile.loaded = +new Date();
          if (this._map._fadeAnimated) {
            setOpacity(tile.el, 0);
            cancelAnimFrame(this._fadeFrame);
            this._fadeFrame = requestAnimFrame(this._updateOpacity, this);
          } else {
            tile.active = true;
            this._pruneTiles();
          }
          if (!err) {
            addClass(tile.el, "leaflet-tile-loaded");
            this.fire("tileload", {
              tile: tile.el,
              coords
            });
          }
          if (this._noTilesToLoad()) {
            this._loading = false;
            this.fire("load");
            if (Browser.ielt9 || !this._map._fadeAnimated) {
              requestAnimFrame(this._pruneTiles, this);
            } else {
              setTimeout(bind(this._pruneTiles, this), 250);
            }
          }
        },
        _getTilePos: function(coords) {
          return coords.scaleBy(this.getTileSize()).subtract(this._level.origin);
        },
        _wrapCoords: function(coords) {
          var newCoords = new Point(
            this._wrapX ? wrapNum(coords.x, this._wrapX) : coords.x,
            this._wrapY ? wrapNum(coords.y, this._wrapY) : coords.y
          );
          newCoords.z = coords.z;
          return newCoords;
        },
        _pxBoundsToTileRange: function(bounds) {
          var tileSize = this.getTileSize();
          return new Bounds(
            bounds.min.unscaleBy(tileSize).floor(),
            bounds.max.unscaleBy(tileSize).ceil().subtract([1, 1])
          );
        },
        _noTilesToLoad: function() {
          for (var key in this._tiles) {
            if (!this._tiles[key].loaded) {
              return false;
            }
          }
          return true;
        }
      });
      function gridLayer(options) {
        return new GridLayer(options);
      }
      var TileLayer = GridLayer.extend({
        options: {
          minZoom: 0,
          maxZoom: 18,
          subdomains: "abc",
          errorTileUrl: "",
          zoomOffset: 0,
          tms: false,
          zoomReverse: false,
          detectRetina: false,
          crossOrigin: false,
          referrerPolicy: false
        },
        initialize: function(url, options) {
          this._url = url;
          options = setOptions(this, options);
          if (options.detectRetina && Browser.retina && options.maxZoom > 0) {
            options.tileSize = Math.floor(options.tileSize / 2);
            if (!options.zoomReverse) {
              options.zoomOffset++;
              options.maxZoom--;
            } else {
              options.zoomOffset--;
              options.minZoom++;
            }
            options.minZoom = Math.max(0, options.minZoom);
          }
          if (typeof options.subdomains === "string") {
            options.subdomains = options.subdomains.split("");
          }
          this.on("tileunload", this._onTileRemove);
        },
        setUrl: function(url, noRedraw) {
          if (this._url === url && noRedraw === void 0) {
            noRedraw = true;
          }
          this._url = url;
          if (!noRedraw) {
            this.redraw();
          }
          return this;
        },
        createTile: function(coords, done) {
          var tile = document.createElement("img");
          on(tile, "load", bind(this._tileOnLoad, this, done, tile));
          on(tile, "error", bind(this._tileOnError, this, done, tile));
          if (this.options.crossOrigin || this.options.crossOrigin === "") {
            tile.crossOrigin = this.options.crossOrigin === true ? "" : this.options.crossOrigin;
          }
          if (typeof this.options.referrerPolicy === "string") {
            tile.referrerPolicy = this.options.referrerPolicy;
          }
          tile.alt = "";
          tile.setAttribute("role", "presentation");
          tile.src = this.getTileUrl(coords);
          return tile;
        },
        getTileUrl: function(coords) {
          var data = {
            r: Browser.retina ? "@2x" : "",
            s: this._getSubdomain(coords),
            x: coords.x,
            y: coords.y,
            z: this._getZoomForUrl()
          };
          if (this._map && !this._map.options.crs.infinite) {
            var invertedY = this._globalTileRange.max.y - coords.y;
            if (this.options.tms) {
              data["y"] = invertedY;
            }
            data["-y"] = invertedY;
          }
          return template(this._url, extend2(data, this.options));
        },
        _tileOnLoad: function(done, tile) {
          if (Browser.ielt9) {
            setTimeout(bind(done, this, null, tile), 0);
          } else {
            done(null, tile);
          }
        },
        _tileOnError: function(done, tile, e) {
          var errorUrl = this.options.errorTileUrl;
          if (errorUrl && tile.getAttribute("src") !== errorUrl) {
            tile.src = errorUrl;
          }
          done(e, tile);
        },
        _onTileRemove: function(e) {
          e.tile.onload = null;
        },
        _getZoomForUrl: function() {
          var zoom2 = this._tileZoom, maxZoom = this.options.maxZoom, zoomReverse = this.options.zoomReverse, zoomOffset = this.options.zoomOffset;
          if (zoomReverse) {
            zoom2 = maxZoom - zoom2;
          }
          return zoom2 + zoomOffset;
        },
        _getSubdomain: function(tilePoint) {
          var index4 = Math.abs(tilePoint.x + tilePoint.y) % this.options.subdomains.length;
          return this.options.subdomains[index4];
        },
        _abortLoading: function() {
          var i, tile;
          for (i in this._tiles) {
            if (this._tiles[i].coords.z !== this._tileZoom) {
              tile = this._tiles[i].el;
              tile.onload = falseFn;
              tile.onerror = falseFn;
              if (!tile.complete) {
                tile.src = emptyImageUrl;
                var coords = this._tiles[i].coords;
                remove2(tile);
                delete this._tiles[i];
                this.fire("tileabort", {
                  tile,
                  coords
                });
              }
            }
          }
        },
        _removeTile: function(key) {
          var tile = this._tiles[key];
          if (!tile) {
            return;
          }
          tile.el.setAttribute("src", emptyImageUrl);
          return GridLayer.prototype._removeTile.call(this, key);
        },
        _tileReady: function(coords, err, tile) {
          if (!this._map || tile && tile.getAttribute("src") === emptyImageUrl) {
            return;
          }
          return GridLayer.prototype._tileReady.call(this, coords, err, tile);
        }
      });
      function tileLayer2(url, options) {
        return new TileLayer(url, options);
      }
      var TileLayerWMS = TileLayer.extend({
        defaultWmsParams: {
          service: "WMS",
          request: "GetMap",
          layers: "",
          styles: "",
          format: "image/jpeg",
          transparent: false,
          version: "1.1.1"
        },
        options: {
          crs: null,
          uppercase: false
        },
        initialize: function(url, options) {
          this._url = url;
          var wmsParams = extend2({}, this.defaultWmsParams);
          for (var i in options) {
            if (!(i in this.options)) {
              wmsParams[i] = options[i];
            }
          }
          options = setOptions(this, options);
          var realRetina = options.detectRetina && Browser.retina ? 2 : 1;
          var tileSize = this.getTileSize();
          wmsParams.width = tileSize.x * realRetina;
          wmsParams.height = tileSize.y * realRetina;
          this.wmsParams = wmsParams;
        },
        onAdd: function(map5) {
          this._crs = this.options.crs || map5.options.crs;
          this._wmsVersion = parseFloat(this.wmsParams.version);
          var projectionKey = this._wmsVersion >= 1.3 ? "crs" : "srs";
          this.wmsParams[projectionKey] = this._crs.code;
          TileLayer.prototype.onAdd.call(this, map5);
        },
        getTileUrl: function(coords) {
          var tileBounds = this._tileCoordsToNwSe(coords), crs = this._crs, bounds = toBounds(crs.project(tileBounds[0]), crs.project(tileBounds[1])), min4 = bounds.min, max5 = bounds.max, bbox = (this._wmsVersion >= 1.3 && this._crs === EPSG4326 ? [min4.y, min4.x, max5.y, max5.x] : [min4.x, min4.y, max5.x, max5.y]).join(","), url = TileLayer.prototype.getTileUrl.call(this, coords);
          return url + getParamString(this.wmsParams, url, this.options.uppercase) + (this.options.uppercase ? "&BBOX=" : "&bbox=") + bbox;
        },
        setParams: function(params, noRedraw) {
          extend2(this.wmsParams, params);
          if (!noRedraw) {
            this.redraw();
          }
          return this;
        }
      });
      function tileLayerWMS(url, options) {
        return new TileLayerWMS(url, options);
      }
      TileLayer.WMS = TileLayerWMS;
      tileLayer2.wms = tileLayerWMS;
      var Renderer = Layer.extend({
        options: {
          padding: 0.1
        },
        initialize: function(options) {
          setOptions(this, options);
          stamp(this);
          this._layers = this._layers || {};
        },
        onAdd: function() {
          if (!this._container) {
            this._initContainer();
            if (this._zoomAnimated) {
              addClass(this._container, "leaflet-zoom-animated");
            }
          }
          this.getPane().appendChild(this._container);
          this._update();
          this.on("update", this._updatePaths, this);
        },
        onRemove: function() {
          this.off("update", this._updatePaths, this);
          this._destroyContainer();
        },
        getEvents: function() {
          var events = {
            viewreset: this._reset,
            zoom: this._onZoom,
            moveend: this._update,
            zoomend: this._onZoomEnd
          };
          if (this._zoomAnimated) {
            events.zoomanim = this._onAnimZoom;
          }
          return events;
        },
        _onAnimZoom: function(ev) {
          this._updateTransform(ev.center, ev.zoom);
        },
        _onZoom: function() {
          this._updateTransform(this._map.getCenter(), this._map.getZoom());
        },
        _updateTransform: function(center2, zoom2) {
          var scale2 = this._map.getZoomScale(zoom2, this._zoom), viewHalf = this._map.getSize().multiplyBy(0.5 + this.options.padding), currentCenterPoint = this._map.project(this._center, zoom2), topLeftOffset = viewHalf.multiplyBy(-scale2).add(currentCenterPoint).subtract(this._map._getNewPixelOrigin(center2, zoom2));
          if (Browser.any3d) {
            setTransform(this._container, topLeftOffset, scale2);
          } else {
            setPosition(this._container, topLeftOffset);
          }
        },
        _reset: function() {
          this._update();
          this._updateTransform(this._center, this._zoom);
          for (var id2 in this._layers) {
            this._layers[id2]._reset();
          }
        },
        _onZoomEnd: function() {
          for (var id2 in this._layers) {
            this._layers[id2]._project();
          }
        },
        _updatePaths: function() {
          for (var id2 in this._layers) {
            this._layers[id2]._update();
          }
        },
        _update: function() {
          var p = this.options.padding, size = this._map.getSize(), min4 = this._map.containerPointToLayerPoint(size.multiplyBy(-p)).round();
          this._bounds = new Bounds(min4, min4.add(size.multiplyBy(1 + p * 2)).round());
          this._center = this._map.getCenter();
          this._zoom = this._map.getZoom();
        }
      });
      var Canvas = Renderer.extend({
        options: {
          tolerance: 0
        },
        getEvents: function() {
          var events = Renderer.prototype.getEvents.call(this);
          events.viewprereset = this._onViewPreReset;
          return events;
        },
        _onViewPreReset: function() {
          this._postponeUpdatePaths = true;
        },
        onAdd: function() {
          Renderer.prototype.onAdd.call(this);
          this._draw();
        },
        _initContainer: function() {
          var container = this._container = document.createElement("canvas");
          on(container, "mousemove", this._onMouseMove, this);
          on(container, "click dblclick mousedown mouseup contextmenu", this._onClick, this);
          on(container, "mouseout", this._handleMouseOut, this);
          container["_leaflet_disable_events"] = true;
          this._ctx = container.getContext("2d");
        },
        _destroyContainer: function() {
          cancelAnimFrame(this._redrawRequest);
          delete this._ctx;
          remove2(this._container);
          off(this._container);
          delete this._container;
        },
        _updatePaths: function() {
          if (this._postponeUpdatePaths) {
            return;
          }
          var layer;
          this._redrawBounds = null;
          for (var id2 in this._layers) {
            layer = this._layers[id2];
            layer._update();
          }
          this._redraw();
        },
        _update: function() {
          if (this._map._animatingZoom && this._bounds) {
            return;
          }
          Renderer.prototype._update.call(this);
          var b = this._bounds, container = this._container, size = b.getSize(), m2 = Browser.retina ? 2 : 1;
          setPosition(container, b.min);
          container.width = m2 * size.x;
          container.height = m2 * size.y;
          container.style.width = size.x + "px";
          container.style.height = size.y + "px";
          if (Browser.retina) {
            this._ctx.scale(2, 2);
          }
          this._ctx.translate(-b.min.x, -b.min.y);
          this.fire("update");
        },
        _reset: function() {
          Renderer.prototype._reset.call(this);
          if (this._postponeUpdatePaths) {
            this._postponeUpdatePaths = false;
            this._updatePaths();
          }
        },
        _initPath: function(layer) {
          this._updateDashArray(layer);
          this._layers[stamp(layer)] = layer;
          var order = layer._order = {
            layer,
            prev: this._drawLast,
            next: null
          };
          if (this._drawLast) {
            this._drawLast.next = order;
          }
          this._drawLast = order;
          this._drawFirst = this._drawFirst || this._drawLast;
        },
        _addPath: function(layer) {
          this._requestRedraw(layer);
        },
        _removePath: function(layer) {
          var order = layer._order;
          var next = order.next;
          var prev = order.prev;
          if (next) {
            next.prev = prev;
          } else {
            this._drawLast = prev;
          }
          if (prev) {
            prev.next = next;
          } else {
            this._drawFirst = next;
          }
          delete layer._order;
          delete this._layers[stamp(layer)];
          this._requestRedraw(layer);
        },
        _updatePath: function(layer) {
          this._extendRedrawBounds(layer);
          layer._project();
          layer._update();
          this._requestRedraw(layer);
        },
        _updateStyle: function(layer) {
          this._updateDashArray(layer);
          this._requestRedraw(layer);
        },
        _updateDashArray: function(layer) {
          if (typeof layer.options.dashArray === "string") {
            var parts = layer.options.dashArray.split(/[, ]+/), dashArray = [], dashValue, i;
            for (i = 0; i < parts.length; i++) {
              dashValue = Number(parts[i]);
              if (isNaN(dashValue)) {
                return;
              }
              dashArray.push(dashValue);
            }
            layer.options._dashArray = dashArray;
          } else {
            layer.options._dashArray = layer.options.dashArray;
          }
        },
        _requestRedraw: function(layer) {
          if (!this._map) {
            return;
          }
          this._extendRedrawBounds(layer);
          this._redrawRequest = this._redrawRequest || requestAnimFrame(this._redraw, this);
        },
        _extendRedrawBounds: function(layer) {
          if (layer._pxBounds) {
            var padding = (layer.options.weight || 0) + 1;
            this._redrawBounds = this._redrawBounds || new Bounds();
            this._redrawBounds.extend(layer._pxBounds.min.subtract([padding, padding]));
            this._redrawBounds.extend(layer._pxBounds.max.add([padding, padding]));
          }
        },
        _redraw: function() {
          this._redrawRequest = null;
          if (this._redrawBounds) {
            this._redrawBounds.min._floor();
            this._redrawBounds.max._ceil();
          }
          this._clear();
          this._draw();
          this._redrawBounds = null;
        },
        _clear: function() {
          var bounds = this._redrawBounds;
          if (bounds) {
            var size = bounds.getSize();
            this._ctx.clearRect(bounds.min.x, bounds.min.y, size.x, size.y);
          } else {
            this._ctx.save();
            this._ctx.setTransform(1, 0, 0, 1, 0, 0);
            this._ctx.clearRect(0, 0, this._container.width, this._container.height);
            this._ctx.restore();
          }
        },
        _draw: function() {
          var layer, bounds = this._redrawBounds;
          this._ctx.save();
          if (bounds) {
            var size = bounds.getSize();
            this._ctx.beginPath();
            this._ctx.rect(bounds.min.x, bounds.min.y, size.x, size.y);
            this._ctx.clip();
          }
          this._drawing = true;
          for (var order = this._drawFirst; order; order = order.next) {
            layer = order.layer;
            if (!bounds || layer._pxBounds && layer._pxBounds.intersects(bounds)) {
              layer._updatePath();
            }
          }
          this._drawing = false;
          this._ctx.restore();
        },
        _updatePoly: function(layer, closed) {
          if (!this._drawing) {
            return;
          }
          var i, j, len2, p, parts = layer._parts, len = parts.length, ctx = this._ctx;
          if (!len) {
            return;
          }
          ctx.beginPath();
          for (i = 0; i < len; i++) {
            for (j = 0, len2 = parts[i].length; j < len2; j++) {
              p = parts[i][j];
              ctx[j ? "lineTo" : "moveTo"](p.x, p.y);
            }
            if (closed) {
              ctx.closePath();
            }
          }
          this._fillStroke(ctx, layer);
        },
        _updateCircle: function(layer) {
          if (!this._drawing || layer._empty()) {
            return;
          }
          var p = layer._point, ctx = this._ctx, r = Math.max(Math.round(layer._radius), 1), s3 = (Math.max(Math.round(layer._radiusY), 1) || r) / r;
          if (s3 !== 1) {
            ctx.save();
            ctx.scale(1, s3);
          }
          ctx.beginPath();
          ctx.arc(p.x, p.y / s3, r, 0, Math.PI * 2, false);
          if (s3 !== 1) {
            ctx.restore();
          }
          this._fillStroke(ctx, layer);
        },
        _fillStroke: function(ctx, layer) {
          var options = layer.options;
          if (options.fill) {
            ctx.globalAlpha = options.fillOpacity;
            ctx.fillStyle = options.fillColor || options.color;
            ctx.fill(options.fillRule || "evenodd");
          }
          if (options.stroke && options.weight !== 0) {
            if (ctx.setLineDash) {
              ctx.setLineDash(layer.options && layer.options._dashArray || []);
            }
            ctx.globalAlpha = options.opacity;
            ctx.lineWidth = options.weight;
            ctx.strokeStyle = options.color;
            ctx.lineCap = options.lineCap;
            ctx.lineJoin = options.lineJoin;
            ctx.stroke();
          }
        },
        _onClick: function(e) {
          var point6 = this._map.mouseEventToLayerPoint(e), layer, clickedLayer;
          for (var order = this._drawFirst; order; order = order.next) {
            layer = order.layer;
            if (layer.options.interactive && layer._containsPoint(point6)) {
              if (!(e.type === "click" || e.type === "preclick") || !this._map._draggableMoved(layer)) {
                clickedLayer = layer;
              }
            }
          }
          this._fireEvent(clickedLayer ? [clickedLayer] : false, e);
        },
        _onMouseMove: function(e) {
          if (!this._map || this._map.dragging.moving() || this._map._animatingZoom) {
            return;
          }
          var point6 = this._map.mouseEventToLayerPoint(e);
          this._handleMouseHover(e, point6);
        },
        _handleMouseOut: function(e) {
          var layer = this._hoveredLayer;
          if (layer) {
            removeClass(this._container, "leaflet-interactive");
            this._fireEvent([layer], e, "mouseout");
            this._hoveredLayer = null;
            this._mouseHoverThrottled = false;
          }
        },
        _handleMouseHover: function(e, point6) {
          if (this._mouseHoverThrottled) {
            return;
          }
          var layer, candidateHoveredLayer;
          for (var order = this._drawFirst; order; order = order.next) {
            layer = order.layer;
            if (layer.options.interactive && layer._containsPoint(point6)) {
              candidateHoveredLayer = layer;
            }
          }
          if (candidateHoveredLayer !== this._hoveredLayer) {
            this._handleMouseOut(e);
            if (candidateHoveredLayer) {
              addClass(this._container, "leaflet-interactive");
              this._fireEvent([candidateHoveredLayer], e, "mouseover");
              this._hoveredLayer = candidateHoveredLayer;
            }
          }
          this._fireEvent(this._hoveredLayer ? [this._hoveredLayer] : false, e);
          this._mouseHoverThrottled = true;
          setTimeout(bind(function() {
            this._mouseHoverThrottled = false;
          }, this), 32);
        },
        _fireEvent: function(layers2, e, type2) {
          this._map._fireDOMEvent(e, type2 || e.type, layers2);
        },
        _bringToFront: function(layer) {
          var order = layer._order;
          if (!order) {
            return;
          }
          var next = order.next;
          var prev = order.prev;
          if (next) {
            next.prev = prev;
          } else {
            return;
          }
          if (prev) {
            prev.next = next;
          } else if (next) {
            this._drawFirst = next;
          }
          order.prev = this._drawLast;
          this._drawLast.next = order;
          order.next = null;
          this._drawLast = order;
          this._requestRedraw(layer);
        },
        _bringToBack: function(layer) {
          var order = layer._order;
          if (!order) {
            return;
          }
          var next = order.next;
          var prev = order.prev;
          if (prev) {
            prev.next = next;
          } else {
            return;
          }
          if (next) {
            next.prev = prev;
          } else if (prev) {
            this._drawLast = prev;
          }
          order.prev = null;
          order.next = this._drawFirst;
          this._drawFirst.prev = order;
          this._drawFirst = order;
          this._requestRedraw(layer);
        }
      });
      function canvas(options) {
        return Browser.canvas ? new Canvas(options) : null;
      }
      var vmlCreate = function() {
        try {
          document.namespaces.add("lvml", "urn:schemas-microsoft-com:vml");
          return function(name) {
            return document.createElement("<lvml:" + name + ' class="lvml">');
          };
        } catch (e) {
        }
        return function(name) {
          return document.createElement("<" + name + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">');
        };
      }();
      var vmlMixin = {
        _initContainer: function() {
          this._container = create$1("div", "leaflet-vml-container");
        },
        _update: function() {
          if (this._map._animatingZoom) {
            return;
          }
          Renderer.prototype._update.call(this);
          this.fire("update");
        },
        _initPath: function(layer) {
          var container = layer._container = vmlCreate("shape");
          addClass(container, "leaflet-vml-shape " + (this.options.className || ""));
          container.coordsize = "1 1";
          layer._path = vmlCreate("path");
          container.appendChild(layer._path);
          this._updateStyle(layer);
          this._layers[stamp(layer)] = layer;
        },
        _addPath: function(layer) {
          var container = layer._container;
          this._container.appendChild(container);
          if (layer.options.interactive) {
            layer.addInteractiveTarget(container);
          }
        },
        _removePath: function(layer) {
          var container = layer._container;
          remove2(container);
          layer.removeInteractiveTarget(container);
          delete this._layers[stamp(layer)];
        },
        _updateStyle: function(layer) {
          var stroke = layer._stroke, fill = layer._fill, options = layer.options, container = layer._container;
          container.stroked = !!options.stroke;
          container.filled = !!options.fill;
          if (options.stroke) {
            if (!stroke) {
              stroke = layer._stroke = vmlCreate("stroke");
            }
            container.appendChild(stroke);
            stroke.weight = options.weight + "px";
            stroke.color = options.color;
            stroke.opacity = options.opacity;
            if (options.dashArray) {
              stroke.dashStyle = isArray(options.dashArray) ? options.dashArray.join(" ") : options.dashArray.replace(/( *, *)/g, " ");
            } else {
              stroke.dashStyle = "";
            }
            stroke.endcap = options.lineCap.replace("butt", "flat");
            stroke.joinstyle = options.lineJoin;
          } else if (stroke) {
            container.removeChild(stroke);
            layer._stroke = null;
          }
          if (options.fill) {
            if (!fill) {
              fill = layer._fill = vmlCreate("fill");
            }
            container.appendChild(fill);
            fill.color = options.fillColor || options.color;
            fill.opacity = options.fillOpacity;
          } else if (fill) {
            container.removeChild(fill);
            layer._fill = null;
          }
        },
        _updateCircle: function(layer) {
          var p = layer._point.round(), r = Math.round(layer._radius), r2 = Math.round(layer._radiusY || r);
          this._setPath(layer, layer._empty() ? "M0 0" : "AL " + p.x + "," + p.y + " " + r + "," + r2 + " 0," + 65535 * 360);
        },
        _setPath: function(layer, path2) {
          layer._path.v = path2;
        },
        _bringToFront: function(layer) {
          toFront(layer._container);
        },
        _bringToBack: function(layer) {
          toBack(layer._container);
        }
      };
      var create2 = Browser.vml ? vmlCreate : svgCreate;
      var SVG = Renderer.extend({
        _initContainer: function() {
          this._container = create2("svg");
          this._container.setAttribute("pointer-events", "none");
          this._rootGroup = create2("g");
          this._container.appendChild(this._rootGroup);
        },
        _destroyContainer: function() {
          remove2(this._container);
          off(this._container);
          delete this._container;
          delete this._rootGroup;
          delete this._svgSize;
        },
        _update: function() {
          if (this._map._animatingZoom && this._bounds) {
            return;
          }
          Renderer.prototype._update.call(this);
          var b = this._bounds, size = b.getSize(), container = this._container;
          if (!this._svgSize || !this._svgSize.equals(size)) {
            this._svgSize = size;
            container.setAttribute("width", size.x);
            container.setAttribute("height", size.y);
          }
          setPosition(container, b.min);
          container.setAttribute("viewBox", [b.min.x, b.min.y, size.x, size.y].join(" "));
          this.fire("update");
        },
        _initPath: function(layer) {
          var path2 = layer._path = create2("path");
          if (layer.options.className) {
            addClass(path2, layer.options.className);
          }
          if (layer.options.interactive) {
            addClass(path2, "leaflet-interactive");
          }
          this._updateStyle(layer);
          this._layers[stamp(layer)] = layer;
        },
        _addPath: function(layer) {
          if (!this._rootGroup) {
            this._initContainer();
          }
          this._rootGroup.appendChild(layer._path);
          layer.addInteractiveTarget(layer._path);
        },
        _removePath: function(layer) {
          remove2(layer._path);
          layer.removeInteractiveTarget(layer._path);
          delete this._layers[stamp(layer)];
        },
        _updatePath: function(layer) {
          layer._project();
          layer._update();
        },
        _updateStyle: function(layer) {
          var path2 = layer._path, options = layer.options;
          if (!path2) {
            return;
          }
          if (options.stroke) {
            path2.setAttribute("stroke", options.color);
            path2.setAttribute("stroke-opacity", options.opacity);
            path2.setAttribute("stroke-width", options.weight);
            path2.setAttribute("stroke-linecap", options.lineCap);
            path2.setAttribute("stroke-linejoin", options.lineJoin);
            if (options.dashArray) {
              path2.setAttribute("stroke-dasharray", options.dashArray);
            } else {
              path2.removeAttribute("stroke-dasharray");
            }
            if (options.dashOffset) {
              path2.setAttribute("stroke-dashoffset", options.dashOffset);
            } else {
              path2.removeAttribute("stroke-dashoffset");
            }
          } else {
            path2.setAttribute("stroke", "none");
          }
          if (options.fill) {
            path2.setAttribute("fill", options.fillColor || options.color);
            path2.setAttribute("fill-opacity", options.fillOpacity);
            path2.setAttribute("fill-rule", options.fillRule || "evenodd");
          } else {
            path2.setAttribute("fill", "none");
          }
        },
        _updatePoly: function(layer, closed) {
          this._setPath(layer, pointsToPath(layer._parts, closed));
        },
        _updateCircle: function(layer) {
          var p = layer._point, r = Math.max(Math.round(layer._radius), 1), r2 = Math.max(Math.round(layer._radiusY), 1) || r, arc = "a" + r + "," + r2 + " 0 1,0 ";
          var d = layer._empty() ? "M0 0" : "M" + (p.x - r) + "," + p.y + arc + r * 2 + ",0 " + arc + -r * 2 + ",0 ";
          this._setPath(layer, d);
        },
        _setPath: function(layer, path2) {
          layer._path.setAttribute("d", path2);
        },
        _bringToFront: function(layer) {
          toFront(layer._path);
        },
        _bringToBack: function(layer) {
          toBack(layer._path);
        }
      });
      if (Browser.vml) {
        SVG.include(vmlMixin);
      }
      function svg2(options) {
        return Browser.svg || Browser.vml ? new SVG(options) : null;
      }
      Map2.include({
        getRenderer: function(layer) {
          var renderer = layer.options.renderer || this._getPaneRenderer(layer.options.pane) || this.options.renderer || this._renderer;
          if (!renderer) {
            renderer = this._renderer = this._createRenderer();
          }
          if (!this.hasLayer(renderer)) {
            this.addLayer(renderer);
          }
          return renderer;
        },
        _getPaneRenderer: function(name) {
          if (name === "overlayPane" || name === void 0) {
            return false;
          }
          var renderer = this._paneRenderers[name];
          if (renderer === void 0) {
            renderer = this._createRenderer({ pane: name });
            this._paneRenderers[name] = renderer;
          }
          return renderer;
        },
        _createRenderer: function(options) {
          return this.options.preferCanvas && canvas(options) || svg2(options);
        }
      });
      var Rectangle = Polygon2.extend({
        initialize: function(latLngBounds, options) {
          Polygon2.prototype.initialize.call(this, this._boundsToLatLngs(latLngBounds), options);
        },
        setBounds: function(latLngBounds) {
          return this.setLatLngs(this._boundsToLatLngs(latLngBounds));
        },
        _boundsToLatLngs: function(latLngBounds) {
          latLngBounds = toLatLngBounds(latLngBounds);
          return [
            latLngBounds.getSouthWest(),
            latLngBounds.getNorthWest(),
            latLngBounds.getNorthEast(),
            latLngBounds.getSouthEast()
          ];
        }
      });
      function rectangle2(latLngBounds, options) {
        return new Rectangle(latLngBounds, options);
      }
      SVG.create = create2;
      SVG.pointsToPath = pointsToPath;
      GeoJSON.geometryToLayer = geometryToLayer;
      GeoJSON.coordsToLatLng = coordsToLatLng;
      GeoJSON.coordsToLatLngs = coordsToLatLngs;
      GeoJSON.latLngToCoords = latLngToCoords;
      GeoJSON.latLngsToCoords = latLngsToCoords;
      GeoJSON.getFeature = getFeature;
      GeoJSON.asFeature = asFeature;
      Map2.mergeOptions({
        boxZoom: true
      });
      var BoxZoom = Handler.extend({
        initialize: function(map5) {
          this._map = map5;
          this._container = map5._container;
          this._pane = map5._panes.overlayPane;
          this._resetStateTimeout = 0;
          map5.on("unload", this._destroy, this);
        },
        addHooks: function() {
          on(this._container, "mousedown", this._onMouseDown, this);
        },
        removeHooks: function() {
          off(this._container, "mousedown", this._onMouseDown, this);
        },
        moved: function() {
          return this._moved;
        },
        _destroy: function() {
          remove2(this._pane);
          delete this._pane;
        },
        _resetState: function() {
          this._resetStateTimeout = 0;
          this._moved = false;
        },
        _clearDeferredResetState: function() {
          if (this._resetStateTimeout !== 0) {
            clearTimeout(this._resetStateTimeout);
            this._resetStateTimeout = 0;
          }
        },
        _onMouseDown: function(e) {
          if (!e.shiftKey || e.which !== 1 && e.button !== 1) {
            return false;
          }
          this._clearDeferredResetState();
          this._resetState();
          disableTextSelection();
          disableImageDrag();
          this._startPoint = this._map.mouseEventToContainerPoint(e);
          on(document, {
            contextmenu: stop,
            mousemove: this._onMouseMove,
            mouseup: this._onMouseUp,
            keydown: this._onKeyDown
          }, this);
        },
        _onMouseMove: function(e) {
          if (!this._moved) {
            this._moved = true;
            this._box = create$1("div", "leaflet-zoom-box", this._container);
            addClass(this._container, "leaflet-crosshair");
            this._map.fire("boxzoomstart");
          }
          this._point = this._map.mouseEventToContainerPoint(e);
          var bounds = new Bounds(this._point, this._startPoint), size = bounds.getSize();
          setPosition(this._box, bounds.min);
          this._box.style.width = size.x + "px";
          this._box.style.height = size.y + "px";
        },
        _finish: function() {
          if (this._moved) {
            remove2(this._box);
            removeClass(this._container, "leaflet-crosshair");
          }
          enableTextSelection();
          enableImageDrag();
          off(document, {
            contextmenu: stop,
            mousemove: this._onMouseMove,
            mouseup: this._onMouseUp,
            keydown: this._onKeyDown
          }, this);
        },
        _onMouseUp: function(e) {
          if (e.which !== 1 && e.button !== 1) {
            return;
          }
          this._finish();
          if (!this._moved) {
            return;
          }
          this._clearDeferredResetState();
          this._resetStateTimeout = setTimeout(bind(this._resetState, this), 0);
          var bounds = new LatLngBounds(
            this._map.containerPointToLatLng(this._startPoint),
            this._map.containerPointToLatLng(this._point)
          );
          this._map.fitBounds(bounds).fire("boxzoomend", { boxZoomBounds: bounds });
        },
        _onKeyDown: function(e) {
          if (e.keyCode === 27) {
            this._finish();
            this._clearDeferredResetState();
            this._resetState();
          }
        }
      });
      Map2.addInitHook("addHandler", "boxZoom", BoxZoom);
      Map2.mergeOptions({
        doubleClickZoom: true
      });
      var DoubleClickZoom = Handler.extend({
        addHooks: function() {
          this._map.on("dblclick", this._onDoubleClick, this);
        },
        removeHooks: function() {
          this._map.off("dblclick", this._onDoubleClick, this);
        },
        _onDoubleClick: function(e) {
          var map5 = this._map, oldZoom = map5.getZoom(), delta = map5.options.zoomDelta, zoom2 = e.originalEvent.shiftKey ? oldZoom - delta : oldZoom + delta;
          if (map5.options.doubleClickZoom === "center") {
            map5.setZoom(zoom2);
          } else {
            map5.setZoomAround(e.containerPoint, zoom2);
          }
        }
      });
      Map2.addInitHook("addHandler", "doubleClickZoom", DoubleClickZoom);
      Map2.mergeOptions({
        dragging: true,
        inertia: true,
        inertiaDeceleration: 3400,
        inertiaMaxSpeed: Infinity,
        easeLinearity: 0.2,
        worldCopyJump: false,
        maxBoundsViscosity: 0
      });
      var Drag = Handler.extend({
        addHooks: function() {
          if (!this._draggable) {
            var map5 = this._map;
            this._draggable = new Draggable(map5._mapPane, map5._container);
            this._draggable.on({
              dragstart: this._onDragStart,
              drag: this._onDrag,
              dragend: this._onDragEnd
            }, this);
            this._draggable.on("predrag", this._onPreDragLimit, this);
            if (map5.options.worldCopyJump) {
              this._draggable.on("predrag", this._onPreDragWrap, this);
              map5.on("zoomend", this._onZoomEnd, this);
              map5.whenReady(this._onZoomEnd, this);
            }
          }
          addClass(this._map._container, "leaflet-grab leaflet-touch-drag");
          this._draggable.enable();
          this._positions = [];
          this._times = [];
        },
        removeHooks: function() {
          removeClass(this._map._container, "leaflet-grab");
          removeClass(this._map._container, "leaflet-touch-drag");
          this._draggable.disable();
        },
        moved: function() {
          return this._draggable && this._draggable._moved;
        },
        moving: function() {
          return this._draggable && this._draggable._moving;
        },
        _onDragStart: function() {
          var map5 = this._map;
          map5._stop();
          if (this._map.options.maxBounds && this._map.options.maxBoundsViscosity) {
            var bounds = toLatLngBounds(this._map.options.maxBounds);
            this._offsetLimit = toBounds(
              this._map.latLngToContainerPoint(bounds.getNorthWest()).multiplyBy(-1),
              this._map.latLngToContainerPoint(bounds.getSouthEast()).multiplyBy(-1).add(this._map.getSize())
            );
            this._viscosity = Math.min(1, Math.max(0, this._map.options.maxBoundsViscosity));
          } else {
            this._offsetLimit = null;
          }
          map5.fire("movestart").fire("dragstart");
          if (map5.options.inertia) {
            this._positions = [];
            this._times = [];
          }
        },
        _onDrag: function(e) {
          if (this._map.options.inertia) {
            var time2 = this._lastTime = +new Date(), pos = this._lastPos = this._draggable._absPos || this._draggable._newPos;
            this._positions.push(pos);
            this._times.push(time2);
            this._prunePositions(time2);
          }
          this._map.fire("move", e).fire("drag", e);
        },
        _prunePositions: function(time2) {
          while (this._positions.length > 1 && time2 - this._times[0] > 50) {
            this._positions.shift();
            this._times.shift();
          }
        },
        _onZoomEnd: function() {
          var pxCenter = this._map.getSize().divideBy(2), pxWorldCenter = this._map.latLngToLayerPoint([0, 0]);
          this._initialWorldOffset = pxWorldCenter.subtract(pxCenter).x;
          this._worldWidth = this._map.getPixelWorldBounds().getSize().x;
        },
        _viscousLimit: function(value, threshold2) {
          return value - (value - threshold2) * this._viscosity;
        },
        _onPreDragLimit: function() {
          if (!this._viscosity || !this._offsetLimit) {
            return;
          }
          var offset2 = this._draggable._newPos.subtract(this._draggable._startPos);
          var limit = this._offsetLimit;
          if (offset2.x < limit.min.x) {
            offset2.x = this._viscousLimit(offset2.x, limit.min.x);
          }
          if (offset2.y < limit.min.y) {
            offset2.y = this._viscousLimit(offset2.y, limit.min.y);
          }
          if (offset2.x > limit.max.x) {
            offset2.x = this._viscousLimit(offset2.x, limit.max.x);
          }
          if (offset2.y > limit.max.y) {
            offset2.y = this._viscousLimit(offset2.y, limit.max.y);
          }
          this._draggable._newPos = this._draggable._startPos.add(offset2);
        },
        _onPreDragWrap: function() {
          var worldWidth = this._worldWidth, halfWidth = Math.round(worldWidth / 2), dx = this._initialWorldOffset, x4 = this._draggable._newPos.x, newX1 = (x4 - halfWidth + dx) % worldWidth + halfWidth - dx, newX2 = (x4 + halfWidth + dx) % worldWidth - halfWidth - dx, newX = Math.abs(newX1 + dx) < Math.abs(newX2 + dx) ? newX1 : newX2;
          this._draggable._absPos = this._draggable._newPos.clone();
          this._draggable._newPos.x = newX;
        },
        _onDragEnd: function(e) {
          var map5 = this._map, options = map5.options, noInertia = !options.inertia || e.noInertia || this._times.length < 2;
          map5.fire("dragend", e);
          if (noInertia) {
            map5.fire("moveend");
          } else {
            this._prunePositions(+new Date());
            var direction = this._lastPos.subtract(this._positions[0]), duration = (this._lastTime - this._times[0]) / 1e3, ease = options.easeLinearity, speedVector = direction.multiplyBy(ease / duration), speed = speedVector.distanceTo([0, 0]), limitedSpeed = Math.min(options.inertiaMaxSpeed, speed), limitedSpeedVector = speedVector.multiplyBy(limitedSpeed / speed), decelerationDuration = limitedSpeed / (options.inertiaDeceleration * ease), offset2 = limitedSpeedVector.multiplyBy(-decelerationDuration / 2).round();
            if (!offset2.x && !offset2.y) {
              map5.fire("moveend");
            } else {
              offset2 = map5._limitOffset(offset2, map5.options.maxBounds);
              requestAnimFrame(function() {
                map5.panBy(offset2, {
                  duration: decelerationDuration,
                  easeLinearity: ease,
                  noMoveStart: true,
                  animate: true
                });
              });
            }
          }
        }
      });
      Map2.addInitHook("addHandler", "dragging", Drag);
      Map2.mergeOptions({
        keyboard: true,
        keyboardPanDelta: 80
      });
      var Keyboard = Handler.extend({
        keyCodes: {
          left: [37],
          right: [39],
          down: [40],
          up: [38],
          zoomIn: [187, 107, 61, 171],
          zoomOut: [189, 109, 54, 173]
        },
        initialize: function(map5) {
          this._map = map5;
          this._setPanDelta(map5.options.keyboardPanDelta);
          this._setZoomDelta(map5.options.zoomDelta);
        },
        addHooks: function() {
          var container = this._map._container;
          if (container.tabIndex <= 0) {
            container.tabIndex = "0";
          }
          on(container, {
            focus: this._onFocus,
            blur: this._onBlur,
            mousedown: this._onMouseDown
          }, this);
          this._map.on({
            focus: this._addHooks,
            blur: this._removeHooks
          }, this);
        },
        removeHooks: function() {
          this._removeHooks();
          off(this._map._container, {
            focus: this._onFocus,
            blur: this._onBlur,
            mousedown: this._onMouseDown
          }, this);
          this._map.off({
            focus: this._addHooks,
            blur: this._removeHooks
          }, this);
        },
        _onMouseDown: function() {
          if (this._focused) {
            return;
          }
          var body = document.body, docEl = document.documentElement, top2 = body.scrollTop || docEl.scrollTop, left2 = body.scrollLeft || docEl.scrollLeft;
          this._map._container.focus();
          window.scrollTo(left2, top2);
        },
        _onFocus: function() {
          this._focused = true;
          this._map.fire("focus");
        },
        _onBlur: function() {
          this._focused = false;
          this._map.fire("blur");
        },
        _setPanDelta: function(panDelta) {
          var keys = this._panKeys = {}, codes = this.keyCodes, i, len;
          for (i = 0, len = codes.left.length; i < len; i++) {
            keys[codes.left[i]] = [-1 * panDelta, 0];
          }
          for (i = 0, len = codes.right.length; i < len; i++) {
            keys[codes.right[i]] = [panDelta, 0];
          }
          for (i = 0, len = codes.down.length; i < len; i++) {
            keys[codes.down[i]] = [0, panDelta];
          }
          for (i = 0, len = codes.up.length; i < len; i++) {
            keys[codes.up[i]] = [0, -1 * panDelta];
          }
        },
        _setZoomDelta: function(zoomDelta) {
          var keys = this._zoomKeys = {}, codes = this.keyCodes, i, len;
          for (i = 0, len = codes.zoomIn.length; i < len; i++) {
            keys[codes.zoomIn[i]] = zoomDelta;
          }
          for (i = 0, len = codes.zoomOut.length; i < len; i++) {
            keys[codes.zoomOut[i]] = -zoomDelta;
          }
        },
        _addHooks: function() {
          on(document, "keydown", this._onKeyDown, this);
        },
        _removeHooks: function() {
          off(document, "keydown", this._onKeyDown, this);
        },
        _onKeyDown: function(e) {
          if (e.altKey || e.ctrlKey || e.metaKey) {
            return;
          }
          var key = e.keyCode, map5 = this._map, offset2;
          if (key in this._panKeys) {
            if (!map5._panAnim || !map5._panAnim._inProgress) {
              offset2 = this._panKeys[key];
              if (e.shiftKey) {
                offset2 = toPoint(offset2).multiplyBy(3);
              }
              map5.panBy(offset2);
              if (map5.options.maxBounds) {
                map5.panInsideBounds(map5.options.maxBounds);
              }
            }
          } else if (key in this._zoomKeys) {
            map5.setZoom(map5.getZoom() + (e.shiftKey ? 3 : 1) * this._zoomKeys[key]);
          } else if (key === 27 && map5._popup && map5._popup.options.closeOnEscapeKey) {
            map5.closePopup();
          } else {
            return;
          }
          stop(e);
        }
      });
      Map2.addInitHook("addHandler", "keyboard", Keyboard);
      Map2.mergeOptions({
        scrollWheelZoom: true,
        wheelDebounceTime: 40,
        wheelPxPerZoomLevel: 60
      });
      var ScrollWheelZoom = Handler.extend({
        addHooks: function() {
          on(this._map._container, "wheel", this._onWheelScroll, this);
          this._delta = 0;
        },
        removeHooks: function() {
          off(this._map._container, "wheel", this._onWheelScroll, this);
        },
        _onWheelScroll: function(e) {
          var delta = getWheelDelta(e);
          var debounce = this._map.options.wheelDebounceTime;
          this._delta += delta;
          this._lastMousePos = this._map.mouseEventToContainerPoint(e);
          if (!this._startTime) {
            this._startTime = +new Date();
          }
          var left2 = Math.max(debounce - (+new Date() - this._startTime), 0);
          clearTimeout(this._timer);
          this._timer = setTimeout(bind(this._performZoom, this), left2);
          stop(e);
        },
        _performZoom: function() {
          var map5 = this._map, zoom2 = map5.getZoom(), snap = this._map.options.zoomSnap || 0;
          map5._stop();
          var d2 = this._delta / (this._map.options.wheelPxPerZoomLevel * 4), d3 = 4 * Math.log(2 / (1 + Math.exp(-Math.abs(d2)))) / Math.LN2, d4 = snap ? Math.ceil(d3 / snap) * snap : d3, delta = map5._limitZoom(zoom2 + (this._delta > 0 ? d4 : -d4)) - zoom2;
          this._delta = 0;
          this._startTime = null;
          if (!delta) {
            return;
          }
          if (map5.options.scrollWheelZoom === "center") {
            map5.setZoom(zoom2 + delta);
          } else {
            map5.setZoomAround(this._lastMousePos, zoom2 + delta);
          }
        }
      });
      Map2.addInitHook("addHandler", "scrollWheelZoom", ScrollWheelZoom);
      var tapHoldDelay = 600;
      Map2.mergeOptions({
        tapHold: Browser.touchNative && Browser.safari && Browser.mobile,
        tapTolerance: 15
      });
      var TapHold = Handler.extend({
        addHooks: function() {
          on(this._map._container, "touchstart", this._onDown, this);
        },
        removeHooks: function() {
          off(this._map._container, "touchstart", this._onDown, this);
        },
        _onDown: function(e) {
          clearTimeout(this._holdTimeout);
          if (e.touches.length !== 1) {
            return;
          }
          var first = e.touches[0];
          this._startPos = this._newPos = new Point(first.clientX, first.clientY);
          this._holdTimeout = setTimeout(bind(function() {
            this._cancel();
            if (!this._isTapValid()) {
              return;
            }
            on(document, "touchend", preventDefault);
            on(document, "touchend touchcancel", this._cancelClickPrevent);
            this._simulateEvent("contextmenu", first);
          }, this), tapHoldDelay);
          on(document, "touchend touchcancel contextmenu", this._cancel, this);
          on(document, "touchmove", this._onMove, this);
        },
        _cancelClickPrevent: function cancelClickPrevent() {
          off(document, "touchend", preventDefault);
          off(document, "touchend touchcancel", cancelClickPrevent);
        },
        _cancel: function() {
          clearTimeout(this._holdTimeout);
          off(document, "touchend touchcancel contextmenu", this._cancel, this);
          off(document, "touchmove", this._onMove, this);
        },
        _onMove: function(e) {
          var first = e.touches[0];
          this._newPos = new Point(first.clientX, first.clientY);
        },
        _isTapValid: function() {
          return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance;
        },
        _simulateEvent: function(type2, e) {
          var simulatedEvent = new MouseEvent(type2, {
            bubbles: true,
            cancelable: true,
            view: window,
            screenX: e.screenX,
            screenY: e.screenY,
            clientX: e.clientX,
            clientY: e.clientY
          });
          simulatedEvent._simulated = true;
          e.target.dispatchEvent(simulatedEvent);
        }
      });
      Map2.addInitHook("addHandler", "tapHold", TapHold);
      Map2.mergeOptions({
        touchZoom: Browser.touch,
        bounceAtZoomLimits: true
      });
      var TouchZoom = Handler.extend({
        addHooks: function() {
          addClass(this._map._container, "leaflet-touch-zoom");
          on(this._map._container, "touchstart", this._onTouchStart, this);
        },
        removeHooks: function() {
          removeClass(this._map._container, "leaflet-touch-zoom");
          off(this._map._container, "touchstart", this._onTouchStart, this);
        },
        _onTouchStart: function(e) {
          var map5 = this._map;
          if (!e.touches || e.touches.length !== 2 || map5._animatingZoom || this._zooming) {
            return;
          }
          var p1 = map5.mouseEventToContainerPoint(e.touches[0]), p2 = map5.mouseEventToContainerPoint(e.touches[1]);
          this._centerPoint = map5.getSize()._divideBy(2);
          this._startLatLng = map5.containerPointToLatLng(this._centerPoint);
          if (map5.options.touchZoom !== "center") {
            this._pinchStartLatLng = map5.containerPointToLatLng(p1.add(p2)._divideBy(2));
          }
          this._startDist = p1.distanceTo(p2);
          this._startZoom = map5.getZoom();
          this._moved = false;
          this._zooming = true;
          map5._stop();
          on(document, "touchmove", this._onTouchMove, this);
          on(document, "touchend touchcancel", this._onTouchEnd, this);
          preventDefault(e);
        },
        _onTouchMove: function(e) {
          if (!e.touches || e.touches.length !== 2 || !this._zooming) {
            return;
          }
          var map5 = this._map, p1 = map5.mouseEventToContainerPoint(e.touches[0]), p2 = map5.mouseEventToContainerPoint(e.touches[1]), scale2 = p1.distanceTo(p2) / this._startDist;
          this._zoom = map5.getScaleZoom(scale2, this._startZoom);
          if (!map5.options.bounceAtZoomLimits && (this._zoom < map5.getMinZoom() && scale2 < 1 || this._zoom > map5.getMaxZoom() && scale2 > 1)) {
            this._zoom = map5._limitZoom(this._zoom);
          }
          if (map5.options.touchZoom === "center") {
            this._center = this._startLatLng;
            if (scale2 === 1) {
              return;
            }
          } else {
            var delta = p1._add(p2)._divideBy(2)._subtract(this._centerPoint);
            if (scale2 === 1 && delta.x === 0 && delta.y === 0) {
              return;
            }
            this._center = map5.unproject(map5.project(this._pinchStartLatLng, this._zoom).subtract(delta), this._zoom);
          }
          if (!this._moved) {
            map5._moveStart(true, false);
            this._moved = true;
          }
          cancelAnimFrame(this._animRequest);
          var moveFn = bind(map5._move, map5, this._center, this._zoom, { pinch: true, round: false });
          this._animRequest = requestAnimFrame(moveFn, this, true);
          preventDefault(e);
        },
        _onTouchEnd: function() {
          if (!this._moved || !this._zooming) {
            this._zooming = false;
            return;
          }
          this._zooming = false;
          cancelAnimFrame(this._animRequest);
          off(document, "touchmove", this._onTouchMove, this);
          off(document, "touchend touchcancel", this._onTouchEnd, this);
          if (this._map.options.zoomAnimation) {
            this._map._animateZoom(this._center, this._map._limitZoom(this._zoom), true, this._map.options.zoomSnap);
          } else {
            this._map._resetView(this._center, this._map._limitZoom(this._zoom));
          }
        }
      });
      Map2.addInitHook("addHandler", "touchZoom", TouchZoom);
      Map2.BoxZoom = BoxZoom;
      Map2.DoubleClickZoom = DoubleClickZoom;
      Map2.Drag = Drag;
      Map2.Keyboard = Keyboard;
      Map2.ScrollWheelZoom = ScrollWheelZoom;
      Map2.TapHold = TapHold;
      Map2.TouchZoom = TouchZoom;
      exports2.Bounds = Bounds;
      exports2.Browser = Browser;
      exports2.CRS = CRS;
      exports2.Canvas = Canvas;
      exports2.Circle = Circle;
      exports2.CircleMarker = CircleMarker;
      exports2.Class = Class;
      exports2.Control = Control;
      exports2.DivIcon = DivIcon;
      exports2.DivOverlay = DivOverlay;
      exports2.DomEvent = DomEvent;
      exports2.DomUtil = DomUtil;
      exports2.Draggable = Draggable;
      exports2.Evented = Evented;
      exports2.FeatureGroup = FeatureGroup;
      exports2.GeoJSON = GeoJSON;
      exports2.GridLayer = GridLayer;
      exports2.Handler = Handler;
      exports2.Icon = Icon;
      exports2.ImageOverlay = ImageOverlay;
      exports2.LatLng = LatLng;
      exports2.LatLngBounds = LatLngBounds;
      exports2.Layer = Layer;
      exports2.LayerGroup = LayerGroup;
      exports2.LineUtil = LineUtil;
      exports2.Map = Map2;
      exports2.Marker = Marker;
      exports2.Mixin = Mixin;
      exports2.Path = Path3;
      exports2.Point = Point;
      exports2.PolyUtil = PolyUtil;
      exports2.Polygon = Polygon2;
      exports2.Polyline = Polyline;
      exports2.Popup = Popup;
      exports2.PosAnimation = PosAnimation;
      exports2.Projection = index3;
      exports2.Rectangle = Rectangle;
      exports2.Renderer = Renderer;
      exports2.SVG = SVG;
      exports2.SVGOverlay = SVGOverlay;
      exports2.TileLayer = TileLayer;
      exports2.Tooltip = Tooltip;
      exports2.Transformation = Transformation;
      exports2.Util = Util;
      exports2.VideoOverlay = VideoOverlay;
      exports2.bind = bind;
      exports2.bounds = toBounds;
      exports2.canvas = canvas;
      exports2.circle = circle3;
      exports2.circleMarker = circleMarker2;
      exports2.control = control;
      exports2.divIcon = divIcon2;
      exports2.extend = extend2;
      exports2.featureGroup = featureGroup;
      exports2.geoJSON = geoJSON;
      exports2.geoJson = geoJson;
      exports2.gridLayer = gridLayer;
      exports2.icon = icon;
      exports2.imageOverlay = imageOverlay;
      exports2.latLng = toLatLng;
      exports2.latLngBounds = toLatLngBounds;
      exports2.layerGroup = layerGroup;
      exports2.map = createMap;
      exports2.marker = marker2;
      exports2.point = toPoint;
      exports2.polygon = polygon;
      exports2.polyline = polyline;
      exports2.popup = popup;
      exports2.rectangle = rectangle2;
      exports2.setOptions = setOptions;
      exports2.stamp = stamp;
      exports2.svg = svg2;
      exports2.svgOverlay = svgOverlay;
      exports2.tileLayer = tileLayer2;
      exports2.tooltip = tooltip;
      exports2.transformation = toTransformation;
      exports2.version = version3;
      exports2.videoOverlay = videoOverlay;
      var oldL = window.L;
      exports2.noConflict = function() {
        window.L = oldL;
        return this;
      };
      window.L = exports2;
    });
  }
});

// node_modules/querystringify/index.js
var require_querystringify = __commonJS({
  "node_modules/querystringify/index.js"(exports) {
    "use strict";
    var has = Object.prototype.hasOwnProperty;
    var undef;
    function decode(input) {
      try {
        return decodeURIComponent(input.replace(/\+/g, " "));
      } catch (e) {
        return null;
      }
    }
    function encode(input) {
      try {
        return encodeURIComponent(input);
      } catch (e) {
        return null;
      }
    }
    function querystring(query) {
      var parser2 = /([^=?#&]+)=?([^&]*)/g, result = {}, part;
      while (part = parser2.exec(query)) {
        var key = decode(part[1]), value = decode(part[2]);
        if (key === null || value === null || key in result)
          continue;
        result[key] = value;
      }
      return result;
    }
    function querystringify2(obj, prefix) {
      prefix = prefix || "";
      var pairs2 = [], value, key;
      if ("string" !== typeof prefix)
        prefix = "?";
      for (key in obj) {
        if (has.call(obj, key)) {
          value = obj[key];
          if (!value && (value === null || value === undef || isNaN(value))) {
            value = "";
          }
          key = encode(key);
          value = encode(value);
          if (key === null || value === null)
            continue;
          pairs2.push(key + "=" + value);
        }
      }
      return pairs2.length ? prefix + pairs2.join("&") : "";
    }
    exports.stringify = querystringify2;
    exports.parse = querystring;
  }
});

// src/axisutil.ts
var axisutil_exports = {};
__export(axisutil_exports, {
  drawAxisLabels: () => drawAxisLabels,
  drawTitle: () => drawTitle,
  drawXLabel: () => drawXLabel,
  drawXSublabel: () => drawXSublabel,
  drawYLabel: () => drawYLabel,
  drawYSublabel: () => drawYSublabel
});

// src/util.ts
var util_exports = {};
__export(util_exports, {
  BINARY_MIME: () => BINARY_MIME,
  JSONAPI_MIME: () => JSONAPI_MIME,
  JSON_MIME: () => JSON_MIME,
  SVG_MIME: () => SVG_MIME,
  SVG_NS: () => SVG_NS,
  TEXT_MIME: () => TEXT_MIME,
  UTC_OPTIONS: () => UTC_OPTIONS,
  WAY_FUTURE: () => WAY_FUTURE,
  XML_MIME: () => XML_MIME,
  calcClockOffset: () => calcClockOffset,
  checkProtocol: () => checkProtocol,
  checkStringOrDate: () => checkStringOrDate,
  createSVGElement: () => createSVGElement,
  dataViewToString: () => dataViewToString,
  defaultFetchInitObj: () => defaultFetchInitObj,
  doBoolGetterSetter: () => doBoolGetterSetter,
  doFetchWithTimeout: () => doFetchWithTimeout,
  doFloatGetterSetter: () => doFloatGetterSetter,
  doIntGetterSetter: () => doIntGetterSetter,
  doMomentGetterSetter: () => doMomentGetterSetter,
  doStringGetterSetter: () => doStringGetterSetter,
  downloadBlobAsFile: () => downloadBlobAsFile,
  durationEnd: () => durationEnd,
  hasArgs: () => hasArgs,
  hasNoArgs: () => hasNoArgs,
  isDef: () => isDef,
  isError: () => isError,
  isNonEmptyStringArg: () => isNonEmptyStringArg,
  isNumArg: () => isNumArg,
  isObject: () => isObject,
  isStringArg: () => isStringArg,
  isoToDateTime: () => isoToDateTime,
  log: () => log,
  makeParam: () => makeParam,
  makePostParam: () => makePostParam,
  meanOfSlice: () => meanOfSlice,
  rethrowWithMessage: () => rethrowWithMessage,
  startDuration: () => startDuration,
  startEnd: () => startEnd,
  stringify: () => stringify,
  toError: () => toError,
  toIsoWoZ: () => toIsoWoZ,
  warn: () => warn
});

// node_modules/luxon/src/luxon.js
var luxon_exports = {};
__export(luxon_exports, {
  DateTime: () => DateTime,
  Duration: () => Duration,
  FixedOffsetZone: () => FixedOffsetZone,
  IANAZone: () => IANAZone,
  Info: () => Info,
  Interval: () => Interval,
  InvalidZone: () => InvalidZone,
  Settings: () => Settings,
  SystemZone: () => SystemZone,
  VERSION: () => VERSION,
  Zone: () => Zone
});

// node_modules/luxon/src/errors.js
var LuxonError = class extends Error {
};
var InvalidDateTimeError = class extends LuxonError {
  constructor(reason) {
    super(`Invalid DateTime: ${reason.toMessage()}`);
  }
};
var InvalidIntervalError = class extends LuxonError {
  constructor(reason) {
    super(`Invalid Interval: ${reason.toMessage()}`);
  }
};
var InvalidDurationError = class extends LuxonError {
  constructor(reason) {
    super(`Invalid Duration: ${reason.toMessage()}`);
  }
};
var ConflictingSpecificationError = class extends LuxonError {
};
var InvalidUnitError = class extends LuxonError {
  constructor(unit3) {
    super(`Invalid unit ${unit3}`);
  }
};
var InvalidArgumentError = class extends LuxonError {
};
var ZoneIsAbstractError = class extends LuxonError {
  constructor() {
    super("Zone is an abstract class");
  }
};

// node_modules/luxon/src/impl/formats.js
var n = "numeric";
var s = "short";
var l = "long";
var DATE_SHORT = {
  year: n,
  month: n,
  day: n
};
var DATE_MED = {
  year: n,
  month: s,
  day: n
};
var DATE_MED_WITH_WEEKDAY = {
  year: n,
  month: s,
  day: n,
  weekday: s
};
var DATE_FULL = {
  year: n,
  month: l,
  day: n
};
var DATE_HUGE = {
  year: n,
  month: l,
  day: n,
  weekday: l
};
var TIME_SIMPLE = {
  hour: n,
  minute: n
};
var TIME_WITH_SECONDS = {
  hour: n,
  minute: n,
  second: n
};
var TIME_WITH_SHORT_OFFSET = {
  hour: n,
  minute: n,
  second: n,
  timeZoneName: s
};
var TIME_WITH_LONG_OFFSET = {
  hour: n,
  minute: n,
  second: n,
  timeZoneName: l
};
var TIME_24_SIMPLE = {
  hour: n,
  minute: n,
  hourCycle: "h23"
};
var TIME_24_WITH_SECONDS = {
  hour: n,
  minute: n,
  second: n,
  hourCycle: "h23"
};
var TIME_24_WITH_SHORT_OFFSET = {
  hour: n,
  minute: n,
  second: n,
  hourCycle: "h23",
  timeZoneName: s
};
var TIME_24_WITH_LONG_OFFSET = {
  hour: n,
  minute: n,
  second: n,
  hourCycle: "h23",
  timeZoneName: l
};
var DATETIME_SHORT = {
  year: n,
  month: n,
  day: n,
  hour: n,
  minute: n
};
var DATETIME_SHORT_WITH_SECONDS = {
  year: n,
  month: n,
  day: n,
  hour: n,
  minute: n,
  second: n
};
var DATETIME_MED = {
  year: n,
  month: s,
  day: n,
  hour: n,
  minute: n
};
var DATETIME_MED_WITH_SECONDS = {
  year: n,
  month: s,
  day: n,
  hour: n,
  minute: n,
  second: n
};
var DATETIME_MED_WITH_WEEKDAY = {
  year: n,
  month: s,
  day: n,
  weekday: s,
  hour: n,
  minute: n
};
var DATETIME_FULL = {
  year: n,
  month: l,
  day: n,
  hour: n,
  minute: n,
  timeZoneName: s
};
var DATETIME_FULL_WITH_SECONDS = {
  year: n,
  month: l,
  day: n,
  hour: n,
  minute: n,
  second: n,
  timeZoneName: s
};
var DATETIME_HUGE = {
  year: n,
  month: l,
  day: n,
  weekday: l,
  hour: n,
  minute: n,
  timeZoneName: l
};
var DATETIME_HUGE_WITH_SECONDS = {
  year: n,
  month: l,
  day: n,
  weekday: l,
  hour: n,
  minute: n,
  second: n,
  timeZoneName: l
};

// node_modules/luxon/src/impl/util.js
function isUndefined(o) {
  return typeof o === "undefined";
}
function isNumber(o) {
  return typeof o === "number";
}
function isInteger(o) {
  return typeof o === "number" && o % 1 === 0;
}
function isString(o) {
  return typeof o === "string";
}
function isDate(o) {
  return Object.prototype.toString.call(o) === "[object Date]";
}
function hasRelative() {
  try {
    return typeof Intl !== "undefined" && !!Intl.RelativeTimeFormat;
  } catch (e) {
    return false;
  }
}
function maybeArray(thing) {
  return Array.isArray(thing) ? thing : [thing];
}
function bestBy(arr, by, compare) {
  if (arr.length === 0) {
    return void 0;
  }
  return arr.reduce((best, next) => {
    const pair2 = [by(next), next];
    if (!best) {
      return pair2;
    } else if (compare(best[0], pair2[0]) === best[0]) {
      return best;
    } else {
      return pair2;
    }
  }, null)[1];
}
function pick(obj, keys) {
  return keys.reduce((a3, k2) => {
    a3[k2] = obj[k2];
    return a3;
  }, {});
}
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}
function integerBetween(thing, bottom2, top2) {
  return isInteger(thing) && thing >= bottom2 && thing <= top2;
}
function floorMod(x4, n2) {
  return x4 - n2 * Math.floor(x4 / n2);
}
function padStart(input, n2 = 2) {
  const isNeg = input < 0;
  let padded;
  if (isNeg) {
    padded = "-" + ("" + -input).padStart(n2, "0");
  } else {
    padded = ("" + input).padStart(n2, "0");
  }
  return padded;
}
function parseInteger(string) {
  if (isUndefined(string) || string === null || string === "") {
    return void 0;
  } else {
    return parseInt(string, 10);
  }
}
function parseFloating(string) {
  if (isUndefined(string) || string === null || string === "") {
    return void 0;
  } else {
    return parseFloat(string);
  }
}
function parseMillis(fraction) {
  if (isUndefined(fraction) || fraction === null || fraction === "") {
    return void 0;
  } else {
    const f = parseFloat("0." + fraction) * 1e3;
    return Math.floor(f);
  }
}
function roundTo(number5, digits, towardZero = false) {
  const factor = 10 ** digits, rounder = towardZero ? Math.trunc : Math.round;
  return rounder(number5 * factor) / factor;
}
function isLeapYear(year2) {
  return year2 % 4 === 0 && (year2 % 100 !== 0 || year2 % 400 === 0);
}
function daysInYear(year2) {
  return isLeapYear(year2) ? 366 : 365;
}
function daysInMonth(year2, month2) {
  const modMonth = floorMod(month2 - 1, 12) + 1, modYear = year2 + (month2 - modMonth) / 12;
  if (modMonth === 2) {
    return isLeapYear(modYear) ? 29 : 28;
  } else {
    return [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][modMonth - 1];
  }
}
function objToLocalTS(obj) {
  let d = Date.UTC(
    obj.year,
    obj.month - 1,
    obj.day,
    obj.hour,
    obj.minute,
    obj.second,
    obj.millisecond
  );
  if (obj.year < 100 && obj.year >= 0) {
    d = new Date(d);
    d.setUTCFullYear(d.getUTCFullYear() - 1900);
  }
  return +d;
}
function weeksInWeekYear(weekYear) {
  const p1 = (weekYear + Math.floor(weekYear / 4) - Math.floor(weekYear / 100) + Math.floor(weekYear / 400)) % 7, last = weekYear - 1, p2 = (last + Math.floor(last / 4) - Math.floor(last / 100) + Math.floor(last / 400)) % 7;
  return p1 === 4 || p2 === 3 ? 53 : 52;
}
function untruncateYear(year2) {
  if (year2 > 99) {
    return year2;
  } else
    return year2 > 60 ? 1900 + year2 : 2e3 + year2;
}
function parseZoneInfo(ts, offsetFormat, locale3, timeZone = null) {
  const date2 = new Date(ts), intlOpts = {
    hourCycle: "h23",
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
    hour: "2-digit",
    minute: "2-digit"
  };
  if (timeZone) {
    intlOpts.timeZone = timeZone;
  }
  const modified = { timeZoneName: offsetFormat, ...intlOpts };
  const parsed = new Intl.DateTimeFormat(locale3, modified).formatToParts(date2).find((m2) => m2.type.toLowerCase() === "timezonename");
  return parsed ? parsed.value : null;
}
function signedOffset(offHourStr, offMinuteStr) {
  let offHour = parseInt(offHourStr, 10);
  if (Number.isNaN(offHour)) {
    offHour = 0;
  }
  const offMin = parseInt(offMinuteStr, 10) || 0, offMinSigned = offHour < 0 || Object.is(offHour, -0) ? -offMin : offMin;
  return offHour * 60 + offMinSigned;
}
function asNumber(value) {
  const numericValue = Number(value);
  if (typeof value === "boolean" || value === "" || Number.isNaN(numericValue))
    throw new InvalidArgumentError(`Invalid unit value ${value}`);
  return numericValue;
}
function normalizeObject(obj, normalizer) {
  const normalized = {};
  for (const u in obj) {
    if (hasOwnProperty(obj, u)) {
      const v = obj[u];
      if (v === void 0 || v === null)
        continue;
      normalized[normalizer(u)] = asNumber(v);
    }
  }
  return normalized;
}
function formatOffset(offset2, format2) {
  const hours2 = Math.trunc(Math.abs(offset2 / 60)), minutes2 = Math.trunc(Math.abs(offset2 % 60)), sign3 = offset2 >= 0 ? "+" : "-";
  switch (format2) {
    case "short":
      return `${sign3}${padStart(hours2, 2)}:${padStart(minutes2, 2)}`;
    case "narrow":
      return `${sign3}${hours2}${minutes2 > 0 ? `:${minutes2}` : ""}`;
    case "techie":
      return `${sign3}${padStart(hours2, 2)}${padStart(minutes2, 2)}`;
    default:
      throw new RangeError(`Value format ${format2} is out of range for property format`);
  }
}
function timeObject(obj) {
  return pick(obj, ["hour", "minute", "second", "millisecond"]);
}
var ianaRegex = /[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;

// node_modules/luxon/src/impl/english.js
var monthsLong = [
  "January",
  "February",
  "March",
  "April",
  "May",
  "June",
  "July",
  "August",
  "September",
  "October",
  "November",
  "December"
];
var monthsShort = [
  "Jan",
  "Feb",
  "Mar",
  "Apr",
  "May",
  "Jun",
  "Jul",
  "Aug",
  "Sep",
  "Oct",
  "Nov",
  "Dec"
];
var monthsNarrow = ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"];
function months(length3) {
  switch (length3) {
    case "narrow":
      return [...monthsNarrow];
    case "short":
      return [...monthsShort];
    case "long":
      return [...monthsLong];
    case "numeric":
      return ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"];
    case "2-digit":
      return ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"];
    default:
      return null;
  }
}
var weekdaysLong = [
  "Monday",
  "Tuesday",
  "Wednesday",
  "Thursday",
  "Friday",
  "Saturday",
  "Sunday"
];
var weekdaysShort = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
var weekdaysNarrow = ["M", "T", "W", "T", "F", "S", "S"];
function weekdays(length3) {
  switch (length3) {
    case "narrow":
      return [...weekdaysNarrow];
    case "short":
      return [...weekdaysShort];
    case "long":
      return [...weekdaysLong];
    case "numeric":
      return ["1", "2", "3", "4", "5", "6", "7"];
    default:
      return null;
  }
}
var meridiems = ["AM", "PM"];
var erasLong = ["Before Christ", "Anno Domini"];
var erasShort = ["BC", "AD"];
var erasNarrow = ["B", "A"];
function eras(length3) {
  switch (length3) {
    case "narrow":
      return [...erasNarrow];
    case "short":
      return [...erasShort];
    case "long":
      return [...erasLong];
    default:
      return null;
  }
}
function meridiemForDateTime(dt) {
  return meridiems[dt.hour < 12 ? 0 : 1];
}
function weekdayForDateTime(dt, length3) {
  return weekdays(length3)[dt.weekday - 1];
}
function monthForDateTime(dt, length3) {
  return months(length3)[dt.month - 1];
}
function eraForDateTime(dt, length3) {
  return eras(length3)[dt.year < 0 ? 0 : 1];
}
function formatRelativeTime(unit3, count3, numeric = "always", narrow = false) {
  const units = {
    years: ["year", "yr."],
    quarters: ["quarter", "qtr."],
    months: ["month", "mo."],
    weeks: ["week", "wk."],
    days: ["day", "day", "days"],
    hours: ["hour", "hr."],
    minutes: ["minute", "min."],
    seconds: ["second", "sec."]
  };
  const lastable = ["hours", "minutes", "seconds"].indexOf(unit3) === -1;
  if (numeric === "auto" && lastable) {
    const isDay = unit3 === "days";
    switch (count3) {
      case 1:
        return isDay ? "tomorrow" : `next ${units[unit3][0]}`;
      case -1:
        return isDay ? "yesterday" : `last ${units[unit3][0]}`;
      case 0:
        return isDay ? "today" : `this ${units[unit3][0]}`;
      default:
    }
  }
  const isInPast = Object.is(count3, -0) || count3 < 0, fmtValue = Math.abs(count3), singular = fmtValue === 1, lilUnits = units[unit3], fmtUnit = narrow ? singular ? lilUnits[1] : lilUnits[2] || lilUnits[1] : singular ? units[unit3][0] : unit3;
  return isInPast ? `${fmtValue} ${fmtUnit} ago` : `in ${fmtValue} ${fmtUnit}`;
}

// node_modules/luxon/src/impl/formatter.js
function stringifyTokens(splits, tokenToString) {
  let s3 = "";
  for (const token of splits) {
    if (token.literal) {
      s3 += token.val;
    } else {
      s3 += tokenToString(token.val);
    }
  }
  return s3;
}
var macroTokenToFormatOpts = {
  D: DATE_SHORT,
  DD: DATE_MED,
  DDD: DATE_FULL,
  DDDD: DATE_HUGE,
  t: TIME_SIMPLE,
  tt: TIME_WITH_SECONDS,
  ttt: TIME_WITH_SHORT_OFFSET,
  tttt: TIME_WITH_LONG_OFFSET,
  T: TIME_24_SIMPLE,
  TT: TIME_24_WITH_SECONDS,
  TTT: TIME_24_WITH_SHORT_OFFSET,
  TTTT: TIME_24_WITH_LONG_OFFSET,
  f: DATETIME_SHORT,
  ff: DATETIME_MED,
  fff: DATETIME_FULL,
  ffff: DATETIME_HUGE,
  F: DATETIME_SHORT_WITH_SECONDS,
  FF: DATETIME_MED_WITH_SECONDS,
  FFF: DATETIME_FULL_WITH_SECONDS,
  FFFF: DATETIME_HUGE_WITH_SECONDS
};
var Formatter = class {
  static create(locale3, opts = {}) {
    return new Formatter(locale3, opts);
  }
  static parseFormat(fmt) {
    let current = null, currentFull = "", bracketed = false;
    const splits = [];
    for (let i = 0; i < fmt.length; i++) {
      const c5 = fmt.charAt(i);
      if (c5 === "'") {
        if (currentFull.length > 0) {
          splits.push({ literal: bracketed, val: currentFull });
        }
        current = null;
        currentFull = "";
        bracketed = !bracketed;
      } else if (bracketed) {
        currentFull += c5;
      } else if (c5 === current) {
        currentFull += c5;
      } else {
        if (currentFull.length > 0) {
          splits.push({ literal: false, val: currentFull });
        }
        currentFull = c5;
        current = c5;
      }
    }
    if (currentFull.length > 0) {
      splits.push({ literal: bracketed, val: currentFull });
    }
    return splits;
  }
  static macroTokenToFormatOpts(token) {
    return macroTokenToFormatOpts[token];
  }
  constructor(locale3, formatOpts) {
    this.opts = formatOpts;
    this.loc = locale3;
    this.systemLoc = null;
  }
  formatWithSystemDefault(dt, opts) {
    if (this.systemLoc === null) {
      this.systemLoc = this.loc.redefaultToSystem();
    }
    const df = this.systemLoc.dtFormatter(dt, { ...this.opts, ...opts });
    return df.format();
  }
  formatDateTime(dt, opts = {}) {
    const df = this.loc.dtFormatter(dt, { ...this.opts, ...opts });
    return df.format();
  }
  formatDateTimeParts(dt, opts = {}) {
    const df = this.loc.dtFormatter(dt, { ...this.opts, ...opts });
    return df.formatToParts();
  }
  resolvedOptions(dt, opts = {}) {
    const df = this.loc.dtFormatter(dt, { ...this.opts, ...opts });
    return df.resolvedOptions();
  }
  num(n2, p = 0) {
    if (this.opts.forceSimple) {
      return padStart(n2, p);
    }
    const opts = { ...this.opts };
    if (p > 0) {
      opts.padTo = p;
    }
    return this.loc.numberFormatter(opts).format(n2);
  }
  formatDateTimeFromString(dt, fmt) {
    const knownEnglish = this.loc.listingMode() === "en", useDateTimeFormatter = this.loc.outputCalendar && this.loc.outputCalendar !== "gregory", string = (opts, extract) => this.loc.extract(dt, opts, extract), formatOffset2 = (opts) => {
      if (dt.isOffsetFixed && dt.offset === 0 && opts.allowZ) {
        return "Z";
      }
      return dt.isValid ? dt.zone.formatOffset(dt.ts, opts.format) : "";
    }, meridiem = () => knownEnglish ? meridiemForDateTime(dt) : string({ hour: "numeric", hourCycle: "h12" }, "dayperiod"), month2 = (length3, standalone) => knownEnglish ? monthForDateTime(dt, length3) : string(standalone ? { month: length3 } : { month: length3, day: "numeric" }, "month"), weekday2 = (length3, standalone) => knownEnglish ? weekdayForDateTime(dt, length3) : string(
      standalone ? { weekday: length3 } : { weekday: length3, month: "long", day: "numeric" },
      "weekday"
    ), maybeMacro = (token) => {
      const formatOpts = Formatter.macroTokenToFormatOpts(token);
      if (formatOpts) {
        return this.formatWithSystemDefault(dt, formatOpts);
      } else {
        return token;
      }
    }, era = (length3) => knownEnglish ? eraForDateTime(dt, length3) : string({ era: length3 }, "era"), tokenToString = (token) => {
      switch (token) {
        case "S":
          return this.num(dt.millisecond);
        case "u":
        case "SSS":
          return this.num(dt.millisecond, 3);
        case "s":
          return this.num(dt.second);
        case "ss":
          return this.num(dt.second, 2);
        case "uu":
          return this.num(Math.floor(dt.millisecond / 10), 2);
        case "uuu":
          return this.num(Math.floor(dt.millisecond / 100));
        case "m":
          return this.num(dt.minute);
        case "mm":
          return this.num(dt.minute, 2);
        case "h":
          return this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12);
        case "hh":
          return this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12, 2);
        case "H":
          return this.num(dt.hour);
        case "HH":
          return this.num(dt.hour, 2);
        case "Z":
          return formatOffset2({ format: "narrow", allowZ: this.opts.allowZ });
        case "ZZ":
          return formatOffset2({ format: "short", allowZ: this.opts.allowZ });
        case "ZZZ":
          return formatOffset2({ format: "techie", allowZ: this.opts.allowZ });
        case "ZZZZ":
          return dt.zone.offsetName(dt.ts, { format: "short", locale: this.loc.locale });
        case "ZZZZZ":
          return dt.zone.offsetName(dt.ts, { format: "long", locale: this.loc.locale });
        case "z":
          return dt.zoneName;
        case "a":
          return meridiem();
        case "d":
          return useDateTimeFormatter ? string({ day: "numeric" }, "day") : this.num(dt.day);
        case "dd":
          return useDateTimeFormatter ? string({ day: "2-digit" }, "day") : this.num(dt.day, 2);
        case "c":
          return this.num(dt.weekday);
        case "ccc":
          return weekday2("short", true);
        case "cccc":
          return weekday2("long", true);
        case "ccccc":
          return weekday2("narrow", true);
        case "E":
          return this.num(dt.weekday);
        case "EEE":
          return weekday2("short", false);
        case "EEEE":
          return weekday2("long", false);
        case "EEEEE":
          return weekday2("narrow", false);
        case "L":
          return useDateTimeFormatter ? string({ month: "numeric", day: "numeric" }, "month") : this.num(dt.month);
        case "LL":
          return useDateTimeFormatter ? string({ month: "2-digit", day: "numeric" }, "month") : this.num(dt.month, 2);
        case "LLL":
          return month2("short", true);
        case "LLLL":
          return month2("long", true);
        case "LLLLL":
          return month2("narrow", true);
        case "M":
          return useDateTimeFormatter ? string({ month: "numeric" }, "month") : this.num(dt.month);
        case "MM":
          return useDateTimeFormatter ? string({ month: "2-digit" }, "month") : this.num(dt.month, 2);
        case "MMM":
          return month2("short", false);
        case "MMMM":
          return month2("long", false);
        case "MMMMM":
          return month2("narrow", false);
        case "y":
          return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year);
        case "yy":
          return useDateTimeFormatter ? string({ year: "2-digit" }, "year") : this.num(dt.year.toString().slice(-2), 2);
        case "yyyy":
          return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year, 4);
        case "yyyyyy":
          return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year, 6);
        case "G":
          return era("short");
        case "GG":
          return era("long");
        case "GGGGG":
          return era("narrow");
        case "kk":
          return this.num(dt.weekYear.toString().slice(-2), 2);
        case "kkkk":
          return this.num(dt.weekYear, 4);
        case "W":
          return this.num(dt.weekNumber);
        case "WW":
          return this.num(dt.weekNumber, 2);
        case "o":
          return this.num(dt.ordinal);
        case "ooo":
          return this.num(dt.ordinal, 3);
        case "q":
          return this.num(dt.quarter);
        case "qq":
          return this.num(dt.quarter, 2);
        case "X":
          return this.num(Math.floor(dt.ts / 1e3));
        case "x":
          return this.num(dt.ts);
        default:
          return maybeMacro(token);
      }
    };
    return stringifyTokens(Formatter.parseFormat(fmt), tokenToString);
  }
  formatDurationFromString(dur, fmt) {
    const tokenToField = (token) => {
      switch (token[0]) {
        case "S":
          return "millisecond";
        case "s":
          return "second";
        case "m":
          return "minute";
        case "h":
          return "hour";
        case "d":
          return "day";
        case "w":
          return "week";
        case "M":
          return "month";
        case "y":
          return "year";
        default:
          return null;
      }
    }, tokenToString = (lildur) => (token) => {
      const mapped = tokenToField(token);
      if (mapped) {
        return this.num(lildur.get(mapped), token.length);
      } else {
        return token;
      }
    }, tokens = Formatter.parseFormat(fmt), realTokens = tokens.reduce(
      (found, { literal, val }) => literal ? found : found.concat(val),
      []
    ), collapsed = dur.shiftTo(...realTokens.map(tokenToField).filter((t) => t));
    return stringifyTokens(tokens, tokenToString(collapsed));
  }
};

// node_modules/luxon/src/impl/invalid.js
var Invalid = class {
  constructor(reason, explanation) {
    this.reason = reason;
    this.explanation = explanation;
  }
  toMessage() {
    if (this.explanation) {
      return `${this.reason}: ${this.explanation}`;
    } else {
      return this.reason;
    }
  }
};

// node_modules/luxon/src/zone.js
var Zone = class {
  get type() {
    throw new ZoneIsAbstractError();
  }
  get name() {
    throw new ZoneIsAbstractError();
  }
  get ianaName() {
    return this.name;
  }
  get isUniversal() {
    throw new ZoneIsAbstractError();
  }
  offsetName(ts, opts) {
    throw new ZoneIsAbstractError();
  }
  formatOffset(ts, format2) {
    throw new ZoneIsAbstractError();
  }
  offset(ts) {
    throw new ZoneIsAbstractError();
  }
  equals(otherZone) {
    throw new ZoneIsAbstractError();
  }
  get isValid() {
    throw new ZoneIsAbstractError();
  }
};

// node_modules/luxon/src/zones/systemZone.js
var singleton = null;
var SystemZone = class extends Zone {
  static get instance() {
    if (singleton === null) {
      singleton = new SystemZone();
    }
    return singleton;
  }
  get type() {
    return "system";
  }
  get name() {
    return new Intl.DateTimeFormat().resolvedOptions().timeZone;
  }
  get isUniversal() {
    return false;
  }
  offsetName(ts, { format: format2, locale: locale3 }) {
    return parseZoneInfo(ts, format2, locale3);
  }
  formatOffset(ts, format2) {
    return formatOffset(this.offset(ts), format2);
  }
  offset(ts) {
    return -new Date(ts).getTimezoneOffset();
  }
  equals(otherZone) {
    return otherZone.type === "system";
  }
  get isValid() {
    return true;
  }
};

// node_modules/luxon/src/zones/IANAZone.js
var dtfCache = {};
function makeDTF(zone) {
  if (!dtfCache[zone]) {
    dtfCache[zone] = new Intl.DateTimeFormat("en-US", {
      hour12: false,
      timeZone: zone,
      year: "numeric",
      month: "2-digit",
      day: "2-digit",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
      era: "short"
    });
  }
  return dtfCache[zone];
}
var typeToPos = {
  year: 0,
  month: 1,
  day: 2,
  era: 3,
  hour: 4,
  minute: 5,
  second: 6
};
function hackyOffset(dtf, date2) {
  const formatted = dtf.format(date2).replace(/\u200E/g, ""), parsed = /(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(formatted), [, fMonth, fDay, fYear, fadOrBc, fHour, fMinute, fSecond] = parsed;
  return [fYear, fMonth, fDay, fadOrBc, fHour, fMinute, fSecond];
}
function partsOffset(dtf, date2) {
  const formatted = dtf.formatToParts(date2);
  const filled = [];
  for (let i = 0; i < formatted.length; i++) {
    const { type: type2, value } = formatted[i];
    const pos = typeToPos[type2];
    if (type2 === "era") {
      filled[pos] = value;
    } else if (!isUndefined(pos)) {
      filled[pos] = parseInt(value, 10);
    }
  }
  return filled;
}
var ianaZoneCache = {};
var IANAZone = class extends Zone {
  static create(name) {
    if (!ianaZoneCache[name]) {
      ianaZoneCache[name] = new IANAZone(name);
    }
    return ianaZoneCache[name];
  }
  static resetCache() {
    ianaZoneCache = {};
    dtfCache = {};
  }
  static isValidSpecifier(s3) {
    return this.isValidZone(s3);
  }
  static isValidZone(zone) {
    if (!zone) {
      return false;
    }
    try {
      new Intl.DateTimeFormat("en-US", { timeZone: zone }).format();
      return true;
    } catch (e) {
      return false;
    }
  }
  constructor(name) {
    super();
    this.zoneName = name;
    this.valid = IANAZone.isValidZone(name);
  }
  get type() {
    return "iana";
  }
  get name() {
    return this.zoneName;
  }
  get isUniversal() {
    return false;
  }
  offsetName(ts, { format: format2, locale: locale3 }) {
    return parseZoneInfo(ts, format2, locale3, this.name);
  }
  formatOffset(ts, format2) {
    return formatOffset(this.offset(ts), format2);
  }
  offset(ts) {
    const date2 = new Date(ts);
    if (isNaN(date2))
      return NaN;
    const dtf = makeDTF(this.name);
    let [year2, month2, day2, adOrBc, hour2, minute2, second2] = dtf.formatToParts ? partsOffset(dtf, date2) : hackyOffset(dtf, date2);
    if (adOrBc === "BC") {
      year2 = -Math.abs(year2) + 1;
    }
    const adjustedHour = hour2 === 24 ? 0 : hour2;
    const asUTC = objToLocalTS({
      year: year2,
      month: month2,
      day: day2,
      hour: adjustedHour,
      minute: minute2,
      second: second2,
      millisecond: 0
    });
    let asTS = +date2;
    const over = asTS % 1e3;
    asTS -= over >= 0 ? over : 1e3 + over;
    return (asUTC - asTS) / (60 * 1e3);
  }
  equals(otherZone) {
    return otherZone.type === "iana" && otherZone.name === this.name;
  }
  get isValid() {
    return this.valid;
  }
};

// node_modules/luxon/src/zones/fixedOffsetZone.js
var singleton2 = null;
var FixedOffsetZone = class extends Zone {
  static get utcInstance() {
    if (singleton2 === null) {
      singleton2 = new FixedOffsetZone(0);
    }
    return singleton2;
  }
  static instance(offset2) {
    return offset2 === 0 ? FixedOffsetZone.utcInstance : new FixedOffsetZone(offset2);
  }
  static parseSpecifier(s3) {
    if (s3) {
      const r = s3.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);
      if (r) {
        return new FixedOffsetZone(signedOffset(r[1], r[2]));
      }
    }
    return null;
  }
  constructor(offset2) {
    super();
    this.fixed = offset2;
  }
  get type() {
    return "fixed";
  }
  get name() {
    return this.fixed === 0 ? "UTC" : `UTC${formatOffset(this.fixed, "narrow")}`;
  }
  get ianaName() {
    if (this.fixed === 0) {
      return "Etc/UTC";
    } else {
      return `Etc/GMT${formatOffset(-this.fixed, "narrow")}`;
    }
  }
  offsetName() {
    return this.name;
  }
  formatOffset(ts, format2) {
    return formatOffset(this.fixed, format2);
  }
  get isUniversal() {
    return true;
  }
  offset() {
    return this.fixed;
  }
  equals(otherZone) {
    return otherZone.type === "fixed" && otherZone.fixed === this.fixed;
  }
  get isValid() {
    return true;
  }
};

// node_modules/luxon/src/zones/invalidZone.js
var InvalidZone = class extends Zone {
  constructor(zoneName) {
    super();
    this.zoneName = zoneName;
  }
  get type() {
    return "invalid";
  }
  get name() {
    return this.zoneName;
  }
  get isUniversal() {
    return false;
  }
  offsetName() {
    return null;
  }
  formatOffset() {
    return "";
  }
  offset() {
    return NaN;
  }
  equals() {
    return false;
  }
  get isValid() {
    return false;
  }
};

// node_modules/luxon/src/impl/zoneUtil.js
function normalizeZone(input, defaultZone2) {
  let offset2;
  if (isUndefined(input) || input === null) {
    return defaultZone2;
  } else if (input instanceof Zone) {
    return input;
  } else if (isString(input)) {
    const lowered = input.toLowerCase();
    if (lowered === "default")
      return defaultZone2;
    else if (lowered === "local" || lowered === "system")
      return SystemZone.instance;
    else if (lowered === "utc" || lowered === "gmt")
      return FixedOffsetZone.utcInstance;
    else
      return FixedOffsetZone.parseSpecifier(lowered) || IANAZone.create(input);
  } else if (isNumber(input)) {
    return FixedOffsetZone.instance(input);
  } else if (typeof input === "object" && input.offset && typeof input.offset === "number") {
    return input;
  } else {
    return new InvalidZone(input);
  }
}

// node_modules/luxon/src/settings.js
var now = () => Date.now();
var defaultZone = "system";
var defaultLocale = null;
var defaultNumberingSystem = null;
var defaultOutputCalendar = null;
var throwOnInvalid;
var Settings = class {
  static get now() {
    return now;
  }
  static set now(n2) {
    now = n2;
  }
  static set defaultZone(zone) {
    defaultZone = zone;
  }
  static get defaultZone() {
    return normalizeZone(defaultZone, SystemZone.instance);
  }
  static get defaultLocale() {
    return defaultLocale;
  }
  static set defaultLocale(locale3) {
    defaultLocale = locale3;
  }
  static get defaultNumberingSystem() {
    return defaultNumberingSystem;
  }
  static set defaultNumberingSystem(numberingSystem) {
    defaultNumberingSystem = numberingSystem;
  }
  static get defaultOutputCalendar() {
    return defaultOutputCalendar;
  }
  static set defaultOutputCalendar(outputCalendar) {
    defaultOutputCalendar = outputCalendar;
  }
  static get throwOnInvalid() {
    return throwOnInvalid;
  }
  static set throwOnInvalid(t) {
    throwOnInvalid = t;
  }
  static resetCaches() {
    Locale.resetCache();
    IANAZone.resetCache();
  }
};

// node_modules/luxon/src/impl/locale.js
var intlLFCache = {};
function getCachedLF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let dtf = intlLFCache[key];
  if (!dtf) {
    dtf = new Intl.ListFormat(locString, opts);
    intlLFCache[key] = dtf;
  }
  return dtf;
}
var intlDTCache = {};
function getCachedDTF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let dtf = intlDTCache[key];
  if (!dtf) {
    dtf = new Intl.DateTimeFormat(locString, opts);
    intlDTCache[key] = dtf;
  }
  return dtf;
}
var intlNumCache = {};
function getCachedINF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let inf = intlNumCache[key];
  if (!inf) {
    inf = new Intl.NumberFormat(locString, opts);
    intlNumCache[key] = inf;
  }
  return inf;
}
var intlRelCache = {};
function getCachedRTF(locString, opts = {}) {
  const { base, ...cacheKeyOpts } = opts;
  const key = JSON.stringify([locString, cacheKeyOpts]);
  let inf = intlRelCache[key];
  if (!inf) {
    inf = new Intl.RelativeTimeFormat(locString, opts);
    intlRelCache[key] = inf;
  }
  return inf;
}
var sysLocaleCache = null;
function systemLocale() {
  if (sysLocaleCache) {
    return sysLocaleCache;
  } else {
    sysLocaleCache = new Intl.DateTimeFormat().resolvedOptions().locale;
    return sysLocaleCache;
  }
}
function parseLocaleString(localeStr) {
  const uIndex = localeStr.indexOf("-u-");
  if (uIndex === -1) {
    return [localeStr];
  } else {
    let options;
    const smaller = localeStr.substring(0, uIndex);
    try {
      options = getCachedDTF(localeStr).resolvedOptions();
    } catch (e) {
      options = getCachedDTF(smaller).resolvedOptions();
    }
    const { numberingSystem, calendar: calendar2 } = options;
    return [smaller, numberingSystem, calendar2];
  }
}
function intlConfigString(localeStr, numberingSystem, outputCalendar) {
  if (outputCalendar || numberingSystem) {
    localeStr += "-u";
    if (outputCalendar) {
      localeStr += `-ca-${outputCalendar}`;
    }
    if (numberingSystem) {
      localeStr += `-nu-${numberingSystem}`;
    }
    return localeStr;
  } else {
    return localeStr;
  }
}
function mapMonths(f) {
  const ms = [];
  for (let i = 1; i <= 12; i++) {
    const dt = DateTime.utc(2016, i, 1);
    ms.push(f(dt));
  }
  return ms;
}
function mapWeekdays(f) {
  const ms = [];
  for (let i = 1; i <= 7; i++) {
    const dt = DateTime.utc(2016, 11, 13 + i);
    ms.push(f(dt));
  }
  return ms;
}
function listStuff(loc, length3, defaultOK, englishFn, intlFn) {
  const mode = loc.listingMode(defaultOK);
  if (mode === "error") {
    return null;
  } else if (mode === "en") {
    return englishFn(length3);
  } else {
    return intlFn(length3);
  }
}
function supportsFastNumbers(loc) {
  if (loc.numberingSystem && loc.numberingSystem !== "latn") {
    return false;
  } else {
    return loc.numberingSystem === "latn" || !loc.locale || loc.locale.startsWith("en") || new Intl.DateTimeFormat(loc.intl).resolvedOptions().numberingSystem === "latn";
  }
}
var PolyNumberFormatter = class {
  constructor(intl, forceSimple, opts) {
    this.padTo = opts.padTo || 0;
    this.floor = opts.floor || false;
    const { padTo, floor, ...otherOpts } = opts;
    if (!forceSimple || Object.keys(otherOpts).length > 0) {
      const intlOpts = { useGrouping: false, ...opts };
      if (opts.padTo > 0)
        intlOpts.minimumIntegerDigits = opts.padTo;
      this.inf = getCachedINF(intl, intlOpts);
    }
  }
  format(i) {
    if (this.inf) {
      const fixed = this.floor ? Math.floor(i) : i;
      return this.inf.format(fixed);
    } else {
      const fixed = this.floor ? Math.floor(i) : roundTo(i, 3);
      return padStart(fixed, this.padTo);
    }
  }
};
var PolyDateFormatter = class {
  constructor(dt, intl, opts) {
    this.opts = opts;
    let z;
    if (dt.zone.isUniversal) {
      const gmtOffset = -1 * (dt.offset / 60);
      const offsetZ = gmtOffset >= 0 ? `Etc/GMT+${gmtOffset}` : `Etc/GMT${gmtOffset}`;
      if (dt.offset !== 0 && IANAZone.create(offsetZ).valid) {
        z = offsetZ;
        this.dt = dt;
      } else {
        z = "UTC";
        if (opts.timeZoneName) {
          this.dt = dt;
        } else {
          this.dt = dt.offset === 0 ? dt : DateTime.fromMillis(dt.ts + dt.offset * 60 * 1e3);
        }
      }
    } else if (dt.zone.type === "system") {
      this.dt = dt;
    } else {
      this.dt = dt;
      z = dt.zone.name;
    }
    const intlOpts = { ...this.opts };
    if (z) {
      intlOpts.timeZone = z;
    }
    this.dtf = getCachedDTF(intl, intlOpts);
  }
  format() {
    return this.dtf.format(this.dt.toJSDate());
  }
  formatToParts() {
    return this.dtf.formatToParts(this.dt.toJSDate());
  }
  resolvedOptions() {
    return this.dtf.resolvedOptions();
  }
};
var PolyRelFormatter = class {
  constructor(intl, isEnglish, opts) {
    this.opts = { style: "long", ...opts };
    if (!isEnglish && hasRelative()) {
      this.rtf = getCachedRTF(intl, opts);
    }
  }
  format(count3, unit3) {
    if (this.rtf) {
      return this.rtf.format(count3, unit3);
    } else {
      return formatRelativeTime(unit3, count3, this.opts.numeric, this.opts.style !== "long");
    }
  }
  formatToParts(count3, unit3) {
    if (this.rtf) {
      return this.rtf.formatToParts(count3, unit3);
    } else {
      return [];
    }
  }
};
var Locale = class {
  static fromOpts(opts) {
    return Locale.create(opts.locale, opts.numberingSystem, opts.outputCalendar, opts.defaultToEN);
  }
  static create(locale3, numberingSystem, outputCalendar, defaultToEN = false) {
    const specifiedLocale = locale3 || Settings.defaultLocale;
    const localeR = specifiedLocale || (defaultToEN ? "en-US" : systemLocale());
    const numberingSystemR = numberingSystem || Settings.defaultNumberingSystem;
    const outputCalendarR = outputCalendar || Settings.defaultOutputCalendar;
    return new Locale(localeR, numberingSystemR, outputCalendarR, specifiedLocale);
  }
  static resetCache() {
    sysLocaleCache = null;
    intlDTCache = {};
    intlNumCache = {};
    intlRelCache = {};
  }
  static fromObject({ locale: locale3, numberingSystem, outputCalendar } = {}) {
    return Locale.create(locale3, numberingSystem, outputCalendar);
  }
  constructor(locale3, numbering, outputCalendar, specifiedLocale) {
    const [parsedLocale, parsedNumberingSystem, parsedOutputCalendar] = parseLocaleString(locale3);
    this.locale = parsedLocale;
    this.numberingSystem = numbering || parsedNumberingSystem || null;
    this.outputCalendar = outputCalendar || parsedOutputCalendar || null;
    this.intl = intlConfigString(this.locale, this.numberingSystem, this.outputCalendar);
    this.weekdaysCache = { format: {}, standalone: {} };
    this.monthsCache = { format: {}, standalone: {} };
    this.meridiemCache = null;
    this.eraCache = {};
    this.specifiedLocale = specifiedLocale;
    this.fastNumbersCached = null;
  }
  get fastNumbers() {
    if (this.fastNumbersCached == null) {
      this.fastNumbersCached = supportsFastNumbers(this);
    }
    return this.fastNumbersCached;
  }
  listingMode() {
    const isActuallyEn = this.isEnglish();
    const hasNoWeirdness = (this.numberingSystem === null || this.numberingSystem === "latn") && (this.outputCalendar === null || this.outputCalendar === "gregory");
    return isActuallyEn && hasNoWeirdness ? "en" : "intl";
  }
  clone(alts) {
    if (!alts || Object.getOwnPropertyNames(alts).length === 0) {
      return this;
    } else {
      return Locale.create(
        alts.locale || this.specifiedLocale,
        alts.numberingSystem || this.numberingSystem,
        alts.outputCalendar || this.outputCalendar,
        alts.defaultToEN || false
      );
    }
  }
  redefaultToEN(alts = {}) {
    return this.clone({ ...alts, defaultToEN: true });
  }
  redefaultToSystem(alts = {}) {
    return this.clone({ ...alts, defaultToEN: false });
  }
  months(length3, format2 = false, defaultOK = true) {
    return listStuff(this, length3, defaultOK, months, () => {
      const intl = format2 ? { month: length3, day: "numeric" } : { month: length3 }, formatStr = format2 ? "format" : "standalone";
      if (!this.monthsCache[formatStr][length3]) {
        this.monthsCache[formatStr][length3] = mapMonths((dt) => this.extract(dt, intl, "month"));
      }
      return this.monthsCache[formatStr][length3];
    });
  }
  weekdays(length3, format2 = false, defaultOK = true) {
    return listStuff(this, length3, defaultOK, weekdays, () => {
      const intl = format2 ? { weekday: length3, year: "numeric", month: "long", day: "numeric" } : { weekday: length3 }, formatStr = format2 ? "format" : "standalone";
      if (!this.weekdaysCache[formatStr][length3]) {
        this.weekdaysCache[formatStr][length3] = mapWeekdays(
          (dt) => this.extract(dt, intl, "weekday")
        );
      }
      return this.weekdaysCache[formatStr][length3];
    });
  }
  meridiems(defaultOK = true) {
    return listStuff(
      this,
      void 0,
      defaultOK,
      () => meridiems,
      () => {
        if (!this.meridiemCache) {
          const intl = { hour: "numeric", hourCycle: "h12" };
          this.meridiemCache = [DateTime.utc(2016, 11, 13, 9), DateTime.utc(2016, 11, 13, 19)].map(
            (dt) => this.extract(dt, intl, "dayperiod")
          );
        }
        return this.meridiemCache;
      }
    );
  }
  eras(length3, defaultOK = true) {
    return listStuff(this, length3, defaultOK, eras, () => {
      const intl = { era: length3 };
      if (!this.eraCache[length3]) {
        this.eraCache[length3] = [DateTime.utc(-40, 1, 1), DateTime.utc(2017, 1, 1)].map(
          (dt) => this.extract(dt, intl, "era")
        );
      }
      return this.eraCache[length3];
    });
  }
  extract(dt, intlOpts, field) {
    const df = this.dtFormatter(dt, intlOpts), results = df.formatToParts(), matching = results.find((m2) => m2.type.toLowerCase() === field);
    return matching ? matching.value : null;
  }
  numberFormatter(opts = {}) {
    return new PolyNumberFormatter(this.intl, opts.forceSimple || this.fastNumbers, opts);
  }
  dtFormatter(dt, intlOpts = {}) {
    return new PolyDateFormatter(dt, this.intl, intlOpts);
  }
  relFormatter(opts = {}) {
    return new PolyRelFormatter(this.intl, this.isEnglish(), opts);
  }
  listFormatter(opts = {}) {
    return getCachedLF(this.intl, opts);
  }
  isEnglish() {
    return this.locale === "en" || this.locale.toLowerCase() === "en-us" || new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us");
  }
  equals(other) {
    return this.locale === other.locale && this.numberingSystem === other.numberingSystem && this.outputCalendar === other.outputCalendar;
  }
};

// node_modules/luxon/src/impl/regexParser.js
function combineRegexes(...regexes) {
  const full = regexes.reduce((f, r) => f + r.source, "");
  return RegExp(`^${full}$`);
}
function combineExtractors(...extractors) {
  return (m2) => extractors.reduce(
    ([mergedVals, mergedZone, cursor], ex) => {
      const [val, zone, next] = ex(m2, cursor);
      return [{ ...mergedVals, ...val }, zone || mergedZone, next];
    },
    [{}, null, 1]
  ).slice(0, 2);
}
function parse(s3, ...patterns) {
  if (s3 == null) {
    return [null, null];
  }
  for (const [regex, extractor] of patterns) {
    const m2 = regex.exec(s3);
    if (m2) {
      return extractor(m2);
    }
  }
  return [null, null];
}
function simpleParse(...keys) {
  return (match2, cursor) => {
    const ret = {};
    let i;
    for (i = 0; i < keys.length; i++) {
      ret[keys[i]] = parseInteger(match2[cursor + i]);
    }
    return [ret, null, cursor + i];
  };
}
var offsetRegex = /(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/;
var isoExtendedZone = `(?:${offsetRegex.source}?(?:\\[(${ianaRegex.source})\\])?)?`;
var isoTimeBaseRegex = /(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/;
var isoTimeRegex = RegExp(`${isoTimeBaseRegex.source}${isoExtendedZone}`);
var isoTimeExtensionRegex = RegExp(`(?:T${isoTimeRegex.source})?`);
var isoYmdRegex = /([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/;
var isoWeekRegex = /(\d{4})-?W(\d\d)(?:-?(\d))?/;
var isoOrdinalRegex = /(\d{4})-?(\d{3})/;
var extractISOWeekData = simpleParse("weekYear", "weekNumber", "weekDay");
var extractISOOrdinalData = simpleParse("year", "ordinal");
var sqlYmdRegex = /(\d{4})-(\d\d)-(\d\d)/;
var sqlTimeRegex = RegExp(
  `${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`
);
var sqlTimeExtensionRegex = RegExp(`(?: ${sqlTimeRegex.source})?`);
function int(match2, pos, fallback) {
  const m2 = match2[pos];
  return isUndefined(m2) ? fallback : parseInteger(m2);
}
function extractISOYmd(match2, cursor) {
  const item = {
    year: int(match2, cursor),
    month: int(match2, cursor + 1, 1),
    day: int(match2, cursor + 2, 1)
  };
  return [item, null, cursor + 3];
}
function extractISOTime(match2, cursor) {
  const item = {
    hours: int(match2, cursor, 0),
    minutes: int(match2, cursor + 1, 0),
    seconds: int(match2, cursor + 2, 0),
    milliseconds: parseMillis(match2[cursor + 3])
  };
  return [item, null, cursor + 4];
}
function extractISOOffset(match2, cursor) {
  const local3 = !match2[cursor] && !match2[cursor + 1], fullOffset = signedOffset(match2[cursor + 1], match2[cursor + 2]), zone = local3 ? null : FixedOffsetZone.instance(fullOffset);
  return [{}, zone, cursor + 3];
}
function extractIANAZone(match2, cursor) {
  const zone = match2[cursor] ? IANAZone.create(match2[cursor]) : null;
  return [{}, zone, cursor + 1];
}
var isoTimeOnly = RegExp(`^T?${isoTimeBaseRegex.source}$`);
var isoDuration = /^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;
function extractISODuration(match2) {
  const [s3, yearStr, monthStr, weekStr, dayStr, hourStr, minuteStr, secondStr, millisecondsStr] = match2;
  const hasNegativePrefix = s3[0] === "-";
  const negativeSeconds = secondStr && secondStr[0] === "-";
  const maybeNegate = (num, force = false) => num !== void 0 && (force || num && hasNegativePrefix) ? -num : num;
  return [
    {
      years: maybeNegate(parseFloating(yearStr)),
      months: maybeNegate(parseFloating(monthStr)),
      weeks: maybeNegate(parseFloating(weekStr)),
      days: maybeNegate(parseFloating(dayStr)),
      hours: maybeNegate(parseFloating(hourStr)),
      minutes: maybeNegate(parseFloating(minuteStr)),
      seconds: maybeNegate(parseFloating(secondStr), secondStr === "-0"),
      milliseconds: maybeNegate(parseMillis(millisecondsStr), negativeSeconds)
    }
  ];
}
var obsOffsets = {
  GMT: 0,
  EDT: -4 * 60,
  EST: -5 * 60,
  CDT: -5 * 60,
  CST: -6 * 60,
  MDT: -6 * 60,
  MST: -7 * 60,
  PDT: -7 * 60,
  PST: -8 * 60
};
function fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {
  const result = {
    year: yearStr.length === 2 ? untruncateYear(parseInteger(yearStr)) : parseInteger(yearStr),
    month: monthsShort.indexOf(monthStr) + 1,
    day: parseInteger(dayStr),
    hour: parseInteger(hourStr),
    minute: parseInteger(minuteStr)
  };
  if (secondStr)
    result.second = parseInteger(secondStr);
  if (weekdayStr) {
    result.weekday = weekdayStr.length > 3 ? weekdaysLong.indexOf(weekdayStr) + 1 : weekdaysShort.indexOf(weekdayStr) + 1;
  }
  return result;
}
var rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;
function extractRFC2822(match2) {
  const [
    ,
    weekdayStr,
    dayStr,
    monthStr,
    yearStr,
    hourStr,
    minuteStr,
    secondStr,
    obsOffset,
    milOffset,
    offHourStr,
    offMinuteStr
  ] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  let offset2;
  if (obsOffset) {
    offset2 = obsOffsets[obsOffset];
  } else if (milOffset) {
    offset2 = 0;
  } else {
    offset2 = signedOffset(offHourStr, offMinuteStr);
  }
  return [result, new FixedOffsetZone(offset2)];
}
function preprocessRFC2822(s3) {
  return s3.replace(/\([^)]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").trim();
}
var rfc1123 = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/;
var rfc850 = /^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/;
var ascii = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;
function extractRFC1123Or850(match2) {
  const [, weekdayStr, dayStr, monthStr, yearStr, hourStr, minuteStr, secondStr] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  return [result, FixedOffsetZone.utcInstance];
}
function extractASCII(match2) {
  const [, weekdayStr, monthStr, dayStr, hourStr, minuteStr, secondStr, yearStr] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  return [result, FixedOffsetZone.utcInstance];
}
var isoYmdWithTimeExtensionRegex = combineRegexes(isoYmdRegex, isoTimeExtensionRegex);
var isoWeekWithTimeExtensionRegex = combineRegexes(isoWeekRegex, isoTimeExtensionRegex);
var isoOrdinalWithTimeExtensionRegex = combineRegexes(isoOrdinalRegex, isoTimeExtensionRegex);
var isoTimeCombinedRegex = combineRegexes(isoTimeRegex);
var extractISOYmdTimeAndOffset = combineExtractors(
  extractISOYmd,
  extractISOTime,
  extractISOOffset,
  extractIANAZone
);
var extractISOWeekTimeAndOffset = combineExtractors(
  extractISOWeekData,
  extractISOTime,
  extractISOOffset,
  extractIANAZone
);
var extractISOOrdinalDateAndTime = combineExtractors(
  extractISOOrdinalData,
  extractISOTime,
  extractISOOffset,
  extractIANAZone
);
var extractISOTimeAndOffset = combineExtractors(
  extractISOTime,
  extractISOOffset,
  extractIANAZone
);
function parseISODate(s3) {
  return parse(
    s3,
    [isoYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset],
    [isoWeekWithTimeExtensionRegex, extractISOWeekTimeAndOffset],
    [isoOrdinalWithTimeExtensionRegex, extractISOOrdinalDateAndTime],
    [isoTimeCombinedRegex, extractISOTimeAndOffset]
  );
}
function parseRFC2822Date(s3) {
  return parse(preprocessRFC2822(s3), [rfc2822, extractRFC2822]);
}
function parseHTTPDate(s3) {
  return parse(
    s3,
    [rfc1123, extractRFC1123Or850],
    [rfc850, extractRFC1123Or850],
    [ascii, extractASCII]
  );
}
function parseISODuration(s3) {
  return parse(s3, [isoDuration, extractISODuration]);
}
var extractISOTimeOnly = combineExtractors(extractISOTime);
function parseISOTimeOnly(s3) {
  return parse(s3, [isoTimeOnly, extractISOTimeOnly]);
}
var sqlYmdWithTimeExtensionRegex = combineRegexes(sqlYmdRegex, sqlTimeExtensionRegex);
var sqlTimeCombinedRegex = combineRegexes(sqlTimeRegex);
var extractISOTimeOffsetAndIANAZone = combineExtractors(
  extractISOTime,
  extractISOOffset,
  extractIANAZone
);
function parseSQL(s3) {
  return parse(
    s3,
    [sqlYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset],
    [sqlTimeCombinedRegex, extractISOTimeOffsetAndIANAZone]
  );
}

// node_modules/luxon/src/duration.js
var INVALID = "Invalid Duration";
var lowOrderMatrix = {
  weeks: {
    days: 7,
    hours: 7 * 24,
    minutes: 7 * 24 * 60,
    seconds: 7 * 24 * 60 * 60,
    milliseconds: 7 * 24 * 60 * 60 * 1e3
  },
  days: {
    hours: 24,
    minutes: 24 * 60,
    seconds: 24 * 60 * 60,
    milliseconds: 24 * 60 * 60 * 1e3
  },
  hours: { minutes: 60, seconds: 60 * 60, milliseconds: 60 * 60 * 1e3 },
  minutes: { seconds: 60, milliseconds: 60 * 1e3 },
  seconds: { milliseconds: 1e3 }
};
var casualMatrix = {
  years: {
    quarters: 4,
    months: 12,
    weeks: 52,
    days: 365,
    hours: 365 * 24,
    minutes: 365 * 24 * 60,
    seconds: 365 * 24 * 60 * 60,
    milliseconds: 365 * 24 * 60 * 60 * 1e3
  },
  quarters: {
    months: 3,
    weeks: 13,
    days: 91,
    hours: 91 * 24,
    minutes: 91 * 24 * 60,
    seconds: 91 * 24 * 60 * 60,
    milliseconds: 91 * 24 * 60 * 60 * 1e3
  },
  months: {
    weeks: 4,
    days: 30,
    hours: 30 * 24,
    minutes: 30 * 24 * 60,
    seconds: 30 * 24 * 60 * 60,
    milliseconds: 30 * 24 * 60 * 60 * 1e3
  },
  ...lowOrderMatrix
};
var daysInYearAccurate = 146097 / 400;
var daysInMonthAccurate = 146097 / 4800;
var accurateMatrix = {
  years: {
    quarters: 4,
    months: 12,
    weeks: daysInYearAccurate / 7,
    days: daysInYearAccurate,
    hours: daysInYearAccurate * 24,
    minutes: daysInYearAccurate * 24 * 60,
    seconds: daysInYearAccurate * 24 * 60 * 60,
    milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1e3
  },
  quarters: {
    months: 3,
    weeks: daysInYearAccurate / 28,
    days: daysInYearAccurate / 4,
    hours: daysInYearAccurate * 24 / 4,
    minutes: daysInYearAccurate * 24 * 60 / 4,
    seconds: daysInYearAccurate * 24 * 60 * 60 / 4,
    milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1e3 / 4
  },
  months: {
    weeks: daysInMonthAccurate / 7,
    days: daysInMonthAccurate,
    hours: daysInMonthAccurate * 24,
    minutes: daysInMonthAccurate * 24 * 60,
    seconds: daysInMonthAccurate * 24 * 60 * 60,
    milliseconds: daysInMonthAccurate * 24 * 60 * 60 * 1e3
  },
  ...lowOrderMatrix
};
var orderedUnits = [
  "years",
  "quarters",
  "months",
  "weeks",
  "days",
  "hours",
  "minutes",
  "seconds",
  "milliseconds"
];
var reverseUnits = orderedUnits.slice(0).reverse();
function clone(dur, alts, clear = false) {
  const conf = {
    values: clear ? alts.values : { ...dur.values, ...alts.values || {} },
    loc: dur.loc.clone(alts.loc),
    conversionAccuracy: alts.conversionAccuracy || dur.conversionAccuracy,
    matrix: alts.matrix || dur.matrix
  };
  return new Duration(conf);
}
function antiTrunc(n2) {
  return n2 < 0 ? Math.floor(n2) : Math.ceil(n2);
}
function convert(matrix, fromMap, fromUnit, toMap, toUnit) {
  const conv = matrix[toUnit][fromUnit], raw = fromMap[fromUnit] / conv, sameSign = Math.sign(raw) === Math.sign(toMap[toUnit]), added = !sameSign && toMap[toUnit] !== 0 && Math.abs(raw) <= 1 ? antiTrunc(raw) : Math.trunc(raw);
  toMap[toUnit] += added;
  fromMap[fromUnit] -= added * conv;
}
function normalizeValues(matrix, vals) {
  reverseUnits.reduce((previous, current) => {
    if (!isUndefined(vals[current])) {
      if (previous) {
        convert(matrix, vals, previous, vals, current);
      }
      return current;
    } else {
      return previous;
    }
  }, null);
}
var Duration = class {
  constructor(config) {
    const accurate = config.conversionAccuracy === "longterm" || false;
    let matrix = accurate ? accurateMatrix : casualMatrix;
    if (config.matrix) {
      matrix = config.matrix;
    }
    this.values = config.values;
    this.loc = config.loc || Locale.create();
    this.conversionAccuracy = accurate ? "longterm" : "casual";
    this.invalid = config.invalid || null;
    this.matrix = matrix;
    this.isLuxonDuration = true;
  }
  static fromMillis(count3, opts) {
    return Duration.fromObject({ milliseconds: count3 }, opts);
  }
  static fromObject(obj, opts = {}) {
    if (obj == null || typeof obj !== "object") {
      throw new InvalidArgumentError(
        `Duration.fromObject: argument expected to be an object, got ${obj === null ? "null" : typeof obj}`
      );
    }
    return new Duration({
      values: normalizeObject(obj, Duration.normalizeUnit),
      loc: Locale.fromObject(opts),
      conversionAccuracy: opts.conversionAccuracy,
      matrix: opts.matrix
    });
  }
  static fromDurationLike(durationLike) {
    if (isNumber(durationLike)) {
      return Duration.fromMillis(durationLike);
    } else if (Duration.isDuration(durationLike)) {
      return durationLike;
    } else if (typeof durationLike === "object") {
      return Duration.fromObject(durationLike);
    } else {
      throw new InvalidArgumentError(
        `Unknown duration argument ${durationLike} of type ${typeof durationLike}`
      );
    }
  }
  static fromISO(text, opts) {
    const [parsed] = parseISODuration(text);
    if (parsed) {
      return Duration.fromObject(parsed, opts);
    } else {
      return Duration.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
    }
  }
  static fromISOTime(text, opts) {
    const [parsed] = parseISOTimeOnly(text);
    if (parsed) {
      return Duration.fromObject(parsed, opts);
    } else {
      return Duration.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
    }
  }
  static invalid(reason, explanation = null) {
    if (!reason) {
      throw new InvalidArgumentError("need to specify a reason the Duration is invalid");
    }
    const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
    if (Settings.throwOnInvalid) {
      throw new InvalidDurationError(invalid);
    } else {
      return new Duration({ invalid });
    }
  }
  static normalizeUnit(unit3) {
    const normalized = {
      year: "years",
      years: "years",
      quarter: "quarters",
      quarters: "quarters",
      month: "months",
      months: "months",
      week: "weeks",
      weeks: "weeks",
      day: "days",
      days: "days",
      hour: "hours",
      hours: "hours",
      minute: "minutes",
      minutes: "minutes",
      second: "seconds",
      seconds: "seconds",
      millisecond: "milliseconds",
      milliseconds: "milliseconds"
    }[unit3 ? unit3.toLowerCase() : unit3];
    if (!normalized)
      throw new InvalidUnitError(unit3);
    return normalized;
  }
  static isDuration(o) {
    return o && o.isLuxonDuration || false;
  }
  get locale() {
    return this.isValid ? this.loc.locale : null;
  }
  get numberingSystem() {
    return this.isValid ? this.loc.numberingSystem : null;
  }
  toFormat(fmt, opts = {}) {
    const fmtOpts = {
      ...opts,
      floor: opts.round !== false && opts.floor !== false
    };
    return this.isValid ? Formatter.create(this.loc, fmtOpts).formatDurationFromString(this, fmt) : INVALID;
  }
  toHuman(opts = {}) {
    const l2 = orderedUnits.map((unit3) => {
      const val = this.values[unit3];
      if (isUndefined(val)) {
        return null;
      }
      return this.loc.numberFormatter({ style: "unit", unitDisplay: "long", ...opts, unit: unit3.slice(0, -1) }).format(val);
    }).filter((n2) => n2);
    return this.loc.listFormatter({ type: "conjunction", style: opts.listStyle || "narrow", ...opts }).format(l2);
  }
  toObject() {
    if (!this.isValid)
      return {};
    return { ...this.values };
  }
  toISO() {
    if (!this.isValid)
      return null;
    let s3 = "P";
    if (this.years !== 0)
      s3 += this.years + "Y";
    if (this.months !== 0 || this.quarters !== 0)
      s3 += this.months + this.quarters * 3 + "M";
    if (this.weeks !== 0)
      s3 += this.weeks + "W";
    if (this.days !== 0)
      s3 += this.days + "D";
    if (this.hours !== 0 || this.minutes !== 0 || this.seconds !== 0 || this.milliseconds !== 0)
      s3 += "T";
    if (this.hours !== 0)
      s3 += this.hours + "H";
    if (this.minutes !== 0)
      s3 += this.minutes + "M";
    if (this.seconds !== 0 || this.milliseconds !== 0)
      s3 += roundTo(this.seconds + this.milliseconds / 1e3, 3) + "S";
    if (s3 === "P")
      s3 += "T0S";
    return s3;
  }
  toISOTime(opts = {}) {
    if (!this.isValid)
      return null;
    const millis = this.toMillis();
    if (millis < 0 || millis >= 864e5)
      return null;
    opts = {
      suppressMilliseconds: false,
      suppressSeconds: false,
      includePrefix: false,
      format: "extended",
      ...opts
    };
    const value = this.shiftTo("hours", "minutes", "seconds", "milliseconds");
    let fmt = opts.format === "basic" ? "hhmm" : "hh:mm";
    if (!opts.suppressSeconds || value.seconds !== 0 || value.milliseconds !== 0) {
      fmt += opts.format === "basic" ? "ss" : ":ss";
      if (!opts.suppressMilliseconds || value.milliseconds !== 0) {
        fmt += ".SSS";
      }
    }
    let str = value.toFormat(fmt);
    if (opts.includePrefix) {
      str = "T" + str;
    }
    return str;
  }
  toJSON() {
    return this.toISO();
  }
  toString() {
    return this.toISO();
  }
  toMillis() {
    return this.as("milliseconds");
  }
  valueOf() {
    return this.toMillis();
  }
  plus(duration) {
    if (!this.isValid)
      return this;
    const dur = Duration.fromDurationLike(duration), result = {};
    for (const k2 of orderedUnits) {
      if (hasOwnProperty(dur.values, k2) || hasOwnProperty(this.values, k2)) {
        result[k2] = dur.get(k2) + this.get(k2);
      }
    }
    return clone(this, { values: result }, true);
  }
  minus(duration) {
    if (!this.isValid)
      return this;
    const dur = Duration.fromDurationLike(duration);
    return this.plus(dur.negate());
  }
  mapUnits(fn) {
    if (!this.isValid)
      return this;
    const result = {};
    for (const k2 of Object.keys(this.values)) {
      result[k2] = asNumber(fn(this.values[k2], k2));
    }
    return clone(this, { values: result }, true);
  }
  get(unit3) {
    return this[Duration.normalizeUnit(unit3)];
  }
  set(values) {
    if (!this.isValid)
      return this;
    const mixed = { ...this.values, ...normalizeObject(values, Duration.normalizeUnit) };
    return clone(this, { values: mixed });
  }
  reconfigure({ locale: locale3, numberingSystem, conversionAccuracy, matrix } = {}) {
    const loc = this.loc.clone({ locale: locale3, numberingSystem });
    const opts = { loc, matrix, conversionAccuracy };
    return clone(this, opts);
  }
  as(unit3) {
    return this.isValid ? this.shiftTo(unit3).get(unit3) : NaN;
  }
  normalize() {
    if (!this.isValid)
      return this;
    const vals = this.toObject();
    normalizeValues(this.matrix, vals);
    return clone(this, { values: vals }, true);
  }
  shiftTo(...units) {
    if (!this.isValid)
      return this;
    if (units.length === 0) {
      return this;
    }
    units = units.map((u) => Duration.normalizeUnit(u));
    const built = {}, accumulated = {}, vals = this.toObject();
    let lastUnit;
    for (const k2 of orderedUnits) {
      if (units.indexOf(k2) >= 0) {
        lastUnit = k2;
        let own = 0;
        for (const ak in accumulated) {
          own += this.matrix[ak][k2] * accumulated[ak];
          accumulated[ak] = 0;
        }
        if (isNumber(vals[k2])) {
          own += vals[k2];
        }
        const i = Math.trunc(own);
        built[k2] = i;
        accumulated[k2] = (own * 1e3 - i * 1e3) / 1e3;
        for (const down in vals) {
          if (orderedUnits.indexOf(down) > orderedUnits.indexOf(k2)) {
            convert(this.matrix, vals, down, built, k2);
          }
        }
      } else if (isNumber(vals[k2])) {
        accumulated[k2] = vals[k2];
      }
    }
    for (const key in accumulated) {
      if (accumulated[key] !== 0) {
        built[lastUnit] += key === lastUnit ? accumulated[key] : accumulated[key] / this.matrix[lastUnit][key];
      }
    }
    return clone(this, { values: built }, true).normalize();
  }
  negate() {
    if (!this.isValid)
      return this;
    const negated = {};
    for (const k2 of Object.keys(this.values)) {
      negated[k2] = this.values[k2] === 0 ? 0 : -this.values[k2];
    }
    return clone(this, { values: negated }, true);
  }
  get years() {
    return this.isValid ? this.values.years || 0 : NaN;
  }
  get quarters() {
    return this.isValid ? this.values.quarters || 0 : NaN;
  }
  get months() {
    return this.isValid ? this.values.months || 0 : NaN;
  }
  get weeks() {
    return this.isValid ? this.values.weeks || 0 : NaN;
  }
  get days() {
    return this.isValid ? this.values.days || 0 : NaN;
  }
  get hours() {
    return this.isValid ? this.values.hours || 0 : NaN;
  }
  get minutes() {
    return this.isValid ? this.values.minutes || 0 : NaN;
  }
  get seconds() {
    return this.isValid ? this.values.seconds || 0 : NaN;
  }
  get milliseconds() {
    return this.isValid ? this.values.milliseconds || 0 : NaN;
  }
  get isValid() {
    return this.invalid === null;
  }
  get invalidReason() {
    return this.invalid ? this.invalid.reason : null;
  }
  get invalidExplanation() {
    return this.invalid ? this.invalid.explanation : null;
  }
  equals(other) {
    if (!this.isValid || !other.isValid) {
      return false;
    }
    if (!this.loc.equals(other.loc)) {
      return false;
    }
    function eq(v1, v2) {
      if (v1 === void 0 || v1 === 0)
        return v2 === void 0 || v2 === 0;
      return v1 === v2;
    }
    for (const u of orderedUnits) {
      if (!eq(this.values[u], other.values[u])) {
        return false;
      }
    }
    return true;
  }
};

// node_modules/luxon/src/interval.js
var INVALID2 = "Invalid Interval";
function validateStartEnd(start2, end) {
  if (!start2 || !start2.isValid) {
    return Interval.invalid("missing or invalid start");
  } else if (!end || !end.isValid) {
    return Interval.invalid("missing or invalid end");
  } else if (end < start2) {
    return Interval.invalid(
      "end before start",
      `The end of an interval must be after its start, but you had start=${start2.toISO()} and end=${end.toISO()}`
    );
  } else {
    return null;
  }
}
var Interval = class {
  constructor(config) {
    this.s = config.start;
    this.e = config.end;
    this.invalid = config.invalid || null;
    this.isLuxonInterval = true;
  }
  static invalid(reason, explanation = null) {
    if (!reason) {
      throw new InvalidArgumentError("need to specify a reason the Interval is invalid");
    }
    const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
    if (Settings.throwOnInvalid) {
      throw new InvalidIntervalError(invalid);
    } else {
      return new Interval({ invalid });
    }
  }
  static fromDateTimes(start2, end) {
    const builtStart = friendlyDateTime(start2), builtEnd = friendlyDateTime(end);
    const validateError = validateStartEnd(builtStart, builtEnd);
    if (validateError == null) {
      return new Interval({
        start: builtStart,
        end: builtEnd
      });
    } else {
      return validateError;
    }
  }
  static after(start2, duration) {
    const dur = Duration.fromDurationLike(duration), dt = friendlyDateTime(start2);
    return Interval.fromDateTimes(dt, dt.plus(dur));
  }
  static before(end, duration) {
    const dur = Duration.fromDurationLike(duration), dt = friendlyDateTime(end);
    return Interval.fromDateTimes(dt.minus(dur), dt);
  }
  static fromISO(text, opts) {
    const [s3, e] = (text || "").split("/", 2);
    if (s3 && e) {
      let start2, startIsValid;
      try {
        start2 = DateTime.fromISO(s3, opts);
        startIsValid = start2.isValid;
      } catch (e3) {
        startIsValid = false;
      }
      let end, endIsValid;
      try {
        end = DateTime.fromISO(e, opts);
        endIsValid = end.isValid;
      } catch (e3) {
        endIsValid = false;
      }
      if (startIsValid && endIsValid) {
        return Interval.fromDateTimes(start2, end);
      }
      if (startIsValid) {
        const dur = Duration.fromISO(e, opts);
        if (dur.isValid) {
          return Interval.after(start2, dur);
        }
      } else if (endIsValid) {
        const dur = Duration.fromISO(s3, opts);
        if (dur.isValid) {
          return Interval.before(end, dur);
        }
      }
    }
    return Interval.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
  }
  static isInterval(o) {
    return o && o.isLuxonInterval || false;
  }
  get start() {
    return this.isValid ? this.s : null;
  }
  get end() {
    return this.isValid ? this.e : null;
  }
  get isValid() {
    return this.invalidReason === null;
  }
  get invalidReason() {
    return this.invalid ? this.invalid.reason : null;
  }
  get invalidExplanation() {
    return this.invalid ? this.invalid.explanation : null;
  }
  length(unit3 = "milliseconds") {
    return this.isValid ? this.toDuration(...[unit3]).get(unit3) : NaN;
  }
  count(unit3 = "milliseconds") {
    if (!this.isValid)
      return NaN;
    const start2 = this.start.startOf(unit3), end = this.end.startOf(unit3);
    return Math.floor(end.diff(start2, unit3).get(unit3)) + 1;
  }
  hasSame(unit3) {
    return this.isValid ? this.isEmpty() || this.e.minus(1).hasSame(this.s, unit3) : false;
  }
  isEmpty() {
    return this.s.valueOf() === this.e.valueOf();
  }
  isAfter(dateTime) {
    if (!this.isValid)
      return false;
    return this.s > dateTime;
  }
  isBefore(dateTime) {
    if (!this.isValid)
      return false;
    return this.e <= dateTime;
  }
  contains(dateTime) {
    if (!this.isValid)
      return false;
    return this.s <= dateTime && this.e > dateTime;
  }
  set({ start: start2, end } = {}) {
    if (!this.isValid)
      return this;
    return Interval.fromDateTimes(start2 || this.s, end || this.e);
  }
  splitAt(...dateTimes) {
    if (!this.isValid)
      return [];
    const sorted = dateTimes.map(friendlyDateTime).filter((d) => this.contains(d)).sort(), results = [];
    let { s: s3 } = this, i = 0;
    while (s3 < this.e) {
      const added = sorted[i] || this.e, next = +added > +this.e ? this.e : added;
      results.push(Interval.fromDateTimes(s3, next));
      s3 = next;
      i += 1;
    }
    return results;
  }
  splitBy(duration) {
    const dur = Duration.fromDurationLike(duration);
    if (!this.isValid || !dur.isValid || dur.as("milliseconds") === 0) {
      return [];
    }
    let { s: s3 } = this, idx = 1, next;
    const results = [];
    while (s3 < this.e) {
      const added = this.start.plus(dur.mapUnits((x4) => x4 * idx));
      next = +added > +this.e ? this.e : added;
      results.push(Interval.fromDateTimes(s3, next));
      s3 = next;
      idx += 1;
    }
    return results;
  }
  divideEqually(numberOfParts) {
    if (!this.isValid)
      return [];
    return this.splitBy(this.length() / numberOfParts).slice(0, numberOfParts);
  }
  overlaps(other) {
    return this.e > other.s && this.s < other.e;
  }
  abutsStart(other) {
    if (!this.isValid)
      return false;
    return +this.e === +other.s;
  }
  abutsEnd(other) {
    if (!this.isValid)
      return false;
    return +other.e === +this.s;
  }
  engulfs(other) {
    if (!this.isValid)
      return false;
    return this.s <= other.s && this.e >= other.e;
  }
  equals(other) {
    if (!this.isValid || !other.isValid) {
      return false;
    }
    return this.s.equals(other.s) && this.e.equals(other.e);
  }
  intersection(other) {
    if (!this.isValid)
      return this;
    const s3 = this.s > other.s ? this.s : other.s, e = this.e < other.e ? this.e : other.e;
    if (s3 >= e) {
      return null;
    } else {
      return Interval.fromDateTimes(s3, e);
    }
  }
  union(other) {
    if (!this.isValid)
      return this;
    const s3 = this.s < other.s ? this.s : other.s, e = this.e > other.e ? this.e : other.e;
    return Interval.fromDateTimes(s3, e);
  }
  static merge(intervals) {
    const [found, final] = intervals.sort((a3, b) => a3.s - b.s).reduce(
      ([sofar, current], item) => {
        if (!current) {
          return [sofar, item];
        } else if (current.overlaps(item) || current.abutsStart(item)) {
          return [sofar, current.union(item)];
        } else {
          return [sofar.concat([current]), item];
        }
      },
      [[], null]
    );
    if (final) {
      found.push(final);
    }
    return found;
  }
  static xor(intervals) {
    let start2 = null, currentCount = 0;
    const results = [], ends = intervals.map((i) => [
      { time: i.s, type: "s" },
      { time: i.e, type: "e" }
    ]), flattened = Array.prototype.concat(...ends), arr = flattened.sort((a3, b) => a3.time - b.time);
    for (const i of arr) {
      currentCount += i.type === "s" ? 1 : -1;
      if (currentCount === 1) {
        start2 = i.time;
      } else {
        if (start2 && +start2 !== +i.time) {
          results.push(Interval.fromDateTimes(start2, i.time));
        }
        start2 = null;
      }
    }
    return Interval.merge(results);
  }
  difference(...intervals) {
    return Interval.xor([this].concat(intervals)).map((i) => this.intersection(i)).filter((i) => i && !i.isEmpty());
  }
  toString() {
    if (!this.isValid)
      return INVALID2;
    return `[${this.s.toISO()} \u2013 ${this.e.toISO()})`;
  }
  toISO(opts) {
    if (!this.isValid)
      return INVALID2;
    return `${this.s.toISO(opts)}/${this.e.toISO(opts)}`;
  }
  toISODate() {
    if (!this.isValid)
      return INVALID2;
    return `${this.s.toISODate()}/${this.e.toISODate()}`;
  }
  toISOTime(opts) {
    if (!this.isValid)
      return INVALID2;
    return `${this.s.toISOTime(opts)}/${this.e.toISOTime(opts)}`;
  }
  toFormat(dateFormat, { separator = " \u2013 " } = {}) {
    if (!this.isValid)
      return INVALID2;
    return `${this.s.toFormat(dateFormat)}${separator}${this.e.toFormat(dateFormat)}`;
  }
  toDuration(unit3, opts) {
    if (!this.isValid) {
      return Duration.invalid(this.invalidReason);
    }
    return this.e.diff(this.s, unit3, opts);
  }
  mapEndpoints(mapFn) {
    return Interval.fromDateTimes(mapFn(this.s), mapFn(this.e));
  }
};

// node_modules/luxon/src/info.js
var Info = class {
  static hasDST(zone = Settings.defaultZone) {
    const proto = DateTime.now().setZone(zone).set({ month: 12 });
    return !zone.isUniversal && proto.offset !== proto.set({ month: 6 }).offset;
  }
  static isValidIANAZone(zone) {
    return IANAZone.isValidZone(zone);
  }
  static normalizeZone(input) {
    return normalizeZone(input, Settings.defaultZone);
  }
  static months(length3 = "long", { locale: locale3 = null, numberingSystem = null, locObj = null, outputCalendar = "gregory" } = {}) {
    return (locObj || Locale.create(locale3, numberingSystem, outputCalendar)).months(length3);
  }
  static monthsFormat(length3 = "long", { locale: locale3 = null, numberingSystem = null, locObj = null, outputCalendar = "gregory" } = {}) {
    return (locObj || Locale.create(locale3, numberingSystem, outputCalendar)).months(length3, true);
  }
  static weekdays(length3 = "long", { locale: locale3 = null, numberingSystem = null, locObj = null } = {}) {
    return (locObj || Locale.create(locale3, numberingSystem, null)).weekdays(length3);
  }
  static weekdaysFormat(length3 = "long", { locale: locale3 = null, numberingSystem = null, locObj = null } = {}) {
    return (locObj || Locale.create(locale3, numberingSystem, null)).weekdays(length3, true);
  }
  static meridiems({ locale: locale3 = null } = {}) {
    return Locale.create(locale3).meridiems();
  }
  static eras(length3 = "short", { locale: locale3 = null } = {}) {
    return Locale.create(locale3, null, "gregory").eras(length3);
  }
  static features() {
    return { relative: hasRelative() };
  }
};

// node_modules/luxon/src/impl/diff.js
function dayDiff(earlier, later) {
  const utcDayStart = (dt) => dt.toUTC(0, { keepLocalTime: true }).startOf("day").valueOf(), ms = utcDayStart(later) - utcDayStart(earlier);
  return Math.floor(Duration.fromMillis(ms).as("days"));
}
function highOrderDiffs(cursor, later, units) {
  const differs = [
    ["years", (a3, b) => b.year - a3.year],
    ["quarters", (a3, b) => b.quarter - a3.quarter],
    ["months", (a3, b) => b.month - a3.month + (b.year - a3.year) * 12],
    [
      "weeks",
      (a3, b) => {
        const days2 = dayDiff(a3, b);
        return (days2 - days2 % 7) / 7;
      }
    ],
    ["days", dayDiff]
  ];
  const results = {};
  let lowestOrder, highWater;
  for (const [unit3, differ] of differs) {
    if (units.indexOf(unit3) >= 0) {
      lowestOrder = unit3;
      let delta = differ(cursor, later);
      highWater = cursor.plus({ [unit3]: delta });
      if (highWater > later) {
        cursor = cursor.plus({ [unit3]: delta - 1 });
        delta -= 1;
      } else {
        cursor = highWater;
      }
      results[unit3] = delta;
    }
  }
  return [cursor, results, highWater, lowestOrder];
}
function diff_default(earlier, later, units, opts) {
  let [cursor, results, highWater, lowestOrder] = highOrderDiffs(earlier, later, units);
  const remainingMillis = later - cursor;
  const lowerOrderUnits = units.filter(
    (u) => ["hours", "minutes", "seconds", "milliseconds"].indexOf(u) >= 0
  );
  if (lowerOrderUnits.length === 0) {
    if (highWater < later) {
      highWater = cursor.plus({ [lowestOrder]: 1 });
    }
    if (highWater !== cursor) {
      results[lowestOrder] = (results[lowestOrder] || 0) + remainingMillis / (highWater - cursor);
    }
  }
  const duration = Duration.fromObject(results, opts);
  if (lowerOrderUnits.length > 0) {
    return Duration.fromMillis(remainingMillis, opts).shiftTo(...lowerOrderUnits).plus(duration);
  } else {
    return duration;
  }
}

// node_modules/luxon/src/impl/digits.js
var numberingSystems = {
  arab: "[\u0660-\u0669]",
  arabext: "[\u06F0-\u06F9]",
  bali: "[\u1B50-\u1B59]",
  beng: "[\u09E6-\u09EF]",
  deva: "[\u0966-\u096F]",
  fullwide: "[\uFF10-\uFF19]",
  gujr: "[\u0AE6-\u0AEF]",
  hanidec: "[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",
  khmr: "[\u17E0-\u17E9]",
  knda: "[\u0CE6-\u0CEF]",
  laoo: "[\u0ED0-\u0ED9]",
  limb: "[\u1946-\u194F]",
  mlym: "[\u0D66-\u0D6F]",
  mong: "[\u1810-\u1819]",
  mymr: "[\u1040-\u1049]",
  orya: "[\u0B66-\u0B6F]",
  tamldec: "[\u0BE6-\u0BEF]",
  telu: "[\u0C66-\u0C6F]",
  thai: "[\u0E50-\u0E59]",
  tibt: "[\u0F20-\u0F29]",
  latn: "\\d"
};
var numberingSystemsUTF16 = {
  arab: [1632, 1641],
  arabext: [1776, 1785],
  bali: [6992, 7001],
  beng: [2534, 2543],
  deva: [2406, 2415],
  fullwide: [65296, 65303],
  gujr: [2790, 2799],
  khmr: [6112, 6121],
  knda: [3302, 3311],
  laoo: [3792, 3801],
  limb: [6470, 6479],
  mlym: [3430, 3439],
  mong: [6160, 6169],
  mymr: [4160, 4169],
  orya: [2918, 2927],
  tamldec: [3046, 3055],
  telu: [3174, 3183],
  thai: [3664, 3673],
  tibt: [3872, 3881]
};
var hanidecChars = numberingSystems.hanidec.replace(/[\[|\]]/g, "").split("");
function parseDigits(str) {
  let value = parseInt(str, 10);
  if (isNaN(value)) {
    value = "";
    for (let i = 0; i < str.length; i++) {
      const code = str.charCodeAt(i);
      if (str[i].search(numberingSystems.hanidec) !== -1) {
        value += hanidecChars.indexOf(str[i]);
      } else {
        for (const key in numberingSystemsUTF16) {
          const [min4, max5] = numberingSystemsUTF16[key];
          if (code >= min4 && code <= max5) {
            value += code - min4;
          }
        }
      }
    }
    return parseInt(value, 10);
  } else {
    return value;
  }
}
function digitRegex({ numberingSystem }, append = "") {
  return new RegExp(`${numberingSystems[numberingSystem || "latn"]}${append}`);
}

// node_modules/luxon/src/impl/tokenParser.js
var MISSING_FTP = "missing Intl.DateTimeFormat.formatToParts support";
function intUnit(regex, post = (i) => i) {
  return { regex, deser: ([s3]) => post(parseDigits(s3)) };
}
var NBSP = String.fromCharCode(160);
var spaceOrNBSP = `[ ${NBSP}]`;
var spaceOrNBSPRegExp = new RegExp(spaceOrNBSP, "g");
function fixListRegex(s3) {
  return s3.replace(/\./g, "\\.?").replace(spaceOrNBSPRegExp, spaceOrNBSP);
}
function stripInsensitivities(s3) {
  return s3.replace(/\./g, "").replace(spaceOrNBSPRegExp, " ").toLowerCase();
}
function oneOf(strings, startIndex) {
  if (strings === null) {
    return null;
  } else {
    return {
      regex: RegExp(strings.map(fixListRegex).join("|")),
      deser: ([s3]) => strings.findIndex((i) => stripInsensitivities(s3) === stripInsensitivities(i)) + startIndex
    };
  }
}
function offset(regex, groups2) {
  return { regex, deser: ([, h, m2]) => signedOffset(h, m2), groups: groups2 };
}
function simple(regex) {
  return { regex, deser: ([s3]) => s3 };
}
function escapeToken(value) {
  return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
}
function unitForToken(token, loc) {
  const one2 = digitRegex(loc), two = digitRegex(loc, "{2}"), three = digitRegex(loc, "{3}"), four = digitRegex(loc, "{4}"), six = digitRegex(loc, "{6}"), oneOrTwo = digitRegex(loc, "{1,2}"), oneToThree = digitRegex(loc, "{1,3}"), oneToSix = digitRegex(loc, "{1,6}"), oneToNine = digitRegex(loc, "{1,9}"), twoToFour = digitRegex(loc, "{2,4}"), fourToSix = digitRegex(loc, "{4,6}"), literal = (t) => ({ regex: RegExp(escapeToken(t.val)), deser: ([s3]) => s3, literal: true }), unitate = (t) => {
    if (token.literal) {
      return literal(t);
    }
    switch (t.val) {
      case "G":
        return oneOf(loc.eras("short", false), 0);
      case "GG":
        return oneOf(loc.eras("long", false), 0);
      case "y":
        return intUnit(oneToSix);
      case "yy":
        return intUnit(twoToFour, untruncateYear);
      case "yyyy":
        return intUnit(four);
      case "yyyyy":
        return intUnit(fourToSix);
      case "yyyyyy":
        return intUnit(six);
      case "M":
        return intUnit(oneOrTwo);
      case "MM":
        return intUnit(two);
      case "MMM":
        return oneOf(loc.months("short", true, false), 1);
      case "MMMM":
        return oneOf(loc.months("long", true, false), 1);
      case "L":
        return intUnit(oneOrTwo);
      case "LL":
        return intUnit(two);
      case "LLL":
        return oneOf(loc.months("short", false, false), 1);
      case "LLLL":
        return oneOf(loc.months("long", false, false), 1);
      case "d":
        return intUnit(oneOrTwo);
      case "dd":
        return intUnit(two);
      case "o":
        return intUnit(oneToThree);
      case "ooo":
        return intUnit(three);
      case "HH":
        return intUnit(two);
      case "H":
        return intUnit(oneOrTwo);
      case "hh":
        return intUnit(two);
      case "h":
        return intUnit(oneOrTwo);
      case "mm":
        return intUnit(two);
      case "m":
        return intUnit(oneOrTwo);
      case "q":
        return intUnit(oneOrTwo);
      case "qq":
        return intUnit(two);
      case "s":
        return intUnit(oneOrTwo);
      case "ss":
        return intUnit(two);
      case "S":
        return intUnit(oneToThree);
      case "SSS":
        return intUnit(three);
      case "u":
        return simple(oneToNine);
      case "uu":
        return simple(oneOrTwo);
      case "uuu":
        return intUnit(one2);
      case "a":
        return oneOf(loc.meridiems(), 0);
      case "kkkk":
        return intUnit(four);
      case "kk":
        return intUnit(twoToFour, untruncateYear);
      case "W":
        return intUnit(oneOrTwo);
      case "WW":
        return intUnit(two);
      case "E":
      case "c":
        return intUnit(one2);
      case "EEE":
        return oneOf(loc.weekdays("short", false, false), 1);
      case "EEEE":
        return oneOf(loc.weekdays("long", false, false), 1);
      case "ccc":
        return oneOf(loc.weekdays("short", true, false), 1);
      case "cccc":
        return oneOf(loc.weekdays("long", true, false), 1);
      case "Z":
      case "ZZ":
        return offset(new RegExp(`([+-]${oneOrTwo.source})(?::(${two.source}))?`), 2);
      case "ZZZ":
        return offset(new RegExp(`([+-]${oneOrTwo.source})(${two.source})?`), 2);
      case "z":
        return simple(/[a-z_+-/]{1,256}?/i);
      default:
        return literal(t);
    }
  };
  const unit3 = unitate(token) || {
    invalidReason: MISSING_FTP
  };
  unit3.token = token;
  return unit3;
}
var partTypeStyleToTokenVal = {
  year: {
    "2-digit": "yy",
    numeric: "yyyyy"
  },
  month: {
    numeric: "M",
    "2-digit": "MM",
    short: "MMM",
    long: "MMMM"
  },
  day: {
    numeric: "d",
    "2-digit": "dd"
  },
  weekday: {
    short: "EEE",
    long: "EEEE"
  },
  dayperiod: "a",
  dayPeriod: "a",
  hour: {
    numeric: "h",
    "2-digit": "hh"
  },
  minute: {
    numeric: "m",
    "2-digit": "mm"
  },
  second: {
    numeric: "s",
    "2-digit": "ss"
  },
  timeZoneName: {
    long: "ZZZZZ",
    short: "ZZZ"
  }
};
function tokenForPart(part, locale3, formatOpts) {
  const { type: type2, value } = part;
  if (type2 === "literal") {
    return {
      literal: true,
      val: value
    };
  }
  const style = formatOpts[type2];
  let val = partTypeStyleToTokenVal[type2];
  if (typeof val === "object") {
    val = val[style];
  }
  if (val) {
    return {
      literal: false,
      val
    };
  }
  return void 0;
}
function buildRegex(units) {
  const re2 = units.map((u) => u.regex).reduce((f, r) => `${f}(${r.source})`, "");
  return [`^${re2}$`, units];
}
function match(input, regex, handlers) {
  const matches = input.match(regex);
  if (matches) {
    const all = {};
    let matchIndex = 1;
    for (const i in handlers) {
      if (hasOwnProperty(handlers, i)) {
        const h = handlers[i], groups2 = h.groups ? h.groups + 1 : 1;
        if (!h.literal && h.token) {
          all[h.token.val[0]] = h.deser(matches.slice(matchIndex, matchIndex + groups2));
        }
        matchIndex += groups2;
      }
    }
    return [matches, all];
  } else {
    return [matches, {}];
  }
}
function dateTimeFromMatches(matches) {
  const toField = (token) => {
    switch (token) {
      case "S":
        return "millisecond";
      case "s":
        return "second";
      case "m":
        return "minute";
      case "h":
      case "H":
        return "hour";
      case "d":
        return "day";
      case "o":
        return "ordinal";
      case "L":
      case "M":
        return "month";
      case "y":
        return "year";
      case "E":
      case "c":
        return "weekday";
      case "W":
        return "weekNumber";
      case "k":
        return "weekYear";
      case "q":
        return "quarter";
      default:
        return null;
    }
  };
  let zone = null;
  let specificOffset;
  if (!isUndefined(matches.z)) {
    zone = IANAZone.create(matches.z);
  }
  if (!isUndefined(matches.Z)) {
    if (!zone) {
      zone = new FixedOffsetZone(matches.Z);
    }
    specificOffset = matches.Z;
  }
  if (!isUndefined(matches.q)) {
    matches.M = (matches.q - 1) * 3 + 1;
  }
  if (!isUndefined(matches.h)) {
    if (matches.h < 12 && matches.a === 1) {
      matches.h += 12;
    } else if (matches.h === 12 && matches.a === 0) {
      matches.h = 0;
    }
  }
  if (matches.G === 0 && matches.y) {
    matches.y = -matches.y;
  }
  if (!isUndefined(matches.u)) {
    matches.S = parseMillis(matches.u);
  }
  const vals = Object.keys(matches).reduce((r, k2) => {
    const f = toField(k2);
    if (f) {
      r[f] = matches[k2];
    }
    return r;
  }, {});
  return [vals, zone, specificOffset];
}
var dummyDateTimeCache = null;
function getDummyDateTime() {
  if (!dummyDateTimeCache) {
    dummyDateTimeCache = DateTime.fromMillis(1555555555555);
  }
  return dummyDateTimeCache;
}
function maybeExpandMacroToken(token, locale3) {
  if (token.literal) {
    return token;
  }
  const formatOpts = Formatter.macroTokenToFormatOpts(token.val);
  const tokens = formatOptsToTokens(formatOpts, locale3);
  if (tokens == null || tokens.includes(void 0)) {
    return token;
  }
  return tokens;
}
function expandMacroTokens(tokens, locale3) {
  return Array.prototype.concat(...tokens.map((t) => maybeExpandMacroToken(t, locale3)));
}
function explainFromTokens(locale3, input, format2) {
  const tokens = expandMacroTokens(Formatter.parseFormat(format2), locale3), units = tokens.map((t) => unitForToken(t, locale3)), disqualifyingUnit = units.find((t) => t.invalidReason);
  if (disqualifyingUnit) {
    return { input, tokens, invalidReason: disqualifyingUnit.invalidReason };
  } else {
    const [regexString, handlers] = buildRegex(units), regex = RegExp(regexString, "i"), [rawMatches, matches] = match(input, regex, handlers), [result, zone, specificOffset] = matches ? dateTimeFromMatches(matches) : [null, null, void 0];
    if (hasOwnProperty(matches, "a") && hasOwnProperty(matches, "H")) {
      throw new ConflictingSpecificationError(
        "Can't include meridiem when specifying 24-hour format"
      );
    }
    return { input, tokens, regex, rawMatches, matches, result, zone, specificOffset };
  }
}
function parseFromTokens(locale3, input, format2) {
  const { result, zone, specificOffset, invalidReason } = explainFromTokens(locale3, input, format2);
  return [result, zone, specificOffset, invalidReason];
}
function formatOptsToTokens(formatOpts, locale3) {
  if (!formatOpts) {
    return null;
  }
  const formatter = Formatter.create(locale3, formatOpts);
  const parts = formatter.formatDateTimeParts(getDummyDateTime());
  return parts.map((p) => tokenForPart(p, locale3, formatOpts));
}

// node_modules/luxon/src/impl/conversions.js
var nonLeapLadder = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
var leapLadder = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];
function unitOutOfRange(unit3, value) {
  return new Invalid(
    "unit out of range",
    `you specified ${value} (of type ${typeof value}) as a ${unit3}, which is invalid`
  );
}
function dayOfWeek(year2, month2, day2) {
  const d = new Date(Date.UTC(year2, month2 - 1, day2));
  if (year2 < 100 && year2 >= 0) {
    d.setUTCFullYear(d.getUTCFullYear() - 1900);
  }
  const js = d.getUTCDay();
  return js === 0 ? 7 : js;
}
function computeOrdinal(year2, month2, day2) {
  return day2 + (isLeapYear(year2) ? leapLadder : nonLeapLadder)[month2 - 1];
}
function uncomputeOrdinal(year2, ordinal2) {
  const table = isLeapYear(year2) ? leapLadder : nonLeapLadder, month0 = table.findIndex((i) => i < ordinal2), day2 = ordinal2 - table[month0];
  return { month: month0 + 1, day: day2 };
}
function gregorianToWeek(gregObj) {
  const { year: year2, month: month2, day: day2 } = gregObj, ordinal2 = computeOrdinal(year2, month2, day2), weekday2 = dayOfWeek(year2, month2, day2);
  let weekNumber = Math.floor((ordinal2 - weekday2 + 10) / 7), weekYear;
  if (weekNumber < 1) {
    weekYear = year2 - 1;
    weekNumber = weeksInWeekYear(weekYear);
  } else if (weekNumber > weeksInWeekYear(year2)) {
    weekYear = year2 + 1;
    weekNumber = 1;
  } else {
    weekYear = year2;
  }
  return { weekYear, weekNumber, weekday: weekday2, ...timeObject(gregObj) };
}
function weekToGregorian(weekData) {
  const { weekYear, weekNumber, weekday: weekday2 } = weekData, weekdayOfJan4 = dayOfWeek(weekYear, 1, 4), yearInDays = daysInYear(weekYear);
  let ordinal2 = weekNumber * 7 + weekday2 - weekdayOfJan4 - 3, year2;
  if (ordinal2 < 1) {
    year2 = weekYear - 1;
    ordinal2 += daysInYear(year2);
  } else if (ordinal2 > yearInDays) {
    year2 = weekYear + 1;
    ordinal2 -= daysInYear(weekYear);
  } else {
    year2 = weekYear;
  }
  const { month: month2, day: day2 } = uncomputeOrdinal(year2, ordinal2);
  return { year: year2, month: month2, day: day2, ...timeObject(weekData) };
}
function gregorianToOrdinal(gregData) {
  const { year: year2, month: month2, day: day2 } = gregData;
  const ordinal2 = computeOrdinal(year2, month2, day2);
  return { year: year2, ordinal: ordinal2, ...timeObject(gregData) };
}
function ordinalToGregorian(ordinalData) {
  const { year: year2, ordinal: ordinal2 } = ordinalData;
  const { month: month2, day: day2 } = uncomputeOrdinal(year2, ordinal2);
  return { year: year2, month: month2, day: day2, ...timeObject(ordinalData) };
}
function hasInvalidWeekData(obj) {
  const validYear = isInteger(obj.weekYear), validWeek = integerBetween(obj.weekNumber, 1, weeksInWeekYear(obj.weekYear)), validWeekday = integerBetween(obj.weekday, 1, 7);
  if (!validYear) {
    return unitOutOfRange("weekYear", obj.weekYear);
  } else if (!validWeek) {
    return unitOutOfRange("week", obj.week);
  } else if (!validWeekday) {
    return unitOutOfRange("weekday", obj.weekday);
  } else
    return false;
}
function hasInvalidOrdinalData(obj) {
  const validYear = isInteger(obj.year), validOrdinal = integerBetween(obj.ordinal, 1, daysInYear(obj.year));
  if (!validYear) {
    return unitOutOfRange("year", obj.year);
  } else if (!validOrdinal) {
    return unitOutOfRange("ordinal", obj.ordinal);
  } else
    return false;
}
function hasInvalidGregorianData(obj) {
  const validYear = isInteger(obj.year), validMonth = integerBetween(obj.month, 1, 12), validDay = integerBetween(obj.day, 1, daysInMonth(obj.year, obj.month));
  if (!validYear) {
    return unitOutOfRange("year", obj.year);
  } else if (!validMonth) {
    return unitOutOfRange("month", obj.month);
  } else if (!validDay) {
    return unitOutOfRange("day", obj.day);
  } else
    return false;
}
function hasInvalidTimeData(obj) {
  const { hour: hour2, minute: minute2, second: second2, millisecond: millisecond2 } = obj;
  const validHour = integerBetween(hour2, 0, 23) || hour2 === 24 && minute2 === 0 && second2 === 0 && millisecond2 === 0, validMinute = integerBetween(minute2, 0, 59), validSecond = integerBetween(second2, 0, 59), validMillisecond = integerBetween(millisecond2, 0, 999);
  if (!validHour) {
    return unitOutOfRange("hour", hour2);
  } else if (!validMinute) {
    return unitOutOfRange("minute", minute2);
  } else if (!validSecond) {
    return unitOutOfRange("second", second2);
  } else if (!validMillisecond) {
    return unitOutOfRange("millisecond", millisecond2);
  } else
    return false;
}

// node_modules/luxon/src/datetime.js
var INVALID3 = "Invalid DateTime";
var MAX_DATE = 864e13;
function unsupportedZone(zone) {
  return new Invalid("unsupported zone", `the zone "${zone.name}" is not supported`);
}
function possiblyCachedWeekData(dt) {
  if (dt.weekData === null) {
    dt.weekData = gregorianToWeek(dt.c);
  }
  return dt.weekData;
}
function clone2(inst, alts) {
  const current = {
    ts: inst.ts,
    zone: inst.zone,
    c: inst.c,
    o: inst.o,
    loc: inst.loc,
    invalid: inst.invalid
  };
  return new DateTime({ ...current, ...alts, old: current });
}
function fixOffset(localTS, o, tz) {
  let utcGuess = localTS - o * 60 * 1e3;
  const o2 = tz.offset(utcGuess);
  if (o === o2) {
    return [utcGuess, o];
  }
  utcGuess -= (o2 - o) * 60 * 1e3;
  const o3 = tz.offset(utcGuess);
  if (o2 === o3) {
    return [utcGuess, o2];
  }
  return [localTS - Math.min(o2, o3) * 60 * 1e3, Math.max(o2, o3)];
}
function tsToObj(ts, offset2) {
  ts += offset2 * 60 * 1e3;
  const d = new Date(ts);
  return {
    year: d.getUTCFullYear(),
    month: d.getUTCMonth() + 1,
    day: d.getUTCDate(),
    hour: d.getUTCHours(),
    minute: d.getUTCMinutes(),
    second: d.getUTCSeconds(),
    millisecond: d.getUTCMilliseconds()
  };
}
function objToTS(obj, offset2, zone) {
  return fixOffset(objToLocalTS(obj), offset2, zone);
}
function adjustTime(inst, dur) {
  const oPre = inst.o, year2 = inst.c.year + Math.trunc(dur.years), month2 = inst.c.month + Math.trunc(dur.months) + Math.trunc(dur.quarters) * 3, c5 = {
    ...inst.c,
    year: year2,
    month: month2,
    day: Math.min(inst.c.day, daysInMonth(year2, month2)) + Math.trunc(dur.days) + Math.trunc(dur.weeks) * 7
  }, millisToAdd = Duration.fromObject({
    years: dur.years - Math.trunc(dur.years),
    quarters: dur.quarters - Math.trunc(dur.quarters),
    months: dur.months - Math.trunc(dur.months),
    weeks: dur.weeks - Math.trunc(dur.weeks),
    days: dur.days - Math.trunc(dur.days),
    hours: dur.hours,
    minutes: dur.minutes,
    seconds: dur.seconds,
    milliseconds: dur.milliseconds
  }).as("milliseconds"), localTS = objToLocalTS(c5);
  let [ts, o] = fixOffset(localTS, oPre, inst.zone);
  if (millisToAdd !== 0) {
    ts += millisToAdd;
    o = inst.zone.offset(ts);
  }
  return { ts, o };
}
function parseDataToDateTime(parsed, parsedZone, opts, format2, text, specificOffset) {
  const { setZone, zone } = opts;
  if (parsed && Object.keys(parsed).length !== 0) {
    const interpretationZone = parsedZone || zone, inst = DateTime.fromObject(parsed, {
      ...opts,
      zone: interpretationZone,
      specificOffset
    });
    return setZone ? inst : inst.setZone(zone);
  } else {
    return DateTime.invalid(
      new Invalid("unparsable", `the input "${text}" can't be parsed as ${format2}`)
    );
  }
}
function toTechFormat(dt, format2, allowZ = true) {
  return dt.isValid ? Formatter.create(Locale.create("en-US"), {
    allowZ,
    forceSimple: true
  }).formatDateTimeFromString(dt, format2) : null;
}
function toISODate(o, extended) {
  const longFormat = o.c.year > 9999 || o.c.year < 0;
  let c5 = "";
  if (longFormat && o.c.year >= 0)
    c5 += "+";
  c5 += padStart(o.c.year, longFormat ? 6 : 4);
  if (extended) {
    c5 += "-";
    c5 += padStart(o.c.month);
    c5 += "-";
    c5 += padStart(o.c.day);
  } else {
    c5 += padStart(o.c.month);
    c5 += padStart(o.c.day);
  }
  return c5;
}
function toISOTime(o, extended, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone) {
  let c5 = padStart(o.c.hour);
  if (extended) {
    c5 += ":";
    c5 += padStart(o.c.minute);
    if (o.c.second !== 0 || !suppressSeconds) {
      c5 += ":";
    }
  } else {
    c5 += padStart(o.c.minute);
  }
  if (o.c.second !== 0 || !suppressSeconds) {
    c5 += padStart(o.c.second);
    if (o.c.millisecond !== 0 || !suppressMilliseconds) {
      c5 += ".";
      c5 += padStart(o.c.millisecond, 3);
    }
  }
  if (includeOffset) {
    if (o.isOffsetFixed && o.offset === 0 && !extendedZone) {
      c5 += "Z";
    } else if (o.o < 0) {
      c5 += "-";
      c5 += padStart(Math.trunc(-o.o / 60));
      c5 += ":";
      c5 += padStart(Math.trunc(-o.o % 60));
    } else {
      c5 += "+";
      c5 += padStart(Math.trunc(o.o / 60));
      c5 += ":";
      c5 += padStart(Math.trunc(o.o % 60));
    }
  }
  if (extendedZone) {
    c5 += "[" + o.zone.ianaName + "]";
  }
  return c5;
}
var defaultUnitValues = {
  month: 1,
  day: 1,
  hour: 0,
  minute: 0,
  second: 0,
  millisecond: 0
};
var defaultWeekUnitValues = {
  weekNumber: 1,
  weekday: 1,
  hour: 0,
  minute: 0,
  second: 0,
  millisecond: 0
};
var defaultOrdinalUnitValues = {
  ordinal: 1,
  hour: 0,
  minute: 0,
  second: 0,
  millisecond: 0
};
var orderedUnits2 = ["year", "month", "day", "hour", "minute", "second", "millisecond"];
var orderedWeekUnits = [
  "weekYear",
  "weekNumber",
  "weekday",
  "hour",
  "minute",
  "second",
  "millisecond"
];
var orderedOrdinalUnits = ["year", "ordinal", "hour", "minute", "second", "millisecond"];
function normalizeUnit(unit3) {
  const normalized = {
    year: "year",
    years: "year",
    month: "month",
    months: "month",
    day: "day",
    days: "day",
    hour: "hour",
    hours: "hour",
    minute: "minute",
    minutes: "minute",
    quarter: "quarter",
    quarters: "quarter",
    second: "second",
    seconds: "second",
    millisecond: "millisecond",
    milliseconds: "millisecond",
    weekday: "weekday",
    weekdays: "weekday",
    weeknumber: "weekNumber",
    weeksnumber: "weekNumber",
    weeknumbers: "weekNumber",
    weekyear: "weekYear",
    weekyears: "weekYear",
    ordinal: "ordinal"
  }[unit3.toLowerCase()];
  if (!normalized)
    throw new InvalidUnitError(unit3);
  return normalized;
}
function quickDT(obj, opts) {
  const zone = normalizeZone(opts.zone, Settings.defaultZone), loc = Locale.fromObject(opts), tsNow = Settings.now();
  let ts, o;
  if (!isUndefined(obj.year)) {
    for (const u of orderedUnits2) {
      if (isUndefined(obj[u])) {
        obj[u] = defaultUnitValues[u];
      }
    }
    const invalid = hasInvalidGregorianData(obj) || hasInvalidTimeData(obj);
    if (invalid) {
      return DateTime.invalid(invalid);
    }
    const offsetProvis = zone.offset(tsNow);
    [ts, o] = objToTS(obj, offsetProvis, zone);
  } else {
    ts = tsNow;
  }
  return new DateTime({ ts, zone, loc, o });
}
function diffRelative(start2, end, opts) {
  const round = isUndefined(opts.round) ? true : opts.round, format2 = (c5, unit3) => {
    c5 = roundTo(c5, round || opts.calendary ? 0 : 2, true);
    const formatter = end.loc.clone(opts).relFormatter(opts);
    return formatter.format(c5, unit3);
  }, differ = (unit3) => {
    if (opts.calendary) {
      if (!end.hasSame(start2, unit3)) {
        return end.startOf(unit3).diff(start2.startOf(unit3), unit3).get(unit3);
      } else
        return 0;
    } else {
      return end.diff(start2, unit3).get(unit3);
    }
  };
  if (opts.unit) {
    return format2(differ(opts.unit), opts.unit);
  }
  for (const unit3 of opts.units) {
    const count3 = differ(unit3);
    if (Math.abs(count3) >= 1) {
      return format2(count3, unit3);
    }
  }
  return format2(start2 > end ? -0 : 0, opts.units[opts.units.length - 1]);
}
function lastOpts(argList) {
  let opts = {}, args;
  if (argList.length > 0 && typeof argList[argList.length - 1] === "object") {
    opts = argList[argList.length - 1];
    args = Array.from(argList).slice(0, argList.length - 1);
  } else {
    args = Array.from(argList);
  }
  return [opts, args];
}
var DateTime = class {
  constructor(config) {
    const zone = config.zone || Settings.defaultZone;
    let invalid = config.invalid || (Number.isNaN(config.ts) ? new Invalid("invalid input") : null) || (!zone.isValid ? unsupportedZone(zone) : null);
    this.ts = isUndefined(config.ts) ? Settings.now() : config.ts;
    let c5 = null, o = null;
    if (!invalid) {
      const unchanged = config.old && config.old.ts === this.ts && config.old.zone.equals(zone);
      if (unchanged) {
        [c5, o] = [config.old.c, config.old.o];
      } else {
        const ot = zone.offset(this.ts);
        c5 = tsToObj(this.ts, ot);
        invalid = Number.isNaN(c5.year) ? new Invalid("invalid input") : null;
        c5 = invalid ? null : c5;
        o = invalid ? null : ot;
      }
    }
    this._zone = zone;
    this.loc = config.loc || Locale.create();
    this.invalid = invalid;
    this.weekData = null;
    this.c = c5;
    this.o = o;
    this.isLuxonDateTime = true;
  }
  static now() {
    return new DateTime({});
  }
  static local() {
    const [opts, args] = lastOpts(arguments), [year2, month2, day2, hour2, minute2, second2, millisecond2] = args;
    return quickDT({ year: year2, month: month2, day: day2, hour: hour2, minute: minute2, second: second2, millisecond: millisecond2 }, opts);
  }
  static utc() {
    const [opts, args] = lastOpts(arguments), [year2, month2, day2, hour2, minute2, second2, millisecond2] = args;
    opts.zone = FixedOffsetZone.utcInstance;
    return quickDT({ year: year2, month: month2, day: day2, hour: hour2, minute: minute2, second: second2, millisecond: millisecond2 }, opts);
  }
  static fromJSDate(date2, options = {}) {
    const ts = isDate(date2) ? date2.valueOf() : NaN;
    if (Number.isNaN(ts)) {
      return DateTime.invalid("invalid input");
    }
    const zoneToUse = normalizeZone(options.zone, Settings.defaultZone);
    if (!zoneToUse.isValid) {
      return DateTime.invalid(unsupportedZone(zoneToUse));
    }
    return new DateTime({
      ts,
      zone: zoneToUse,
      loc: Locale.fromObject(options)
    });
  }
  static fromMillis(milliseconds2, options = {}) {
    if (!isNumber(milliseconds2)) {
      throw new InvalidArgumentError(
        `fromMillis requires a numerical input, but received a ${typeof milliseconds2} with value ${milliseconds2}`
      );
    } else if (milliseconds2 < -MAX_DATE || milliseconds2 > MAX_DATE) {
      return DateTime.invalid("Timestamp out of range");
    } else {
      return new DateTime({
        ts: milliseconds2,
        zone: normalizeZone(options.zone, Settings.defaultZone),
        loc: Locale.fromObject(options)
      });
    }
  }
  static fromSeconds(seconds2, options = {}) {
    if (!isNumber(seconds2)) {
      throw new InvalidArgumentError("fromSeconds requires a numerical input");
    } else {
      return new DateTime({
        ts: seconds2 * 1e3,
        zone: normalizeZone(options.zone, Settings.defaultZone),
        loc: Locale.fromObject(options)
      });
    }
  }
  static fromObject(obj, opts = {}) {
    obj = obj || {};
    const zoneToUse = normalizeZone(opts.zone, Settings.defaultZone);
    if (!zoneToUse.isValid) {
      return DateTime.invalid(unsupportedZone(zoneToUse));
    }
    const tsNow = Settings.now(), offsetProvis = !isUndefined(opts.specificOffset) ? opts.specificOffset : zoneToUse.offset(tsNow), normalized = normalizeObject(obj, normalizeUnit), containsOrdinal = !isUndefined(normalized.ordinal), containsGregorYear = !isUndefined(normalized.year), containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day), containsGregor = containsGregorYear || containsGregorMD, definiteWeekDef = normalized.weekYear || normalized.weekNumber, loc = Locale.fromObject(opts);
    if ((containsGregor || containsOrdinal) && definiteWeekDef) {
      throw new ConflictingSpecificationError(
        "Can't mix weekYear/weekNumber units with year/month/day or ordinals"
      );
    }
    if (containsGregorMD && containsOrdinal) {
      throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");
    }
    const useWeekData = definiteWeekDef || normalized.weekday && !containsGregor;
    let units, defaultValues, objNow = tsToObj(tsNow, offsetProvis);
    if (useWeekData) {
      units = orderedWeekUnits;
      defaultValues = defaultWeekUnitValues;
      objNow = gregorianToWeek(objNow);
    } else if (containsOrdinal) {
      units = orderedOrdinalUnits;
      defaultValues = defaultOrdinalUnitValues;
      objNow = gregorianToOrdinal(objNow);
    } else {
      units = orderedUnits2;
      defaultValues = defaultUnitValues;
    }
    let foundFirst = false;
    for (const u of units) {
      const v = normalized[u];
      if (!isUndefined(v)) {
        foundFirst = true;
      } else if (foundFirst) {
        normalized[u] = defaultValues[u];
      } else {
        normalized[u] = objNow[u];
      }
    }
    const higherOrderInvalid = useWeekData ? hasInvalidWeekData(normalized) : containsOrdinal ? hasInvalidOrdinalData(normalized) : hasInvalidGregorianData(normalized), invalid = higherOrderInvalid || hasInvalidTimeData(normalized);
    if (invalid) {
      return DateTime.invalid(invalid);
    }
    const gregorian = useWeekData ? weekToGregorian(normalized) : containsOrdinal ? ordinalToGregorian(normalized) : normalized, [tsFinal, offsetFinal] = objToTS(gregorian, offsetProvis, zoneToUse), inst = new DateTime({
      ts: tsFinal,
      zone: zoneToUse,
      o: offsetFinal,
      loc
    });
    if (normalized.weekday && containsGregor && obj.weekday !== inst.weekday) {
      return DateTime.invalid(
        "mismatched weekday",
        `you can't specify both a weekday of ${normalized.weekday} and a date of ${inst.toISO()}`
      );
    }
    return inst;
  }
  static fromISO(text, opts = {}) {
    const [vals, parsedZone] = parseISODate(text);
    return parseDataToDateTime(vals, parsedZone, opts, "ISO 8601", text);
  }
  static fromRFC2822(text, opts = {}) {
    const [vals, parsedZone] = parseRFC2822Date(text);
    return parseDataToDateTime(vals, parsedZone, opts, "RFC 2822", text);
  }
  static fromHTTP(text, opts = {}) {
    const [vals, parsedZone] = parseHTTPDate(text);
    return parseDataToDateTime(vals, parsedZone, opts, "HTTP", opts);
  }
  static fromFormat(text, fmt, opts = {}) {
    if (isUndefined(text) || isUndefined(fmt)) {
      throw new InvalidArgumentError("fromFormat requires an input string and a format");
    }
    const { locale: locale3 = null, numberingSystem = null } = opts, localeToUse = Locale.fromOpts({
      locale: locale3,
      numberingSystem,
      defaultToEN: true
    }), [vals, parsedZone, specificOffset, invalid] = parseFromTokens(localeToUse, text, fmt);
    if (invalid) {
      return DateTime.invalid(invalid);
    } else {
      return parseDataToDateTime(vals, parsedZone, opts, `format ${fmt}`, text, specificOffset);
    }
  }
  static fromString(text, fmt, opts = {}) {
    return DateTime.fromFormat(text, fmt, opts);
  }
  static fromSQL(text, opts = {}) {
    const [vals, parsedZone] = parseSQL(text);
    return parseDataToDateTime(vals, parsedZone, opts, "SQL", text);
  }
  static invalid(reason, explanation = null) {
    if (!reason) {
      throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");
    }
    const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
    if (Settings.throwOnInvalid) {
      throw new InvalidDateTimeError(invalid);
    } else {
      return new DateTime({ invalid });
    }
  }
  static isDateTime(o) {
    return o && o.isLuxonDateTime || false;
  }
  static parseFormatForOpts(formatOpts, localeOpts = {}) {
    const tokenList = formatOptsToTokens(formatOpts, Locale.fromObject(localeOpts));
    return !tokenList ? null : tokenList.map((t) => t ? t.val : null).join("");
  }
  static expandFormat(fmt, localeOpts = {}) {
    const expanded = expandMacroTokens(Formatter.parseFormat(fmt), Locale.fromObject(localeOpts));
    return expanded.map((t) => t.val).join("");
  }
  get(unit3) {
    return this[unit3];
  }
  get isValid() {
    return this.invalid === null;
  }
  get invalidReason() {
    return this.invalid ? this.invalid.reason : null;
  }
  get invalidExplanation() {
    return this.invalid ? this.invalid.explanation : null;
  }
  get locale() {
    return this.isValid ? this.loc.locale : null;
  }
  get numberingSystem() {
    return this.isValid ? this.loc.numberingSystem : null;
  }
  get outputCalendar() {
    return this.isValid ? this.loc.outputCalendar : null;
  }
  get zone() {
    return this._zone;
  }
  get zoneName() {
    return this.isValid ? this.zone.name : null;
  }
  get year() {
    return this.isValid ? this.c.year : NaN;
  }
  get quarter() {
    return this.isValid ? Math.ceil(this.c.month / 3) : NaN;
  }
  get month() {
    return this.isValid ? this.c.month : NaN;
  }
  get day() {
    return this.isValid ? this.c.day : NaN;
  }
  get hour() {
    return this.isValid ? this.c.hour : NaN;
  }
  get minute() {
    return this.isValid ? this.c.minute : NaN;
  }
  get second() {
    return this.isValid ? this.c.second : NaN;
  }
  get millisecond() {
    return this.isValid ? this.c.millisecond : NaN;
  }
  get weekYear() {
    return this.isValid ? possiblyCachedWeekData(this).weekYear : NaN;
  }
  get weekNumber() {
    return this.isValid ? possiblyCachedWeekData(this).weekNumber : NaN;
  }
  get weekday() {
    return this.isValid ? possiblyCachedWeekData(this).weekday : NaN;
  }
  get ordinal() {
    return this.isValid ? gregorianToOrdinal(this.c).ordinal : NaN;
  }
  get monthShort() {
    return this.isValid ? Info.months("short", { locObj: this.loc })[this.month - 1] : null;
  }
  get monthLong() {
    return this.isValid ? Info.months("long", { locObj: this.loc })[this.month - 1] : null;
  }
  get weekdayShort() {
    return this.isValid ? Info.weekdays("short", { locObj: this.loc })[this.weekday - 1] : null;
  }
  get weekdayLong() {
    return this.isValid ? Info.weekdays("long", { locObj: this.loc })[this.weekday - 1] : null;
  }
  get offset() {
    return this.isValid ? +this.o : NaN;
  }
  get offsetNameShort() {
    if (this.isValid) {
      return this.zone.offsetName(this.ts, {
        format: "short",
        locale: this.locale
      });
    } else {
      return null;
    }
  }
  get offsetNameLong() {
    if (this.isValid) {
      return this.zone.offsetName(this.ts, {
        format: "long",
        locale: this.locale
      });
    } else {
      return null;
    }
  }
  get isOffsetFixed() {
    return this.isValid ? this.zone.isUniversal : null;
  }
  get isInDST() {
    if (this.isOffsetFixed) {
      return false;
    } else {
      return this.offset > this.set({ month: 1, day: 1 }).offset || this.offset > this.set({ month: 5 }).offset;
    }
  }
  get isInLeapYear() {
    return isLeapYear(this.year);
  }
  get daysInMonth() {
    return daysInMonth(this.year, this.month);
  }
  get daysInYear() {
    return this.isValid ? daysInYear(this.year) : NaN;
  }
  get weeksInWeekYear() {
    return this.isValid ? weeksInWeekYear(this.weekYear) : NaN;
  }
  resolvedLocaleOptions(opts = {}) {
    const { locale: locale3, numberingSystem, calendar: calendar2 } = Formatter.create(
      this.loc.clone(opts),
      opts
    ).resolvedOptions(this);
    return { locale: locale3, numberingSystem, outputCalendar: calendar2 };
  }
  toUTC(offset2 = 0, opts = {}) {
    return this.setZone(FixedOffsetZone.instance(offset2), opts);
  }
  toLocal() {
    return this.setZone(Settings.defaultZone);
  }
  setZone(zone, { keepLocalTime = false, keepCalendarTime = false } = {}) {
    zone = normalizeZone(zone, Settings.defaultZone);
    if (zone.equals(this.zone)) {
      return this;
    } else if (!zone.isValid) {
      return DateTime.invalid(unsupportedZone(zone));
    } else {
      let newTS = this.ts;
      if (keepLocalTime || keepCalendarTime) {
        const offsetGuess = zone.offset(this.ts);
        const asObj = this.toObject();
        [newTS] = objToTS(asObj, offsetGuess, zone);
      }
      return clone2(this, { ts: newTS, zone });
    }
  }
  reconfigure({ locale: locale3, numberingSystem, outputCalendar } = {}) {
    const loc = this.loc.clone({ locale: locale3, numberingSystem, outputCalendar });
    return clone2(this, { loc });
  }
  setLocale(locale3) {
    return this.reconfigure({ locale: locale3 });
  }
  set(values) {
    if (!this.isValid)
      return this;
    const normalized = normalizeObject(values, normalizeUnit), settingWeekStuff = !isUndefined(normalized.weekYear) || !isUndefined(normalized.weekNumber) || !isUndefined(normalized.weekday), containsOrdinal = !isUndefined(normalized.ordinal), containsGregorYear = !isUndefined(normalized.year), containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day), containsGregor = containsGregorYear || containsGregorMD, definiteWeekDef = normalized.weekYear || normalized.weekNumber;
    if ((containsGregor || containsOrdinal) && definiteWeekDef) {
      throw new ConflictingSpecificationError(
        "Can't mix weekYear/weekNumber units with year/month/day or ordinals"
      );
    }
    if (containsGregorMD && containsOrdinal) {
      throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");
    }
    let mixed;
    if (settingWeekStuff) {
      mixed = weekToGregorian({ ...gregorianToWeek(this.c), ...normalized });
    } else if (!isUndefined(normalized.ordinal)) {
      mixed = ordinalToGregorian({ ...gregorianToOrdinal(this.c), ...normalized });
    } else {
      mixed = { ...this.toObject(), ...normalized };
      if (isUndefined(normalized.day)) {
        mixed.day = Math.min(daysInMonth(mixed.year, mixed.month), mixed.day);
      }
    }
    const [ts, o] = objToTS(mixed, this.o, this.zone);
    return clone2(this, { ts, o });
  }
  plus(duration) {
    if (!this.isValid)
      return this;
    const dur = Duration.fromDurationLike(duration);
    return clone2(this, adjustTime(this, dur));
  }
  minus(duration) {
    if (!this.isValid)
      return this;
    const dur = Duration.fromDurationLike(duration).negate();
    return clone2(this, adjustTime(this, dur));
  }
  startOf(unit3) {
    if (!this.isValid)
      return this;
    const o = {}, normalizedUnit = Duration.normalizeUnit(unit3);
    switch (normalizedUnit) {
      case "years":
        o.month = 1;
      case "quarters":
      case "months":
        o.day = 1;
      case "weeks":
      case "days":
        o.hour = 0;
      case "hours":
        o.minute = 0;
      case "minutes":
        o.second = 0;
      case "seconds":
        o.millisecond = 0;
        break;
      case "milliseconds":
        break;
    }
    if (normalizedUnit === "weeks") {
      o.weekday = 1;
    }
    if (normalizedUnit === "quarters") {
      const q = Math.ceil(this.month / 3);
      o.month = (q - 1) * 3 + 1;
    }
    return this.set(o);
  }
  endOf(unit3) {
    return this.isValid ? this.plus({ [unit3]: 1 }).startOf(unit3).minus(1) : this;
  }
  toFormat(fmt, opts = {}) {
    return this.isValid ? Formatter.create(this.loc.redefaultToEN(opts)).formatDateTimeFromString(this, fmt) : INVALID3;
  }
  toLocaleString(formatOpts = DATE_SHORT, opts = {}) {
    return this.isValid ? Formatter.create(this.loc.clone(opts), formatOpts).formatDateTime(this) : INVALID3;
  }
  toLocaleParts(opts = {}) {
    return this.isValid ? Formatter.create(this.loc.clone(opts), opts).formatDateTimeParts(this) : [];
  }
  toISO({
    format: format2 = "extended",
    suppressSeconds = false,
    suppressMilliseconds = false,
    includeOffset = true,
    extendedZone = false
  } = {}) {
    if (!this.isValid) {
      return null;
    }
    const ext = format2 === "extended";
    let c5 = toISODate(this, ext);
    c5 += "T";
    c5 += toISOTime(this, ext, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone);
    return c5;
  }
  toISODate({ format: format2 = "extended" } = {}) {
    if (!this.isValid) {
      return null;
    }
    return toISODate(this, format2 === "extended");
  }
  toISOWeekDate() {
    return toTechFormat(this, "kkkk-'W'WW-c");
  }
  toISOTime({
    suppressMilliseconds = false,
    suppressSeconds = false,
    includeOffset = true,
    includePrefix = false,
    extendedZone = false,
    format: format2 = "extended"
  } = {}) {
    if (!this.isValid) {
      return null;
    }
    let c5 = includePrefix ? "T" : "";
    return c5 + toISOTime(
      this,
      format2 === "extended",
      suppressSeconds,
      suppressMilliseconds,
      includeOffset,
      extendedZone
    );
  }
  toRFC2822() {
    return toTechFormat(this, "EEE, dd LLL yyyy HH:mm:ss ZZZ", false);
  }
  toHTTP() {
    return toTechFormat(this.toUTC(), "EEE, dd LLL yyyy HH:mm:ss 'GMT'");
  }
  toSQLDate() {
    if (!this.isValid) {
      return null;
    }
    return toISODate(this, true);
  }
  toSQLTime({ includeOffset = true, includeZone = false, includeOffsetSpace = true } = {}) {
    let fmt = "HH:mm:ss.SSS";
    if (includeZone || includeOffset) {
      if (includeOffsetSpace) {
        fmt += " ";
      }
      if (includeZone) {
        fmt += "z";
      } else if (includeOffset) {
        fmt += "ZZ";
      }
    }
    return toTechFormat(this, fmt, true);
  }
  toSQL(opts = {}) {
    if (!this.isValid) {
      return null;
    }
    return `${this.toSQLDate()} ${this.toSQLTime(opts)}`;
  }
  toString() {
    return this.isValid ? this.toISO() : INVALID3;
  }
  valueOf() {
    return this.toMillis();
  }
  toMillis() {
    return this.isValid ? this.ts : NaN;
  }
  toSeconds() {
    return this.isValid ? this.ts / 1e3 : NaN;
  }
  toUnixInteger() {
    return this.isValid ? Math.floor(this.ts / 1e3) : NaN;
  }
  toJSON() {
    return this.toISO();
  }
  toBSON() {
    return this.toJSDate();
  }
  toObject(opts = {}) {
    if (!this.isValid)
      return {};
    const base = { ...this.c };
    if (opts.includeConfig) {
      base.outputCalendar = this.outputCalendar;
      base.numberingSystem = this.loc.numberingSystem;
      base.locale = this.loc.locale;
    }
    return base;
  }
  toJSDate() {
    return new Date(this.isValid ? this.ts : NaN);
  }
  diff(otherDateTime, unit3 = "milliseconds", opts = {}) {
    if (!this.isValid || !otherDateTime.isValid) {
      return Duration.invalid("created by diffing an invalid DateTime");
    }
    const durOpts = { locale: this.locale, numberingSystem: this.numberingSystem, ...opts };
    const units = maybeArray(unit3).map(Duration.normalizeUnit), otherIsLater = otherDateTime.valueOf() > this.valueOf(), earlier = otherIsLater ? this : otherDateTime, later = otherIsLater ? otherDateTime : this, diffed = diff_default(earlier, later, units, durOpts);
    return otherIsLater ? diffed.negate() : diffed;
  }
  diffNow(unit3 = "milliseconds", opts = {}) {
    return this.diff(DateTime.now(), unit3, opts);
  }
  until(otherDateTime) {
    return this.isValid ? Interval.fromDateTimes(this, otherDateTime) : this;
  }
  hasSame(otherDateTime, unit3) {
    if (!this.isValid)
      return false;
    const inputMs = otherDateTime.valueOf();
    const adjustedToZone = this.setZone(otherDateTime.zone, { keepLocalTime: true });
    return adjustedToZone.startOf(unit3) <= inputMs && inputMs <= adjustedToZone.endOf(unit3);
  }
  equals(other) {
    return this.isValid && other.isValid && this.valueOf() === other.valueOf() && this.zone.equals(other.zone) && this.loc.equals(other.loc);
  }
  toRelative(options = {}) {
    if (!this.isValid)
      return null;
    const base = options.base || DateTime.fromObject({}, { zone: this.zone }), padding = options.padding ? this < base ? -options.padding : options.padding : 0;
    let units = ["years", "months", "days", "hours", "minutes", "seconds"];
    let unit3 = options.unit;
    if (Array.isArray(options.unit)) {
      units = options.unit;
      unit3 = void 0;
    }
    return diffRelative(base, this.plus(padding), {
      ...options,
      numeric: "always",
      units,
      unit: unit3
    });
  }
  toRelativeCalendar(options = {}) {
    if (!this.isValid)
      return null;
    return diffRelative(options.base || DateTime.fromObject({}, { zone: this.zone }), this, {
      ...options,
      numeric: "auto",
      units: ["years", "months", "days"],
      calendary: true
    });
  }
  static min(...dateTimes) {
    if (!dateTimes.every(DateTime.isDateTime)) {
      throw new InvalidArgumentError("min requires all arguments be DateTimes");
    }
    return bestBy(dateTimes, (i) => i.valueOf(), Math.min);
  }
  static max(...dateTimes) {
    if (!dateTimes.every(DateTime.isDateTime)) {
      throw new InvalidArgumentError("max requires all arguments be DateTimes");
    }
    return bestBy(dateTimes, (i) => i.valueOf(), Math.max);
  }
  static fromFormatExplain(text, fmt, options = {}) {
    const { locale: locale3 = null, numberingSystem = null } = options, localeToUse = Locale.fromOpts({
      locale: locale3,
      numberingSystem,
      defaultToEN: true
    });
    return explainFromTokens(localeToUse, text, fmt);
  }
  static fromStringExplain(text, fmt, options = {}) {
    return DateTime.fromFormatExplain(text, fmt, options);
  }
  static get DATE_SHORT() {
    return DATE_SHORT;
  }
  static get DATE_MED() {
    return DATE_MED;
  }
  static get DATE_MED_WITH_WEEKDAY() {
    return DATE_MED_WITH_WEEKDAY;
  }
  static get DATE_FULL() {
    return DATE_FULL;
  }
  static get DATE_HUGE() {
    return DATE_HUGE;
  }
  static get TIME_SIMPLE() {
    return TIME_SIMPLE;
  }
  static get TIME_WITH_SECONDS() {
    return TIME_WITH_SECONDS;
  }
  static get TIME_WITH_SHORT_OFFSET() {
    return TIME_WITH_SHORT_OFFSET;
  }
  static get TIME_WITH_LONG_OFFSET() {
    return TIME_WITH_LONG_OFFSET;
  }
  static get TIME_24_SIMPLE() {
    return TIME_24_SIMPLE;
  }
  static get TIME_24_WITH_SECONDS() {
    return TIME_24_WITH_SECONDS;
  }
  static get TIME_24_WITH_SHORT_OFFSET() {
    return TIME_24_WITH_SHORT_OFFSET;
  }
  static get TIME_24_WITH_LONG_OFFSET() {
    return TIME_24_WITH_LONG_OFFSET;
  }
  static get DATETIME_SHORT() {
    return DATETIME_SHORT;
  }
  static get DATETIME_SHORT_WITH_SECONDS() {
    return DATETIME_SHORT_WITH_SECONDS;
  }
  static get DATETIME_MED() {
    return DATETIME_MED;
  }
  static get DATETIME_MED_WITH_SECONDS() {
    return DATETIME_MED_WITH_SECONDS;
  }
  static get DATETIME_MED_WITH_WEEKDAY() {
    return DATETIME_MED_WITH_WEEKDAY;
  }
  static get DATETIME_FULL() {
    return DATETIME_FULL;
  }
  static get DATETIME_FULL_WITH_SECONDS() {
    return DATETIME_FULL_WITH_SECONDS;
  }
  static get DATETIME_HUGE() {
    return DATETIME_HUGE;
  }
  static get DATETIME_HUGE_WITH_SECONDS() {
    return DATETIME_HUGE_WITH_SECONDS;
  }
};
function friendlyDateTime(dateTimeish) {
  if (DateTime.isDateTime(dateTimeish)) {
    return dateTimeish;
  } else if (dateTimeish && dateTimeish.valueOf && isNumber(dateTimeish.valueOf())) {
    return DateTime.fromJSDate(dateTimeish);
  } else if (dateTimeish && typeof dateTimeish === "object") {
    return DateTime.fromObject(dateTimeish);
  } else {
    throw new InvalidArgumentError(
      `Unknown datetime argument: ${dateTimeish}, of type ${typeof dateTimeish}`
    );
  }
}

// node_modules/luxon/src/luxon.js
var VERSION = "3.0.3";

// src/util.ts
var XML_MIME = "application/xml";
var JSON_MIME = "application/json";
var JSONAPI_MIME = "application/vnd.api+json";
var SVG_MIME = "image/svg+xml";
var TEXT_MIME = "text/plain";
var BINARY_MIME = "application/octet-stream";
var UTC_OPTIONS = { zone: FixedOffsetZone.utcInstance };
function hasArgs(value) {
  return arguments.length !== 0 && typeof value !== "undefined";
}
function hasNoArgs(value) {
  return arguments.length === 0 || typeof value === "undefined";
}
function isStringArg(value) {
  return arguments.length !== 0 && (typeof value === "string" || isObject(value) && value instanceof String);
}
function isNumArg(value) {
  return arguments.length !== 0 && (typeof value === "number" || isObject(value) && value instanceof Number);
}
function isNonEmptyStringArg(value) {
  return arguments.length !== 0 && isStringArg(value) && value.length !== 0;
}
function isObject(obj) {
  return obj !== null && typeof obj === "object";
}
function isDef(value) {
  return value !== null && value !== void 0;
}
function rethrowWithMessage(err, message) {
  if (!isDef(err)) {
    throw new Error(`${message}`);
  } else if (typeof err === "string") {
    throw new Error(`${message} ${err}`);
  } else {
    if (err instanceof Error) {
      err.message = `${message} ${err.message}`;
    }
    throw err;
  }
}
function doStringGetterSetter(obj, field, value) {
  const hiddenField = `_${field}`;
  if (hasNoArgs(value) || value === null) {
    obj[hiddenField] = void 0;
  } else if (isStringArg(value)) {
    obj[hiddenField] = value;
  } else {
    throw new Error(
      `${field} value argument is optional or string, but was type ${typeof value}, '${value}' `
    );
  }
  return obj;
}
function doBoolGetterSetter(obj, field, value) {
  const hiddenField = `_${field}`;
  if (hasNoArgs(value) || value === null) {
    obj[hiddenField] = void 0;
  } else if (value === true || value === false) {
    obj[hiddenField] = value;
  } else {
    throw new Error(
      `${field} value argument is optional or boolean, but was type ${typeof value}, '${value}' `
    );
  }
  return obj;
}
function doIntGetterSetter(obj, field, value) {
  const hiddenField = `_${field}`;
  if (hasNoArgs(value) || value === null) {
    obj[hiddenField] = void 0;
  } else if (isNumArg(value)) {
    obj[hiddenField] = value;
  } else if (isStringArg(value) && Number.isFinite(Number(value))) {
    obj[hiddenField] = parseInt(value);
  } else {
    throw new Error(
      `${field} value argument is optional or number, but was type ${typeof value}, '${value}' `
    );
  }
  return obj;
}
function doFloatGetterSetter(obj, field, value) {
  const hiddenField = `_${field}`;
  if (hasNoArgs(value) || value === null) {
    obj[hiddenField] = void 0;
  } else if (isNumArg(value)) {
    obj[hiddenField] = value;
  } else if (isStringArg(value) && Number.isFinite(Number(value))) {
    obj[hiddenField] = parseFloat(value);
  } else {
    throw new Error(
      `value argument is optional or number, but was type ${typeof value}, '${value}' `
    );
  }
  return obj;
}
function doMomentGetterSetter(obj, field, value) {
  const hiddenField = `_${field}`;
  if (hasNoArgs(value) || value === null) {
    obj[hiddenField] = void 0;
  } else if (isDef(value) && isObject(value) && DateTime.isDateTime(value)) {
    obj[hiddenField] = value;
  } else if (isDef(value) && DateTime.isDateTime(checkStringOrDate(value))) {
    obj[hiddenField] = checkStringOrDate(value);
  } else {
    throw new Error(
      `${field} value argument is optional, DateTime, date or date string, but was type ${typeof value}, '${stringify(
        value
      )}' `
    );
  }
  return obj;
}
function dataViewToString(dataView) {
  let out = "";
  for (let i = 0; i < dataView.byteLength; i++) {
    out += String.fromCharCode(dataView.getUint8(i));
  }
  return out;
}
function log(msg) {
  if (console) {
    console.log(`${stringify(msg)}`);
  }
  if (typeof document !== "undefined" && document !== null) {
    const p = document.createElement("p");
    p.textContent = `${stringify(msg)}`;
    const divDebug = document.querySelector("div#debug");
    if (isDef(divDebug)) {
      divDebug.appendChild(p);
    }
  }
}
function isError(error) {
  return typeof error === "object" && error !== null && error instanceof Error;
}
function toError(maybeError) {
  if (isError(maybeError))
    return maybeError;
  try {
    return new Error(JSON.stringify(maybeError));
  } catch {
    return new Error(String(maybeError));
  }
}
function warn(msg) {
  if (console) {
    console.assert(false, `${stringify(msg)}`);
  }
  if (typeof document !== "undefined" && document !== null) {
    const p = document.createElement("p");
    p.textContent = `${stringify(msg)}`;
    document.querySelector("div#debug").appendChild(p);
  }
}
function stringify(value) {
  if (typeof value === "string") {
    return value;
  } else if (typeof value === "number") {
    return value.toString();
  } else if (typeof value === "boolean") {
    return value ? "true" : "false";
  } else if (typeof value === "undefined") {
    return "undefined";
  } else if (typeof value === "function") {
    return "function " + value.name;
  } else if (typeof value === "object") {
    if (value) {
      if (DateTime.isDateTime(value)) {
        const dateTimeValue = value;
        return dateTimeValue.toISO();
      } else {
        return value.constructor.name + " " + value.toString();
      }
    } else {
      return `${value}`;
    }
  } else {
    return "<unknown" + typeof value + "???>";
  }
}
function isoToDateTime(val) {
  if (val.toLowerCase() === "now") {
    return DateTime.utc();
  }
  return DateTime.fromISO(val, UTC_OPTIONS);
}
function startEnd(start2, end) {
  if (isStringArg(start2)) {
    start2 = isoToDateTime(start2);
  }
  if (isStringArg(end)) {
    end = isoToDateTime(end);
  }
  return Interval.fromDateTimes(start2, end);
}
function startDuration(start2, duration) {
  if (isStringArg(start2)) {
    start2 = isoToDateTime(start2);
  }
  if (isStringArg(duration)) {
    duration = Duration.fromISO(duration);
  } else if (isNumArg(duration)) {
    duration = Duration.fromMillis(1e3 * duration);
  }
  return Interval.after(start2, duration);
}
function durationEnd(duration, end) {
  if (isStringArg(end)) {
    end = isoToDateTime(end);
  }
  if (isStringArg(duration)) {
    duration = Duration.fromISO(duration);
  } else if (isNumArg(duration)) {
    duration = Duration.fromMillis(1e3 * duration);
  }
  return Interval.before(end, duration);
}
function calcClockOffset(serverTimeUTC) {
  return DateTime.utc().diff(serverTimeUTC).toMillis() * 1e3;
}
var WAY_FUTURE = DateTime.fromISO("2500-01-01T00:00:00Z");
function checkStringOrDate(d) {
  if (DateTime.isDateTime(d)) {
    return d;
  } else if (d instanceof Date) {
    return DateTime.fromJSDate(d, UTC_OPTIONS);
  } else if (isNumArg(d)) {
    return DateTime.fromMillis(d, UTC_OPTIONS);
  } else if (isNonEmptyStringArg(d)) {
    const lc = d.toLowerCase();
    if (d.length === 0 || lc === "now") {
      return DateTime.utc();
    } else {
      return isoToDateTime(d);
    }
  }
  throw new Error(`unknown date type: ${d} ${typeof d}`);
}
function makeParam(name, val) {
  return `${name}=${encodeURIComponent(stringify(val))}&`;
}
function makePostParam(name, val) {
  return name + "=" + stringify(val) + "\n";
}
function toIsoWoZ(date2) {
  let out = date2.toISO();
  if (out.endsWith("Z")) {
    out = out.substring(0, out.length - 1);
  }
  return out;
}
function checkProtocol() {
  let _protocol = "http:";
  if (typeof document !== "undefined" && document !== null && "location" in document && "protocol" in document.location && "https:" === document.location.protocol) {
    _protocol = "https:";
  }
  return _protocol;
}
function defaultFetchInitObj(mimeType) {
  const headers = {};
  if (isStringArg(mimeType)) {
    headers.Accept = mimeType;
  }
  return {
    cache: "no-cache",
    redirect: "follow",
    mode: "cors",
    referrer: "seisplotjs",
    headers
  };
}
function doFetchWithTimeout(url, fetchInit, timeoutSec) {
  const controller = new AbortController();
  const signal = controller.signal;
  if (!isDef(fetchInit)) {
    fetchInit = defaultFetchInitObj();
  }
  if (!isDef(timeoutSec)) {
    timeoutSec = 30;
  }
  setTimeout(() => controller.abort(), timeoutSec * 1e3);
  fetchInit.signal = signal;
  let absoluteUrl;
  if (url instanceof URL) {
    absoluteUrl = url;
  } else if (isStringArg(url)) {
    absoluteUrl = new URL(url, document.URL);
  } else {
    throw new Error(`url must be string or URL, ${stringify(url)}`);
  }
  log(
    `attempt to fetch ${fetchInit.method ? fetchInit.method : ""} ${stringify(
      absoluteUrl
    )}`
  );
  return fetch(absoluteUrl.href, fetchInit).catch((err) => {
    log("fetch failed, possible CORS or PrivacyBadger or NoScript?");
    throw err;
  }).then(function(response) {
    if (response.ok || response.status === 404) {
      return response;
    }
    return response.text().then((text) => {
      throw new Error(
        `fetch response was not ok. ${response.ok} ${response.status}
${text}`
      );
    });
  });
}
function downloadBlobAsFile(data, filename, mimeType = "application/octet-stream") {
  if (!data) {
    console.error(" No data");
    return;
  }
  if (!filename)
    filename = "filetodownload.txt";
  const blob = new Blob([data], { type: mimeType });
  const e = document.createEvent("MouseEvents");
  const a3 = document.createElement("a");
  a3.download = filename;
  a3.href = window.URL.createObjectURL(blob);
  a3.dataset.downloadurl = [mimeType, a3.download, a3.href].join(":");
  e.initMouseEvent("click", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
  a3.dispatchEvent(e);
}
function meanOfSlice(dataSlice, totalPts) {
  if (dataSlice.length < 8) {
    return dataSlice.reduce(function(acc, val) {
      return acc + val;
    }, 0) / totalPts;
  } else {
    const byTwo = Math.floor(dataSlice.length / 2);
    return meanOfSlice(dataSlice.slice(0, byTwo), totalPts) + meanOfSlice(dataSlice.slice(byTwo, dataSlice.length), totalPts);
  }
}
var SVG_NS = "http://www.w3.org/2000/svg";
function createSVGElement(name) {
  return document.createElementNS(SVG_NS, name);
}

// node_modules/d3/index.js
var d3_exports = {};
__export(d3_exports, {
  Adder: () => Adder,
  Delaunay: () => Delaunay,
  FormatSpecifier: () => FormatSpecifier,
  InternMap: () => InternMap,
  InternSet: () => InternSet,
  Voronoi: () => Voronoi,
  active: () => active_default,
  arc: () => arc_default,
  area: () => area_default5,
  areaRadial: () => areaRadial_default,
  ascending: () => ascending_default,
  autoType: () => autoType,
  axisBottom: () => axisBottom,
  axisLeft: () => axisLeft,
  axisRight: () => axisRight,
  axisTop: () => axisTop,
  bin: () => bin_default,
  bisect: () => bisect_default,
  bisectCenter: () => bisectCenter,
  bisectLeft: () => bisectLeft,
  bisectRight: () => bisectRight,
  bisector: () => bisector_default,
  blob: () => blob_default,
  brush: () => brush_default,
  brushSelection: () => brushSelection,
  brushX: () => brushX,
  brushY: () => brushY,
  buffer: () => buffer_default,
  chord: () => chord_default,
  chordDirected: () => chordDirected,
  chordTranspose: () => chordTranspose,
  cluster: () => cluster_default,
  color: () => color,
  contourDensity: () => density_default,
  contours: () => contours_default,
  count: () => count,
  create: () => create_default,
  creator: () => creator_default,
  cross: () => cross,
  csv: () => csv2,
  csvFormat: () => csvFormat,
  csvFormatBody: () => csvFormatBody,
  csvFormatRow: () => csvFormatRow,
  csvFormatRows: () => csvFormatRows,
  csvFormatValue: () => csvFormatValue,
  csvParse: () => csvParse,
  csvParseRows: () => csvParseRows,
  cubehelix: () => cubehelix,
  cumsum: () => cumsum,
  curveBasis: () => basis_default2,
  curveBasisClosed: () => basisClosed_default2,
  curveBasisOpen: () => basisOpen_default,
  curveBumpX: () => bumpX,
  curveBumpY: () => bumpY,
  curveBundle: () => bundle_default,
  curveCardinal: () => cardinal_default,
  curveCardinalClosed: () => cardinalClosed_default,
  curveCardinalOpen: () => cardinalOpen_default,
  curveCatmullRom: () => catmullRom_default,
  curveCatmullRomClosed: () => catmullRomClosed_default,
  curveCatmullRomOpen: () => catmullRomOpen_default,
  curveLinear: () => linear_default,
  curveLinearClosed: () => linearClosed_default,
  curveMonotoneX: () => monotoneX,
  curveMonotoneY: () => monotoneY,
  curveNatural: () => natural_default,
  curveStep: () => step_default,
  curveStepAfter: () => stepAfter,
  curveStepBefore: () => stepBefore,
  descending: () => descending_default,
  deviation: () => deviation,
  difference: () => difference,
  disjoint: () => disjoint,
  dispatch: () => dispatch_default,
  drag: () => drag_default,
  dragDisable: () => nodrag_default,
  dragEnable: () => yesdrag,
  dsv: () => dsv,
  dsvFormat: () => dsv_default,
  easeBack: () => backInOut,
  easeBackIn: () => backIn,
  easeBackInOut: () => backInOut,
  easeBackOut: () => backOut,
  easeBounce: () => bounceOut,
  easeBounceIn: () => bounceIn,
  easeBounceInOut: () => bounceInOut,
  easeBounceOut: () => bounceOut,
  easeCircle: () => circleInOut,
  easeCircleIn: () => circleIn,
  easeCircleInOut: () => circleInOut,
  easeCircleOut: () => circleOut,
  easeCubic: () => cubicInOut,
  easeCubicIn: () => cubicIn,
  easeCubicInOut: () => cubicInOut,
  easeCubicOut: () => cubicOut,
  easeElastic: () => elasticOut,
  easeElasticIn: () => elasticIn,
  easeElasticInOut: () => elasticInOut,
  easeElasticOut: () => elasticOut,
  easeExp: () => expInOut,
  easeExpIn: () => expIn,
  easeExpInOut: () => expInOut,
  easeExpOut: () => expOut,
  easeLinear: () => linear2,
  easePoly: () => polyInOut,
  easePolyIn: () => polyIn,
  easePolyInOut: () => polyInOut,
  easePolyOut: () => polyOut,
  easeQuad: () => quadInOut,
  easeQuadIn: () => quadIn,
  easeQuadInOut: () => quadInOut,
  easeQuadOut: () => quadOut,
  easeSin: () => sinInOut,
  easeSinIn: () => sinIn,
  easeSinInOut: () => sinInOut,
  easeSinOut: () => sinOut,
  every: () => every,
  extent: () => extent_default,
  fcumsum: () => fcumsum,
  filter: () => filter,
  forceCenter: () => center_default,
  forceCollide: () => collide_default,
  forceLink: () => link_default,
  forceManyBody: () => manyBody_default,
  forceRadial: () => radial_default,
  forceSimulation: () => simulation_default,
  forceX: () => x_default2,
  forceY: () => y_default2,
  format: () => format,
  formatDefaultLocale: () => defaultLocale2,
  formatLocale: () => locale_default,
  formatPrefix: () => formatPrefix,
  formatSpecifier: () => formatSpecifier,
  fsum: () => fsum,
  geoAlbers: () => albers_default,
  geoAlbersUsa: () => albersUsa_default,
  geoArea: () => area_default2,
  geoAzimuthalEqualArea: () => azimuthalEqualArea_default,
  geoAzimuthalEqualAreaRaw: () => azimuthalEqualAreaRaw,
  geoAzimuthalEquidistant: () => azimuthalEquidistant_default,
  geoAzimuthalEquidistantRaw: () => azimuthalEquidistantRaw,
  geoBounds: () => bounds_default,
  geoCentroid: () => centroid_default,
  geoCircle: () => circle_default,
  geoClipAntimeridian: () => antimeridian_default,
  geoClipCircle: () => circle_default2,
  geoClipExtent: () => extent_default3,
  geoClipRectangle: () => clipRectangle,
  geoConicConformal: () => conicConformal_default,
  geoConicConformalRaw: () => conicConformalRaw,
  geoConicEqualArea: () => conicEqualArea_default,
  geoConicEqualAreaRaw: () => conicEqualAreaRaw,
  geoConicEquidistant: () => conicEquidistant_default,
  geoConicEquidistantRaw: () => conicEquidistantRaw,
  geoContains: () => contains_default2,
  geoDistance: () => distance_default,
  geoEqualEarth: () => equalEarth_default,
  geoEqualEarthRaw: () => equalEarthRaw,
  geoEquirectangular: () => equirectangular_default,
  geoEquirectangularRaw: () => equirectangularRaw,
  geoGnomonic: () => gnomonic_default,
  geoGnomonicRaw: () => gnomonicRaw,
  geoGraticule: () => graticule,
  geoGraticule10: () => graticule10,
  geoIdentity: () => identity_default5,
  geoInterpolate: () => interpolate_default2,
  geoLength: () => length_default,
  geoMercator: () => mercator_default,
  geoMercatorRaw: () => mercatorRaw,
  geoNaturalEarth1: () => naturalEarth1_default,
  geoNaturalEarth1Raw: () => naturalEarth1Raw,
  geoOrthographic: () => orthographic_default,
  geoOrthographicRaw: () => orthographicRaw,
  geoPath: () => path_default2,
  geoProjection: () => projection,
  geoProjectionMutator: () => projectionMutator,
  geoRotation: () => rotation_default,
  geoStereographic: () => stereographic_default,
  geoStereographicRaw: () => stereographicRaw,
  geoStream: () => stream_default,
  geoTransform: () => transform_default,
  geoTransverseMercator: () => transverseMercator_default,
  geoTransverseMercatorRaw: () => transverseMercatorRaw,
  gray: () => gray,
  greatest: () => greatest,
  greatestIndex: () => greatestIndex,
  group: () => group,
  groupSort: () => groupSort,
  groups: () => groups,
  hcl: () => hcl,
  hierarchy: () => hierarchy,
  histogram: () => bin_default,
  hsl: () => hsl,
  html: () => html,
  image: () => image_default,
  index: () => index,
  indexes: () => indexes,
  interpolate: () => value_default,
  interpolateArray: () => array_default2,
  interpolateBasis: () => basis_default,
  interpolateBasisClosed: () => basisClosed_default,
  interpolateBlues: () => Blues_default,
  interpolateBrBG: () => BrBG_default,
  interpolateBuGn: () => BuGn_default,
  interpolateBuPu: () => BuPu_default,
  interpolateCividis: () => cividis_default,
  interpolateCool: () => cool,
  interpolateCubehelix: () => cubehelix_default,
  interpolateCubehelixDefault: () => cubehelix_default2,
  interpolateCubehelixLong: () => cubehelixLong,
  interpolateDate: () => date_default,
  interpolateDiscrete: () => discrete_default,
  interpolateGnBu: () => GnBu_default,
  interpolateGreens: () => Greens_default,
  interpolateGreys: () => Greys_default,
  interpolateHcl: () => hcl_default,
  interpolateHclLong: () => hclLong,
  interpolateHsl: () => hsl_default,
  interpolateHslLong: () => hslLong,
  interpolateHue: () => hue_default,
  interpolateInferno: () => inferno,
  interpolateLab: () => lab2,
  interpolateMagma: () => magma,
  interpolateNumber: () => number_default2,
  interpolateNumberArray: () => numberArray_default,
  interpolateObject: () => object_default,
  interpolateOrRd: () => OrRd_default,
  interpolateOranges: () => Oranges_default,
  interpolatePRGn: () => PRGn_default,
  interpolatePiYG: () => PiYG_default,
  interpolatePlasma: () => plasma,
  interpolatePuBu: () => PuBu_default,
  interpolatePuBuGn: () => PuBuGn_default,
  interpolatePuOr: () => PuOr_default,
  interpolatePuRd: () => PuRd_default,
  interpolatePurples: () => Purples_default,
  interpolateRainbow: () => rainbow_default,
  interpolateRdBu: () => RdBu_default,
  interpolateRdGy: () => RdGy_default,
  interpolateRdPu: () => RdPu_default,
  interpolateRdYlBu: () => RdYlBu_default,
  interpolateRdYlGn: () => RdYlGn_default,
  interpolateReds: () => Reds_default,
  interpolateRgb: () => rgb_default,
  interpolateRgbBasis: () => rgbBasis,
  interpolateRgbBasisClosed: () => rgbBasisClosed,
  interpolateRound: () => round_default,
  interpolateSinebow: () => sinebow_default,
  interpolateSpectral: () => Spectral_default,
  interpolateString: () => string_default,
  interpolateTransformCss: () => interpolateTransformCss,
  interpolateTransformSvg: () => interpolateTransformSvg,
  interpolateTurbo: () => turbo_default,
  interpolateViridis: () => viridis_default,
  interpolateWarm: () => warm,
  interpolateYlGn: () => YlGn_default,
  interpolateYlGnBu: () => YlGnBu_default,
  interpolateYlOrBr: () => YlOrBr_default,
  interpolateYlOrRd: () => YlOrRd_default,
  interpolateZoom: () => zoom_default,
  interrupt: () => interrupt_default,
  intersection: () => intersection,
  interval: () => interval_default,
  isoFormat: () => isoFormat_default,
  isoParse: () => isoParse_default,
  json: () => json_default,
  lab: () => lab,
  lch: () => lch,
  least: () => least,
  leastIndex: () => leastIndex,
  line: () => line_default2,
  lineRadial: () => lineRadial_default,
  linkHorizontal: () => linkHorizontal,
  linkRadial: () => linkRadial,
  linkVertical: () => linkVertical,
  local: () => local,
  map: () => map2,
  matcher: () => matcher_default,
  max: () => max,
  maxIndex: () => maxIndex,
  mean: () => mean,
  median: () => median_default,
  merge: () => merge,
  min: () => min,
  minIndex: () => minIndex,
  namespace: () => namespace_default,
  namespaces: () => namespaces_default,
  nice: () => nice,
  now: () => now2,
  pack: () => pack_default,
  packEnclose: () => enclose_default,
  packSiblings: () => siblings_default,
  pairs: () => pairs,
  partition: () => partition_default,
  path: () => path_default,
  permute: () => permute_default,
  pie: () => pie_default,
  piecewise: () => piecewise,
  pointRadial: () => pointRadial_default,
  pointer: () => pointer_default,
  pointers: () => pointers_default,
  polygonArea: () => area_default4,
  polygonCentroid: () => centroid_default3,
  polygonContains: () => contains_default3,
  polygonHull: () => hull_default,
  polygonLength: () => length_default2,
  precisionFixed: () => precisionFixed_default,
  precisionPrefix: () => precisionPrefix_default,
  precisionRound: () => precisionRound_default,
  quadtree: () => quadtree,
  quantile: () => quantile,
  quantileSorted: () => quantileSorted,
  quantize: () => quantize_default,
  quickselect: () => quickselect,
  radialArea: () => areaRadial_default,
  radialLine: () => lineRadial_default,
  randomBates: () => bates_default,
  randomBernoulli: () => bernoulli_default,
  randomBeta: () => beta_default,
  randomBinomial: () => binomial_default,
  randomCauchy: () => cauchy_default,
  randomExponential: () => exponential_default,
  randomGamma: () => gamma_default,
  randomGeometric: () => geometric_default,
  randomInt: () => int_default,
  randomIrwinHall: () => irwinHall_default,
  randomLcg: () => lcg,
  randomLogNormal: () => logNormal_default,
  randomLogistic: () => logistic_default,
  randomNormal: () => normal_default,
  randomPareto: () => pareto_default,
  randomPoisson: () => poisson_default,
  randomUniform: () => uniform_default,
  randomWeibull: () => weibull_default,
  range: () => range_default,
  reduce: () => reduce,
  reverse: () => reverse,
  rgb: () => rgb,
  ribbon: () => ribbon_default,
  ribbonArrow: () => ribbonArrow,
  rollup: () => rollup,
  rollups: () => rollups,
  scaleBand: () => band,
  scaleDiverging: () => diverging,
  scaleDivergingLog: () => divergingLog,
  scaleDivergingPow: () => divergingPow,
  scaleDivergingSqrt: () => divergingSqrt,
  scaleDivergingSymlog: () => divergingSymlog,
  scaleIdentity: () => identity3,
  scaleImplicit: () => implicit,
  scaleLinear: () => linear3,
  scaleLog: () => log3,
  scaleOrdinal: () => ordinal,
  scalePoint: () => point,
  scalePow: () => pow3,
  scaleQuantile: () => quantile2,
  scaleQuantize: () => quantize,
  scaleRadial: () => radial,
  scaleSequential: () => sequential,
  scaleSequentialLog: () => sequentialLog,
  scaleSequentialPow: () => sequentialPow,
  scaleSequentialQuantile: () => sequentialQuantile,
  scaleSequentialSqrt: () => sequentialSqrt,
  scaleSequentialSymlog: () => sequentialSymlog,
  scaleSqrt: () => sqrt2,
  scaleSymlog: () => symlog,
  scaleThreshold: () => threshold,
  scaleTime: () => time,
  scaleUtc: () => utcTime,
  scan: () => scan,
  schemeAccent: () => Accent_default,
  schemeBlues: () => scheme22,
  schemeBrBG: () => scheme,
  schemeBuGn: () => scheme10,
  schemeBuPu: () => scheme11,
  schemeCategory10: () => category10_default,
  schemeDark2: () => Dark2_default,
  schemeGnBu: () => scheme12,
  schemeGreens: () => scheme23,
  schemeGreys: () => scheme24,
  schemeOrRd: () => scheme13,
  schemeOranges: () => scheme27,
  schemePRGn: () => scheme2,
  schemePaired: () => Paired_default,
  schemePastel1: () => Pastel1_default,
  schemePastel2: () => Pastel2_default,
  schemePiYG: () => scheme3,
  schemePuBu: () => scheme15,
  schemePuBuGn: () => scheme14,
  schemePuOr: () => scheme4,
  schemePuRd: () => scheme16,
  schemePurples: () => scheme25,
  schemeRdBu: () => scheme5,
  schemeRdGy: () => scheme6,
  schemeRdPu: () => scheme17,
  schemeRdYlBu: () => scheme7,
  schemeRdYlGn: () => scheme8,
  schemeReds: () => scheme26,
  schemeSet1: () => Set1_default,
  schemeSet2: () => Set2_default,
  schemeSet3: () => Set3_default,
  schemeSpectral: () => scheme9,
  schemeTableau10: () => Tableau10_default,
  schemeYlGn: () => scheme19,
  schemeYlGnBu: () => scheme18,
  schemeYlOrBr: () => scheme20,
  schemeYlOrRd: () => scheme21,
  select: () => select_default2,
  selectAll: () => selectAll_default2,
  selection: () => selection_default,
  selector: () => selector_default,
  selectorAll: () => selectorAll_default,
  shuffle: () => shuffle_default,
  shuffler: () => shuffler,
  some: () => some,
  sort: () => sort,
  stack: () => stack_default,
  stackOffsetDiverging: () => diverging_default,
  stackOffsetExpand: () => expand_default,
  stackOffsetNone: () => none_default,
  stackOffsetSilhouette: () => silhouette_default,
  stackOffsetWiggle: () => wiggle_default,
  stackOrderAppearance: () => appearance_default,
  stackOrderAscending: () => ascending_default3,
  stackOrderDescending: () => descending_default3,
  stackOrderInsideOut: () => insideOut_default,
  stackOrderNone: () => none_default2,
  stackOrderReverse: () => reverse_default,
  stratify: () => stratify_default,
  style: () => styleValue,
  subset: () => subset,
  sum: () => sum,
  superset: () => superset,
  svg: () => svg,
  symbol: () => symbol_default,
  symbolCircle: () => circle_default3,
  symbolCross: () => cross_default2,
  symbolDiamond: () => diamond_default,
  symbolSquare: () => square_default,
  symbolStar: () => star_default,
  symbolTriangle: () => triangle_default,
  symbolWye: () => wye_default,
  symbols: () => symbols,
  text: () => text_default3,
  thresholdFreedmanDiaconis: () => freedmanDiaconis_default,
  thresholdScott: () => scott_default,
  thresholdSturges: () => sturges_default,
  tickFormat: () => tickFormat,
  tickIncrement: () => tickIncrement,
  tickStep: () => tickStep,
  ticks: () => ticks_default,
  timeDay: () => day_default,
  timeDays: () => days,
  timeFormat: () => timeFormat,
  timeFormatDefaultLocale: () => defaultLocale3,
  timeFormatLocale: () => formatLocale,
  timeFriday: () => friday,
  timeFridays: () => fridays,
  timeHour: () => hour_default,
  timeHours: () => hours,
  timeInterval: () => newInterval,
  timeMillisecond: () => millisecond_default,
  timeMilliseconds: () => milliseconds,
  timeMinute: () => minute_default,
  timeMinutes: () => minutes,
  timeMonday: () => monday,
  timeMondays: () => mondays,
  timeMonth: () => month_default,
  timeMonths: () => months2,
  timeParse: () => timeParse,
  timeSaturday: () => saturday,
  timeSaturdays: () => saturdays,
  timeSecond: () => second_default,
  timeSeconds: () => seconds,
  timeSunday: () => sunday,
  timeSundays: () => sundays,
  timeThursday: () => thursday,
  timeThursdays: () => thursdays,
  timeTickInterval: () => timeTickInterval,
  timeTicks: () => timeTicks,
  timeTuesday: () => tuesday,
  timeTuesdays: () => tuesdays,
  timeWednesday: () => wednesday,
  timeWednesdays: () => wednesdays,
  timeWeek: () => sunday,
  timeWeeks: () => sundays,
  timeYear: () => year_default,
  timeYears: () => years,
  timeout: () => timeout_default,
  timer: () => timer,
  timerFlush: () => timerFlush,
  transition: () => transition,
  transpose: () => transpose_default,
  tree: () => tree_default,
  treemap: () => treemap_default,
  treemapBinary: () => binary_default,
  treemapDice: () => dice_default,
  treemapResquarify: () => resquarify_default,
  treemapSlice: () => slice_default,
  treemapSliceDice: () => sliceDice_default,
  treemapSquarify: () => squarify_default,
  tsv: () => tsv2,
  tsvFormat: () => tsvFormat,
  tsvFormatBody: () => tsvFormatBody,
  tsvFormatRow: () => tsvFormatRow,
  tsvFormatRows: () => tsvFormatRows,
  tsvFormatValue: () => tsvFormatValue,
  tsvParse: () => tsvParse,
  tsvParseRows: () => tsvParseRows,
  union: () => union,
  utcDay: () => utcDay_default,
  utcDays: () => utcDays,
  utcFormat: () => utcFormat,
  utcFriday: () => utcFriday,
  utcFridays: () => utcFridays,
  utcHour: () => utcHour_default,
  utcHours: () => utcHours,
  utcMillisecond: () => millisecond_default,
  utcMilliseconds: () => milliseconds,
  utcMinute: () => utcMinute_default,
  utcMinutes: () => utcMinutes,
  utcMonday: () => utcMonday,
  utcMondays: () => utcMondays,
  utcMonth: () => utcMonth_default,
  utcMonths: () => utcMonths,
  utcParse: () => utcParse,
  utcSaturday: () => utcSaturday,
  utcSaturdays: () => utcSaturdays,
  utcSecond: () => second_default,
  utcSeconds: () => seconds,
  utcSunday: () => utcSunday,
  utcSundays: () => utcSundays,
  utcThursday: () => utcThursday,
  utcThursdays: () => utcThursdays,
  utcTickInterval: () => utcTickInterval,
  utcTicks: () => utcTicks,
  utcTuesday: () => utcTuesday,
  utcTuesdays: () => utcTuesdays,
  utcWednesday: () => utcWednesday,
  utcWednesdays: () => utcWednesdays,
  utcWeek: () => utcSunday,
  utcWeeks: () => utcSundays,
  utcYear: () => utcYear_default,
  utcYears: () => utcYears,
  variance: () => variance,
  version: () => version,
  window: () => window_default,
  xml: () => xml_default,
  zip: () => zip_default,
  zoom: () => zoom_default2,
  zoomIdentity: () => identity4,
  zoomTransform: () => transform
});

// node_modules/d3/dist/package.js
var version = "6.7.0";

// node_modules/d3-array/src/ascending.js
function ascending_default(a3, b) {
  return a3 < b ? -1 : a3 > b ? 1 : a3 >= b ? 0 : NaN;
}

// node_modules/d3-array/src/bisector.js
function bisector_default(f) {
  let delta = f;
  let compare = f;
  if (f.length === 1) {
    delta = (d, x4) => f(d) - x4;
    compare = ascendingComparator(f);
  }
  function left2(a3, x4, lo, hi) {
    if (lo == null)
      lo = 0;
    if (hi == null)
      hi = a3.length;
    while (lo < hi) {
      const mid = lo + hi >>> 1;
      if (compare(a3[mid], x4) < 0)
        lo = mid + 1;
      else
        hi = mid;
    }
    return lo;
  }
  function right2(a3, x4, lo, hi) {
    if (lo == null)
      lo = 0;
    if (hi == null)
      hi = a3.length;
    while (lo < hi) {
      const mid = lo + hi >>> 1;
      if (compare(a3[mid], x4) > 0)
        hi = mid;
      else
        lo = mid + 1;
    }
    return lo;
  }
  function center2(a3, x4, lo, hi) {
    if (lo == null)
      lo = 0;
    if (hi == null)
      hi = a3.length;
    const i = left2(a3, x4, lo, hi - 1);
    return i > lo && delta(a3[i - 1], x4) > -delta(a3[i], x4) ? i - 1 : i;
  }
  return { left: left2, center: center2, right: right2 };
}
function ascendingComparator(f) {
  return (d, x4) => ascending_default(f(d), x4);
}

// node_modules/d3-array/src/number.js
function number_default(x4) {
  return x4 === null ? NaN : +x4;
}
function* numbers(values, valueof) {
  if (valueof === void 0) {
    for (let value of values) {
      if (value != null && (value = +value) >= value) {
        yield value;
      }
    }
  } else {
    let index3 = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index3, values)) != null && (value = +value) >= value) {
        yield value;
      }
    }
  }
}

// node_modules/d3-array/src/bisect.js
var ascendingBisect = bisector_default(ascending_default);
var bisectRight = ascendingBisect.right;
var bisectLeft = ascendingBisect.left;
var bisectCenter = bisector_default(number_default).center;
var bisect_default = bisectRight;

// node_modules/d3-array/src/count.js
function count(values, valueof) {
  let count3 = 0;
  if (valueof === void 0) {
    for (let value of values) {
      if (value != null && (value = +value) >= value) {
        ++count3;
      }
    }
  } else {
    let index3 = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index3, values)) != null && (value = +value) >= value) {
        ++count3;
      }
    }
  }
  return count3;
}

// node_modules/d3-array/src/cross.js
function length(array3) {
  return array3.length | 0;
}
function empty(length3) {
  return !(length3 > 0);
}
function arrayify(values) {
  return typeof values !== "object" || "length" in values ? values : Array.from(values);
}
function reducer(reduce2) {
  return (values) => reduce2(...values);
}
function cross(...values) {
  const reduce2 = typeof values[values.length - 1] === "function" && reducer(values.pop());
  values = values.map(arrayify);
  const lengths = values.map(length);
  const j = values.length - 1;
  const index3 = new Array(j + 1).fill(0);
  const product = [];
  if (j < 0 || lengths.some(empty))
    return product;
  while (true) {
    product.push(index3.map((j2, i2) => values[i2][j2]));
    let i = j;
    while (++index3[i] === lengths[i]) {
      if (i === 0)
        return reduce2 ? product.map(reduce2) : product;
      index3[i--] = 0;
    }
  }
}

// node_modules/d3-array/src/cumsum.js
function cumsum(values, valueof) {
  var sum3 = 0, index3 = 0;
  return Float64Array.from(values, valueof === void 0 ? (v) => sum3 += +v || 0 : (v) => sum3 += +valueof(v, index3++, values) || 0);
}

// node_modules/d3-array/src/descending.js
function descending_default(a3, b) {
  return b < a3 ? -1 : b > a3 ? 1 : b >= a3 ? 0 : NaN;
}

// node_modules/d3-array/src/variance.js
function variance(values, valueof) {
  let count3 = 0;
  let delta;
  let mean2 = 0;
  let sum3 = 0;
  if (valueof === void 0) {
    for (let value of values) {
      if (value != null && (value = +value) >= value) {
        delta = value - mean2;
        mean2 += delta / ++count3;
        sum3 += delta * (value - mean2);
      }
    }
  } else {
    let index3 = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index3, values)) != null && (value = +value) >= value) {
        delta = value - mean2;
        mean2 += delta / ++count3;
        sum3 += delta * (value - mean2);
      }
    }
  }
  if (count3 > 1)
    return sum3 / (count3 - 1);
}

// node_modules/d3-array/src/deviation.js
function deviation(values, valueof) {
  const v = variance(values, valueof);
  return v ? Math.sqrt(v) : v;
}

// node_modules/d3-array/src/extent.js
function extent_default(values, valueof) {
  let min4;
  let max5;
  if (valueof === void 0) {
    for (const value of values) {
      if (value != null) {
        if (min4 === void 0) {
          if (value >= value)
            min4 = max5 = value;
        } else {
          if (min4 > value)
            min4 = value;
          if (max5 < value)
            max5 = value;
        }
      }
    }
  } else {
    let index3 = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index3, values)) != null) {
        if (min4 === void 0) {
          if (value >= value)
            min4 = max5 = value;
        } else {
          if (min4 > value)
            min4 = value;
          if (max5 < value)
            max5 = value;
        }
      }
    }
  }
  return [min4, max5];
}

// node_modules/d3-array/src/fsum.js
var Adder = class {
  constructor() {
    this._partials = new Float64Array(32);
    this._n = 0;
  }
  add(x4) {
    const p = this._partials;
    let i = 0;
    for (let j = 0; j < this._n && j < 32; j++) {
      const y4 = p[j], hi = x4 + y4, lo = Math.abs(x4) < Math.abs(y4) ? x4 - (hi - y4) : y4 - (hi - x4);
      if (lo)
        p[i++] = lo;
      x4 = hi;
    }
    p[i] = x4;
    this._n = i + 1;
    return this;
  }
  valueOf() {
    const p = this._partials;
    let n2 = this._n, x4, y4, lo, hi = 0;
    if (n2 > 0) {
      hi = p[--n2];
      while (n2 > 0) {
        x4 = hi;
        y4 = p[--n2];
        hi = x4 + y4;
        lo = y4 - (hi - x4);
        if (lo)
          break;
      }
      if (n2 > 0 && (lo < 0 && p[n2 - 1] < 0 || lo > 0 && p[n2 - 1] > 0)) {
        y4 = lo * 2;
        x4 = hi + y4;
        if (y4 == x4 - hi)
          hi = x4;
      }
    }
    return hi;
  }
};
function fsum(values, valueof) {
  const adder = new Adder();
  if (valueof === void 0) {
    for (let value of values) {
      if (value = +value) {
        adder.add(value);
      }
    }
  } else {
    let index3 = -1;
    for (let value of values) {
      if (value = +valueof(value, ++index3, values)) {
        adder.add(value);
      }
    }
  }
  return +adder;
}
function fcumsum(values, valueof) {
  const adder = new Adder();
  let index3 = -1;
  return Float64Array.from(
    values,
    valueof === void 0 ? (v) => adder.add(+v || 0) : (v) => adder.add(+valueof(v, ++index3, values) || 0)
  );
}

// node_modules/internmap/src/index.js
var InternMap = class extends Map {
  constructor(entries, key = keyof) {
    super();
    Object.defineProperties(this, { _intern: { value: /* @__PURE__ */ new Map() }, _key: { value: key } });
    if (entries != null)
      for (const [key2, value] of entries)
        this.set(key2, value);
  }
  get(key) {
    return super.get(intern_get(this, key));
  }
  has(key) {
    return super.has(intern_get(this, key));
  }
  set(key, value) {
    return super.set(intern_set(this, key), value);
  }
  delete(key) {
    return super.delete(intern_delete(this, key));
  }
};
var InternSet = class extends Set {
  constructor(values, key = keyof) {
    super();
    Object.defineProperties(this, { _intern: { value: /* @__PURE__ */ new Map() }, _key: { value: key } });
    if (values != null)
      for (const value of values)
        this.add(value);
  }
  has(value) {
    return super.has(intern_get(this, value));
  }
  add(value) {
    return super.add(intern_set(this, value));
  }
  delete(value) {
    return super.delete(intern_delete(this, value));
  }
};
function intern_get({ _intern, _key }, value) {
  const key = _key(value);
  return _intern.has(key) ? _intern.get(key) : value;
}
function intern_set({ _intern, _key }, value) {
  const key = _key(value);
  if (_intern.has(key))
    return _intern.get(key);
  _intern.set(key, value);
  return value;
}
function intern_delete({ _intern, _key }, value) {
  const key = _key(value);
  if (_intern.has(key)) {
    value = _intern.get(value);
    _intern.delete(key);
  }
  return value;
}
function keyof(value) {
  return value !== null && typeof value === "object" ? value.valueOf() : value;
}

// node_modules/d3-array/src/identity.js
function identity_default(x4) {
  return x4;
}

// node_modules/d3-array/src/group.js
function group(values, ...keys) {
  return nest(values, identity_default, identity_default, keys);
}
function groups(values, ...keys) {
  return nest(values, Array.from, identity_default, keys);
}
function rollup(values, reduce2, ...keys) {
  return nest(values, identity_default, reduce2, keys);
}
function rollups(values, reduce2, ...keys) {
  return nest(values, Array.from, reduce2, keys);
}
function index(values, ...keys) {
  return nest(values, identity_default, unique, keys);
}
function indexes(values, ...keys) {
  return nest(values, Array.from, unique, keys);
}
function unique(values) {
  if (values.length !== 1)
    throw new Error("duplicate key");
  return values[0];
}
function nest(values, map5, reduce2, keys) {
  return function regroup(values2, i) {
    if (i >= keys.length)
      return reduce2(values2);
    const groups2 = new InternMap();
    const keyof2 = keys[i++];
    let index3 = -1;
    for (const value of values2) {
      const key = keyof2(value, ++index3, values2);
      const group2 = groups2.get(key);
      if (group2)
        group2.push(value);
      else
        groups2.set(key, [value]);
    }
    for (const [key, values3] of groups2) {
      groups2.set(key, regroup(values3, i));
    }
    return map5(groups2);
  }(values, 0);
}

// node_modules/d3-array/src/permute.js
function permute_default(source, keys) {
  return Array.from(keys, (key) => source[key]);
}

// node_modules/d3-array/src/sort.js
function sort(values, ...F) {
  if (typeof values[Symbol.iterator] !== "function")
    throw new TypeError("values is not iterable");
  values = Array.from(values);
  let [f = ascending_default] = F;
  if (f.length === 1 || F.length > 1) {
    const index3 = Uint32Array.from(values, (d, i) => i);
    if (F.length > 1) {
      F = F.map((f2) => values.map(f2));
      index3.sort((i, j) => {
        for (const f2 of F) {
          const c5 = ascending_default(f2[i], f2[j]);
          if (c5)
            return c5;
        }
      });
    } else {
      f = values.map(f);
      index3.sort((i, j) => ascending_default(f[i], f[j]));
    }
    return permute_default(values, index3);
  }
  return values.sort(f);
}

// node_modules/d3-array/src/groupSort.js
function groupSort(values, reduce2, key) {
  return (reduce2.length === 1 ? sort(rollup(values, reduce2, key), ([ak, av], [bk, bv]) => ascending_default(av, bv) || ascending_default(ak, bk)) : sort(group(values, key), ([ak, av], [bk, bv]) => reduce2(av, bv) || ascending_default(ak, bk))).map(([key2]) => key2);
}

// node_modules/d3-array/src/array.js
var array = Array.prototype;
var slice = array.slice;
var map = array.map;

// node_modules/d3-array/src/constant.js
function constant_default(x4) {
  return function() {
    return x4;
  };
}

// node_modules/d3-array/src/ticks.js
var e10 = Math.sqrt(50);
var e5 = Math.sqrt(10);
var e2 = Math.sqrt(2);
function ticks_default(start2, stop, count3) {
  var reverse2, i = -1, n2, ticks, step;
  stop = +stop, start2 = +start2, count3 = +count3;
  if (start2 === stop && count3 > 0)
    return [start2];
  if (reverse2 = stop < start2)
    n2 = start2, start2 = stop, stop = n2;
  if ((step = tickIncrement(start2, stop, count3)) === 0 || !isFinite(step))
    return [];
  if (step > 0) {
    let r0 = Math.round(start2 / step), r1 = Math.round(stop / step);
    if (r0 * step < start2)
      ++r0;
    if (r1 * step > stop)
      --r1;
    ticks = new Array(n2 = r1 - r0 + 1);
    while (++i < n2)
      ticks[i] = (r0 + i) * step;
  } else {
    step = -step;
    let r0 = Math.round(start2 * step), r1 = Math.round(stop * step);
    if (r0 / step < start2)
      ++r0;
    if (r1 / step > stop)
      --r1;
    ticks = new Array(n2 = r1 - r0 + 1);
    while (++i < n2)
      ticks[i] = (r0 + i) / step;
  }
  if (reverse2)
    ticks.reverse();
  return ticks;
}
function tickIncrement(start2, stop, count3) {
  var step = (stop - start2) / Math.max(0, count3), power = Math.floor(Math.log(step) / Math.LN10), error = step / Math.pow(10, power);
  return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);
}
function tickStep(start2, stop, count3) {
  var step0 = Math.abs(stop - start2) / Math.max(0, count3), step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)), error = step0 / step1;
  if (error >= e10)
    step1 *= 10;
  else if (error >= e5)
    step1 *= 5;
  else if (error >= e2)
    step1 *= 2;
  return stop < start2 ? -step1 : step1;
}

// node_modules/d3-array/src/nice.js
function nice(start2, stop, count3) {
  let prestep;
  while (true) {
    const step = tickIncrement(start2, stop, count3);
    if (step === prestep || step === 0 || !isFinite(step)) {
      return [start2, stop];
    } else if (step > 0) {
      start2 = Math.floor(start2 / step) * step;
      stop = Math.ceil(stop / step) * step;
    } else if (step < 0) {
      start2 = Math.ceil(start2 * step) / step;
      stop = Math.floor(stop * step) / step;
    }
    prestep = step;
  }
}

// node_modules/d3-array/src/threshold/sturges.js
function sturges_default(values) {
  return Math.ceil(Math.log(count(values)) / Math.LN2) + 1;
}

// node_modules/d3-array/src/bin.js
function bin_default() {
  var value = identity_default, domain = extent_default, threshold2 = sturges_default;
  function histogram(data) {
    if (!Array.isArray(data))
      data = Array.from(data);
    var i, n2 = data.length, x4, values = new Array(n2);
    for (i = 0; i < n2; ++i) {
      values[i] = value(data[i], i, data);
    }
    var xz = domain(values), x06 = xz[0], x12 = xz[1], tz = threshold2(values, x06, x12);
    if (!Array.isArray(tz)) {
      const max5 = x12, tn = +tz;
      if (domain === extent_default)
        [x06, x12] = nice(x06, x12, tn);
      tz = ticks_default(x06, x12, tn);
      if (tz[tz.length - 1] >= x12) {
        if (max5 >= x12 && domain === extent_default) {
          const step = tickIncrement(x06, x12, tn);
          if (isFinite(step)) {
            if (step > 0) {
              x12 = (Math.floor(x12 / step) + 1) * step;
            } else if (step < 0) {
              x12 = (Math.ceil(x12 * -step) + 1) / -step;
            }
          }
        } else {
          tz.pop();
        }
      }
    }
    var m2 = tz.length;
    while (tz[0] <= x06)
      tz.shift(), --m2;
    while (tz[m2 - 1] > x12)
      tz.pop(), --m2;
    var bins = new Array(m2 + 1), bin;
    for (i = 0; i <= m2; ++i) {
      bin = bins[i] = [];
      bin.x0 = i > 0 ? tz[i - 1] : x06;
      bin.x1 = i < m2 ? tz[i] : x12;
    }
    for (i = 0; i < n2; ++i) {
      x4 = values[i];
      if (x06 <= x4 && x4 <= x12) {
        bins[bisect_default(tz, x4, 0, m2)].push(data[i]);
      }
    }
    return bins;
  }
  histogram.value = function(_) {
    return arguments.length ? (value = typeof _ === "function" ? _ : constant_default(_), histogram) : value;
  };
  histogram.domain = function(_) {
    return arguments.length ? (domain = typeof _ === "function" ? _ : constant_default([_[0], _[1]]), histogram) : domain;
  };
  histogram.thresholds = function(_) {
    return arguments.length ? (threshold2 = typeof _ === "function" ? _ : Array.isArray(_) ? constant_default(slice.call(_)) : constant_default(_), histogram) : threshold2;
  };
  return histogram;
}

// node_modules/d3-array/src/max.js
function max(values, valueof) {
  let max5;
  if (valueof === void 0) {
    for (const value of values) {
      if (value != null && (max5 < value || max5 === void 0 && value >= value)) {
        max5 = value;
      }
    }
  } else {
    let index3 = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index3, values)) != null && (max5 < value || max5 === void 0 && value >= value)) {
        max5 = value;
      }
    }
  }
  return max5;
}

// node_modules/d3-array/src/min.js
function min(values, valueof) {
  let min4;
  if (valueof === void 0) {
    for (const value of values) {
      if (value != null && (min4 > value || min4 === void 0 && value >= value)) {
        min4 = value;
      }
    }
  } else {
    let index3 = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index3, values)) != null && (min4 > value || min4 === void 0 && value >= value)) {
        min4 = value;
      }
    }
  }
  return min4;
}

// node_modules/d3-array/src/quickselect.js
function quickselect(array3, k2, left2 = 0, right2 = array3.length - 1, compare = ascending_default) {
  while (right2 > left2) {
    if (right2 - left2 > 600) {
      const n2 = right2 - left2 + 1;
      const m2 = k2 - left2 + 1;
      const z = Math.log(n2);
      const s3 = 0.5 * Math.exp(2 * z / 3);
      const sd = 0.5 * Math.sqrt(z * s3 * (n2 - s3) / n2) * (m2 - n2 / 2 < 0 ? -1 : 1);
      const newLeft = Math.max(left2, Math.floor(k2 - m2 * s3 / n2 + sd));
      const newRight = Math.min(right2, Math.floor(k2 + (n2 - m2) * s3 / n2 + sd));
      quickselect(array3, k2, newLeft, newRight, compare);
    }
    const t = array3[k2];
    let i = left2;
    let j = right2;
    swap(array3, left2, k2);
    if (compare(array3[right2], t) > 0)
      swap(array3, left2, right2);
    while (i < j) {
      swap(array3, i, j), ++i, --j;
      while (compare(array3[i], t) < 0)
        ++i;
      while (compare(array3[j], t) > 0)
        --j;
    }
    if (compare(array3[left2], t) === 0)
      swap(array3, left2, j);
    else
      ++j, swap(array3, j, right2);
    if (j <= k2)
      left2 = j + 1;
    if (k2 <= j)
      right2 = j - 1;
  }
  return array3;
}
function swap(array3, i, j) {
  const t = array3[i];
  array3[i] = array3[j];
  array3[j] = t;
}

// node_modules/d3-array/src/quantile.js
function quantile(values, p, valueof) {
  values = Float64Array.from(numbers(values, valueof));
  if (!(n2 = values.length))
    return;
  if ((p = +p) <= 0 || n2 < 2)
    return min(values);
  if (p >= 1)
    return max(values);
  var n2, i = (n2 - 1) * p, i0 = Math.floor(i), value0 = max(quickselect(values, i0).subarray(0, i0 + 1)), value1 = min(values.subarray(i0 + 1));
  return value0 + (value1 - value0) * (i - i0);
}
function quantileSorted(values, p, valueof = number_default) {
  if (!(n2 = values.length))
    return;
  if ((p = +p) <= 0 || n2 < 2)
    return +valueof(values[0], 0, values);
  if (p >= 1)
    return +valueof(values[n2 - 1], n2 - 1, values);
  var n2, i = (n2 - 1) * p, i0 = Math.floor(i), value0 = +valueof(values[i0], i0, values), value1 = +valueof(values[i0 + 1], i0 + 1, values);
  return value0 + (value1 - value0) * (i - i0);
}

// node_modules/d3-array/src/threshold/freedmanDiaconis.js
function freedmanDiaconis_default(values, min4, max5) {
  return Math.ceil((max5 - min4) / (2 * (quantile(values, 0.75) - quantile(values, 0.25)) * Math.pow(count(values), -1 / 3)));
}

// node_modules/d3-array/src/threshold/scott.js
function scott_default(values, min4, max5) {
  return Math.ceil((max5 - min4) / (3.5 * deviation(values) * Math.pow(count(values), -1 / 3)));
}

// node_modules/d3-array/src/maxIndex.js
function maxIndex(values, valueof) {
  let max5;
  let maxIndex2 = -1;
  let index3 = -1;
  if (valueof === void 0) {
    for (const value of values) {
      ++index3;
      if (value != null && (max5 < value || max5 === void 0 && value >= value)) {
        max5 = value, maxIndex2 = index3;
      }
    }
  } else {
    for (let value of values) {
      if ((value = valueof(value, ++index3, values)) != null && (max5 < value || max5 === void 0 && value >= value)) {
        max5 = value, maxIndex2 = index3;
      }
    }
  }
  return maxIndex2;
}

// node_modules/d3-array/src/mean.js
function mean(values, valueof) {
  let count3 = 0;
  let sum3 = 0;
  if (valueof === void 0) {
    for (let value of values) {
      if (value != null && (value = +value) >= value) {
        ++count3, sum3 += value;
      }
    }
  } else {
    let index3 = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index3, values)) != null && (value = +value) >= value) {
        ++count3, sum3 += value;
      }
    }
  }
  if (count3)
    return sum3 / count3;
}

// node_modules/d3-array/src/median.js
function median_default(values, valueof) {
  return quantile(values, 0.5, valueof);
}

// node_modules/d3-array/src/merge.js
function* flatten(arrays) {
  for (const array3 of arrays) {
    yield* array3;
  }
}
function merge(arrays) {
  return Array.from(flatten(arrays));
}

// node_modules/d3-array/src/minIndex.js
function minIndex(values, valueof) {
  let min4;
  let minIndex2 = -1;
  let index3 = -1;
  if (valueof === void 0) {
    for (const value of values) {
      ++index3;
      if (value != null && (min4 > value || min4 === void 0 && value >= value)) {
        min4 = value, minIndex2 = index3;
      }
    }
  } else {
    for (let value of values) {
      if ((value = valueof(value, ++index3, values)) != null && (min4 > value || min4 === void 0 && value >= value)) {
        min4 = value, minIndex2 = index3;
      }
    }
  }
  return minIndex2;
}

// node_modules/d3-array/src/pairs.js
function pairs(values, pairof = pair) {
  const pairs2 = [];
  let previous;
  let first = false;
  for (const value of values) {
    if (first)
      pairs2.push(pairof(previous, value));
    previous = value;
    first = true;
  }
  return pairs2;
}
function pair(a3, b) {
  return [a3, b];
}

// node_modules/d3-array/src/range.js
function range_default(start2, stop, step) {
  start2 = +start2, stop = +stop, step = (n2 = arguments.length) < 2 ? (stop = start2, start2 = 0, 1) : n2 < 3 ? 1 : +step;
  var i = -1, n2 = Math.max(0, Math.ceil((stop - start2) / step)) | 0, range3 = new Array(n2);
  while (++i < n2) {
    range3[i] = start2 + i * step;
  }
  return range3;
}

// node_modules/d3-array/src/least.js
function least(values, compare = ascending_default) {
  let min4;
  let defined = false;
  if (compare.length === 1) {
    let minValue;
    for (const element of values) {
      const value = compare(element);
      if (defined ? ascending_default(value, minValue) < 0 : ascending_default(value, value) === 0) {
        min4 = element;
        minValue = value;
        defined = true;
      }
    }
  } else {
    for (const value of values) {
      if (defined ? compare(value, min4) < 0 : compare(value, value) === 0) {
        min4 = value;
        defined = true;
      }
    }
  }
  return min4;
}

// node_modules/d3-array/src/leastIndex.js
function leastIndex(values, compare = ascending_default) {
  if (compare.length === 1)
    return minIndex(values, compare);
  let minValue;
  let min4 = -1;
  let index3 = -1;
  for (const value of values) {
    ++index3;
    if (min4 < 0 ? compare(value, value) === 0 : compare(value, minValue) < 0) {
      minValue = value;
      min4 = index3;
    }
  }
  return min4;
}

// node_modules/d3-array/src/greatest.js
function greatest(values, compare = ascending_default) {
  let max5;
  let defined = false;
  if (compare.length === 1) {
    let maxValue;
    for (const element of values) {
      const value = compare(element);
      if (defined ? ascending_default(value, maxValue) > 0 : ascending_default(value, value) === 0) {
        max5 = element;
        maxValue = value;
        defined = true;
      }
    }
  } else {
    for (const value of values) {
      if (defined ? compare(value, max5) > 0 : compare(value, value) === 0) {
        max5 = value;
        defined = true;
      }
    }
  }
  return max5;
}

// node_modules/d3-array/src/greatestIndex.js
function greatestIndex(values, compare = ascending_default) {
  if (compare.length === 1)
    return maxIndex(values, compare);
  let maxValue;
  let max5 = -1;
  let index3 = -1;
  for (const value of values) {
    ++index3;
    if (max5 < 0 ? compare(value, value) === 0 : compare(value, maxValue) > 0) {
      maxValue = value;
      max5 = index3;
    }
  }
  return max5;
}

// node_modules/d3-array/src/scan.js
function scan(values, compare) {
  const index3 = leastIndex(values, compare);
  return index3 < 0 ? void 0 : index3;
}

// node_modules/d3-array/src/shuffle.js
var shuffle_default = shuffler(Math.random);
function shuffler(random) {
  return function shuffle2(array3, i0 = 0, i1 = array3.length) {
    let m2 = i1 - (i0 = +i0);
    while (m2) {
      const i = random() * m2-- | 0, t = array3[m2 + i0];
      array3[m2 + i0] = array3[i + i0];
      array3[i + i0] = t;
    }
    return array3;
  };
}

// node_modules/d3-array/src/sum.js
function sum(values, valueof) {
  let sum3 = 0;
  if (valueof === void 0) {
    for (let value of values) {
      if (value = +value) {
        sum3 += value;
      }
    }
  } else {
    let index3 = -1;
    for (let value of values) {
      if (value = +valueof(value, ++index3, values)) {
        sum3 += value;
      }
    }
  }
  return sum3;
}

// node_modules/d3-array/src/transpose.js
function transpose_default(matrix) {
  if (!(n2 = matrix.length))
    return [];
  for (var i = -1, m2 = min(matrix, length2), transpose = new Array(m2); ++i < m2; ) {
    for (var j = -1, n2, row = transpose[i] = new Array(n2); ++j < n2; ) {
      row[j] = matrix[j][i];
    }
  }
  return transpose;
}
function length2(d) {
  return d.length;
}

// node_modules/d3-array/src/zip.js
function zip_default() {
  return transpose_default(arguments);
}

// node_modules/d3-array/src/every.js
function every(values, test) {
  if (typeof test !== "function")
    throw new TypeError("test is not a function");
  let index3 = -1;
  for (const value of values) {
    if (!test(value, ++index3, values)) {
      return false;
    }
  }
  return true;
}

// node_modules/d3-array/src/some.js
function some(values, test) {
  if (typeof test !== "function")
    throw new TypeError("test is not a function");
  let index3 = -1;
  for (const value of values) {
    if (test(value, ++index3, values)) {
      return true;
    }
  }
  return false;
}

// node_modules/d3-array/src/filter.js
function filter(values, test) {
  if (typeof test !== "function")
    throw new TypeError("test is not a function");
  const array3 = [];
  let index3 = -1;
  for (const value of values) {
    if (test(value, ++index3, values)) {
      array3.push(value);
    }
  }
  return array3;
}

// node_modules/d3-array/src/map.js
function map2(values, mapper) {
  if (typeof values[Symbol.iterator] !== "function")
    throw new TypeError("values is not iterable");
  if (typeof mapper !== "function")
    throw new TypeError("mapper is not a function");
  return Array.from(values, (value, index3) => mapper(value, index3, values));
}

// node_modules/d3-array/src/reduce.js
function reduce(values, reducer2, value) {
  if (typeof reducer2 !== "function")
    throw new TypeError("reducer is not a function");
  const iterator = values[Symbol.iterator]();
  let done, next, index3 = -1;
  if (arguments.length < 3) {
    ({ done, value } = iterator.next());
    if (done)
      return;
    ++index3;
  }
  while ({ done, value: next } = iterator.next(), !done) {
    value = reducer2(value, next, ++index3, values);
  }
  return value;
}

// node_modules/d3-array/src/reverse.js
function reverse(values) {
  if (typeof values[Symbol.iterator] !== "function")
    throw new TypeError("values is not iterable");
  return Array.from(values).reverse();
}

// node_modules/d3-array/src/difference.js
function difference(values, ...others) {
  values = new Set(values);
  for (const other of others) {
    for (const value of other) {
      values.delete(value);
    }
  }
  return values;
}

// node_modules/d3-array/src/disjoint.js
function disjoint(values, other) {
  const iterator = other[Symbol.iterator](), set4 = /* @__PURE__ */ new Set();
  for (const v of values) {
    if (set4.has(v))
      return false;
    let value, done;
    while ({ value, done } = iterator.next()) {
      if (done)
        break;
      if (Object.is(v, value))
        return false;
      set4.add(value);
    }
  }
  return true;
}

// node_modules/d3-array/src/set.js
function set(values) {
  return values instanceof Set ? values : new Set(values);
}

// node_modules/d3-array/src/intersection.js
function intersection(values, ...others) {
  values = new Set(values);
  others = others.map(set);
  out:
    for (const value of values) {
      for (const other of others) {
        if (!other.has(value)) {
          values.delete(value);
          continue out;
        }
      }
    }
  return values;
}

// node_modules/d3-array/src/superset.js
function superset(values, other) {
  const iterator = values[Symbol.iterator](), set4 = /* @__PURE__ */ new Set();
  for (const o of other) {
    if (set4.has(o))
      continue;
    let value, done;
    while ({ value, done } = iterator.next()) {
      if (done)
        return false;
      set4.add(value);
      if (Object.is(o, value))
        break;
    }
  }
  return true;
}

// node_modules/d3-array/src/subset.js
function subset(values, other) {
  return superset(other, values);
}

// node_modules/d3-array/src/union.js
function union(...others) {
  const set4 = /* @__PURE__ */ new Set();
  for (const other of others) {
    for (const o of other) {
      set4.add(o);
    }
  }
  return set4;
}

// node_modules/d3-axis/src/array.js
var slice2 = Array.prototype.slice;

// node_modules/d3-axis/src/identity.js
function identity_default2(x4) {
  return x4;
}

// node_modules/d3-axis/src/axis.js
var top = 1;
var right = 2;
var bottom = 3;
var left = 4;
var epsilon = 1e-6;
function translateX(x4) {
  return "translate(" + x4 + ",0)";
}
function translateY(y4) {
  return "translate(0," + y4 + ")";
}
function number(scale) {
  return (d) => +scale(d);
}
function center(scale, offset2) {
  offset2 = Math.max(0, scale.bandwidth() - offset2 * 2) / 2;
  if (scale.round())
    offset2 = Math.round(offset2);
  return (d) => +scale(d) + offset2;
}
function entering() {
  return !this.__axis;
}
function axis(orient2, scale) {
  var tickArguments = [], tickValues = null, tickFormat2 = null, tickSizeInner = 6, tickSizeOuter = 6, tickPadding = 3, offset2 = typeof window !== "undefined" && window.devicePixelRatio > 1 ? 0 : 0.5, k2 = orient2 === top || orient2 === left ? -1 : 1, x4 = orient2 === left || orient2 === right ? "x" : "y", transform2 = orient2 === top || orient2 === bottom ? translateX : translateY;
  function axis2(context) {
    var values = tickValues == null ? scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain() : tickValues, format2 = tickFormat2 == null ? scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity_default2 : tickFormat2, spacing = Math.max(tickSizeInner, 0) + tickPadding, range3 = scale.range(), range0 = +range3[0] + offset2, range1 = +range3[range3.length - 1] + offset2, position = (scale.bandwidth ? center : number)(scale.copy(), offset2), selection2 = context.selection ? context.selection() : context, path2 = selection2.selectAll(".domain").data([null]), tick = selection2.selectAll(".tick").data(values, scale).order(), tickExit = tick.exit(), tickEnter = tick.enter().append("g").attr("class", "tick"), line = tick.select("line"), text = tick.select("text");
    path2 = path2.merge(path2.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "currentColor"));
    tick = tick.merge(tickEnter);
    line = line.merge(tickEnter.append("line").attr("stroke", "currentColor").attr(x4 + "2", k2 * tickSizeInner));
    text = text.merge(tickEnter.append("text").attr("fill", "currentColor").attr(x4, k2 * spacing).attr("dy", orient2 === top ? "0em" : orient2 === bottom ? "0.71em" : "0.32em"));
    if (context !== selection2) {
      path2 = path2.transition(context);
      tick = tick.transition(context);
      line = line.transition(context);
      text = text.transition(context);
      tickExit = tickExit.transition(context).attr("opacity", epsilon).attr("transform", function(d) {
        return isFinite(d = position(d)) ? transform2(d + offset2) : this.getAttribute("transform");
      });
      tickEnter.attr("opacity", epsilon).attr("transform", function(d) {
        var p = this.parentNode.__axis;
        return transform2((p && isFinite(p = p(d)) ? p : position(d)) + offset2);
      });
    }
    tickExit.remove();
    path2.attr("d", orient2 === left || orient2 === right ? tickSizeOuter ? "M" + k2 * tickSizeOuter + "," + range0 + "H" + offset2 + "V" + range1 + "H" + k2 * tickSizeOuter : "M" + offset2 + "," + range0 + "V" + range1 : tickSizeOuter ? "M" + range0 + "," + k2 * tickSizeOuter + "V" + offset2 + "H" + range1 + "V" + k2 * tickSizeOuter : "M" + range0 + "," + offset2 + "H" + range1);
    tick.attr("opacity", 1).attr("transform", function(d) {
      return transform2(position(d) + offset2);
    });
    line.attr(x4 + "2", k2 * tickSizeInner);
    text.attr(x4, k2 * spacing).text(format2);
    selection2.filter(entering).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", orient2 === right ? "start" : orient2 === left ? "end" : "middle");
    selection2.each(function() {
      this.__axis = position;
    });
  }
  axis2.scale = function(_) {
    return arguments.length ? (scale = _, axis2) : scale;
  };
  axis2.ticks = function() {
    return tickArguments = slice2.call(arguments), axis2;
  };
  axis2.tickArguments = function(_) {
    return arguments.length ? (tickArguments = _ == null ? [] : slice2.call(_), axis2) : tickArguments.slice();
  };
  axis2.tickValues = function(_) {
    return arguments.length ? (tickValues = _ == null ? null : slice2.call(_), axis2) : tickValues && tickValues.slice();
  };
  axis2.tickFormat = function(_) {
    return arguments.length ? (tickFormat2 = _, axis2) : tickFormat2;
  };
  axis2.tickSize = function(_) {
    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis2) : tickSizeInner;
  };
  axis2.tickSizeInner = function(_) {
    return arguments.length ? (tickSizeInner = +_, axis2) : tickSizeInner;
  };
  axis2.tickSizeOuter = function(_) {
    return arguments.length ? (tickSizeOuter = +_, axis2) : tickSizeOuter;
  };
  axis2.tickPadding = function(_) {
    return arguments.length ? (tickPadding = +_, axis2) : tickPadding;
  };
  axis2.offset = function(_) {
    return arguments.length ? (offset2 = +_, axis2) : offset2;
  };
  return axis2;
}
function axisTop(scale) {
  return axis(top, scale);
}
function axisRight(scale) {
  return axis(right, scale);
}
function axisBottom(scale) {
  return axis(bottom, scale);
}
function axisLeft(scale) {
  return axis(left, scale);
}

// node_modules/d3-dispatch/src/dispatch.js
var noop = { value: () => {
} };
function dispatch() {
  for (var i = 0, n2 = arguments.length, _ = {}, t; i < n2; ++i) {
    if (!(t = arguments[i] + "") || t in _ || /[\s.]/.test(t))
      throw new Error("illegal type: " + t);
    _[t] = [];
  }
  return new Dispatch(_);
}
function Dispatch(_) {
  this._ = _;
}
function parseTypenames(typenames, types) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0)
      name = t.slice(i + 1), t = t.slice(0, i);
    if (t && !types.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    return { type: t, name };
  });
}
Dispatch.prototype = dispatch.prototype = {
  constructor: Dispatch,
  on: function(typename, callback) {
    var _ = this._, T = parseTypenames(typename + "", _), t, i = -1, n2 = T.length;
    if (arguments.length < 2) {
      while (++i < n2)
        if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name)))
          return t;
      return;
    }
    if (callback != null && typeof callback !== "function")
      throw new Error("invalid callback: " + callback);
    while (++i < n2) {
      if (t = (typename = T[i]).type)
        _[t] = set2(_[t], typename.name, callback);
      else if (callback == null)
        for (t in _)
          _[t] = set2(_[t], typename.name, null);
    }
    return this;
  },
  copy: function() {
    var copy3 = {}, _ = this._;
    for (var t in _)
      copy3[t] = _[t].slice();
    return new Dispatch(copy3);
  },
  call: function(type2, that) {
    if ((n2 = arguments.length - 2) > 0)
      for (var args = new Array(n2), i = 0, n2, t; i < n2; ++i)
        args[i] = arguments[i + 2];
    if (!this._.hasOwnProperty(type2))
      throw new Error("unknown type: " + type2);
    for (t = this._[type2], i = 0, n2 = t.length; i < n2; ++i)
      t[i].value.apply(that, args);
  },
  apply: function(type2, that, args) {
    if (!this._.hasOwnProperty(type2))
      throw new Error("unknown type: " + type2);
    for (var t = this._[type2], i = 0, n2 = t.length; i < n2; ++i)
      t[i].value.apply(that, args);
  }
};
function get(type2, name) {
  for (var i = 0, n2 = type2.length, c5; i < n2; ++i) {
    if ((c5 = type2[i]).name === name) {
      return c5.value;
    }
  }
}
function set2(type2, name, callback) {
  for (var i = 0, n2 = type2.length; i < n2; ++i) {
    if (type2[i].name === name) {
      type2[i] = noop, type2 = type2.slice(0, i).concat(type2.slice(i + 1));
      break;
    }
  }
  if (callback != null)
    type2.push({ name, value: callback });
  return type2;
}
var dispatch_default = dispatch;

// node_modules/d3-selection/src/namespaces.js
var xhtml = "http://www.w3.org/1999/xhtml";
var namespaces_default = {
  svg: "http://www.w3.org/2000/svg",
  xhtml,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};

// node_modules/d3-selection/src/namespace.js
function namespace_default(name) {
  var prefix = name += "", i = prefix.indexOf(":");
  if (i >= 0 && (prefix = name.slice(0, i)) !== "xmlns")
    name = name.slice(i + 1);
  return namespaces_default.hasOwnProperty(prefix) ? { space: namespaces_default[prefix], local: name } : name;
}

// node_modules/d3-selection/src/creator.js
function creatorInherit(name) {
  return function() {
    var document2 = this.ownerDocument, uri = this.namespaceURI;
    return uri === xhtml && document2.documentElement.namespaceURI === xhtml ? document2.createElement(name) : document2.createElementNS(uri, name);
  };
}
function creatorFixed(fullname) {
  return function() {
    return this.ownerDocument.createElementNS(fullname.space, fullname.local);
  };
}
function creator_default(name) {
  var fullname = namespace_default(name);
  return (fullname.local ? creatorFixed : creatorInherit)(fullname);
}

// node_modules/d3-selection/src/selector.js
function none() {
}
function selector_default(selector) {
  return selector == null ? none : function() {
    return this.querySelector(selector);
  };
}

// node_modules/d3-selection/src/selection/select.js
function select_default(select) {
  if (typeof select !== "function")
    select = selector_default(select);
  for (var groups2 = this._groups, m2 = groups2.length, subgroups = new Array(m2), j = 0; j < m2; ++j) {
    for (var group2 = groups2[j], n2 = group2.length, subgroup = subgroups[j] = new Array(n2), node, subnode, i = 0; i < n2; ++i) {
      if ((node = group2[i]) && (subnode = select.call(node, node.__data__, i, group2))) {
        if ("__data__" in node)
          subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
      }
    }
  }
  return new Selection(subgroups, this._parents);
}

// node_modules/d3-selection/src/array.js
function array_default(x4) {
  return typeof x4 === "object" && "length" in x4 ? x4 : Array.from(x4);
}

// node_modules/d3-selection/src/selectorAll.js
function empty2() {
  return [];
}
function selectorAll_default(selector) {
  return selector == null ? empty2 : function() {
    return this.querySelectorAll(selector);
  };
}

// node_modules/d3-selection/src/selection/selectAll.js
function arrayAll(select) {
  return function() {
    var group2 = select.apply(this, arguments);
    return group2 == null ? [] : array_default(group2);
  };
}
function selectAll_default(select) {
  if (typeof select === "function")
    select = arrayAll(select);
  else
    select = selectorAll_default(select);
  for (var groups2 = this._groups, m2 = groups2.length, subgroups = [], parents = [], j = 0; j < m2; ++j) {
    for (var group2 = groups2[j], n2 = group2.length, node, i = 0; i < n2; ++i) {
      if (node = group2[i]) {
        subgroups.push(select.call(node, node.__data__, i, group2));
        parents.push(node);
      }
    }
  }
  return new Selection(subgroups, parents);
}

// node_modules/d3-selection/src/matcher.js
function matcher_default(selector) {
  return function() {
    return this.matches(selector);
  };
}
function childMatcher(selector) {
  return function(node) {
    return node.matches(selector);
  };
}

// node_modules/d3-selection/src/selection/selectChild.js
var find = Array.prototype.find;
function childFind(match2) {
  return function() {
    return find.call(this.children, match2);
  };
}
function childFirst() {
  return this.firstElementChild;
}
function selectChild_default(match2) {
  return this.select(match2 == null ? childFirst : childFind(typeof match2 === "function" ? match2 : childMatcher(match2)));
}

// node_modules/d3-selection/src/selection/selectChildren.js
var filter2 = Array.prototype.filter;
function children() {
  return this.children;
}
function childrenFilter(match2) {
  return function() {
    return filter2.call(this.children, match2);
  };
}
function selectChildren_default(match2) {
  return this.selectAll(match2 == null ? children : childrenFilter(typeof match2 === "function" ? match2 : childMatcher(match2)));
}

// node_modules/d3-selection/src/selection/filter.js
function filter_default(match2) {
  if (typeof match2 !== "function")
    match2 = matcher_default(match2);
  for (var groups2 = this._groups, m2 = groups2.length, subgroups = new Array(m2), j = 0; j < m2; ++j) {
    for (var group2 = groups2[j], n2 = group2.length, subgroup = subgroups[j] = [], node, i = 0; i < n2; ++i) {
      if ((node = group2[i]) && match2.call(node, node.__data__, i, group2)) {
        subgroup.push(node);
      }
    }
  }
  return new Selection(subgroups, this._parents);
}

// node_modules/d3-selection/src/selection/sparse.js
function sparse_default(update) {
  return new Array(update.length);
}

// node_modules/d3-selection/src/selection/enter.js
function enter_default() {
  return new Selection(this._enter || this._groups.map(sparse_default), this._parents);
}
function EnterNode(parent, datum2) {
  this.ownerDocument = parent.ownerDocument;
  this.namespaceURI = parent.namespaceURI;
  this._next = null;
  this._parent = parent;
  this.__data__ = datum2;
}
EnterNode.prototype = {
  constructor: EnterNode,
  appendChild: function(child) {
    return this._parent.insertBefore(child, this._next);
  },
  insertBefore: function(child, next) {
    return this._parent.insertBefore(child, next);
  },
  querySelector: function(selector) {
    return this._parent.querySelector(selector);
  },
  querySelectorAll: function(selector) {
    return this._parent.querySelectorAll(selector);
  }
};

// node_modules/d3-selection/src/constant.js
function constant_default2(x4) {
  return function() {
    return x4;
  };
}

// node_modules/d3-selection/src/selection/data.js
function bindIndex(parent, group2, enter, update, exit, data) {
  var i = 0, node, groupLength = group2.length, dataLength = data.length;
  for (; i < dataLength; ++i) {
    if (node = group2[i]) {
      node.__data__ = data[i];
      update[i] = node;
    } else {
      enter[i] = new EnterNode(parent, data[i]);
    }
  }
  for (; i < groupLength; ++i) {
    if (node = group2[i]) {
      exit[i] = node;
    }
  }
}
function bindKey(parent, group2, enter, update, exit, data, key) {
  var i, node, nodeByKeyValue = /* @__PURE__ */ new Map(), groupLength = group2.length, dataLength = data.length, keyValues = new Array(groupLength), keyValue;
  for (i = 0; i < groupLength; ++i) {
    if (node = group2[i]) {
      keyValues[i] = keyValue = key.call(node, node.__data__, i, group2) + "";
      if (nodeByKeyValue.has(keyValue)) {
        exit[i] = node;
      } else {
        nodeByKeyValue.set(keyValue, node);
      }
    }
  }
  for (i = 0; i < dataLength; ++i) {
    keyValue = key.call(parent, data[i], i, data) + "";
    if (node = nodeByKeyValue.get(keyValue)) {
      update[i] = node;
      node.__data__ = data[i];
      nodeByKeyValue.delete(keyValue);
    } else {
      enter[i] = new EnterNode(parent, data[i]);
    }
  }
  for (i = 0; i < groupLength; ++i) {
    if ((node = group2[i]) && nodeByKeyValue.get(keyValues[i]) === node) {
      exit[i] = node;
    }
  }
}
function datum(node) {
  return node.__data__;
}
function data_default(value, key) {
  if (!arguments.length)
    return Array.from(this, datum);
  var bind = key ? bindKey : bindIndex, parents = this._parents, groups2 = this._groups;
  if (typeof value !== "function")
    value = constant_default2(value);
  for (var m2 = groups2.length, update = new Array(m2), enter = new Array(m2), exit = new Array(m2), j = 0; j < m2; ++j) {
    var parent = parents[j], group2 = groups2[j], groupLength = group2.length, data = array_default(value.call(parent, parent && parent.__data__, j, parents)), dataLength = data.length, enterGroup = enter[j] = new Array(dataLength), updateGroup = update[j] = new Array(dataLength), exitGroup = exit[j] = new Array(groupLength);
    bind(parent, group2, enterGroup, updateGroup, exitGroup, data, key);
    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {
      if (previous = enterGroup[i0]) {
        if (i0 >= i1)
          i1 = i0 + 1;
        while (!(next = updateGroup[i1]) && ++i1 < dataLength)
          ;
        previous._next = next || null;
      }
    }
  }
  update = new Selection(update, parents);
  update._enter = enter;
  update._exit = exit;
  return update;
}

// node_modules/d3-selection/src/selection/exit.js
function exit_default() {
  return new Selection(this._exit || this._groups.map(sparse_default), this._parents);
}

// node_modules/d3-selection/src/selection/join.js
function join_default(onenter, onupdate, onexit) {
  var enter = this.enter(), update = this, exit = this.exit();
  enter = typeof onenter === "function" ? onenter(enter) : enter.append(onenter + "");
  if (onupdate != null)
    update = onupdate(update);
  if (onexit == null)
    exit.remove();
  else
    onexit(exit);
  return enter && update ? enter.merge(update).order() : update;
}

// node_modules/d3-selection/src/selection/merge.js
function merge_default(selection2) {
  if (!(selection2 instanceof Selection))
    throw new Error("invalid merge");
  for (var groups0 = this._groups, groups1 = selection2._groups, m0 = groups0.length, m1 = groups1.length, m2 = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m2; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n2 = group0.length, merge4 = merges[j] = new Array(n2), node, i = 0; i < n2; ++i) {
      if (node = group0[i] || group1[i]) {
        merge4[i] = node;
      }
    }
  }
  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }
  return new Selection(merges, this._parents);
}

// node_modules/d3-selection/src/selection/order.js
function order_default() {
  for (var groups2 = this._groups, j = -1, m2 = groups2.length; ++j < m2; ) {
    for (var group2 = groups2[j], i = group2.length - 1, next = group2[i], node; --i >= 0; ) {
      if (node = group2[i]) {
        if (next && node.compareDocumentPosition(next) ^ 4)
          next.parentNode.insertBefore(node, next);
        next = node;
      }
    }
  }
  return this;
}

// node_modules/d3-selection/src/selection/sort.js
function sort_default(compare) {
  if (!compare)
    compare = ascending;
  function compareNode(a3, b) {
    return a3 && b ? compare(a3.__data__, b.__data__) : !a3 - !b;
  }
  for (var groups2 = this._groups, m2 = groups2.length, sortgroups = new Array(m2), j = 0; j < m2; ++j) {
    for (var group2 = groups2[j], n2 = group2.length, sortgroup = sortgroups[j] = new Array(n2), node, i = 0; i < n2; ++i) {
      if (node = group2[i]) {
        sortgroup[i] = node;
      }
    }
    sortgroup.sort(compareNode);
  }
  return new Selection(sortgroups, this._parents).order();
}
function ascending(a3, b) {
  return a3 < b ? -1 : a3 > b ? 1 : a3 >= b ? 0 : NaN;
}

// node_modules/d3-selection/src/selection/call.js
function call_default() {
  var callback = arguments[0];
  arguments[0] = this;
  callback.apply(null, arguments);
  return this;
}

// node_modules/d3-selection/src/selection/nodes.js
function nodes_default() {
  return Array.from(this);
}

// node_modules/d3-selection/src/selection/node.js
function node_default() {
  for (var groups2 = this._groups, j = 0, m2 = groups2.length; j < m2; ++j) {
    for (var group2 = groups2[j], i = 0, n2 = group2.length; i < n2; ++i) {
      var node = group2[i];
      if (node)
        return node;
    }
  }
  return null;
}

// node_modules/d3-selection/src/selection/size.js
function size_default() {
  let size = 0;
  for (const node of this)
    ++size;
  return size;
}

// node_modules/d3-selection/src/selection/empty.js
function empty_default() {
  return !this.node();
}

// node_modules/d3-selection/src/selection/each.js
function each_default(callback) {
  for (var groups2 = this._groups, j = 0, m2 = groups2.length; j < m2; ++j) {
    for (var group2 = groups2[j], i = 0, n2 = group2.length, node; i < n2; ++i) {
      if (node = group2[i])
        callback.call(node, node.__data__, i, group2);
    }
  }
  return this;
}

// node_modules/d3-selection/src/selection/attr.js
function attrRemove(name) {
  return function() {
    this.removeAttribute(name);
  };
}
function attrRemoveNS(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}
function attrConstant(name, value) {
  return function() {
    this.setAttribute(name, value);
  };
}
function attrConstantNS(fullname, value) {
  return function() {
    this.setAttributeNS(fullname.space, fullname.local, value);
  };
}
function attrFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      this.removeAttribute(name);
    else
      this.setAttribute(name, v);
  };
}
function attrFunctionNS(fullname, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      this.removeAttributeNS(fullname.space, fullname.local);
    else
      this.setAttributeNS(fullname.space, fullname.local, v);
  };
}
function attr_default(name, value) {
  var fullname = namespace_default(name);
  if (arguments.length < 2) {
    var node = this.node();
    return fullname.local ? node.getAttributeNS(fullname.space, fullname.local) : node.getAttribute(fullname);
  }
  return this.each((value == null ? fullname.local ? attrRemoveNS : attrRemove : typeof value === "function" ? fullname.local ? attrFunctionNS : attrFunction : fullname.local ? attrConstantNS : attrConstant)(fullname, value));
}

// node_modules/d3-selection/src/window.js
function window_default(node) {
  return node.ownerDocument && node.ownerDocument.defaultView || node.document && node || node.defaultView;
}

// node_modules/d3-selection/src/selection/style.js
function styleRemove(name) {
  return function() {
    this.style.removeProperty(name);
  };
}
function styleConstant(name, value, priority) {
  return function() {
    this.style.setProperty(name, value, priority);
  };
}
function styleFunction(name, value, priority) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      this.style.removeProperty(name);
    else
      this.style.setProperty(name, v, priority);
  };
}
function style_default(name, value, priority) {
  return arguments.length > 1 ? this.each((value == null ? styleRemove : typeof value === "function" ? styleFunction : styleConstant)(name, value, priority == null ? "" : priority)) : styleValue(this.node(), name);
}
function styleValue(node, name) {
  return node.style.getPropertyValue(name) || window_default(node).getComputedStyle(node, null).getPropertyValue(name);
}

// node_modules/d3-selection/src/selection/property.js
function propertyRemove(name) {
  return function() {
    delete this[name];
  };
}
function propertyConstant(name, value) {
  return function() {
    this[name] = value;
  };
}
function propertyFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      delete this[name];
    else
      this[name] = v;
  };
}
function property_default(name, value) {
  return arguments.length > 1 ? this.each((value == null ? propertyRemove : typeof value === "function" ? propertyFunction : propertyConstant)(name, value)) : this.node()[name];
}

// node_modules/d3-selection/src/selection/classed.js
function classArray(string) {
  return string.trim().split(/^|\s+/);
}
function classList(node) {
  return node.classList || new ClassList(node);
}
function ClassList(node) {
  this._node = node;
  this._names = classArray(node.getAttribute("class") || "");
}
ClassList.prototype = {
  add: function(name) {
    var i = this._names.indexOf(name);
    if (i < 0) {
      this._names.push(name);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  remove: function(name) {
    var i = this._names.indexOf(name);
    if (i >= 0) {
      this._names.splice(i, 1);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  contains: function(name) {
    return this._names.indexOf(name) >= 0;
  }
};
function classedAdd(node, names) {
  var list = classList(node), i = -1, n2 = names.length;
  while (++i < n2)
    list.add(names[i]);
}
function classedRemove(node, names) {
  var list = classList(node), i = -1, n2 = names.length;
  while (++i < n2)
    list.remove(names[i]);
}
function classedTrue(names) {
  return function() {
    classedAdd(this, names);
  };
}
function classedFalse(names) {
  return function() {
    classedRemove(this, names);
  };
}
function classedFunction(names, value) {
  return function() {
    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);
  };
}
function classed_default(name, value) {
  var names = classArray(name + "");
  if (arguments.length < 2) {
    var list = classList(this.node()), i = -1, n2 = names.length;
    while (++i < n2)
      if (!list.contains(names[i]))
        return false;
    return true;
  }
  return this.each((typeof value === "function" ? classedFunction : value ? classedTrue : classedFalse)(names, value));
}

// node_modules/d3-selection/src/selection/text.js
function textRemove() {
  this.textContent = "";
}
function textConstant(value) {
  return function() {
    this.textContent = value;
  };
}
function textFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.textContent = v == null ? "" : v;
  };
}
function text_default(value) {
  return arguments.length ? this.each(value == null ? textRemove : (typeof value === "function" ? textFunction : textConstant)(value)) : this.node().textContent;
}

// node_modules/d3-selection/src/selection/html.js
function htmlRemove() {
  this.innerHTML = "";
}
function htmlConstant(value) {
  return function() {
    this.innerHTML = value;
  };
}
function htmlFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.innerHTML = v == null ? "" : v;
  };
}
function html_default(value) {
  return arguments.length ? this.each(value == null ? htmlRemove : (typeof value === "function" ? htmlFunction : htmlConstant)(value)) : this.node().innerHTML;
}

// node_modules/d3-selection/src/selection/raise.js
function raise() {
  if (this.nextSibling)
    this.parentNode.appendChild(this);
}
function raise_default() {
  return this.each(raise);
}

// node_modules/d3-selection/src/selection/lower.js
function lower() {
  if (this.previousSibling)
    this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function lower_default() {
  return this.each(lower);
}

// node_modules/d3-selection/src/selection/append.js
function append_default(name) {
  var create2 = typeof name === "function" ? name : creator_default(name);
  return this.select(function() {
    return this.appendChild(create2.apply(this, arguments));
  });
}

// node_modules/d3-selection/src/selection/insert.js
function constantNull() {
  return null;
}
function insert_default(name, before) {
  var create2 = typeof name === "function" ? name : creator_default(name), select = before == null ? constantNull : typeof before === "function" ? before : selector_default(before);
  return this.select(function() {
    return this.insertBefore(create2.apply(this, arguments), select.apply(this, arguments) || null);
  });
}

// node_modules/d3-selection/src/selection/remove.js
function remove() {
  var parent = this.parentNode;
  if (parent)
    parent.removeChild(this);
}
function remove_default() {
  return this.each(remove);
}

// node_modules/d3-selection/src/selection/clone.js
function selection_cloneShallow() {
  var clone3 = this.cloneNode(false), parent = this.parentNode;
  return parent ? parent.insertBefore(clone3, this.nextSibling) : clone3;
}
function selection_cloneDeep() {
  var clone3 = this.cloneNode(true), parent = this.parentNode;
  return parent ? parent.insertBefore(clone3, this.nextSibling) : clone3;
}
function clone_default(deep) {
  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);
}

// node_modules/d3-selection/src/selection/datum.js
function datum_default(value) {
  return arguments.length ? this.property("__data__", value) : this.node().__data__;
}

// node_modules/d3-selection/src/selection/on.js
function contextListener(listener) {
  return function(event) {
    listener.call(this, event, this.__data__);
  };
}
function parseTypenames2(typenames) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0)
      name = t.slice(i + 1), t = t.slice(0, i);
    return { type: t, name };
  });
}
function onRemove(typename) {
  return function() {
    var on = this.__on;
    if (!on)
      return;
    for (var j = 0, i = -1, m2 = on.length, o; j < m2; ++j) {
      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {
        this.removeEventListener(o.type, o.listener, o.options);
      } else {
        on[++i] = o;
      }
    }
    if (++i)
      on.length = i;
    else
      delete this.__on;
  };
}
function onAdd(typename, value, options) {
  return function() {
    var on = this.__on, o, listener = contextListener(value);
    if (on)
      for (var j = 0, m2 = on.length; j < m2; ++j) {
        if ((o = on[j]).type === typename.type && o.name === typename.name) {
          this.removeEventListener(o.type, o.listener, o.options);
          this.addEventListener(o.type, o.listener = listener, o.options = options);
          o.value = value;
          return;
        }
      }
    this.addEventListener(typename.type, listener, options);
    o = { type: typename.type, name: typename.name, value, listener, options };
    if (!on)
      this.__on = [o];
    else
      on.push(o);
  };
}
function on_default(typename, value, options) {
  var typenames = parseTypenames2(typename + ""), i, n2 = typenames.length, t;
  if (arguments.length < 2) {
    var on = this.node().__on;
    if (on)
      for (var j = 0, m2 = on.length, o; j < m2; ++j) {
        for (i = 0, o = on[j]; i < n2; ++i) {
          if ((t = typenames[i]).type === o.type && t.name === o.name) {
            return o.value;
          }
        }
      }
    return;
  }
  on = value ? onAdd : onRemove;
  for (i = 0; i < n2; ++i)
    this.each(on(typenames[i], value, options));
  return this;
}

// node_modules/d3-selection/src/selection/dispatch.js
function dispatchEvent(node, type2, params) {
  var window2 = window_default(node), event = window2.CustomEvent;
  if (typeof event === "function") {
    event = new event(type2, params);
  } else {
    event = window2.document.createEvent("Event");
    if (params)
      event.initEvent(type2, params.bubbles, params.cancelable), event.detail = params.detail;
    else
      event.initEvent(type2, false, false);
  }
  node.dispatchEvent(event);
}
function dispatchConstant(type2, params) {
  return function() {
    return dispatchEvent(this, type2, params);
  };
}
function dispatchFunction(type2, params) {
  return function() {
    return dispatchEvent(this, type2, params.apply(this, arguments));
  };
}
function dispatch_default2(type2, params) {
  return this.each((typeof params === "function" ? dispatchFunction : dispatchConstant)(type2, params));
}

// node_modules/d3-selection/src/selection/iterator.js
function* iterator_default() {
  for (var groups2 = this._groups, j = 0, m2 = groups2.length; j < m2; ++j) {
    for (var group2 = groups2[j], i = 0, n2 = group2.length, node; i < n2; ++i) {
      if (node = group2[i])
        yield node;
    }
  }
}

// node_modules/d3-selection/src/selection/index.js
var root = [null];
function Selection(groups2, parents) {
  this._groups = groups2;
  this._parents = parents;
}
function selection() {
  return new Selection([[document.documentElement]], root);
}
function selection_selection() {
  return this;
}
Selection.prototype = selection.prototype = {
  constructor: Selection,
  select: select_default,
  selectAll: selectAll_default,
  selectChild: selectChild_default,
  selectChildren: selectChildren_default,
  filter: filter_default,
  data: data_default,
  enter: enter_default,
  exit: exit_default,
  join: join_default,
  merge: merge_default,
  selection: selection_selection,
  order: order_default,
  sort: sort_default,
  call: call_default,
  nodes: nodes_default,
  node: node_default,
  size: size_default,
  empty: empty_default,
  each: each_default,
  attr: attr_default,
  style: style_default,
  property: property_default,
  classed: classed_default,
  text: text_default,
  html: html_default,
  raise: raise_default,
  lower: lower_default,
  append: append_default,
  insert: insert_default,
  remove: remove_default,
  clone: clone_default,
  datum: datum_default,
  on: on_default,
  dispatch: dispatch_default2,
  [Symbol.iterator]: iterator_default
};
var selection_default = selection;

// node_modules/d3-selection/src/select.js
function select_default2(selector) {
  return typeof selector === "string" ? new Selection([[document.querySelector(selector)]], [document.documentElement]) : new Selection([[selector]], root);
}

// node_modules/d3-selection/src/create.js
function create_default(name) {
  return select_default2(creator_default(name).call(document.documentElement));
}

// node_modules/d3-selection/src/local.js
var nextId = 0;
function local() {
  return new Local();
}
function Local() {
  this._ = "@" + (++nextId).toString(36);
}
Local.prototype = local.prototype = {
  constructor: Local,
  get: function(node) {
    var id2 = this._;
    while (!(id2 in node))
      if (!(node = node.parentNode))
        return;
    return node[id2];
  },
  set: function(node, value) {
    return node[this._] = value;
  },
  remove: function(node) {
    return this._ in node && delete node[this._];
  },
  toString: function() {
    return this._;
  }
};

// node_modules/d3-selection/src/sourceEvent.js
function sourceEvent_default(event) {
  let sourceEvent;
  while (sourceEvent = event.sourceEvent)
    event = sourceEvent;
  return event;
}

// node_modules/d3-selection/src/pointer.js
function pointer_default(event, node) {
  event = sourceEvent_default(event);
  if (node === void 0)
    node = event.currentTarget;
  if (node) {
    var svg2 = node.ownerSVGElement || node;
    if (svg2.createSVGPoint) {
      var point6 = svg2.createSVGPoint();
      point6.x = event.clientX, point6.y = event.clientY;
      point6 = point6.matrixTransform(node.getScreenCTM().inverse());
      return [point6.x, point6.y];
    }
    if (node.getBoundingClientRect) {
      var rect = node.getBoundingClientRect();
      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];
    }
  }
  return [event.pageX, event.pageY];
}

// node_modules/d3-selection/src/pointers.js
function pointers_default(events, node) {
  if (events.target) {
    events = sourceEvent_default(events);
    if (node === void 0)
      node = events.currentTarget;
    events = events.touches || [events];
  }
  return Array.from(events, (event) => pointer_default(event, node));
}

// node_modules/d3-selection/src/selectAll.js
function selectAll_default2(selector) {
  return typeof selector === "string" ? new Selection([document.querySelectorAll(selector)], [document.documentElement]) : new Selection([selector == null ? [] : array_default(selector)], root);
}

// node_modules/d3-drag/src/noevent.js
function nopropagation(event) {
  event.stopImmediatePropagation();
}
function noevent_default(event) {
  event.preventDefault();
  event.stopImmediatePropagation();
}

// node_modules/d3-drag/src/nodrag.js
function nodrag_default(view) {
  var root3 = view.document.documentElement, selection2 = select_default2(view).on("dragstart.drag", noevent_default, true);
  if ("onselectstart" in root3) {
    selection2.on("selectstart.drag", noevent_default, true);
  } else {
    root3.__noselect = root3.style.MozUserSelect;
    root3.style.MozUserSelect = "none";
  }
}
function yesdrag(view, noclick) {
  var root3 = view.document.documentElement, selection2 = select_default2(view).on("dragstart.drag", null);
  if (noclick) {
    selection2.on("click.drag", noevent_default, true);
    setTimeout(function() {
      selection2.on("click.drag", null);
    }, 0);
  }
  if ("onselectstart" in root3) {
    selection2.on("selectstart.drag", null);
  } else {
    root3.style.MozUserSelect = root3.__noselect;
    delete root3.__noselect;
  }
}

// node_modules/d3-drag/src/constant.js
var constant_default3 = (x4) => () => x4;

// node_modules/d3-drag/src/event.js
function DragEvent(type2, {
  sourceEvent,
  subject,
  target,
  identifier,
  active,
  x: x4,
  y: y4,
  dx,
  dy,
  dispatch: dispatch2
}) {
  Object.defineProperties(this, {
    type: { value: type2, enumerable: true, configurable: true },
    sourceEvent: { value: sourceEvent, enumerable: true, configurable: true },
    subject: { value: subject, enumerable: true, configurable: true },
    target: { value: target, enumerable: true, configurable: true },
    identifier: { value: identifier, enumerable: true, configurable: true },
    active: { value: active, enumerable: true, configurable: true },
    x: { value: x4, enumerable: true, configurable: true },
    y: { value: y4, enumerable: true, configurable: true },
    dx: { value: dx, enumerable: true, configurable: true },
    dy: { value: dy, enumerable: true, configurable: true },
    _: { value: dispatch2 }
  });
}
DragEvent.prototype.on = function() {
  var value = this._.on.apply(this._, arguments);
  return value === this._ ? this : value;
};

// node_modules/d3-drag/src/drag.js
function defaultFilter(event) {
  return !event.ctrlKey && !event.button;
}
function defaultContainer() {
  return this.parentNode;
}
function defaultSubject(event, d) {
  return d == null ? { x: event.x, y: event.y } : d;
}
function defaultTouchable() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function drag_default() {
  var filter3 = defaultFilter, container = defaultContainer, subject = defaultSubject, touchable = defaultTouchable, gestures = {}, listeners = dispatch_default("start", "drag", "end"), active = 0, mousedownx, mousedowny, mousemoving, touchending, clickDistance2 = 0;
  function drag(selection2) {
    selection2.on("mousedown.drag", mousedowned).filter(touchable).on("touchstart.drag", touchstarted).on("touchmove.drag", touchmoved).on("touchend.drag touchcancel.drag", touchended).style("touch-action", "none").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  function mousedowned(event, d) {
    if (touchending || !filter3.call(this, event, d))
      return;
    var gesture = beforestart(this, container.call(this, event, d), event, d, "mouse");
    if (!gesture)
      return;
    select_default2(event.view).on("mousemove.drag", mousemoved, true).on("mouseup.drag", mouseupped, true);
    nodrag_default(event.view);
    nopropagation(event);
    mousemoving = false;
    mousedownx = event.clientX;
    mousedowny = event.clientY;
    gesture("start", event);
  }
  function mousemoved(event) {
    noevent_default(event);
    if (!mousemoving) {
      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;
      mousemoving = dx * dx + dy * dy > clickDistance2;
    }
    gestures.mouse("drag", event);
  }
  function mouseupped(event) {
    select_default2(event.view).on("mousemove.drag mouseup.drag", null);
    yesdrag(event.view, mousemoving);
    noevent_default(event);
    gestures.mouse("end", event);
  }
  function touchstarted(event, d) {
    if (!filter3.call(this, event, d))
      return;
    var touches = event.changedTouches, c5 = container.call(this, event, d), n2 = touches.length, i, gesture;
    for (i = 0; i < n2; ++i) {
      if (gesture = beforestart(this, c5, event, d, touches[i].identifier, touches[i])) {
        nopropagation(event);
        gesture("start", event, touches[i]);
      }
    }
  }
  function touchmoved(event) {
    var touches = event.changedTouches, n2 = touches.length, i, gesture;
    for (i = 0; i < n2; ++i) {
      if (gesture = gestures[touches[i].identifier]) {
        noevent_default(event);
        gesture("drag", event, touches[i]);
      }
    }
  }
  function touchended(event) {
    var touches = event.changedTouches, n2 = touches.length, i, gesture;
    if (touchending)
      clearTimeout(touchending);
    touchending = setTimeout(function() {
      touchending = null;
    }, 500);
    for (i = 0; i < n2; ++i) {
      if (gesture = gestures[touches[i].identifier]) {
        nopropagation(event);
        gesture("end", event, touches[i]);
      }
    }
  }
  function beforestart(that, container2, event, d, identifier, touch) {
    var dispatch2 = listeners.copy(), p = pointer_default(touch || event, container2), dx, dy, s3;
    if ((s3 = subject.call(that, new DragEvent("beforestart", {
      sourceEvent: event,
      target: drag,
      identifier,
      active,
      x: p[0],
      y: p[1],
      dx: 0,
      dy: 0,
      dispatch: dispatch2
    }), d)) == null)
      return;
    dx = s3.x - p[0] || 0;
    dy = s3.y - p[1] || 0;
    return function gesture(type2, event2, touch2) {
      var p02 = p, n2;
      switch (type2) {
        case "start":
          gestures[identifier] = gesture, n2 = active++;
          break;
        case "end":
          delete gestures[identifier], --active;
        case "drag":
          p = pointer_default(touch2 || event2, container2), n2 = active;
          break;
      }
      dispatch2.call(
        type2,
        that,
        new DragEvent(type2, {
          sourceEvent: event2,
          subject: s3,
          target: drag,
          identifier,
          active: n2,
          x: p[0] + dx,
          y: p[1] + dy,
          dx: p[0] - p02[0],
          dy: p[1] - p02[1],
          dispatch: dispatch2
        }),
        d
      );
    };
  }
  drag.filter = function(_) {
    return arguments.length ? (filter3 = typeof _ === "function" ? _ : constant_default3(!!_), drag) : filter3;
  };
  drag.container = function(_) {
    return arguments.length ? (container = typeof _ === "function" ? _ : constant_default3(_), drag) : container;
  };
  drag.subject = function(_) {
    return arguments.length ? (subject = typeof _ === "function" ? _ : constant_default3(_), drag) : subject;
  };
  drag.touchable = function(_) {
    return arguments.length ? (touchable = typeof _ === "function" ? _ : constant_default3(!!_), drag) : touchable;
  };
  drag.on = function() {
    var value = listeners.on.apply(listeners, arguments);
    return value === listeners ? drag : value;
  };
  drag.clickDistance = function(_) {
    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);
  };
  return drag;
}

// node_modules/d3-color/src/define.js
function define_default(constructor, factory, prototype) {
  constructor.prototype = factory.prototype = prototype;
  prototype.constructor = constructor;
}
function extend(parent, definition) {
  var prototype = Object.create(parent.prototype);
  for (var key in definition)
    prototype[key] = definition[key];
  return prototype;
}

// node_modules/d3-color/src/color.js
function Color() {
}
var darker = 0.7;
var brighter = 1 / darker;
var reI = "\\s*([+-]?\\d+)\\s*";
var reN = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*";
var reP = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*";
var reHex = /^#([0-9a-f]{3,8})$/;
var reRgbInteger = new RegExp("^rgb\\(" + [reI, reI, reI] + "\\)$");
var reRgbPercent = new RegExp("^rgb\\(" + [reP, reP, reP] + "\\)$");
var reRgbaInteger = new RegExp("^rgba\\(" + [reI, reI, reI, reN] + "\\)$");
var reRgbaPercent = new RegExp("^rgba\\(" + [reP, reP, reP, reN] + "\\)$");
var reHslPercent = new RegExp("^hsl\\(" + [reN, reP, reP] + "\\)$");
var reHslaPercent = new RegExp("^hsla\\(" + [reN, reP, reP, reN] + "\\)$");
var named = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
define_default(Color, color, {
  copy: function(channels) {
    return Object.assign(new this.constructor(), this, channels);
  },
  displayable: function() {
    return this.rgb().displayable();
  },
  hex: color_formatHex,
  formatHex: color_formatHex,
  formatHsl: color_formatHsl,
  formatRgb: color_formatRgb,
  toString: color_formatRgb
});
function color_formatHex() {
  return this.rgb().formatHex();
}
function color_formatHsl() {
  return hslConvert(this).formatHsl();
}
function color_formatRgb() {
  return this.rgb().formatRgb();
}
function color(format2) {
  var m2, l2;
  format2 = (format2 + "").trim().toLowerCase();
  return (m2 = reHex.exec(format2)) ? (l2 = m2[1].length, m2 = parseInt(m2[1], 16), l2 === 6 ? rgbn(m2) : l2 === 3 ? new Rgb(m2 >> 8 & 15 | m2 >> 4 & 240, m2 >> 4 & 15 | m2 & 240, (m2 & 15) << 4 | m2 & 15, 1) : l2 === 8 ? rgba(m2 >> 24 & 255, m2 >> 16 & 255, m2 >> 8 & 255, (m2 & 255) / 255) : l2 === 4 ? rgba(m2 >> 12 & 15 | m2 >> 8 & 240, m2 >> 8 & 15 | m2 >> 4 & 240, m2 >> 4 & 15 | m2 & 240, ((m2 & 15) << 4 | m2 & 15) / 255) : null) : (m2 = reRgbInteger.exec(format2)) ? new Rgb(m2[1], m2[2], m2[3], 1) : (m2 = reRgbPercent.exec(format2)) ? new Rgb(m2[1] * 255 / 100, m2[2] * 255 / 100, m2[3] * 255 / 100, 1) : (m2 = reRgbaInteger.exec(format2)) ? rgba(m2[1], m2[2], m2[3], m2[4]) : (m2 = reRgbaPercent.exec(format2)) ? rgba(m2[1] * 255 / 100, m2[2] * 255 / 100, m2[3] * 255 / 100, m2[4]) : (m2 = reHslPercent.exec(format2)) ? hsla(m2[1], m2[2] / 100, m2[3] / 100, 1) : (m2 = reHslaPercent.exec(format2)) ? hsla(m2[1], m2[2] / 100, m2[3] / 100, m2[4]) : named.hasOwnProperty(format2) ? rgbn(named[format2]) : format2 === "transparent" ? new Rgb(NaN, NaN, NaN, 0) : null;
}
function rgbn(n2) {
  return new Rgb(n2 >> 16 & 255, n2 >> 8 & 255, n2 & 255, 1);
}
function rgba(r, g, b, a3) {
  if (a3 <= 0)
    r = g = b = NaN;
  return new Rgb(r, g, b, a3);
}
function rgbConvert(o) {
  if (!(o instanceof Color))
    o = color(o);
  if (!o)
    return new Rgb();
  o = o.rgb();
  return new Rgb(o.r, o.g, o.b, o.opacity);
}
function rgb(r, g, b, opacity) {
  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);
}
function Rgb(r, g, b, opacity) {
  this.r = +r;
  this.g = +g;
  this.b = +b;
  this.opacity = +opacity;
}
define_default(Rgb, rgb, extend(Color, {
  brighter: function(k2) {
    k2 = k2 == null ? brighter : Math.pow(brighter, k2);
    return new Rgb(this.r * k2, this.g * k2, this.b * k2, this.opacity);
  },
  darker: function(k2) {
    k2 = k2 == null ? darker : Math.pow(darker, k2);
    return new Rgb(this.r * k2, this.g * k2, this.b * k2, this.opacity);
  },
  rgb: function() {
    return this;
  },
  displayable: function() {
    return -0.5 <= this.r && this.r < 255.5 && (-0.5 <= this.g && this.g < 255.5) && (-0.5 <= this.b && this.b < 255.5) && (0 <= this.opacity && this.opacity <= 1);
  },
  hex: rgb_formatHex,
  formatHex: rgb_formatHex,
  formatRgb: rgb_formatRgb,
  toString: rgb_formatRgb
}));
function rgb_formatHex() {
  return "#" + hex(this.r) + hex(this.g) + hex(this.b);
}
function rgb_formatRgb() {
  var a3 = this.opacity;
  a3 = isNaN(a3) ? 1 : Math.max(0, Math.min(1, a3));
  return (a3 === 1 ? "rgb(" : "rgba(") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (a3 === 1 ? ")" : ", " + a3 + ")");
}
function hex(value) {
  value = Math.max(0, Math.min(255, Math.round(value) || 0));
  return (value < 16 ? "0" : "") + value.toString(16);
}
function hsla(h, s3, l2, a3) {
  if (a3 <= 0)
    h = s3 = l2 = NaN;
  else if (l2 <= 0 || l2 >= 1)
    h = s3 = NaN;
  else if (s3 <= 0)
    h = NaN;
  return new Hsl(h, s3, l2, a3);
}
function hslConvert(o) {
  if (o instanceof Hsl)
    return new Hsl(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof Color))
    o = color(o);
  if (!o)
    return new Hsl();
  if (o instanceof Hsl)
    return o;
  o = o.rgb();
  var r = o.r / 255, g = o.g / 255, b = o.b / 255, min4 = Math.min(r, g, b), max5 = Math.max(r, g, b), h = NaN, s3 = max5 - min4, l2 = (max5 + min4) / 2;
  if (s3) {
    if (r === max5)
      h = (g - b) / s3 + (g < b) * 6;
    else if (g === max5)
      h = (b - r) / s3 + 2;
    else
      h = (r - g) / s3 + 4;
    s3 /= l2 < 0.5 ? max5 + min4 : 2 - max5 - min4;
    h *= 60;
  } else {
    s3 = l2 > 0 && l2 < 1 ? 0 : h;
  }
  return new Hsl(h, s3, l2, o.opacity);
}
function hsl(h, s3, l2, opacity) {
  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s3, l2, opacity == null ? 1 : opacity);
}
function Hsl(h, s3, l2, opacity) {
  this.h = +h;
  this.s = +s3;
  this.l = +l2;
  this.opacity = +opacity;
}
define_default(Hsl, hsl, extend(Color, {
  brighter: function(k2) {
    k2 = k2 == null ? brighter : Math.pow(brighter, k2);
    return new Hsl(this.h, this.s, this.l * k2, this.opacity);
  },
  darker: function(k2) {
    k2 = k2 == null ? darker : Math.pow(darker, k2);
    return new Hsl(this.h, this.s, this.l * k2, this.opacity);
  },
  rgb: function() {
    var h = this.h % 360 + (this.h < 0) * 360, s3 = isNaN(h) || isNaN(this.s) ? 0 : this.s, l2 = this.l, m2 = l2 + (l2 < 0.5 ? l2 : 1 - l2) * s3, m1 = 2 * l2 - m2;
    return new Rgb(
      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),
      hsl2rgb(h, m1, m2),
      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),
      this.opacity
    );
  },
  displayable: function() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && (0 <= this.l && this.l <= 1) && (0 <= this.opacity && this.opacity <= 1);
  },
  formatHsl: function() {
    var a3 = this.opacity;
    a3 = isNaN(a3) ? 1 : Math.max(0, Math.min(1, a3));
    return (a3 === 1 ? "hsl(" : "hsla(") + (this.h || 0) + ", " + (this.s || 0) * 100 + "%, " + (this.l || 0) * 100 + "%" + (a3 === 1 ? ")" : ", " + a3 + ")");
  }
}));
function hsl2rgb(h, m1, m2) {
  return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;
}

// node_modules/d3-color/src/math.js
var radians = Math.PI / 180;
var degrees = 180 / Math.PI;

// node_modules/d3-color/src/lab.js
var K = 18;
var Xn = 0.96422;
var Yn = 1;
var Zn = 0.82521;
var t0 = 4 / 29;
var t1 = 6 / 29;
var t2 = 3 * t1 * t1;
var t3 = t1 * t1 * t1;
function labConvert(o) {
  if (o instanceof Lab)
    return new Lab(o.l, o.a, o.b, o.opacity);
  if (o instanceof Hcl)
    return hcl2lab(o);
  if (!(o instanceof Rgb))
    o = rgbConvert(o);
  var r = rgb2lrgb(o.r), g = rgb2lrgb(o.g), b = rgb2lrgb(o.b), y4 = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x4, z;
  if (r === g && g === b)
    x4 = z = y4;
  else {
    x4 = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);
    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);
  }
  return new Lab(116 * y4 - 16, 500 * (x4 - y4), 200 * (y4 - z), o.opacity);
}
function gray(l2, opacity) {
  return new Lab(l2, 0, 0, opacity == null ? 1 : opacity);
}
function lab(l2, a3, b, opacity) {
  return arguments.length === 1 ? labConvert(l2) : new Lab(l2, a3, b, opacity == null ? 1 : opacity);
}
function Lab(l2, a3, b, opacity) {
  this.l = +l2;
  this.a = +a3;
  this.b = +b;
  this.opacity = +opacity;
}
define_default(Lab, lab, extend(Color, {
  brighter: function(k2) {
    return new Lab(this.l + K * (k2 == null ? 1 : k2), this.a, this.b, this.opacity);
  },
  darker: function(k2) {
    return new Lab(this.l - K * (k2 == null ? 1 : k2), this.a, this.b, this.opacity);
  },
  rgb: function() {
    var y4 = (this.l + 16) / 116, x4 = isNaN(this.a) ? y4 : y4 + this.a / 500, z = isNaN(this.b) ? y4 : y4 - this.b / 200;
    x4 = Xn * lab2xyz(x4);
    y4 = Yn * lab2xyz(y4);
    z = Zn * lab2xyz(z);
    return new Rgb(
      lrgb2rgb(3.1338561 * x4 - 1.6168667 * y4 - 0.4906146 * z),
      lrgb2rgb(-0.9787684 * x4 + 1.9161415 * y4 + 0.033454 * z),
      lrgb2rgb(0.0719453 * x4 - 0.2289914 * y4 + 1.4052427 * z),
      this.opacity
    );
  }
}));
function xyz2lab(t) {
  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;
}
function lab2xyz(t) {
  return t > t1 ? t * t * t : t2 * (t - t0);
}
function lrgb2rgb(x4) {
  return 255 * (x4 <= 31308e-7 ? 12.92 * x4 : 1.055 * Math.pow(x4, 1 / 2.4) - 0.055);
}
function rgb2lrgb(x4) {
  return (x4 /= 255) <= 0.04045 ? x4 / 12.92 : Math.pow((x4 + 0.055) / 1.055, 2.4);
}
function hclConvert(o) {
  if (o instanceof Hcl)
    return new Hcl(o.h, o.c, o.l, o.opacity);
  if (!(o instanceof Lab))
    o = labConvert(o);
  if (o.a === 0 && o.b === 0)
    return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);
  var h = Math.atan2(o.b, o.a) * degrees;
  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);
}
function lch(l2, c5, h, opacity) {
  return arguments.length === 1 ? hclConvert(l2) : new Hcl(h, c5, l2, opacity == null ? 1 : opacity);
}
function hcl(h, c5, l2, opacity) {
  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c5, l2, opacity == null ? 1 : opacity);
}
function Hcl(h, c5, l2, opacity) {
  this.h = +h;
  this.c = +c5;
  this.l = +l2;
  this.opacity = +opacity;
}
function hcl2lab(o) {
  if (isNaN(o.h))
    return new Lab(o.l, 0, 0, o.opacity);
  var h = o.h * radians;
  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);
}
define_default(Hcl, hcl, extend(Color, {
  brighter: function(k2) {
    return new Hcl(this.h, this.c, this.l + K * (k2 == null ? 1 : k2), this.opacity);
  },
  darker: function(k2) {
    return new Hcl(this.h, this.c, this.l - K * (k2 == null ? 1 : k2), this.opacity);
  },
  rgb: function() {
    return hcl2lab(this).rgb();
  }
}));

// node_modules/d3-color/src/cubehelix.js
var A = -0.14861;
var B = 1.78277;
var C = -0.29227;
var D = -0.90649;
var E = 1.97294;
var ED = E * D;
var EB = E * B;
var BC_DA = B * C - D * A;
function cubehelixConvert(o) {
  if (o instanceof Cubehelix)
    return new Cubehelix(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof Rgb))
    o = rgbConvert(o);
  var r = o.r / 255, g = o.g / 255, b = o.b / 255, l2 = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB), bl = b - l2, k2 = (E * (g - l2) - C * bl) / D, s3 = Math.sqrt(k2 * k2 + bl * bl) / (E * l2 * (1 - l2)), h = s3 ? Math.atan2(k2, bl) * degrees - 120 : NaN;
  return new Cubehelix(h < 0 ? h + 360 : h, s3, l2, o.opacity);
}
function cubehelix(h, s3, l2, opacity) {
  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s3, l2, opacity == null ? 1 : opacity);
}
function Cubehelix(h, s3, l2, opacity) {
  this.h = +h;
  this.s = +s3;
  this.l = +l2;
  this.opacity = +opacity;
}
define_default(Cubehelix, cubehelix, extend(Color, {
  brighter: function(k2) {
    k2 = k2 == null ? brighter : Math.pow(brighter, k2);
    return new Cubehelix(this.h, this.s, this.l * k2, this.opacity);
  },
  darker: function(k2) {
    k2 = k2 == null ? darker : Math.pow(darker, k2);
    return new Cubehelix(this.h, this.s, this.l * k2, this.opacity);
  },
  rgb: function() {
    var h = isNaN(this.h) ? 0 : (this.h + 120) * radians, l2 = +this.l, a3 = isNaN(this.s) ? 0 : this.s * l2 * (1 - l2), cosh2 = Math.cos(h), sinh2 = Math.sin(h);
    return new Rgb(
      255 * (l2 + a3 * (A * cosh2 + B * sinh2)),
      255 * (l2 + a3 * (C * cosh2 + D * sinh2)),
      255 * (l2 + a3 * (E * cosh2)),
      this.opacity
    );
  }
}));

// node_modules/d3-interpolate/src/basis.js
function basis(t13, v0, v1, v2, v3) {
  var t22 = t13 * t13, t32 = t22 * t13;
  return ((1 - 3 * t13 + 3 * t22 - t32) * v0 + (4 - 6 * t22 + 3 * t32) * v1 + (1 + 3 * t13 + 3 * t22 - 3 * t32) * v2 + t32 * v3) / 6;
}
function basis_default(values) {
  var n2 = values.length - 1;
  return function(t) {
    var i = t <= 0 ? t = 0 : t >= 1 ? (t = 1, n2 - 1) : Math.floor(t * n2), v1 = values[i], v2 = values[i + 1], v0 = i > 0 ? values[i - 1] : 2 * v1 - v2, v3 = i < n2 - 1 ? values[i + 2] : 2 * v2 - v1;
    return basis((t - i / n2) * n2, v0, v1, v2, v3);
  };
}

// node_modules/d3-interpolate/src/basisClosed.js
function basisClosed_default(values) {
  var n2 = values.length;
  return function(t) {
    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n2), v0 = values[(i + n2 - 1) % n2], v1 = values[i % n2], v2 = values[(i + 1) % n2], v3 = values[(i + 2) % n2];
    return basis((t - i / n2) * n2, v0, v1, v2, v3);
  };
}

// node_modules/d3-interpolate/src/constant.js
var constant_default4 = (x4) => () => x4;

// node_modules/d3-interpolate/src/color.js
function linear(a3, d) {
  return function(t) {
    return a3 + t * d;
  };
}
function exponential(a3, b, y4) {
  return a3 = Math.pow(a3, y4), b = Math.pow(b, y4) - a3, y4 = 1 / y4, function(t) {
    return Math.pow(a3 + t * b, y4);
  };
}
function hue(a3, b) {
  var d = b - a3;
  return d ? linear(a3, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant_default4(isNaN(a3) ? b : a3);
}
function gamma(y4) {
  return (y4 = +y4) === 1 ? nogamma : function(a3, b) {
    return b - a3 ? exponential(a3, b, y4) : constant_default4(isNaN(a3) ? b : a3);
  };
}
function nogamma(a3, b) {
  var d = b - a3;
  return d ? linear(a3, d) : constant_default4(isNaN(a3) ? b : a3);
}

// node_modules/d3-interpolate/src/rgb.js
var rgb_default = function rgbGamma(y4) {
  var color2 = gamma(y4);
  function rgb2(start2, end) {
    var r = color2((start2 = rgb(start2)).r, (end = rgb(end)).r), g = color2(start2.g, end.g), b = color2(start2.b, end.b), opacity = nogamma(start2.opacity, end.opacity);
    return function(t) {
      start2.r = r(t);
      start2.g = g(t);
      start2.b = b(t);
      start2.opacity = opacity(t);
      return start2 + "";
    };
  }
  rgb2.gamma = rgbGamma;
  return rgb2;
}(1);
function rgbSpline(spline) {
  return function(colors) {
    var n2 = colors.length, r = new Array(n2), g = new Array(n2), b = new Array(n2), i, color2;
    for (i = 0; i < n2; ++i) {
      color2 = rgb(colors[i]);
      r[i] = color2.r || 0;
      g[i] = color2.g || 0;
      b[i] = color2.b || 0;
    }
    r = spline(r);
    g = spline(g);
    b = spline(b);
    color2.opacity = 1;
    return function(t) {
      color2.r = r(t);
      color2.g = g(t);
      color2.b = b(t);
      return color2 + "";
    };
  };
}
var rgbBasis = rgbSpline(basis_default);
var rgbBasisClosed = rgbSpline(basisClosed_default);

// node_modules/d3-interpolate/src/numberArray.js
function numberArray_default(a3, b) {
  if (!b)
    b = [];
  var n2 = a3 ? Math.min(b.length, a3.length) : 0, c5 = b.slice(), i;
  return function(t) {
    for (i = 0; i < n2; ++i)
      c5[i] = a3[i] * (1 - t) + b[i] * t;
    return c5;
  };
}
function isNumberArray(x4) {
  return ArrayBuffer.isView(x4) && !(x4 instanceof DataView);
}

// node_modules/d3-interpolate/src/array.js
function array_default2(a3, b) {
  return (isNumberArray(b) ? numberArray_default : genericArray)(a3, b);
}
function genericArray(a3, b) {
  var nb = b ? b.length : 0, na = a3 ? Math.min(nb, a3.length) : 0, x4 = new Array(na), c5 = new Array(nb), i;
  for (i = 0; i < na; ++i)
    x4[i] = value_default(a3[i], b[i]);
  for (; i < nb; ++i)
    c5[i] = b[i];
  return function(t) {
    for (i = 0; i < na; ++i)
      c5[i] = x4[i](t);
    return c5;
  };
}

// node_modules/d3-interpolate/src/date.js
function date_default(a3, b) {
  var d = new Date();
  return a3 = +a3, b = +b, function(t) {
    return d.setTime(a3 * (1 - t) + b * t), d;
  };
}

// node_modules/d3-interpolate/src/number.js
function number_default2(a3, b) {
  return a3 = +a3, b = +b, function(t) {
    return a3 * (1 - t) + b * t;
  };
}

// node_modules/d3-interpolate/src/object.js
function object_default(a3, b) {
  var i = {}, c5 = {}, k2;
  if (a3 === null || typeof a3 !== "object")
    a3 = {};
  if (b === null || typeof b !== "object")
    b = {};
  for (k2 in b) {
    if (k2 in a3) {
      i[k2] = value_default(a3[k2], b[k2]);
    } else {
      c5[k2] = b[k2];
    }
  }
  return function(t) {
    for (k2 in i)
      c5[k2] = i[k2](t);
    return c5;
  };
}

// node_modules/d3-interpolate/src/string.js
var reA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
var reB = new RegExp(reA.source, "g");
function zero(b) {
  return function() {
    return b;
  };
}
function one(b) {
  return function(t) {
    return b(t) + "";
  };
}
function string_default(a3, b) {
  var bi = reA.lastIndex = reB.lastIndex = 0, am, bm, bs, i = -1, s3 = [], q = [];
  a3 = a3 + "", b = b + "";
  while ((am = reA.exec(a3)) && (bm = reB.exec(b))) {
    if ((bs = bm.index) > bi) {
      bs = b.slice(bi, bs);
      if (s3[i])
        s3[i] += bs;
      else
        s3[++i] = bs;
    }
    if ((am = am[0]) === (bm = bm[0])) {
      if (s3[i])
        s3[i] += bm;
      else
        s3[++i] = bm;
    } else {
      s3[++i] = null;
      q.push({ i, x: number_default2(am, bm) });
    }
    bi = reB.lastIndex;
  }
  if (bi < b.length) {
    bs = b.slice(bi);
    if (s3[i])
      s3[i] += bs;
    else
      s3[++i] = bs;
  }
  return s3.length < 2 ? q[0] ? one(q[0].x) : zero(b) : (b = q.length, function(t) {
    for (var i2 = 0, o; i2 < b; ++i2)
      s3[(o = q[i2]).i] = o.x(t);
    return s3.join("");
  });
}

// node_modules/d3-interpolate/src/value.js
function value_default(a3, b) {
  var t = typeof b, c5;
  return b == null || t === "boolean" ? constant_default4(b) : (t === "number" ? number_default2 : t === "string" ? (c5 = color(b)) ? (b = c5, rgb_default) : string_default : b instanceof color ? rgb_default : b instanceof Date ? date_default : isNumberArray(b) ? numberArray_default : Array.isArray(b) ? genericArray : typeof b.valueOf !== "function" && typeof b.toString !== "function" || isNaN(b) ? object_default : number_default2)(a3, b);
}

// node_modules/d3-interpolate/src/discrete.js
function discrete_default(range3) {
  var n2 = range3.length;
  return function(t) {
    return range3[Math.max(0, Math.min(n2 - 1, Math.floor(t * n2)))];
  };
}

// node_modules/d3-interpolate/src/hue.js
function hue_default(a3, b) {
  var i = hue(+a3, +b);
  return function(t) {
    var x4 = i(t);
    return x4 - 360 * Math.floor(x4 / 360);
  };
}

// node_modules/d3-interpolate/src/round.js
function round_default(a3, b) {
  return a3 = +a3, b = +b, function(t) {
    return Math.round(a3 * (1 - t) + b * t);
  };
}

// node_modules/d3-interpolate/src/transform/decompose.js
var degrees2 = 180 / Math.PI;
var identity = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function decompose_default(a3, b, c5, d, e, f) {
  var scaleX, scaleY, skewX;
  if (scaleX = Math.sqrt(a3 * a3 + b * b))
    a3 /= scaleX, b /= scaleX;
  if (skewX = a3 * c5 + b * d)
    c5 -= a3 * skewX, d -= b * skewX;
  if (scaleY = Math.sqrt(c5 * c5 + d * d))
    c5 /= scaleY, d /= scaleY, skewX /= scaleY;
  if (a3 * d < b * c5)
    a3 = -a3, b = -b, skewX = -skewX, scaleX = -scaleX;
  return {
    translateX: e,
    translateY: f,
    rotate: Math.atan2(b, a3) * degrees2,
    skewX: Math.atan(skewX) * degrees2,
    scaleX,
    scaleY
  };
}

// node_modules/d3-interpolate/src/transform/parse.js
var svgNode;
function parseCss(value) {
  const m2 = new (typeof DOMMatrix === "function" ? DOMMatrix : WebKitCSSMatrix)(value + "");
  return m2.isIdentity ? identity : decompose_default(m2.a, m2.b, m2.c, m2.d, m2.e, m2.f);
}
function parseSvg(value) {
  if (value == null)
    return identity;
  if (!svgNode)
    svgNode = document.createElementNS("http://www.w3.org/2000/svg", "g");
  svgNode.setAttribute("transform", value);
  if (!(value = svgNode.transform.baseVal.consolidate()))
    return identity;
  value = value.matrix;
  return decompose_default(value.a, value.b, value.c, value.d, value.e, value.f);
}

// node_modules/d3-interpolate/src/transform/index.js
function interpolateTransform(parse3, pxComma, pxParen, degParen) {
  function pop(s3) {
    return s3.length ? s3.pop() + " " : "";
  }
  function translate(xa, ya, xb, yb, s3, q) {
    if (xa !== xb || ya !== yb) {
      var i = s3.push("translate(", null, pxComma, null, pxParen);
      q.push({ i: i - 4, x: number_default2(xa, xb) }, { i: i - 2, x: number_default2(ya, yb) });
    } else if (xb || yb) {
      s3.push("translate(" + xb + pxComma + yb + pxParen);
    }
  }
  function rotate2(a3, b, s3, q) {
    if (a3 !== b) {
      if (a3 - b > 180)
        b += 360;
      else if (b - a3 > 180)
        a3 += 360;
      q.push({ i: s3.push(pop(s3) + "rotate(", null, degParen) - 2, x: number_default2(a3, b) });
    } else if (b) {
      s3.push(pop(s3) + "rotate(" + b + degParen);
    }
  }
  function skewX(a3, b, s3, q) {
    if (a3 !== b) {
      q.push({ i: s3.push(pop(s3) + "skewX(", null, degParen) - 2, x: number_default2(a3, b) });
    } else if (b) {
      s3.push(pop(s3) + "skewX(" + b + degParen);
    }
  }
  function scale(xa, ya, xb, yb, s3, q) {
    if (xa !== xb || ya !== yb) {
      var i = s3.push(pop(s3) + "scale(", null, ",", null, ")");
      q.push({ i: i - 4, x: number_default2(xa, xb) }, { i: i - 2, x: number_default2(ya, yb) });
    } else if (xb !== 1 || yb !== 1) {
      s3.push(pop(s3) + "scale(" + xb + "," + yb + ")");
    }
  }
  return function(a3, b) {
    var s3 = [], q = [];
    a3 = parse3(a3), b = parse3(b);
    translate(a3.translateX, a3.translateY, b.translateX, b.translateY, s3, q);
    rotate2(a3.rotate, b.rotate, s3, q);
    skewX(a3.skewX, b.skewX, s3, q);
    scale(a3.scaleX, a3.scaleY, b.scaleX, b.scaleY, s3, q);
    a3 = b = null;
    return function(t) {
      var i = -1, n2 = q.length, o;
      while (++i < n2)
        s3[(o = q[i]).i] = o.x(t);
      return s3.join("");
    };
  };
}
var interpolateTransformCss = interpolateTransform(parseCss, "px, ", "px)", "deg)");
var interpolateTransformSvg = interpolateTransform(parseSvg, ", ", ")", ")");

// node_modules/d3-interpolate/src/zoom.js
var epsilon2 = 1e-12;
function cosh(x4) {
  return ((x4 = Math.exp(x4)) + 1 / x4) / 2;
}
function sinh(x4) {
  return ((x4 = Math.exp(x4)) - 1 / x4) / 2;
}
function tanh(x4) {
  return ((x4 = Math.exp(2 * x4)) - 1) / (x4 + 1);
}
var zoom_default = function zoomRho(rho, rho2, rho4) {
  function zoom(p02, p1) {
    var ux0 = p02[0], uy0 = p02[1], w0 = p02[2], ux1 = p1[0], uy1 = p1[1], w1 = p1[2], dx = ux1 - ux0, dy = uy1 - uy0, d2 = dx * dx + dy * dy, i, S;
    if (d2 < epsilon2) {
      S = Math.log(w1 / w0) / rho;
      i = function(t) {
        return [
          ux0 + t * dx,
          uy0 + t * dy,
          w0 * Math.exp(rho * t * S)
        ];
      };
    } else {
      var d1 = Math.sqrt(d2), b02 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1), b12 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1), r0 = Math.log(Math.sqrt(b02 * b02 + 1) - b02), r1 = Math.log(Math.sqrt(b12 * b12 + 1) - b12);
      S = (r1 - r0) / rho;
      i = function(t) {
        var s3 = t * S, coshr0 = cosh(r0), u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s3 + r0) - sinh(r0));
        return [
          ux0 + u * dx,
          uy0 + u * dy,
          w0 * coshr0 / cosh(rho * s3 + r0)
        ];
      };
    }
    i.duration = S * 1e3 * rho / Math.SQRT2;
    return i;
  }
  zoom.rho = function(_) {
    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;
    return zoomRho(_1, _2, _4);
  };
  return zoom;
}(Math.SQRT2, 2, 4);

// node_modules/d3-interpolate/src/hsl.js
function hsl2(hue2) {
  return function(start2, end) {
    var h = hue2((start2 = hsl(start2)).h, (end = hsl(end)).h), s3 = nogamma(start2.s, end.s), l2 = nogamma(start2.l, end.l), opacity = nogamma(start2.opacity, end.opacity);
    return function(t) {
      start2.h = h(t);
      start2.s = s3(t);
      start2.l = l2(t);
      start2.opacity = opacity(t);
      return start2 + "";
    };
  };
}
var hsl_default = hsl2(hue);
var hslLong = hsl2(nogamma);

// node_modules/d3-interpolate/src/lab.js
function lab2(start2, end) {
  var l2 = nogamma((start2 = lab(start2)).l, (end = lab(end)).l), a3 = nogamma(start2.a, end.a), b = nogamma(start2.b, end.b), opacity = nogamma(start2.opacity, end.opacity);
  return function(t) {
    start2.l = l2(t);
    start2.a = a3(t);
    start2.b = b(t);
    start2.opacity = opacity(t);
    return start2 + "";
  };
}

// node_modules/d3-interpolate/src/hcl.js
function hcl2(hue2) {
  return function(start2, end) {
    var h = hue2((start2 = hcl(start2)).h, (end = hcl(end)).h), c5 = nogamma(start2.c, end.c), l2 = nogamma(start2.l, end.l), opacity = nogamma(start2.opacity, end.opacity);
    return function(t) {
      start2.h = h(t);
      start2.c = c5(t);
      start2.l = l2(t);
      start2.opacity = opacity(t);
      return start2 + "";
    };
  };
}
var hcl_default = hcl2(hue);
var hclLong = hcl2(nogamma);

// node_modules/d3-interpolate/src/cubehelix.js
function cubehelix2(hue2) {
  return function cubehelixGamma(y4) {
    y4 = +y4;
    function cubehelix3(start2, end) {
      var h = hue2((start2 = cubehelix(start2)).h, (end = cubehelix(end)).h), s3 = nogamma(start2.s, end.s), l2 = nogamma(start2.l, end.l), opacity = nogamma(start2.opacity, end.opacity);
      return function(t) {
        start2.h = h(t);
        start2.s = s3(t);
        start2.l = l2(Math.pow(t, y4));
        start2.opacity = opacity(t);
        return start2 + "";
      };
    }
    cubehelix3.gamma = cubehelixGamma;
    return cubehelix3;
  }(1);
}
var cubehelix_default = cubehelix2(hue);
var cubehelixLong = cubehelix2(nogamma);

// node_modules/d3-interpolate/src/piecewise.js
function piecewise(interpolate, values) {
  if (values === void 0)
    values = interpolate, interpolate = value_default;
  var i = 0, n2 = values.length - 1, v = values[0], I = new Array(n2 < 0 ? 0 : n2);
  while (i < n2)
    I[i] = interpolate(v, v = values[++i]);
  return function(t) {
    var i2 = Math.max(0, Math.min(n2 - 1, Math.floor(t *= n2)));
    return I[i2](t - i2);
  };
}

// node_modules/d3-interpolate/src/quantize.js
function quantize_default(interpolator, n2) {
  var samples = new Array(n2);
  for (var i = 0; i < n2; ++i)
    samples[i] = interpolator(i / (n2 - 1));
  return samples;
}

// node_modules/d3-timer/src/timer.js
var frame = 0;
var timeout = 0;
var interval = 0;
var pokeDelay = 1e3;
var taskHead;
var taskTail;
var clockLast = 0;
var clockNow = 0;
var clockSkew = 0;
var clock = typeof performance === "object" && performance.now ? performance : Date;
var setFrame = typeof window === "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) {
  setTimeout(f, 17);
};
function now2() {
  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);
}
function clearNow() {
  clockNow = 0;
}
function Timer() {
  this._call = this._time = this._next = null;
}
Timer.prototype = timer.prototype = {
  constructor: Timer,
  restart: function(callback, delay, time2) {
    if (typeof callback !== "function")
      throw new TypeError("callback is not a function");
    time2 = (time2 == null ? now2() : +time2) + (delay == null ? 0 : +delay);
    if (!this._next && taskTail !== this) {
      if (taskTail)
        taskTail._next = this;
      else
        taskHead = this;
      taskTail = this;
    }
    this._call = callback;
    this._time = time2;
    sleep();
  },
  stop: function() {
    if (this._call) {
      this._call = null;
      this._time = Infinity;
      sleep();
    }
  }
};
function timer(callback, delay, time2) {
  var t = new Timer();
  t.restart(callback, delay, time2);
  return t;
}
function timerFlush() {
  now2();
  ++frame;
  var t = taskHead, e;
  while (t) {
    if ((e = clockNow - t._time) >= 0)
      t._call.call(null, e);
    t = t._next;
  }
  --frame;
}
function wake() {
  clockNow = (clockLast = clock.now()) + clockSkew;
  frame = timeout = 0;
  try {
    timerFlush();
  } finally {
    frame = 0;
    nap();
    clockNow = 0;
  }
}
function poke() {
  var now3 = clock.now(), delay = now3 - clockLast;
  if (delay > pokeDelay)
    clockSkew -= delay, clockLast = now3;
}
function nap() {
  var t03, t13 = taskHead, t22, time2 = Infinity;
  while (t13) {
    if (t13._call) {
      if (time2 > t13._time)
        time2 = t13._time;
      t03 = t13, t13 = t13._next;
    } else {
      t22 = t13._next, t13._next = null;
      t13 = t03 ? t03._next = t22 : taskHead = t22;
    }
  }
  taskTail = t03;
  sleep(time2);
}
function sleep(time2) {
  if (frame)
    return;
  if (timeout)
    timeout = clearTimeout(timeout);
  var delay = time2 - clockNow;
  if (delay > 24) {
    if (time2 < Infinity)
      timeout = setTimeout(wake, time2 - clock.now() - clockSkew);
    if (interval)
      interval = clearInterval(interval);
  } else {
    if (!interval)
      clockLast = clock.now(), interval = setInterval(poke, pokeDelay);
    frame = 1, setFrame(wake);
  }
}

// node_modules/d3-timer/src/timeout.js
function timeout_default(callback, delay, time2) {
  var t = new Timer();
  delay = delay == null ? 0 : +delay;
  t.restart((elapsed) => {
    t.stop();
    callback(elapsed + delay);
  }, delay, time2);
  return t;
}

// node_modules/d3-timer/src/interval.js
function interval_default(callback, delay, time2) {
  var t = new Timer(), total = delay;
  if (delay == null)
    return t.restart(callback, delay, time2), t;
  t._restart = t.restart;
  t.restart = function(callback2, delay2, time3) {
    delay2 = +delay2, time3 = time3 == null ? now2() : +time3;
    t._restart(function tick(elapsed) {
      elapsed += total;
      t._restart(tick, total += delay2, time3);
      callback2(elapsed);
    }, delay2, time3);
  };
  t.restart(callback, delay, time2);
  return t;
}

// node_modules/d3-transition/src/transition/schedule.js
var emptyOn = dispatch_default("start", "end", "cancel", "interrupt");
var emptyTween = [];
var CREATED = 0;
var SCHEDULED = 1;
var STARTING = 2;
var STARTED = 3;
var RUNNING = 4;
var ENDING = 5;
var ENDED = 6;
function schedule_default(node, name, id2, index3, group2, timing) {
  var schedules = node.__transition;
  if (!schedules)
    node.__transition = {};
  else if (id2 in schedules)
    return;
  create(node, id2, {
    name,
    index: index3,
    group: group2,
    on: emptyOn,
    tween: emptyTween,
    time: timing.time,
    delay: timing.delay,
    duration: timing.duration,
    ease: timing.ease,
    timer: null,
    state: CREATED
  });
}
function init(node, id2) {
  var schedule = get2(node, id2);
  if (schedule.state > CREATED)
    throw new Error("too late; already scheduled");
  return schedule;
}
function set3(node, id2) {
  var schedule = get2(node, id2);
  if (schedule.state > STARTED)
    throw new Error("too late; already running");
  return schedule;
}
function get2(node, id2) {
  var schedule = node.__transition;
  if (!schedule || !(schedule = schedule[id2]))
    throw new Error("transition not found");
  return schedule;
}
function create(node, id2, self2) {
  var schedules = node.__transition, tween;
  schedules[id2] = self2;
  self2.timer = timer(schedule, 0, self2.time);
  function schedule(elapsed) {
    self2.state = SCHEDULED;
    self2.timer.restart(start2, self2.delay, self2.time);
    if (self2.delay <= elapsed)
      start2(elapsed - self2.delay);
  }
  function start2(elapsed) {
    var i, j, n2, o;
    if (self2.state !== SCHEDULED)
      return stop();
    for (i in schedules) {
      o = schedules[i];
      if (o.name !== self2.name)
        continue;
      if (o.state === STARTED)
        return timeout_default(start2);
      if (o.state === RUNNING) {
        o.state = ENDED;
        o.timer.stop();
        o.on.call("interrupt", node, node.__data__, o.index, o.group);
        delete schedules[i];
      } else if (+i < id2) {
        o.state = ENDED;
        o.timer.stop();
        o.on.call("cancel", node, node.__data__, o.index, o.group);
        delete schedules[i];
      }
    }
    timeout_default(function() {
      if (self2.state === STARTED) {
        self2.state = RUNNING;
        self2.timer.restart(tick, self2.delay, self2.time);
        tick(elapsed);
      }
    });
    self2.state = STARTING;
    self2.on.call("start", node, node.__data__, self2.index, self2.group);
    if (self2.state !== STARTING)
      return;
    self2.state = STARTED;
    tween = new Array(n2 = self2.tween.length);
    for (i = 0, j = -1; i < n2; ++i) {
      if (o = self2.tween[i].value.call(node, node.__data__, self2.index, self2.group)) {
        tween[++j] = o;
      }
    }
    tween.length = j + 1;
  }
  function tick(elapsed) {
    var t = elapsed < self2.duration ? self2.ease.call(null, elapsed / self2.duration) : (self2.timer.restart(stop), self2.state = ENDING, 1), i = -1, n2 = tween.length;
    while (++i < n2) {
      tween[i].call(node, t);
    }
    if (self2.state === ENDING) {
      self2.on.call("end", node, node.__data__, self2.index, self2.group);
      stop();
    }
  }
  function stop() {
    self2.state = ENDED;
    self2.timer.stop();
    delete schedules[id2];
    for (var i in schedules)
      return;
    delete node.__transition;
  }
}

// node_modules/d3-transition/src/interrupt.js
function interrupt_default(node, name) {
  var schedules = node.__transition, schedule, active, empty4 = true, i;
  if (!schedules)
    return;
  name = name == null ? null : name + "";
  for (i in schedules) {
    if ((schedule = schedules[i]).name !== name) {
      empty4 = false;
      continue;
    }
    active = schedule.state > STARTING && schedule.state < ENDING;
    schedule.state = ENDED;
    schedule.timer.stop();
    schedule.on.call(active ? "interrupt" : "cancel", node, node.__data__, schedule.index, schedule.group);
    delete schedules[i];
  }
  if (empty4)
    delete node.__transition;
}

// node_modules/d3-transition/src/selection/interrupt.js
function interrupt_default2(name) {
  return this.each(function() {
    interrupt_default(this, name);
  });
}

// node_modules/d3-transition/src/transition/tween.js
function tweenRemove(id2, name) {
  var tween0, tween1;
  return function() {
    var schedule = set3(this, id2), tween = schedule.tween;
    if (tween !== tween0) {
      tween1 = tween0 = tween;
      for (var i = 0, n2 = tween1.length; i < n2; ++i) {
        if (tween1[i].name === name) {
          tween1 = tween1.slice();
          tween1.splice(i, 1);
          break;
        }
      }
    }
    schedule.tween = tween1;
  };
}
function tweenFunction(id2, name, value) {
  var tween0, tween1;
  if (typeof value !== "function")
    throw new Error();
  return function() {
    var schedule = set3(this, id2), tween = schedule.tween;
    if (tween !== tween0) {
      tween1 = (tween0 = tween).slice();
      for (var t = { name, value }, i = 0, n2 = tween1.length; i < n2; ++i) {
        if (tween1[i].name === name) {
          tween1[i] = t;
          break;
        }
      }
      if (i === n2)
        tween1.push(t);
    }
    schedule.tween = tween1;
  };
}
function tween_default(name, value) {
  var id2 = this._id;
  name += "";
  if (arguments.length < 2) {
    var tween = get2(this.node(), id2).tween;
    for (var i = 0, n2 = tween.length, t; i < n2; ++i) {
      if ((t = tween[i]).name === name) {
        return t.value;
      }
    }
    return null;
  }
  return this.each((value == null ? tweenRemove : tweenFunction)(id2, name, value));
}
function tweenValue(transition2, name, value) {
  var id2 = transition2._id;
  transition2.each(function() {
    var schedule = set3(this, id2);
    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);
  });
  return function(node) {
    return get2(node, id2).value[name];
  };
}

// node_modules/d3-transition/src/transition/interpolate.js
function interpolate_default(a3, b) {
  var c5;
  return (typeof b === "number" ? number_default2 : b instanceof color ? rgb_default : (c5 = color(b)) ? (b = c5, rgb_default) : string_default)(a3, b);
}

// node_modules/d3-transition/src/transition/attr.js
function attrRemove2(name) {
  return function() {
    this.removeAttribute(name);
  };
}
function attrRemoveNS2(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}
function attrConstant2(name, interpolate, value1) {
  var string00, string1 = value1 + "", interpolate0;
  return function() {
    var string0 = this.getAttribute(name);
    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
  };
}
function attrConstantNS2(fullname, interpolate, value1) {
  var string00, string1 = value1 + "", interpolate0;
  return function() {
    var string0 = this.getAttributeNS(fullname.space, fullname.local);
    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
  };
}
function attrFunction2(name, interpolate, value) {
  var string00, string10, interpolate0;
  return function() {
    var string0, value1 = value(this), string1;
    if (value1 == null)
      return void this.removeAttribute(name);
    string0 = this.getAttribute(name);
    string1 = value1 + "";
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}
function attrFunctionNS2(fullname, interpolate, value) {
  var string00, string10, interpolate0;
  return function() {
    var string0, value1 = value(this), string1;
    if (value1 == null)
      return void this.removeAttributeNS(fullname.space, fullname.local);
    string0 = this.getAttributeNS(fullname.space, fullname.local);
    string1 = value1 + "";
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}
function attr_default2(name, value) {
  var fullname = namespace_default(name), i = fullname === "transform" ? interpolateTransformSvg : interpolate_default;
  return this.attrTween(name, typeof value === "function" ? (fullname.local ? attrFunctionNS2 : attrFunction2)(fullname, i, tweenValue(this, "attr." + name, value)) : value == null ? (fullname.local ? attrRemoveNS2 : attrRemove2)(fullname) : (fullname.local ? attrConstantNS2 : attrConstant2)(fullname, i, value));
}

// node_modules/d3-transition/src/transition/attrTween.js
function attrInterpolate(name, i) {
  return function(t) {
    this.setAttribute(name, i.call(this, t));
  };
}
function attrInterpolateNS(fullname, i) {
  return function(t) {
    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));
  };
}
function attrTweenNS(fullname, value) {
  var t03, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t03 = (i0 = i) && attrInterpolateNS(fullname, i);
    return t03;
  }
  tween._value = value;
  return tween;
}
function attrTween(name, value) {
  var t03, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t03 = (i0 = i) && attrInterpolate(name, i);
    return t03;
  }
  tween._value = value;
  return tween;
}
function attrTween_default(name, value) {
  var key = "attr." + name;
  if (arguments.length < 2)
    return (key = this.tween(key)) && key._value;
  if (value == null)
    return this.tween(key, null);
  if (typeof value !== "function")
    throw new Error();
  var fullname = namespace_default(name);
  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));
}

// node_modules/d3-transition/src/transition/delay.js
function delayFunction(id2, value) {
  return function() {
    init(this, id2).delay = +value.apply(this, arguments);
  };
}
function delayConstant(id2, value) {
  return value = +value, function() {
    init(this, id2).delay = value;
  };
}
function delay_default(value) {
  var id2 = this._id;
  return arguments.length ? this.each((typeof value === "function" ? delayFunction : delayConstant)(id2, value)) : get2(this.node(), id2).delay;
}

// node_modules/d3-transition/src/transition/duration.js
function durationFunction(id2, value) {
  return function() {
    set3(this, id2).duration = +value.apply(this, arguments);
  };
}
function durationConstant(id2, value) {
  return value = +value, function() {
    set3(this, id2).duration = value;
  };
}
function duration_default(value) {
  var id2 = this._id;
  return arguments.length ? this.each((typeof value === "function" ? durationFunction : durationConstant)(id2, value)) : get2(this.node(), id2).duration;
}

// node_modules/d3-transition/src/transition/ease.js
function easeConstant(id2, value) {
  if (typeof value !== "function")
    throw new Error();
  return function() {
    set3(this, id2).ease = value;
  };
}
function ease_default(value) {
  var id2 = this._id;
  return arguments.length ? this.each(easeConstant(id2, value)) : get2(this.node(), id2).ease;
}

// node_modules/d3-transition/src/transition/easeVarying.js
function easeVarying(id2, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (typeof v !== "function")
      throw new Error();
    set3(this, id2).ease = v;
  };
}
function easeVarying_default(value) {
  if (typeof value !== "function")
    throw new Error();
  return this.each(easeVarying(this._id, value));
}

// node_modules/d3-transition/src/transition/filter.js
function filter_default2(match2) {
  if (typeof match2 !== "function")
    match2 = matcher_default(match2);
  for (var groups2 = this._groups, m2 = groups2.length, subgroups = new Array(m2), j = 0; j < m2; ++j) {
    for (var group2 = groups2[j], n2 = group2.length, subgroup = subgroups[j] = [], node, i = 0; i < n2; ++i) {
      if ((node = group2[i]) && match2.call(node, node.__data__, i, group2)) {
        subgroup.push(node);
      }
    }
  }
  return new Transition(subgroups, this._parents, this._name, this._id);
}

// node_modules/d3-transition/src/transition/merge.js
function merge_default2(transition2) {
  if (transition2._id !== this._id)
    throw new Error();
  for (var groups0 = this._groups, groups1 = transition2._groups, m0 = groups0.length, m1 = groups1.length, m2 = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m2; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n2 = group0.length, merge4 = merges[j] = new Array(n2), node, i = 0; i < n2; ++i) {
      if (node = group0[i] || group1[i]) {
        merge4[i] = node;
      }
    }
  }
  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }
  return new Transition(merges, this._parents, this._name, this._id);
}

// node_modules/d3-transition/src/transition/on.js
function start(name) {
  return (name + "").trim().split(/^|\s+/).every(function(t) {
    var i = t.indexOf(".");
    if (i >= 0)
      t = t.slice(0, i);
    return !t || t === "start";
  });
}
function onFunction(id2, name, listener) {
  var on0, on1, sit = start(name) ? init : set3;
  return function() {
    var schedule = sit(this, id2), on = schedule.on;
    if (on !== on0)
      (on1 = (on0 = on).copy()).on(name, listener);
    schedule.on = on1;
  };
}
function on_default2(name, listener) {
  var id2 = this._id;
  return arguments.length < 2 ? get2(this.node(), id2).on.on(name) : this.each(onFunction(id2, name, listener));
}

// node_modules/d3-transition/src/transition/remove.js
function removeFunction(id2) {
  return function() {
    var parent = this.parentNode;
    for (var i in this.__transition)
      if (+i !== id2)
        return;
    if (parent)
      parent.removeChild(this);
  };
}
function remove_default2() {
  return this.on("end.remove", removeFunction(this._id));
}

// node_modules/d3-transition/src/transition/select.js
function select_default3(select) {
  var name = this._name, id2 = this._id;
  if (typeof select !== "function")
    select = selector_default(select);
  for (var groups2 = this._groups, m2 = groups2.length, subgroups = new Array(m2), j = 0; j < m2; ++j) {
    for (var group2 = groups2[j], n2 = group2.length, subgroup = subgroups[j] = new Array(n2), node, subnode, i = 0; i < n2; ++i) {
      if ((node = group2[i]) && (subnode = select.call(node, node.__data__, i, group2))) {
        if ("__data__" in node)
          subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
        schedule_default(subgroup[i], name, id2, i, subgroup, get2(node, id2));
      }
    }
  }
  return new Transition(subgroups, this._parents, name, id2);
}

// node_modules/d3-transition/src/transition/selectAll.js
function selectAll_default3(select) {
  var name = this._name, id2 = this._id;
  if (typeof select !== "function")
    select = selectorAll_default(select);
  for (var groups2 = this._groups, m2 = groups2.length, subgroups = [], parents = [], j = 0; j < m2; ++j) {
    for (var group2 = groups2[j], n2 = group2.length, node, i = 0; i < n2; ++i) {
      if (node = group2[i]) {
        for (var children2 = select.call(node, node.__data__, i, group2), child, inherit2 = get2(node, id2), k2 = 0, l2 = children2.length; k2 < l2; ++k2) {
          if (child = children2[k2]) {
            schedule_default(child, name, id2, k2, children2, inherit2);
          }
        }
        subgroups.push(children2);
        parents.push(node);
      }
    }
  }
  return new Transition(subgroups, parents, name, id2);
}

// node_modules/d3-transition/src/transition/selection.js
var Selection2 = selection_default.prototype.constructor;
function selection_default2() {
  return new Selection2(this._groups, this._parents);
}

// node_modules/d3-transition/src/transition/style.js
function styleNull(name, interpolate) {
  var string00, string10, interpolate0;
  return function() {
    var string0 = styleValue(this, name), string1 = (this.style.removeProperty(name), styleValue(this, name));
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : interpolate0 = interpolate(string00 = string0, string10 = string1);
  };
}
function styleRemove2(name) {
  return function() {
    this.style.removeProperty(name);
  };
}
function styleConstant2(name, interpolate, value1) {
  var string00, string1 = value1 + "", interpolate0;
  return function() {
    var string0 = styleValue(this, name);
    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
  };
}
function styleFunction2(name, interpolate, value) {
  var string00, string10, interpolate0;
  return function() {
    var string0 = styleValue(this, name), value1 = value(this), string1 = value1 + "";
    if (value1 == null)
      string1 = value1 = (this.style.removeProperty(name), styleValue(this, name));
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}
function styleMaybeRemove(id2, name) {
  var on0, on1, listener0, key = "style." + name, event = "end." + key, remove2;
  return function() {
    var schedule = set3(this, id2), on = schedule.on, listener = schedule.value[key] == null ? remove2 || (remove2 = styleRemove2(name)) : void 0;
    if (on !== on0 || listener0 !== listener)
      (on1 = (on0 = on).copy()).on(event, listener0 = listener);
    schedule.on = on1;
  };
}
function style_default2(name, value, priority) {
  var i = (name += "") === "transform" ? interpolateTransformCss : interpolate_default;
  return value == null ? this.styleTween(name, styleNull(name, i)).on("end.style." + name, styleRemove2(name)) : typeof value === "function" ? this.styleTween(name, styleFunction2(name, i, tweenValue(this, "style." + name, value))).each(styleMaybeRemove(this._id, name)) : this.styleTween(name, styleConstant2(name, i, value), priority).on("end.style." + name, null);
}

// node_modules/d3-transition/src/transition/styleTween.js
function styleInterpolate(name, i, priority) {
  return function(t) {
    this.style.setProperty(name, i.call(this, t), priority);
  };
}
function styleTween(name, value, priority) {
  var t, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t = (i0 = i) && styleInterpolate(name, i, priority);
    return t;
  }
  tween._value = value;
  return tween;
}
function styleTween_default(name, value, priority) {
  var key = "style." + (name += "");
  if (arguments.length < 2)
    return (key = this.tween(key)) && key._value;
  if (value == null)
    return this.tween(key, null);
  if (typeof value !== "function")
    throw new Error();
  return this.tween(key, styleTween(name, value, priority == null ? "" : priority));
}

// node_modules/d3-transition/src/transition/text.js
function textConstant2(value) {
  return function() {
    this.textContent = value;
  };
}
function textFunction2(value) {
  return function() {
    var value1 = value(this);
    this.textContent = value1 == null ? "" : value1;
  };
}
function text_default2(value) {
  return this.tween("text", typeof value === "function" ? textFunction2(tweenValue(this, "text", value)) : textConstant2(value == null ? "" : value + ""));
}

// node_modules/d3-transition/src/transition/textTween.js
function textInterpolate(i) {
  return function(t) {
    this.textContent = i.call(this, t);
  };
}
function textTween(value) {
  var t03, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t03 = (i0 = i) && textInterpolate(i);
    return t03;
  }
  tween._value = value;
  return tween;
}
function textTween_default(value) {
  var key = "text";
  if (arguments.length < 1)
    return (key = this.tween(key)) && key._value;
  if (value == null)
    return this.tween(key, null);
  if (typeof value !== "function")
    throw new Error();
  return this.tween(key, textTween(value));
}

// node_modules/d3-transition/src/transition/transition.js
function transition_default() {
  var name = this._name, id0 = this._id, id1 = newId();
  for (var groups2 = this._groups, m2 = groups2.length, j = 0; j < m2; ++j) {
    for (var group2 = groups2[j], n2 = group2.length, node, i = 0; i < n2; ++i) {
      if (node = group2[i]) {
        var inherit2 = get2(node, id0);
        schedule_default(node, name, id1, i, group2, {
          time: inherit2.time + inherit2.delay + inherit2.duration,
          delay: 0,
          duration: inherit2.duration,
          ease: inherit2.ease
        });
      }
    }
  }
  return new Transition(groups2, this._parents, name, id1);
}

// node_modules/d3-transition/src/transition/end.js
function end_default() {
  var on0, on1, that = this, id2 = that._id, size = that.size();
  return new Promise(function(resolve, reject) {
    var cancel = { value: reject }, end = { value: function() {
      if (--size === 0)
        resolve();
    } };
    that.each(function() {
      var schedule = set3(this, id2), on = schedule.on;
      if (on !== on0) {
        on1 = (on0 = on).copy();
        on1._.cancel.push(cancel);
        on1._.interrupt.push(cancel);
        on1._.end.push(end);
      }
      schedule.on = on1;
    });
    if (size === 0)
      resolve();
  });
}

// node_modules/d3-transition/src/transition/index.js
var id = 0;
function Transition(groups2, parents, name, id2) {
  this._groups = groups2;
  this._parents = parents;
  this._name = name;
  this._id = id2;
}
function transition(name) {
  return selection_default().transition(name);
}
function newId() {
  return ++id;
}
var selection_prototype = selection_default.prototype;
Transition.prototype = transition.prototype = {
  constructor: Transition,
  select: select_default3,
  selectAll: selectAll_default3,
  filter: filter_default2,
  merge: merge_default2,
  selection: selection_default2,
  transition: transition_default,
  call: selection_prototype.call,
  nodes: selection_prototype.nodes,
  node: selection_prototype.node,
  size: selection_prototype.size,
  empty: selection_prototype.empty,
  each: selection_prototype.each,
  on: on_default2,
  attr: attr_default2,
  attrTween: attrTween_default,
  style: style_default2,
  styleTween: styleTween_default,
  text: text_default2,
  textTween: textTween_default,
  remove: remove_default2,
  tween: tween_default,
  delay: delay_default,
  duration: duration_default,
  ease: ease_default,
  easeVarying: easeVarying_default,
  end: end_default,
  [Symbol.iterator]: selection_prototype[Symbol.iterator]
};

// node_modules/d3-ease/src/linear.js
var linear2 = (t) => +t;

// node_modules/d3-ease/src/quad.js
function quadIn(t) {
  return t * t;
}
function quadOut(t) {
  return t * (2 - t);
}
function quadInOut(t) {
  return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2;
}

// node_modules/d3-ease/src/cubic.js
function cubicIn(t) {
  return t * t * t;
}
function cubicOut(t) {
  return --t * t * t + 1;
}
function cubicInOut(t) {
  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
}

// node_modules/d3-ease/src/poly.js
var exponent = 3;
var polyIn = function custom(e) {
  e = +e;
  function polyIn2(t) {
    return Math.pow(t, e);
  }
  polyIn2.exponent = custom;
  return polyIn2;
}(exponent);
var polyOut = function custom2(e) {
  e = +e;
  function polyOut2(t) {
    return 1 - Math.pow(1 - t, e);
  }
  polyOut2.exponent = custom2;
  return polyOut2;
}(exponent);
var polyInOut = function custom3(e) {
  e = +e;
  function polyInOut2(t) {
    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;
  }
  polyInOut2.exponent = custom3;
  return polyInOut2;
}(exponent);

// node_modules/d3-ease/src/sin.js
var pi = Math.PI;
var halfPi = pi / 2;
function sinIn(t) {
  return +t === 1 ? 1 : 1 - Math.cos(t * halfPi);
}
function sinOut(t) {
  return Math.sin(t * halfPi);
}
function sinInOut(t) {
  return (1 - Math.cos(pi * t)) / 2;
}

// node_modules/d3-ease/src/math.js
function tpmt(x4) {
  return (Math.pow(2, -10 * x4) - 9765625e-10) * 1.0009775171065494;
}

// node_modules/d3-ease/src/exp.js
function expIn(t) {
  return tpmt(1 - +t);
}
function expOut(t) {
  return 1 - tpmt(t);
}
function expInOut(t) {
  return ((t *= 2) <= 1 ? tpmt(1 - t) : 2 - tpmt(t - 1)) / 2;
}

// node_modules/d3-ease/src/circle.js
function circleIn(t) {
  return 1 - Math.sqrt(1 - t * t);
}
function circleOut(t) {
  return Math.sqrt(1 - --t * t);
}
function circleInOut(t) {
  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;
}

// node_modules/d3-ease/src/bounce.js
var b1 = 4 / 11;
var b2 = 6 / 11;
var b3 = 8 / 11;
var b4 = 3 / 4;
var b5 = 9 / 11;
var b6 = 10 / 11;
var b7 = 15 / 16;
var b8 = 21 / 22;
var b9 = 63 / 64;
var b0 = 1 / b1 / b1;
function bounceIn(t) {
  return 1 - bounceOut(1 - t);
}
function bounceOut(t) {
  return (t = +t) < b1 ? b0 * t * t : t < b3 ? b0 * (t -= b2) * t + b4 : t < b6 ? b0 * (t -= b5) * t + b7 : b0 * (t -= b8) * t + b9;
}
function bounceInOut(t) {
  return ((t *= 2) <= 1 ? 1 - bounceOut(1 - t) : bounceOut(t - 1) + 1) / 2;
}

// node_modules/d3-ease/src/back.js
var overshoot = 1.70158;
var backIn = function custom4(s3) {
  s3 = +s3;
  function backIn2(t) {
    return (t = +t) * t * (s3 * (t - 1) + t);
  }
  backIn2.overshoot = custom4;
  return backIn2;
}(overshoot);
var backOut = function custom5(s3) {
  s3 = +s3;
  function backOut2(t) {
    return --t * t * ((t + 1) * s3 + t) + 1;
  }
  backOut2.overshoot = custom5;
  return backOut2;
}(overshoot);
var backInOut = function custom6(s3) {
  s3 = +s3;
  function backInOut2(t) {
    return ((t *= 2) < 1 ? t * t * ((s3 + 1) * t - s3) : (t -= 2) * t * ((s3 + 1) * t + s3) + 2) / 2;
  }
  backInOut2.overshoot = custom6;
  return backInOut2;
}(overshoot);

// node_modules/d3-ease/src/elastic.js
var tau = 2 * Math.PI;
var amplitude = 1;
var period = 0.3;
var elasticIn = function custom7(a3, p) {
  var s3 = Math.asin(1 / (a3 = Math.max(1, a3))) * (p /= tau);
  function elasticIn2(t) {
    return a3 * tpmt(- --t) * Math.sin((s3 - t) / p);
  }
  elasticIn2.amplitude = function(a4) {
    return custom7(a4, p * tau);
  };
  elasticIn2.period = function(p2) {
    return custom7(a3, p2);
  };
  return elasticIn2;
}(amplitude, period);
var elasticOut = function custom8(a3, p) {
  var s3 = Math.asin(1 / (a3 = Math.max(1, a3))) * (p /= tau);
  function elasticOut2(t) {
    return 1 - a3 * tpmt(t = +t) * Math.sin((t + s3) / p);
  }
  elasticOut2.amplitude = function(a4) {
    return custom8(a4, p * tau);
  };
  elasticOut2.period = function(p2) {
    return custom8(a3, p2);
  };
  return elasticOut2;
}(amplitude, period);
var elasticInOut = function custom9(a3, p) {
  var s3 = Math.asin(1 / (a3 = Math.max(1, a3))) * (p /= tau);
  function elasticInOut2(t) {
    return ((t = t * 2 - 1) < 0 ? a3 * tpmt(-t) * Math.sin((s3 - t) / p) : 2 - a3 * tpmt(t) * Math.sin((s3 + t) / p)) / 2;
  }
  elasticInOut2.amplitude = function(a4) {
    return custom9(a4, p * tau);
  };
  elasticInOut2.period = function(p2) {
    return custom9(a3, p2);
  };
  return elasticInOut2;
}(amplitude, period);

// node_modules/d3-transition/src/selection/transition.js
var defaultTiming = {
  time: null,
  delay: 0,
  duration: 250,
  ease: cubicInOut
};
function inherit(node, id2) {
  var timing;
  while (!(timing = node.__transition) || !(timing = timing[id2])) {
    if (!(node = node.parentNode)) {
      throw new Error(`transition ${id2} not found`);
    }
  }
  return timing;
}
function transition_default2(name) {
  var id2, timing;
  if (name instanceof Transition) {
    id2 = name._id, name = name._name;
  } else {
    id2 = newId(), (timing = defaultTiming).time = now2(), name = name == null ? null : name + "";
  }
  for (var groups2 = this._groups, m2 = groups2.length, j = 0; j < m2; ++j) {
    for (var group2 = groups2[j], n2 = group2.length, node, i = 0; i < n2; ++i) {
      if (node = group2[i]) {
        schedule_default(node, name, id2, i, group2, timing || inherit(node, id2));
      }
    }
  }
  return new Transition(groups2, this._parents, name, id2);
}

// node_modules/d3-transition/src/selection/index.js
selection_default.prototype.interrupt = interrupt_default2;
selection_default.prototype.transition = transition_default2;

// node_modules/d3-transition/src/active.js
var root2 = [null];
function active_default(node, name) {
  var schedules = node.__transition, schedule, i;
  if (schedules) {
    name = name == null ? null : name + "";
    for (i in schedules) {
      if ((schedule = schedules[i]).state > SCHEDULED && schedule.name === name) {
        return new Transition([[node]], root2, name, +i);
      }
    }
  }
  return null;
}

// node_modules/d3-brush/src/constant.js
var constant_default5 = (x4) => () => x4;

// node_modules/d3-brush/src/event.js
function BrushEvent(type2, {
  sourceEvent,
  target,
  selection: selection2,
  mode,
  dispatch: dispatch2
}) {
  Object.defineProperties(this, {
    type: { value: type2, enumerable: true, configurable: true },
    sourceEvent: { value: sourceEvent, enumerable: true, configurable: true },
    target: { value: target, enumerable: true, configurable: true },
    selection: { value: selection2, enumerable: true, configurable: true },
    mode: { value: mode, enumerable: true, configurable: true },
    _: { value: dispatch2 }
  });
}

// node_modules/d3-brush/src/noevent.js
function nopropagation2(event) {
  event.stopImmediatePropagation();
}
function noevent_default2(event) {
  event.preventDefault();
  event.stopImmediatePropagation();
}

// node_modules/d3-brush/src/brush.js
var MODE_DRAG = { name: "drag" };
var MODE_SPACE = { name: "space" };
var MODE_HANDLE = { name: "handle" };
var MODE_CENTER = { name: "center" };
var { abs, max: max2, min: min2 } = Math;
function number1(e) {
  return [+e[0], +e[1]];
}
function number2(e) {
  return [number1(e[0]), number1(e[1])];
}
var X = {
  name: "x",
  handles: ["w", "e"].map(type),
  input: function(x4, e) {
    return x4 == null ? null : [[+x4[0], e[0][1]], [+x4[1], e[1][1]]];
  },
  output: function(xy) {
    return xy && [xy[0][0], xy[1][0]];
  }
};
var Y = {
  name: "y",
  handles: ["n", "s"].map(type),
  input: function(y4, e) {
    return y4 == null ? null : [[e[0][0], +y4[0]], [e[1][0], +y4[1]]];
  },
  output: function(xy) {
    return xy && [xy[0][1], xy[1][1]];
  }
};
var XY = {
  name: "xy",
  handles: ["n", "w", "e", "s", "nw", "ne", "sw", "se"].map(type),
  input: function(xy) {
    return xy == null ? null : number2(xy);
  },
  output: function(xy) {
    return xy;
  }
};
var cursors = {
  overlay: "crosshair",
  selection: "move",
  n: "ns-resize",
  e: "ew-resize",
  s: "ns-resize",
  w: "ew-resize",
  nw: "nwse-resize",
  ne: "nesw-resize",
  se: "nwse-resize",
  sw: "nesw-resize"
};
var flipX = {
  e: "w",
  w: "e",
  nw: "ne",
  ne: "nw",
  se: "sw",
  sw: "se"
};
var flipY = {
  n: "s",
  s: "n",
  nw: "sw",
  ne: "se",
  se: "ne",
  sw: "nw"
};
var signsX = {
  overlay: 1,
  selection: 1,
  n: null,
  e: 1,
  s: null,
  w: -1,
  nw: -1,
  ne: 1,
  se: 1,
  sw: -1
};
var signsY = {
  overlay: 1,
  selection: 1,
  n: -1,
  e: null,
  s: 1,
  w: null,
  nw: -1,
  ne: -1,
  se: 1,
  sw: 1
};
function type(t) {
  return { type: t };
}
function defaultFilter2(event) {
  return !event.ctrlKey && !event.button;
}
function defaultExtent() {
  var svg2 = this.ownerSVGElement || this;
  if (svg2.hasAttribute("viewBox")) {
    svg2 = svg2.viewBox.baseVal;
    return [[svg2.x, svg2.y], [svg2.x + svg2.width, svg2.y + svg2.height]];
  }
  return [[0, 0], [svg2.width.baseVal.value, svg2.height.baseVal.value]];
}
function defaultTouchable2() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function local2(node) {
  while (!node.__brush)
    if (!(node = node.parentNode))
      return;
  return node.__brush;
}
function empty3(extent) {
  return extent[0][0] === extent[1][0] || extent[0][1] === extent[1][1];
}
function brushSelection(node) {
  var state = node.__brush;
  return state ? state.dim.output(state.selection) : null;
}
function brushX() {
  return brush(X);
}
function brushY() {
  return brush(Y);
}
function brush_default() {
  return brush(XY);
}
function brush(dim) {
  var extent = defaultExtent, filter3 = defaultFilter2, touchable = defaultTouchable2, keys = true, listeners = dispatch_default("start", "brush", "end"), handleSize = 6, touchending;
  function brush2(group2) {
    var overlay = group2.property("__brush", initialize).selectAll(".overlay").data([type("overlay")]);
    overlay.enter().append("rect").attr("class", "overlay").attr("pointer-events", "all").attr("cursor", cursors.overlay).merge(overlay).each(function() {
      var extent2 = local2(this).extent;
      select_default2(this).attr("x", extent2[0][0]).attr("y", extent2[0][1]).attr("width", extent2[1][0] - extent2[0][0]).attr("height", extent2[1][1] - extent2[0][1]);
    });
    group2.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class", "selection").attr("cursor", cursors.selection).attr("fill", "#777").attr("fill-opacity", 0.3).attr("stroke", "#fff").attr("shape-rendering", "crispEdges");
    var handle = group2.selectAll(".handle").data(dim.handles, function(d) {
      return d.type;
    });
    handle.exit().remove();
    handle.enter().append("rect").attr("class", function(d) {
      return "handle handle--" + d.type;
    }).attr("cursor", function(d) {
      return cursors[d.type];
    });
    group2.each(redraw).attr("fill", "none").attr("pointer-events", "all").on("mousedown.brush", started).filter(touchable).on("touchstart.brush", started).on("touchmove.brush", touchmoved).on("touchend.brush touchcancel.brush", touchended).style("touch-action", "none").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  brush2.move = function(group2, selection2) {
    if (group2.tween) {
      group2.on("start.brush", function(event) {
        emitter(this, arguments).beforestart().start(event);
      }).on("interrupt.brush end.brush", function(event) {
        emitter(this, arguments).end(event);
      }).tween("brush", function() {
        var that = this, state = that.__brush, emit = emitter(that, arguments), selection0 = state.selection, selection1 = dim.input(typeof selection2 === "function" ? selection2.apply(this, arguments) : selection2, state.extent), i = value_default(selection0, selection1);
        function tween(t) {
          state.selection = t === 1 && selection1 === null ? null : i(t);
          redraw.call(that);
          emit.brush();
        }
        return selection0 !== null && selection1 !== null ? tween : tween(1);
      });
    } else {
      group2.each(function() {
        var that = this, args = arguments, state = that.__brush, selection1 = dim.input(typeof selection2 === "function" ? selection2.apply(that, args) : selection2, state.extent), emit = emitter(that, args).beforestart();
        interrupt_default(that);
        state.selection = selection1 === null ? null : selection1;
        redraw.call(that);
        emit.start().brush().end();
      });
    }
  };
  brush2.clear = function(group2) {
    brush2.move(group2, null);
  };
  function redraw() {
    var group2 = select_default2(this), selection2 = local2(this).selection;
    if (selection2) {
      group2.selectAll(".selection").style("display", null).attr("x", selection2[0][0]).attr("y", selection2[0][1]).attr("width", selection2[1][0] - selection2[0][0]).attr("height", selection2[1][1] - selection2[0][1]);
      group2.selectAll(".handle").style("display", null).attr("x", function(d) {
        return d.type[d.type.length - 1] === "e" ? selection2[1][0] - handleSize / 2 : selection2[0][0] - handleSize / 2;
      }).attr("y", function(d) {
        return d.type[0] === "s" ? selection2[1][1] - handleSize / 2 : selection2[0][1] - handleSize / 2;
      }).attr("width", function(d) {
        return d.type === "n" || d.type === "s" ? selection2[1][0] - selection2[0][0] + handleSize : handleSize;
      }).attr("height", function(d) {
        return d.type === "e" || d.type === "w" ? selection2[1][1] - selection2[0][1] + handleSize : handleSize;
      });
    } else {
      group2.selectAll(".selection,.handle").style("display", "none").attr("x", null).attr("y", null).attr("width", null).attr("height", null);
    }
  }
  function emitter(that, args, clean) {
    var emit = that.__brush.emitter;
    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);
  }
  function Emitter(that, args, clean) {
    this.that = that;
    this.args = args;
    this.state = that.__brush;
    this.active = 0;
    this.clean = clean;
  }
  Emitter.prototype = {
    beforestart: function() {
      if (++this.active === 1)
        this.state.emitter = this, this.starting = true;
      return this;
    },
    start: function(event, mode) {
      if (this.starting)
        this.starting = false, this.emit("start", event, mode);
      else
        this.emit("brush", event);
      return this;
    },
    brush: function(event, mode) {
      this.emit("brush", event, mode);
      return this;
    },
    end: function(event, mode) {
      if (--this.active === 0)
        delete this.state.emitter, this.emit("end", event, mode);
      return this;
    },
    emit: function(type2, event, mode) {
      var d = select_default2(this.that).datum();
      listeners.call(
        type2,
        this.that,
        new BrushEvent(type2, {
          sourceEvent: event,
          target: brush2,
          selection: dim.output(this.state.selection),
          mode,
          dispatch: listeners
        }),
        d
      );
    }
  };
  function started(event) {
    if (touchending && !event.touches)
      return;
    if (!filter3.apply(this, arguments))
      return;
    var that = this, type2 = event.target.__data__.type, mode = (keys && event.metaKey ? type2 = "overlay" : type2) === "selection" ? MODE_DRAG : keys && event.altKey ? MODE_CENTER : MODE_HANDLE, signX = dim === Y ? null : signsX[type2], signY = dim === X ? null : signsY[type2], state = local2(that), extent2 = state.extent, selection2 = state.selection, W = extent2[0][0], w0, w1, N = extent2[0][1], n0, n1, E2 = extent2[1][0], e0, e1, S = extent2[1][1], s0, s1, dx = 0, dy = 0, moving, shifting = signX && signY && keys && event.shiftKey, lockX, lockY, points = Array.from(event.touches || [event], (t) => {
      const i = t.identifier;
      t = pointer_default(t, that);
      t.point0 = t.slice();
      t.identifier = i;
      return t;
    });
    if (type2 === "overlay") {
      if (selection2)
        moving = true;
      const pts = [points[0], points[1] || points[0]];
      state.selection = selection2 = [[
        w0 = dim === Y ? W : min2(pts[0][0], pts[1][0]),
        n0 = dim === X ? N : min2(pts[0][1], pts[1][1])
      ], [
        e0 = dim === Y ? E2 : max2(pts[0][0], pts[1][0]),
        s0 = dim === X ? S : max2(pts[0][1], pts[1][1])
      ]];
      if (points.length > 1)
        move();
    } else {
      w0 = selection2[0][0];
      n0 = selection2[0][1];
      e0 = selection2[1][0];
      s0 = selection2[1][1];
    }
    w1 = w0;
    n1 = n0;
    e1 = e0;
    s1 = s0;
    var group2 = select_default2(that).attr("pointer-events", "none");
    var overlay = group2.selectAll(".overlay").attr("cursor", cursors[type2]);
    interrupt_default(that);
    var emit = emitter(that, arguments, true).beforestart();
    if (event.touches) {
      emit.moved = moved;
      emit.ended = ended;
    } else {
      var view = select_default2(event.view).on("mousemove.brush", moved, true).on("mouseup.brush", ended, true);
      if (keys)
        view.on("keydown.brush", keydowned, true).on("keyup.brush", keyupped, true);
      nodrag_default(event.view);
    }
    redraw.call(that);
    emit.start(event, mode.name);
    function moved(event2) {
      for (const p of event2.changedTouches || [event2]) {
        for (const d of points)
          if (d.identifier === p.identifier)
            d.cur = pointer_default(p, that);
      }
      if (shifting && !lockX && !lockY && points.length === 1) {
        const point6 = points[0];
        if (abs(point6.cur[0] - point6[0]) > abs(point6.cur[1] - point6[1]))
          lockY = true;
        else
          lockX = true;
      }
      for (const point6 of points)
        if (point6.cur)
          point6[0] = point6.cur[0], point6[1] = point6.cur[1];
      moving = true;
      noevent_default2(event2);
      move(event2);
    }
    function move(event2) {
      const point6 = points[0], point0 = point6.point0;
      var t;
      dx = point6[0] - point0[0];
      dy = point6[1] - point0[1];
      switch (mode) {
        case MODE_SPACE:
        case MODE_DRAG: {
          if (signX)
            dx = max2(W - w0, min2(E2 - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;
          if (signY)
            dy = max2(N - n0, min2(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;
          break;
        }
        case MODE_HANDLE: {
          if (points[1]) {
            if (signX)
              w1 = max2(W, min2(E2, points[0][0])), e1 = max2(W, min2(E2, points[1][0])), signX = 1;
            if (signY)
              n1 = max2(N, min2(S, points[0][1])), s1 = max2(N, min2(S, points[1][1])), signY = 1;
          } else {
            if (signX < 0)
              dx = max2(W - w0, min2(E2 - w0, dx)), w1 = w0 + dx, e1 = e0;
            else if (signX > 0)
              dx = max2(W - e0, min2(E2 - e0, dx)), w1 = w0, e1 = e0 + dx;
            if (signY < 0)
              dy = max2(N - n0, min2(S - n0, dy)), n1 = n0 + dy, s1 = s0;
            else if (signY > 0)
              dy = max2(N - s0, min2(S - s0, dy)), n1 = n0, s1 = s0 + dy;
          }
          break;
        }
        case MODE_CENTER: {
          if (signX)
            w1 = max2(W, min2(E2, w0 - dx * signX)), e1 = max2(W, min2(E2, e0 + dx * signX));
          if (signY)
            n1 = max2(N, min2(S, n0 - dy * signY)), s1 = max2(N, min2(S, s0 + dy * signY));
          break;
        }
      }
      if (e1 < w1) {
        signX *= -1;
        t = w0, w0 = e0, e0 = t;
        t = w1, w1 = e1, e1 = t;
        if (type2 in flipX)
          overlay.attr("cursor", cursors[type2 = flipX[type2]]);
      }
      if (s1 < n1) {
        signY *= -1;
        t = n0, n0 = s0, s0 = t;
        t = n1, n1 = s1, s1 = t;
        if (type2 in flipY)
          overlay.attr("cursor", cursors[type2 = flipY[type2]]);
      }
      if (state.selection)
        selection2 = state.selection;
      if (lockX)
        w1 = selection2[0][0], e1 = selection2[1][0];
      if (lockY)
        n1 = selection2[0][1], s1 = selection2[1][1];
      if (selection2[0][0] !== w1 || selection2[0][1] !== n1 || selection2[1][0] !== e1 || selection2[1][1] !== s1) {
        state.selection = [[w1, n1], [e1, s1]];
        redraw.call(that);
        emit.brush(event2, mode.name);
      }
    }
    function ended(event2) {
      nopropagation2(event2);
      if (event2.touches) {
        if (event2.touches.length)
          return;
        if (touchending)
          clearTimeout(touchending);
        touchending = setTimeout(function() {
          touchending = null;
        }, 500);
      } else {
        yesdrag(event2.view, moving);
        view.on("keydown.brush keyup.brush mousemove.brush mouseup.brush", null);
      }
      group2.attr("pointer-events", "all");
      overlay.attr("cursor", cursors.overlay);
      if (state.selection)
        selection2 = state.selection;
      if (empty3(selection2))
        state.selection = null, redraw.call(that);
      emit.end(event2, mode.name);
    }
    function keydowned(event2) {
      switch (event2.keyCode) {
        case 16: {
          shifting = signX && signY;
          break;
        }
        case 18: {
          if (mode === MODE_HANDLE) {
            if (signX)
              e0 = e1 - dx * signX, w0 = w1 + dx * signX;
            if (signY)
              s0 = s1 - dy * signY, n0 = n1 + dy * signY;
            mode = MODE_CENTER;
            move();
          }
          break;
        }
        case 32: {
          if (mode === MODE_HANDLE || mode === MODE_CENTER) {
            if (signX < 0)
              e0 = e1 - dx;
            else if (signX > 0)
              w0 = w1 - dx;
            if (signY < 0)
              s0 = s1 - dy;
            else if (signY > 0)
              n0 = n1 - dy;
            mode = MODE_SPACE;
            overlay.attr("cursor", cursors.selection);
            move();
          }
          break;
        }
        default:
          return;
      }
      noevent_default2(event2);
    }
    function keyupped(event2) {
      switch (event2.keyCode) {
        case 16: {
          if (shifting) {
            lockX = lockY = shifting = false;
            move();
          }
          break;
        }
        case 18: {
          if (mode === MODE_CENTER) {
            if (signX < 0)
              e0 = e1;
            else if (signX > 0)
              w0 = w1;
            if (signY < 0)
              s0 = s1;
            else if (signY > 0)
              n0 = n1;
            mode = MODE_HANDLE;
            move();
          }
          break;
        }
        case 32: {
          if (mode === MODE_SPACE) {
            if (event2.altKey) {
              if (signX)
                e0 = e1 - dx * signX, w0 = w1 + dx * signX;
              if (signY)
                s0 = s1 - dy * signY, n0 = n1 + dy * signY;
              mode = MODE_CENTER;
            } else {
              if (signX < 0)
                e0 = e1;
              else if (signX > 0)
                w0 = w1;
              if (signY < 0)
                s0 = s1;
              else if (signY > 0)
                n0 = n1;
              mode = MODE_HANDLE;
            }
            overlay.attr("cursor", cursors[type2]);
            move();
          }
          break;
        }
        default:
          return;
      }
      noevent_default2(event2);
    }
  }
  function touchmoved(event) {
    emitter(this, arguments).moved(event);
  }
  function touchended(event) {
    emitter(this, arguments).ended(event);
  }
  function initialize() {
    var state = this.__brush || { selection: null };
    state.extent = number2(extent.apply(this, arguments));
    state.dim = dim;
    return state;
  }
  brush2.extent = function(_) {
    return arguments.length ? (extent = typeof _ === "function" ? _ : constant_default5(number2(_)), brush2) : extent;
  };
  brush2.filter = function(_) {
    return arguments.length ? (filter3 = typeof _ === "function" ? _ : constant_default5(!!_), brush2) : filter3;
  };
  brush2.touchable = function(_) {
    return arguments.length ? (touchable = typeof _ === "function" ? _ : constant_default5(!!_), brush2) : touchable;
  };
  brush2.handleSize = function(_) {
    return arguments.length ? (handleSize = +_, brush2) : handleSize;
  };
  brush2.keyModifiers = function(_) {
    return arguments.length ? (keys = !!_, brush2) : keys;
  };
  brush2.on = function() {
    var value = listeners.on.apply(listeners, arguments);
    return value === listeners ? brush2 : value;
  };
  return brush2;
}

// node_modules/d3-chord/src/math.js
var abs2 = Math.abs;
var cos = Math.cos;
var sin = Math.sin;
var pi2 = Math.PI;
var halfPi2 = pi2 / 2;
var tau2 = pi2 * 2;
var max3 = Math.max;
var epsilon3 = 1e-12;

// node_modules/d3-chord/src/chord.js
function range(i, j) {
  return Array.from({ length: j - i }, (_, k2) => i + k2);
}
function compareValue(compare) {
  return function(a3, b) {
    return compare(
      a3.source.value + a3.target.value,
      b.source.value + b.target.value
    );
  };
}
function chord_default() {
  return chord(false, false);
}
function chordTranspose() {
  return chord(false, true);
}
function chordDirected() {
  return chord(true, false);
}
function chord(directed, transpose) {
  var padAngle = 0, sortGroups = null, sortSubgroups = null, sortChords = null;
  function chord2(matrix) {
    var n2 = matrix.length, groupSums = new Array(n2), groupIndex = range(0, n2), chords = new Array(n2 * n2), groups2 = new Array(n2), k2 = 0, dx;
    matrix = Float64Array.from({ length: n2 * n2 }, transpose ? (_, i) => matrix[i % n2][i / n2 | 0] : (_, i) => matrix[i / n2 | 0][i % n2]);
    for (let i = 0; i < n2; ++i) {
      let x4 = 0;
      for (let j = 0; j < n2; ++j)
        x4 += matrix[i * n2 + j] + directed * matrix[j * n2 + i];
      k2 += groupSums[i] = x4;
    }
    k2 = max3(0, tau2 - padAngle * n2) / k2;
    dx = k2 ? padAngle : tau2 / n2;
    {
      let x4 = 0;
      if (sortGroups)
        groupIndex.sort((a3, b) => sortGroups(groupSums[a3], groupSums[b]));
      for (const i of groupIndex) {
        const x06 = x4;
        if (directed) {
          const subgroupIndex = range(~n2 + 1, n2).filter((j) => j < 0 ? matrix[~j * n2 + i] : matrix[i * n2 + j]);
          if (sortSubgroups)
            subgroupIndex.sort((a3, b) => sortSubgroups(a3 < 0 ? -matrix[~a3 * n2 + i] : matrix[i * n2 + a3], b < 0 ? -matrix[~b * n2 + i] : matrix[i * n2 + b]));
          for (const j of subgroupIndex) {
            if (j < 0) {
              const chord3 = chords[~j * n2 + i] || (chords[~j * n2 + i] = { source: null, target: null });
              chord3.target = { index: i, startAngle: x4, endAngle: x4 += matrix[~j * n2 + i] * k2, value: matrix[~j * n2 + i] };
            } else {
              const chord3 = chords[i * n2 + j] || (chords[i * n2 + j] = { source: null, target: null });
              chord3.source = { index: i, startAngle: x4, endAngle: x4 += matrix[i * n2 + j] * k2, value: matrix[i * n2 + j] };
            }
          }
          groups2[i] = { index: i, startAngle: x06, endAngle: x4, value: groupSums[i] };
        } else {
          const subgroupIndex = range(0, n2).filter((j) => matrix[i * n2 + j] || matrix[j * n2 + i]);
          if (sortSubgroups)
            subgroupIndex.sort((a3, b) => sortSubgroups(matrix[i * n2 + a3], matrix[i * n2 + b]));
          for (const j of subgroupIndex) {
            let chord3;
            if (i < j) {
              chord3 = chords[i * n2 + j] || (chords[i * n2 + j] = { source: null, target: null });
              chord3.source = { index: i, startAngle: x4, endAngle: x4 += matrix[i * n2 + j] * k2, value: matrix[i * n2 + j] };
            } else {
              chord3 = chords[j * n2 + i] || (chords[j * n2 + i] = { source: null, target: null });
              chord3.target = { index: i, startAngle: x4, endAngle: x4 += matrix[i * n2 + j] * k2, value: matrix[i * n2 + j] };
              if (i === j)
                chord3.source = chord3.target;
            }
            if (chord3.source && chord3.target && chord3.source.value < chord3.target.value) {
              const source = chord3.source;
              chord3.source = chord3.target;
              chord3.target = source;
            }
          }
          groups2[i] = { index: i, startAngle: x06, endAngle: x4, value: groupSums[i] };
        }
        x4 += dx;
      }
    }
    chords = Object.values(chords);
    chords.groups = groups2;
    return sortChords ? chords.sort(sortChords) : chords;
  }
  chord2.padAngle = function(_) {
    return arguments.length ? (padAngle = max3(0, _), chord2) : padAngle;
  };
  chord2.sortGroups = function(_) {
    return arguments.length ? (sortGroups = _, chord2) : sortGroups;
  };
  chord2.sortSubgroups = function(_) {
    return arguments.length ? (sortSubgroups = _, chord2) : sortSubgroups;
  };
  chord2.sortChords = function(_) {
    return arguments.length ? (_ == null ? sortChords = null : (sortChords = compareValue(_))._ = _, chord2) : sortChords && sortChords._;
  };
  return chord2;
}

// node_modules/d3-path/src/path.js
var pi3 = Math.PI;
var tau3 = 2 * pi3;
var epsilon4 = 1e-6;
var tauEpsilon = tau3 - epsilon4;
function Path() {
  this._x0 = this._y0 = this._x1 = this._y1 = null;
  this._ = "";
}
function path() {
  return new Path();
}
Path.prototype = path.prototype = {
  constructor: Path,
  moveTo: function(x4, y4) {
    this._ += "M" + (this._x0 = this._x1 = +x4) + "," + (this._y0 = this._y1 = +y4);
  },
  closePath: function() {
    if (this._x1 !== null) {
      this._x1 = this._x0, this._y1 = this._y0;
      this._ += "Z";
    }
  },
  lineTo: function(x4, y4) {
    this._ += "L" + (this._x1 = +x4) + "," + (this._y1 = +y4);
  },
  quadraticCurveTo: function(x12, y12, x4, y4) {
    this._ += "Q" + +x12 + "," + +y12 + "," + (this._x1 = +x4) + "," + (this._y1 = +y4);
  },
  bezierCurveTo: function(x12, y12, x22, y22, x4, y4) {
    this._ += "C" + +x12 + "," + +y12 + "," + +x22 + "," + +y22 + "," + (this._x1 = +x4) + "," + (this._y1 = +y4);
  },
  arcTo: function(x12, y12, x22, y22, r) {
    x12 = +x12, y12 = +y12, x22 = +x22, y22 = +y22, r = +r;
    var x06 = this._x1, y06 = this._y1, x21 = x22 - x12, y21 = y22 - y12, x01 = x06 - x12, y01 = y06 - y12, l01_2 = x01 * x01 + y01 * y01;
    if (r < 0)
      throw new Error("negative radius: " + r);
    if (this._x1 === null) {
      this._ += "M" + (this._x1 = x12) + "," + (this._y1 = y12);
    } else if (!(l01_2 > epsilon4))
      ;
    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon4) || !r) {
      this._ += "L" + (this._x1 = x12) + "," + (this._y1 = y12);
    } else {
      var x20 = x22 - x06, y20 = y22 - y06, l21_2 = x21 * x21 + y21 * y21, l20_2 = x20 * x20 + y20 * y20, l21 = Math.sqrt(l21_2), l01 = Math.sqrt(l01_2), l2 = r * Math.tan((pi3 - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2), t01 = l2 / l01, t21 = l2 / l21;
      if (Math.abs(t01 - 1) > epsilon4) {
        this._ += "L" + (x12 + t01 * x01) + "," + (y12 + t01 * y01);
      }
      this._ += "A" + r + "," + r + ",0,0," + +(y01 * x20 > x01 * y20) + "," + (this._x1 = x12 + t21 * x21) + "," + (this._y1 = y12 + t21 * y21);
    }
  },
  arc: function(x4, y4, r, a0, a1, ccw) {
    x4 = +x4, y4 = +y4, r = +r, ccw = !!ccw;
    var dx = r * Math.cos(a0), dy = r * Math.sin(a0), x06 = x4 + dx, y06 = y4 + dy, cw = 1 ^ ccw, da = ccw ? a0 - a1 : a1 - a0;
    if (r < 0)
      throw new Error("negative radius: " + r);
    if (this._x1 === null) {
      this._ += "M" + x06 + "," + y06;
    } else if (Math.abs(this._x1 - x06) > epsilon4 || Math.abs(this._y1 - y06) > epsilon4) {
      this._ += "L" + x06 + "," + y06;
    }
    if (!r)
      return;
    if (da < 0)
      da = da % tau3 + tau3;
    if (da > tauEpsilon) {
      this._ += "A" + r + "," + r + ",0,1," + cw + "," + (x4 - dx) + "," + (y4 - dy) + "A" + r + "," + r + ",0,1," + cw + "," + (this._x1 = x06) + "," + (this._y1 = y06);
    } else if (da > epsilon4) {
      this._ += "A" + r + "," + r + ",0," + +(da >= pi3) + "," + cw + "," + (this._x1 = x4 + r * Math.cos(a1)) + "," + (this._y1 = y4 + r * Math.sin(a1));
    }
  },
  rect: function(x4, y4, w, h) {
    this._ += "M" + (this._x0 = this._x1 = +x4) + "," + (this._y0 = this._y1 = +y4) + "h" + +w + "v" + +h + "h" + -w + "Z";
  },
  toString: function() {
    return this._;
  }
};
var path_default = path;

// node_modules/d3-chord/src/array.js
var slice3 = Array.prototype.slice;

// node_modules/d3-chord/src/constant.js
function constant_default6(x4) {
  return function() {
    return x4;
  };
}

// node_modules/d3-chord/src/ribbon.js
function defaultSource(d) {
  return d.source;
}
function defaultTarget(d) {
  return d.target;
}
function defaultRadius(d) {
  return d.radius;
}
function defaultStartAngle(d) {
  return d.startAngle;
}
function defaultEndAngle(d) {
  return d.endAngle;
}
function defaultPadAngle() {
  return 0;
}
function defaultArrowheadRadius() {
  return 10;
}
function ribbon(headRadius) {
  var source = defaultSource, target = defaultTarget, sourceRadius = defaultRadius, targetRadius = defaultRadius, startAngle = defaultStartAngle, endAngle = defaultEndAngle, padAngle = defaultPadAngle, context = null;
  function ribbon2() {
    var buffer, s3 = source.apply(this, arguments), t = target.apply(this, arguments), ap = padAngle.apply(this, arguments) / 2, argv = slice3.call(arguments), sr = +sourceRadius.apply(this, (argv[0] = s3, argv)), sa0 = startAngle.apply(this, argv) - halfPi2, sa1 = endAngle.apply(this, argv) - halfPi2, tr = +targetRadius.apply(this, (argv[0] = t, argv)), ta0 = startAngle.apply(this, argv) - halfPi2, ta1 = endAngle.apply(this, argv) - halfPi2;
    if (!context)
      context = buffer = path_default();
    if (ap > epsilon3) {
      if (abs2(sa1 - sa0) > ap * 2 + epsilon3)
        sa1 > sa0 ? (sa0 += ap, sa1 -= ap) : (sa0 -= ap, sa1 += ap);
      else
        sa0 = sa1 = (sa0 + sa1) / 2;
      if (abs2(ta1 - ta0) > ap * 2 + epsilon3)
        ta1 > ta0 ? (ta0 += ap, ta1 -= ap) : (ta0 -= ap, ta1 += ap);
      else
        ta0 = ta1 = (ta0 + ta1) / 2;
    }
    context.moveTo(sr * cos(sa0), sr * sin(sa0));
    context.arc(0, 0, sr, sa0, sa1);
    if (sa0 !== ta0 || sa1 !== ta1) {
      if (headRadius) {
        var hr = +headRadius.apply(this, arguments), tr2 = tr - hr, ta2 = (ta0 + ta1) / 2;
        context.quadraticCurveTo(0, 0, tr2 * cos(ta0), tr2 * sin(ta0));
        context.lineTo(tr * cos(ta2), tr * sin(ta2));
        context.lineTo(tr2 * cos(ta1), tr2 * sin(ta1));
      } else {
        context.quadraticCurveTo(0, 0, tr * cos(ta0), tr * sin(ta0));
        context.arc(0, 0, tr, ta0, ta1);
      }
    }
    context.quadraticCurveTo(0, 0, sr * cos(sa0), sr * sin(sa0));
    context.closePath();
    if (buffer)
      return context = null, buffer + "" || null;
  }
  if (headRadius)
    ribbon2.headRadius = function(_) {
      return arguments.length ? (headRadius = typeof _ === "function" ? _ : constant_default6(+_), ribbon2) : headRadius;
    };
  ribbon2.radius = function(_) {
    return arguments.length ? (sourceRadius = targetRadius = typeof _ === "function" ? _ : constant_default6(+_), ribbon2) : sourceRadius;
  };
  ribbon2.sourceRadius = function(_) {
    return arguments.length ? (sourceRadius = typeof _ === "function" ? _ : constant_default6(+_), ribbon2) : sourceRadius;
  };
  ribbon2.targetRadius = function(_) {
    return arguments.length ? (targetRadius = typeof _ === "function" ? _ : constant_default6(+_), ribbon2) : targetRadius;
  };
  ribbon2.startAngle = function(_) {
    return arguments.length ? (startAngle = typeof _ === "function" ? _ : constant_default6(+_), ribbon2) : startAngle;
  };
  ribbon2.endAngle = function(_) {
    return arguments.length ? (endAngle = typeof _ === "function" ? _ : constant_default6(+_), ribbon2) : endAngle;
  };
  ribbon2.padAngle = function(_) {
    return arguments.length ? (padAngle = typeof _ === "function" ? _ : constant_default6(+_), ribbon2) : padAngle;
  };
  ribbon2.source = function(_) {
    return arguments.length ? (source = _, ribbon2) : source;
  };
  ribbon2.target = function(_) {
    return arguments.length ? (target = _, ribbon2) : target;
  };
  ribbon2.context = function(_) {
    return arguments.length ? (context = _ == null ? null : _, ribbon2) : context;
  };
  return ribbon2;
}
function ribbon_default() {
  return ribbon();
}
function ribbonArrow() {
  return ribbon(defaultArrowheadRadius);
}

// node_modules/d3-contour/src/array.js
var array2 = Array.prototype;
var slice4 = array2.slice;

// node_modules/d3-contour/src/ascending.js
function ascending_default2(a3, b) {
  return a3 - b;
}

// node_modules/d3-contour/src/area.js
function area_default(ring) {
  var i = 0, n2 = ring.length, area = ring[n2 - 1][1] * ring[0][0] - ring[n2 - 1][0] * ring[0][1];
  while (++i < n2)
    area += ring[i - 1][1] * ring[i][0] - ring[i - 1][0] * ring[i][1];
  return area;
}

// node_modules/d3-contour/src/constant.js
var constant_default7 = (x4) => () => x4;

// node_modules/d3-contour/src/contains.js
function contains_default(ring, hole) {
  var i = -1, n2 = hole.length, c5;
  while (++i < n2)
    if (c5 = ringContains(ring, hole[i]))
      return c5;
  return 0;
}
function ringContains(ring, point6) {
  var x4 = point6[0], y4 = point6[1], contains = -1;
  for (var i = 0, n2 = ring.length, j = n2 - 1; i < n2; j = i++) {
    var pi6 = ring[i], xi = pi6[0], yi = pi6[1], pj = ring[j], xj = pj[0], yj = pj[1];
    if (segmentContains(pi6, pj, point6))
      return 0;
    if (yi > y4 !== yj > y4 && x4 < (xj - xi) * (y4 - yi) / (yj - yi) + xi)
      contains = -contains;
  }
  return contains;
}
function segmentContains(a3, b, c5) {
  var i;
  return collinear(a3, b, c5) && within(a3[i = +(a3[0] === b[0])], c5[i], b[i]);
}
function collinear(a3, b, c5) {
  return (b[0] - a3[0]) * (c5[1] - a3[1]) === (c5[0] - a3[0]) * (b[1] - a3[1]);
}
function within(p, q, r) {
  return p <= q && q <= r || r <= q && q <= p;
}

// node_modules/d3-contour/src/noop.js
function noop_default() {
}

// node_modules/d3-contour/src/contours.js
var cases = [
  [],
  [[[1, 1.5], [0.5, 1]]],
  [[[1.5, 1], [1, 1.5]]],
  [[[1.5, 1], [0.5, 1]]],
  [[[1, 0.5], [1.5, 1]]],
  [[[1, 1.5], [0.5, 1]], [[1, 0.5], [1.5, 1]]],
  [[[1, 0.5], [1, 1.5]]],
  [[[1, 0.5], [0.5, 1]]],
  [[[0.5, 1], [1, 0.5]]],
  [[[1, 1.5], [1, 0.5]]],
  [[[0.5, 1], [1, 0.5]], [[1.5, 1], [1, 1.5]]],
  [[[1.5, 1], [1, 0.5]]],
  [[[0.5, 1], [1.5, 1]]],
  [[[1, 1.5], [1.5, 1]]],
  [[[0.5, 1], [1, 1.5]]],
  []
];
function contours_default() {
  var dx = 1, dy = 1, threshold2 = sturges_default, smooth = smoothLinear;
  function contours(values) {
    var tz = threshold2(values);
    if (!Array.isArray(tz)) {
      var domain = extent_default(values), start2 = domain[0], stop = domain[1];
      tz = tickStep(start2, stop, tz);
      tz = range_default(Math.floor(start2 / tz) * tz, Math.floor(stop / tz) * tz, tz);
    } else {
      tz = tz.slice().sort(ascending_default2);
    }
    return tz.map(function(value) {
      return contour(values, value);
    });
  }
  function contour(values, value) {
    var polygons = [], holes = [];
    isorings(values, value, function(ring) {
      smooth(ring, values, value);
      if (area_default(ring) > 0)
        polygons.push([ring]);
      else
        holes.push(ring);
    });
    holes.forEach(function(hole) {
      for (var i = 0, n2 = polygons.length, polygon; i < n2; ++i) {
        if (contains_default((polygon = polygons[i])[0], hole) !== -1) {
          polygon.push(hole);
          return;
        }
      }
    });
    return {
      type: "MultiPolygon",
      value,
      coordinates: polygons
    };
  }
  function isorings(values, value, callback) {
    var fragmentByStart = new Array(), fragmentByEnd = new Array(), x4, y4, t03, t13, t22, t32;
    x4 = y4 = -1;
    t13 = values[0] >= value;
    cases[t13 << 1].forEach(stitch);
    while (++x4 < dx - 1) {
      t03 = t13, t13 = values[x4 + 1] >= value;
      cases[t03 | t13 << 1].forEach(stitch);
    }
    cases[t13 << 0].forEach(stitch);
    while (++y4 < dy - 1) {
      x4 = -1;
      t13 = values[y4 * dx + dx] >= value;
      t22 = values[y4 * dx] >= value;
      cases[t13 << 1 | t22 << 2].forEach(stitch);
      while (++x4 < dx - 1) {
        t03 = t13, t13 = values[y4 * dx + dx + x4 + 1] >= value;
        t32 = t22, t22 = values[y4 * dx + x4 + 1] >= value;
        cases[t03 | t13 << 1 | t22 << 2 | t32 << 3].forEach(stitch);
      }
      cases[t13 | t22 << 3].forEach(stitch);
    }
    x4 = -1;
    t22 = values[y4 * dx] >= value;
    cases[t22 << 2].forEach(stitch);
    while (++x4 < dx - 1) {
      t32 = t22, t22 = values[y4 * dx + x4 + 1] >= value;
      cases[t22 << 2 | t32 << 3].forEach(stitch);
    }
    cases[t22 << 3].forEach(stitch);
    function stitch(line) {
      var start2 = [line[0][0] + x4, line[0][1] + y4], end = [line[1][0] + x4, line[1][1] + y4], startIndex = index3(start2), endIndex = index3(end), f, g;
      if (f = fragmentByEnd[startIndex]) {
        if (g = fragmentByStart[endIndex]) {
          delete fragmentByEnd[f.end];
          delete fragmentByStart[g.start];
          if (f === g) {
            f.ring.push(end);
            callback(f.ring);
          } else {
            fragmentByStart[f.start] = fragmentByEnd[g.end] = { start: f.start, end: g.end, ring: f.ring.concat(g.ring) };
          }
        } else {
          delete fragmentByEnd[f.end];
          f.ring.push(end);
          fragmentByEnd[f.end = endIndex] = f;
        }
      } else if (f = fragmentByStart[endIndex]) {
        if (g = fragmentByEnd[startIndex]) {
          delete fragmentByStart[f.start];
          delete fragmentByEnd[g.end];
          if (f === g) {
            f.ring.push(end);
            callback(f.ring);
          } else {
            fragmentByStart[g.start] = fragmentByEnd[f.end] = { start: g.start, end: f.end, ring: g.ring.concat(f.ring) };
          }
        } else {
          delete fragmentByStart[f.start];
          f.ring.unshift(start2);
          fragmentByStart[f.start = startIndex] = f;
        }
      } else {
        fragmentByStart[startIndex] = fragmentByEnd[endIndex] = { start: startIndex, end: endIndex, ring: [start2, end] };
      }
    }
  }
  function index3(point6) {
    return point6[0] * 2 + point6[1] * (dx + 1) * 4;
  }
  function smoothLinear(ring, values, value) {
    ring.forEach(function(point6) {
      var x4 = point6[0], y4 = point6[1], xt = x4 | 0, yt = y4 | 0, v0, v1 = values[yt * dx + xt];
      if (x4 > 0 && x4 < dx && xt === x4) {
        v0 = values[yt * dx + xt - 1];
        point6[0] = x4 + (value - v0) / (v1 - v0) - 0.5;
      }
      if (y4 > 0 && y4 < dy && yt === y4) {
        v0 = values[(yt - 1) * dx + xt];
        point6[1] = y4 + (value - v0) / (v1 - v0) - 0.5;
      }
    });
  }
  contours.contour = contour;
  contours.size = function(_) {
    if (!arguments.length)
      return [dx, dy];
    var _0 = Math.floor(_[0]), _1 = Math.floor(_[1]);
    if (!(_0 >= 0 && _1 >= 0))
      throw new Error("invalid size");
    return dx = _0, dy = _1, contours;
  };
  contours.thresholds = function(_) {
    return arguments.length ? (threshold2 = typeof _ === "function" ? _ : Array.isArray(_) ? constant_default7(slice4.call(_)) : constant_default7(_), contours) : threshold2;
  };
  contours.smooth = function(_) {
    return arguments.length ? (smooth = _ ? smoothLinear : noop_default, contours) : smooth === smoothLinear;
  };
  return contours;
}

// node_modules/d3-contour/src/blur.js
function blurX(source, target, r) {
  var n2 = source.width, m2 = source.height, w = (r << 1) + 1;
  for (var j = 0; j < m2; ++j) {
    for (var i = 0, sr = 0; i < n2 + r; ++i) {
      if (i < n2) {
        sr += source.data[i + j * n2];
      }
      if (i >= r) {
        if (i >= w) {
          sr -= source.data[i - w + j * n2];
        }
        target.data[i - r + j * n2] = sr / Math.min(i + 1, n2 - 1 + w - i, w);
      }
    }
  }
}
function blurY(source, target, r) {
  var n2 = source.width, m2 = source.height, w = (r << 1) + 1;
  for (var i = 0; i < n2; ++i) {
    for (var j = 0, sr = 0; j < m2 + r; ++j) {
      if (j < m2) {
        sr += source.data[i + j * n2];
      }
      if (j >= r) {
        if (j >= w) {
          sr -= source.data[i + (j - w) * n2];
        }
        target.data[i + (j - r) * n2] = sr / Math.min(j + 1, m2 - 1 + w - j, w);
      }
    }
  }
}

// node_modules/d3-contour/src/density.js
function defaultX(d) {
  return d[0];
}
function defaultY(d) {
  return d[1];
}
function defaultWeight() {
  return 1;
}
function density_default() {
  var x4 = defaultX, y4 = defaultY, weight = defaultWeight, dx = 960, dy = 500, r = 20, k2 = 2, o = r * 3, n2 = dx + o * 2 >> k2, m2 = dy + o * 2 >> k2, threshold2 = constant_default7(20);
  function density(data) {
    var values0 = new Float32Array(n2 * m2), values1 = new Float32Array(n2 * m2);
    data.forEach(function(d, i, data2) {
      var xi = +x4(d, i, data2) + o >> k2, yi = +y4(d, i, data2) + o >> k2, wi = +weight(d, i, data2);
      if (xi >= 0 && xi < n2 && yi >= 0 && yi < m2) {
        values0[xi + yi * n2] += wi;
      }
    });
    blurX({ width: n2, height: m2, data: values0 }, { width: n2, height: m2, data: values1 }, r >> k2);
    blurY({ width: n2, height: m2, data: values1 }, { width: n2, height: m2, data: values0 }, r >> k2);
    blurX({ width: n2, height: m2, data: values0 }, { width: n2, height: m2, data: values1 }, r >> k2);
    blurY({ width: n2, height: m2, data: values1 }, { width: n2, height: m2, data: values0 }, r >> k2);
    blurX({ width: n2, height: m2, data: values0 }, { width: n2, height: m2, data: values1 }, r >> k2);
    blurY({ width: n2, height: m2, data: values1 }, { width: n2, height: m2, data: values0 }, r >> k2);
    var tz = threshold2(values0);
    if (!Array.isArray(tz)) {
      var stop = max(values0);
      tz = tickStep(0, stop, tz);
      tz = range_default(0, Math.floor(stop / tz) * tz, tz);
      tz.shift();
    }
    return contours_default().thresholds(tz).size([n2, m2])(values0).map(transform2);
  }
  function transform2(geometry) {
    geometry.value *= Math.pow(2, -2 * k2);
    geometry.coordinates.forEach(transformPolygon);
    return geometry;
  }
  function transformPolygon(coordinates2) {
    coordinates2.forEach(transformRing);
  }
  function transformRing(coordinates2) {
    coordinates2.forEach(transformPoint);
  }
  function transformPoint(coordinates2) {
    coordinates2[0] = coordinates2[0] * Math.pow(2, k2) - o;
    coordinates2[1] = coordinates2[1] * Math.pow(2, k2) - o;
  }
  function resize() {
    o = r * 3;
    n2 = dx + o * 2 >> k2;
    m2 = dy + o * 2 >> k2;
    return density;
  }
  density.x = function(_) {
    return arguments.length ? (x4 = typeof _ === "function" ? _ : constant_default7(+_), density) : x4;
  };
  density.y = function(_) {
    return arguments.length ? (y4 = typeof _ === "function" ? _ : constant_default7(+_), density) : y4;
  };
  density.weight = function(_) {
    return arguments.length ? (weight = typeof _ === "function" ? _ : constant_default7(+_), density) : weight;
  };
  density.size = function(_) {
    if (!arguments.length)
      return [dx, dy];
    var _0 = +_[0], _1 = +_[1];
    if (!(_0 >= 0 && _1 >= 0))
      throw new Error("invalid size");
    return dx = _0, dy = _1, resize();
  };
  density.cellSize = function(_) {
    if (!arguments.length)
      return 1 << k2;
    if (!((_ = +_) >= 1))
      throw new Error("invalid cell size");
    return k2 = Math.floor(Math.log(_) / Math.LN2), resize();
  };
  density.thresholds = function(_) {
    return arguments.length ? (threshold2 = typeof _ === "function" ? _ : Array.isArray(_) ? constant_default7(slice4.call(_)) : constant_default7(_), density) : threshold2;
  };
  density.bandwidth = function(_) {
    if (!arguments.length)
      return Math.sqrt(r * (r + 1));
    if (!((_ = +_) >= 0))
      throw new Error("invalid bandwidth");
    return r = Math.round((Math.sqrt(4 * _ * _ + 1) - 1) / 2), resize();
  };
  return density;
}

// node_modules/delaunator/index.js
var EPSILON = Math.pow(2, -52);
var EDGE_STACK = new Uint32Array(512);
var Delaunator = class {
  static from(points, getX = defaultGetX, getY = defaultGetY) {
    const n2 = points.length;
    const coords = new Float64Array(n2 * 2);
    for (let i = 0; i < n2; i++) {
      const p = points[i];
      coords[2 * i] = getX(p);
      coords[2 * i + 1] = getY(p);
    }
    return new Delaunator(coords);
  }
  constructor(coords) {
    const n2 = coords.length >> 1;
    if (n2 > 0 && typeof coords[0] !== "number")
      throw new Error("Expected coords to contain numbers.");
    this.coords = coords;
    const maxTriangles = Math.max(2 * n2 - 5, 0);
    this._triangles = new Uint32Array(maxTriangles * 3);
    this._halfedges = new Int32Array(maxTriangles * 3);
    this._hashSize = Math.ceil(Math.sqrt(n2));
    this._hullPrev = new Uint32Array(n2);
    this._hullNext = new Uint32Array(n2);
    this._hullTri = new Uint32Array(n2);
    this._hullHash = new Int32Array(this._hashSize).fill(-1);
    this._ids = new Uint32Array(n2);
    this._dists = new Float64Array(n2);
    this.update();
  }
  update() {
    const { coords, _hullPrev: hullPrev, _hullNext: hullNext, _hullTri: hullTri, _hullHash: hullHash } = this;
    const n2 = coords.length >> 1;
    let minX = Infinity;
    let minY = Infinity;
    let maxX = -Infinity;
    let maxY2 = -Infinity;
    for (let i = 0; i < n2; i++) {
      const x4 = coords[2 * i];
      const y4 = coords[2 * i + 1];
      if (x4 < minX)
        minX = x4;
      if (y4 < minY)
        minY = y4;
      if (x4 > maxX)
        maxX = x4;
      if (y4 > maxY2)
        maxY2 = y4;
      this._ids[i] = i;
    }
    const cx = (minX + maxX) / 2;
    const cy = (minY + maxY2) / 2;
    let minDist = Infinity;
    let i0, i1, i2;
    for (let i = 0; i < n2; i++) {
      const d = dist(cx, cy, coords[2 * i], coords[2 * i + 1]);
      if (d < minDist) {
        i0 = i;
        minDist = d;
      }
    }
    const i0x = coords[2 * i0];
    const i0y = coords[2 * i0 + 1];
    minDist = Infinity;
    for (let i = 0; i < n2; i++) {
      if (i === i0)
        continue;
      const d = dist(i0x, i0y, coords[2 * i], coords[2 * i + 1]);
      if (d < minDist && d > 0) {
        i1 = i;
        minDist = d;
      }
    }
    let i1x = coords[2 * i1];
    let i1y = coords[2 * i1 + 1];
    let minRadius = Infinity;
    for (let i = 0; i < n2; i++) {
      if (i === i0 || i === i1)
        continue;
      const r = circumradius(i0x, i0y, i1x, i1y, coords[2 * i], coords[2 * i + 1]);
      if (r < minRadius) {
        i2 = i;
        minRadius = r;
      }
    }
    let i2x = coords[2 * i2];
    let i2y = coords[2 * i2 + 1];
    if (minRadius === Infinity) {
      for (let i = 0; i < n2; i++) {
        this._dists[i] = coords[2 * i] - coords[0] || coords[2 * i + 1] - coords[1];
      }
      quicksort(this._ids, this._dists, 0, n2 - 1);
      const hull = new Uint32Array(n2);
      let j = 0;
      for (let i = 0, d0 = -Infinity; i < n2; i++) {
        const id2 = this._ids[i];
        if (this._dists[id2] > d0) {
          hull[j++] = id2;
          d0 = this._dists[id2];
        }
      }
      this.hull = hull.subarray(0, j);
      this.triangles = new Uint32Array(0);
      this.halfedges = new Uint32Array(0);
      return;
    }
    if (orient(i0x, i0y, i1x, i1y, i2x, i2y)) {
      const i = i1;
      const x4 = i1x;
      const y4 = i1y;
      i1 = i2;
      i1x = i2x;
      i1y = i2y;
      i2 = i;
      i2x = x4;
      i2y = y4;
    }
    const center2 = circumcenter(i0x, i0y, i1x, i1y, i2x, i2y);
    this._cx = center2.x;
    this._cy = center2.y;
    for (let i = 0; i < n2; i++) {
      this._dists[i] = dist(coords[2 * i], coords[2 * i + 1], center2.x, center2.y);
    }
    quicksort(this._ids, this._dists, 0, n2 - 1);
    this._hullStart = i0;
    let hullSize = 3;
    hullNext[i0] = hullPrev[i2] = i1;
    hullNext[i1] = hullPrev[i0] = i2;
    hullNext[i2] = hullPrev[i1] = i0;
    hullTri[i0] = 0;
    hullTri[i1] = 1;
    hullTri[i2] = 2;
    hullHash.fill(-1);
    hullHash[this._hashKey(i0x, i0y)] = i0;
    hullHash[this._hashKey(i1x, i1y)] = i1;
    hullHash[this._hashKey(i2x, i2y)] = i2;
    this.trianglesLen = 0;
    this._addTriangle(i0, i1, i2, -1, -1, -1);
    for (let k2 = 0, xp, yp; k2 < this._ids.length; k2++) {
      const i = this._ids[k2];
      const x4 = coords[2 * i];
      const y4 = coords[2 * i + 1];
      if (k2 > 0 && Math.abs(x4 - xp) <= EPSILON && Math.abs(y4 - yp) <= EPSILON)
        continue;
      xp = x4;
      yp = y4;
      if (i === i0 || i === i1 || i === i2)
        continue;
      let start2 = 0;
      for (let j = 0, key = this._hashKey(x4, y4); j < this._hashSize; j++) {
        start2 = hullHash[(key + j) % this._hashSize];
        if (start2 !== -1 && start2 !== hullNext[start2])
          break;
      }
      start2 = hullPrev[start2];
      let e = start2, q;
      while (q = hullNext[e], !orient(x4, y4, coords[2 * e], coords[2 * e + 1], coords[2 * q], coords[2 * q + 1])) {
        e = q;
        if (e === start2) {
          e = -1;
          break;
        }
      }
      if (e === -1)
        continue;
      let t = this._addTriangle(e, i, hullNext[e], -1, -1, hullTri[e]);
      hullTri[i] = this._legalize(t + 2);
      hullTri[e] = t;
      hullSize++;
      let n3 = hullNext[e];
      while (q = hullNext[n3], orient(x4, y4, coords[2 * n3], coords[2 * n3 + 1], coords[2 * q], coords[2 * q + 1])) {
        t = this._addTriangle(n3, i, q, hullTri[i], -1, hullTri[n3]);
        hullTri[i] = this._legalize(t + 2);
        hullNext[n3] = n3;
        hullSize--;
        n3 = q;
      }
      if (e === start2) {
        while (q = hullPrev[e], orient(x4, y4, coords[2 * q], coords[2 * q + 1], coords[2 * e], coords[2 * e + 1])) {
          t = this._addTriangle(q, i, e, -1, hullTri[e], hullTri[q]);
          this._legalize(t + 2);
          hullTri[q] = t;
          hullNext[e] = e;
          hullSize--;
          e = q;
        }
      }
      this._hullStart = hullPrev[i] = e;
      hullNext[e] = hullPrev[n3] = i;
      hullNext[i] = n3;
      hullHash[this._hashKey(x4, y4)] = i;
      hullHash[this._hashKey(coords[2 * e], coords[2 * e + 1])] = e;
    }
    this.hull = new Uint32Array(hullSize);
    for (let i = 0, e = this._hullStart; i < hullSize; i++) {
      this.hull[i] = e;
      e = hullNext[e];
    }
    this.triangles = this._triangles.subarray(0, this.trianglesLen);
    this.halfedges = this._halfedges.subarray(0, this.trianglesLen);
  }
  _hashKey(x4, y4) {
    return Math.floor(pseudoAngle(x4 - this._cx, y4 - this._cy) * this._hashSize) % this._hashSize;
  }
  _legalize(a3) {
    const { _triangles: triangles, _halfedges: halfedges, coords } = this;
    let i = 0;
    let ar = 0;
    while (true) {
      const b = halfedges[a3];
      const a0 = a3 - a3 % 3;
      ar = a0 + (a3 + 2) % 3;
      if (b === -1) {
        if (i === 0)
          break;
        a3 = EDGE_STACK[--i];
        continue;
      }
      const b02 = b - b % 3;
      const al = a0 + (a3 + 1) % 3;
      const bl = b02 + (b + 2) % 3;
      const p02 = triangles[ar];
      const pr = triangles[a3];
      const pl = triangles[al];
      const p1 = triangles[bl];
      const illegal = inCircle(
        coords[2 * p02],
        coords[2 * p02 + 1],
        coords[2 * pr],
        coords[2 * pr + 1],
        coords[2 * pl],
        coords[2 * pl + 1],
        coords[2 * p1],
        coords[2 * p1 + 1]
      );
      if (illegal) {
        triangles[a3] = p1;
        triangles[b] = p02;
        const hbl = halfedges[bl];
        if (hbl === -1) {
          let e = this._hullStart;
          do {
            if (this._hullTri[e] === bl) {
              this._hullTri[e] = a3;
              break;
            }
            e = this._hullPrev[e];
          } while (e !== this._hullStart);
        }
        this._link(a3, hbl);
        this._link(b, halfedges[ar]);
        this._link(ar, bl);
        const br = b02 + (b + 1) % 3;
        if (i < EDGE_STACK.length) {
          EDGE_STACK[i++] = br;
        }
      } else {
        if (i === 0)
          break;
        a3 = EDGE_STACK[--i];
      }
    }
    return ar;
  }
  _link(a3, b) {
    this._halfedges[a3] = b;
    if (b !== -1)
      this._halfedges[b] = a3;
  }
  _addTriangle(i0, i1, i2, a3, b, c5) {
    const t = this.trianglesLen;
    this._triangles[t] = i0;
    this._triangles[t + 1] = i1;
    this._triangles[t + 2] = i2;
    this._link(t, a3);
    this._link(t + 1, b);
    this._link(t + 2, c5);
    this.trianglesLen += 3;
    return t;
  }
};
function pseudoAngle(dx, dy) {
  const p = dx / (Math.abs(dx) + Math.abs(dy));
  return (dy > 0 ? 3 - p : 1 + p) / 4;
}
function dist(ax, ay, bx, by) {
  const dx = ax - bx;
  const dy = ay - by;
  return dx * dx + dy * dy;
}
function orientIfSure(px, py, rx, ry, qx, qy) {
  const l2 = (ry - py) * (qx - px);
  const r = (rx - px) * (qy - py);
  return Math.abs(l2 - r) >= 33306690738754716e-32 * Math.abs(l2 + r) ? l2 - r : 0;
}
function orient(rx, ry, qx, qy, px, py) {
  const sign3 = orientIfSure(px, py, rx, ry, qx, qy) || orientIfSure(rx, ry, qx, qy, px, py) || orientIfSure(qx, qy, px, py, rx, ry);
  return sign3 < 0;
}
function inCircle(ax, ay, bx, by, cx, cy, px, py) {
  const dx = ax - px;
  const dy = ay - py;
  const ex = bx - px;
  const ey = by - py;
  const fx = cx - px;
  const fy = cy - py;
  const ap = dx * dx + dy * dy;
  const bp = ex * ex + ey * ey;
  const cp = fx * fx + fy * fy;
  return dx * (ey * cp - bp * fy) - dy * (ex * cp - bp * fx) + ap * (ex * fy - ey * fx) < 0;
}
function circumradius(ax, ay, bx, by, cx, cy) {
  const dx = bx - ax;
  const dy = by - ay;
  const ex = cx - ax;
  const ey = cy - ay;
  const bl = dx * dx + dy * dy;
  const cl = ex * ex + ey * ey;
  const d = 0.5 / (dx * ey - dy * ex);
  const x4 = (ey * bl - dy * cl) * d;
  const y4 = (dx * cl - ex * bl) * d;
  return x4 * x4 + y4 * y4;
}
function circumcenter(ax, ay, bx, by, cx, cy) {
  const dx = bx - ax;
  const dy = by - ay;
  const ex = cx - ax;
  const ey = cy - ay;
  const bl = dx * dx + dy * dy;
  const cl = ex * ex + ey * ey;
  const d = 0.5 / (dx * ey - dy * ex);
  const x4 = ax + (ey * bl - dy * cl) * d;
  const y4 = ay + (dx * cl - ex * bl) * d;
  return { x: x4, y: y4 };
}
function quicksort(ids, dists, left2, right2) {
  if (right2 - left2 <= 20) {
    for (let i = left2 + 1; i <= right2; i++) {
      const temp = ids[i];
      const tempDist = dists[temp];
      let j = i - 1;
      while (j >= left2 && dists[ids[j]] > tempDist)
        ids[j + 1] = ids[j--];
      ids[j + 1] = temp;
    }
  } else {
    const median = left2 + right2 >> 1;
    let i = left2 + 1;
    let j = right2;
    swap2(ids, median, i);
    if (dists[ids[left2]] > dists[ids[right2]])
      swap2(ids, left2, right2);
    if (dists[ids[i]] > dists[ids[right2]])
      swap2(ids, i, right2);
    if (dists[ids[left2]] > dists[ids[i]])
      swap2(ids, left2, i);
    const temp = ids[i];
    const tempDist = dists[temp];
    while (true) {
      do
        i++;
      while (dists[ids[i]] < tempDist);
      do
        j--;
      while (dists[ids[j]] > tempDist);
      if (j < i)
        break;
      swap2(ids, i, j);
    }
    ids[left2 + 1] = ids[j];
    ids[j] = temp;
    if (right2 - i + 1 >= j - left2) {
      quicksort(ids, dists, i, right2);
      quicksort(ids, dists, left2, j - 1);
    } else {
      quicksort(ids, dists, left2, j - 1);
      quicksort(ids, dists, i, right2);
    }
  }
}
function swap2(arr, i, j) {
  const tmp = arr[i];
  arr[i] = arr[j];
  arr[j] = tmp;
}
function defaultGetX(p) {
  return p[0];
}
function defaultGetY(p) {
  return p[1];
}

// node_modules/d3-delaunay/src/path.js
var epsilon5 = 1e-6;
var Path2 = class {
  constructor() {
    this._x0 = this._y0 = this._x1 = this._y1 = null;
    this._ = "";
  }
  moveTo(x4, y4) {
    this._ += `M${this._x0 = this._x1 = +x4},${this._y0 = this._y1 = +y4}`;
  }
  closePath() {
    if (this._x1 !== null) {
      this._x1 = this._x0, this._y1 = this._y0;
      this._ += "Z";
    }
  }
  lineTo(x4, y4) {
    this._ += `L${this._x1 = +x4},${this._y1 = +y4}`;
  }
  arc(x4, y4, r) {
    x4 = +x4, y4 = +y4, r = +r;
    const x06 = x4 + r;
    const y06 = y4;
    if (r < 0)
      throw new Error("negative radius");
    if (this._x1 === null)
      this._ += `M${x06},${y06}`;
    else if (Math.abs(this._x1 - x06) > epsilon5 || Math.abs(this._y1 - y06) > epsilon5)
      this._ += "L" + x06 + "," + y06;
    if (!r)
      return;
    this._ += `A${r},${r},0,1,1,${x4 - r},${y4}A${r},${r},0,1,1,${this._x1 = x06},${this._y1 = y06}`;
  }
  rect(x4, y4, w, h) {
    this._ += `M${this._x0 = this._x1 = +x4},${this._y0 = this._y1 = +y4}h${+w}v${+h}h${-w}Z`;
  }
  value() {
    return this._ || null;
  }
};

// node_modules/d3-delaunay/src/polygon.js
var Polygon = class {
  constructor() {
    this._ = [];
  }
  moveTo(x4, y4) {
    this._.push([x4, y4]);
  }
  closePath() {
    this._.push(this._[0].slice());
  }
  lineTo(x4, y4) {
    this._.push([x4, y4]);
  }
  value() {
    return this._.length ? this._ : null;
  }
};

// node_modules/d3-delaunay/src/voronoi.js
var Voronoi = class {
  constructor(delaunay, [xmin, ymin, xmax, ymax] = [0, 0, 960, 500]) {
    if (!((xmax = +xmax) >= (xmin = +xmin)) || !((ymax = +ymax) >= (ymin = +ymin)))
      throw new Error("invalid bounds");
    this.delaunay = delaunay;
    this._circumcenters = new Float64Array(delaunay.points.length * 2);
    this.vectors = new Float64Array(delaunay.points.length * 2);
    this.xmax = xmax, this.xmin = xmin;
    this.ymax = ymax, this.ymin = ymin;
    this._init();
  }
  update() {
    this.delaunay.update();
    this._init();
    return this;
  }
  _init() {
    const { delaunay: { points, hull, triangles }, vectors } = this;
    const circumcenters = this.circumcenters = this._circumcenters.subarray(0, triangles.length / 3 * 2);
    for (let i = 0, j = 0, n2 = triangles.length, x4, y4; i < n2; i += 3, j += 2) {
      const t13 = triangles[i] * 2;
      const t22 = triangles[i + 1] * 2;
      const t32 = triangles[i + 2] * 2;
      const x13 = points[t13];
      const y13 = points[t13 + 1];
      const x22 = points[t22];
      const y22 = points[t22 + 1];
      const x32 = points[t32];
      const y32 = points[t32 + 1];
      const dx = x22 - x13;
      const dy = y22 - y13;
      const ex = x32 - x13;
      const ey = y32 - y13;
      const bl = dx * dx + dy * dy;
      const cl = ex * ex + ey * ey;
      const ab = (dx * ey - dy * ex) * 2;
      if (!ab) {
        x4 = (x13 + x32) / 2 - 1e8 * ey;
        y4 = (y13 + y32) / 2 + 1e8 * ex;
      } else if (Math.abs(ab) < 1e-8) {
        x4 = (x13 + x32) / 2;
        y4 = (y13 + y32) / 2;
      } else {
        const d = 1 / ab;
        x4 = x13 + (ey * bl - dy * cl) * d;
        y4 = y13 + (dx * cl - ex * bl) * d;
      }
      circumcenters[j] = x4;
      circumcenters[j + 1] = y4;
    }
    let h = hull[hull.length - 1];
    let p02, p1 = h * 4;
    let x06, x12 = points[2 * h];
    let y06, y12 = points[2 * h + 1];
    vectors.fill(0);
    for (let i = 0; i < hull.length; ++i) {
      h = hull[i];
      p02 = p1, x06 = x12, y06 = y12;
      p1 = h * 4, x12 = points[2 * h], y12 = points[2 * h + 1];
      vectors[p02 + 2] = vectors[p1] = y06 - y12;
      vectors[p02 + 3] = vectors[p1 + 1] = x12 - x06;
    }
  }
  render(context) {
    const buffer = context == null ? context = new Path2() : void 0;
    const { delaunay: { halfedges, inedges, hull }, circumcenters, vectors } = this;
    if (hull.length <= 1)
      return null;
    for (let i = 0, n2 = halfedges.length; i < n2; ++i) {
      const j = halfedges[i];
      if (j < i)
        continue;
      const ti = Math.floor(i / 3) * 2;
      const tj = Math.floor(j / 3) * 2;
      const xi = circumcenters[ti];
      const yi = circumcenters[ti + 1];
      const xj = circumcenters[tj];
      const yj = circumcenters[tj + 1];
      this._renderSegment(xi, yi, xj, yj, context);
    }
    let h0, h1 = hull[hull.length - 1];
    for (let i = 0; i < hull.length; ++i) {
      h0 = h1, h1 = hull[i];
      const t = Math.floor(inedges[h1] / 3) * 2;
      const x4 = circumcenters[t];
      const y4 = circumcenters[t + 1];
      const v = h0 * 4;
      const p = this._project(x4, y4, vectors[v + 2], vectors[v + 3]);
      if (p)
        this._renderSegment(x4, y4, p[0], p[1], context);
    }
    return buffer && buffer.value();
  }
  renderBounds(context) {
    const buffer = context == null ? context = new Path2() : void 0;
    context.rect(this.xmin, this.ymin, this.xmax - this.xmin, this.ymax - this.ymin);
    return buffer && buffer.value();
  }
  renderCell(i, context) {
    const buffer = context == null ? context = new Path2() : void 0;
    const points = this._clip(i);
    if (points === null || !points.length)
      return;
    context.moveTo(points[0], points[1]);
    let n2 = points.length;
    while (points[0] === points[n2 - 2] && points[1] === points[n2 - 1] && n2 > 1)
      n2 -= 2;
    for (let i2 = 2; i2 < n2; i2 += 2) {
      if (points[i2] !== points[i2 - 2] || points[i2 + 1] !== points[i2 - 1])
        context.lineTo(points[i2], points[i2 + 1]);
    }
    context.closePath();
    return buffer && buffer.value();
  }
  *cellPolygons() {
    const { delaunay: { points } } = this;
    for (let i = 0, n2 = points.length / 2; i < n2; ++i) {
      const cell = this.cellPolygon(i);
      if (cell)
        cell.index = i, yield cell;
    }
  }
  cellPolygon(i) {
    const polygon = new Polygon();
    this.renderCell(i, polygon);
    return polygon.value();
  }
  _renderSegment(x06, y06, x12, y12, context) {
    let S;
    const c0 = this._regioncode(x06, y06);
    const c1 = this._regioncode(x12, y12);
    if (c0 === 0 && c1 === 0) {
      context.moveTo(x06, y06);
      context.lineTo(x12, y12);
    } else if (S = this._clipSegment(x06, y06, x12, y12, c0, c1)) {
      context.moveTo(S[0], S[1]);
      context.lineTo(S[2], S[3]);
    }
  }
  contains(i, x4, y4) {
    if ((x4 = +x4, x4 !== x4) || (y4 = +y4, y4 !== y4))
      return false;
    return this.delaunay._step(i, x4, y4) === i;
  }
  *neighbors(i) {
    const ci = this._clip(i);
    if (ci)
      for (const j of this.delaunay.neighbors(i)) {
        const cj = this._clip(j);
        if (cj)
          loop:
            for (let ai = 0, li = ci.length; ai < li; ai += 2) {
              for (let aj = 0, lj = cj.length; aj < lj; aj += 2) {
                if (ci[ai] == cj[aj] && ci[ai + 1] == cj[aj + 1] && ci[(ai + 2) % li] == cj[(aj + lj - 2) % lj] && ci[(ai + 3) % li] == cj[(aj + lj - 1) % lj]) {
                  yield j;
                  break loop;
                }
              }
            }
      }
  }
  _cell(i) {
    const { circumcenters, delaunay: { inedges, halfedges, triangles } } = this;
    const e0 = inedges[i];
    if (e0 === -1)
      return null;
    const points = [];
    let e = e0;
    do {
      const t = Math.floor(e / 3);
      points.push(circumcenters[t * 2], circumcenters[t * 2 + 1]);
      e = e % 3 === 2 ? e - 2 : e + 1;
      if (triangles[e] !== i)
        break;
      e = halfedges[e];
    } while (e !== e0 && e !== -1);
    return points;
  }
  _clip(i) {
    if (i === 0 && this.delaunay.hull.length === 1) {
      return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];
    }
    const points = this._cell(i);
    if (points === null)
      return null;
    const { vectors: V } = this;
    const v = i * 4;
    return V[v] || V[v + 1] ? this._clipInfinite(i, points, V[v], V[v + 1], V[v + 2], V[v + 3]) : this._clipFinite(i, points);
  }
  _clipFinite(i, points) {
    const n2 = points.length;
    let P = null;
    let x06, y06, x12 = points[n2 - 2], y12 = points[n2 - 1];
    let c0, c1 = this._regioncode(x12, y12);
    let e0, e1;
    for (let j = 0; j < n2; j += 2) {
      x06 = x12, y06 = y12, x12 = points[j], y12 = points[j + 1];
      c0 = c1, c1 = this._regioncode(x12, y12);
      if (c0 === 0 && c1 === 0) {
        e0 = e1, e1 = 0;
        if (P)
          P.push(x12, y12);
        else
          P = [x12, y12];
      } else {
        let S, sx0, sy0, sx1, sy1;
        if (c0 === 0) {
          if ((S = this._clipSegment(x06, y06, x12, y12, c0, c1)) === null)
            continue;
          [sx0, sy0, sx1, sy1] = S;
        } else {
          if ((S = this._clipSegment(x12, y12, x06, y06, c1, c0)) === null)
            continue;
          [sx1, sy1, sx0, sy0] = S;
          e0 = e1, e1 = this._edgecode(sx0, sy0);
          if (e0 && e1)
            this._edge(i, e0, e1, P, P.length);
          if (P)
            P.push(sx0, sy0);
          else
            P = [sx0, sy0];
        }
        e0 = e1, e1 = this._edgecode(sx1, sy1);
        if (e0 && e1)
          this._edge(i, e0, e1, P, P.length);
        if (P)
          P.push(sx1, sy1);
        else
          P = [sx1, sy1];
      }
    }
    if (P) {
      e0 = e1, e1 = this._edgecode(P[0], P[1]);
      if (e0 && e1)
        this._edge(i, e0, e1, P, P.length);
    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {
      return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];
    }
    return P;
  }
  _clipSegment(x06, y06, x12, y12, c0, c1) {
    while (true) {
      if (c0 === 0 && c1 === 0)
        return [x06, y06, x12, y12];
      if (c0 & c1)
        return null;
      let x4, y4, c5 = c0 || c1;
      if (c5 & 8)
        x4 = x06 + (x12 - x06) * (this.ymax - y06) / (y12 - y06), y4 = this.ymax;
      else if (c5 & 4)
        x4 = x06 + (x12 - x06) * (this.ymin - y06) / (y12 - y06), y4 = this.ymin;
      else if (c5 & 2)
        y4 = y06 + (y12 - y06) * (this.xmax - x06) / (x12 - x06), x4 = this.xmax;
      else
        y4 = y06 + (y12 - y06) * (this.xmin - x06) / (x12 - x06), x4 = this.xmin;
      if (c0)
        x06 = x4, y06 = y4, c0 = this._regioncode(x06, y06);
      else
        x12 = x4, y12 = y4, c1 = this._regioncode(x12, y12);
    }
  }
  _clipInfinite(i, points, vx0, vy0, vxn, vyn) {
    let P = Array.from(points), p;
    if (p = this._project(P[0], P[1], vx0, vy0))
      P.unshift(p[0], p[1]);
    if (p = this._project(P[P.length - 2], P[P.length - 1], vxn, vyn))
      P.push(p[0], p[1]);
    if (P = this._clipFinite(i, P)) {
      for (let j = 0, n2 = P.length, c0, c1 = this._edgecode(P[n2 - 2], P[n2 - 1]); j < n2; j += 2) {
        c0 = c1, c1 = this._edgecode(P[j], P[j + 1]);
        if (c0 && c1)
          j = this._edge(i, c0, c1, P, j), n2 = P.length;
      }
    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {
      P = [this.xmin, this.ymin, this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax];
    }
    return P;
  }
  _edge(i, e0, e1, P, j) {
    while (e0 !== e1) {
      let x4, y4;
      switch (e0) {
        case 5:
          e0 = 4;
          continue;
        case 4:
          e0 = 6, x4 = this.xmax, y4 = this.ymin;
          break;
        case 6:
          e0 = 2;
          continue;
        case 2:
          e0 = 10, x4 = this.xmax, y4 = this.ymax;
          break;
        case 10:
          e0 = 8;
          continue;
        case 8:
          e0 = 9, x4 = this.xmin, y4 = this.ymax;
          break;
        case 9:
          e0 = 1;
          continue;
        case 1:
          e0 = 5, x4 = this.xmin, y4 = this.ymin;
          break;
      }
      if ((P[j] !== x4 || P[j + 1] !== y4) && this.contains(i, x4, y4)) {
        P.splice(j, 0, x4, y4), j += 2;
      }
    }
    if (P.length > 4) {
      for (let i2 = 0; i2 < P.length; i2 += 2) {
        const j2 = (i2 + 2) % P.length, k2 = (i2 + 4) % P.length;
        if (P[i2] === P[j2] && P[j2] === P[k2] || P[i2 + 1] === P[j2 + 1] && P[j2 + 1] === P[k2 + 1])
          P.splice(j2, 2), i2 -= 2;
      }
    }
    return j;
  }
  _project(x06, y06, vx, vy) {
    let t = Infinity, c5, x4, y4;
    if (vy < 0) {
      if (y06 <= this.ymin)
        return null;
      if ((c5 = (this.ymin - y06) / vy) < t)
        y4 = this.ymin, x4 = x06 + (t = c5) * vx;
    } else if (vy > 0) {
      if (y06 >= this.ymax)
        return null;
      if ((c5 = (this.ymax - y06) / vy) < t)
        y4 = this.ymax, x4 = x06 + (t = c5) * vx;
    }
    if (vx > 0) {
      if (x06 >= this.xmax)
        return null;
      if ((c5 = (this.xmax - x06) / vx) < t)
        x4 = this.xmax, y4 = y06 + (t = c5) * vy;
    } else if (vx < 0) {
      if (x06 <= this.xmin)
        return null;
      if ((c5 = (this.xmin - x06) / vx) < t)
        x4 = this.xmin, y4 = y06 + (t = c5) * vy;
    }
    return [x4, y4];
  }
  _edgecode(x4, y4) {
    return (x4 === this.xmin ? 1 : x4 === this.xmax ? 2 : 0) | (y4 === this.ymin ? 4 : y4 === this.ymax ? 8 : 0);
  }
  _regioncode(x4, y4) {
    return (x4 < this.xmin ? 1 : x4 > this.xmax ? 2 : 0) | (y4 < this.ymin ? 4 : y4 > this.ymax ? 8 : 0);
  }
};

// node_modules/d3-delaunay/src/delaunay.js
var tau4 = 2 * Math.PI;
var pow = Math.pow;
function pointX(p) {
  return p[0];
}
function pointY(p) {
  return p[1];
}
function collinear2(d) {
  const { triangles, coords } = d;
  for (let i = 0; i < triangles.length; i += 3) {
    const a3 = 2 * triangles[i], b = 2 * triangles[i + 1], c5 = 2 * triangles[i + 2], cross2 = (coords[c5] - coords[a3]) * (coords[b + 1] - coords[a3 + 1]) - (coords[b] - coords[a3]) * (coords[c5 + 1] - coords[a3 + 1]);
    if (cross2 > 1e-10)
      return false;
  }
  return true;
}
function jitter(x4, y4, r) {
  return [x4 + Math.sin(x4 + y4) * r, y4 + Math.cos(x4 - y4) * r];
}
var Delaunay = class {
  static from(points, fx = pointX, fy = pointY, that) {
    return new Delaunay("length" in points ? flatArray(points, fx, fy, that) : Float64Array.from(flatIterable(points, fx, fy, that)));
  }
  constructor(points) {
    this._delaunator = new Delaunator(points);
    this.inedges = new Int32Array(points.length / 2);
    this._hullIndex = new Int32Array(points.length / 2);
    this.points = this._delaunator.coords;
    this._init();
  }
  update() {
    this._delaunator.update();
    this._init();
    return this;
  }
  _init() {
    const d = this._delaunator, points = this.points;
    if (d.hull && d.hull.length > 2 && collinear2(d)) {
      this.collinear = Int32Array.from({ length: points.length / 2 }, (_, i) => i).sort((i, j) => points[2 * i] - points[2 * j] || points[2 * i + 1] - points[2 * j + 1]);
      const e = this.collinear[0], f = this.collinear[this.collinear.length - 1], bounds = [points[2 * e], points[2 * e + 1], points[2 * f], points[2 * f + 1]], r = 1e-8 * Math.hypot(bounds[3] - bounds[1], bounds[2] - bounds[0]);
      for (let i = 0, n2 = points.length / 2; i < n2; ++i) {
        const p = jitter(points[2 * i], points[2 * i + 1], r);
        points[2 * i] = p[0];
        points[2 * i + 1] = p[1];
      }
      this._delaunator = new Delaunator(points);
    } else {
      delete this.collinear;
    }
    const halfedges = this.halfedges = this._delaunator.halfedges;
    const hull = this.hull = this._delaunator.hull;
    const triangles = this.triangles = this._delaunator.triangles;
    const inedges = this.inedges.fill(-1);
    const hullIndex = this._hullIndex.fill(-1);
    for (let e = 0, n2 = halfedges.length; e < n2; ++e) {
      const p = triangles[e % 3 === 2 ? e - 2 : e + 1];
      if (halfedges[e] === -1 || inedges[p] === -1)
        inedges[p] = e;
    }
    for (let i = 0, n2 = hull.length; i < n2; ++i) {
      hullIndex[hull[i]] = i;
    }
    if (hull.length <= 2 && hull.length > 0) {
      this.triangles = new Int32Array(3).fill(-1);
      this.halfedges = new Int32Array(3).fill(-1);
      this.triangles[0] = hull[0];
      this.triangles[1] = hull[1];
      this.triangles[2] = hull[1];
      inedges[hull[0]] = 1;
      if (hull.length === 2)
        inedges[hull[1]] = 0;
    }
  }
  voronoi(bounds) {
    return new Voronoi(this, bounds);
  }
  *neighbors(i) {
    const { inedges, hull, _hullIndex, halfedges, triangles, collinear: collinear3 } = this;
    if (collinear3) {
      const l2 = collinear3.indexOf(i);
      if (l2 > 0)
        yield collinear3[l2 - 1];
      if (l2 < collinear3.length - 1)
        yield collinear3[l2 + 1];
      return;
    }
    const e0 = inedges[i];
    if (e0 === -1)
      return;
    let e = e0, p02 = -1;
    do {
      yield p02 = triangles[e];
      e = e % 3 === 2 ? e - 2 : e + 1;
      if (triangles[e] !== i)
        return;
      e = halfedges[e];
      if (e === -1) {
        const p = hull[(_hullIndex[i] + 1) % hull.length];
        if (p !== p02)
          yield p;
        return;
      }
    } while (e !== e0);
  }
  find(x4, y4, i = 0) {
    if ((x4 = +x4, x4 !== x4) || (y4 = +y4, y4 !== y4))
      return -1;
    const i0 = i;
    let c5;
    while ((c5 = this._step(i, x4, y4)) >= 0 && c5 !== i && c5 !== i0)
      i = c5;
    return c5;
  }
  _step(i, x4, y4) {
    const { inedges, hull, _hullIndex, halfedges, triangles, points } = this;
    if (inedges[i] === -1 || !points.length)
      return (i + 1) % (points.length >> 1);
    let c5 = i;
    let dc = pow(x4 - points[i * 2], 2) + pow(y4 - points[i * 2 + 1], 2);
    const e0 = inedges[i];
    let e = e0;
    do {
      let t = triangles[e];
      const dt = pow(x4 - points[t * 2], 2) + pow(y4 - points[t * 2 + 1], 2);
      if (dt < dc)
        dc = dt, c5 = t;
      e = e % 3 === 2 ? e - 2 : e + 1;
      if (triangles[e] !== i)
        break;
      e = halfedges[e];
      if (e === -1) {
        e = hull[(_hullIndex[i] + 1) % hull.length];
        if (e !== t) {
          if (pow(x4 - points[e * 2], 2) + pow(y4 - points[e * 2 + 1], 2) < dc)
            return e;
        }
        break;
      }
    } while (e !== e0);
    return c5;
  }
  render(context) {
    const buffer = context == null ? context = new Path2() : void 0;
    const { points, halfedges, triangles } = this;
    for (let i = 0, n2 = halfedges.length; i < n2; ++i) {
      const j = halfedges[i];
      if (j < i)
        continue;
      const ti = triangles[i] * 2;
      const tj = triangles[j] * 2;
      context.moveTo(points[ti], points[ti + 1]);
      context.lineTo(points[tj], points[tj + 1]);
    }
    this.renderHull(context);
    return buffer && buffer.value();
  }
  renderPoints(context, r = 2) {
    const buffer = context == null ? context = new Path2() : void 0;
    const { points } = this;
    for (let i = 0, n2 = points.length; i < n2; i += 2) {
      const x4 = points[i], y4 = points[i + 1];
      context.moveTo(x4 + r, y4);
      context.arc(x4, y4, r, 0, tau4);
    }
    return buffer && buffer.value();
  }
  renderHull(context) {
    const buffer = context == null ? context = new Path2() : void 0;
    const { hull, points } = this;
    const h = hull[0] * 2, n2 = hull.length;
    context.moveTo(points[h], points[h + 1]);
    for (let i = 1; i < n2; ++i) {
      const h2 = 2 * hull[i];
      context.lineTo(points[h2], points[h2 + 1]);
    }
    context.closePath();
    return buffer && buffer.value();
  }
  hullPolygon() {
    const polygon = new Polygon();
    this.renderHull(polygon);
    return polygon.value();
  }
  renderTriangle(i, context) {
    const buffer = context == null ? context = new Path2() : void 0;
    const { points, triangles } = this;
    const t03 = triangles[i *= 3] * 2;
    const t13 = triangles[i + 1] * 2;
    const t22 = triangles[i + 2] * 2;
    context.moveTo(points[t03], points[t03 + 1]);
    context.lineTo(points[t13], points[t13 + 1]);
    context.lineTo(points[t22], points[t22 + 1]);
    context.closePath();
    return buffer && buffer.value();
  }
  *trianglePolygons() {
    const { triangles } = this;
    for (let i = 0, n2 = triangles.length / 3; i < n2; ++i) {
      yield this.trianglePolygon(i);
    }
  }
  trianglePolygon(i) {
    const polygon = new Polygon();
    this.renderTriangle(i, polygon);
    return polygon.value();
  }
};
function flatArray(points, fx, fy, that) {
  const n2 = points.length;
  const array3 = new Float64Array(n2 * 2);
  for (let i = 0; i < n2; ++i) {
    const p = points[i];
    array3[i * 2] = fx.call(that, p, i, points);
    array3[i * 2 + 1] = fy.call(that, p, i, points);
  }
  return array3;
}
function* flatIterable(points, fx, fy, that) {
  let i = 0;
  for (const p of points) {
    yield fx.call(that, p, i, points);
    yield fy.call(that, p, i, points);
    ++i;
  }
}

// node_modules/d3-dsv/src/dsv.js
var EOL = {};
var EOF = {};
var QUOTE = 34;
var NEWLINE = 10;
var RETURN = 13;
function objectConverter(columns) {
  return new Function("d", "return {" + columns.map(function(name, i) {
    return JSON.stringify(name) + ": d[" + i + '] || ""';
  }).join(",") + "}");
}
function customConverter(columns, f) {
  var object2 = objectConverter(columns);
  return function(row, i) {
    return f(object2(row), i, columns);
  };
}
function inferColumns(rows) {
  var columnSet = /* @__PURE__ */ Object.create(null), columns = [];
  rows.forEach(function(row) {
    for (var column in row) {
      if (!(column in columnSet)) {
        columns.push(columnSet[column] = column);
      }
    }
  });
  return columns;
}
function pad(value, width) {
  var s3 = value + "", length3 = s3.length;
  return length3 < width ? new Array(width - length3 + 1).join(0) + s3 : s3;
}
function formatYear(year2) {
  return year2 < 0 ? "-" + pad(-year2, 6) : year2 > 9999 ? "+" + pad(year2, 6) : pad(year2, 4);
}
function formatDate(date2) {
  var hours2 = date2.getUTCHours(), minutes2 = date2.getUTCMinutes(), seconds2 = date2.getUTCSeconds(), milliseconds2 = date2.getUTCMilliseconds();
  return isNaN(date2) ? "Invalid Date" : formatYear(date2.getUTCFullYear(), 4) + "-" + pad(date2.getUTCMonth() + 1, 2) + "-" + pad(date2.getUTCDate(), 2) + (milliseconds2 ? "T" + pad(hours2, 2) + ":" + pad(minutes2, 2) + ":" + pad(seconds2, 2) + "." + pad(milliseconds2, 3) + "Z" : seconds2 ? "T" + pad(hours2, 2) + ":" + pad(minutes2, 2) + ":" + pad(seconds2, 2) + "Z" : minutes2 || hours2 ? "T" + pad(hours2, 2) + ":" + pad(minutes2, 2) + "Z" : "");
}
function dsv_default(delimiter) {
  var reFormat = new RegExp('["' + delimiter + "\n\r]"), DELIMITER = delimiter.charCodeAt(0);
  function parse3(text, f) {
    var convert3, columns, rows = parseRows(text, function(row, i) {
      if (convert3)
        return convert3(row, i - 1);
      columns = row, convert3 = f ? customConverter(row, f) : objectConverter(row);
    });
    rows.columns = columns || [];
    return rows;
  }
  function parseRows(text, f) {
    var rows = [], N = text.length, I = 0, n2 = 0, t, eof = N <= 0, eol = false;
    if (text.charCodeAt(N - 1) === NEWLINE)
      --N;
    if (text.charCodeAt(N - 1) === RETURN)
      --N;
    function token() {
      if (eof)
        return EOF;
      if (eol)
        return eol = false, EOL;
      var i, j = I, c5;
      if (text.charCodeAt(j) === QUOTE) {
        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE)
          ;
        if ((i = I) >= N)
          eof = true;
        else if ((c5 = text.charCodeAt(I++)) === NEWLINE)
          eol = true;
        else if (c5 === RETURN) {
          eol = true;
          if (text.charCodeAt(I) === NEWLINE)
            ++I;
        }
        return text.slice(j + 1, i - 1).replace(/""/g, '"');
      }
      while (I < N) {
        if ((c5 = text.charCodeAt(i = I++)) === NEWLINE)
          eol = true;
        else if (c5 === RETURN) {
          eol = true;
          if (text.charCodeAt(I) === NEWLINE)
            ++I;
        } else if (c5 !== DELIMITER)
          continue;
        return text.slice(j, i);
      }
      return eof = true, text.slice(j, N);
    }
    while ((t = token()) !== EOF) {
      var row = [];
      while (t !== EOL && t !== EOF)
        row.push(t), t = token();
      if (f && (row = f(row, n2++)) == null)
        continue;
      rows.push(row);
    }
    return rows;
  }
  function preformatBody(rows, columns) {
    return rows.map(function(row) {
      return columns.map(function(column) {
        return formatValue(row[column]);
      }).join(delimiter);
    });
  }
  function format2(rows, columns) {
    if (columns == null)
      columns = inferColumns(rows);
    return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join("\n");
  }
  function formatBody(rows, columns) {
    if (columns == null)
      columns = inferColumns(rows);
    return preformatBody(rows, columns).join("\n");
  }
  function formatRows(rows) {
    return rows.map(formatRow).join("\n");
  }
  function formatRow(row) {
    return row.map(formatValue).join(delimiter);
  }
  function formatValue(value) {
    return value == null ? "" : value instanceof Date ? formatDate(value) : reFormat.test(value += "") ? '"' + value.replace(/"/g, '""') + '"' : value;
  }
  return {
    parse: parse3,
    parseRows,
    format: format2,
    formatBody,
    formatRows,
    formatRow,
    formatValue
  };
}

// node_modules/d3-dsv/src/csv.js
var csv = dsv_default(",");
var csvParse = csv.parse;
var csvParseRows = csv.parseRows;
var csvFormat = csv.format;
var csvFormatBody = csv.formatBody;
var csvFormatRows = csv.formatRows;
var csvFormatRow = csv.formatRow;
var csvFormatValue = csv.formatValue;

// node_modules/d3-dsv/src/tsv.js
var tsv = dsv_default("	");
var tsvParse = tsv.parse;
var tsvParseRows = tsv.parseRows;
var tsvFormat = tsv.format;
var tsvFormatBody = tsv.formatBody;
var tsvFormatRows = tsv.formatRows;
var tsvFormatRow = tsv.formatRow;
var tsvFormatValue = tsv.formatValue;

// node_modules/d3-dsv/src/autoType.js
function autoType(object2) {
  for (var key in object2) {
    var value = object2[key].trim(), number5, m2;
    if (!value)
      value = null;
    else if (value === "true")
      value = true;
    else if (value === "false")
      value = false;
    else if (value === "NaN")
      value = NaN;
    else if (!isNaN(number5 = +value))
      value = number5;
    else if (m2 = value.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)) {
      if (fixtz && !!m2[4] && !m2[7])
        value = value.replace(/-/g, "/").replace(/T/, " ");
      value = new Date(value);
    } else
      continue;
    object2[key] = value;
  }
  return object2;
}
var fixtz = new Date("2019-01-01T00:00").getHours() || new Date("2019-07-01T00:00").getHours();

// node_modules/d3-fetch/src/blob.js
function responseBlob(response) {
  if (!response.ok)
    throw new Error(response.status + " " + response.statusText);
  return response.blob();
}
function blob_default(input, init2) {
  return fetch(input, init2).then(responseBlob);
}

// node_modules/d3-fetch/src/buffer.js
function responseArrayBuffer(response) {
  if (!response.ok)
    throw new Error(response.status + " " + response.statusText);
  return response.arrayBuffer();
}
function buffer_default(input, init2) {
  return fetch(input, init2).then(responseArrayBuffer);
}

// node_modules/d3-fetch/src/text.js
function responseText(response) {
  if (!response.ok)
    throw new Error(response.status + " " + response.statusText);
  return response.text();
}
function text_default3(input, init2) {
  return fetch(input, init2).then(responseText);
}

// node_modules/d3-fetch/src/dsv.js
function dsvParse(parse3) {
  return function(input, init2, row) {
    if (arguments.length === 2 && typeof init2 === "function")
      row = init2, init2 = void 0;
    return text_default3(input, init2).then(function(response) {
      return parse3(response, row);
    });
  };
}
function dsv(delimiter, input, init2, row) {
  if (arguments.length === 3 && typeof init2 === "function")
    row = init2, init2 = void 0;
  var format2 = dsv_default(delimiter);
  return text_default3(input, init2).then(function(response) {
    return format2.parse(response, row);
  });
}
var csv2 = dsvParse(csvParse);
var tsv2 = dsvParse(tsvParse);

// node_modules/d3-fetch/src/image.js
function image_default(input, init2) {
  return new Promise(function(resolve, reject) {
    var image = new Image();
    for (var key in init2)
      image[key] = init2[key];
    image.onerror = reject;
    image.onload = function() {
      resolve(image);
    };
    image.src = input;
  });
}

// node_modules/d3-fetch/src/json.js
function responseJson(response) {
  if (!response.ok)
    throw new Error(response.status + " " + response.statusText);
  if (response.status === 204 || response.status === 205)
    return;
  return response.json();
}
function json_default(input, init2) {
  return fetch(input, init2).then(responseJson);
}

// node_modules/d3-fetch/src/xml.js
function parser(type2) {
  return (input, init2) => text_default3(input, init2).then((text) => new DOMParser().parseFromString(text, type2));
}
var xml_default = parser("application/xml");
var html = parser("text/html");
var svg = parser("image/svg+xml");

// node_modules/d3-force/src/center.js
function center_default(x4, y4) {
  var nodes, strength = 1;
  if (x4 == null)
    x4 = 0;
  if (y4 == null)
    y4 = 0;
  function force() {
    var i, n2 = nodes.length, node, sx = 0, sy = 0;
    for (i = 0; i < n2; ++i) {
      node = nodes[i], sx += node.x, sy += node.y;
    }
    for (sx = (sx / n2 - x4) * strength, sy = (sy / n2 - y4) * strength, i = 0; i < n2; ++i) {
      node = nodes[i], node.x -= sx, node.y -= sy;
    }
  }
  force.initialize = function(_) {
    nodes = _;
  };
  force.x = function(_) {
    return arguments.length ? (x4 = +_, force) : x4;
  };
  force.y = function(_) {
    return arguments.length ? (y4 = +_, force) : y4;
  };
  force.strength = function(_) {
    return arguments.length ? (strength = +_, force) : strength;
  };
  return force;
}

// node_modules/d3-quadtree/src/add.js
function add_default(d) {
  const x4 = +this._x.call(null, d), y4 = +this._y.call(null, d);
  return add(this.cover(x4, y4), x4, y4, d);
}
function add(tree, x4, y4, d) {
  if (isNaN(x4) || isNaN(y4))
    return tree;
  var parent, node = tree._root, leaf = { data: d }, x06 = tree._x0, y06 = tree._y0, x12 = tree._x1, y12 = tree._y1, xm, ym, xp, yp, right2, bottom2, i, j;
  if (!node)
    return tree._root = leaf, tree;
  while (node.length) {
    if (right2 = x4 >= (xm = (x06 + x12) / 2))
      x06 = xm;
    else
      x12 = xm;
    if (bottom2 = y4 >= (ym = (y06 + y12) / 2))
      y06 = ym;
    else
      y12 = ym;
    if (parent = node, !(node = node[i = bottom2 << 1 | right2]))
      return parent[i] = leaf, tree;
  }
  xp = +tree._x.call(null, node.data);
  yp = +tree._y.call(null, node.data);
  if (x4 === xp && y4 === yp)
    return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;
  do {
    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);
    if (right2 = x4 >= (xm = (x06 + x12) / 2))
      x06 = xm;
    else
      x12 = xm;
    if (bottom2 = y4 >= (ym = (y06 + y12) / 2))
      y06 = ym;
    else
      y12 = ym;
  } while ((i = bottom2 << 1 | right2) === (j = (yp >= ym) << 1 | xp >= xm));
  return parent[j] = node, parent[i] = leaf, tree;
}
function addAll(data) {
  var d, i, n2 = data.length, x4, y4, xz = new Array(n2), yz = new Array(n2), x06 = Infinity, y06 = Infinity, x12 = -Infinity, y12 = -Infinity;
  for (i = 0; i < n2; ++i) {
    if (isNaN(x4 = +this._x.call(null, d = data[i])) || isNaN(y4 = +this._y.call(null, d)))
      continue;
    xz[i] = x4;
    yz[i] = y4;
    if (x4 < x06)
      x06 = x4;
    if (x4 > x12)
      x12 = x4;
    if (y4 < y06)
      y06 = y4;
    if (y4 > y12)
      y12 = y4;
  }
  if (x06 > x12 || y06 > y12)
    return this;
  this.cover(x06, y06).cover(x12, y12);
  for (i = 0; i < n2; ++i) {
    add(this, xz[i], yz[i], data[i]);
  }
  return this;
}

// node_modules/d3-quadtree/src/cover.js
function cover_default(x4, y4) {
  if (isNaN(x4 = +x4) || isNaN(y4 = +y4))
    return this;
  var x06 = this._x0, y06 = this._y0, x12 = this._x1, y12 = this._y1;
  if (isNaN(x06)) {
    x12 = (x06 = Math.floor(x4)) + 1;
    y12 = (y06 = Math.floor(y4)) + 1;
  } else {
    var z = x12 - x06 || 1, node = this._root, parent, i;
    while (x06 > x4 || x4 >= x12 || y06 > y4 || y4 >= y12) {
      i = (y4 < y06) << 1 | x4 < x06;
      parent = new Array(4), parent[i] = node, node = parent, z *= 2;
      switch (i) {
        case 0:
          x12 = x06 + z, y12 = y06 + z;
          break;
        case 1:
          x06 = x12 - z, y12 = y06 + z;
          break;
        case 2:
          x12 = x06 + z, y06 = y12 - z;
          break;
        case 3:
          x06 = x12 - z, y06 = y12 - z;
          break;
      }
    }
    if (this._root && this._root.length)
      this._root = node;
  }
  this._x0 = x06;
  this._y0 = y06;
  this._x1 = x12;
  this._y1 = y12;
  return this;
}

// node_modules/d3-quadtree/src/data.js
function data_default2() {
  var data = [];
  this.visit(function(node) {
    if (!node.length)
      do
        data.push(node.data);
      while (node = node.next);
  });
  return data;
}

// node_modules/d3-quadtree/src/extent.js
function extent_default2(_) {
  return arguments.length ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1]) : isNaN(this._x0) ? void 0 : [[this._x0, this._y0], [this._x1, this._y1]];
}

// node_modules/d3-quadtree/src/quad.js
function quad_default(node, x06, y06, x12, y12) {
  this.node = node;
  this.x0 = x06;
  this.y0 = y06;
  this.x1 = x12;
  this.y1 = y12;
}

// node_modules/d3-quadtree/src/find.js
function find_default(x4, y4, radius) {
  var data, x06 = this._x0, y06 = this._y0, x12, y12, x22, y22, x32 = this._x1, y32 = this._y1, quads = [], node = this._root, q, i;
  if (node)
    quads.push(new quad_default(node, x06, y06, x32, y32));
  if (radius == null)
    radius = Infinity;
  else {
    x06 = x4 - radius, y06 = y4 - radius;
    x32 = x4 + radius, y32 = y4 + radius;
    radius *= radius;
  }
  while (q = quads.pop()) {
    if (!(node = q.node) || (x12 = q.x0) > x32 || (y12 = q.y0) > y32 || (x22 = q.x1) < x06 || (y22 = q.y1) < y06)
      continue;
    if (node.length) {
      var xm = (x12 + x22) / 2, ym = (y12 + y22) / 2;
      quads.push(
        new quad_default(node[3], xm, ym, x22, y22),
        new quad_default(node[2], x12, ym, xm, y22),
        new quad_default(node[1], xm, y12, x22, ym),
        new quad_default(node[0], x12, y12, xm, ym)
      );
      if (i = (y4 >= ym) << 1 | x4 >= xm) {
        q = quads[quads.length - 1];
        quads[quads.length - 1] = quads[quads.length - 1 - i];
        quads[quads.length - 1 - i] = q;
      }
    } else {
      var dx = x4 - +this._x.call(null, node.data), dy = y4 - +this._y.call(null, node.data), d2 = dx * dx + dy * dy;
      if (d2 < radius) {
        var d = Math.sqrt(radius = d2);
        x06 = x4 - d, y06 = y4 - d;
        x32 = x4 + d, y32 = y4 + d;
        data = node.data;
      }
    }
  }
  return data;
}

// node_modules/d3-quadtree/src/remove.js
function remove_default3(d) {
  if (isNaN(x4 = +this._x.call(null, d)) || isNaN(y4 = +this._y.call(null, d)))
    return this;
  var parent, node = this._root, retainer, previous, next, x06 = this._x0, y06 = this._y0, x12 = this._x1, y12 = this._y1, x4, y4, xm, ym, right2, bottom2, i, j;
  if (!node)
    return this;
  if (node.length)
    while (true) {
      if (right2 = x4 >= (xm = (x06 + x12) / 2))
        x06 = xm;
      else
        x12 = xm;
      if (bottom2 = y4 >= (ym = (y06 + y12) / 2))
        y06 = ym;
      else
        y12 = ym;
      if (!(parent = node, node = node[i = bottom2 << 1 | right2]))
        return this;
      if (!node.length)
        break;
      if (parent[i + 1 & 3] || parent[i + 2 & 3] || parent[i + 3 & 3])
        retainer = parent, j = i;
    }
  while (node.data !== d)
    if (!(previous = node, node = node.next))
      return this;
  if (next = node.next)
    delete node.next;
  if (previous)
    return next ? previous.next = next : delete previous.next, this;
  if (!parent)
    return this._root = next, this;
  next ? parent[i] = next : delete parent[i];
  if ((node = parent[0] || parent[1] || parent[2] || parent[3]) && node === (parent[3] || parent[2] || parent[1] || parent[0]) && !node.length) {
    if (retainer)
      retainer[j] = node;
    else
      this._root = node;
  }
  return this;
}
function removeAll(data) {
  for (var i = 0, n2 = data.length; i < n2; ++i)
    this.remove(data[i]);
  return this;
}

// node_modules/d3-quadtree/src/root.js
function root_default() {
  return this._root;
}

// node_modules/d3-quadtree/src/size.js
function size_default2() {
  var size = 0;
  this.visit(function(node) {
    if (!node.length)
      do
        ++size;
      while (node = node.next);
  });
  return size;
}

// node_modules/d3-quadtree/src/visit.js
function visit_default(callback) {
  var quads = [], q, node = this._root, child, x06, y06, x12, y12;
  if (node)
    quads.push(new quad_default(node, this._x0, this._y0, this._x1, this._y1));
  while (q = quads.pop()) {
    if (!callback(node = q.node, x06 = q.x0, y06 = q.y0, x12 = q.x1, y12 = q.y1) && node.length) {
      var xm = (x06 + x12) / 2, ym = (y06 + y12) / 2;
      if (child = node[3])
        quads.push(new quad_default(child, xm, ym, x12, y12));
      if (child = node[2])
        quads.push(new quad_default(child, x06, ym, xm, y12));
      if (child = node[1])
        quads.push(new quad_default(child, xm, y06, x12, ym));
      if (child = node[0])
        quads.push(new quad_default(child, x06, y06, xm, ym));
    }
  }
  return this;
}

// node_modules/d3-quadtree/src/visitAfter.js
function visitAfter_default(callback) {
  var quads = [], next = [], q;
  if (this._root)
    quads.push(new quad_default(this._root, this._x0, this._y0, this._x1, this._y1));
  while (q = quads.pop()) {
    var node = q.node;
    if (node.length) {
      var child, x06 = q.x0, y06 = q.y0, x12 = q.x1, y12 = q.y1, xm = (x06 + x12) / 2, ym = (y06 + y12) / 2;
      if (child = node[0])
        quads.push(new quad_default(child, x06, y06, xm, ym));
      if (child = node[1])
        quads.push(new quad_default(child, xm, y06, x12, ym));
      if (child = node[2])
        quads.push(new quad_default(child, x06, ym, xm, y12));
      if (child = node[3])
        quads.push(new quad_default(child, xm, ym, x12, y12));
    }
    next.push(q);
  }
  while (q = next.pop()) {
    callback(q.node, q.x0, q.y0, q.x1, q.y1);
  }
  return this;
}

// node_modules/d3-quadtree/src/x.js
function defaultX2(d) {
  return d[0];
}
function x_default(_) {
  return arguments.length ? (this._x = _, this) : this._x;
}

// node_modules/d3-quadtree/src/y.js
function defaultY2(d) {
  return d[1];
}
function y_default(_) {
  return arguments.length ? (this._y = _, this) : this._y;
}

// node_modules/d3-quadtree/src/quadtree.js
function quadtree(nodes, x4, y4) {
  var tree = new Quadtree(x4 == null ? defaultX2 : x4, y4 == null ? defaultY2 : y4, NaN, NaN, NaN, NaN);
  return nodes == null ? tree : tree.addAll(nodes);
}
function Quadtree(x4, y4, x06, y06, x12, y12) {
  this._x = x4;
  this._y = y4;
  this._x0 = x06;
  this._y0 = y06;
  this._x1 = x12;
  this._y1 = y12;
  this._root = void 0;
}
function leaf_copy(leaf) {
  var copy3 = { data: leaf.data }, next = copy3;
  while (leaf = leaf.next)
    next = next.next = { data: leaf.data };
  return copy3;
}
var treeProto = quadtree.prototype = Quadtree.prototype;
treeProto.copy = function() {
  var copy3 = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1), node = this._root, nodes, child;
  if (!node)
    return copy3;
  if (!node.length)
    return copy3._root = leaf_copy(node), copy3;
  nodes = [{ source: node, target: copy3._root = new Array(4) }];
  while (node = nodes.pop()) {
    for (var i = 0; i < 4; ++i) {
      if (child = node.source[i]) {
        if (child.length)
          nodes.push({ source: child, target: node.target[i] = new Array(4) });
        else
          node.target[i] = leaf_copy(child);
      }
    }
  }
  return copy3;
};
treeProto.add = add_default;
treeProto.addAll = addAll;
treeProto.cover = cover_default;
treeProto.data = data_default2;
treeProto.extent = extent_default2;
treeProto.find = find_default;
treeProto.remove = remove_default3;
treeProto.removeAll = removeAll;
treeProto.root = root_default;
treeProto.size = size_default2;
treeProto.visit = visit_default;
treeProto.visitAfter = visitAfter_default;
treeProto.x = x_default;
treeProto.y = y_default;

// node_modules/d3-force/src/constant.js
function constant_default8(x4) {
  return function() {
    return x4;
  };
}

// node_modules/d3-force/src/jiggle.js
function jiggle_default(random) {
  return (random() - 0.5) * 1e-6;
}

// node_modules/d3-force/src/collide.js
function x(d) {
  return d.x + d.vx;
}
function y(d) {
  return d.y + d.vy;
}
function collide_default(radius) {
  var nodes, radii, random, strength = 1, iterations2 = 1;
  if (typeof radius !== "function")
    radius = constant_default8(radius == null ? 1 : +radius);
  function force() {
    var i, n2 = nodes.length, tree, node, xi, yi, ri, ri2;
    for (var k2 = 0; k2 < iterations2; ++k2) {
      tree = quadtree(nodes, x, y).visitAfter(prepare);
      for (i = 0; i < n2; ++i) {
        node = nodes[i];
        ri = radii[node.index], ri2 = ri * ri;
        xi = node.x + node.vx;
        yi = node.y + node.vy;
        tree.visit(apply);
      }
    }
    function apply(quad, x06, y06, x12, y12) {
      var data = quad.data, rj = quad.r, r = ri + rj;
      if (data) {
        if (data.index > node.index) {
          var x4 = xi - data.x - data.vx, y4 = yi - data.y - data.vy, l2 = x4 * x4 + y4 * y4;
          if (l2 < r * r) {
            if (x4 === 0)
              x4 = jiggle_default(random), l2 += x4 * x4;
            if (y4 === 0)
              y4 = jiggle_default(random), l2 += y4 * y4;
            l2 = (r - (l2 = Math.sqrt(l2))) / l2 * strength;
            node.vx += (x4 *= l2) * (r = (rj *= rj) / (ri2 + rj));
            node.vy += (y4 *= l2) * r;
            data.vx -= x4 * (r = 1 - r);
            data.vy -= y4 * r;
          }
        }
        return;
      }
      return x06 > xi + r || x12 < xi - r || y06 > yi + r || y12 < yi - r;
    }
  }
  function prepare(quad) {
    if (quad.data)
      return quad.r = radii[quad.data.index];
    for (var i = quad.r = 0; i < 4; ++i) {
      if (quad[i] && quad[i].r > quad.r) {
        quad.r = quad[i].r;
      }
    }
  }
  function initialize() {
    if (!nodes)
      return;
    var i, n2 = nodes.length, node;
    radii = new Array(n2);
    for (i = 0; i < n2; ++i)
      node = nodes[i], radii[node.index] = +radius(node, i, nodes);
  }
  force.initialize = function(_nodes, _random) {
    nodes = _nodes;
    random = _random;
    initialize();
  };
  force.iterations = function(_) {
    return arguments.length ? (iterations2 = +_, force) : iterations2;
  };
  force.strength = function(_) {
    return arguments.length ? (strength = +_, force) : strength;
  };
  force.radius = function(_) {
    return arguments.length ? (radius = typeof _ === "function" ? _ : constant_default8(+_), initialize(), force) : radius;
  };
  return force;
}

// node_modules/d3-force/src/link.js
function index2(d) {
  return d.index;
}
function find2(nodeById, nodeId) {
  var node = nodeById.get(nodeId);
  if (!node)
    throw new Error("node not found: " + nodeId);
  return node;
}
function link_default(links) {
  var id2 = index2, strength = defaultStrength, strengths, distance = constant_default8(30), distances, nodes, count3, bias, random, iterations2 = 1;
  if (links == null)
    links = [];
  function defaultStrength(link3) {
    return 1 / Math.min(count3[link3.source.index], count3[link3.target.index]);
  }
  function force(alpha) {
    for (var k2 = 0, n2 = links.length; k2 < iterations2; ++k2) {
      for (var i = 0, link3, source, target, x4, y4, l2, b; i < n2; ++i) {
        link3 = links[i], source = link3.source, target = link3.target;
        x4 = target.x + target.vx - source.x - source.vx || jiggle_default(random);
        y4 = target.y + target.vy - source.y - source.vy || jiggle_default(random);
        l2 = Math.sqrt(x4 * x4 + y4 * y4);
        l2 = (l2 - distances[i]) / l2 * alpha * strengths[i];
        x4 *= l2, y4 *= l2;
        target.vx -= x4 * (b = bias[i]);
        target.vy -= y4 * b;
        source.vx += x4 * (b = 1 - b);
        source.vy += y4 * b;
      }
    }
  }
  function initialize() {
    if (!nodes)
      return;
    var i, n2 = nodes.length, m2 = links.length, nodeById = new Map(nodes.map((d, i2) => [id2(d, i2, nodes), d])), link3;
    for (i = 0, count3 = new Array(n2); i < m2; ++i) {
      link3 = links[i], link3.index = i;
      if (typeof link3.source !== "object")
        link3.source = find2(nodeById, link3.source);
      if (typeof link3.target !== "object")
        link3.target = find2(nodeById, link3.target);
      count3[link3.source.index] = (count3[link3.source.index] || 0) + 1;
      count3[link3.target.index] = (count3[link3.target.index] || 0) + 1;
    }
    for (i = 0, bias = new Array(m2); i < m2; ++i) {
      link3 = links[i], bias[i] = count3[link3.source.index] / (count3[link3.source.index] + count3[link3.target.index]);
    }
    strengths = new Array(m2), initializeStrength();
    distances = new Array(m2), initializeDistance();
  }
  function initializeStrength() {
    if (!nodes)
      return;
    for (var i = 0, n2 = links.length; i < n2; ++i) {
      strengths[i] = +strength(links[i], i, links);
    }
  }
  function initializeDistance() {
    if (!nodes)
      return;
    for (var i = 0, n2 = links.length; i < n2; ++i) {
      distances[i] = +distance(links[i], i, links);
    }
  }
  force.initialize = function(_nodes, _random) {
    nodes = _nodes;
    random = _random;
    initialize();
  };
  force.links = function(_) {
    return arguments.length ? (links = _, initialize(), force) : links;
  };
  force.id = function(_) {
    return arguments.length ? (id2 = _, force) : id2;
  };
  force.iterations = function(_) {
    return arguments.length ? (iterations2 = +_, force) : iterations2;
  };
  force.strength = function(_) {
    return arguments.length ? (strength = typeof _ === "function" ? _ : constant_default8(+_), initializeStrength(), force) : strength;
  };
  force.distance = function(_) {
    return arguments.length ? (distance = typeof _ === "function" ? _ : constant_default8(+_), initializeDistance(), force) : distance;
  };
  return force;
}

// node_modules/d3-force/src/lcg.js
var a = 1664525;
var c = 1013904223;
var m = 4294967296;
function lcg_default() {
  let s3 = 1;
  return () => (s3 = (a * s3 + c) % m) / m;
}

// node_modules/d3-force/src/simulation.js
function x2(d) {
  return d.x;
}
function y2(d) {
  return d.y;
}
var initialRadius = 10;
var initialAngle = Math.PI * (3 - Math.sqrt(5));
function simulation_default(nodes) {
  var simulation, alpha = 1, alphaMin = 1e-3, alphaDecay = 1 - Math.pow(alphaMin, 1 / 300), alphaTarget = 0, velocityDecay = 0.6, forces = /* @__PURE__ */ new Map(), stepper = timer(step), event = dispatch_default("tick", "end"), random = lcg_default();
  if (nodes == null)
    nodes = [];
  function step() {
    tick();
    event.call("tick", simulation);
    if (alpha < alphaMin) {
      stepper.stop();
      event.call("end", simulation);
    }
  }
  function tick(iterations2) {
    var i, n2 = nodes.length, node;
    if (iterations2 === void 0)
      iterations2 = 1;
    for (var k2 = 0; k2 < iterations2; ++k2) {
      alpha += (alphaTarget - alpha) * alphaDecay;
      forces.forEach(function(force) {
        force(alpha);
      });
      for (i = 0; i < n2; ++i) {
        node = nodes[i];
        if (node.fx == null)
          node.x += node.vx *= velocityDecay;
        else
          node.x = node.fx, node.vx = 0;
        if (node.fy == null)
          node.y += node.vy *= velocityDecay;
        else
          node.y = node.fy, node.vy = 0;
      }
    }
    return simulation;
  }
  function initializeNodes() {
    for (var i = 0, n2 = nodes.length, node; i < n2; ++i) {
      node = nodes[i], node.index = i;
      if (node.fx != null)
        node.x = node.fx;
      if (node.fy != null)
        node.y = node.fy;
      if (isNaN(node.x) || isNaN(node.y)) {
        var radius = initialRadius * Math.sqrt(0.5 + i), angle2 = i * initialAngle;
        node.x = radius * Math.cos(angle2);
        node.y = radius * Math.sin(angle2);
      }
      if (isNaN(node.vx) || isNaN(node.vy)) {
        node.vx = node.vy = 0;
      }
    }
  }
  function initializeForce(force) {
    if (force.initialize)
      force.initialize(nodes, random);
    return force;
  }
  initializeNodes();
  return simulation = {
    tick,
    restart: function() {
      return stepper.restart(step), simulation;
    },
    stop: function() {
      return stepper.stop(), simulation;
    },
    nodes: function(_) {
      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;
    },
    alpha: function(_) {
      return arguments.length ? (alpha = +_, simulation) : alpha;
    },
    alphaMin: function(_) {
      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;
    },
    alphaDecay: function(_) {
      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;
    },
    alphaTarget: function(_) {
      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;
    },
    velocityDecay: function(_) {
      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;
    },
    randomSource: function(_) {
      return arguments.length ? (random = _, forces.forEach(initializeForce), simulation) : random;
    },
    force: function(name, _) {
      return arguments.length > 1 ? (_ == null ? forces.delete(name) : forces.set(name, initializeForce(_)), simulation) : forces.get(name);
    },
    find: function(x4, y4, radius) {
      var i = 0, n2 = nodes.length, dx, dy, d2, node, closest;
      if (radius == null)
        radius = Infinity;
      else
        radius *= radius;
      for (i = 0; i < n2; ++i) {
        node = nodes[i];
        dx = x4 - node.x;
        dy = y4 - node.y;
        d2 = dx * dx + dy * dy;
        if (d2 < radius)
          closest = node, radius = d2;
      }
      return closest;
    },
    on: function(name, _) {
      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);
    }
  };
}

// node_modules/d3-force/src/manyBody.js
function manyBody_default() {
  var nodes, node, random, alpha, strength = constant_default8(-30), strengths, distanceMin2 = 1, distanceMax2 = Infinity, theta2 = 0.81;
  function force(_) {
    var i, n2 = nodes.length, tree = quadtree(nodes, x2, y2).visitAfter(accumulate);
    for (alpha = _, i = 0; i < n2; ++i)
      node = nodes[i], tree.visit(apply);
  }
  function initialize() {
    if (!nodes)
      return;
    var i, n2 = nodes.length, node2;
    strengths = new Array(n2);
    for (i = 0; i < n2; ++i)
      node2 = nodes[i], strengths[node2.index] = +strength(node2, i, nodes);
  }
  function accumulate(quad) {
    var strength2 = 0, q, c5, weight = 0, x4, y4, i;
    if (quad.length) {
      for (x4 = y4 = i = 0; i < 4; ++i) {
        if ((q = quad[i]) && (c5 = Math.abs(q.value))) {
          strength2 += q.value, weight += c5, x4 += c5 * q.x, y4 += c5 * q.y;
        }
      }
      quad.x = x4 / weight;
      quad.y = y4 / weight;
    } else {
      q = quad;
      q.x = q.data.x;
      q.y = q.data.y;
      do
        strength2 += strengths[q.data.index];
      while (q = q.next);
    }
    quad.value = strength2;
  }
  function apply(quad, x12, _, x22) {
    if (!quad.value)
      return true;
    var x4 = quad.x - node.x, y4 = quad.y - node.y, w = x22 - x12, l2 = x4 * x4 + y4 * y4;
    if (w * w / theta2 < l2) {
      if (l2 < distanceMax2) {
        if (x4 === 0)
          x4 = jiggle_default(random), l2 += x4 * x4;
        if (y4 === 0)
          y4 = jiggle_default(random), l2 += y4 * y4;
        if (l2 < distanceMin2)
          l2 = Math.sqrt(distanceMin2 * l2);
        node.vx += x4 * quad.value * alpha / l2;
        node.vy += y4 * quad.value * alpha / l2;
      }
      return true;
    } else if (quad.length || l2 >= distanceMax2)
      return;
    if (quad.data !== node || quad.next) {
      if (x4 === 0)
        x4 = jiggle_default(random), l2 += x4 * x4;
      if (y4 === 0)
        y4 = jiggle_default(random), l2 += y4 * y4;
      if (l2 < distanceMin2)
        l2 = Math.sqrt(distanceMin2 * l2);
    }
    do
      if (quad.data !== node) {
        w = strengths[quad.data.index] * alpha / l2;
        node.vx += x4 * w;
        node.vy += y4 * w;
      }
    while (quad = quad.next);
  }
  force.initialize = function(_nodes, _random) {
    nodes = _nodes;
    random = _random;
    initialize();
  };
  force.strength = function(_) {
    return arguments.length ? (strength = typeof _ === "function" ? _ : constant_default8(+_), initialize(), force) : strength;
  };
  force.distanceMin = function(_) {
    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);
  };
  force.distanceMax = function(_) {
    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);
  };
  force.theta = function(_) {
    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);
  };
  return force;
}

// node_modules/d3-force/src/radial.js
function radial_default(radius, x4, y4) {
  var nodes, strength = constant_default8(0.1), strengths, radiuses;
  if (typeof radius !== "function")
    radius = constant_default8(+radius);
  if (x4 == null)
    x4 = 0;
  if (y4 == null)
    y4 = 0;
  function force(alpha) {
    for (var i = 0, n2 = nodes.length; i < n2; ++i) {
      var node = nodes[i], dx = node.x - x4 || 1e-6, dy = node.y - y4 || 1e-6, r = Math.sqrt(dx * dx + dy * dy), k2 = (radiuses[i] - r) * strengths[i] * alpha / r;
      node.vx += dx * k2;
      node.vy += dy * k2;
    }
  }
  function initialize() {
    if (!nodes)
      return;
    var i, n2 = nodes.length;
    strengths = new Array(n2);
    radiuses = new Array(n2);
    for (i = 0; i < n2; ++i) {
      radiuses[i] = +radius(nodes[i], i, nodes);
      strengths[i] = isNaN(radiuses[i]) ? 0 : +strength(nodes[i], i, nodes);
    }
  }
  force.initialize = function(_) {
    nodes = _, initialize();
  };
  force.strength = function(_) {
    return arguments.length ? (strength = typeof _ === "function" ? _ : constant_default8(+_), initialize(), force) : strength;
  };
  force.radius = function(_) {
    return arguments.length ? (radius = typeof _ === "function" ? _ : constant_default8(+_), initialize(), force) : radius;
  };
  force.x = function(_) {
    return arguments.length ? (x4 = +_, force) : x4;
  };
  force.y = function(_) {
    return arguments.length ? (y4 = +_, force) : y4;
  };
  return force;
}

// node_modules/d3-force/src/x.js
function x_default2(x4) {
  var strength = constant_default8(0.1), nodes, strengths, xz;
  if (typeof x4 !== "function")
    x4 = constant_default8(x4 == null ? 0 : +x4);
  function force(alpha) {
    for (var i = 0, n2 = nodes.length, node; i < n2; ++i) {
      node = nodes[i], node.vx += (xz[i] - node.x) * strengths[i] * alpha;
    }
  }
  function initialize() {
    if (!nodes)
      return;
    var i, n2 = nodes.length;
    strengths = new Array(n2);
    xz = new Array(n2);
    for (i = 0; i < n2; ++i) {
      strengths[i] = isNaN(xz[i] = +x4(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);
    }
  }
  force.initialize = function(_) {
    nodes = _;
    initialize();
  };
  force.strength = function(_) {
    return arguments.length ? (strength = typeof _ === "function" ? _ : constant_default8(+_), initialize(), force) : strength;
  };
  force.x = function(_) {
    return arguments.length ? (x4 = typeof _ === "function" ? _ : constant_default8(+_), initialize(), force) : x4;
  };
  return force;
}

// node_modules/d3-force/src/y.js
function y_default2(y4) {
  var strength = constant_default8(0.1), nodes, strengths, yz;
  if (typeof y4 !== "function")
    y4 = constant_default8(y4 == null ? 0 : +y4);
  function force(alpha) {
    for (var i = 0, n2 = nodes.length, node; i < n2; ++i) {
      node = nodes[i], node.vy += (yz[i] - node.y) * strengths[i] * alpha;
    }
  }
  function initialize() {
    if (!nodes)
      return;
    var i, n2 = nodes.length;
    strengths = new Array(n2);
    yz = new Array(n2);
    for (i = 0; i < n2; ++i) {
      strengths[i] = isNaN(yz[i] = +y4(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);
    }
  }
  force.initialize = function(_) {
    nodes = _;
    initialize();
  };
  force.strength = function(_) {
    return arguments.length ? (strength = typeof _ === "function" ? _ : constant_default8(+_), initialize(), force) : strength;
  };
  force.y = function(_) {
    return arguments.length ? (y4 = typeof _ === "function" ? _ : constant_default8(+_), initialize(), force) : y4;
  };
  return force;
}

// node_modules/d3-format/src/formatDecimal.js
function formatDecimal_default(x4) {
  return Math.abs(x4 = Math.round(x4)) >= 1e21 ? x4.toLocaleString("en").replace(/,/g, "") : x4.toString(10);
}
function formatDecimalParts(x4, p) {
  if ((i = (x4 = p ? x4.toExponential(p - 1) : x4.toExponential()).indexOf("e")) < 0)
    return null;
  var i, coefficient = x4.slice(0, i);
  return [
    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,
    +x4.slice(i + 1)
  ];
}

// node_modules/d3-format/src/exponent.js
function exponent_default(x4) {
  return x4 = formatDecimalParts(Math.abs(x4)), x4 ? x4[1] : NaN;
}

// node_modules/d3-format/src/formatGroup.js
function formatGroup_default(grouping, thousands) {
  return function(value, width) {
    var i = value.length, t = [], j = 0, g = grouping[0], length3 = 0;
    while (i > 0 && g > 0) {
      if (length3 + g + 1 > width)
        g = Math.max(1, width - length3);
      t.push(value.substring(i -= g, i + g));
      if ((length3 += g + 1) > width)
        break;
      g = grouping[j = (j + 1) % grouping.length];
    }
    return t.reverse().join(thousands);
  };
}

// node_modules/d3-format/src/formatNumerals.js
function formatNumerals_default(numerals) {
  return function(value) {
    return value.replace(/[0-9]/g, function(i) {
      return numerals[+i];
    });
  };
}

// node_modules/d3-format/src/formatSpecifier.js
var re = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function formatSpecifier(specifier) {
  if (!(match2 = re.exec(specifier)))
    throw new Error("invalid format: " + specifier);
  var match2;
  return new FormatSpecifier({
    fill: match2[1],
    align: match2[2],
    sign: match2[3],
    symbol: match2[4],
    zero: match2[5],
    width: match2[6],
    comma: match2[7],
    precision: match2[8] && match2[8].slice(1),
    trim: match2[9],
    type: match2[10]
  });
}
formatSpecifier.prototype = FormatSpecifier.prototype;
function FormatSpecifier(specifier) {
  this.fill = specifier.fill === void 0 ? " " : specifier.fill + "";
  this.align = specifier.align === void 0 ? ">" : specifier.align + "";
  this.sign = specifier.sign === void 0 ? "-" : specifier.sign + "";
  this.symbol = specifier.symbol === void 0 ? "" : specifier.symbol + "";
  this.zero = !!specifier.zero;
  this.width = specifier.width === void 0 ? void 0 : +specifier.width;
  this.comma = !!specifier.comma;
  this.precision = specifier.precision === void 0 ? void 0 : +specifier.precision;
  this.trim = !!specifier.trim;
  this.type = specifier.type === void 0 ? "" : specifier.type + "";
}
FormatSpecifier.prototype.toString = function() {
  return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
};

// node_modules/d3-format/src/formatTrim.js
function formatTrim_default(s3) {
  out:
    for (var n2 = s3.length, i = 1, i0 = -1, i1; i < n2; ++i) {
      switch (s3[i]) {
        case ".":
          i0 = i1 = i;
          break;
        case "0":
          if (i0 === 0)
            i0 = i;
          i1 = i;
          break;
        default:
          if (!+s3[i])
            break out;
          if (i0 > 0)
            i0 = 0;
          break;
      }
    }
  return i0 > 0 ? s3.slice(0, i0) + s3.slice(i1 + 1) : s3;
}

// node_modules/d3-format/src/formatPrefixAuto.js
var prefixExponent;
function formatPrefixAuto_default(x4, p) {
  var d = formatDecimalParts(x4, p);
  if (!d)
    return x4 + "";
  var coefficient = d[0], exponent2 = d[1], i = exponent2 - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent2 / 3))) * 3) + 1, n2 = coefficient.length;
  return i === n2 ? coefficient : i > n2 ? coefficient + new Array(i - n2 + 1).join("0") : i > 0 ? coefficient.slice(0, i) + "." + coefficient.slice(i) : "0." + new Array(1 - i).join("0") + formatDecimalParts(x4, Math.max(0, p + i - 1))[0];
}

// node_modules/d3-format/src/formatRounded.js
function formatRounded_default(x4, p) {
  var d = formatDecimalParts(x4, p);
  if (!d)
    return x4 + "";
  var coefficient = d[0], exponent2 = d[1];
  return exponent2 < 0 ? "0." + new Array(-exponent2).join("0") + coefficient : coefficient.length > exponent2 + 1 ? coefficient.slice(0, exponent2 + 1) + "." + coefficient.slice(exponent2 + 1) : coefficient + new Array(exponent2 - coefficient.length + 2).join("0");
}

// node_modules/d3-format/src/formatTypes.js
var formatTypes_default = {
  "%": (x4, p) => (x4 * 100).toFixed(p),
  "b": (x4) => Math.round(x4).toString(2),
  "c": (x4) => x4 + "",
  "d": formatDecimal_default,
  "e": (x4, p) => x4.toExponential(p),
  "f": (x4, p) => x4.toFixed(p),
  "g": (x4, p) => x4.toPrecision(p),
  "o": (x4) => Math.round(x4).toString(8),
  "p": (x4, p) => formatRounded_default(x4 * 100, p),
  "r": formatRounded_default,
  "s": formatPrefixAuto_default,
  "X": (x4) => Math.round(x4).toString(16).toUpperCase(),
  "x": (x4) => Math.round(x4).toString(16)
};

// node_modules/d3-format/src/identity.js
function identity_default3(x4) {
  return x4;
}

// node_modules/d3-format/src/locale.js
var map3 = Array.prototype.map;
var prefixes = ["y", "z", "a", "f", "p", "n", "\xB5", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
function locale_default(locale3) {
  var group2 = locale3.grouping === void 0 || locale3.thousands === void 0 ? identity_default3 : formatGroup_default(map3.call(locale3.grouping, Number), locale3.thousands + ""), currencyPrefix = locale3.currency === void 0 ? "" : locale3.currency[0] + "", currencySuffix = locale3.currency === void 0 ? "" : locale3.currency[1] + "", decimal = locale3.decimal === void 0 ? "." : locale3.decimal + "", numerals = locale3.numerals === void 0 ? identity_default3 : formatNumerals_default(map3.call(locale3.numerals, String)), percent = locale3.percent === void 0 ? "%" : locale3.percent + "", minus = locale3.minus === void 0 ? "\u2212" : locale3.minus + "", nan = locale3.nan === void 0 ? "NaN" : locale3.nan + "";
  function newFormat(specifier) {
    specifier = formatSpecifier(specifier);
    var fill = specifier.fill, align = specifier.align, sign3 = specifier.sign, symbol = specifier.symbol, zero2 = specifier.zero, width = specifier.width, comma = specifier.comma, precision = specifier.precision, trim = specifier.trim, type2 = specifier.type;
    if (type2 === "n")
      comma = true, type2 = "g";
    else if (!formatTypes_default[type2])
      precision === void 0 && (precision = 12), trim = true, type2 = "g";
    if (zero2 || fill === "0" && align === "=")
      zero2 = true, fill = "0", align = "=";
    var prefix = symbol === "$" ? currencyPrefix : symbol === "#" && /[boxX]/.test(type2) ? "0" + type2.toLowerCase() : "", suffix = symbol === "$" ? currencySuffix : /[%p]/.test(type2) ? percent : "";
    var formatType = formatTypes_default[type2], maybeSuffix = /[defgprs%]/.test(type2);
    precision = precision === void 0 ? 6 : /[gprs]/.test(type2) ? Math.max(1, Math.min(21, precision)) : Math.max(0, Math.min(20, precision));
    function format2(value) {
      var valuePrefix = prefix, valueSuffix = suffix, i, n2, c5;
      if (type2 === "c") {
        valueSuffix = formatType(value) + valueSuffix;
        value = "";
      } else {
        value = +value;
        var valueNegative = value < 0 || 1 / value < 0;
        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);
        if (trim)
          value = formatTrim_default(value);
        if (valueNegative && +value === 0 && sign3 !== "+")
          valueNegative = false;
        valuePrefix = (valueNegative ? sign3 === "(" ? sign3 : minus : sign3 === "-" || sign3 === "(" ? "" : sign3) + valuePrefix;
        valueSuffix = (type2 === "s" ? prefixes[8 + prefixExponent / 3] : "") + valueSuffix + (valueNegative && sign3 === "(" ? ")" : "");
        if (maybeSuffix) {
          i = -1, n2 = value.length;
          while (++i < n2) {
            if (c5 = value.charCodeAt(i), 48 > c5 || c5 > 57) {
              valueSuffix = (c5 === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;
              value = value.slice(0, i);
              break;
            }
          }
        }
      }
      if (comma && !zero2)
        value = group2(value, Infinity);
      var length3 = valuePrefix.length + value.length + valueSuffix.length, padding = length3 < width ? new Array(width - length3 + 1).join(fill) : "";
      if (comma && zero2)
        value = group2(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = "";
      switch (align) {
        case "<":
          value = valuePrefix + value + valueSuffix + padding;
          break;
        case "=":
          value = valuePrefix + padding + value + valueSuffix;
          break;
        case "^":
          value = padding.slice(0, length3 = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length3);
          break;
        default:
          value = padding + valuePrefix + value + valueSuffix;
          break;
      }
      return numerals(value);
    }
    format2.toString = function() {
      return specifier + "";
    };
    return format2;
  }
  function formatPrefix2(specifier, value) {
    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = "f", specifier)), e = Math.max(-8, Math.min(8, Math.floor(exponent_default(value) / 3))) * 3, k2 = Math.pow(10, -e), prefix = prefixes[8 + e / 3];
    return function(value2) {
      return f(k2 * value2) + prefix;
    };
  }
  return {
    format: newFormat,
    formatPrefix: formatPrefix2
  };
}

// node_modules/d3-format/src/defaultLocale.js
var locale;
var format;
var formatPrefix;
defaultLocale2({
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});
function defaultLocale2(definition) {
  locale = locale_default(definition);
  format = locale.format;
  formatPrefix = locale.formatPrefix;
  return locale;
}

// node_modules/d3-format/src/precisionFixed.js
function precisionFixed_default(step) {
  return Math.max(0, -exponent_default(Math.abs(step)));
}

// node_modules/d3-format/src/precisionPrefix.js
function precisionPrefix_default(step, value) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent_default(value) / 3))) * 3 - exponent_default(Math.abs(step)));
}

// node_modules/d3-format/src/precisionRound.js
function precisionRound_default(step, max5) {
  step = Math.abs(step), max5 = Math.abs(max5) - step;
  return Math.max(0, exponent_default(max5) - exponent_default(step)) + 1;
}

// node_modules/d3-geo/src/math.js
var epsilon6 = 1e-6;
var epsilon22 = 1e-12;
var pi4 = Math.PI;
var halfPi3 = pi4 / 2;
var quarterPi = pi4 / 4;
var tau5 = pi4 * 2;
var degrees3 = 180 / pi4;
var radians2 = pi4 / 180;
var abs3 = Math.abs;
var atan = Math.atan;
var atan2 = Math.atan2;
var cos2 = Math.cos;
var ceil = Math.ceil;
var exp = Math.exp;
var hypot = Math.hypot;
var log2 = Math.log;
var pow2 = Math.pow;
var sin2 = Math.sin;
var sign = Math.sign || function(x4) {
  return x4 > 0 ? 1 : x4 < 0 ? -1 : 0;
};
var sqrt = Math.sqrt;
var tan = Math.tan;
function acos(x4) {
  return x4 > 1 ? 0 : x4 < -1 ? pi4 : Math.acos(x4);
}
function asin(x4) {
  return x4 > 1 ? halfPi3 : x4 < -1 ? -halfPi3 : Math.asin(x4);
}
function haversin(x4) {
  return (x4 = sin2(x4 / 2)) * x4;
}

// node_modules/d3-geo/src/noop.js
function noop2() {
}

// node_modules/d3-geo/src/stream.js
function streamGeometry(geometry, stream) {
  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {
    streamGeometryType[geometry.type](geometry, stream);
  }
}
var streamObjectType = {
  Feature: function(object2, stream) {
    streamGeometry(object2.geometry, stream);
  },
  FeatureCollection: function(object2, stream) {
    var features = object2.features, i = -1, n2 = features.length;
    while (++i < n2)
      streamGeometry(features[i].geometry, stream);
  }
};
var streamGeometryType = {
  Sphere: function(object2, stream) {
    stream.sphere();
  },
  Point: function(object2, stream) {
    object2 = object2.coordinates;
    stream.point(object2[0], object2[1], object2[2]);
  },
  MultiPoint: function(object2, stream) {
    var coordinates2 = object2.coordinates, i = -1, n2 = coordinates2.length;
    while (++i < n2)
      object2 = coordinates2[i], stream.point(object2[0], object2[1], object2[2]);
  },
  LineString: function(object2, stream) {
    streamLine(object2.coordinates, stream, 0);
  },
  MultiLineString: function(object2, stream) {
    var coordinates2 = object2.coordinates, i = -1, n2 = coordinates2.length;
    while (++i < n2)
      streamLine(coordinates2[i], stream, 0);
  },
  Polygon: function(object2, stream) {
    streamPolygon(object2.coordinates, stream);
  },
  MultiPolygon: function(object2, stream) {
    var coordinates2 = object2.coordinates, i = -1, n2 = coordinates2.length;
    while (++i < n2)
      streamPolygon(coordinates2[i], stream);
  },
  GeometryCollection: function(object2, stream) {
    var geometries = object2.geometries, i = -1, n2 = geometries.length;
    while (++i < n2)
      streamGeometry(geometries[i], stream);
  }
};
function streamLine(coordinates2, stream, closed) {
  var i = -1, n2 = coordinates2.length - closed, coordinate;
  stream.lineStart();
  while (++i < n2)
    coordinate = coordinates2[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);
  stream.lineEnd();
}
function streamPolygon(coordinates2, stream) {
  var i = -1, n2 = coordinates2.length;
  stream.polygonStart();
  while (++i < n2)
    streamLine(coordinates2[i], stream, 1);
  stream.polygonEnd();
}
function stream_default(object2, stream) {
  if (object2 && streamObjectType.hasOwnProperty(object2.type)) {
    streamObjectType[object2.type](object2, stream);
  } else {
    streamGeometry(object2, stream);
  }
}

// node_modules/d3-geo/src/area.js
var areaRingSum = new Adder();
var areaSum = new Adder();
var lambda00;
var phi00;
var lambda0;
var cosPhi0;
var sinPhi0;
var areaStream = {
  point: noop2,
  lineStart: noop2,
  lineEnd: noop2,
  polygonStart: function() {
    areaRingSum = new Adder();
    areaStream.lineStart = areaRingStart;
    areaStream.lineEnd = areaRingEnd;
  },
  polygonEnd: function() {
    var areaRing = +areaRingSum;
    areaSum.add(areaRing < 0 ? tau5 + areaRing : areaRing);
    this.lineStart = this.lineEnd = this.point = noop2;
  },
  sphere: function() {
    areaSum.add(tau5);
  }
};
function areaRingStart() {
  areaStream.point = areaPointFirst;
}
function areaRingEnd() {
  areaPoint(lambda00, phi00);
}
function areaPointFirst(lambda, phi2) {
  areaStream.point = areaPoint;
  lambda00 = lambda, phi00 = phi2;
  lambda *= radians2, phi2 *= radians2;
  lambda0 = lambda, cosPhi0 = cos2(phi2 = phi2 / 2 + quarterPi), sinPhi0 = sin2(phi2);
}
function areaPoint(lambda, phi2) {
  lambda *= radians2, phi2 *= radians2;
  phi2 = phi2 / 2 + quarterPi;
  var dLambda = lambda - lambda0, sdLambda = dLambda >= 0 ? 1 : -1, adLambda = sdLambda * dLambda, cosPhi = cos2(phi2), sinPhi = sin2(phi2), k2 = sinPhi0 * sinPhi, u = cosPhi0 * cosPhi + k2 * cos2(adLambda), v = k2 * sdLambda * sin2(adLambda);
  areaRingSum.add(atan2(v, u));
  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;
}
function area_default2(object2) {
  areaSum = new Adder();
  stream_default(object2, areaStream);
  return areaSum * 2;
}

// node_modules/d3-geo/src/cartesian.js
function spherical(cartesian2) {
  return [atan2(cartesian2[1], cartesian2[0]), asin(cartesian2[2])];
}
function cartesian(spherical2) {
  var lambda = spherical2[0], phi2 = spherical2[1], cosPhi = cos2(phi2);
  return [cosPhi * cos2(lambda), cosPhi * sin2(lambda), sin2(phi2)];
}
function cartesianDot(a3, b) {
  return a3[0] * b[0] + a3[1] * b[1] + a3[2] * b[2];
}
function cartesianCross(a3, b) {
  return [a3[1] * b[2] - a3[2] * b[1], a3[2] * b[0] - a3[0] * b[2], a3[0] * b[1] - a3[1] * b[0]];
}
function cartesianAddInPlace(a3, b) {
  a3[0] += b[0], a3[1] += b[1], a3[2] += b[2];
}
function cartesianScale(vector, k2) {
  return [vector[0] * k2, vector[1] * k2, vector[2] * k2];
}
function cartesianNormalizeInPlace(d) {
  var l2 = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);
  d[0] /= l2, d[1] /= l2, d[2] /= l2;
}

// node_modules/d3-geo/src/bounds.js
var lambda02;
var phi0;
var lambda1;
var phi1;
var lambda2;
var lambda002;
var phi002;
var p0;
var deltaSum;
var ranges;
var range2;
var boundsStream = {
  point: boundsPoint,
  lineStart: boundsLineStart,
  lineEnd: boundsLineEnd,
  polygonStart: function() {
    boundsStream.point = boundsRingPoint;
    boundsStream.lineStart = boundsRingStart;
    boundsStream.lineEnd = boundsRingEnd;
    deltaSum = new Adder();
    areaStream.polygonStart();
  },
  polygonEnd: function() {
    areaStream.polygonEnd();
    boundsStream.point = boundsPoint;
    boundsStream.lineStart = boundsLineStart;
    boundsStream.lineEnd = boundsLineEnd;
    if (areaRingSum < 0)
      lambda02 = -(lambda1 = 180), phi0 = -(phi1 = 90);
    else if (deltaSum > epsilon6)
      phi1 = 90;
    else if (deltaSum < -epsilon6)
      phi0 = -90;
    range2[0] = lambda02, range2[1] = lambda1;
  },
  sphere: function() {
    lambda02 = -(lambda1 = 180), phi0 = -(phi1 = 90);
  }
};
function boundsPoint(lambda, phi2) {
  ranges.push(range2 = [lambda02 = lambda, lambda1 = lambda]);
  if (phi2 < phi0)
    phi0 = phi2;
  if (phi2 > phi1)
    phi1 = phi2;
}
function linePoint(lambda, phi2) {
  var p = cartesian([lambda * radians2, phi2 * radians2]);
  if (p0) {
    var normal = cartesianCross(p0, p), equatorial = [normal[1], -normal[0], 0], inflection = cartesianCross(equatorial, normal);
    cartesianNormalizeInPlace(inflection);
    inflection = spherical(inflection);
    var delta = lambda - lambda2, sign3 = delta > 0 ? 1 : -1, lambdai = inflection[0] * degrees3 * sign3, phii, antimeridian = abs3(delta) > 180;
    if (antimeridian ^ (sign3 * lambda2 < lambdai && lambdai < sign3 * lambda)) {
      phii = inflection[1] * degrees3;
      if (phii > phi1)
        phi1 = phii;
    } else if (lambdai = (lambdai + 360) % 360 - 180, antimeridian ^ (sign3 * lambda2 < lambdai && lambdai < sign3 * lambda)) {
      phii = -inflection[1] * degrees3;
      if (phii < phi0)
        phi0 = phii;
    } else {
      if (phi2 < phi0)
        phi0 = phi2;
      if (phi2 > phi1)
        phi1 = phi2;
    }
    if (antimeridian) {
      if (lambda < lambda2) {
        if (angle(lambda02, lambda) > angle(lambda02, lambda1))
          lambda1 = lambda;
      } else {
        if (angle(lambda, lambda1) > angle(lambda02, lambda1))
          lambda02 = lambda;
      }
    } else {
      if (lambda1 >= lambda02) {
        if (lambda < lambda02)
          lambda02 = lambda;
        if (lambda > lambda1)
          lambda1 = lambda;
      } else {
        if (lambda > lambda2) {
          if (angle(lambda02, lambda) > angle(lambda02, lambda1))
            lambda1 = lambda;
        } else {
          if (angle(lambda, lambda1) > angle(lambda02, lambda1))
            lambda02 = lambda;
        }
      }
    }
  } else {
    ranges.push(range2 = [lambda02 = lambda, lambda1 = lambda]);
  }
  if (phi2 < phi0)
    phi0 = phi2;
  if (phi2 > phi1)
    phi1 = phi2;
  p0 = p, lambda2 = lambda;
}
function boundsLineStart() {
  boundsStream.point = linePoint;
}
function boundsLineEnd() {
  range2[0] = lambda02, range2[1] = lambda1;
  boundsStream.point = boundsPoint;
  p0 = null;
}
function boundsRingPoint(lambda, phi2) {
  if (p0) {
    var delta = lambda - lambda2;
    deltaSum.add(abs3(delta) > 180 ? delta + (delta > 0 ? 360 : -360) : delta);
  } else {
    lambda002 = lambda, phi002 = phi2;
  }
  areaStream.point(lambda, phi2);
  linePoint(lambda, phi2);
}
function boundsRingStart() {
  areaStream.lineStart();
}
function boundsRingEnd() {
  boundsRingPoint(lambda002, phi002);
  areaStream.lineEnd();
  if (abs3(deltaSum) > epsilon6)
    lambda02 = -(lambda1 = 180);
  range2[0] = lambda02, range2[1] = lambda1;
  p0 = null;
}
function angle(lambda04, lambda12) {
  return (lambda12 -= lambda04) < 0 ? lambda12 + 360 : lambda12;
}
function rangeCompare(a3, b) {
  return a3[0] - b[0];
}
function rangeContains(range3, x4) {
  return range3[0] <= range3[1] ? range3[0] <= x4 && x4 <= range3[1] : x4 < range3[0] || range3[1] < x4;
}
function bounds_default(feature) {
  var i, n2, a3, b, merged, deltaMax, delta;
  phi1 = lambda1 = -(lambda02 = phi0 = Infinity);
  ranges = [];
  stream_default(feature, boundsStream);
  if (n2 = ranges.length) {
    ranges.sort(rangeCompare);
    for (i = 1, a3 = ranges[0], merged = [a3]; i < n2; ++i) {
      b = ranges[i];
      if (rangeContains(a3, b[0]) || rangeContains(a3, b[1])) {
        if (angle(a3[0], b[1]) > angle(a3[0], a3[1]))
          a3[1] = b[1];
        if (angle(b[0], a3[1]) > angle(a3[0], a3[1]))
          a3[0] = b[0];
      } else {
        merged.push(a3 = b);
      }
    }
    for (deltaMax = -Infinity, n2 = merged.length - 1, i = 0, a3 = merged[n2]; i <= n2; a3 = b, ++i) {
      b = merged[i];
      if ((delta = angle(a3[1], b[0])) > deltaMax)
        deltaMax = delta, lambda02 = b[0], lambda1 = a3[1];
    }
  }
  ranges = range2 = null;
  return lambda02 === Infinity || phi0 === Infinity ? [[NaN, NaN], [NaN, NaN]] : [[lambda02, phi0], [lambda1, phi1]];
}

// node_modules/d3-geo/src/centroid.js
var W0;
var W1;
var X0;
var Y0;
var Z0;
var X1;
var Y1;
var Z1;
var X2;
var Y2;
var Z2;
var lambda003;
var phi003;
var x0;
var y0;
var z0;
var centroidStream = {
  sphere: noop2,
  point: centroidPoint,
  lineStart: centroidLineStart,
  lineEnd: centroidLineEnd,
  polygonStart: function() {
    centroidStream.lineStart = centroidRingStart;
    centroidStream.lineEnd = centroidRingEnd;
  },
  polygonEnd: function() {
    centroidStream.lineStart = centroidLineStart;
    centroidStream.lineEnd = centroidLineEnd;
  }
};
function centroidPoint(lambda, phi2) {
  lambda *= radians2, phi2 *= radians2;
  var cosPhi = cos2(phi2);
  centroidPointCartesian(cosPhi * cos2(lambda), cosPhi * sin2(lambda), sin2(phi2));
}
function centroidPointCartesian(x4, y4, z) {
  ++W0;
  X0 += (x4 - X0) / W0;
  Y0 += (y4 - Y0) / W0;
  Z0 += (z - Z0) / W0;
}
function centroidLineStart() {
  centroidStream.point = centroidLinePointFirst;
}
function centroidLinePointFirst(lambda, phi2) {
  lambda *= radians2, phi2 *= radians2;
  var cosPhi = cos2(phi2);
  x0 = cosPhi * cos2(lambda);
  y0 = cosPhi * sin2(lambda);
  z0 = sin2(phi2);
  centroidStream.point = centroidLinePoint;
  centroidPointCartesian(x0, y0, z0);
}
function centroidLinePoint(lambda, phi2) {
  lambda *= radians2, phi2 *= radians2;
  var cosPhi = cos2(phi2), x4 = cosPhi * cos2(lambda), y4 = cosPhi * sin2(lambda), z = sin2(phi2), w = atan2(sqrt((w = y0 * z - z0 * y4) * w + (w = z0 * x4 - x0 * z) * w + (w = x0 * y4 - y0 * x4) * w), x0 * x4 + y0 * y4 + z0 * z);
  W1 += w;
  X1 += w * (x0 + (x0 = x4));
  Y1 += w * (y0 + (y0 = y4));
  Z1 += w * (z0 + (z0 = z));
  centroidPointCartesian(x0, y0, z0);
}
function centroidLineEnd() {
  centroidStream.point = centroidPoint;
}
function centroidRingStart() {
  centroidStream.point = centroidRingPointFirst;
}
function centroidRingEnd() {
  centroidRingPoint(lambda003, phi003);
  centroidStream.point = centroidPoint;
}
function centroidRingPointFirst(lambda, phi2) {
  lambda003 = lambda, phi003 = phi2;
  lambda *= radians2, phi2 *= radians2;
  centroidStream.point = centroidRingPoint;
  var cosPhi = cos2(phi2);
  x0 = cosPhi * cos2(lambda);
  y0 = cosPhi * sin2(lambda);
  z0 = sin2(phi2);
  centroidPointCartesian(x0, y0, z0);
}
function centroidRingPoint(lambda, phi2) {
  lambda *= radians2, phi2 *= radians2;
  var cosPhi = cos2(phi2), x4 = cosPhi * cos2(lambda), y4 = cosPhi * sin2(lambda), z = sin2(phi2), cx = y0 * z - z0 * y4, cy = z0 * x4 - x0 * z, cz = x0 * y4 - y0 * x4, m2 = hypot(cx, cy, cz), w = asin(m2), v = m2 && -w / m2;
  X2.add(v * cx);
  Y2.add(v * cy);
  Z2.add(v * cz);
  W1 += w;
  X1 += w * (x0 + (x0 = x4));
  Y1 += w * (y0 + (y0 = y4));
  Z1 += w * (z0 + (z0 = z));
  centroidPointCartesian(x0, y0, z0);
}
function centroid_default(object2) {
  W0 = W1 = X0 = Y0 = Z0 = X1 = Y1 = Z1 = 0;
  X2 = new Adder();
  Y2 = new Adder();
  Z2 = new Adder();
  stream_default(object2, centroidStream);
  var x4 = +X2, y4 = +Y2, z = +Z2, m2 = hypot(x4, y4, z);
  if (m2 < epsilon22) {
    x4 = X1, y4 = Y1, z = Z1;
    if (W1 < epsilon6)
      x4 = X0, y4 = Y0, z = Z0;
    m2 = hypot(x4, y4, z);
    if (m2 < epsilon22)
      return [NaN, NaN];
  }
  return [atan2(y4, x4) * degrees3, asin(z / m2) * degrees3];
}

// node_modules/d3-geo/src/constant.js
function constant_default9(x4) {
  return function() {
    return x4;
  };
}

// node_modules/d3-geo/src/compose.js
function compose_default(a3, b) {
  function compose(x4, y4) {
    return x4 = a3(x4, y4), b(x4[0], x4[1]);
  }
  if (a3.invert && b.invert)
    compose.invert = function(x4, y4) {
      return x4 = b.invert(x4, y4), x4 && a3.invert(x4[0], x4[1]);
    };
  return compose;
}

// node_modules/d3-geo/src/rotation.js
function rotationIdentity(lambda, phi2) {
  return [abs3(lambda) > pi4 ? lambda + Math.round(-lambda / tau5) * tau5 : lambda, phi2];
}
rotationIdentity.invert = rotationIdentity;
function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {
  return (deltaLambda %= tau5) ? deltaPhi || deltaGamma ? compose_default(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma)) : rotationLambda(deltaLambda) : deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma) : rotationIdentity;
}
function forwardRotationLambda(deltaLambda) {
  return function(lambda, phi2) {
    return lambda += deltaLambda, [lambda > pi4 ? lambda - tau5 : lambda < -pi4 ? lambda + tau5 : lambda, phi2];
  };
}
function rotationLambda(deltaLambda) {
  var rotation = forwardRotationLambda(deltaLambda);
  rotation.invert = forwardRotationLambda(-deltaLambda);
  return rotation;
}
function rotationPhiGamma(deltaPhi, deltaGamma) {
  var cosDeltaPhi = cos2(deltaPhi), sinDeltaPhi = sin2(deltaPhi), cosDeltaGamma = cos2(deltaGamma), sinDeltaGamma = sin2(deltaGamma);
  function rotation(lambda, phi2) {
    var cosPhi = cos2(phi2), x4 = cos2(lambda) * cosPhi, y4 = sin2(lambda) * cosPhi, z = sin2(phi2), k2 = z * cosDeltaPhi + x4 * sinDeltaPhi;
    return [
      atan2(y4 * cosDeltaGamma - k2 * sinDeltaGamma, x4 * cosDeltaPhi - z * sinDeltaPhi),
      asin(k2 * cosDeltaGamma + y4 * sinDeltaGamma)
    ];
  }
  rotation.invert = function(lambda, phi2) {
    var cosPhi = cos2(phi2), x4 = cos2(lambda) * cosPhi, y4 = sin2(lambda) * cosPhi, z = sin2(phi2), k2 = z * cosDeltaGamma - y4 * sinDeltaGamma;
    return [
      atan2(y4 * cosDeltaGamma + z * sinDeltaGamma, x4 * cosDeltaPhi + k2 * sinDeltaPhi),
      asin(k2 * cosDeltaPhi - x4 * sinDeltaPhi)
    ];
  };
  return rotation;
}
function rotation_default(rotate2) {
  rotate2 = rotateRadians(rotate2[0] * radians2, rotate2[1] * radians2, rotate2.length > 2 ? rotate2[2] * radians2 : 0);
  function forward(coordinates2) {
    coordinates2 = rotate2(coordinates2[0] * radians2, coordinates2[1] * radians2);
    return coordinates2[0] *= degrees3, coordinates2[1] *= degrees3, coordinates2;
  }
  forward.invert = function(coordinates2) {
    coordinates2 = rotate2.invert(coordinates2[0] * radians2, coordinates2[1] * radians2);
    return coordinates2[0] *= degrees3, coordinates2[1] *= degrees3, coordinates2;
  };
  return forward;
}

// node_modules/d3-geo/src/circle.js
function circleStream(stream, radius, delta, direction, t03, t13) {
  if (!delta)
    return;
  var cosRadius = cos2(radius), sinRadius = sin2(radius), step = direction * delta;
  if (t03 == null) {
    t03 = radius + direction * tau5;
    t13 = radius - step / 2;
  } else {
    t03 = circleRadius(cosRadius, t03);
    t13 = circleRadius(cosRadius, t13);
    if (direction > 0 ? t03 < t13 : t03 > t13)
      t03 += direction * tau5;
  }
  for (var point6, t = t03; direction > 0 ? t > t13 : t < t13; t -= step) {
    point6 = spherical([cosRadius, -sinRadius * cos2(t), -sinRadius * sin2(t)]);
    stream.point(point6[0], point6[1]);
  }
}
function circleRadius(cosRadius, point6) {
  point6 = cartesian(point6), point6[0] -= cosRadius;
  cartesianNormalizeInPlace(point6);
  var radius = acos(-point6[1]);
  return ((-point6[2] < 0 ? -radius : radius) + tau5 - epsilon6) % tau5;
}
function circle_default() {
  var center2 = constant_default9([0, 0]), radius = constant_default9(90), precision = constant_default9(6), ring, rotate2, stream = { point: point6 };
  function point6(x4, y4) {
    ring.push(x4 = rotate2(x4, y4));
    x4[0] *= degrees3, x4[1] *= degrees3;
  }
  function circle3() {
    var c5 = center2.apply(this, arguments), r = radius.apply(this, arguments) * radians2, p = precision.apply(this, arguments) * radians2;
    ring = [];
    rotate2 = rotateRadians(-c5[0] * radians2, -c5[1] * radians2, 0).invert;
    circleStream(stream, r, p, 1);
    c5 = { type: "Polygon", coordinates: [ring] };
    ring = rotate2 = null;
    return c5;
  }
  circle3.center = function(_) {
    return arguments.length ? (center2 = typeof _ === "function" ? _ : constant_default9([+_[0], +_[1]]), circle3) : center2;
  };
  circle3.radius = function(_) {
    return arguments.length ? (radius = typeof _ === "function" ? _ : constant_default9(+_), circle3) : radius;
  };
  circle3.precision = function(_) {
    return arguments.length ? (precision = typeof _ === "function" ? _ : constant_default9(+_), circle3) : precision;
  };
  return circle3;
}

// node_modules/d3-geo/src/clip/buffer.js
function buffer_default2() {
  var lines = [], line;
  return {
    point: function(x4, y4, m2) {
      line.push([x4, y4, m2]);
    },
    lineStart: function() {
      lines.push(line = []);
    },
    lineEnd: noop2,
    rejoin: function() {
      if (lines.length > 1)
        lines.push(lines.pop().concat(lines.shift()));
    },
    result: function() {
      var result = lines;
      lines = [];
      line = null;
      return result;
    }
  };
}

// node_modules/d3-geo/src/pointEqual.js
function pointEqual_default(a3, b) {
  return abs3(a3[0] - b[0]) < epsilon6 && abs3(a3[1] - b[1]) < epsilon6;
}

// node_modules/d3-geo/src/clip/rejoin.js
function Intersection(point6, points, other, entry) {
  this.x = point6;
  this.z = points;
  this.o = other;
  this.e = entry;
  this.v = false;
  this.n = this.p = null;
}
function rejoin_default(segments, compareIntersection2, startInside, interpolate, stream) {
  var subject = [], clip = [], i, n2;
  segments.forEach(function(segment) {
    if ((n3 = segment.length - 1) <= 0)
      return;
    var n3, p02 = segment[0], p1 = segment[n3], x4;
    if (pointEqual_default(p02, p1)) {
      if (!p02[2] && !p1[2]) {
        stream.lineStart();
        for (i = 0; i < n3; ++i)
          stream.point((p02 = segment[i])[0], p02[1]);
        stream.lineEnd();
        return;
      }
      p1[0] += 2 * epsilon6;
    }
    subject.push(x4 = new Intersection(p02, segment, null, true));
    clip.push(x4.o = new Intersection(p02, null, x4, false));
    subject.push(x4 = new Intersection(p1, segment, null, false));
    clip.push(x4.o = new Intersection(p1, null, x4, true));
  });
  if (!subject.length)
    return;
  clip.sort(compareIntersection2);
  link(subject);
  link(clip);
  for (i = 0, n2 = clip.length; i < n2; ++i) {
    clip[i].e = startInside = !startInside;
  }
  var start2 = subject[0], points, point6;
  while (1) {
    var current = start2, isSubject = true;
    while (current.v)
      if ((current = current.n) === start2)
        return;
    points = current.z;
    stream.lineStart();
    do {
      current.v = current.o.v = true;
      if (current.e) {
        if (isSubject) {
          for (i = 0, n2 = points.length; i < n2; ++i)
            stream.point((point6 = points[i])[0], point6[1]);
        } else {
          interpolate(current.x, current.n.x, 1, stream);
        }
        current = current.n;
      } else {
        if (isSubject) {
          points = current.p.z;
          for (i = points.length - 1; i >= 0; --i)
            stream.point((point6 = points[i])[0], point6[1]);
        } else {
          interpolate(current.x, current.p.x, -1, stream);
        }
        current = current.p;
      }
      current = current.o;
      points = current.z;
      isSubject = !isSubject;
    } while (!current.v);
    stream.lineEnd();
  }
}
function link(array3) {
  if (!(n2 = array3.length))
    return;
  var n2, i = 0, a3 = array3[0], b;
  while (++i < n2) {
    a3.n = b = array3[i];
    b.p = a3;
    a3 = b;
  }
  a3.n = b = array3[0];
  b.p = a3;
}

// node_modules/d3-geo/src/polygonContains.js
function longitude(point6) {
  if (abs3(point6[0]) <= pi4)
    return point6[0];
  else
    return sign(point6[0]) * ((abs3(point6[0]) + pi4) % tau5 - pi4);
}
function polygonContains_default(polygon, point6) {
  var lambda = longitude(point6), phi2 = point6[1], sinPhi = sin2(phi2), normal = [sin2(lambda), -cos2(lambda), 0], angle2 = 0, winding = 0;
  var sum3 = new Adder();
  if (sinPhi === 1)
    phi2 = halfPi3 + epsilon6;
  else if (sinPhi === -1)
    phi2 = -halfPi3 - epsilon6;
  for (var i = 0, n2 = polygon.length; i < n2; ++i) {
    if (!(m2 = (ring = polygon[i]).length))
      continue;
    var ring, m2, point0 = ring[m2 - 1], lambda04 = longitude(point0), phi02 = point0[1] / 2 + quarterPi, sinPhi03 = sin2(phi02), cosPhi03 = cos2(phi02);
    for (var j = 0; j < m2; ++j, lambda04 = lambda12, sinPhi03 = sinPhi1, cosPhi03 = cosPhi1, point0 = point1) {
      var point1 = ring[j], lambda12 = longitude(point1), phi12 = point1[1] / 2 + quarterPi, sinPhi1 = sin2(phi12), cosPhi1 = cos2(phi12), delta = lambda12 - lambda04, sign3 = delta >= 0 ? 1 : -1, absDelta = sign3 * delta, antimeridian = absDelta > pi4, k2 = sinPhi03 * sinPhi1;
      sum3.add(atan2(k2 * sign3 * sin2(absDelta), cosPhi03 * cosPhi1 + k2 * cos2(absDelta)));
      angle2 += antimeridian ? delta + sign3 * tau5 : delta;
      if (antimeridian ^ lambda04 >= lambda ^ lambda12 >= lambda) {
        var arc = cartesianCross(cartesian(point0), cartesian(point1));
        cartesianNormalizeInPlace(arc);
        var intersection2 = cartesianCross(normal, arc);
        cartesianNormalizeInPlace(intersection2);
        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection2[2]);
        if (phi2 > phiArc || phi2 === phiArc && (arc[0] || arc[1])) {
          winding += antimeridian ^ delta >= 0 ? 1 : -1;
        }
      }
    }
  }
  return (angle2 < -epsilon6 || angle2 < epsilon6 && sum3 < -epsilon22) ^ winding & 1;
}

// node_modules/d3-geo/src/clip/index.js
function clip_default(pointVisible, clipLine, interpolate, start2) {
  return function(sink) {
    var line = clipLine(sink), ringBuffer = buffer_default2(), ringSink = clipLine(ringBuffer), polygonStarted = false, polygon, segments, ring;
    var clip = {
      point: point6,
      lineStart,
      lineEnd,
      polygonStart: function() {
        clip.point = pointRing;
        clip.lineStart = ringStart;
        clip.lineEnd = ringEnd;
        segments = [];
        polygon = [];
      },
      polygonEnd: function() {
        clip.point = point6;
        clip.lineStart = lineStart;
        clip.lineEnd = lineEnd;
        segments = merge(segments);
        var startInside = polygonContains_default(polygon, start2);
        if (segments.length) {
          if (!polygonStarted)
            sink.polygonStart(), polygonStarted = true;
          rejoin_default(segments, compareIntersection, startInside, interpolate, sink);
        } else if (startInside) {
          if (!polygonStarted)
            sink.polygonStart(), polygonStarted = true;
          sink.lineStart();
          interpolate(null, null, 1, sink);
          sink.lineEnd();
        }
        if (polygonStarted)
          sink.polygonEnd(), polygonStarted = false;
        segments = polygon = null;
      },
      sphere: function() {
        sink.polygonStart();
        sink.lineStart();
        interpolate(null, null, 1, sink);
        sink.lineEnd();
        sink.polygonEnd();
      }
    };
    function point6(lambda, phi2) {
      if (pointVisible(lambda, phi2))
        sink.point(lambda, phi2);
    }
    function pointLine(lambda, phi2) {
      line.point(lambda, phi2);
    }
    function lineStart() {
      clip.point = pointLine;
      line.lineStart();
    }
    function lineEnd() {
      clip.point = point6;
      line.lineEnd();
    }
    function pointRing(lambda, phi2) {
      ring.push([lambda, phi2]);
      ringSink.point(lambda, phi2);
    }
    function ringStart() {
      ringSink.lineStart();
      ring = [];
    }
    function ringEnd() {
      pointRing(ring[0][0], ring[0][1]);
      ringSink.lineEnd();
      var clean = ringSink.clean(), ringSegments = ringBuffer.result(), i, n2 = ringSegments.length, m2, segment, point7;
      ring.pop();
      polygon.push(ring);
      ring = null;
      if (!n2)
        return;
      if (clean & 1) {
        segment = ringSegments[0];
        if ((m2 = segment.length - 1) > 0) {
          if (!polygonStarted)
            sink.polygonStart(), polygonStarted = true;
          sink.lineStart();
          for (i = 0; i < m2; ++i)
            sink.point((point7 = segment[i])[0], point7[1]);
          sink.lineEnd();
        }
        return;
      }
      if (n2 > 1 && clean & 2)
        ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));
      segments.push(ringSegments.filter(validSegment));
    }
    return clip;
  };
}
function validSegment(segment) {
  return segment.length > 1;
}
function compareIntersection(a3, b) {
  return ((a3 = a3.x)[0] < 0 ? a3[1] - halfPi3 - epsilon6 : halfPi3 - a3[1]) - ((b = b.x)[0] < 0 ? b[1] - halfPi3 - epsilon6 : halfPi3 - b[1]);
}

// node_modules/d3-geo/src/clip/antimeridian.js
var antimeridian_default = clip_default(
  function() {
    return true;
  },
  clipAntimeridianLine,
  clipAntimeridianInterpolate,
  [-pi4, -halfPi3]
);
function clipAntimeridianLine(stream) {
  var lambda04 = NaN, phi02 = NaN, sign0 = NaN, clean;
  return {
    lineStart: function() {
      stream.lineStart();
      clean = 1;
    },
    point: function(lambda12, phi12) {
      var sign1 = lambda12 > 0 ? pi4 : -pi4, delta = abs3(lambda12 - lambda04);
      if (abs3(delta - pi4) < epsilon6) {
        stream.point(lambda04, phi02 = (phi02 + phi12) / 2 > 0 ? halfPi3 : -halfPi3);
        stream.point(sign0, phi02);
        stream.lineEnd();
        stream.lineStart();
        stream.point(sign1, phi02);
        stream.point(lambda12, phi02);
        clean = 0;
      } else if (sign0 !== sign1 && delta >= pi4) {
        if (abs3(lambda04 - sign0) < epsilon6)
          lambda04 -= sign0 * epsilon6;
        if (abs3(lambda12 - sign1) < epsilon6)
          lambda12 -= sign1 * epsilon6;
        phi02 = clipAntimeridianIntersect(lambda04, phi02, lambda12, phi12);
        stream.point(sign0, phi02);
        stream.lineEnd();
        stream.lineStart();
        stream.point(sign1, phi02);
        clean = 0;
      }
      stream.point(lambda04 = lambda12, phi02 = phi12);
      sign0 = sign1;
    },
    lineEnd: function() {
      stream.lineEnd();
      lambda04 = phi02 = NaN;
    },
    clean: function() {
      return 2 - clean;
    }
  };
}
function clipAntimeridianIntersect(lambda04, phi02, lambda12, phi12) {
  var cosPhi03, cosPhi1, sinLambda0Lambda1 = sin2(lambda04 - lambda12);
  return abs3(sinLambda0Lambda1) > epsilon6 ? atan((sin2(phi02) * (cosPhi1 = cos2(phi12)) * sin2(lambda12) - sin2(phi12) * (cosPhi03 = cos2(phi02)) * sin2(lambda04)) / (cosPhi03 * cosPhi1 * sinLambda0Lambda1)) : (phi02 + phi12) / 2;
}
function clipAntimeridianInterpolate(from, to, direction, stream) {
  var phi2;
  if (from == null) {
    phi2 = direction * halfPi3;
    stream.point(-pi4, phi2);
    stream.point(0, phi2);
    stream.point(pi4, phi2);
    stream.point(pi4, 0);
    stream.point(pi4, -phi2);
    stream.point(0, -phi2);
    stream.point(-pi4, -phi2);
    stream.point(-pi4, 0);
    stream.point(-pi4, phi2);
  } else if (abs3(from[0] - to[0]) > epsilon6) {
    var lambda = from[0] < to[0] ? pi4 : -pi4;
    phi2 = direction * lambda / 2;
    stream.point(-lambda, phi2);
    stream.point(0, phi2);
    stream.point(lambda, phi2);
  } else {
    stream.point(to[0], to[1]);
  }
}

// node_modules/d3-geo/src/clip/circle.js
function circle_default2(radius) {
  var cr = cos2(radius), delta = 6 * radians2, smallRadius = cr > 0, notHemisphere = abs3(cr) > epsilon6;
  function interpolate(from, to, direction, stream) {
    circleStream(stream, radius, delta, direction, from, to);
  }
  function visible(lambda, phi2) {
    return cos2(lambda) * cos2(phi2) > cr;
  }
  function clipLine(stream) {
    var point0, c0, v0, v00, clean;
    return {
      lineStart: function() {
        v00 = v0 = false;
        clean = 1;
      },
      point: function(lambda, phi2) {
        var point1 = [lambda, phi2], point22, v = visible(lambda, phi2), c5 = smallRadius ? v ? 0 : code(lambda, phi2) : v ? code(lambda + (lambda < 0 ? pi4 : -pi4), phi2) : 0;
        if (!point0 && (v00 = v0 = v))
          stream.lineStart();
        if (v !== v0) {
          point22 = intersect2(point0, point1);
          if (!point22 || pointEqual_default(point0, point22) || pointEqual_default(point1, point22))
            point1[2] = 1;
        }
        if (v !== v0) {
          clean = 0;
          if (v) {
            stream.lineStart();
            point22 = intersect2(point1, point0);
            stream.point(point22[0], point22[1]);
          } else {
            point22 = intersect2(point0, point1);
            stream.point(point22[0], point22[1], 2);
            stream.lineEnd();
          }
          point0 = point22;
        } else if (notHemisphere && point0 && smallRadius ^ v) {
          var t;
          if (!(c5 & c0) && (t = intersect2(point1, point0, true))) {
            clean = 0;
            if (smallRadius) {
              stream.lineStart();
              stream.point(t[0][0], t[0][1]);
              stream.point(t[1][0], t[1][1]);
              stream.lineEnd();
            } else {
              stream.point(t[1][0], t[1][1]);
              stream.lineEnd();
              stream.lineStart();
              stream.point(t[0][0], t[0][1], 3);
            }
          }
        }
        if (v && (!point0 || !pointEqual_default(point0, point1))) {
          stream.point(point1[0], point1[1]);
        }
        point0 = point1, v0 = v, c0 = c5;
      },
      lineEnd: function() {
        if (v0)
          stream.lineEnd();
        point0 = null;
      },
      clean: function() {
        return clean | (v00 && v0) << 1;
      }
    };
  }
  function intersect2(a3, b, two) {
    var pa = cartesian(a3), pb = cartesian(b);
    var n1 = [1, 0, 0], n2 = cartesianCross(pa, pb), n2n2 = cartesianDot(n2, n2), n1n2 = n2[0], determinant = n2n2 - n1n2 * n1n2;
    if (!determinant)
      return !two && a3;
    var c1 = cr * n2n2 / determinant, c22 = -cr * n1n2 / determinant, n1xn2 = cartesianCross(n1, n2), A5 = cartesianScale(n1, c1), B2 = cartesianScale(n2, c22);
    cartesianAddInPlace(A5, B2);
    var u = n1xn2, w = cartesianDot(A5, u), uu = cartesianDot(u, u), t22 = w * w - uu * (cartesianDot(A5, A5) - 1);
    if (t22 < 0)
      return;
    var t = sqrt(t22), q = cartesianScale(u, (-w - t) / uu);
    cartesianAddInPlace(q, A5);
    q = spherical(q);
    if (!two)
      return q;
    var lambda04 = a3[0], lambda12 = b[0], phi02 = a3[1], phi12 = b[1], z;
    if (lambda12 < lambda04)
      z = lambda04, lambda04 = lambda12, lambda12 = z;
    var delta2 = lambda12 - lambda04, polar = abs3(delta2 - pi4) < epsilon6, meridian = polar || delta2 < epsilon6;
    if (!polar && phi12 < phi02)
      z = phi02, phi02 = phi12, phi12 = z;
    if (meridian ? polar ? phi02 + phi12 > 0 ^ q[1] < (abs3(q[0] - lambda04) < epsilon6 ? phi02 : phi12) : phi02 <= q[1] && q[1] <= phi12 : delta2 > pi4 ^ (lambda04 <= q[0] && q[0] <= lambda12)) {
      var q1 = cartesianScale(u, (-w + t) / uu);
      cartesianAddInPlace(q1, A5);
      return [q, spherical(q1)];
    }
  }
  function code(lambda, phi2) {
    var r = smallRadius ? radius : pi4 - radius, code2 = 0;
    if (lambda < -r)
      code2 |= 1;
    else if (lambda > r)
      code2 |= 2;
    if (phi2 < -r)
      code2 |= 4;
    else if (phi2 > r)
      code2 |= 8;
    return code2;
  }
  return clip_default(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi4, radius - pi4]);
}

// node_modules/d3-geo/src/clip/line.js
function line_default(a3, b, x06, y06, x12, y12) {
  var ax = a3[0], ay = a3[1], bx = b[0], by = b[1], t03 = 0, t13 = 1, dx = bx - ax, dy = by - ay, r;
  r = x06 - ax;
  if (!dx && r > 0)
    return;
  r /= dx;
  if (dx < 0) {
    if (r < t03)
      return;
    if (r < t13)
      t13 = r;
  } else if (dx > 0) {
    if (r > t13)
      return;
    if (r > t03)
      t03 = r;
  }
  r = x12 - ax;
  if (!dx && r < 0)
    return;
  r /= dx;
  if (dx < 0) {
    if (r > t13)
      return;
    if (r > t03)
      t03 = r;
  } else if (dx > 0) {
    if (r < t03)
      return;
    if (r < t13)
      t13 = r;
  }
  r = y06 - ay;
  if (!dy && r > 0)
    return;
  r /= dy;
  if (dy < 0) {
    if (r < t03)
      return;
    if (r < t13)
      t13 = r;
  } else if (dy > 0) {
    if (r > t13)
      return;
    if (r > t03)
      t03 = r;
  }
  r = y12 - ay;
  if (!dy && r < 0)
    return;
  r /= dy;
  if (dy < 0) {
    if (r > t13)
      return;
    if (r > t03)
      t03 = r;
  } else if (dy > 0) {
    if (r < t03)
      return;
    if (r < t13)
      t13 = r;
  }
  if (t03 > 0)
    a3[0] = ax + t03 * dx, a3[1] = ay + t03 * dy;
  if (t13 < 1)
    b[0] = ax + t13 * dx, b[1] = ay + t13 * dy;
  return true;
}

// node_modules/d3-geo/src/clip/rectangle.js
var clipMax = 1e9;
var clipMin = -clipMax;
function clipRectangle(x06, y06, x12, y12) {
  function visible(x4, y4) {
    return x06 <= x4 && x4 <= x12 && y06 <= y4 && y4 <= y12;
  }
  function interpolate(from, to, direction, stream) {
    var a3 = 0, a1 = 0;
    if (from == null || (a3 = corner(from, direction)) !== (a1 = corner(to, direction)) || comparePoint(from, to) < 0 ^ direction > 0) {
      do
        stream.point(a3 === 0 || a3 === 3 ? x06 : x12, a3 > 1 ? y12 : y06);
      while ((a3 = (a3 + direction + 4) % 4) !== a1);
    } else {
      stream.point(to[0], to[1]);
    }
  }
  function corner(p, direction) {
    return abs3(p[0] - x06) < epsilon6 ? direction > 0 ? 0 : 3 : abs3(p[0] - x12) < epsilon6 ? direction > 0 ? 2 : 1 : abs3(p[1] - y06) < epsilon6 ? direction > 0 ? 1 : 0 : direction > 0 ? 3 : 2;
  }
  function compareIntersection2(a3, b) {
    return comparePoint(a3.x, b.x);
  }
  function comparePoint(a3, b) {
    var ca = corner(a3, 1), cb = corner(b, 1);
    return ca !== cb ? ca - cb : ca === 0 ? b[1] - a3[1] : ca === 1 ? a3[0] - b[0] : ca === 2 ? a3[1] - b[1] : b[0] - a3[0];
  }
  return function(stream) {
    var activeStream = stream, bufferStream = buffer_default2(), segments, polygon, ring, x__, y__, v__, x_, y_, v_, first, clean;
    var clipStream = {
      point: point6,
      lineStart,
      lineEnd,
      polygonStart,
      polygonEnd
    };
    function point6(x4, y4) {
      if (visible(x4, y4))
        activeStream.point(x4, y4);
    }
    function polygonInside() {
      var winding = 0;
      for (var i = 0, n2 = polygon.length; i < n2; ++i) {
        for (var ring2 = polygon[i], j = 1, m2 = ring2.length, point7 = ring2[0], a0, a1, b02 = point7[0], b12 = point7[1]; j < m2; ++j) {
          a0 = b02, a1 = b12, point7 = ring2[j], b02 = point7[0], b12 = point7[1];
          if (a1 <= y12) {
            if (b12 > y12 && (b02 - a0) * (y12 - a1) > (b12 - a1) * (x06 - a0))
              ++winding;
          } else {
            if (b12 <= y12 && (b02 - a0) * (y12 - a1) < (b12 - a1) * (x06 - a0))
              --winding;
          }
        }
      }
      return winding;
    }
    function polygonStart() {
      activeStream = bufferStream, segments = [], polygon = [], clean = true;
    }
    function polygonEnd() {
      var startInside = polygonInside(), cleanInside = clean && startInside, visible2 = (segments = merge(segments)).length;
      if (cleanInside || visible2) {
        stream.polygonStart();
        if (cleanInside) {
          stream.lineStart();
          interpolate(null, null, 1, stream);
          stream.lineEnd();
        }
        if (visible2) {
          rejoin_default(segments, compareIntersection2, startInside, interpolate, stream);
        }
        stream.polygonEnd();
      }
      activeStream = stream, segments = polygon = ring = null;
    }
    function lineStart() {
      clipStream.point = linePoint2;
      if (polygon)
        polygon.push(ring = []);
      first = true;
      v_ = false;
      x_ = y_ = NaN;
    }
    function lineEnd() {
      if (segments) {
        linePoint2(x__, y__);
        if (v__ && v_)
          bufferStream.rejoin();
        segments.push(bufferStream.result());
      }
      clipStream.point = point6;
      if (v_)
        activeStream.lineEnd();
    }
    function linePoint2(x4, y4) {
      var v = visible(x4, y4);
      if (polygon)
        ring.push([x4, y4]);
      if (first) {
        x__ = x4, y__ = y4, v__ = v;
        first = false;
        if (v) {
          activeStream.lineStart();
          activeStream.point(x4, y4);
        }
      } else {
        if (v && v_)
          activeStream.point(x4, y4);
        else {
          var a3 = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))], b = [x4 = Math.max(clipMin, Math.min(clipMax, x4)), y4 = Math.max(clipMin, Math.min(clipMax, y4))];
          if (line_default(a3, b, x06, y06, x12, y12)) {
            if (!v_) {
              activeStream.lineStart();
              activeStream.point(a3[0], a3[1]);
            }
            activeStream.point(b[0], b[1]);
            if (!v)
              activeStream.lineEnd();
            clean = false;
          } else if (v) {
            activeStream.lineStart();
            activeStream.point(x4, y4);
            clean = false;
          }
        }
      }
      x_ = x4, y_ = y4, v_ = v;
    }
    return clipStream;
  };
}

// node_modules/d3-geo/src/clip/extent.js
function extent_default3() {
  var x06 = 0, y06 = 0, x12 = 960, y12 = 500, cache, cacheStream, clip;
  return clip = {
    stream: function(stream) {
      return cache && cacheStream === stream ? cache : cache = clipRectangle(x06, y06, x12, y12)(cacheStream = stream);
    },
    extent: function(_) {
      return arguments.length ? (x06 = +_[0][0], y06 = +_[0][1], x12 = +_[1][0], y12 = +_[1][1], cache = cacheStream = null, clip) : [[x06, y06], [x12, y12]];
    }
  };
}

// node_modules/d3-geo/src/length.js
var lengthSum;
var lambda03;
var sinPhi02;
var cosPhi02;
var lengthStream = {
  sphere: noop2,
  point: noop2,
  lineStart: lengthLineStart,
  lineEnd: noop2,
  polygonStart: noop2,
  polygonEnd: noop2
};
function lengthLineStart() {
  lengthStream.point = lengthPointFirst;
  lengthStream.lineEnd = lengthLineEnd;
}
function lengthLineEnd() {
  lengthStream.point = lengthStream.lineEnd = noop2;
}
function lengthPointFirst(lambda, phi2) {
  lambda *= radians2, phi2 *= radians2;
  lambda03 = lambda, sinPhi02 = sin2(phi2), cosPhi02 = cos2(phi2);
  lengthStream.point = lengthPoint;
}
function lengthPoint(lambda, phi2) {
  lambda *= radians2, phi2 *= radians2;
  var sinPhi = sin2(phi2), cosPhi = cos2(phi2), delta = abs3(lambda - lambda03), cosDelta = cos2(delta), sinDelta = sin2(delta), x4 = cosPhi * sinDelta, y4 = cosPhi02 * sinPhi - sinPhi02 * cosPhi * cosDelta, z = sinPhi02 * sinPhi + cosPhi02 * cosPhi * cosDelta;
  lengthSum.add(atan2(sqrt(x4 * x4 + y4 * y4), z));
  lambda03 = lambda, sinPhi02 = sinPhi, cosPhi02 = cosPhi;
}
function length_default(object2) {
  lengthSum = new Adder();
  stream_default(object2, lengthStream);
  return +lengthSum;
}

// node_modules/d3-geo/src/distance.js
var coordinates = [null, null];
var object = { type: "LineString", coordinates };
function distance_default(a3, b) {
  coordinates[0] = a3;
  coordinates[1] = b;
  return length_default(object);
}

// node_modules/d3-geo/src/contains.js
var containsObjectType = {
  Feature: function(object2, point6) {
    return containsGeometry(object2.geometry, point6);
  },
  FeatureCollection: function(object2, point6) {
    var features = object2.features, i = -1, n2 = features.length;
    while (++i < n2)
      if (containsGeometry(features[i].geometry, point6))
        return true;
    return false;
  }
};
var containsGeometryType = {
  Sphere: function() {
    return true;
  },
  Point: function(object2, point6) {
    return containsPoint(object2.coordinates, point6);
  },
  MultiPoint: function(object2, point6) {
    var coordinates2 = object2.coordinates, i = -1, n2 = coordinates2.length;
    while (++i < n2)
      if (containsPoint(coordinates2[i], point6))
        return true;
    return false;
  },
  LineString: function(object2, point6) {
    return containsLine(object2.coordinates, point6);
  },
  MultiLineString: function(object2, point6) {
    var coordinates2 = object2.coordinates, i = -1, n2 = coordinates2.length;
    while (++i < n2)
      if (containsLine(coordinates2[i], point6))
        return true;
    return false;
  },
  Polygon: function(object2, point6) {
    return containsPolygon(object2.coordinates, point6);
  },
  MultiPolygon: function(object2, point6) {
    var coordinates2 = object2.coordinates, i = -1, n2 = coordinates2.length;
    while (++i < n2)
      if (containsPolygon(coordinates2[i], point6))
        return true;
    return false;
  },
  GeometryCollection: function(object2, point6) {
    var geometries = object2.geometries, i = -1, n2 = geometries.length;
    while (++i < n2)
      if (containsGeometry(geometries[i], point6))
        return true;
    return false;
  }
};
function containsGeometry(geometry, point6) {
  return geometry && containsGeometryType.hasOwnProperty(geometry.type) ? containsGeometryType[geometry.type](geometry, point6) : false;
}
function containsPoint(coordinates2, point6) {
  return distance_default(coordinates2, point6) === 0;
}
function containsLine(coordinates2, point6) {
  var ao, bo, ab;
  for (var i = 0, n2 = coordinates2.length; i < n2; i++) {
    bo = distance_default(coordinates2[i], point6);
    if (bo === 0)
      return true;
    if (i > 0) {
      ab = distance_default(coordinates2[i], coordinates2[i - 1]);
      if (ab > 0 && ao <= ab && bo <= ab && (ao + bo - ab) * (1 - Math.pow((ao - bo) / ab, 2)) < epsilon22 * ab)
        return true;
    }
    ao = bo;
  }
  return false;
}
function containsPolygon(coordinates2, point6) {
  return !!polygonContains_default(coordinates2.map(ringRadians), pointRadians(point6));
}
function ringRadians(ring) {
  return ring = ring.map(pointRadians), ring.pop(), ring;
}
function pointRadians(point6) {
  return [point6[0] * radians2, point6[1] * radians2];
}
function contains_default2(object2, point6) {
  return (object2 && containsObjectType.hasOwnProperty(object2.type) ? containsObjectType[object2.type] : containsGeometry)(object2, point6);
}

// node_modules/d3-geo/src/graticule.js
function graticuleX(y06, y12, dy) {
  var y4 = range_default(y06, y12 - epsilon6, dy).concat(y12);
  return function(x4) {
    return y4.map(function(y5) {
      return [x4, y5];
    });
  };
}
function graticuleY(x06, x12, dx) {
  var x4 = range_default(x06, x12 - epsilon6, dx).concat(x12);
  return function(y4) {
    return x4.map(function(x5) {
      return [x5, y4];
    });
  };
}
function graticule() {
  var x12, x06, X13, X03, y12, y06, Y13, Y03, dx = 10, dy = dx, DX = 90, DY = 360, x4, y4, X3, Y3, precision = 2.5;
  function graticule2() {
    return { type: "MultiLineString", coordinates: lines() };
  }
  function lines() {
    return range_default(ceil(X03 / DX) * DX, X13, DX).map(X3).concat(range_default(ceil(Y03 / DY) * DY, Y13, DY).map(Y3)).concat(range_default(ceil(x06 / dx) * dx, x12, dx).filter(function(x5) {
      return abs3(x5 % DX) > epsilon6;
    }).map(x4)).concat(range_default(ceil(y06 / dy) * dy, y12, dy).filter(function(y5) {
      return abs3(y5 % DY) > epsilon6;
    }).map(y4));
  }
  graticule2.lines = function() {
    return lines().map(function(coordinates2) {
      return { type: "LineString", coordinates: coordinates2 };
    });
  };
  graticule2.outline = function() {
    return {
      type: "Polygon",
      coordinates: [
        X3(X03).concat(
          Y3(Y13).slice(1),
          X3(X13).reverse().slice(1),
          Y3(Y03).reverse().slice(1)
        )
      ]
    };
  };
  graticule2.extent = function(_) {
    if (!arguments.length)
      return graticule2.extentMinor();
    return graticule2.extentMajor(_).extentMinor(_);
  };
  graticule2.extentMajor = function(_) {
    if (!arguments.length)
      return [[X03, Y03], [X13, Y13]];
    X03 = +_[0][0], X13 = +_[1][0];
    Y03 = +_[0][1], Y13 = +_[1][1];
    if (X03 > X13)
      _ = X03, X03 = X13, X13 = _;
    if (Y03 > Y13)
      _ = Y03, Y03 = Y13, Y13 = _;
    return graticule2.precision(precision);
  };
  graticule2.extentMinor = function(_) {
    if (!arguments.length)
      return [[x06, y06], [x12, y12]];
    x06 = +_[0][0], x12 = +_[1][0];
    y06 = +_[0][1], y12 = +_[1][1];
    if (x06 > x12)
      _ = x06, x06 = x12, x12 = _;
    if (y06 > y12)
      _ = y06, y06 = y12, y12 = _;
    return graticule2.precision(precision);
  };
  graticule2.step = function(_) {
    if (!arguments.length)
      return graticule2.stepMinor();
    return graticule2.stepMajor(_).stepMinor(_);
  };
  graticule2.stepMajor = function(_) {
    if (!arguments.length)
      return [DX, DY];
    DX = +_[0], DY = +_[1];
    return graticule2;
  };
  graticule2.stepMinor = function(_) {
    if (!arguments.length)
      return [dx, dy];
    dx = +_[0], dy = +_[1];
    return graticule2;
  };
  graticule2.precision = function(_) {
    if (!arguments.length)
      return precision;
    precision = +_;
    x4 = graticuleX(y06, y12, 90);
    y4 = graticuleY(x06, x12, precision);
    X3 = graticuleX(Y03, Y13, 90);
    Y3 = graticuleY(X03, X13, precision);
    return graticule2;
  };
  return graticule2.extentMajor([[-180, -90 + epsilon6], [180, 90 - epsilon6]]).extentMinor([[-180, -80 - epsilon6], [180, 80 + epsilon6]]);
}
function graticule10() {
  return graticule()();
}

// node_modules/d3-geo/src/interpolate.js
function interpolate_default2(a3, b) {
  var x06 = a3[0] * radians2, y06 = a3[1] * radians2, x12 = b[0] * radians2, y12 = b[1] * radians2, cy0 = cos2(y06), sy0 = sin2(y06), cy1 = cos2(y12), sy1 = sin2(y12), kx0 = cy0 * cos2(x06), ky0 = cy0 * sin2(x06), kx1 = cy1 * cos2(x12), ky1 = cy1 * sin2(x12), d = 2 * asin(sqrt(haversin(y12 - y06) + cy0 * cy1 * haversin(x12 - x06))), k2 = sin2(d);
  var interpolate = d ? function(t) {
    var B2 = sin2(t *= d) / k2, A5 = sin2(d - t) / k2, x4 = A5 * kx0 + B2 * kx1, y4 = A5 * ky0 + B2 * ky1, z = A5 * sy0 + B2 * sy1;
    return [
      atan2(y4, x4) * degrees3,
      atan2(z, sqrt(x4 * x4 + y4 * y4)) * degrees3
    ];
  } : function() {
    return [x06 * degrees3, y06 * degrees3];
  };
  interpolate.distance = d;
  return interpolate;
}

// node_modules/d3-geo/src/identity.js
var identity_default4 = (x4) => x4;

// node_modules/d3-geo/src/path/area.js
var areaSum2 = new Adder();
var areaRingSum2 = new Adder();
var x00;
var y00;
var x02;
var y02;
var areaStream2 = {
  point: noop2,
  lineStart: noop2,
  lineEnd: noop2,
  polygonStart: function() {
    areaStream2.lineStart = areaRingStart2;
    areaStream2.lineEnd = areaRingEnd2;
  },
  polygonEnd: function() {
    areaStream2.lineStart = areaStream2.lineEnd = areaStream2.point = noop2;
    areaSum2.add(abs3(areaRingSum2));
    areaRingSum2 = new Adder();
  },
  result: function() {
    var area = areaSum2 / 2;
    areaSum2 = new Adder();
    return area;
  }
};
function areaRingStart2() {
  areaStream2.point = areaPointFirst2;
}
function areaPointFirst2(x4, y4) {
  areaStream2.point = areaPoint2;
  x00 = x02 = x4, y00 = y02 = y4;
}
function areaPoint2(x4, y4) {
  areaRingSum2.add(y02 * x4 - x02 * y4);
  x02 = x4, y02 = y4;
}
function areaRingEnd2() {
  areaPoint2(x00, y00);
}
var area_default3 = areaStream2;

// node_modules/d3-geo/src/path/bounds.js
var x03 = Infinity;
var y03 = x03;
var x1 = -x03;
var y1 = x1;
var boundsStream2 = {
  point: boundsPoint2,
  lineStart: noop2,
  lineEnd: noop2,
  polygonStart: noop2,
  polygonEnd: noop2,
  result: function() {
    var bounds = [[x03, y03], [x1, y1]];
    x1 = y1 = -(y03 = x03 = Infinity);
    return bounds;
  }
};
function boundsPoint2(x4, y4) {
  if (x4 < x03)
    x03 = x4;
  if (x4 > x1)
    x1 = x4;
  if (y4 < y03)
    y03 = y4;
  if (y4 > y1)
    y1 = y4;
}
var bounds_default2 = boundsStream2;

// node_modules/d3-geo/src/path/centroid.js
var X02 = 0;
var Y02 = 0;
var Z02 = 0;
var X12 = 0;
var Y12 = 0;
var Z12 = 0;
var X22 = 0;
var Y22 = 0;
var Z22 = 0;
var x002;
var y002;
var x04;
var y04;
var centroidStream2 = {
  point: centroidPoint2,
  lineStart: centroidLineStart2,
  lineEnd: centroidLineEnd2,
  polygonStart: function() {
    centroidStream2.lineStart = centroidRingStart2;
    centroidStream2.lineEnd = centroidRingEnd2;
  },
  polygonEnd: function() {
    centroidStream2.point = centroidPoint2;
    centroidStream2.lineStart = centroidLineStart2;
    centroidStream2.lineEnd = centroidLineEnd2;
  },
  result: function() {
    var centroid = Z22 ? [X22 / Z22, Y22 / Z22] : Z12 ? [X12 / Z12, Y12 / Z12] : Z02 ? [X02 / Z02, Y02 / Z02] : [NaN, NaN];
    X02 = Y02 = Z02 = X12 = Y12 = Z12 = X22 = Y22 = Z22 = 0;
    return centroid;
  }
};
function centroidPoint2(x4, y4) {
  X02 += x4;
  Y02 += y4;
  ++Z02;
}
function centroidLineStart2() {
  centroidStream2.point = centroidPointFirstLine;
}
function centroidPointFirstLine(x4, y4) {
  centroidStream2.point = centroidPointLine;
  centroidPoint2(x04 = x4, y04 = y4);
}
function centroidPointLine(x4, y4) {
  var dx = x4 - x04, dy = y4 - y04, z = sqrt(dx * dx + dy * dy);
  X12 += z * (x04 + x4) / 2;
  Y12 += z * (y04 + y4) / 2;
  Z12 += z;
  centroidPoint2(x04 = x4, y04 = y4);
}
function centroidLineEnd2() {
  centroidStream2.point = centroidPoint2;
}
function centroidRingStart2() {
  centroidStream2.point = centroidPointFirstRing;
}
function centroidRingEnd2() {
  centroidPointRing(x002, y002);
}
function centroidPointFirstRing(x4, y4) {
  centroidStream2.point = centroidPointRing;
  centroidPoint2(x002 = x04 = x4, y002 = y04 = y4);
}
function centroidPointRing(x4, y4) {
  var dx = x4 - x04, dy = y4 - y04, z = sqrt(dx * dx + dy * dy);
  X12 += z * (x04 + x4) / 2;
  Y12 += z * (y04 + y4) / 2;
  Z12 += z;
  z = y04 * x4 - x04 * y4;
  X22 += z * (x04 + x4);
  Y22 += z * (y04 + y4);
  Z22 += z * 3;
  centroidPoint2(x04 = x4, y04 = y4);
}
var centroid_default2 = centroidStream2;

// node_modules/d3-geo/src/path/context.js
function PathContext(context) {
  this._context = context;
}
PathContext.prototype = {
  _radius: 4.5,
  pointRadius: function(_) {
    return this._radius = _, this;
  },
  polygonStart: function() {
    this._line = 0;
  },
  polygonEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._point = 0;
  },
  lineEnd: function() {
    if (this._line === 0)
      this._context.closePath();
    this._point = NaN;
  },
  point: function(x4, y4) {
    switch (this._point) {
      case 0: {
        this._context.moveTo(x4, y4);
        this._point = 1;
        break;
      }
      case 1: {
        this._context.lineTo(x4, y4);
        break;
      }
      default: {
        this._context.moveTo(x4 + this._radius, y4);
        this._context.arc(x4, y4, this._radius, 0, tau5);
        break;
      }
    }
  },
  result: noop2
};

// node_modules/d3-geo/src/path/measure.js
var lengthSum2 = new Adder();
var lengthRing;
var x003;
var y003;
var x05;
var y05;
var lengthStream2 = {
  point: noop2,
  lineStart: function() {
    lengthStream2.point = lengthPointFirst2;
  },
  lineEnd: function() {
    if (lengthRing)
      lengthPoint2(x003, y003);
    lengthStream2.point = noop2;
  },
  polygonStart: function() {
    lengthRing = true;
  },
  polygonEnd: function() {
    lengthRing = null;
  },
  result: function() {
    var length3 = +lengthSum2;
    lengthSum2 = new Adder();
    return length3;
  }
};
function lengthPointFirst2(x4, y4) {
  lengthStream2.point = lengthPoint2;
  x003 = x05 = x4, y003 = y05 = y4;
}
function lengthPoint2(x4, y4) {
  x05 -= x4, y05 -= y4;
  lengthSum2.add(sqrt(x05 * x05 + y05 * y05));
  x05 = x4, y05 = y4;
}
var measure_default = lengthStream2;

// node_modules/d3-geo/src/path/string.js
function PathString() {
  this._string = [];
}
PathString.prototype = {
  _radius: 4.5,
  _circle: circle(4.5),
  pointRadius: function(_) {
    if ((_ = +_) !== this._radius)
      this._radius = _, this._circle = null;
    return this;
  },
  polygonStart: function() {
    this._line = 0;
  },
  polygonEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._point = 0;
  },
  lineEnd: function() {
    if (this._line === 0)
      this._string.push("Z");
    this._point = NaN;
  },
  point: function(x4, y4) {
    switch (this._point) {
      case 0: {
        this._string.push("M", x4, ",", y4);
        this._point = 1;
        break;
      }
      case 1: {
        this._string.push("L", x4, ",", y4);
        break;
      }
      default: {
        if (this._circle == null)
          this._circle = circle(this._radius);
        this._string.push("M", x4, ",", y4, this._circle);
        break;
      }
    }
  },
  result: function() {
    if (this._string.length) {
      var result = this._string.join("");
      this._string = [];
      return result;
    } else {
      return null;
    }
  }
};
function circle(radius) {
  return "m0," + radius + "a" + radius + "," + radius + " 0 1,1 0," + -2 * radius + "a" + radius + "," + radius + " 0 1,1 0," + 2 * radius + "z";
}

// node_modules/d3-geo/src/path/index.js
function path_default2(projection2, context) {
  var pointRadius = 4.5, projectionStream, contextStream;
  function path2(object2) {
    if (object2) {
      if (typeof pointRadius === "function")
        contextStream.pointRadius(+pointRadius.apply(this, arguments));
      stream_default(object2, projectionStream(contextStream));
    }
    return contextStream.result();
  }
  path2.area = function(object2) {
    stream_default(object2, projectionStream(area_default3));
    return area_default3.result();
  };
  path2.measure = function(object2) {
    stream_default(object2, projectionStream(measure_default));
    return measure_default.result();
  };
  path2.bounds = function(object2) {
    stream_default(object2, projectionStream(bounds_default2));
    return bounds_default2.result();
  };
  path2.centroid = function(object2) {
    stream_default(object2, projectionStream(centroid_default2));
    return centroid_default2.result();
  };
  path2.projection = function(_) {
    return arguments.length ? (projectionStream = _ == null ? (projection2 = null, identity_default4) : (projection2 = _).stream, path2) : projection2;
  };
  path2.context = function(_) {
    if (!arguments.length)
      return context;
    contextStream = _ == null ? (context = null, new PathString()) : new PathContext(context = _);
    if (typeof pointRadius !== "function")
      contextStream.pointRadius(pointRadius);
    return path2;
  };
  path2.pointRadius = function(_) {
    if (!arguments.length)
      return pointRadius;
    pointRadius = typeof _ === "function" ? _ : (contextStream.pointRadius(+_), +_);
    return path2;
  };
  return path2.projection(projection2).context(context);
}

// node_modules/d3-geo/src/transform.js
function transform_default(methods) {
  return {
    stream: transformer(methods)
  };
}
function transformer(methods) {
  return function(stream) {
    var s3 = new TransformStream();
    for (var key in methods)
      s3[key] = methods[key];
    s3.stream = stream;
    return s3;
  };
}
function TransformStream() {
}
TransformStream.prototype = {
  constructor: TransformStream,
  point: function(x4, y4) {
    this.stream.point(x4, y4);
  },
  sphere: function() {
    this.stream.sphere();
  },
  lineStart: function() {
    this.stream.lineStart();
  },
  lineEnd: function() {
    this.stream.lineEnd();
  },
  polygonStart: function() {
    this.stream.polygonStart();
  },
  polygonEnd: function() {
    this.stream.polygonEnd();
  }
};

// node_modules/d3-geo/src/projection/fit.js
function fit(projection2, fitBounds, object2) {
  var clip = projection2.clipExtent && projection2.clipExtent();
  projection2.scale(150).translate([0, 0]);
  if (clip != null)
    projection2.clipExtent(null);
  stream_default(object2, projection2.stream(bounds_default2));
  fitBounds(bounds_default2.result());
  if (clip != null)
    projection2.clipExtent(clip);
  return projection2;
}
function fitExtent(projection2, extent, object2) {
  return fit(projection2, function(b) {
    var w = extent[1][0] - extent[0][0], h = extent[1][1] - extent[0][1], k2 = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])), x4 = +extent[0][0] + (w - k2 * (b[1][0] + b[0][0])) / 2, y4 = +extent[0][1] + (h - k2 * (b[1][1] + b[0][1])) / 2;
    projection2.scale(150 * k2).translate([x4, y4]);
  }, object2);
}
function fitSize(projection2, size, object2) {
  return fitExtent(projection2, [[0, 0], size], object2);
}
function fitWidth(projection2, width, object2) {
  return fit(projection2, function(b) {
    var w = +width, k2 = w / (b[1][0] - b[0][0]), x4 = (w - k2 * (b[1][0] + b[0][0])) / 2, y4 = -k2 * b[0][1];
    projection2.scale(150 * k2).translate([x4, y4]);
  }, object2);
}
function fitHeight(projection2, height, object2) {
  return fit(projection2, function(b) {
    var h = +height, k2 = h / (b[1][1] - b[0][1]), x4 = -k2 * b[0][0], y4 = (h - k2 * (b[1][1] + b[0][1])) / 2;
    projection2.scale(150 * k2).translate([x4, y4]);
  }, object2);
}

// node_modules/d3-geo/src/projection/resample.js
var maxDepth = 16;
var cosMinDistance = cos2(30 * radians2);
function resample_default(project, delta2) {
  return +delta2 ? resample(project, delta2) : resampleNone(project);
}
function resampleNone(project) {
  return transformer({
    point: function(x4, y4) {
      x4 = project(x4, y4);
      this.stream.point(x4[0], x4[1]);
    }
  });
}
function resample(project, delta2) {
  function resampleLineTo(x06, y06, lambda04, a0, b02, c0, x12, y12, lambda12, a1, b12, c1, depth, stream) {
    var dx = x12 - x06, dy = y12 - y06, d2 = dx * dx + dy * dy;
    if (d2 > 4 * delta2 && depth--) {
      var a3 = a0 + a1, b = b02 + b12, c5 = c0 + c1, m2 = sqrt(a3 * a3 + b * b + c5 * c5), phi2 = asin(c5 /= m2), lambda22 = abs3(abs3(c5) - 1) < epsilon6 || abs3(lambda04 - lambda12) < epsilon6 ? (lambda04 + lambda12) / 2 : atan2(b, a3), p = project(lambda22, phi2), x22 = p[0], y22 = p[1], dx2 = x22 - x06, dy2 = y22 - y06, dz = dy * dx2 - dx * dy2;
      if (dz * dz / d2 > delta2 || abs3((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 || a0 * a1 + b02 * b12 + c0 * c1 < cosMinDistance) {
        resampleLineTo(x06, y06, lambda04, a0, b02, c0, x22, y22, lambda22, a3 /= m2, b /= m2, c5, depth, stream);
        stream.point(x22, y22);
        resampleLineTo(x22, y22, lambda22, a3, b, c5, x12, y12, lambda12, a1, b12, c1, depth, stream);
      }
    }
  }
  return function(stream) {
    var lambda004, x004, y004, a00, b00, c00, lambda04, x06, y06, a0, b02, c0;
    var resampleStream = {
      point: point6,
      lineStart,
      lineEnd,
      polygonStart: function() {
        stream.polygonStart();
        resampleStream.lineStart = ringStart;
      },
      polygonEnd: function() {
        stream.polygonEnd();
        resampleStream.lineStart = lineStart;
      }
    };
    function point6(x4, y4) {
      x4 = project(x4, y4);
      stream.point(x4[0], x4[1]);
    }
    function lineStart() {
      x06 = NaN;
      resampleStream.point = linePoint2;
      stream.lineStart();
    }
    function linePoint2(lambda, phi2) {
      var c5 = cartesian([lambda, phi2]), p = project(lambda, phi2);
      resampleLineTo(x06, y06, lambda04, a0, b02, c0, x06 = p[0], y06 = p[1], lambda04 = lambda, a0 = c5[0], b02 = c5[1], c0 = c5[2], maxDepth, stream);
      stream.point(x06, y06);
    }
    function lineEnd() {
      resampleStream.point = point6;
      stream.lineEnd();
    }
    function ringStart() {
      lineStart();
      resampleStream.point = ringPoint;
      resampleStream.lineEnd = ringEnd;
    }
    function ringPoint(lambda, phi2) {
      linePoint2(lambda004 = lambda, phi2), x004 = x06, y004 = y06, a00 = a0, b00 = b02, c00 = c0;
      resampleStream.point = linePoint2;
    }
    function ringEnd() {
      resampleLineTo(x06, y06, lambda04, a0, b02, c0, x004, y004, lambda004, a00, b00, c00, maxDepth, stream);
      resampleStream.lineEnd = lineEnd;
      lineEnd();
    }
    return resampleStream;
  };
}

// node_modules/d3-geo/src/projection/index.js
var transformRadians = transformer({
  point: function(x4, y4) {
    this.stream.point(x4 * radians2, y4 * radians2);
  }
});
function transformRotate(rotate2) {
  return transformer({
    point: function(x4, y4) {
      var r = rotate2(x4, y4);
      return this.stream.point(r[0], r[1]);
    }
  });
}
function scaleTranslate(k2, dx, dy, sx, sy) {
  function transform2(x4, y4) {
    x4 *= sx;
    y4 *= sy;
    return [dx + k2 * x4, dy - k2 * y4];
  }
  transform2.invert = function(x4, y4) {
    return [(x4 - dx) / k2 * sx, (dy - y4) / k2 * sy];
  };
  return transform2;
}
function scaleTranslateRotate(k2, dx, dy, sx, sy, alpha) {
  if (!alpha)
    return scaleTranslate(k2, dx, dy, sx, sy);
  var cosAlpha = cos2(alpha), sinAlpha = sin2(alpha), a3 = cosAlpha * k2, b = sinAlpha * k2, ai = cosAlpha / k2, bi = sinAlpha / k2, ci = (sinAlpha * dy - cosAlpha * dx) / k2, fi = (sinAlpha * dx + cosAlpha * dy) / k2;
  function transform2(x4, y4) {
    x4 *= sx;
    y4 *= sy;
    return [a3 * x4 - b * y4 + dx, dy - b * x4 - a3 * y4];
  }
  transform2.invert = function(x4, y4) {
    return [sx * (ai * x4 - bi * y4 + ci), sy * (fi - bi * x4 - ai * y4)];
  };
  return transform2;
}
function projection(project) {
  return projectionMutator(function() {
    return project;
  })();
}
function projectionMutator(projectAt) {
  var project, k2 = 150, x4 = 480, y4 = 250, lambda = 0, phi2 = 0, deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate2, alpha = 0, sx = 1, sy = 1, theta = null, preclip = antimeridian_default, x06 = null, y06, x12, y12, postclip = identity_default4, delta2 = 0.5, projectResample, projectTransform, projectRotateTransform, cache, cacheStream;
  function projection2(point6) {
    return projectRotateTransform(point6[0] * radians2, point6[1] * radians2);
  }
  function invert(point6) {
    point6 = projectRotateTransform.invert(point6[0], point6[1]);
    return point6 && [point6[0] * degrees3, point6[1] * degrees3];
  }
  projection2.stream = function(stream) {
    return cache && cacheStream === stream ? cache : cache = transformRadians(transformRotate(rotate2)(preclip(projectResample(postclip(cacheStream = stream)))));
  };
  projection2.preclip = function(_) {
    return arguments.length ? (preclip = _, theta = void 0, reset()) : preclip;
  };
  projection2.postclip = function(_) {
    return arguments.length ? (postclip = _, x06 = y06 = x12 = y12 = null, reset()) : postclip;
  };
  projection2.clipAngle = function(_) {
    return arguments.length ? (preclip = +_ ? circle_default2(theta = _ * radians2) : (theta = null, antimeridian_default), reset()) : theta * degrees3;
  };
  projection2.clipExtent = function(_) {
    return arguments.length ? (postclip = _ == null ? (x06 = y06 = x12 = y12 = null, identity_default4) : clipRectangle(x06 = +_[0][0], y06 = +_[0][1], x12 = +_[1][0], y12 = +_[1][1]), reset()) : x06 == null ? null : [[x06, y06], [x12, y12]];
  };
  projection2.scale = function(_) {
    return arguments.length ? (k2 = +_, recenter()) : k2;
  };
  projection2.translate = function(_) {
    return arguments.length ? (x4 = +_[0], y4 = +_[1], recenter()) : [x4, y4];
  };
  projection2.center = function(_) {
    return arguments.length ? (lambda = _[0] % 360 * radians2, phi2 = _[1] % 360 * radians2, recenter()) : [lambda * degrees3, phi2 * degrees3];
  };
  projection2.rotate = function(_) {
    return arguments.length ? (deltaLambda = _[0] % 360 * radians2, deltaPhi = _[1] % 360 * radians2, deltaGamma = _.length > 2 ? _[2] % 360 * radians2 : 0, recenter()) : [deltaLambda * degrees3, deltaPhi * degrees3, deltaGamma * degrees3];
  };
  projection2.angle = function(_) {
    return arguments.length ? (alpha = _ % 360 * radians2, recenter()) : alpha * degrees3;
  };
  projection2.reflectX = function(_) {
    return arguments.length ? (sx = _ ? -1 : 1, recenter()) : sx < 0;
  };
  projection2.reflectY = function(_) {
    return arguments.length ? (sy = _ ? -1 : 1, recenter()) : sy < 0;
  };
  projection2.precision = function(_) {
    return arguments.length ? (projectResample = resample_default(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);
  };
  projection2.fitExtent = function(extent, object2) {
    return fitExtent(projection2, extent, object2);
  };
  projection2.fitSize = function(size, object2) {
    return fitSize(projection2, size, object2);
  };
  projection2.fitWidth = function(width, object2) {
    return fitWidth(projection2, width, object2);
  };
  projection2.fitHeight = function(height, object2) {
    return fitHeight(projection2, height, object2);
  };
  function recenter() {
    var center2 = scaleTranslateRotate(k2, 0, 0, sx, sy, alpha).apply(null, project(lambda, phi2)), transform2 = scaleTranslateRotate(k2, x4 - center2[0], y4 - center2[1], sx, sy, alpha);
    rotate2 = rotateRadians(deltaLambda, deltaPhi, deltaGamma);
    projectTransform = compose_default(project, transform2);
    projectRotateTransform = compose_default(rotate2, projectTransform);
    projectResample = resample_default(projectTransform, delta2);
    return reset();
  }
  function reset() {
    cache = cacheStream = null;
    return projection2;
  }
  return function() {
    project = projectAt.apply(this, arguments);
    projection2.invert = project.invert && invert;
    return recenter();
  };
}

// node_modules/d3-geo/src/projection/conic.js
function conicProjection(projectAt) {
  var phi02 = 0, phi12 = pi4 / 3, m2 = projectionMutator(projectAt), p = m2(phi02, phi12);
  p.parallels = function(_) {
    return arguments.length ? m2(phi02 = _[0] * radians2, phi12 = _[1] * radians2) : [phi02 * degrees3, phi12 * degrees3];
  };
  return p;
}

// node_modules/d3-geo/src/projection/cylindricalEqualArea.js
function cylindricalEqualAreaRaw(phi02) {
  var cosPhi03 = cos2(phi02);
  function forward(lambda, phi2) {
    return [lambda * cosPhi03, sin2(phi2) / cosPhi03];
  }
  forward.invert = function(x4, y4) {
    return [x4 / cosPhi03, asin(y4 * cosPhi03)];
  };
  return forward;
}

// node_modules/d3-geo/src/projection/conicEqualArea.js
function conicEqualAreaRaw(y06, y12) {
  var sy0 = sin2(y06), n2 = (sy0 + sin2(y12)) / 2;
  if (abs3(n2) < epsilon6)
    return cylindricalEqualAreaRaw(y06);
  var c5 = 1 + sy0 * (2 * n2 - sy0), r0 = sqrt(c5) / n2;
  function project(x4, y4) {
    var r = sqrt(c5 - 2 * n2 * sin2(y4)) / n2;
    return [r * sin2(x4 *= n2), r0 - r * cos2(x4)];
  }
  project.invert = function(x4, y4) {
    var r0y = r0 - y4, l2 = atan2(x4, abs3(r0y)) * sign(r0y);
    if (r0y * n2 < 0)
      l2 -= pi4 * sign(x4) * sign(r0y);
    return [l2 / n2, asin((c5 - (x4 * x4 + r0y * r0y) * n2 * n2) / (2 * n2))];
  };
  return project;
}
function conicEqualArea_default() {
  return conicProjection(conicEqualAreaRaw).scale(155.424).center([0, 33.6442]);
}

// node_modules/d3-geo/src/projection/albers.js
function albers_default() {
  return conicEqualArea_default().parallels([29.5, 45.5]).scale(1070).translate([480, 250]).rotate([96, 0]).center([-0.6, 38.7]);
}

// node_modules/d3-geo/src/projection/albersUsa.js
function multiplex(streams) {
  var n2 = streams.length;
  return {
    point: function(x4, y4) {
      var i = -1;
      while (++i < n2)
        streams[i].point(x4, y4);
    },
    sphere: function() {
      var i = -1;
      while (++i < n2)
        streams[i].sphere();
    },
    lineStart: function() {
      var i = -1;
      while (++i < n2)
        streams[i].lineStart();
    },
    lineEnd: function() {
      var i = -1;
      while (++i < n2)
        streams[i].lineEnd();
    },
    polygonStart: function() {
      var i = -1;
      while (++i < n2)
        streams[i].polygonStart();
    },
    polygonEnd: function() {
      var i = -1;
      while (++i < n2)
        streams[i].polygonEnd();
    }
  };
}
function albersUsa_default() {
  var cache, cacheStream, lower48 = albers_default(), lower48Point, alaska = conicEqualArea_default().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]), alaskaPoint, hawaii = conicEqualArea_default().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]), hawaiiPoint, point6, pointStream = { point: function(x4, y4) {
    point6 = [x4, y4];
  } };
  function albersUsa(coordinates2) {
    var x4 = coordinates2[0], y4 = coordinates2[1];
    return point6 = null, (lower48Point.point(x4, y4), point6) || (alaskaPoint.point(x4, y4), point6) || (hawaiiPoint.point(x4, y4), point6);
  }
  albersUsa.invert = function(coordinates2) {
    var k2 = lower48.scale(), t = lower48.translate(), x4 = (coordinates2[0] - t[0]) / k2, y4 = (coordinates2[1] - t[1]) / k2;
    return (y4 >= 0.12 && y4 < 0.234 && x4 >= -0.425 && x4 < -0.214 ? alaska : y4 >= 0.166 && y4 < 0.234 && x4 >= -0.214 && x4 < -0.115 ? hawaii : lower48).invert(coordinates2);
  };
  albersUsa.stream = function(stream) {
    return cache && cacheStream === stream ? cache : cache = multiplex([lower48.stream(cacheStream = stream), alaska.stream(stream), hawaii.stream(stream)]);
  };
  albersUsa.precision = function(_) {
    if (!arguments.length)
      return lower48.precision();
    lower48.precision(_), alaska.precision(_), hawaii.precision(_);
    return reset();
  };
  albersUsa.scale = function(_) {
    if (!arguments.length)
      return lower48.scale();
    lower48.scale(_), alaska.scale(_ * 0.35), hawaii.scale(_);
    return albersUsa.translate(lower48.translate());
  };
  albersUsa.translate = function(_) {
    if (!arguments.length)
      return lower48.translate();
    var k2 = lower48.scale(), x4 = +_[0], y4 = +_[1];
    lower48Point = lower48.translate(_).clipExtent([[x4 - 0.455 * k2, y4 - 0.238 * k2], [x4 + 0.455 * k2, y4 + 0.238 * k2]]).stream(pointStream);
    alaskaPoint = alaska.translate([x4 - 0.307 * k2, y4 + 0.201 * k2]).clipExtent([[x4 - 0.425 * k2 + epsilon6, y4 + 0.12 * k2 + epsilon6], [x4 - 0.214 * k2 - epsilon6, y4 + 0.234 * k2 - epsilon6]]).stream(pointStream);
    hawaiiPoint = hawaii.translate([x4 - 0.205 * k2, y4 + 0.212 * k2]).clipExtent([[x4 - 0.214 * k2 + epsilon6, y4 + 0.166 * k2 + epsilon6], [x4 - 0.115 * k2 - epsilon6, y4 + 0.234 * k2 - epsilon6]]).stream(pointStream);
    return reset();
  };
  albersUsa.fitExtent = function(extent, object2) {
    return fitExtent(albersUsa, extent, object2);
  };
  albersUsa.fitSize = function(size, object2) {
    return fitSize(albersUsa, size, object2);
  };
  albersUsa.fitWidth = function(width, object2) {
    return fitWidth(albersUsa, width, object2);
  };
  albersUsa.fitHeight = function(height, object2) {
    return fitHeight(albersUsa, height, object2);
  };
  function reset() {
    cache = cacheStream = null;
    return albersUsa;
  }
  return albersUsa.scale(1070);
}

// node_modules/d3-geo/src/projection/azimuthal.js
function azimuthalRaw(scale) {
  return function(x4, y4) {
    var cx = cos2(x4), cy = cos2(y4), k2 = scale(cx * cy);
    if (k2 === Infinity)
      return [2, 0];
    return [
      k2 * cy * sin2(x4),
      k2 * sin2(y4)
    ];
  };
}
function azimuthalInvert(angle2) {
  return function(x4, y4) {
    var z = sqrt(x4 * x4 + y4 * y4), c5 = angle2(z), sc = sin2(c5), cc = cos2(c5);
    return [
      atan2(x4 * sc, z * cc),
      asin(z && y4 * sc / z)
    ];
  };
}

// node_modules/d3-geo/src/projection/azimuthalEqualArea.js
var azimuthalEqualAreaRaw = azimuthalRaw(function(cxcy) {
  return sqrt(2 / (1 + cxcy));
});
azimuthalEqualAreaRaw.invert = azimuthalInvert(function(z) {
  return 2 * asin(z / 2);
});
function azimuthalEqualArea_default() {
  return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(180 - 1e-3);
}

// node_modules/d3-geo/src/projection/azimuthalEquidistant.js
var azimuthalEquidistantRaw = azimuthalRaw(function(c5) {
  return (c5 = acos(c5)) && c5 / sin2(c5);
});
azimuthalEquidistantRaw.invert = azimuthalInvert(function(z) {
  return z;
});
function azimuthalEquidistant_default() {
  return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180 - 1e-3);
}

// node_modules/d3-geo/src/projection/mercator.js
function mercatorRaw(lambda, phi2) {
  return [lambda, log2(tan((halfPi3 + phi2) / 2))];
}
mercatorRaw.invert = function(x4, y4) {
  return [x4, 2 * atan(exp(y4)) - halfPi3];
};
function mercator_default() {
  return mercatorProjection(mercatorRaw).scale(961 / tau5);
}
function mercatorProjection(project) {
  var m2 = projection(project), center2 = m2.center, scale = m2.scale, translate = m2.translate, clipExtent = m2.clipExtent, x06 = null, y06, x12, y12;
  m2.scale = function(_) {
    return arguments.length ? (scale(_), reclip()) : scale();
  };
  m2.translate = function(_) {
    return arguments.length ? (translate(_), reclip()) : translate();
  };
  m2.center = function(_) {
    return arguments.length ? (center2(_), reclip()) : center2();
  };
  m2.clipExtent = function(_) {
    return arguments.length ? (_ == null ? x06 = y06 = x12 = y12 = null : (x06 = +_[0][0], y06 = +_[0][1], x12 = +_[1][0], y12 = +_[1][1]), reclip()) : x06 == null ? null : [[x06, y06], [x12, y12]];
  };
  function reclip() {
    var k2 = pi4 * scale(), t = m2(rotation_default(m2.rotate()).invert([0, 0]));
    return clipExtent(x06 == null ? [[t[0] - k2, t[1] - k2], [t[0] + k2, t[1] + k2]] : project === mercatorRaw ? [[Math.max(t[0] - k2, x06), y06], [Math.min(t[0] + k2, x12), y12]] : [[x06, Math.max(t[1] - k2, y06)], [x12, Math.min(t[1] + k2, y12)]]);
  }
  return reclip();
}

// node_modules/d3-geo/src/projection/conicConformal.js
function tany(y4) {
  return tan((halfPi3 + y4) / 2);
}
function conicConformalRaw(y06, y12) {
  var cy0 = cos2(y06), n2 = y06 === y12 ? sin2(y06) : log2(cy0 / cos2(y12)) / log2(tany(y12) / tany(y06)), f = cy0 * pow2(tany(y06), n2) / n2;
  if (!n2)
    return mercatorRaw;
  function project(x4, y4) {
    if (f > 0) {
      if (y4 < -halfPi3 + epsilon6)
        y4 = -halfPi3 + epsilon6;
    } else {
      if (y4 > halfPi3 - epsilon6)
        y4 = halfPi3 - epsilon6;
    }
    var r = f / pow2(tany(y4), n2);
    return [r * sin2(n2 * x4), f - r * cos2(n2 * x4)];
  }
  project.invert = function(x4, y4) {
    var fy = f - y4, r = sign(n2) * sqrt(x4 * x4 + fy * fy), l2 = atan2(x4, abs3(fy)) * sign(fy);
    if (fy * n2 < 0)
      l2 -= pi4 * sign(x4) * sign(fy);
    return [l2 / n2, 2 * atan(pow2(f / r, 1 / n2)) - halfPi3];
  };
  return project;
}
function conicConformal_default() {
  return conicProjection(conicConformalRaw).scale(109.5).parallels([30, 30]);
}

// node_modules/d3-geo/src/projection/equirectangular.js
function equirectangularRaw(lambda, phi2) {
  return [lambda, phi2];
}
equirectangularRaw.invert = equirectangularRaw;
function equirectangular_default() {
  return projection(equirectangularRaw).scale(152.63);
}

// node_modules/d3-geo/src/projection/conicEquidistant.js
function conicEquidistantRaw(y06, y12) {
  var cy0 = cos2(y06), n2 = y06 === y12 ? sin2(y06) : (cy0 - cos2(y12)) / (y12 - y06), g = cy0 / n2 + y06;
  if (abs3(n2) < epsilon6)
    return equirectangularRaw;
  function project(x4, y4) {
    var gy = g - y4, nx = n2 * x4;
    return [gy * sin2(nx), g - gy * cos2(nx)];
  }
  project.invert = function(x4, y4) {
    var gy = g - y4, l2 = atan2(x4, abs3(gy)) * sign(gy);
    if (gy * n2 < 0)
      l2 -= pi4 * sign(x4) * sign(gy);
    return [l2 / n2, g - sign(n2) * sqrt(x4 * x4 + gy * gy)];
  };
  return project;
}
function conicEquidistant_default() {
  return conicProjection(conicEquidistantRaw).scale(131.154).center([0, 13.9389]);
}

// node_modules/d3-geo/src/projection/equalEarth.js
var A1 = 1.340264;
var A2 = -0.081106;
var A3 = 893e-6;
var A4 = 3796e-6;
var M = sqrt(3) / 2;
var iterations = 12;
function equalEarthRaw(lambda, phi2) {
  var l2 = asin(M * sin2(phi2)), l22 = l2 * l2, l6 = l22 * l22 * l22;
  return [
    lambda * cos2(l2) / (M * (A1 + 3 * A2 * l22 + l6 * (7 * A3 + 9 * A4 * l22))),
    l2 * (A1 + A2 * l22 + l6 * (A3 + A4 * l22))
  ];
}
equalEarthRaw.invert = function(x4, y4) {
  var l2 = y4, l22 = l2 * l2, l6 = l22 * l22 * l22;
  for (var i = 0, delta, fy, fpy; i < iterations; ++i) {
    fy = l2 * (A1 + A2 * l22 + l6 * (A3 + A4 * l22)) - y4;
    fpy = A1 + 3 * A2 * l22 + l6 * (7 * A3 + 9 * A4 * l22);
    l2 -= delta = fy / fpy, l22 = l2 * l2, l6 = l22 * l22 * l22;
    if (abs3(delta) < epsilon22)
      break;
  }
  return [
    M * x4 * (A1 + 3 * A2 * l22 + l6 * (7 * A3 + 9 * A4 * l22)) / cos2(l2),
    asin(sin2(l2) / M)
  ];
};
function equalEarth_default() {
  return projection(equalEarthRaw).scale(177.158);
}

// node_modules/d3-geo/src/projection/gnomonic.js
function gnomonicRaw(x4, y4) {
  var cy = cos2(y4), k2 = cos2(x4) * cy;
  return [cy * sin2(x4) / k2, sin2(y4) / k2];
}
gnomonicRaw.invert = azimuthalInvert(atan);
function gnomonic_default() {
  return projection(gnomonicRaw).scale(144.049).clipAngle(60);
}

// node_modules/d3-geo/src/projection/identity.js
function identity_default5() {
  var k2 = 1, tx = 0, ty = 0, sx = 1, sy = 1, alpha = 0, ca, sa, x06 = null, y06, x12, y12, kx2 = 1, ky2 = 1, transform2 = transformer({
    point: function(x4, y4) {
      var p = projection2([x4, y4]);
      this.stream.point(p[0], p[1]);
    }
  }), postclip = identity_default4, cache, cacheStream;
  function reset() {
    kx2 = k2 * sx;
    ky2 = k2 * sy;
    cache = cacheStream = null;
    return projection2;
  }
  function projection2(p) {
    var x4 = p[0] * kx2, y4 = p[1] * ky2;
    if (alpha) {
      var t = y4 * ca - x4 * sa;
      x4 = x4 * ca + y4 * sa;
      y4 = t;
    }
    return [x4 + tx, y4 + ty];
  }
  projection2.invert = function(p) {
    var x4 = p[0] - tx, y4 = p[1] - ty;
    if (alpha) {
      var t = y4 * ca + x4 * sa;
      x4 = x4 * ca - y4 * sa;
      y4 = t;
    }
    return [x4 / kx2, y4 / ky2];
  };
  projection2.stream = function(stream) {
    return cache && cacheStream === stream ? cache : cache = transform2(postclip(cacheStream = stream));
  };
  projection2.postclip = function(_) {
    return arguments.length ? (postclip = _, x06 = y06 = x12 = y12 = null, reset()) : postclip;
  };
  projection2.clipExtent = function(_) {
    return arguments.length ? (postclip = _ == null ? (x06 = y06 = x12 = y12 = null, identity_default4) : clipRectangle(x06 = +_[0][0], y06 = +_[0][1], x12 = +_[1][0], y12 = +_[1][1]), reset()) : x06 == null ? null : [[x06, y06], [x12, y12]];
  };
  projection2.scale = function(_) {
    return arguments.length ? (k2 = +_, reset()) : k2;
  };
  projection2.translate = function(_) {
    return arguments.length ? (tx = +_[0], ty = +_[1], reset()) : [tx, ty];
  };
  projection2.angle = function(_) {
    return arguments.length ? (alpha = _ % 360 * radians2, sa = sin2(alpha), ca = cos2(alpha), reset()) : alpha * degrees3;
  };
  projection2.reflectX = function(_) {
    return arguments.length ? (sx = _ ? -1 : 1, reset()) : sx < 0;
  };
  projection2.reflectY = function(_) {
    return arguments.length ? (sy = _ ? -1 : 1, reset()) : sy < 0;
  };
  projection2.fitExtent = function(extent, object2) {
    return fitExtent(projection2, extent, object2);
  };
  projection2.fitSize = function(size, object2) {
    return fitSize(projection2, size, object2);
  };
  projection2.fitWidth = function(width, object2) {
    return fitWidth(projection2, width, object2);
  };
  projection2.fitHeight = function(height, object2) {
    return fitHeight(projection2, height, object2);
  };
  return projection2;
}

// node_modules/d3-geo/src/projection/naturalEarth1.js
function naturalEarth1Raw(lambda, phi2) {
  var phi22 = phi2 * phi2, phi4 = phi22 * phi22;
  return [
    lambda * (0.8707 - 0.131979 * phi22 + phi4 * (-0.013791 + phi4 * (3971e-6 * phi22 - 1529e-6 * phi4))),
    phi2 * (1.007226 + phi22 * (0.015085 + phi4 * (-0.044475 + 0.028874 * phi22 - 5916e-6 * phi4)))
  ];
}
naturalEarth1Raw.invert = function(x4, y4) {
  var phi2 = y4, i = 25, delta;
  do {
    var phi22 = phi2 * phi2, phi4 = phi22 * phi22;
    phi2 -= delta = (phi2 * (1.007226 + phi22 * (0.015085 + phi4 * (-0.044475 + 0.028874 * phi22 - 5916e-6 * phi4))) - y4) / (1.007226 + phi22 * (0.015085 * 3 + phi4 * (-0.044475 * 7 + 0.028874 * 9 * phi22 - 5916e-6 * 11 * phi4)));
  } while (abs3(delta) > epsilon6 && --i > 0);
  return [
    x4 / (0.8707 + (phi22 = phi2 * phi2) * (-0.131979 + phi22 * (-0.013791 + phi22 * phi22 * phi22 * (3971e-6 - 1529e-6 * phi22)))),
    phi2
  ];
};
function naturalEarth1_default() {
  return projection(naturalEarth1Raw).scale(175.295);
}

// node_modules/d3-geo/src/projection/orthographic.js
function orthographicRaw(x4, y4) {
  return [cos2(y4) * sin2(x4), sin2(y4)];
}
orthographicRaw.invert = azimuthalInvert(asin);
function orthographic_default() {
  return projection(orthographicRaw).scale(249.5).clipAngle(90 + epsilon6);
}

// node_modules/d3-geo/src/projection/stereographic.js
function stereographicRaw(x4, y4) {
  var cy = cos2(y4), k2 = 1 + cos2(x4) * cy;
  return [cy * sin2(x4) / k2, sin2(y4) / k2];
}
stereographicRaw.invert = azimuthalInvert(function(z) {
  return 2 * atan(z);
});
function stereographic_default() {
  return projection(stereographicRaw).scale(250).clipAngle(142);
}

// node_modules/d3-geo/src/projection/transverseMercator.js
function transverseMercatorRaw(lambda, phi2) {
  return [log2(tan((halfPi3 + phi2) / 2)), -lambda];
}
transverseMercatorRaw.invert = function(x4, y4) {
  return [-y4, 2 * atan(exp(x4)) - halfPi3];
};
function transverseMercator_default() {
  var m2 = mercatorProjection(transverseMercatorRaw), center2 = m2.center, rotate2 = m2.rotate;
  m2.center = function(_) {
    return arguments.length ? center2([-_[1], _[0]]) : (_ = center2(), [_[1], -_[0]]);
  };
  m2.rotate = function(_) {
    return arguments.length ? rotate2([_[0], _[1], _.length > 2 ? _[2] + 90 : 90]) : (_ = rotate2(), [_[0], _[1], _[2] - 90]);
  };
  return rotate2([0, 0, 90]).scale(159.155);
}

// node_modules/d3-hierarchy/src/cluster.js
function defaultSeparation(a3, b) {
  return a3.parent === b.parent ? 1 : 2;
}
function meanX(children2) {
  return children2.reduce(meanXReduce, 0) / children2.length;
}
function meanXReduce(x4, c5) {
  return x4 + c5.x;
}
function maxY(children2) {
  return 1 + children2.reduce(maxYReduce, 0);
}
function maxYReduce(y4, c5) {
  return Math.max(y4, c5.y);
}
function leafLeft(node) {
  var children2;
  while (children2 = node.children)
    node = children2[0];
  return node;
}
function leafRight(node) {
  var children2;
  while (children2 = node.children)
    node = children2[children2.length - 1];
  return node;
}
function cluster_default() {
  var separation = defaultSeparation, dx = 1, dy = 1, nodeSize = false;
  function cluster(root3) {
    var previousNode, x4 = 0;
    root3.eachAfter(function(node) {
      var children2 = node.children;
      if (children2) {
        node.x = meanX(children2);
        node.y = maxY(children2);
      } else {
        node.x = previousNode ? x4 += separation(node, previousNode) : 0;
        node.y = 0;
        previousNode = node;
      }
    });
    var left2 = leafLeft(root3), right2 = leafRight(root3), x06 = left2.x - separation(left2, right2) / 2, x12 = right2.x + separation(right2, left2) / 2;
    return root3.eachAfter(nodeSize ? function(node) {
      node.x = (node.x - root3.x) * dx;
      node.y = (root3.y - node.y) * dy;
    } : function(node) {
      node.x = (node.x - x06) / (x12 - x06) * dx;
      node.y = (1 - (root3.y ? node.y / root3.y : 1)) * dy;
    });
  }
  cluster.separation = function(x4) {
    return arguments.length ? (separation = x4, cluster) : separation;
  };
  cluster.size = function(x4) {
    return arguments.length ? (nodeSize = false, dx = +x4[0], dy = +x4[1], cluster) : nodeSize ? null : [dx, dy];
  };
  cluster.nodeSize = function(x4) {
    return arguments.length ? (nodeSize = true, dx = +x4[0], dy = +x4[1], cluster) : nodeSize ? [dx, dy] : null;
  };
  return cluster;
}

// node_modules/d3-hierarchy/src/hierarchy/count.js
function count2(node) {
  var sum3 = 0, children2 = node.children, i = children2 && children2.length;
  if (!i)
    sum3 = 1;
  else
    while (--i >= 0)
      sum3 += children2[i].value;
  node.value = sum3;
}
function count_default() {
  return this.eachAfter(count2);
}

// node_modules/d3-hierarchy/src/hierarchy/each.js
function each_default2(callback, that) {
  let index3 = -1;
  for (const node of this) {
    callback.call(that, node, ++index3, this);
  }
  return this;
}

// node_modules/d3-hierarchy/src/hierarchy/eachBefore.js
function eachBefore_default(callback, that) {
  var node = this, nodes = [node], children2, i, index3 = -1;
  while (node = nodes.pop()) {
    callback.call(that, node, ++index3, this);
    if (children2 = node.children) {
      for (i = children2.length - 1; i >= 0; --i) {
        nodes.push(children2[i]);
      }
    }
  }
  return this;
}

// node_modules/d3-hierarchy/src/hierarchy/eachAfter.js
function eachAfter_default(callback, that) {
  var node = this, nodes = [node], next = [], children2, i, n2, index3 = -1;
  while (node = nodes.pop()) {
    next.push(node);
    if (children2 = node.children) {
      for (i = 0, n2 = children2.length; i < n2; ++i) {
        nodes.push(children2[i]);
      }
    }
  }
  while (node = next.pop()) {
    callback.call(that, node, ++index3, this);
  }
  return this;
}

// node_modules/d3-hierarchy/src/hierarchy/find.js
function find_default2(callback, that) {
  let index3 = -1;
  for (const node of this) {
    if (callback.call(that, node, ++index3, this)) {
      return node;
    }
  }
}

// node_modules/d3-hierarchy/src/hierarchy/sum.js
function sum_default(value) {
  return this.eachAfter(function(node) {
    var sum3 = +value(node.data) || 0, children2 = node.children, i = children2 && children2.length;
    while (--i >= 0)
      sum3 += children2[i].value;
    node.value = sum3;
  });
}

// node_modules/d3-hierarchy/src/hierarchy/sort.js
function sort_default2(compare) {
  return this.eachBefore(function(node) {
    if (node.children) {
      node.children.sort(compare);
    }
  });
}

// node_modules/d3-hierarchy/src/hierarchy/path.js
function path_default3(end) {
  var start2 = this, ancestor = leastCommonAncestor(start2, end), nodes = [start2];
  while (start2 !== ancestor) {
    start2 = start2.parent;
    nodes.push(start2);
  }
  var k2 = nodes.length;
  while (end !== ancestor) {
    nodes.splice(k2, 0, end);
    end = end.parent;
  }
  return nodes;
}
function leastCommonAncestor(a3, b) {
  if (a3 === b)
    return a3;
  var aNodes = a3.ancestors(), bNodes = b.ancestors(), c5 = null;
  a3 = aNodes.pop();
  b = bNodes.pop();
  while (a3 === b) {
    c5 = a3;
    a3 = aNodes.pop();
    b = bNodes.pop();
  }
  return c5;
}

// node_modules/d3-hierarchy/src/hierarchy/ancestors.js
function ancestors_default() {
  var node = this, nodes = [node];
  while (node = node.parent) {
    nodes.push(node);
  }
  return nodes;
}

// node_modules/d3-hierarchy/src/hierarchy/descendants.js
function descendants_default() {
  return Array.from(this);
}

// node_modules/d3-hierarchy/src/hierarchy/leaves.js
function leaves_default() {
  var leaves = [];
  this.eachBefore(function(node) {
    if (!node.children) {
      leaves.push(node);
    }
  });
  return leaves;
}

// node_modules/d3-hierarchy/src/hierarchy/links.js
function links_default() {
  var root3 = this, links = [];
  root3.each(function(node) {
    if (node !== root3) {
      links.push({ source: node.parent, target: node });
    }
  });
  return links;
}

// node_modules/d3-hierarchy/src/hierarchy/iterator.js
function* iterator_default2() {
  var node = this, current, next = [node], children2, i, n2;
  do {
    current = next.reverse(), next = [];
    while (node = current.pop()) {
      yield node;
      if (children2 = node.children) {
        for (i = 0, n2 = children2.length; i < n2; ++i) {
          next.push(children2[i]);
        }
      }
    }
  } while (next.length);
}

// node_modules/d3-hierarchy/src/hierarchy/index.js
function hierarchy(data, children2) {
  if (data instanceof Map) {
    data = [void 0, data];
    if (children2 === void 0)
      children2 = mapChildren;
  } else if (children2 === void 0) {
    children2 = objectChildren;
  }
  var root3 = new Node(data), node, nodes = [root3], child, childs, i, n2;
  while (node = nodes.pop()) {
    if ((childs = children2(node.data)) && (n2 = (childs = Array.from(childs)).length)) {
      node.children = childs;
      for (i = n2 - 1; i >= 0; --i) {
        nodes.push(child = childs[i] = new Node(childs[i]));
        child.parent = node;
        child.depth = node.depth + 1;
      }
    }
  }
  return root3.eachBefore(computeHeight);
}
function node_copy() {
  return hierarchy(this).eachBefore(copyData);
}
function objectChildren(d) {
  return d.children;
}
function mapChildren(d) {
  return Array.isArray(d) ? d[1] : null;
}
function copyData(node) {
  if (node.data.value !== void 0)
    node.value = node.data.value;
  node.data = node.data.data;
}
function computeHeight(node) {
  var height = 0;
  do
    node.height = height;
  while ((node = node.parent) && node.height < ++height);
}
function Node(data) {
  this.data = data;
  this.depth = this.height = 0;
  this.parent = null;
}
Node.prototype = hierarchy.prototype = {
  constructor: Node,
  count: count_default,
  each: each_default2,
  eachAfter: eachAfter_default,
  eachBefore: eachBefore_default,
  find: find_default2,
  sum: sum_default,
  sort: sort_default2,
  path: path_default3,
  ancestors: ancestors_default,
  descendants: descendants_default,
  leaves: leaves_default,
  links: links_default,
  copy: node_copy,
  [Symbol.iterator]: iterator_default2
};

// node_modules/d3-hierarchy/src/array.js
function array_default3(x4) {
  return typeof x4 === "object" && "length" in x4 ? x4 : Array.from(x4);
}
function shuffle(array3) {
  var m2 = array3.length, t, i;
  while (m2) {
    i = Math.random() * m2-- | 0;
    t = array3[m2];
    array3[m2] = array3[i];
    array3[i] = t;
  }
  return array3;
}

// node_modules/d3-hierarchy/src/pack/enclose.js
function enclose_default(circles) {
  var i = 0, n2 = (circles = shuffle(Array.from(circles))).length, B2 = [], p, e;
  while (i < n2) {
    p = circles[i];
    if (e && enclosesWeak(e, p))
      ++i;
    else
      e = encloseBasis(B2 = extendBasis(B2, p)), i = 0;
  }
  return e;
}
function extendBasis(B2, p) {
  var i, j;
  if (enclosesWeakAll(p, B2))
    return [p];
  for (i = 0; i < B2.length; ++i) {
    if (enclosesNot(p, B2[i]) && enclosesWeakAll(encloseBasis2(B2[i], p), B2)) {
      return [B2[i], p];
    }
  }
  for (i = 0; i < B2.length - 1; ++i) {
    for (j = i + 1; j < B2.length; ++j) {
      if (enclosesNot(encloseBasis2(B2[i], B2[j]), p) && enclosesNot(encloseBasis2(B2[i], p), B2[j]) && enclosesNot(encloseBasis2(B2[j], p), B2[i]) && enclosesWeakAll(encloseBasis3(B2[i], B2[j], p), B2)) {
        return [B2[i], B2[j], p];
      }
    }
  }
  throw new Error();
}
function enclosesNot(a3, b) {
  var dr = a3.r - b.r, dx = b.x - a3.x, dy = b.y - a3.y;
  return dr < 0 || dr * dr < dx * dx + dy * dy;
}
function enclosesWeak(a3, b) {
  var dr = a3.r - b.r + Math.max(a3.r, b.r, 1) * 1e-9, dx = b.x - a3.x, dy = b.y - a3.y;
  return dr > 0 && dr * dr > dx * dx + dy * dy;
}
function enclosesWeakAll(a3, B2) {
  for (var i = 0; i < B2.length; ++i) {
    if (!enclosesWeak(a3, B2[i])) {
      return false;
    }
  }
  return true;
}
function encloseBasis(B2) {
  switch (B2.length) {
    case 1:
      return encloseBasis1(B2[0]);
    case 2:
      return encloseBasis2(B2[0], B2[1]);
    case 3:
      return encloseBasis3(B2[0], B2[1], B2[2]);
  }
}
function encloseBasis1(a3) {
  return {
    x: a3.x,
    y: a3.y,
    r: a3.r
  };
}
function encloseBasis2(a3, b) {
  var x12 = a3.x, y12 = a3.y, r1 = a3.r, x22 = b.x, y22 = b.y, r2 = b.r, x21 = x22 - x12, y21 = y22 - y12, r21 = r2 - r1, l2 = Math.sqrt(x21 * x21 + y21 * y21);
  return {
    x: (x12 + x22 + x21 / l2 * r21) / 2,
    y: (y12 + y22 + y21 / l2 * r21) / 2,
    r: (l2 + r1 + r2) / 2
  };
}
function encloseBasis3(a3, b, c5) {
  var x12 = a3.x, y12 = a3.y, r1 = a3.r, x22 = b.x, y22 = b.y, r2 = b.r, x32 = c5.x, y32 = c5.y, r3 = c5.r, a22 = x12 - x22, a32 = x12 - x32, b22 = y12 - y22, b32 = y12 - y32, c22 = r2 - r1, c32 = r3 - r1, d1 = x12 * x12 + y12 * y12 - r1 * r1, d2 = d1 - x22 * x22 - y22 * y22 + r2 * r2, d3 = d1 - x32 * x32 - y32 * y32 + r3 * r3, ab = a32 * b22 - a22 * b32, xa = (b22 * d3 - b32 * d2) / (ab * 2) - x12, xb = (b32 * c22 - b22 * c32) / ab, ya = (a32 * d2 - a22 * d3) / (ab * 2) - y12, yb = (a22 * c32 - a32 * c22) / ab, A5 = xb * xb + yb * yb - 1, B2 = 2 * (r1 + xa * xb + ya * yb), C2 = xa * xa + ya * ya - r1 * r1, r = -(A5 ? (B2 + Math.sqrt(B2 * B2 - 4 * A5 * C2)) / (2 * A5) : C2 / B2);
  return {
    x: x12 + xa + xb * r,
    y: y12 + ya + yb * r,
    r
  };
}

// node_modules/d3-hierarchy/src/pack/siblings.js
function place(b, a3, c5) {
  var dx = b.x - a3.x, x4, a22, dy = b.y - a3.y, y4, b22, d2 = dx * dx + dy * dy;
  if (d2) {
    a22 = a3.r + c5.r, a22 *= a22;
    b22 = b.r + c5.r, b22 *= b22;
    if (a22 > b22) {
      x4 = (d2 + b22 - a22) / (2 * d2);
      y4 = Math.sqrt(Math.max(0, b22 / d2 - x4 * x4));
      c5.x = b.x - x4 * dx - y4 * dy;
      c5.y = b.y - x4 * dy + y4 * dx;
    } else {
      x4 = (d2 + a22 - b22) / (2 * d2);
      y4 = Math.sqrt(Math.max(0, a22 / d2 - x4 * x4));
      c5.x = a3.x + x4 * dx - y4 * dy;
      c5.y = a3.y + x4 * dy + y4 * dx;
    }
  } else {
    c5.x = a3.x + c5.r;
    c5.y = a3.y;
  }
}
function intersects(a3, b) {
  var dr = a3.r + b.r - 1e-6, dx = b.x - a3.x, dy = b.y - a3.y;
  return dr > 0 && dr * dr > dx * dx + dy * dy;
}
function score(node) {
  var a3 = node._, b = node.next._, ab = a3.r + b.r, dx = (a3.x * b.r + b.x * a3.r) / ab, dy = (a3.y * b.r + b.y * a3.r) / ab;
  return dx * dx + dy * dy;
}
function Node2(circle3) {
  this._ = circle3;
  this.next = null;
  this.previous = null;
}
function packEnclose(circles) {
  if (!(n2 = (circles = array_default3(circles)).length))
    return 0;
  var a3, b, c5, n2, aa, ca, i, j, k2, sj, sk;
  a3 = circles[0], a3.x = 0, a3.y = 0;
  if (!(n2 > 1))
    return a3.r;
  b = circles[1], a3.x = -b.r, b.x = a3.r, b.y = 0;
  if (!(n2 > 2))
    return a3.r + b.r;
  place(b, a3, c5 = circles[2]);
  a3 = new Node2(a3), b = new Node2(b), c5 = new Node2(c5);
  a3.next = c5.previous = b;
  b.next = a3.previous = c5;
  c5.next = b.previous = a3;
  pack:
    for (i = 3; i < n2; ++i) {
      place(a3._, b._, c5 = circles[i]), c5 = new Node2(c5);
      j = b.next, k2 = a3.previous, sj = b._.r, sk = a3._.r;
      do {
        if (sj <= sk) {
          if (intersects(j._, c5._)) {
            b = j, a3.next = b, b.previous = a3, --i;
            continue pack;
          }
          sj += j._.r, j = j.next;
        } else {
          if (intersects(k2._, c5._)) {
            a3 = k2, a3.next = b, b.previous = a3, --i;
            continue pack;
          }
          sk += k2._.r, k2 = k2.previous;
        }
      } while (j !== k2.next);
      c5.previous = a3, c5.next = b, a3.next = b.previous = b = c5;
      aa = score(a3);
      while ((c5 = c5.next) !== b) {
        if ((ca = score(c5)) < aa) {
          a3 = c5, aa = ca;
        }
      }
      b = a3.next;
    }
  a3 = [b._], c5 = b;
  while ((c5 = c5.next) !== b)
    a3.push(c5._);
  c5 = enclose_default(a3);
  for (i = 0; i < n2; ++i)
    a3 = circles[i], a3.x -= c5.x, a3.y -= c5.y;
  return c5.r;
}
function siblings_default(circles) {
  packEnclose(circles);
  return circles;
}

// node_modules/d3-hierarchy/src/accessors.js
function optional(f) {
  return f == null ? null : required(f);
}
function required(f) {
  if (typeof f !== "function")
    throw new Error();
  return f;
}

// node_modules/d3-hierarchy/src/constant.js
function constantZero() {
  return 0;
}
function constant_default10(x4) {
  return function() {
    return x4;
  };
}

// node_modules/d3-hierarchy/src/pack/index.js
function defaultRadius2(d) {
  return Math.sqrt(d.value);
}
function pack_default() {
  var radius = null, dx = 1, dy = 1, padding = constantZero;
  function pack(root3) {
    root3.x = dx / 2, root3.y = dy / 2;
    if (radius) {
      root3.eachBefore(radiusLeaf(radius)).eachAfter(packChildren(padding, 0.5)).eachBefore(translateChild(1));
    } else {
      root3.eachBefore(radiusLeaf(defaultRadius2)).eachAfter(packChildren(constantZero, 1)).eachAfter(packChildren(padding, root3.r / Math.min(dx, dy))).eachBefore(translateChild(Math.min(dx, dy) / (2 * root3.r)));
    }
    return root3;
  }
  pack.radius = function(x4) {
    return arguments.length ? (radius = optional(x4), pack) : radius;
  };
  pack.size = function(x4) {
    return arguments.length ? (dx = +x4[0], dy = +x4[1], pack) : [dx, dy];
  };
  pack.padding = function(x4) {
    return arguments.length ? (padding = typeof x4 === "function" ? x4 : constant_default10(+x4), pack) : padding;
  };
  return pack;
}
function radiusLeaf(radius) {
  return function(node) {
    if (!node.children) {
      node.r = Math.max(0, +radius(node) || 0);
    }
  };
}
function packChildren(padding, k2) {
  return function(node) {
    if (children2 = node.children) {
      var children2, i, n2 = children2.length, r = padding(node) * k2 || 0, e;
      if (r)
        for (i = 0; i < n2; ++i)
          children2[i].r += r;
      e = packEnclose(children2);
      if (r)
        for (i = 0; i < n2; ++i)
          children2[i].r -= r;
      node.r = e + r;
    }
  };
}
function translateChild(k2) {
  return function(node) {
    var parent = node.parent;
    node.r *= k2;
    if (parent) {
      node.x = parent.x + k2 * node.x;
      node.y = parent.y + k2 * node.y;
    }
  };
}

// node_modules/d3-hierarchy/src/treemap/round.js
function round_default2(node) {
  node.x0 = Math.round(node.x0);
  node.y0 = Math.round(node.y0);
  node.x1 = Math.round(node.x1);
  node.y1 = Math.round(node.y1);
}

// node_modules/d3-hierarchy/src/treemap/dice.js
function dice_default(parent, x06, y06, x12, y12) {
  var nodes = parent.children, node, i = -1, n2 = nodes.length, k2 = parent.value && (x12 - x06) / parent.value;
  while (++i < n2) {
    node = nodes[i], node.y0 = y06, node.y1 = y12;
    node.x0 = x06, node.x1 = x06 += node.value * k2;
  }
}

// node_modules/d3-hierarchy/src/partition.js
function partition_default() {
  var dx = 1, dy = 1, padding = 0, round = false;
  function partition(root3) {
    var n2 = root3.height + 1;
    root3.x0 = root3.y0 = padding;
    root3.x1 = dx;
    root3.y1 = dy / n2;
    root3.eachBefore(positionNode(dy, n2));
    if (round)
      root3.eachBefore(round_default2);
    return root3;
  }
  function positionNode(dy2, n2) {
    return function(node) {
      if (node.children) {
        dice_default(node, node.x0, dy2 * (node.depth + 1) / n2, node.x1, dy2 * (node.depth + 2) / n2);
      }
      var x06 = node.x0, y06 = node.y0, x12 = node.x1 - padding, y12 = node.y1 - padding;
      if (x12 < x06)
        x06 = x12 = (x06 + x12) / 2;
      if (y12 < y06)
        y06 = y12 = (y06 + y12) / 2;
      node.x0 = x06;
      node.y0 = y06;
      node.x1 = x12;
      node.y1 = y12;
    };
  }
  partition.round = function(x4) {
    return arguments.length ? (round = !!x4, partition) : round;
  };
  partition.size = function(x4) {
    return arguments.length ? (dx = +x4[0], dy = +x4[1], partition) : [dx, dy];
  };
  partition.padding = function(x4) {
    return arguments.length ? (padding = +x4, partition) : padding;
  };
  return partition;
}

// node_modules/d3-hierarchy/src/stratify.js
var preroot = { depth: -1 };
var ambiguous = {};
function defaultId(d) {
  return d.id;
}
function defaultParentId(d) {
  return d.parentId;
}
function stratify_default() {
  var id2 = defaultId, parentId = defaultParentId;
  function stratify(data) {
    var nodes = Array.from(data), n2 = nodes.length, d, i, root3, parent, node, nodeId, nodeKey, nodeByKey = /* @__PURE__ */ new Map();
    for (i = 0; i < n2; ++i) {
      d = nodes[i], node = nodes[i] = new Node(d);
      if ((nodeId = id2(d, i, data)) != null && (nodeId += "")) {
        nodeKey = node.id = nodeId;
        nodeByKey.set(nodeKey, nodeByKey.has(nodeKey) ? ambiguous : node);
      }
      if ((nodeId = parentId(d, i, data)) != null && (nodeId += "")) {
        node.parent = nodeId;
      }
    }
    for (i = 0; i < n2; ++i) {
      node = nodes[i];
      if (nodeId = node.parent) {
        parent = nodeByKey.get(nodeId);
        if (!parent)
          throw new Error("missing: " + nodeId);
        if (parent === ambiguous)
          throw new Error("ambiguous: " + nodeId);
        if (parent.children)
          parent.children.push(node);
        else
          parent.children = [node];
        node.parent = parent;
      } else {
        if (root3)
          throw new Error("multiple roots");
        root3 = node;
      }
    }
    if (!root3)
      throw new Error("no root");
    root3.parent = preroot;
    root3.eachBefore(function(node2) {
      node2.depth = node2.parent.depth + 1;
      --n2;
    }).eachBefore(computeHeight);
    root3.parent = null;
    if (n2 > 0)
      throw new Error("cycle");
    return root3;
  }
  stratify.id = function(x4) {
    return arguments.length ? (id2 = required(x4), stratify) : id2;
  };
  stratify.parentId = function(x4) {
    return arguments.length ? (parentId = required(x4), stratify) : parentId;
  };
  return stratify;
}

// node_modules/d3-hierarchy/src/tree.js
function defaultSeparation2(a3, b) {
  return a3.parent === b.parent ? 1 : 2;
}
function nextLeft(v) {
  var children2 = v.children;
  return children2 ? children2[0] : v.t;
}
function nextRight(v) {
  var children2 = v.children;
  return children2 ? children2[children2.length - 1] : v.t;
}
function moveSubtree(wm, wp, shift) {
  var change = shift / (wp.i - wm.i);
  wp.c -= change;
  wp.s += shift;
  wm.c += change;
  wp.z += shift;
  wp.m += shift;
}
function executeShifts(v) {
  var shift = 0, change = 0, children2 = v.children, i = children2.length, w;
  while (--i >= 0) {
    w = children2[i];
    w.z += shift;
    w.m += shift;
    shift += w.s + (change += w.c);
  }
}
function nextAncestor(vim, v, ancestor) {
  return vim.a.parent === v.parent ? vim.a : ancestor;
}
function TreeNode(node, i) {
  this._ = node;
  this.parent = null;
  this.children = null;
  this.A = null;
  this.a = this;
  this.z = 0;
  this.m = 0;
  this.c = 0;
  this.s = 0;
  this.t = null;
  this.i = i;
}
TreeNode.prototype = Object.create(Node.prototype);
function treeRoot(root3) {
  var tree = new TreeNode(root3, 0), node, nodes = [tree], child, children2, i, n2;
  while (node = nodes.pop()) {
    if (children2 = node._.children) {
      node.children = new Array(n2 = children2.length);
      for (i = n2 - 1; i >= 0; --i) {
        nodes.push(child = node.children[i] = new TreeNode(children2[i], i));
        child.parent = node;
      }
    }
  }
  (tree.parent = new TreeNode(null, 0)).children = [tree];
  return tree;
}
function tree_default() {
  var separation = defaultSeparation2, dx = 1, dy = 1, nodeSize = null;
  function tree(root3) {
    var t = treeRoot(root3);
    t.eachAfter(firstWalk), t.parent.m = -t.z;
    t.eachBefore(secondWalk);
    if (nodeSize)
      root3.eachBefore(sizeNode);
    else {
      var left2 = root3, right2 = root3, bottom2 = root3;
      root3.eachBefore(function(node) {
        if (node.x < left2.x)
          left2 = node;
        if (node.x > right2.x)
          right2 = node;
        if (node.depth > bottom2.depth)
          bottom2 = node;
      });
      var s3 = left2 === right2 ? 1 : separation(left2, right2) / 2, tx = s3 - left2.x, kx2 = dx / (right2.x + s3 + tx), ky2 = dy / (bottom2.depth || 1);
      root3.eachBefore(function(node) {
        node.x = (node.x + tx) * kx2;
        node.y = node.depth * ky2;
      });
    }
    return root3;
  }
  function firstWalk(v) {
    var children2 = v.children, siblings = v.parent.children, w = v.i ? siblings[v.i - 1] : null;
    if (children2) {
      executeShifts(v);
      var midpoint = (children2[0].z + children2[children2.length - 1].z) / 2;
      if (w) {
        v.z = w.z + separation(v._, w._);
        v.m = v.z - midpoint;
      } else {
        v.z = midpoint;
      }
    } else if (w) {
      v.z = w.z + separation(v._, w._);
    }
    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);
  }
  function secondWalk(v) {
    v._.x = v.z + v.parent.m;
    v.m += v.parent.m;
  }
  function apportion(v, w, ancestor) {
    if (w) {
      var vip = v, vop = v, vim = w, vom = vip.parent.children[0], sip = vip.m, sop = vop.m, sim = vim.m, som = vom.m, shift;
      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {
        vom = nextLeft(vom);
        vop = nextRight(vop);
        vop.a = v;
        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);
        if (shift > 0) {
          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);
          sip += shift;
          sop += shift;
        }
        sim += vim.m;
        sip += vip.m;
        som += vom.m;
        sop += vop.m;
      }
      if (vim && !nextRight(vop)) {
        vop.t = vim;
        vop.m += sim - sop;
      }
      if (vip && !nextLeft(vom)) {
        vom.t = vip;
        vom.m += sip - som;
        ancestor = v;
      }
    }
    return ancestor;
  }
  function sizeNode(node) {
    node.x *= dx;
    node.y = node.depth * dy;
  }
  tree.separation = function(x4) {
    return arguments.length ? (separation = x4, tree) : separation;
  };
  tree.size = function(x4) {
    return arguments.length ? (nodeSize = false, dx = +x4[0], dy = +x4[1], tree) : nodeSize ? null : [dx, dy];
  };
  tree.nodeSize = function(x4) {
    return arguments.length ? (nodeSize = true, dx = +x4[0], dy = +x4[1], tree) : nodeSize ? [dx, dy] : null;
  };
  return tree;
}

// node_modules/d3-hierarchy/src/treemap/slice.js
function slice_default(parent, x06, y06, x12, y12) {
  var nodes = parent.children, node, i = -1, n2 = nodes.length, k2 = parent.value && (y12 - y06) / parent.value;
  while (++i < n2) {
    node = nodes[i], node.x0 = x06, node.x1 = x12;
    node.y0 = y06, node.y1 = y06 += node.value * k2;
  }
}

// node_modules/d3-hierarchy/src/treemap/squarify.js
var phi = (1 + Math.sqrt(5)) / 2;
function squarifyRatio(ratio, parent, x06, y06, x12, y12) {
  var rows = [], nodes = parent.children, row, nodeValue, i0 = 0, i1 = 0, n2 = nodes.length, dx, dy, value = parent.value, sumValue, minValue, maxValue, newRatio, minRatio, alpha, beta;
  while (i0 < n2) {
    dx = x12 - x06, dy = y12 - y06;
    do
      sumValue = nodes[i1++].value;
    while (!sumValue && i1 < n2);
    minValue = maxValue = sumValue;
    alpha = Math.max(dy / dx, dx / dy) / (value * ratio);
    beta = sumValue * sumValue * alpha;
    minRatio = Math.max(maxValue / beta, beta / minValue);
    for (; i1 < n2; ++i1) {
      sumValue += nodeValue = nodes[i1].value;
      if (nodeValue < minValue)
        minValue = nodeValue;
      if (nodeValue > maxValue)
        maxValue = nodeValue;
      beta = sumValue * sumValue * alpha;
      newRatio = Math.max(maxValue / beta, beta / minValue);
      if (newRatio > minRatio) {
        sumValue -= nodeValue;
        break;
      }
      minRatio = newRatio;
    }
    rows.push(row = { value: sumValue, dice: dx < dy, children: nodes.slice(i0, i1) });
    if (row.dice)
      dice_default(row, x06, y06, x12, value ? y06 += dy * sumValue / value : y12);
    else
      slice_default(row, x06, y06, value ? x06 += dx * sumValue / value : x12, y12);
    value -= sumValue, i0 = i1;
  }
  return rows;
}
var squarify_default = function custom10(ratio) {
  function squarify(parent, x06, y06, x12, y12) {
    squarifyRatio(ratio, parent, x06, y06, x12, y12);
  }
  squarify.ratio = function(x4) {
    return custom10((x4 = +x4) > 1 ? x4 : 1);
  };
  return squarify;
}(phi);

// node_modules/d3-hierarchy/src/treemap/index.js
function treemap_default() {
  var tile = squarify_default, round = false, dx = 1, dy = 1, paddingStack = [0], paddingInner = constantZero, paddingTop = constantZero, paddingRight = constantZero, paddingBottom = constantZero, paddingLeft = constantZero;
  function treemap(root3) {
    root3.x0 = root3.y0 = 0;
    root3.x1 = dx;
    root3.y1 = dy;
    root3.eachBefore(positionNode);
    paddingStack = [0];
    if (round)
      root3.eachBefore(round_default2);
    return root3;
  }
  function positionNode(node) {
    var p = paddingStack[node.depth], x06 = node.x0 + p, y06 = node.y0 + p, x12 = node.x1 - p, y12 = node.y1 - p;
    if (x12 < x06)
      x06 = x12 = (x06 + x12) / 2;
    if (y12 < y06)
      y06 = y12 = (y06 + y12) / 2;
    node.x0 = x06;
    node.y0 = y06;
    node.x1 = x12;
    node.y1 = y12;
    if (node.children) {
      p = paddingStack[node.depth + 1] = paddingInner(node) / 2;
      x06 += paddingLeft(node) - p;
      y06 += paddingTop(node) - p;
      x12 -= paddingRight(node) - p;
      y12 -= paddingBottom(node) - p;
      if (x12 < x06)
        x06 = x12 = (x06 + x12) / 2;
      if (y12 < y06)
        y06 = y12 = (y06 + y12) / 2;
      tile(node, x06, y06, x12, y12);
    }
  }
  treemap.round = function(x4) {
    return arguments.length ? (round = !!x4, treemap) : round;
  };
  treemap.size = function(x4) {
    return arguments.length ? (dx = +x4[0], dy = +x4[1], treemap) : [dx, dy];
  };
  treemap.tile = function(x4) {
    return arguments.length ? (tile = required(x4), treemap) : tile;
  };
  treemap.padding = function(x4) {
    return arguments.length ? treemap.paddingInner(x4).paddingOuter(x4) : treemap.paddingInner();
  };
  treemap.paddingInner = function(x4) {
    return arguments.length ? (paddingInner = typeof x4 === "function" ? x4 : constant_default10(+x4), treemap) : paddingInner;
  };
  treemap.paddingOuter = function(x4) {
    return arguments.length ? treemap.paddingTop(x4).paddingRight(x4).paddingBottom(x4).paddingLeft(x4) : treemap.paddingTop();
  };
  treemap.paddingTop = function(x4) {
    return arguments.length ? (paddingTop = typeof x4 === "function" ? x4 : constant_default10(+x4), treemap) : paddingTop;
  };
  treemap.paddingRight = function(x4) {
    return arguments.length ? (paddingRight = typeof x4 === "function" ? x4 : constant_default10(+x4), treemap) : paddingRight;
  };
  treemap.paddingBottom = function(x4) {
    return arguments.length ? (paddingBottom = typeof x4 === "function" ? x4 : constant_default10(+x4), treemap) : paddingBottom;
  };
  treemap.paddingLeft = function(x4) {
    return arguments.length ? (paddingLeft = typeof x4 === "function" ? x4 : constant_default10(+x4), treemap) : paddingLeft;
  };
  return treemap;
}

// node_modules/d3-hierarchy/src/treemap/binary.js
function binary_default(parent, x06, y06, x12, y12) {
  var nodes = parent.children, i, n2 = nodes.length, sum3, sums = new Array(n2 + 1);
  for (sums[0] = sum3 = i = 0; i < n2; ++i) {
    sums[i + 1] = sum3 += nodes[i].value;
  }
  partition(0, n2, parent.value, x06, y06, x12, y12);
  function partition(i2, j, value, x07, y07, x13, y13) {
    if (i2 >= j - 1) {
      var node = nodes[i2];
      node.x0 = x07, node.y0 = y07;
      node.x1 = x13, node.y1 = y13;
      return;
    }
    var valueOffset = sums[i2], valueTarget = value / 2 + valueOffset, k2 = i2 + 1, hi = j - 1;
    while (k2 < hi) {
      var mid = k2 + hi >>> 1;
      if (sums[mid] < valueTarget)
        k2 = mid + 1;
      else
        hi = mid;
    }
    if (valueTarget - sums[k2 - 1] < sums[k2] - valueTarget && i2 + 1 < k2)
      --k2;
    var valueLeft = sums[k2] - valueOffset, valueRight = value - valueLeft;
    if (x13 - x07 > y13 - y07) {
      var xk = value ? (x07 * valueRight + x13 * valueLeft) / value : x13;
      partition(i2, k2, valueLeft, x07, y07, xk, y13);
      partition(k2, j, valueRight, xk, y07, x13, y13);
    } else {
      var yk = value ? (y07 * valueRight + y13 * valueLeft) / value : y13;
      partition(i2, k2, valueLeft, x07, y07, x13, yk);
      partition(k2, j, valueRight, x07, yk, x13, y13);
    }
  }
}

// node_modules/d3-hierarchy/src/treemap/sliceDice.js
function sliceDice_default(parent, x06, y06, x12, y12) {
  (parent.depth & 1 ? slice_default : dice_default)(parent, x06, y06, x12, y12);
}

// node_modules/d3-hierarchy/src/treemap/resquarify.js
var resquarify_default = function custom11(ratio) {
  function resquarify(parent, x06, y06, x12, y12) {
    if ((rows = parent._squarify) && rows.ratio === ratio) {
      var rows, row, nodes, i, j = -1, n2, m2 = rows.length, value = parent.value;
      while (++j < m2) {
        row = rows[j], nodes = row.children;
        for (i = row.value = 0, n2 = nodes.length; i < n2; ++i)
          row.value += nodes[i].value;
        if (row.dice)
          dice_default(row, x06, y06, x12, value ? y06 += (y12 - y06) * row.value / value : y12);
        else
          slice_default(row, x06, y06, value ? x06 += (x12 - x06) * row.value / value : x12, y12);
        value -= row.value;
      }
    } else {
      parent._squarify = rows = squarifyRatio(ratio, parent, x06, y06, x12, y12);
      rows.ratio = ratio;
    }
  }
  resquarify.ratio = function(x4) {
    return custom11((x4 = +x4) > 1 ? x4 : 1);
  };
  return resquarify;
}(phi);

// node_modules/d3-polygon/src/area.js
function area_default4(polygon) {
  var i = -1, n2 = polygon.length, a3, b = polygon[n2 - 1], area = 0;
  while (++i < n2) {
    a3 = b;
    b = polygon[i];
    area += a3[1] * b[0] - a3[0] * b[1];
  }
  return area / 2;
}

// node_modules/d3-polygon/src/centroid.js
function centroid_default3(polygon) {
  var i = -1, n2 = polygon.length, x4 = 0, y4 = 0, a3, b = polygon[n2 - 1], c5, k2 = 0;
  while (++i < n2) {
    a3 = b;
    b = polygon[i];
    k2 += c5 = a3[0] * b[1] - b[0] * a3[1];
    x4 += (a3[0] + b[0]) * c5;
    y4 += (a3[1] + b[1]) * c5;
  }
  return k2 *= 3, [x4 / k2, y4 / k2];
}

// node_modules/d3-polygon/src/cross.js
function cross_default(a3, b, c5) {
  return (b[0] - a3[0]) * (c5[1] - a3[1]) - (b[1] - a3[1]) * (c5[0] - a3[0]);
}

// node_modules/d3-polygon/src/hull.js
function lexicographicOrder(a3, b) {
  return a3[0] - b[0] || a3[1] - b[1];
}
function computeUpperHullIndexes(points) {
  const n2 = points.length, indexes2 = [0, 1];
  let size = 2, i;
  for (i = 2; i < n2; ++i) {
    while (size > 1 && cross_default(points[indexes2[size - 2]], points[indexes2[size - 1]], points[i]) <= 0)
      --size;
    indexes2[size++] = i;
  }
  return indexes2.slice(0, size);
}
function hull_default(points) {
  if ((n2 = points.length) < 3)
    return null;
  var i, n2, sortedPoints = new Array(n2), flippedPoints = new Array(n2);
  for (i = 0; i < n2; ++i)
    sortedPoints[i] = [+points[i][0], +points[i][1], i];
  sortedPoints.sort(lexicographicOrder);
  for (i = 0; i < n2; ++i)
    flippedPoints[i] = [sortedPoints[i][0], -sortedPoints[i][1]];
  var upperIndexes = computeUpperHullIndexes(sortedPoints), lowerIndexes = computeUpperHullIndexes(flippedPoints);
  var skipLeft = lowerIndexes[0] === upperIndexes[0], skipRight = lowerIndexes[lowerIndexes.length - 1] === upperIndexes[upperIndexes.length - 1], hull = [];
  for (i = upperIndexes.length - 1; i >= 0; --i)
    hull.push(points[sortedPoints[upperIndexes[i]][2]]);
  for (i = +skipLeft; i < lowerIndexes.length - skipRight; ++i)
    hull.push(points[sortedPoints[lowerIndexes[i]][2]]);
  return hull;
}

// node_modules/d3-polygon/src/contains.js
function contains_default3(polygon, point6) {
  var n2 = polygon.length, p = polygon[n2 - 1], x4 = point6[0], y4 = point6[1], x06 = p[0], y06 = p[1], x12, y12, inside = false;
  for (var i = 0; i < n2; ++i) {
    p = polygon[i], x12 = p[0], y12 = p[1];
    if (y12 > y4 !== y06 > y4 && x4 < (x06 - x12) * (y4 - y12) / (y06 - y12) + x12)
      inside = !inside;
    x06 = x12, y06 = y12;
  }
  return inside;
}

// node_modules/d3-polygon/src/length.js
function length_default2(polygon) {
  var i = -1, n2 = polygon.length, b = polygon[n2 - 1], xa, ya, xb = b[0], yb = b[1], perimeter = 0;
  while (++i < n2) {
    xa = xb;
    ya = yb;
    b = polygon[i];
    xb = b[0];
    yb = b[1];
    xa -= xb;
    ya -= yb;
    perimeter += Math.hypot(xa, ya);
  }
  return perimeter;
}

// node_modules/d3-random/src/defaultSource.js
var defaultSource_default = Math.random;

// node_modules/d3-random/src/uniform.js
var uniform_default = function sourceRandomUniform(source) {
  function randomUniform(min4, max5) {
    min4 = min4 == null ? 0 : +min4;
    max5 = max5 == null ? 1 : +max5;
    if (arguments.length === 1)
      max5 = min4, min4 = 0;
    else
      max5 -= min4;
    return function() {
      return source() * max5 + min4;
    };
  }
  randomUniform.source = sourceRandomUniform;
  return randomUniform;
}(defaultSource_default);

// node_modules/d3-random/src/int.js
var int_default = function sourceRandomInt(source) {
  function randomInt(min4, max5) {
    if (arguments.length < 2)
      max5 = min4, min4 = 0;
    min4 = Math.floor(min4);
    max5 = Math.floor(max5) - min4;
    return function() {
      return Math.floor(source() * max5 + min4);
    };
  }
  randomInt.source = sourceRandomInt;
  return randomInt;
}(defaultSource_default);

// node_modules/d3-random/src/normal.js
var normal_default = function sourceRandomNormal(source) {
  function randomNormal(mu, sigma) {
    var x4, r;
    mu = mu == null ? 0 : +mu;
    sigma = sigma == null ? 1 : +sigma;
    return function() {
      var y4;
      if (x4 != null)
        y4 = x4, x4 = null;
      else
        do {
          x4 = source() * 2 - 1;
          y4 = source() * 2 - 1;
          r = x4 * x4 + y4 * y4;
        } while (!r || r > 1);
      return mu + sigma * y4 * Math.sqrt(-2 * Math.log(r) / r);
    };
  }
  randomNormal.source = sourceRandomNormal;
  return randomNormal;
}(defaultSource_default);

// node_modules/d3-random/src/logNormal.js
var logNormal_default = function sourceRandomLogNormal(source) {
  var N = normal_default.source(source);
  function randomLogNormal() {
    var randomNormal = N.apply(this, arguments);
    return function() {
      return Math.exp(randomNormal());
    };
  }
  randomLogNormal.source = sourceRandomLogNormal;
  return randomLogNormal;
}(defaultSource_default);

// node_modules/d3-random/src/irwinHall.js
var irwinHall_default = function sourceRandomIrwinHall(source) {
  function randomIrwinHall(n2) {
    if ((n2 = +n2) <= 0)
      return () => 0;
    return function() {
      for (var sum3 = 0, i = n2; i > 1; --i)
        sum3 += source();
      return sum3 + i * source();
    };
  }
  randomIrwinHall.source = sourceRandomIrwinHall;
  return randomIrwinHall;
}(defaultSource_default);

// node_modules/d3-random/src/bates.js
var bates_default = function sourceRandomBates(source) {
  var I = irwinHall_default.source(source);
  function randomBates(n2) {
    if ((n2 = +n2) === 0)
      return source;
    var randomIrwinHall = I(n2);
    return function() {
      return randomIrwinHall() / n2;
    };
  }
  randomBates.source = sourceRandomBates;
  return randomBates;
}(defaultSource_default);

// node_modules/d3-random/src/exponential.js
var exponential_default = function sourceRandomExponential(source) {
  function randomExponential(lambda) {
    return function() {
      return -Math.log1p(-source()) / lambda;
    };
  }
  randomExponential.source = sourceRandomExponential;
  return randomExponential;
}(defaultSource_default);

// node_modules/d3-random/src/pareto.js
var pareto_default = function sourceRandomPareto(source) {
  function randomPareto(alpha) {
    if ((alpha = +alpha) < 0)
      throw new RangeError("invalid alpha");
    alpha = 1 / -alpha;
    return function() {
      return Math.pow(1 - source(), alpha);
    };
  }
  randomPareto.source = sourceRandomPareto;
  return randomPareto;
}(defaultSource_default);

// node_modules/d3-random/src/bernoulli.js
var bernoulli_default = function sourceRandomBernoulli(source) {
  function randomBernoulli(p) {
    if ((p = +p) < 0 || p > 1)
      throw new RangeError("invalid p");
    return function() {
      return Math.floor(source() + p);
    };
  }
  randomBernoulli.source = sourceRandomBernoulli;
  return randomBernoulli;
}(defaultSource_default);

// node_modules/d3-random/src/geometric.js
var geometric_default = function sourceRandomGeometric(source) {
  function randomGeometric(p) {
    if ((p = +p) < 0 || p > 1)
      throw new RangeError("invalid p");
    if (p === 0)
      return () => Infinity;
    if (p === 1)
      return () => 1;
    p = Math.log1p(-p);
    return function() {
      return 1 + Math.floor(Math.log1p(-source()) / p);
    };
  }
  randomGeometric.source = sourceRandomGeometric;
  return randomGeometric;
}(defaultSource_default);

// node_modules/d3-random/src/gamma.js
var gamma_default = function sourceRandomGamma(source) {
  var randomNormal = normal_default.source(source)();
  function randomGamma(k2, theta) {
    if ((k2 = +k2) < 0)
      throw new RangeError("invalid k");
    if (k2 === 0)
      return () => 0;
    theta = theta == null ? 1 : +theta;
    if (k2 === 1)
      return () => -Math.log1p(-source()) * theta;
    var d = (k2 < 1 ? k2 + 1 : k2) - 1 / 3, c5 = 1 / (3 * Math.sqrt(d)), multiplier = k2 < 1 ? () => Math.pow(source(), 1 / k2) : () => 1;
    return function() {
      do {
        do {
          var x4 = randomNormal(), v = 1 + c5 * x4;
        } while (v <= 0);
        v *= v * v;
        var u = 1 - source();
      } while (u >= 1 - 0.0331 * x4 * x4 * x4 * x4 && Math.log(u) >= 0.5 * x4 * x4 + d * (1 - v + Math.log(v)));
      return d * v * multiplier() * theta;
    };
  }
  randomGamma.source = sourceRandomGamma;
  return randomGamma;
}(defaultSource_default);

// node_modules/d3-random/src/beta.js
var beta_default = function sourceRandomBeta(source) {
  var G = gamma_default.source(source);
  function randomBeta(alpha, beta) {
    var X3 = G(alpha), Y3 = G(beta);
    return function() {
      var x4 = X3();
      return x4 === 0 ? 0 : x4 / (x4 + Y3());
    };
  }
  randomBeta.source = sourceRandomBeta;
  return randomBeta;
}(defaultSource_default);

// node_modules/d3-random/src/binomial.js
var binomial_default = function sourceRandomBinomial(source) {
  var G = geometric_default.source(source), B2 = beta_default.source(source);
  function randomBinomial(n2, p) {
    n2 = +n2;
    if ((p = +p) >= 1)
      return () => n2;
    if (p <= 0)
      return () => 0;
    return function() {
      var acc = 0, nn = n2, pp = p;
      while (nn * pp > 16 && nn * (1 - pp) > 16) {
        var i = Math.floor((nn + 1) * pp), y4 = B2(i, nn - i + 1)();
        if (y4 <= pp) {
          acc += i;
          nn -= i;
          pp = (pp - y4) / (1 - y4);
        } else {
          nn = i - 1;
          pp /= y4;
        }
      }
      var sign3 = pp < 0.5, pFinal = sign3 ? pp : 1 - pp, g = G(pFinal);
      for (var s3 = g(), k2 = 0; s3 <= nn; ++k2)
        s3 += g();
      return acc + (sign3 ? k2 : nn - k2);
    };
  }
  randomBinomial.source = sourceRandomBinomial;
  return randomBinomial;
}(defaultSource_default);

// node_modules/d3-random/src/weibull.js
var weibull_default = function sourceRandomWeibull(source) {
  function randomWeibull(k2, a3, b) {
    var outerFunc;
    if ((k2 = +k2) === 0) {
      outerFunc = (x4) => -Math.log(x4);
    } else {
      k2 = 1 / k2;
      outerFunc = (x4) => Math.pow(x4, k2);
    }
    a3 = a3 == null ? 0 : +a3;
    b = b == null ? 1 : +b;
    return function() {
      return a3 + b * outerFunc(-Math.log1p(-source()));
    };
  }
  randomWeibull.source = sourceRandomWeibull;
  return randomWeibull;
}(defaultSource_default);

// node_modules/d3-random/src/cauchy.js
var cauchy_default = function sourceRandomCauchy(source) {
  function randomCauchy(a3, b) {
    a3 = a3 == null ? 0 : +a3;
    b = b == null ? 1 : +b;
    return function() {
      return a3 + b * Math.tan(Math.PI * source());
    };
  }
  randomCauchy.source = sourceRandomCauchy;
  return randomCauchy;
}(defaultSource_default);

// node_modules/d3-random/src/logistic.js
var logistic_default = function sourceRandomLogistic(source) {
  function randomLogistic(a3, b) {
    a3 = a3 == null ? 0 : +a3;
    b = b == null ? 1 : +b;
    return function() {
      var u = source();
      return a3 + b * Math.log(u / (1 - u));
    };
  }
  randomLogistic.source = sourceRandomLogistic;
  return randomLogistic;
}(defaultSource_default);

// node_modules/d3-random/src/poisson.js
var poisson_default = function sourceRandomPoisson(source) {
  var G = gamma_default.source(source), B2 = binomial_default.source(source);
  function randomPoisson(lambda) {
    return function() {
      var acc = 0, l2 = lambda;
      while (l2 > 16) {
        var n2 = Math.floor(0.875 * l2), t = G(n2)();
        if (t > l2)
          return acc + B2(n2 - 1, l2 / t)();
        acc += n2;
        l2 -= t;
      }
      for (var s3 = -Math.log1p(-source()), k2 = 0; s3 <= l2; ++k2)
        s3 -= Math.log1p(-source());
      return acc + k2;
    };
  }
  randomPoisson.source = sourceRandomPoisson;
  return randomPoisson;
}(defaultSource_default);

// node_modules/d3-random/src/lcg.js
var mul = 1664525;
var inc = 1013904223;
var eps = 1 / 4294967296;
function lcg(seed = Math.random()) {
  let state = (0 <= seed && seed < 1 ? seed / eps : Math.abs(seed)) | 0;
  return () => (state = mul * state + inc | 0, eps * (state >>> 0));
}

// node_modules/d3-scale/src/init.js
function initRange(domain, range3) {
  switch (arguments.length) {
    case 0:
      break;
    case 1:
      this.range(domain);
      break;
    default:
      this.range(range3).domain(domain);
      break;
  }
  return this;
}
function initInterpolator(domain, interpolator) {
  switch (arguments.length) {
    case 0:
      break;
    case 1: {
      if (typeof domain === "function")
        this.interpolator(domain);
      else
        this.range(domain);
      break;
    }
    default: {
      this.domain(domain);
      if (typeof interpolator === "function")
        this.interpolator(interpolator);
      else
        this.range(interpolator);
      break;
    }
  }
  return this;
}

// node_modules/d3-scale/src/ordinal.js
var implicit = Symbol("implicit");
function ordinal() {
  var index3 = /* @__PURE__ */ new Map(), domain = [], range3 = [], unknown = implicit;
  function scale(d) {
    var key = d + "", i = index3.get(key);
    if (!i) {
      if (unknown !== implicit)
        return unknown;
      index3.set(key, i = domain.push(d));
    }
    return range3[(i - 1) % range3.length];
  }
  scale.domain = function(_) {
    if (!arguments.length)
      return domain.slice();
    domain = [], index3 = /* @__PURE__ */ new Map();
    for (const value of _) {
      const key = value + "";
      if (index3.has(key))
        continue;
      index3.set(key, domain.push(value));
    }
    return scale;
  };
  scale.range = function(_) {
    return arguments.length ? (range3 = Array.from(_), scale) : range3.slice();
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  scale.copy = function() {
    return ordinal(domain, range3).unknown(unknown);
  };
  initRange.apply(scale, arguments);
  return scale;
}

// node_modules/d3-scale/src/band.js
function band() {
  var scale = ordinal().unknown(void 0), domain = scale.domain, ordinalRange = scale.range, r0 = 0, r1 = 1, step, bandwidth, round = false, paddingInner = 0, paddingOuter = 0, align = 0.5;
  delete scale.unknown;
  function rescale() {
    var n2 = domain().length, reverse2 = r1 < r0, start2 = reverse2 ? r1 : r0, stop = reverse2 ? r0 : r1;
    step = (stop - start2) / Math.max(1, n2 - paddingInner + paddingOuter * 2);
    if (round)
      step = Math.floor(step);
    start2 += (stop - start2 - step * (n2 - paddingInner)) * align;
    bandwidth = step * (1 - paddingInner);
    if (round)
      start2 = Math.round(start2), bandwidth = Math.round(bandwidth);
    var values = range_default(n2).map(function(i) {
      return start2 + step * i;
    });
    return ordinalRange(reverse2 ? values.reverse() : values);
  }
  scale.domain = function(_) {
    return arguments.length ? (domain(_), rescale()) : domain();
  };
  scale.range = function(_) {
    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];
  };
  scale.rangeRound = function(_) {
    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();
  };
  scale.bandwidth = function() {
    return bandwidth;
  };
  scale.step = function() {
    return step;
  };
  scale.round = function(_) {
    return arguments.length ? (round = !!_, rescale()) : round;
  };
  scale.padding = function(_) {
    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;
  };
  scale.paddingInner = function(_) {
    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;
  };
  scale.paddingOuter = function(_) {
    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;
  };
  scale.align = function(_) {
    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;
  };
  scale.copy = function() {
    return band(domain(), [r0, r1]).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align);
  };
  return initRange.apply(rescale(), arguments);
}
function pointish(scale) {
  var copy3 = scale.copy;
  scale.padding = scale.paddingOuter;
  delete scale.paddingInner;
  delete scale.paddingOuter;
  scale.copy = function() {
    return pointish(copy3());
  };
  return scale;
}
function point() {
  return pointish(band.apply(null, arguments).paddingInner(1));
}

// node_modules/d3-scale/src/constant.js
function constants(x4) {
  return function() {
    return x4;
  };
}

// node_modules/d3-scale/src/number.js
function number3(x4) {
  return +x4;
}

// node_modules/d3-scale/src/continuous.js
var unit = [0, 1];
function identity2(x4) {
  return x4;
}
function normalize(a3, b) {
  return (b -= a3 = +a3) ? function(x4) {
    return (x4 - a3) / b;
  } : constants(isNaN(b) ? NaN : 0.5);
}
function clamper(a3, b) {
  var t;
  if (a3 > b)
    t = a3, a3 = b, b = t;
  return function(x4) {
    return Math.max(a3, Math.min(b, x4));
  };
}
function bimap(domain, range3, interpolate) {
  var d0 = domain[0], d1 = domain[1], r0 = range3[0], r1 = range3[1];
  if (d1 < d0)
    d0 = normalize(d1, d0), r0 = interpolate(r1, r0);
  else
    d0 = normalize(d0, d1), r0 = interpolate(r0, r1);
  return function(x4) {
    return r0(d0(x4));
  };
}
function polymap(domain, range3, interpolate) {
  var j = Math.min(domain.length, range3.length) - 1, d = new Array(j), r = new Array(j), i = -1;
  if (domain[j] < domain[0]) {
    domain = domain.slice().reverse();
    range3 = range3.slice().reverse();
  }
  while (++i < j) {
    d[i] = normalize(domain[i], domain[i + 1]);
    r[i] = interpolate(range3[i], range3[i + 1]);
  }
  return function(x4) {
    var i2 = bisect_default(domain, x4, 1, j) - 1;
    return r[i2](d[i2](x4));
  };
}
function copy(source, target) {
  return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown());
}
function transformer2() {
  var domain = unit, range3 = unit, interpolate = value_default, transform2, untransform, unknown, clamp = identity2, piecewise2, output, input;
  function rescale() {
    var n2 = Math.min(domain.length, range3.length);
    if (clamp !== identity2)
      clamp = clamper(domain[0], domain[n2 - 1]);
    piecewise2 = n2 > 2 ? polymap : bimap;
    output = input = null;
    return scale;
  }
  function scale(x4) {
    return x4 == null || isNaN(x4 = +x4) ? unknown : (output || (output = piecewise2(domain.map(transform2), range3, interpolate)))(transform2(clamp(x4)));
  }
  scale.invert = function(y4) {
    return clamp(untransform((input || (input = piecewise2(range3, domain.map(transform2), number_default2)))(y4)));
  };
  scale.domain = function(_) {
    return arguments.length ? (domain = Array.from(_, number3), rescale()) : domain.slice();
  };
  scale.range = function(_) {
    return arguments.length ? (range3 = Array.from(_), rescale()) : range3.slice();
  };
  scale.rangeRound = function(_) {
    return range3 = Array.from(_), interpolate = round_default, rescale();
  };
  scale.clamp = function(_) {
    return arguments.length ? (clamp = _ ? true : identity2, rescale()) : clamp !== identity2;
  };
  scale.interpolate = function(_) {
    return arguments.length ? (interpolate = _, rescale()) : interpolate;
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  return function(t, u) {
    transform2 = t, untransform = u;
    return rescale();
  };
}
function continuous() {
  return transformer2()(identity2, identity2);
}

// node_modules/d3-scale/src/tickFormat.js
function tickFormat(start2, stop, count3, specifier) {
  var step = tickStep(start2, stop, count3), precision;
  specifier = formatSpecifier(specifier == null ? ",f" : specifier);
  switch (specifier.type) {
    case "s": {
      var value = Math.max(Math.abs(start2), Math.abs(stop));
      if (specifier.precision == null && !isNaN(precision = precisionPrefix_default(step, value)))
        specifier.precision = precision;
      return formatPrefix(specifier, value);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      if (specifier.precision == null && !isNaN(precision = precisionRound_default(step, Math.max(Math.abs(start2), Math.abs(stop)))))
        specifier.precision = precision - (specifier.type === "e");
      break;
    }
    case "f":
    case "%": {
      if (specifier.precision == null && !isNaN(precision = precisionFixed_default(step)))
        specifier.precision = precision - (specifier.type === "%") * 2;
      break;
    }
  }
  return format(specifier);
}

// node_modules/d3-scale/src/linear.js
function linearish(scale) {
  var domain = scale.domain;
  scale.ticks = function(count3) {
    var d = domain();
    return ticks_default(d[0], d[d.length - 1], count3 == null ? 10 : count3);
  };
  scale.tickFormat = function(count3, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count3 == null ? 10 : count3, specifier);
  };
  scale.nice = function(count3) {
    if (count3 == null)
      count3 = 10;
    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start2 = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;
    if (stop < start2) {
      step = start2, start2 = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }
    while (maxIter-- > 0) {
      step = tickIncrement(start2, stop, count3);
      if (step === prestep) {
        d[i0] = start2;
        d[i1] = stop;
        return domain(d);
      } else if (step > 0) {
        start2 = Math.floor(start2 / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start2 = Math.ceil(start2 * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }
    return scale;
  };
  return scale;
}
function linear3() {
  var scale = continuous();
  scale.copy = function() {
    return copy(scale, linear3());
  };
  initRange.apply(scale, arguments);
  return linearish(scale);
}

// node_modules/d3-scale/src/identity.js
function identity3(domain) {
  var unknown;
  function scale(x4) {
    return x4 == null || isNaN(x4 = +x4) ? unknown : x4;
  }
  scale.invert = scale;
  scale.domain = scale.range = function(_) {
    return arguments.length ? (domain = Array.from(_, number3), scale) : domain.slice();
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  scale.copy = function() {
    return identity3(domain).unknown(unknown);
  };
  domain = arguments.length ? Array.from(domain, number3) : [0, 1];
  return linearish(scale);
}

// node_modules/d3-scale/src/nice.js
function nice2(domain, interval2) {
  domain = domain.slice();
  var i0 = 0, i1 = domain.length - 1, x06 = domain[i0], x12 = domain[i1], t;
  if (x12 < x06) {
    t = i0, i0 = i1, i1 = t;
    t = x06, x06 = x12, x12 = t;
  }
  domain[i0] = interval2.floor(x06);
  domain[i1] = interval2.ceil(x12);
  return domain;
}

// node_modules/d3-scale/src/log.js
function transformLog(x4) {
  return Math.log(x4);
}
function transformExp(x4) {
  return Math.exp(x4);
}
function transformLogn(x4) {
  return -Math.log(-x4);
}
function transformExpn(x4) {
  return -Math.exp(-x4);
}
function pow10(x4) {
  return isFinite(x4) ? +("1e" + x4) : x4 < 0 ? 0 : x4;
}
function powp(base) {
  return base === 10 ? pow10 : base === Math.E ? Math.exp : function(x4) {
    return Math.pow(base, x4);
  };
}
function logp(base) {
  return base === Math.E ? Math.log : base === 10 && Math.log10 || base === 2 && Math.log2 || (base = Math.log(base), function(x4) {
    return Math.log(x4) / base;
  });
}
function reflect(f) {
  return function(x4) {
    return -f(-x4);
  };
}
function loggish(transform2) {
  var scale = transform2(transformLog, transformExp), domain = scale.domain, base = 10, logs, pows;
  function rescale() {
    logs = logp(base), pows = powp(base);
    if (domain()[0] < 0) {
      logs = reflect(logs), pows = reflect(pows);
      transform2(transformLogn, transformExpn);
    } else {
      transform2(transformLog, transformExp);
    }
    return scale;
  }
  scale.base = function(_) {
    return arguments.length ? (base = +_, rescale()) : base;
  };
  scale.domain = function(_) {
    return arguments.length ? (domain(_), rescale()) : domain();
  };
  scale.ticks = function(count3) {
    var d = domain(), u = d[0], v = d[d.length - 1], r;
    if (r = v < u)
      i = u, u = v, v = i;
    var i = logs(u), j = logs(v), p, k2, t, n2 = count3 == null ? 10 : +count3, z = [];
    if (!(base % 1) && j - i < n2) {
      i = Math.floor(i), j = Math.ceil(j);
      if (u > 0)
        for (; i <= j; ++i) {
          for (k2 = 1, p = pows(i); k2 < base; ++k2) {
            t = p * k2;
            if (t < u)
              continue;
            if (t > v)
              break;
            z.push(t);
          }
        }
      else
        for (; i <= j; ++i) {
          for (k2 = base - 1, p = pows(i); k2 >= 1; --k2) {
            t = p * k2;
            if (t < u)
              continue;
            if (t > v)
              break;
            z.push(t);
          }
        }
      if (z.length * 2 < n2)
        z = ticks_default(u, v, n2);
    } else {
      z = ticks_default(i, j, Math.min(j - i, n2)).map(pows);
    }
    return r ? z.reverse() : z;
  };
  scale.tickFormat = function(count3, specifier) {
    if (specifier == null)
      specifier = base === 10 ? ".0e" : ",";
    if (typeof specifier !== "function")
      specifier = format(specifier);
    if (count3 === Infinity)
      return specifier;
    if (count3 == null)
      count3 = 10;
    var k2 = Math.max(1, base * count3 / scale.ticks().length);
    return function(d) {
      var i = d / pows(Math.round(logs(d)));
      if (i * base < base - 0.5)
        i *= base;
      return i <= k2 ? specifier(d) : "";
    };
  };
  scale.nice = function() {
    return domain(nice2(domain(), {
      floor: function(x4) {
        return pows(Math.floor(logs(x4)));
      },
      ceil: function(x4) {
        return pows(Math.ceil(logs(x4)));
      }
    }));
  };
  return scale;
}
function log3() {
  var scale = loggish(transformer2()).domain([1, 10]);
  scale.copy = function() {
    return copy(scale, log3()).base(scale.base());
  };
  initRange.apply(scale, arguments);
  return scale;
}

// node_modules/d3-scale/src/symlog.js
function transformSymlog(c5) {
  return function(x4) {
    return Math.sign(x4) * Math.log1p(Math.abs(x4 / c5));
  };
}
function transformSymexp(c5) {
  return function(x4) {
    return Math.sign(x4) * Math.expm1(Math.abs(x4)) * c5;
  };
}
function symlogish(transform2) {
  var c5 = 1, scale = transform2(transformSymlog(c5), transformSymexp(c5));
  scale.constant = function(_) {
    return arguments.length ? transform2(transformSymlog(c5 = +_), transformSymexp(c5)) : c5;
  };
  return linearish(scale);
}
function symlog() {
  var scale = symlogish(transformer2());
  scale.copy = function() {
    return copy(scale, symlog()).constant(scale.constant());
  };
  return initRange.apply(scale, arguments);
}

// node_modules/d3-scale/src/pow.js
function transformPow(exponent2) {
  return function(x4) {
    return x4 < 0 ? -Math.pow(-x4, exponent2) : Math.pow(x4, exponent2);
  };
}
function transformSqrt(x4) {
  return x4 < 0 ? -Math.sqrt(-x4) : Math.sqrt(x4);
}
function transformSquare(x4) {
  return x4 < 0 ? -x4 * x4 : x4 * x4;
}
function powish(transform2) {
  var scale = transform2(identity2, identity2), exponent2 = 1;
  function rescale() {
    return exponent2 === 1 ? transform2(identity2, identity2) : exponent2 === 0.5 ? transform2(transformSqrt, transformSquare) : transform2(transformPow(exponent2), transformPow(1 / exponent2));
  }
  scale.exponent = function(_) {
    return arguments.length ? (exponent2 = +_, rescale()) : exponent2;
  };
  return linearish(scale);
}
function pow3() {
  var scale = powish(transformer2());
  scale.copy = function() {
    return copy(scale, pow3()).exponent(scale.exponent());
  };
  initRange.apply(scale, arguments);
  return scale;
}
function sqrt2() {
  return pow3.apply(null, arguments).exponent(0.5);
}

// node_modules/d3-scale/src/radial.js
function square(x4) {
  return Math.sign(x4) * x4 * x4;
}
function unsquare(x4) {
  return Math.sign(x4) * Math.sqrt(Math.abs(x4));
}
function radial() {
  var squared = continuous(), range3 = [0, 1], round = false, unknown;
  function scale(x4) {
    var y4 = unsquare(squared(x4));
    return isNaN(y4) ? unknown : round ? Math.round(y4) : y4;
  }
  scale.invert = function(y4) {
    return squared.invert(square(y4));
  };
  scale.domain = function(_) {
    return arguments.length ? (squared.domain(_), scale) : squared.domain();
  };
  scale.range = function(_) {
    return arguments.length ? (squared.range((range3 = Array.from(_, number3)).map(square)), scale) : range3.slice();
  };
  scale.rangeRound = function(_) {
    return scale.range(_).round(true);
  };
  scale.round = function(_) {
    return arguments.length ? (round = !!_, scale) : round;
  };
  scale.clamp = function(_) {
    return arguments.length ? (squared.clamp(_), scale) : squared.clamp();
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  scale.copy = function() {
    return radial(squared.domain(), range3).round(round).clamp(squared.clamp()).unknown(unknown);
  };
  initRange.apply(scale, arguments);
  return linearish(scale);
}

// node_modules/d3-scale/src/quantile.js
function quantile2() {
  var domain = [], range3 = [], thresholds = [], unknown;
  function rescale() {
    var i = 0, n2 = Math.max(1, range3.length);
    thresholds = new Array(n2 - 1);
    while (++i < n2)
      thresholds[i - 1] = quantileSorted(domain, i / n2);
    return scale;
  }
  function scale(x4) {
    return x4 == null || isNaN(x4 = +x4) ? unknown : range3[bisect_default(thresholds, x4)];
  }
  scale.invertExtent = function(y4) {
    var i = range3.indexOf(y4);
    return i < 0 ? [NaN, NaN] : [
      i > 0 ? thresholds[i - 1] : domain[0],
      i < thresholds.length ? thresholds[i] : domain[domain.length - 1]
    ];
  };
  scale.domain = function(_) {
    if (!arguments.length)
      return domain.slice();
    domain = [];
    for (let d of _)
      if (d != null && !isNaN(d = +d))
        domain.push(d);
    domain.sort(ascending_default);
    return rescale();
  };
  scale.range = function(_) {
    return arguments.length ? (range3 = Array.from(_), rescale()) : range3.slice();
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  scale.quantiles = function() {
    return thresholds.slice();
  };
  scale.copy = function() {
    return quantile2().domain(domain).range(range3).unknown(unknown);
  };
  return initRange.apply(scale, arguments);
}

// node_modules/d3-scale/src/quantize.js
function quantize() {
  var x06 = 0, x12 = 1, n2 = 1, domain = [0.5], range3 = [0, 1], unknown;
  function scale(x4) {
    return x4 != null && x4 <= x4 ? range3[bisect_default(domain, x4, 0, n2)] : unknown;
  }
  function rescale() {
    var i = -1;
    domain = new Array(n2);
    while (++i < n2)
      domain[i] = ((i + 1) * x12 - (i - n2) * x06) / (n2 + 1);
    return scale;
  }
  scale.domain = function(_) {
    return arguments.length ? ([x06, x12] = _, x06 = +x06, x12 = +x12, rescale()) : [x06, x12];
  };
  scale.range = function(_) {
    return arguments.length ? (n2 = (range3 = Array.from(_)).length - 1, rescale()) : range3.slice();
  };
  scale.invertExtent = function(y4) {
    var i = range3.indexOf(y4);
    return i < 0 ? [NaN, NaN] : i < 1 ? [x06, domain[0]] : i >= n2 ? [domain[n2 - 1], x12] : [domain[i - 1], domain[i]];
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : scale;
  };
  scale.thresholds = function() {
    return domain.slice();
  };
  scale.copy = function() {
    return quantize().domain([x06, x12]).range(range3).unknown(unknown);
  };
  return initRange.apply(linearish(scale), arguments);
}

// node_modules/d3-scale/src/threshold.js
function threshold() {
  var domain = [0.5], range3 = [0, 1], unknown, n2 = 1;
  function scale(x4) {
    return x4 != null && x4 <= x4 ? range3[bisect_default(domain, x4, 0, n2)] : unknown;
  }
  scale.domain = function(_) {
    return arguments.length ? (domain = Array.from(_), n2 = Math.min(domain.length, range3.length - 1), scale) : domain.slice();
  };
  scale.range = function(_) {
    return arguments.length ? (range3 = Array.from(_), n2 = Math.min(domain.length, range3.length - 1), scale) : range3.slice();
  };
  scale.invertExtent = function(y4) {
    var i = range3.indexOf(y4);
    return [domain[i - 1], domain[i]];
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  scale.copy = function() {
    return threshold().domain(domain).range(range3).unknown(unknown);
  };
  return initRange.apply(scale, arguments);
}

// node_modules/d3-time/src/interval.js
var t02 = new Date();
var t12 = new Date();
function newInterval(floori, offseti, count3, field) {
  function interval2(date2) {
    return floori(date2 = arguments.length === 0 ? new Date() : new Date(+date2)), date2;
  }
  interval2.floor = function(date2) {
    return floori(date2 = new Date(+date2)), date2;
  };
  interval2.ceil = function(date2) {
    return floori(date2 = new Date(date2 - 1)), offseti(date2, 1), floori(date2), date2;
  };
  interval2.round = function(date2) {
    var d0 = interval2(date2), d1 = interval2.ceil(date2);
    return date2 - d0 < d1 - date2 ? d0 : d1;
  };
  interval2.offset = function(date2, step) {
    return offseti(date2 = new Date(+date2), step == null ? 1 : Math.floor(step)), date2;
  };
  interval2.range = function(start2, stop, step) {
    var range3 = [], previous;
    start2 = interval2.ceil(start2);
    step = step == null ? 1 : Math.floor(step);
    if (!(start2 < stop) || !(step > 0))
      return range3;
    do
      range3.push(previous = new Date(+start2)), offseti(start2, step), floori(start2);
    while (previous < start2 && start2 < stop);
    return range3;
  };
  interval2.filter = function(test) {
    return newInterval(function(date2) {
      if (date2 >= date2)
        while (floori(date2), !test(date2))
          date2.setTime(date2 - 1);
    }, function(date2, step) {
      if (date2 >= date2) {
        if (step < 0)
          while (++step <= 0) {
            while (offseti(date2, -1), !test(date2)) {
            }
          }
        else
          while (--step >= 0) {
            while (offseti(date2, 1), !test(date2)) {
            }
          }
      }
    });
  };
  if (count3) {
    interval2.count = function(start2, end) {
      t02.setTime(+start2), t12.setTime(+end);
      floori(t02), floori(t12);
      return Math.floor(count3(t02, t12));
    };
    interval2.every = function(step) {
      step = Math.floor(step);
      return !isFinite(step) || !(step > 0) ? null : !(step > 1) ? interval2 : interval2.filter(field ? function(d) {
        return field(d) % step === 0;
      } : function(d) {
        return interval2.count(0, d) % step === 0;
      });
    };
  }
  return interval2;
}

// node_modules/d3-time/src/millisecond.js
var millisecond = newInterval(function() {
}, function(date2, step) {
  date2.setTime(+date2 + step);
}, function(start2, end) {
  return end - start2;
});
millisecond.every = function(k2) {
  k2 = Math.floor(k2);
  if (!isFinite(k2) || !(k2 > 0))
    return null;
  if (!(k2 > 1))
    return millisecond;
  return newInterval(function(date2) {
    date2.setTime(Math.floor(date2 / k2) * k2);
  }, function(date2, step) {
    date2.setTime(+date2 + step * k2);
  }, function(start2, end) {
    return (end - start2) / k2;
  });
};
var millisecond_default = millisecond;
var milliseconds = millisecond.range;

// node_modules/d3-time/src/duration.js
var durationSecond = 1e3;
var durationMinute = durationSecond * 60;
var durationHour = durationMinute * 60;
var durationDay = durationHour * 24;
var durationWeek = durationDay * 7;
var durationMonth = durationDay * 30;
var durationYear = durationDay * 365;

// node_modules/d3-time/src/second.js
var second = newInterval(function(date2) {
  date2.setTime(date2 - date2.getMilliseconds());
}, function(date2, step) {
  date2.setTime(+date2 + step * durationSecond);
}, function(start2, end) {
  return (end - start2) / durationSecond;
}, function(date2) {
  return date2.getUTCSeconds();
});
var second_default = second;
var seconds = second.range;

// node_modules/d3-time/src/minute.js
var minute = newInterval(function(date2) {
  date2.setTime(date2 - date2.getMilliseconds() - date2.getSeconds() * durationSecond);
}, function(date2, step) {
  date2.setTime(+date2 + step * durationMinute);
}, function(start2, end) {
  return (end - start2) / durationMinute;
}, function(date2) {
  return date2.getMinutes();
});
var minute_default = minute;
var minutes = minute.range;

// node_modules/d3-time/src/hour.js
var hour = newInterval(function(date2) {
  date2.setTime(date2 - date2.getMilliseconds() - date2.getSeconds() * durationSecond - date2.getMinutes() * durationMinute);
}, function(date2, step) {
  date2.setTime(+date2 + step * durationHour);
}, function(start2, end) {
  return (end - start2) / durationHour;
}, function(date2) {
  return date2.getHours();
});
var hour_default = hour;
var hours = hour.range;

// node_modules/d3-time/src/day.js
var day = newInterval(
  (date2) => date2.setHours(0, 0, 0, 0),
  (date2, step) => date2.setDate(date2.getDate() + step),
  (start2, end) => (end - start2 - (end.getTimezoneOffset() - start2.getTimezoneOffset()) * durationMinute) / durationDay,
  (date2) => date2.getDate() - 1
);
var day_default = day;
var days = day.range;

// node_modules/d3-time/src/week.js
function weekday(i) {
  return newInterval(function(date2) {
    date2.setDate(date2.getDate() - (date2.getDay() + 7 - i) % 7);
    date2.setHours(0, 0, 0, 0);
  }, function(date2, step) {
    date2.setDate(date2.getDate() + step * 7);
  }, function(start2, end) {
    return (end - start2 - (end.getTimezoneOffset() - start2.getTimezoneOffset()) * durationMinute) / durationWeek;
  });
}
var sunday = weekday(0);
var monday = weekday(1);
var tuesday = weekday(2);
var wednesday = weekday(3);
var thursday = weekday(4);
var friday = weekday(5);
var saturday = weekday(6);
var sundays = sunday.range;
var mondays = monday.range;
var tuesdays = tuesday.range;
var wednesdays = wednesday.range;
var thursdays = thursday.range;
var fridays = friday.range;
var saturdays = saturday.range;

// node_modules/d3-time/src/month.js
var month = newInterval(function(date2) {
  date2.setDate(1);
  date2.setHours(0, 0, 0, 0);
}, function(date2, step) {
  date2.setMonth(date2.getMonth() + step);
}, function(start2, end) {
  return end.getMonth() - start2.getMonth() + (end.getFullYear() - start2.getFullYear()) * 12;
}, function(date2) {
  return date2.getMonth();
});
var month_default = month;
var months2 = month.range;

// node_modules/d3-time/src/year.js
var year = newInterval(function(date2) {
  date2.setMonth(0, 1);
  date2.setHours(0, 0, 0, 0);
}, function(date2, step) {
  date2.setFullYear(date2.getFullYear() + step);
}, function(start2, end) {
  return end.getFullYear() - start2.getFullYear();
}, function(date2) {
  return date2.getFullYear();
});
year.every = function(k2) {
  return !isFinite(k2 = Math.floor(k2)) || !(k2 > 0) ? null : newInterval(function(date2) {
    date2.setFullYear(Math.floor(date2.getFullYear() / k2) * k2);
    date2.setMonth(0, 1);
    date2.setHours(0, 0, 0, 0);
  }, function(date2, step) {
    date2.setFullYear(date2.getFullYear() + step * k2);
  });
};
var year_default = year;
var years = year.range;

// node_modules/d3-time/src/utcMinute.js
var utcMinute = newInterval(function(date2) {
  date2.setUTCSeconds(0, 0);
}, function(date2, step) {
  date2.setTime(+date2 + step * durationMinute);
}, function(start2, end) {
  return (end - start2) / durationMinute;
}, function(date2) {
  return date2.getUTCMinutes();
});
var utcMinute_default = utcMinute;
var utcMinutes = utcMinute.range;

// node_modules/d3-time/src/utcHour.js
var utcHour = newInterval(function(date2) {
  date2.setUTCMinutes(0, 0, 0);
}, function(date2, step) {
  date2.setTime(+date2 + step * durationHour);
}, function(start2, end) {
  return (end - start2) / durationHour;
}, function(date2) {
  return date2.getUTCHours();
});
var utcHour_default = utcHour;
var utcHours = utcHour.range;

// node_modules/d3-time/src/utcDay.js
var utcDay = newInterval(function(date2) {
  date2.setUTCHours(0, 0, 0, 0);
}, function(date2, step) {
  date2.setUTCDate(date2.getUTCDate() + step);
}, function(start2, end) {
  return (end - start2) / durationDay;
}, function(date2) {
  return date2.getUTCDate() - 1;
});
var utcDay_default = utcDay;
var utcDays = utcDay.range;

// node_modules/d3-time/src/utcWeek.js
function utcWeekday(i) {
  return newInterval(function(date2) {
    date2.setUTCDate(date2.getUTCDate() - (date2.getUTCDay() + 7 - i) % 7);
    date2.setUTCHours(0, 0, 0, 0);
  }, function(date2, step) {
    date2.setUTCDate(date2.getUTCDate() + step * 7);
  }, function(start2, end) {
    return (end - start2) / durationWeek;
  });
}
var utcSunday = utcWeekday(0);
var utcMonday = utcWeekday(1);
var utcTuesday = utcWeekday(2);
var utcWednesday = utcWeekday(3);
var utcThursday = utcWeekday(4);
var utcFriday = utcWeekday(5);
var utcSaturday = utcWeekday(6);
var utcSundays = utcSunday.range;
var utcMondays = utcMonday.range;
var utcTuesdays = utcTuesday.range;
var utcWednesdays = utcWednesday.range;
var utcThursdays = utcThursday.range;
var utcFridays = utcFriday.range;
var utcSaturdays = utcSaturday.range;

// node_modules/d3-time/src/utcMonth.js
var utcMonth = newInterval(function(date2) {
  date2.setUTCDate(1);
  date2.setUTCHours(0, 0, 0, 0);
}, function(date2, step) {
  date2.setUTCMonth(date2.getUTCMonth() + step);
}, function(start2, end) {
  return end.getUTCMonth() - start2.getUTCMonth() + (end.getUTCFullYear() - start2.getUTCFullYear()) * 12;
}, function(date2) {
  return date2.getUTCMonth();
});
var utcMonth_default = utcMonth;
var utcMonths = utcMonth.range;

// node_modules/d3-time/src/utcYear.js
var utcYear = newInterval(function(date2) {
  date2.setUTCMonth(0, 1);
  date2.setUTCHours(0, 0, 0, 0);
}, function(date2, step) {
  date2.setUTCFullYear(date2.getUTCFullYear() + step);
}, function(start2, end) {
  return end.getUTCFullYear() - start2.getUTCFullYear();
}, function(date2) {
  return date2.getUTCFullYear();
});
utcYear.every = function(k2) {
  return !isFinite(k2 = Math.floor(k2)) || !(k2 > 0) ? null : newInterval(function(date2) {
    date2.setUTCFullYear(Math.floor(date2.getUTCFullYear() / k2) * k2);
    date2.setUTCMonth(0, 1);
    date2.setUTCHours(0, 0, 0, 0);
  }, function(date2, step) {
    date2.setUTCFullYear(date2.getUTCFullYear() + step * k2);
  });
};
var utcYear_default = utcYear;
var utcYears = utcYear.range;

// node_modules/d3-time/src/ticks.js
function ticker(year2, month2, week, day2, hour2, minute2) {
  const tickIntervals = [
    [second_default, 1, durationSecond],
    [second_default, 5, 5 * durationSecond],
    [second_default, 15, 15 * durationSecond],
    [second_default, 30, 30 * durationSecond],
    [minute2, 1, durationMinute],
    [minute2, 5, 5 * durationMinute],
    [minute2, 15, 15 * durationMinute],
    [minute2, 30, 30 * durationMinute],
    [hour2, 1, durationHour],
    [hour2, 3, 3 * durationHour],
    [hour2, 6, 6 * durationHour],
    [hour2, 12, 12 * durationHour],
    [day2, 1, durationDay],
    [day2, 2, 2 * durationDay],
    [week, 1, durationWeek],
    [month2, 1, durationMonth],
    [month2, 3, 3 * durationMonth],
    [year2, 1, durationYear]
  ];
  function ticks(start2, stop, count3) {
    const reverse2 = stop < start2;
    if (reverse2)
      [start2, stop] = [stop, start2];
    const interval2 = count3 && typeof count3.range === "function" ? count3 : tickInterval(start2, stop, count3);
    const ticks2 = interval2 ? interval2.range(start2, +stop + 1) : [];
    return reverse2 ? ticks2.reverse() : ticks2;
  }
  function tickInterval(start2, stop, count3) {
    const target = Math.abs(stop - start2) / count3;
    const i = bisector_default(([, , step2]) => step2).right(tickIntervals, target);
    if (i === tickIntervals.length)
      return year2.every(tickStep(start2 / durationYear, stop / durationYear, count3));
    if (i === 0)
      return millisecond_default.every(Math.max(tickStep(start2, stop, count3), 1));
    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];
    return t.every(step);
  }
  return [ticks, tickInterval];
}
var [utcTicks, utcTickInterval] = ticker(utcYear_default, utcMonth_default, utcSunday, utcDay_default, utcHour_default, utcMinute_default);
var [timeTicks, timeTickInterval] = ticker(year_default, month_default, sunday, day_default, hour_default, minute_default);

// node_modules/d3-time-format/src/locale.js
function localDate(d) {
  if (0 <= d.y && d.y < 100) {
    var date2 = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);
    date2.setFullYear(d.y);
    return date2;
  }
  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);
}
function utcDate(d) {
  if (0 <= d.y && d.y < 100) {
    var date2 = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));
    date2.setUTCFullYear(d.y);
    return date2;
  }
  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));
}
function newDate(y4, m2, d) {
  return { y: y4, m: m2, d, H: 0, M: 0, S: 0, L: 0 };
}
function formatLocale(locale3) {
  var locale_dateTime = locale3.dateTime, locale_date = locale3.date, locale_time = locale3.time, locale_periods = locale3.periods, locale_weekdays = locale3.days, locale_shortWeekdays = locale3.shortDays, locale_months = locale3.months, locale_shortMonths = locale3.shortMonths;
  var periodRe = formatRe(locale_periods), periodLookup = formatLookup(locale_periods), weekdayRe = formatRe(locale_weekdays), weekdayLookup = formatLookup(locale_weekdays), shortWeekdayRe = formatRe(locale_shortWeekdays), shortWeekdayLookup = formatLookup(locale_shortWeekdays), monthRe = formatRe(locale_months), monthLookup = formatLookup(locale_months), shortMonthRe = formatRe(locale_shortMonths), shortMonthLookup = formatLookup(locale_shortMonths);
  var formats = {
    "a": formatShortWeekday,
    "A": formatWeekday,
    "b": formatShortMonth,
    "B": formatMonth2,
    "c": null,
    "d": formatDayOfMonth,
    "e": formatDayOfMonth,
    "f": formatMicroseconds,
    "g": formatYearISO,
    "G": formatFullYearISO,
    "H": formatHour24,
    "I": formatHour12,
    "j": formatDayOfYear,
    "L": formatMilliseconds,
    "m": formatMonthNumber,
    "M": formatMinutes,
    "p": formatPeriod,
    "q": formatQuarter,
    "Q": formatUnixTimestamp,
    "s": formatUnixTimestampSeconds,
    "S": formatSeconds,
    "u": formatWeekdayNumberMonday,
    "U": formatWeekNumberSunday,
    "V": formatWeekNumberISO,
    "w": formatWeekdayNumberSunday,
    "W": formatWeekNumberMonday,
    "x": null,
    "X": null,
    "y": formatYear2,
    "Y": formatFullYear,
    "Z": formatZone,
    "%": formatLiteralPercent
  };
  var utcFormats = {
    "a": formatUTCShortWeekday,
    "A": formatUTCWeekday,
    "b": formatUTCShortMonth,
    "B": formatUTCMonth,
    "c": null,
    "d": formatUTCDayOfMonth,
    "e": formatUTCDayOfMonth,
    "f": formatUTCMicroseconds,
    "g": formatUTCYearISO,
    "G": formatUTCFullYearISO,
    "H": formatUTCHour24,
    "I": formatUTCHour12,
    "j": formatUTCDayOfYear,
    "L": formatUTCMilliseconds,
    "m": formatUTCMonthNumber,
    "M": formatUTCMinutes,
    "p": formatUTCPeriod,
    "q": formatUTCQuarter,
    "Q": formatUnixTimestamp,
    "s": formatUnixTimestampSeconds,
    "S": formatUTCSeconds,
    "u": formatUTCWeekdayNumberMonday,
    "U": formatUTCWeekNumberSunday,
    "V": formatUTCWeekNumberISO,
    "w": formatUTCWeekdayNumberSunday,
    "W": formatUTCWeekNumberMonday,
    "x": null,
    "X": null,
    "y": formatUTCYear,
    "Y": formatUTCFullYear,
    "Z": formatUTCZone,
    "%": formatLiteralPercent
  };
  var parses = {
    "a": parseShortWeekday,
    "A": parseWeekday,
    "b": parseShortMonth,
    "B": parseMonth,
    "c": parseLocaleDateTime,
    "d": parseDayOfMonth,
    "e": parseDayOfMonth,
    "f": parseMicroseconds,
    "g": parseYear,
    "G": parseFullYear,
    "H": parseHour24,
    "I": parseHour24,
    "j": parseDayOfYear,
    "L": parseMilliseconds,
    "m": parseMonthNumber,
    "M": parseMinutes,
    "p": parsePeriod,
    "q": parseQuarter,
    "Q": parseUnixTimestamp,
    "s": parseUnixTimestampSeconds,
    "S": parseSeconds,
    "u": parseWeekdayNumberMonday,
    "U": parseWeekNumberSunday,
    "V": parseWeekNumberISO,
    "w": parseWeekdayNumberSunday,
    "W": parseWeekNumberMonday,
    "x": parseLocaleDate,
    "X": parseLocaleTime,
    "y": parseYear,
    "Y": parseFullYear,
    "Z": parseZone,
    "%": parseLiteralPercent
  };
  formats.x = newFormat(locale_date, formats);
  formats.X = newFormat(locale_time, formats);
  formats.c = newFormat(locale_dateTime, formats);
  utcFormats.x = newFormat(locale_date, utcFormats);
  utcFormats.X = newFormat(locale_time, utcFormats);
  utcFormats.c = newFormat(locale_dateTime, utcFormats);
  function newFormat(specifier, formats2) {
    return function(date2) {
      var string = [], i = -1, j = 0, n2 = specifier.length, c5, pad3, format2;
      if (!(date2 instanceof Date))
        date2 = new Date(+date2);
      while (++i < n2) {
        if (specifier.charCodeAt(i) === 37) {
          string.push(specifier.slice(j, i));
          if ((pad3 = pads[c5 = specifier.charAt(++i)]) != null)
            c5 = specifier.charAt(++i);
          else
            pad3 = c5 === "e" ? " " : "0";
          if (format2 = formats2[c5])
            c5 = format2(date2, pad3);
          string.push(c5);
          j = i + 1;
        }
      }
      string.push(specifier.slice(j, i));
      return string.join("");
    };
  }
  function newParse(specifier, Z) {
    return function(string) {
      var d = newDate(1900, void 0, 1), i = parseSpecifier(d, specifier, string += "", 0), week, day2;
      if (i != string.length)
        return null;
      if ("Q" in d)
        return new Date(d.Q);
      if ("s" in d)
        return new Date(d.s * 1e3 + ("L" in d ? d.L : 0));
      if (Z && !("Z" in d))
        d.Z = 0;
      if ("p" in d)
        d.H = d.H % 12 + d.p * 12;
      if (d.m === void 0)
        d.m = "q" in d ? d.q : 0;
      if ("V" in d) {
        if (d.V < 1 || d.V > 53)
          return null;
        if (!("w" in d))
          d.w = 1;
        if ("Z" in d) {
          week = utcDate(newDate(d.y, 0, 1)), day2 = week.getUTCDay();
          week = day2 > 4 || day2 === 0 ? utcMonday.ceil(week) : utcMonday(week);
          week = utcDay_default.offset(week, (d.V - 1) * 7);
          d.y = week.getUTCFullYear();
          d.m = week.getUTCMonth();
          d.d = week.getUTCDate() + (d.w + 6) % 7;
        } else {
          week = localDate(newDate(d.y, 0, 1)), day2 = week.getDay();
          week = day2 > 4 || day2 === 0 ? monday.ceil(week) : monday(week);
          week = day_default.offset(week, (d.V - 1) * 7);
          d.y = week.getFullYear();
          d.m = week.getMonth();
          d.d = week.getDate() + (d.w + 6) % 7;
        }
      } else if ("W" in d || "U" in d) {
        if (!("w" in d))
          d.w = "u" in d ? d.u % 7 : "W" in d ? 1 : 0;
        day2 = "Z" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();
        d.m = 0;
        d.d = "W" in d ? (d.w + 6) % 7 + d.W * 7 - (day2 + 5) % 7 : d.w + d.U * 7 - (day2 + 6) % 7;
      }
      if ("Z" in d) {
        d.H += d.Z / 100 | 0;
        d.M += d.Z % 100;
        return utcDate(d);
      }
      return localDate(d);
    };
  }
  function parseSpecifier(d, specifier, string, j) {
    var i = 0, n2 = specifier.length, m2 = string.length, c5, parse3;
    while (i < n2) {
      if (j >= m2)
        return -1;
      c5 = specifier.charCodeAt(i++);
      if (c5 === 37) {
        c5 = specifier.charAt(i++);
        parse3 = parses[c5 in pads ? specifier.charAt(i++) : c5];
        if (!parse3 || (j = parse3(d, string, j)) < 0)
          return -1;
      } else if (c5 != string.charCodeAt(j++)) {
        return -1;
      }
    }
    return j;
  }
  function parsePeriod(d, string, i) {
    var n2 = periodRe.exec(string.slice(i));
    return n2 ? (d.p = periodLookup.get(n2[0].toLowerCase()), i + n2[0].length) : -1;
  }
  function parseShortWeekday(d, string, i) {
    var n2 = shortWeekdayRe.exec(string.slice(i));
    return n2 ? (d.w = shortWeekdayLookup.get(n2[0].toLowerCase()), i + n2[0].length) : -1;
  }
  function parseWeekday(d, string, i) {
    var n2 = weekdayRe.exec(string.slice(i));
    return n2 ? (d.w = weekdayLookup.get(n2[0].toLowerCase()), i + n2[0].length) : -1;
  }
  function parseShortMonth(d, string, i) {
    var n2 = shortMonthRe.exec(string.slice(i));
    return n2 ? (d.m = shortMonthLookup.get(n2[0].toLowerCase()), i + n2[0].length) : -1;
  }
  function parseMonth(d, string, i) {
    var n2 = monthRe.exec(string.slice(i));
    return n2 ? (d.m = monthLookup.get(n2[0].toLowerCase()), i + n2[0].length) : -1;
  }
  function parseLocaleDateTime(d, string, i) {
    return parseSpecifier(d, locale_dateTime, string, i);
  }
  function parseLocaleDate(d, string, i) {
    return parseSpecifier(d, locale_date, string, i);
  }
  function parseLocaleTime(d, string, i) {
    return parseSpecifier(d, locale_time, string, i);
  }
  function formatShortWeekday(d) {
    return locale_shortWeekdays[d.getDay()];
  }
  function formatWeekday(d) {
    return locale_weekdays[d.getDay()];
  }
  function formatShortMonth(d) {
    return locale_shortMonths[d.getMonth()];
  }
  function formatMonth2(d) {
    return locale_months[d.getMonth()];
  }
  function formatPeriod(d) {
    return locale_periods[+(d.getHours() >= 12)];
  }
  function formatQuarter(d) {
    return 1 + ~~(d.getMonth() / 3);
  }
  function formatUTCShortWeekday(d) {
    return locale_shortWeekdays[d.getUTCDay()];
  }
  function formatUTCWeekday(d) {
    return locale_weekdays[d.getUTCDay()];
  }
  function formatUTCShortMonth(d) {
    return locale_shortMonths[d.getUTCMonth()];
  }
  function formatUTCMonth(d) {
    return locale_months[d.getUTCMonth()];
  }
  function formatUTCPeriod(d) {
    return locale_periods[+(d.getUTCHours() >= 12)];
  }
  function formatUTCQuarter(d) {
    return 1 + ~~(d.getUTCMonth() / 3);
  }
  return {
    format: function(specifier) {
      var f = newFormat(specifier += "", formats);
      f.toString = function() {
        return specifier;
      };
      return f;
    },
    parse: function(specifier) {
      var p = newParse(specifier += "", false);
      p.toString = function() {
        return specifier;
      };
      return p;
    },
    utcFormat: function(specifier) {
      var f = newFormat(specifier += "", utcFormats);
      f.toString = function() {
        return specifier;
      };
      return f;
    },
    utcParse: function(specifier) {
      var p = newParse(specifier += "", true);
      p.toString = function() {
        return specifier;
      };
      return p;
    }
  };
}
var pads = { "-": "", "_": " ", "0": "0" };
var numberRe = /^\s*\d+/;
var percentRe = /^%/;
var requoteRe = /[\\^$*+?|[\]().{}]/g;
function pad2(value, fill, width) {
  var sign3 = value < 0 ? "-" : "", string = (sign3 ? -value : value) + "", length3 = string.length;
  return sign3 + (length3 < width ? new Array(width - length3 + 1).join(fill) + string : string);
}
function requote(s3) {
  return s3.replace(requoteRe, "\\$&");
}
function formatRe(names) {
  return new RegExp("^(?:" + names.map(requote).join("|") + ")", "i");
}
function formatLookup(names) {
  return new Map(names.map((name, i) => [name.toLowerCase(), i]));
}
function parseWeekdayNumberSunday(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 1));
  return n2 ? (d.w = +n2[0], i + n2[0].length) : -1;
}
function parseWeekdayNumberMonday(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 1));
  return n2 ? (d.u = +n2[0], i + n2[0].length) : -1;
}
function parseWeekNumberSunday(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 2));
  return n2 ? (d.U = +n2[0], i + n2[0].length) : -1;
}
function parseWeekNumberISO(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 2));
  return n2 ? (d.V = +n2[0], i + n2[0].length) : -1;
}
function parseWeekNumberMonday(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 2));
  return n2 ? (d.W = +n2[0], i + n2[0].length) : -1;
}
function parseFullYear(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 4));
  return n2 ? (d.y = +n2[0], i + n2[0].length) : -1;
}
function parseYear(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 2));
  return n2 ? (d.y = +n2[0] + (+n2[0] > 68 ? 1900 : 2e3), i + n2[0].length) : -1;
}
function parseZone(d, string, i) {
  var n2 = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i, i + 6));
  return n2 ? (d.Z = n2[1] ? 0 : -(n2[2] + (n2[3] || "00")), i + n2[0].length) : -1;
}
function parseQuarter(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 1));
  return n2 ? (d.q = n2[0] * 3 - 3, i + n2[0].length) : -1;
}
function parseMonthNumber(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 2));
  return n2 ? (d.m = n2[0] - 1, i + n2[0].length) : -1;
}
function parseDayOfMonth(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 2));
  return n2 ? (d.d = +n2[0], i + n2[0].length) : -1;
}
function parseDayOfYear(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 3));
  return n2 ? (d.m = 0, d.d = +n2[0], i + n2[0].length) : -1;
}
function parseHour24(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 2));
  return n2 ? (d.H = +n2[0], i + n2[0].length) : -1;
}
function parseMinutes(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 2));
  return n2 ? (d.M = +n2[0], i + n2[0].length) : -1;
}
function parseSeconds(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 2));
  return n2 ? (d.S = +n2[0], i + n2[0].length) : -1;
}
function parseMilliseconds(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 3));
  return n2 ? (d.L = +n2[0], i + n2[0].length) : -1;
}
function parseMicroseconds(d, string, i) {
  var n2 = numberRe.exec(string.slice(i, i + 6));
  return n2 ? (d.L = Math.floor(n2[0] / 1e3), i + n2[0].length) : -1;
}
function parseLiteralPercent(d, string, i) {
  var n2 = percentRe.exec(string.slice(i, i + 1));
  return n2 ? i + n2[0].length : -1;
}
function parseUnixTimestamp(d, string, i) {
  var n2 = numberRe.exec(string.slice(i));
  return n2 ? (d.Q = +n2[0], i + n2[0].length) : -1;
}
function parseUnixTimestampSeconds(d, string, i) {
  var n2 = numberRe.exec(string.slice(i));
  return n2 ? (d.s = +n2[0], i + n2[0].length) : -1;
}
function formatDayOfMonth(d, p) {
  return pad2(d.getDate(), p, 2);
}
function formatHour24(d, p) {
  return pad2(d.getHours(), p, 2);
}
function formatHour12(d, p) {
  return pad2(d.getHours() % 12 || 12, p, 2);
}
function formatDayOfYear(d, p) {
  return pad2(1 + day_default.count(year_default(d), d), p, 3);
}
function formatMilliseconds(d, p) {
  return pad2(d.getMilliseconds(), p, 3);
}
function formatMicroseconds(d, p) {
  return formatMilliseconds(d, p) + "000";
}
function formatMonthNumber(d, p) {
  return pad2(d.getMonth() + 1, p, 2);
}
function formatMinutes(d, p) {
  return pad2(d.getMinutes(), p, 2);
}
function formatSeconds(d, p) {
  return pad2(d.getSeconds(), p, 2);
}
function formatWeekdayNumberMonday(d) {
  var day2 = d.getDay();
  return day2 === 0 ? 7 : day2;
}
function formatWeekNumberSunday(d, p) {
  return pad2(sunday.count(year_default(d) - 1, d), p, 2);
}
function dISO(d) {
  var day2 = d.getDay();
  return day2 >= 4 || day2 === 0 ? thursday(d) : thursday.ceil(d);
}
function formatWeekNumberISO(d, p) {
  d = dISO(d);
  return pad2(thursday.count(year_default(d), d) + (year_default(d).getDay() === 4), p, 2);
}
function formatWeekdayNumberSunday(d) {
  return d.getDay();
}
function formatWeekNumberMonday(d, p) {
  return pad2(monday.count(year_default(d) - 1, d), p, 2);
}
function formatYear2(d, p) {
  return pad2(d.getFullYear() % 100, p, 2);
}
function formatYearISO(d, p) {
  d = dISO(d);
  return pad2(d.getFullYear() % 100, p, 2);
}
function formatFullYear(d, p) {
  return pad2(d.getFullYear() % 1e4, p, 4);
}
function formatFullYearISO(d, p) {
  var day2 = d.getDay();
  d = day2 >= 4 || day2 === 0 ? thursday(d) : thursday.ceil(d);
  return pad2(d.getFullYear() % 1e4, p, 4);
}
function formatZone(d) {
  var z = d.getTimezoneOffset();
  return (z > 0 ? "-" : (z *= -1, "+")) + pad2(z / 60 | 0, "0", 2) + pad2(z % 60, "0", 2);
}
function formatUTCDayOfMonth(d, p) {
  return pad2(d.getUTCDate(), p, 2);
}
function formatUTCHour24(d, p) {
  return pad2(d.getUTCHours(), p, 2);
}
function formatUTCHour12(d, p) {
  return pad2(d.getUTCHours() % 12 || 12, p, 2);
}
function formatUTCDayOfYear(d, p) {
  return pad2(1 + utcDay_default.count(utcYear_default(d), d), p, 3);
}
function formatUTCMilliseconds(d, p) {
  return pad2(d.getUTCMilliseconds(), p, 3);
}
function formatUTCMicroseconds(d, p) {
  return formatUTCMilliseconds(d, p) + "000";
}
function formatUTCMonthNumber(d, p) {
  return pad2(d.getUTCMonth() + 1, p, 2);
}
function formatUTCMinutes(d, p) {
  return pad2(d.getUTCMinutes(), p, 2);
}
function formatUTCSeconds(d, p) {
  return pad2(d.getUTCSeconds(), p, 2);
}
function formatUTCWeekdayNumberMonday(d) {
  var dow = d.getUTCDay();
  return dow === 0 ? 7 : dow;
}
function formatUTCWeekNumberSunday(d, p) {
  return pad2(utcSunday.count(utcYear_default(d) - 1, d), p, 2);
}
function UTCdISO(d) {
  var day2 = d.getUTCDay();
  return day2 >= 4 || day2 === 0 ? utcThursday(d) : utcThursday.ceil(d);
}
function formatUTCWeekNumberISO(d, p) {
  d = UTCdISO(d);
  return pad2(utcThursday.count(utcYear_default(d), d) + (utcYear_default(d).getUTCDay() === 4), p, 2);
}
function formatUTCWeekdayNumberSunday(d) {
  return d.getUTCDay();
}
function formatUTCWeekNumberMonday(d, p) {
  return pad2(utcMonday.count(utcYear_default(d) - 1, d), p, 2);
}
function formatUTCYear(d, p) {
  return pad2(d.getUTCFullYear() % 100, p, 2);
}
function formatUTCYearISO(d, p) {
  d = UTCdISO(d);
  return pad2(d.getUTCFullYear() % 100, p, 2);
}
function formatUTCFullYear(d, p) {
  return pad2(d.getUTCFullYear() % 1e4, p, 4);
}
function formatUTCFullYearISO(d, p) {
  var day2 = d.getUTCDay();
  d = day2 >= 4 || day2 === 0 ? utcThursday(d) : utcThursday.ceil(d);
  return pad2(d.getUTCFullYear() % 1e4, p, 4);
}
function formatUTCZone() {
  return "+0000";
}
function formatLiteralPercent() {
  return "%";
}
function formatUnixTimestamp(d) {
  return +d;
}
function formatUnixTimestampSeconds(d) {
  return Math.floor(+d / 1e3);
}

// node_modules/d3-time-format/src/defaultLocale.js
var locale2;
var timeFormat;
var timeParse;
var utcFormat;
var utcParse;
defaultLocale3({
  dateTime: "%x, %X",
  date: "%-m/%-d/%Y",
  time: "%-I:%M:%S %p",
  periods: ["AM", "PM"],
  days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
  shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
  shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
});
function defaultLocale3(definition) {
  locale2 = formatLocale(definition);
  timeFormat = locale2.format;
  timeParse = locale2.parse;
  utcFormat = locale2.utcFormat;
  utcParse = locale2.utcParse;
  return locale2;
}

// node_modules/d3-time-format/src/isoFormat.js
var isoSpecifier = "%Y-%m-%dT%H:%M:%S.%LZ";
function formatIsoNative(date2) {
  return date2.toISOString();
}
var formatIso = Date.prototype.toISOString ? formatIsoNative : utcFormat(isoSpecifier);
var isoFormat_default = formatIso;

// node_modules/d3-time-format/src/isoParse.js
function parseIsoNative(string) {
  var date2 = new Date(string);
  return isNaN(date2) ? null : date2;
}
var parseIso = +new Date("2000-01-01T00:00:00.000Z") ? parseIsoNative : utcParse(isoSpecifier);
var isoParse_default = parseIso;

// node_modules/d3-scale/src/time.js
function date(t) {
  return new Date(t);
}
function number4(t) {
  return t instanceof Date ? +t : +new Date(+t);
}
function calendar(ticks, tickInterval, year2, month2, week, day2, hour2, minute2, second2, format2) {
  var scale = continuous(), invert = scale.invert, domain = scale.domain;
  var formatMillisecond2 = format2(".%L"), formatSecond2 = format2(":%S"), formatMinute2 = format2("%I:%M"), formatHour2 = format2("%I %p"), formatDay2 = format2("%a %d"), formatWeek = format2("%b %d"), formatMonth2 = format2("%B"), formatYear4 = format2("%Y");
  function tickFormat2(date2) {
    return (second2(date2) < date2 ? formatMillisecond2 : minute2(date2) < date2 ? formatSecond2 : hour2(date2) < date2 ? formatMinute2 : day2(date2) < date2 ? formatHour2 : month2(date2) < date2 ? week(date2) < date2 ? formatDay2 : formatWeek : year2(date2) < date2 ? formatMonth2 : formatYear4)(date2);
  }
  scale.invert = function(y4) {
    return new Date(invert(y4));
  };
  scale.domain = function(_) {
    return arguments.length ? domain(Array.from(_, number4)) : domain().map(date);
  };
  scale.ticks = function(interval2) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], interval2 == null ? 10 : interval2);
  };
  scale.tickFormat = function(count3, specifier) {
    return specifier == null ? tickFormat2 : format2(specifier);
  };
  scale.nice = function(interval2) {
    var d = domain();
    if (!interval2 || typeof interval2.range !== "function")
      interval2 = tickInterval(d[0], d[d.length - 1], interval2 == null ? 10 : interval2);
    return interval2 ? domain(nice2(d, interval2)) : scale;
  };
  scale.copy = function() {
    return copy(scale, calendar(ticks, tickInterval, year2, month2, week, day2, hour2, minute2, second2, format2));
  };
  return scale;
}
function time() {
  return initRange.apply(calendar(timeTicks, timeTickInterval, year_default, month_default, sunday, day_default, hour_default, minute_default, second_default, timeFormat).domain([new Date(2e3, 0, 1), new Date(2e3, 0, 2)]), arguments);
}

// node_modules/d3-scale/src/utcTime.js
function utcTime() {
  return initRange.apply(calendar(utcTicks, utcTickInterval, utcYear_default, utcMonth_default, utcSunday, utcDay_default, utcHour_default, utcMinute_default, second_default, utcFormat).domain([Date.UTC(2e3, 0, 1), Date.UTC(2e3, 0, 2)]), arguments);
}

// node_modules/d3-scale/src/sequential.js
function transformer3() {
  var x06 = 0, x12 = 1, t03, t13, k10, transform2, interpolator = identity2, clamp = false, unknown;
  function scale(x4) {
    return x4 == null || isNaN(x4 = +x4) ? unknown : interpolator(k10 === 0 ? 0.5 : (x4 = (transform2(x4) - t03) * k10, clamp ? Math.max(0, Math.min(1, x4)) : x4));
  }
  scale.domain = function(_) {
    return arguments.length ? ([x06, x12] = _, t03 = transform2(x06 = +x06), t13 = transform2(x12 = +x12), k10 = t03 === t13 ? 0 : 1 / (t13 - t03), scale) : [x06, x12];
  };
  scale.clamp = function(_) {
    return arguments.length ? (clamp = !!_, scale) : clamp;
  };
  scale.interpolator = function(_) {
    return arguments.length ? (interpolator = _, scale) : interpolator;
  };
  function range3(interpolate) {
    return function(_) {
      var r0, r1;
      return arguments.length ? ([r0, r1] = _, interpolator = interpolate(r0, r1), scale) : [interpolator(0), interpolator(1)];
    };
  }
  scale.range = range3(value_default);
  scale.rangeRound = range3(round_default);
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  return function(t) {
    transform2 = t, t03 = t(x06), t13 = t(x12), k10 = t03 === t13 ? 0 : 1 / (t13 - t03);
    return scale;
  };
}
function copy2(source, target) {
  return target.domain(source.domain()).interpolator(source.interpolator()).clamp(source.clamp()).unknown(source.unknown());
}
function sequential() {
  var scale = linearish(transformer3()(identity2));
  scale.copy = function() {
    return copy2(scale, sequential());
  };
  return initInterpolator.apply(scale, arguments);
}
function sequentialLog() {
  var scale = loggish(transformer3()).domain([1, 10]);
  scale.copy = function() {
    return copy2(scale, sequentialLog()).base(scale.base());
  };
  return initInterpolator.apply(scale, arguments);
}
function sequentialSymlog() {
  var scale = symlogish(transformer3());
  scale.copy = function() {
    return copy2(scale, sequentialSymlog()).constant(scale.constant());
  };
  return initInterpolator.apply(scale, arguments);
}
function sequentialPow() {
  var scale = powish(transformer3());
  scale.copy = function() {
    return copy2(scale, sequentialPow()).exponent(scale.exponent());
  };
  return initInterpolator.apply(scale, arguments);
}
function sequentialSqrt() {
  return sequentialPow.apply(null, arguments).exponent(0.5);
}

// node_modules/d3-scale/src/sequentialQuantile.js
function sequentialQuantile() {
  var domain = [], interpolator = identity2;
  function scale(x4) {
    if (x4 != null && !isNaN(x4 = +x4))
      return interpolator((bisect_default(domain, x4, 1) - 1) / (domain.length - 1));
  }
  scale.domain = function(_) {
    if (!arguments.length)
      return domain.slice();
    domain = [];
    for (let d of _)
      if (d != null && !isNaN(d = +d))
        domain.push(d);
    domain.sort(ascending_default);
    return scale;
  };
  scale.interpolator = function(_) {
    return arguments.length ? (interpolator = _, scale) : interpolator;
  };
  scale.range = function() {
    return domain.map((d, i) => interpolator(i / (domain.length - 1)));
  };
  scale.quantiles = function(n2) {
    return Array.from({ length: n2 + 1 }, (_, i) => quantile(domain, i / n2));
  };
  scale.copy = function() {
    return sequentialQuantile(interpolator).domain(domain);
  };
  return initInterpolator.apply(scale, arguments);
}

// node_modules/d3-scale/src/diverging.js
function transformer4() {
  var x06 = 0, x12 = 0.5, x22 = 1, s3 = 1, t03, t13, t22, k10, k21, interpolator = identity2, transform2, clamp = false, unknown;
  function scale(x4) {
    return isNaN(x4 = +x4) ? unknown : (x4 = 0.5 + ((x4 = +transform2(x4)) - t13) * (s3 * x4 < s3 * t13 ? k10 : k21), interpolator(clamp ? Math.max(0, Math.min(1, x4)) : x4));
  }
  scale.domain = function(_) {
    return arguments.length ? ([x06, x12, x22] = _, t03 = transform2(x06 = +x06), t13 = transform2(x12 = +x12), t22 = transform2(x22 = +x22), k10 = t03 === t13 ? 0 : 0.5 / (t13 - t03), k21 = t13 === t22 ? 0 : 0.5 / (t22 - t13), s3 = t13 < t03 ? -1 : 1, scale) : [x06, x12, x22];
  };
  scale.clamp = function(_) {
    return arguments.length ? (clamp = !!_, scale) : clamp;
  };
  scale.interpolator = function(_) {
    return arguments.length ? (interpolator = _, scale) : interpolator;
  };
  function range3(interpolate) {
    return function(_) {
      var r0, r1, r2;
      return arguments.length ? ([r0, r1, r2] = _, interpolator = piecewise(interpolate, [r0, r1, r2]), scale) : [interpolator(0), interpolator(0.5), interpolator(1)];
    };
  }
  scale.range = range3(value_default);
  scale.rangeRound = range3(round_default);
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  return function(t) {
    transform2 = t, t03 = t(x06), t13 = t(x12), t22 = t(x22), k10 = t03 === t13 ? 0 : 0.5 / (t13 - t03), k21 = t13 === t22 ? 0 : 0.5 / (t22 - t13), s3 = t13 < t03 ? -1 : 1;
    return scale;
  };
}
function diverging() {
  var scale = linearish(transformer4()(identity2));
  scale.copy = function() {
    return copy2(scale, diverging());
  };
  return initInterpolator.apply(scale, arguments);
}
function divergingLog() {
  var scale = loggish(transformer4()).domain([0.1, 1, 10]);
  scale.copy = function() {
    return copy2(scale, divergingLog()).base(scale.base());
  };
  return initInterpolator.apply(scale, arguments);
}
function divergingSymlog() {
  var scale = symlogish(transformer4());
  scale.copy = function() {
    return copy2(scale, divergingSymlog()).constant(scale.constant());
  };
  return initInterpolator.apply(scale, arguments);
}
function divergingPow() {
  var scale = powish(transformer4());
  scale.copy = function() {
    return copy2(scale, divergingPow()).exponent(scale.exponent());
  };
  return initInterpolator.apply(scale, arguments);
}
function divergingSqrt() {
  return divergingPow.apply(null, arguments).exponent(0.5);
}

// node_modules/d3-scale-chromatic/src/colors.js
function colors_default(specifier) {
  var n2 = specifier.length / 6 | 0, colors = new Array(n2), i = 0;
  while (i < n2)
    colors[i] = "#" + specifier.slice(i * 6, ++i * 6);
  return colors;
}

// node_modules/d3-scale-chromatic/src/categorical/category10.js
var category10_default = colors_default("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");

// node_modules/d3-scale-chromatic/src/categorical/Accent.js
var Accent_default = colors_default("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666");

// node_modules/d3-scale-chromatic/src/categorical/Dark2.js
var Dark2_default = colors_default("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");

// node_modules/d3-scale-chromatic/src/categorical/Paired.js
var Paired_default = colors_default("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");

// node_modules/d3-scale-chromatic/src/categorical/Pastel1.js
var Pastel1_default = colors_default("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");

// node_modules/d3-scale-chromatic/src/categorical/Pastel2.js
var Pastel2_default = colors_default("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");

// node_modules/d3-scale-chromatic/src/categorical/Set1.js
var Set1_default = colors_default("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");

// node_modules/d3-scale-chromatic/src/categorical/Set2.js
var Set2_default = colors_default("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");

// node_modules/d3-scale-chromatic/src/categorical/Set3.js
var Set3_default = colors_default("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");

// node_modules/d3-scale-chromatic/src/categorical/Tableau10.js
var Tableau10_default = colors_default("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");

// node_modules/d3-scale-chromatic/src/ramp.js
var ramp_default = (scheme28) => rgbBasis(scheme28[scheme28.length - 1]);

// node_modules/d3-scale-chromatic/src/diverging/BrBG.js
var scheme = new Array(3).concat(
  "d8b365f5f5f55ab4ac",
  "a6611adfc27d80cdc1018571",
  "a6611adfc27df5f5f580cdc1018571",
  "8c510ad8b365f6e8c3c7eae55ab4ac01665e",
  "8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e",
  "8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e",
  "8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e",
  "5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30",
  "5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30"
).map(colors_default);
var BrBG_default = ramp_default(scheme);

// node_modules/d3-scale-chromatic/src/diverging/PRGn.js
var scheme2 = new Array(3).concat(
  "af8dc3f7f7f77fbf7b",
  "7b3294c2a5cfa6dba0008837",
  "7b3294c2a5cff7f7f7a6dba0008837",
  "762a83af8dc3e7d4e8d9f0d37fbf7b1b7837",
  "762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837",
  "762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837",
  "762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837",
  "40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b",
  "40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b"
).map(colors_default);
var PRGn_default = ramp_default(scheme2);

// node_modules/d3-scale-chromatic/src/diverging/PiYG.js
var scheme3 = new Array(3).concat(
  "e9a3c9f7f7f7a1d76a",
  "d01c8bf1b6dab8e1864dac26",
  "d01c8bf1b6daf7f7f7b8e1864dac26",
  "c51b7de9a3c9fde0efe6f5d0a1d76a4d9221",
  "c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221",
  "c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221",
  "c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221",
  "8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419",
  "8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419"
).map(colors_default);
var PiYG_default = ramp_default(scheme3);

// node_modules/d3-scale-chromatic/src/diverging/PuOr.js
var scheme4 = new Array(3).concat(
  "998ec3f7f7f7f1a340",
  "5e3c99b2abd2fdb863e66101",
  "5e3c99b2abd2f7f7f7fdb863e66101",
  "542788998ec3d8daebfee0b6f1a340b35806",
  "542788998ec3d8daebf7f7f7fee0b6f1a340b35806",
  "5427888073acb2abd2d8daebfee0b6fdb863e08214b35806",
  "5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806",
  "2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08",
  "2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08"
).map(colors_default);
var PuOr_default = ramp_default(scheme4);

// node_modules/d3-scale-chromatic/src/diverging/RdBu.js
var scheme5 = new Array(3).concat(
  "ef8a62f7f7f767a9cf",
  "ca0020f4a58292c5de0571b0",
  "ca0020f4a582f7f7f792c5de0571b0",
  "b2182bef8a62fddbc7d1e5f067a9cf2166ac",
  "b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac",
  "b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac",
  "b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac",
  "67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061",
  "67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061"
).map(colors_default);
var RdBu_default = ramp_default(scheme5);

// node_modules/d3-scale-chromatic/src/diverging/RdGy.js
var scheme6 = new Array(3).concat(
  "ef8a62ffffff999999",
  "ca0020f4a582bababa404040",
  "ca0020f4a582ffffffbababa404040",
  "b2182bef8a62fddbc7e0e0e09999994d4d4d",
  "b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d",
  "b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d",
  "b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d",
  "67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a",
  "67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a"
).map(colors_default);
var RdGy_default = ramp_default(scheme6);

// node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js
var scheme7 = new Array(3).concat(
  "fc8d59ffffbf91bfdb",
  "d7191cfdae61abd9e92c7bb6",
  "d7191cfdae61ffffbfabd9e92c7bb6",
  "d73027fc8d59fee090e0f3f891bfdb4575b4",
  "d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4",
  "d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4",
  "d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4",
  "a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695",
  "a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695"
).map(colors_default);
var RdYlBu_default = ramp_default(scheme7);

// node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js
var scheme8 = new Array(3).concat(
  "fc8d59ffffbf91cf60",
  "d7191cfdae61a6d96a1a9641",
  "d7191cfdae61ffffbfa6d96a1a9641",
  "d73027fc8d59fee08bd9ef8b91cf601a9850",
  "d73027fc8d59fee08bffffbfd9ef8b91cf601a9850",
  "d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850",
  "d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850",
  "a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837",
  "a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837"
).map(colors_default);
var RdYlGn_default = ramp_default(scheme8);

// node_modules/d3-scale-chromatic/src/diverging/Spectral.js
var scheme9 = new Array(3).concat(
  "fc8d59ffffbf99d594",
  "d7191cfdae61abdda42b83ba",
  "d7191cfdae61ffffbfabdda42b83ba",
  "d53e4ffc8d59fee08be6f59899d5943288bd",
  "d53e4ffc8d59fee08bffffbfe6f59899d5943288bd",
  "d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd",
  "d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd",
  "9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2",
  "9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2"
).map(colors_default);
var Spectral_default = ramp_default(scheme9);

// node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js
var scheme10 = new Array(3).concat(
  "e5f5f999d8c92ca25f",
  "edf8fbb2e2e266c2a4238b45",
  "edf8fbb2e2e266c2a42ca25f006d2c",
  "edf8fbccece699d8c966c2a42ca25f006d2c",
  "edf8fbccece699d8c966c2a441ae76238b45005824",
  "f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824",
  "f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b"
).map(colors_default);
var BuGn_default = ramp_default(scheme10);

// node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js
var scheme11 = new Array(3).concat(
  "e0ecf49ebcda8856a7",
  "edf8fbb3cde38c96c688419d",
  "edf8fbb3cde38c96c68856a7810f7c",
  "edf8fbbfd3e69ebcda8c96c68856a7810f7c",
  "edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b",
  "f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b",
  "f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b"
).map(colors_default);
var BuPu_default = ramp_default(scheme11);

// node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js
var scheme12 = new Array(3).concat(
  "e0f3dba8ddb543a2ca",
  "f0f9e8bae4bc7bccc42b8cbe",
  "f0f9e8bae4bc7bccc443a2ca0868ac",
  "f0f9e8ccebc5a8ddb57bccc443a2ca0868ac",
  "f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e",
  "f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e",
  "f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081"
).map(colors_default);
var GnBu_default = ramp_default(scheme12);

// node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js
var scheme13 = new Array(3).concat(
  "fee8c8fdbb84e34a33",
  "fef0d9fdcc8afc8d59d7301f",
  "fef0d9fdcc8afc8d59e34a33b30000",
  "fef0d9fdd49efdbb84fc8d59e34a33b30000",
  "fef0d9fdd49efdbb84fc8d59ef6548d7301f990000",
  "fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000",
  "fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000"
).map(colors_default);
var OrRd_default = ramp_default(scheme13);

// node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js
var scheme14 = new Array(3).concat(
  "ece2f0a6bddb1c9099",
  "f6eff7bdc9e167a9cf02818a",
  "f6eff7bdc9e167a9cf1c9099016c59",
  "f6eff7d0d1e6a6bddb67a9cf1c9099016c59",
  "f6eff7d0d1e6a6bddb67a9cf3690c002818a016450",
  "fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450",
  "fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636"
).map(colors_default);
var PuBuGn_default = ramp_default(scheme14);

// node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js
var scheme15 = new Array(3).concat(
  "ece7f2a6bddb2b8cbe",
  "f1eef6bdc9e174a9cf0570b0",
  "f1eef6bdc9e174a9cf2b8cbe045a8d",
  "f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d",
  "f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b",
  "fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b",
  "fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858"
).map(colors_default);
var PuBu_default = ramp_default(scheme15);

// node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js
var scheme16 = new Array(3).concat(
  "e7e1efc994c7dd1c77",
  "f1eef6d7b5d8df65b0ce1256",
  "f1eef6d7b5d8df65b0dd1c77980043",
  "f1eef6d4b9dac994c7df65b0dd1c77980043",
  "f1eef6d4b9dac994c7df65b0e7298ace125691003f",
  "f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f",
  "f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f"
).map(colors_default);
var PuRd_default = ramp_default(scheme16);

// node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js
var scheme17 = new Array(3).concat(
  "fde0ddfa9fb5c51b8a",
  "feebe2fbb4b9f768a1ae017e",
  "feebe2fbb4b9f768a1c51b8a7a0177",
  "feebe2fcc5c0fa9fb5f768a1c51b8a7a0177",
  "feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177",
  "fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177",
  "fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a"
).map(colors_default);
var RdPu_default = ramp_default(scheme17);

// node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js
var scheme18 = new Array(3).concat(
  "edf8b17fcdbb2c7fb8",
  "ffffcca1dab441b6c4225ea8",
  "ffffcca1dab441b6c42c7fb8253494",
  "ffffccc7e9b47fcdbb41b6c42c7fb8253494",
  "ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84",
  "ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84",
  "ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58"
).map(colors_default);
var YlGnBu_default = ramp_default(scheme18);

// node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js
var scheme19 = new Array(3).concat(
  "f7fcb9addd8e31a354",
  "ffffccc2e69978c679238443",
  "ffffccc2e69978c67931a354006837",
  "ffffccd9f0a3addd8e78c67931a354006837",
  "ffffccd9f0a3addd8e78c67941ab5d238443005a32",
  "ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32",
  "ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529"
).map(colors_default);
var YlGn_default = ramp_default(scheme19);

// node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js
var scheme20 = new Array(3).concat(
  "fff7bcfec44fd95f0e",
  "ffffd4fed98efe9929cc4c02",
  "ffffd4fed98efe9929d95f0e993404",
  "ffffd4fee391fec44ffe9929d95f0e993404",
  "ffffd4fee391fec44ffe9929ec7014cc4c028c2d04",
  "ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04",
  "ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506"
).map(colors_default);
var YlOrBr_default = ramp_default(scheme20);

// node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js
var scheme21 = new Array(3).concat(
  "ffeda0feb24cf03b20",
  "ffffb2fecc5cfd8d3ce31a1c",
  "ffffb2fecc5cfd8d3cf03b20bd0026",
  "ffffb2fed976feb24cfd8d3cf03b20bd0026",
  "ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026",
  "ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026",
  "ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026"
).map(colors_default);
var YlOrRd_default = ramp_default(scheme21);

// node_modules/d3-scale-chromatic/src/sequential-single/Blues.js
var scheme22 = new Array(3).concat(
  "deebf79ecae13182bd",
  "eff3ffbdd7e76baed62171b5",
  "eff3ffbdd7e76baed63182bd08519c",
  "eff3ffc6dbef9ecae16baed63182bd08519c",
  "eff3ffc6dbef9ecae16baed64292c62171b5084594",
  "f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594",
  "f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b"
).map(colors_default);
var Blues_default = ramp_default(scheme22);

// node_modules/d3-scale-chromatic/src/sequential-single/Greens.js
var scheme23 = new Array(3).concat(
  "e5f5e0a1d99b31a354",
  "edf8e9bae4b374c476238b45",
  "edf8e9bae4b374c47631a354006d2c",
  "edf8e9c7e9c0a1d99b74c47631a354006d2c",
  "edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32",
  "f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32",
  "f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b"
).map(colors_default);
var Greens_default = ramp_default(scheme23);

// node_modules/d3-scale-chromatic/src/sequential-single/Greys.js
var scheme24 = new Array(3).concat(
  "f0f0f0bdbdbd636363",
  "f7f7f7cccccc969696525252",
  "f7f7f7cccccc969696636363252525",
  "f7f7f7d9d9d9bdbdbd969696636363252525",
  "f7f7f7d9d9d9bdbdbd969696737373525252252525",
  "fffffff0f0f0d9d9d9bdbdbd969696737373525252252525",
  "fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000"
).map(colors_default);
var Greys_default = ramp_default(scheme24);

// node_modules/d3-scale-chromatic/src/sequential-single/Purples.js
var scheme25 = new Array(3).concat(
  "efedf5bcbddc756bb1",
  "f2f0f7cbc9e29e9ac86a51a3",
  "f2f0f7cbc9e29e9ac8756bb154278f",
  "f2f0f7dadaebbcbddc9e9ac8756bb154278f",
  "f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486",
  "fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486",
  "fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d"
).map(colors_default);
var Purples_default = ramp_default(scheme25);

// node_modules/d3-scale-chromatic/src/sequential-single/Reds.js
var scheme26 = new Array(3).concat(
  "fee0d2fc9272de2d26",
  "fee5d9fcae91fb6a4acb181d",
  "fee5d9fcae91fb6a4ade2d26a50f15",
  "fee5d9fcbba1fc9272fb6a4ade2d26a50f15",
  "fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d",
  "fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d",
  "fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d"
).map(colors_default);
var Reds_default = ramp_default(scheme26);

// node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js
var scheme27 = new Array(3).concat(
  "fee6cefdae6be6550d",
  "feeddefdbe85fd8d3cd94701",
  "feeddefdbe85fd8d3ce6550da63603",
  "feeddefdd0a2fdae6bfd8d3ce6550da63603",
  "feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04",
  "fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04",
  "fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704"
).map(colors_default);
var Oranges_default = ramp_default(scheme27);

// node_modules/d3-scale-chromatic/src/sequential-multi/cividis.js
function cividis_default(t) {
  t = Math.max(0, Math.min(1, t));
  return "rgb(" + Math.max(0, Math.min(255, Math.round(-4.54 - t * (35.34 - t * (2381.73 - t * (6402.7 - t * (7024.72 - t * 2710.57))))))) + ", " + Math.max(0, Math.min(255, Math.round(32.49 + t * (170.73 + t * (52.82 - t * (131.46 - t * (176.58 - t * 67.37))))))) + ", " + Math.max(0, Math.min(255, Math.round(81.24 + t * (442.36 - t * (2482.43 - t * (6167.24 - t * (6614.94 - t * 2475.67))))))) + ")";
}

// node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js
var cubehelix_default2 = cubehelixLong(cubehelix(300, 0.5, 0), cubehelix(-240, 0.5, 1));

// node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js
var warm = cubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.5, 0.8));
var cool = cubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.5, 0.8));
var c2 = cubehelix();
function rainbow_default(t) {
  if (t < 0 || t > 1)
    t -= Math.floor(t);
  var ts = Math.abs(t - 0.5);
  c2.h = 360 * t - 100;
  c2.s = 1.5 - 1.5 * ts;
  c2.l = 0.8 - 0.9 * ts;
  return c2 + "";
}

// node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js
var c3 = rgb();
var pi_1_3 = Math.PI / 3;
var pi_2_3 = Math.PI * 2 / 3;
function sinebow_default(t) {
  var x4;
  t = (0.5 - t) * Math.PI;
  c3.r = 255 * (x4 = Math.sin(t)) * x4;
  c3.g = 255 * (x4 = Math.sin(t + pi_1_3)) * x4;
  c3.b = 255 * (x4 = Math.sin(t + pi_2_3)) * x4;
  return c3 + "";
}

// node_modules/d3-scale-chromatic/src/sequential-multi/turbo.js
function turbo_default(t) {
  t = Math.max(0, Math.min(1, t));
  return "rgb(" + Math.max(0, Math.min(255, Math.round(34.61 + t * (1172.33 - t * (10793.56 - t * (33300.12 - t * (38394.49 - t * 14825.05))))))) + ", " + Math.max(0, Math.min(255, Math.round(23.31 + t * (557.33 + t * (1225.33 - t * (3574.96 - t * (1073.77 + t * 707.56))))))) + ", " + Math.max(0, Math.min(255, Math.round(27.2 + t * (3211.1 - t * (15327.97 - t * (27814 - t * (22569.18 - t * 6838.66))))))) + ")";
}

// node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js
function ramp(range3) {
  var n2 = range3.length;
  return function(t) {
    return range3[Math.max(0, Math.min(n2 - 1, Math.floor(t * n2)))];
  };
}
var viridis_default = ramp(colors_default("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));
var magma = ramp(colors_default("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));
var inferno = ramp(colors_default("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));
var plasma = ramp(colors_default("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));

// node_modules/d3-shape/src/constant.js
function constant_default11(x4) {
  return function constant() {
    return x4;
  };
}

// node_modules/d3-shape/src/math.js
var abs4 = Math.abs;
var atan22 = Math.atan2;
var cos3 = Math.cos;
var max4 = Math.max;
var min3 = Math.min;
var sin3 = Math.sin;
var sqrt3 = Math.sqrt;
var epsilon7 = 1e-12;
var pi5 = Math.PI;
var halfPi4 = pi5 / 2;
var tau6 = 2 * pi5;
function acos2(x4) {
  return x4 > 1 ? 0 : x4 < -1 ? pi5 : Math.acos(x4);
}
function asin2(x4) {
  return x4 >= 1 ? halfPi4 : x4 <= -1 ? -halfPi4 : Math.asin(x4);
}

// node_modules/d3-shape/src/arc.js
function arcInnerRadius(d) {
  return d.innerRadius;
}
function arcOuterRadius(d) {
  return d.outerRadius;
}
function arcStartAngle(d) {
  return d.startAngle;
}
function arcEndAngle(d) {
  return d.endAngle;
}
function arcPadAngle(d) {
  return d && d.padAngle;
}
function intersect(x06, y06, x12, y12, x22, y22, x32, y32) {
  var x10 = x12 - x06, y10 = y12 - y06, x322 = x32 - x22, y322 = y32 - y22, t = y322 * x10 - x322 * y10;
  if (t * t < epsilon7)
    return;
  t = (x322 * (y06 - y22) - y322 * (x06 - x22)) / t;
  return [x06 + t * x10, y06 + t * y10];
}
function cornerTangents(x06, y06, x12, y12, r1, rc, cw) {
  var x01 = x06 - x12, y01 = y06 - y12, lo = (cw ? rc : -rc) / sqrt3(x01 * x01 + y01 * y01), ox = lo * y01, oy = -lo * x01, x11 = x06 + ox, y11 = y06 + oy, x10 = x12 + ox, y10 = y12 + oy, x004 = (x11 + x10) / 2, y004 = (y11 + y10) / 2, dx = x10 - x11, dy = y10 - y11, d2 = dx * dx + dy * dy, r = r1 - rc, D2 = x11 * y10 - x10 * y11, d = (dy < 0 ? -1 : 1) * sqrt3(max4(0, r * r * d2 - D2 * D2)), cx0 = (D2 * dy - dx * d) / d2, cy0 = (-D2 * dx - dy * d) / d2, cx1 = (D2 * dy + dx * d) / d2, cy1 = (-D2 * dx + dy * d) / d2, dx0 = cx0 - x004, dy0 = cy0 - y004, dx1 = cx1 - x004, dy1 = cy1 - y004;
  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1)
    cx0 = cx1, cy0 = cy1;
  return {
    cx: cx0,
    cy: cy0,
    x01: -ox,
    y01: -oy,
    x11: cx0 * (r1 / r - 1),
    y11: cy0 * (r1 / r - 1)
  };
}
function arc_default() {
  var innerRadius = arcInnerRadius, outerRadius = arcOuterRadius, cornerRadius = constant_default11(0), padRadius = null, startAngle = arcStartAngle, endAngle = arcEndAngle, padAngle = arcPadAngle, context = null;
  function arc() {
    var buffer, r, r0 = +innerRadius.apply(this, arguments), r1 = +outerRadius.apply(this, arguments), a0 = startAngle.apply(this, arguments) - halfPi4, a1 = endAngle.apply(this, arguments) - halfPi4, da = abs4(a1 - a0), cw = a1 > a0;
    if (!context)
      context = buffer = path_default();
    if (r1 < r0)
      r = r1, r1 = r0, r0 = r;
    if (!(r1 > epsilon7))
      context.moveTo(0, 0);
    else if (da > tau6 - epsilon7) {
      context.moveTo(r1 * cos3(a0), r1 * sin3(a0));
      context.arc(0, 0, r1, a0, a1, !cw);
      if (r0 > epsilon7) {
        context.moveTo(r0 * cos3(a1), r0 * sin3(a1));
        context.arc(0, 0, r0, a1, a0, cw);
      }
    } else {
      var a01 = a0, a11 = a1, a00 = a0, a10 = a1, da0 = da, da1 = da, ap = padAngle.apply(this, arguments) / 2, rp = ap > epsilon7 && (padRadius ? +padRadius.apply(this, arguments) : sqrt3(r0 * r0 + r1 * r1)), rc = min3(abs4(r1 - r0) / 2, +cornerRadius.apply(this, arguments)), rc0 = rc, rc1 = rc, t03, t13;
      if (rp > epsilon7) {
        var p02 = asin2(rp / r0 * sin3(ap)), p1 = asin2(rp / r1 * sin3(ap));
        if ((da0 -= p02 * 2) > epsilon7)
          p02 *= cw ? 1 : -1, a00 += p02, a10 -= p02;
        else
          da0 = 0, a00 = a10 = (a0 + a1) / 2;
        if ((da1 -= p1 * 2) > epsilon7)
          p1 *= cw ? 1 : -1, a01 += p1, a11 -= p1;
        else
          da1 = 0, a01 = a11 = (a0 + a1) / 2;
      }
      var x01 = r1 * cos3(a01), y01 = r1 * sin3(a01), x10 = r0 * cos3(a10), y10 = r0 * sin3(a10);
      if (rc > epsilon7) {
        var x11 = r1 * cos3(a11), y11 = r1 * sin3(a11), x004 = r0 * cos3(a00), y004 = r0 * sin3(a00), oc;
        if (da < pi5 && (oc = intersect(x01, y01, x004, y004, x11, y11, x10, y10))) {
          var ax = x01 - oc[0], ay = y01 - oc[1], bx = x11 - oc[0], by = y11 - oc[1], kc = 1 / sin3(acos2((ax * bx + ay * by) / (sqrt3(ax * ax + ay * ay) * sqrt3(bx * bx + by * by))) / 2), lc = sqrt3(oc[0] * oc[0] + oc[1] * oc[1]);
          rc0 = min3(rc, (r0 - lc) / (kc - 1));
          rc1 = min3(rc, (r1 - lc) / (kc + 1));
        }
      }
      if (!(da1 > epsilon7))
        context.moveTo(x01, y01);
      else if (rc1 > epsilon7) {
        t03 = cornerTangents(x004, y004, x01, y01, r1, rc1, cw);
        t13 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);
        context.moveTo(t03.cx + t03.x01, t03.cy + t03.y01);
        if (rc1 < rc)
          context.arc(t03.cx, t03.cy, rc1, atan22(t03.y01, t03.x01), atan22(t13.y01, t13.x01), !cw);
        else {
          context.arc(t03.cx, t03.cy, rc1, atan22(t03.y01, t03.x01), atan22(t03.y11, t03.x11), !cw);
          context.arc(0, 0, r1, atan22(t03.cy + t03.y11, t03.cx + t03.x11), atan22(t13.cy + t13.y11, t13.cx + t13.x11), !cw);
          context.arc(t13.cx, t13.cy, rc1, atan22(t13.y11, t13.x11), atan22(t13.y01, t13.x01), !cw);
        }
      } else
        context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);
      if (!(r0 > epsilon7) || !(da0 > epsilon7))
        context.lineTo(x10, y10);
      else if (rc0 > epsilon7) {
        t03 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);
        t13 = cornerTangents(x01, y01, x004, y004, r0, -rc0, cw);
        context.lineTo(t03.cx + t03.x01, t03.cy + t03.y01);
        if (rc0 < rc)
          context.arc(t03.cx, t03.cy, rc0, atan22(t03.y01, t03.x01), atan22(t13.y01, t13.x01), !cw);
        else {
          context.arc(t03.cx, t03.cy, rc0, atan22(t03.y01, t03.x01), atan22(t03.y11, t03.x11), !cw);
          context.arc(0, 0, r0, atan22(t03.cy + t03.y11, t03.cx + t03.x11), atan22(t13.cy + t13.y11, t13.cx + t13.x11), cw);
          context.arc(t13.cx, t13.cy, rc0, atan22(t13.y11, t13.x11), atan22(t13.y01, t13.x01), !cw);
        }
      } else
        context.arc(0, 0, r0, a10, a00, cw);
    }
    context.closePath();
    if (buffer)
      return context = null, buffer + "" || null;
  }
  arc.centroid = function() {
    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2, a3 = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi5 / 2;
    return [cos3(a3) * r, sin3(a3) * r];
  };
  arc.innerRadius = function(_) {
    return arguments.length ? (innerRadius = typeof _ === "function" ? _ : constant_default11(+_), arc) : innerRadius;
  };
  arc.outerRadius = function(_) {
    return arguments.length ? (outerRadius = typeof _ === "function" ? _ : constant_default11(+_), arc) : outerRadius;
  };
  arc.cornerRadius = function(_) {
    return arguments.length ? (cornerRadius = typeof _ === "function" ? _ : constant_default11(+_), arc) : cornerRadius;
  };
  arc.padRadius = function(_) {
    return arguments.length ? (padRadius = _ == null ? null : typeof _ === "function" ? _ : constant_default11(+_), arc) : padRadius;
  };
  arc.startAngle = function(_) {
    return arguments.length ? (startAngle = typeof _ === "function" ? _ : constant_default11(+_), arc) : startAngle;
  };
  arc.endAngle = function(_) {
    return arguments.length ? (endAngle = typeof _ === "function" ? _ : constant_default11(+_), arc) : endAngle;
  };
  arc.padAngle = function(_) {
    return arguments.length ? (padAngle = typeof _ === "function" ? _ : constant_default11(+_), arc) : padAngle;
  };
  arc.context = function(_) {
    return arguments.length ? (context = _ == null ? null : _, arc) : context;
  };
  return arc;
}

// node_modules/d3-shape/src/array.js
var slice5 = Array.prototype.slice;
function array_default4(x4) {
  return typeof x4 === "object" && "length" in x4 ? x4 : Array.from(x4);
}

// node_modules/d3-shape/src/curve/linear.js
function Linear(context) {
  this._context = context;
}
Linear.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._point = 0;
  },
  lineEnd: function() {
    if (this._line || this._line !== 0 && this._point === 1)
      this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x4, y4) {
    x4 = +x4, y4 = +y4;
    switch (this._point) {
      case 0:
        this._point = 1;
        this._line ? this._context.lineTo(x4, y4) : this._context.moveTo(x4, y4);
        break;
      case 1:
        this._point = 2;
      default:
        this._context.lineTo(x4, y4);
        break;
    }
  }
};
function linear_default(context) {
  return new Linear(context);
}

// node_modules/d3-shape/src/point.js
function x3(p) {
  return p[0];
}
function y3(p) {
  return p[1];
}

// node_modules/d3-shape/src/line.js
function line_default2(x4, y4) {
  var defined = constant_default11(true), context = null, curve = linear_default, output = null;
  x4 = typeof x4 === "function" ? x4 : x4 === void 0 ? x3 : constant_default11(x4);
  y4 = typeof y4 === "function" ? y4 : y4 === void 0 ? y3 : constant_default11(y4);
  function line(data) {
    var i, n2 = (data = array_default4(data)).length, d, defined0 = false, buffer;
    if (context == null)
      output = curve(buffer = path_default());
    for (i = 0; i <= n2; ++i) {
      if (!(i < n2 && defined(d = data[i], i, data)) === defined0) {
        if (defined0 = !defined0)
          output.lineStart();
        else
          output.lineEnd();
      }
      if (defined0)
        output.point(+x4(d, i, data), +y4(d, i, data));
    }
    if (buffer)
      return output = null, buffer + "" || null;
  }
  line.x = function(_) {
    return arguments.length ? (x4 = typeof _ === "function" ? _ : constant_default11(+_), line) : x4;
  };
  line.y = function(_) {
    return arguments.length ? (y4 = typeof _ === "function" ? _ : constant_default11(+_), line) : y4;
  };
  line.defined = function(_) {
    return arguments.length ? (defined = typeof _ === "function" ? _ : constant_default11(!!_), line) : defined;
  };
  line.curve = function(_) {
    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;
  };
  line.context = function(_) {
    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;
  };
  return line;
}

// node_modules/d3-shape/src/area.js
function area_default5(x06, y06, y12) {
  var x12 = null, defined = constant_default11(true), context = null, curve = linear_default, output = null;
  x06 = typeof x06 === "function" ? x06 : x06 === void 0 ? x3 : constant_default11(+x06);
  y06 = typeof y06 === "function" ? y06 : y06 === void 0 ? constant_default11(0) : constant_default11(+y06);
  y12 = typeof y12 === "function" ? y12 : y12 === void 0 ? y3 : constant_default11(+y12);
  function area(data) {
    var i, j, k2, n2 = (data = array_default4(data)).length, d, defined0 = false, buffer, x0z = new Array(n2), y0z = new Array(n2);
    if (context == null)
      output = curve(buffer = path_default());
    for (i = 0; i <= n2; ++i) {
      if (!(i < n2 && defined(d = data[i], i, data)) === defined0) {
        if (defined0 = !defined0) {
          j = i;
          output.areaStart();
          output.lineStart();
        } else {
          output.lineEnd();
          output.lineStart();
          for (k2 = i - 1; k2 >= j; --k2) {
            output.point(x0z[k2], y0z[k2]);
          }
          output.lineEnd();
          output.areaEnd();
        }
      }
      if (defined0) {
        x0z[i] = +x06(d, i, data), y0z[i] = +y06(d, i, data);
        output.point(x12 ? +x12(d, i, data) : x0z[i], y12 ? +y12(d, i, data) : y0z[i]);
      }
    }
    if (buffer)
      return output = null, buffer + "" || null;
  }
  function arealine() {
    return line_default2().defined(defined).curve(curve).context(context);
  }
  area.x = function(_) {
    return arguments.length ? (x06 = typeof _ === "function" ? _ : constant_default11(+_), x12 = null, area) : x06;
  };
  area.x0 = function(_) {
    return arguments.length ? (x06 = typeof _ === "function" ? _ : constant_default11(+_), area) : x06;
  };
  area.x1 = function(_) {
    return arguments.length ? (x12 = _ == null ? null : typeof _ === "function" ? _ : constant_default11(+_), area) : x12;
  };
  area.y = function(_) {
    return arguments.length ? (y06 = typeof _ === "function" ? _ : constant_default11(+_), y12 = null, area) : y06;
  };
  area.y0 = function(_) {
    return arguments.length ? (y06 = typeof _ === "function" ? _ : constant_default11(+_), area) : y06;
  };
  area.y1 = function(_) {
    return arguments.length ? (y12 = _ == null ? null : typeof _ === "function" ? _ : constant_default11(+_), area) : y12;
  };
  area.lineX0 = area.lineY0 = function() {
    return arealine().x(x06).y(y06);
  };
  area.lineY1 = function() {
    return arealine().x(x06).y(y12);
  };
  area.lineX1 = function() {
    return arealine().x(x12).y(y06);
  };
  area.defined = function(_) {
    return arguments.length ? (defined = typeof _ === "function" ? _ : constant_default11(!!_), area) : defined;
  };
  area.curve = function(_) {
    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;
  };
  area.context = function(_) {
    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;
  };
  return area;
}

// node_modules/d3-shape/src/descending.js
function descending_default2(a3, b) {
  return b < a3 ? -1 : b > a3 ? 1 : b >= a3 ? 0 : NaN;
}

// node_modules/d3-shape/src/identity.js
function identity_default6(d) {
  return d;
}

// node_modules/d3-shape/src/pie.js
function pie_default() {
  var value = identity_default6, sortValues = descending_default2, sort3 = null, startAngle = constant_default11(0), endAngle = constant_default11(tau6), padAngle = constant_default11(0);
  function pie(data) {
    var i, n2 = (data = array_default4(data)).length, j, k2, sum3 = 0, index3 = new Array(n2), arcs = new Array(n2), a0 = +startAngle.apply(this, arguments), da = Math.min(tau6, Math.max(-tau6, endAngle.apply(this, arguments) - a0)), a1, p = Math.min(Math.abs(da) / n2, padAngle.apply(this, arguments)), pa = p * (da < 0 ? -1 : 1), v;
    for (i = 0; i < n2; ++i) {
      if ((v = arcs[index3[i] = i] = +value(data[i], i, data)) > 0) {
        sum3 += v;
      }
    }
    if (sortValues != null)
      index3.sort(function(i2, j2) {
        return sortValues(arcs[i2], arcs[j2]);
      });
    else if (sort3 != null)
      index3.sort(function(i2, j2) {
        return sort3(data[i2], data[j2]);
      });
    for (i = 0, k2 = sum3 ? (da - n2 * pa) / sum3 : 0; i < n2; ++i, a0 = a1) {
      j = index3[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k2 : 0) + pa, arcs[j] = {
        data: data[j],
        index: i,
        value: v,
        startAngle: a0,
        endAngle: a1,
        padAngle: p
      };
    }
    return arcs;
  }
  pie.value = function(_) {
    return arguments.length ? (value = typeof _ === "function" ? _ : constant_default11(+_), pie) : value;
  };
  pie.sortValues = function(_) {
    return arguments.length ? (sortValues = _, sort3 = null, pie) : sortValues;
  };
  pie.sort = function(_) {
    return arguments.length ? (sort3 = _, sortValues = null, pie) : sort3;
  };
  pie.startAngle = function(_) {
    return arguments.length ? (startAngle = typeof _ === "function" ? _ : constant_default11(+_), pie) : startAngle;
  };
  pie.endAngle = function(_) {
    return arguments.length ? (endAngle = typeof _ === "function" ? _ : constant_default11(+_), pie) : endAngle;
  };
  pie.padAngle = function(_) {
    return arguments.length ? (padAngle = typeof _ === "function" ? _ : constant_default11(+_), pie) : padAngle;
  };
  return pie;
}

// node_modules/d3-shape/src/curve/radial.js
var curveRadialLinear = curveRadial(linear_default);
function Radial(curve) {
  this._curve = curve;
}
Radial.prototype = {
  areaStart: function() {
    this._curve.areaStart();
  },
  areaEnd: function() {
    this._curve.areaEnd();
  },
  lineStart: function() {
    this._curve.lineStart();
  },
  lineEnd: function() {
    this._curve.lineEnd();
  },
  point: function(a3, r) {
    this._curve.point(r * Math.sin(a3), r * -Math.cos(a3));
  }
};
function curveRadial(curve) {
  function radial2(context) {
    return new Radial(curve(context));
  }
  radial2._curve = curve;
  return radial2;
}

// node_modules/d3-shape/src/lineRadial.js
function lineRadial(l2) {
  var c5 = l2.curve;
  l2.angle = l2.x, delete l2.x;
  l2.radius = l2.y, delete l2.y;
  l2.curve = function(_) {
    return arguments.length ? c5(curveRadial(_)) : c5()._curve;
  };
  return l2;
}
function lineRadial_default() {
  return lineRadial(line_default2().curve(curveRadialLinear));
}

// node_modules/d3-shape/src/areaRadial.js
function areaRadial_default() {
  var a3 = area_default5().curve(curveRadialLinear), c5 = a3.curve, x06 = a3.lineX0, x12 = a3.lineX1, y06 = a3.lineY0, y12 = a3.lineY1;
  a3.angle = a3.x, delete a3.x;
  a3.startAngle = a3.x0, delete a3.x0;
  a3.endAngle = a3.x1, delete a3.x1;
  a3.radius = a3.y, delete a3.y;
  a3.innerRadius = a3.y0, delete a3.y0;
  a3.outerRadius = a3.y1, delete a3.y1;
  a3.lineStartAngle = function() {
    return lineRadial(x06());
  }, delete a3.lineX0;
  a3.lineEndAngle = function() {
    return lineRadial(x12());
  }, delete a3.lineX1;
  a3.lineInnerRadius = function() {
    return lineRadial(y06());
  }, delete a3.lineY0;
  a3.lineOuterRadius = function() {
    return lineRadial(y12());
  }, delete a3.lineY1;
  a3.curve = function(_) {
    return arguments.length ? c5(curveRadial(_)) : c5()._curve;
  };
  return a3;
}

// node_modules/d3-shape/src/pointRadial.js
function pointRadial_default(x4, y4) {
  return [(y4 = +y4) * Math.cos(x4 -= Math.PI / 2), y4 * Math.sin(x4)];
}

// node_modules/d3-shape/src/link/index.js
function linkSource(d) {
  return d.source;
}
function linkTarget(d) {
  return d.target;
}
function link2(curve) {
  var source = linkSource, target = linkTarget, x4 = x3, y4 = y3, context = null;
  function link3() {
    var buffer, argv = slice5.call(arguments), s3 = source.apply(this, argv), t = target.apply(this, argv);
    if (!context)
      context = buffer = path_default();
    curve(context, +x4.apply(this, (argv[0] = s3, argv)), +y4.apply(this, argv), +x4.apply(this, (argv[0] = t, argv)), +y4.apply(this, argv));
    if (buffer)
      return context = null, buffer + "" || null;
  }
  link3.source = function(_) {
    return arguments.length ? (source = _, link3) : source;
  };
  link3.target = function(_) {
    return arguments.length ? (target = _, link3) : target;
  };
  link3.x = function(_) {
    return arguments.length ? (x4 = typeof _ === "function" ? _ : constant_default11(+_), link3) : x4;
  };
  link3.y = function(_) {
    return arguments.length ? (y4 = typeof _ === "function" ? _ : constant_default11(+_), link3) : y4;
  };
  link3.context = function(_) {
    return arguments.length ? (context = _ == null ? null : _, link3) : context;
  };
  return link3;
}
function curveHorizontal(context, x06, y06, x12, y12) {
  context.moveTo(x06, y06);
  context.bezierCurveTo(x06 = (x06 + x12) / 2, y06, x06, y12, x12, y12);
}
function curveVertical(context, x06, y06, x12, y12) {
  context.moveTo(x06, y06);
  context.bezierCurveTo(x06, y06 = (y06 + y12) / 2, x12, y06, x12, y12);
}
function curveRadial2(context, x06, y06, x12, y12) {
  var p02 = pointRadial_default(x06, y06), p1 = pointRadial_default(x06, y06 = (y06 + y12) / 2), p2 = pointRadial_default(x12, y06), p3 = pointRadial_default(x12, y12);
  context.moveTo(p02[0], p02[1]);
  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);
}
function linkHorizontal() {
  return link2(curveHorizontal);
}
function linkVertical() {
  return link2(curveVertical);
}
function linkRadial() {
  var l2 = link2(curveRadial2);
  l2.angle = l2.x, delete l2.x;
  l2.radius = l2.y, delete l2.y;
  return l2;
}

// node_modules/d3-shape/src/symbol/circle.js
var circle_default3 = {
  draw: function(context, size) {
    var r = Math.sqrt(size / pi5);
    context.moveTo(r, 0);
    context.arc(0, 0, r, 0, tau6);
  }
};

// node_modules/d3-shape/src/symbol/cross.js
var cross_default2 = {
  draw: function(context, size) {
    var r = Math.sqrt(size / 5) / 2;
    context.moveTo(-3 * r, -r);
    context.lineTo(-r, -r);
    context.lineTo(-r, -3 * r);
    context.lineTo(r, -3 * r);
    context.lineTo(r, -r);
    context.lineTo(3 * r, -r);
    context.lineTo(3 * r, r);
    context.lineTo(r, r);
    context.lineTo(r, 3 * r);
    context.lineTo(-r, 3 * r);
    context.lineTo(-r, r);
    context.lineTo(-3 * r, r);
    context.closePath();
  }
};

// node_modules/d3-shape/src/symbol/diamond.js
var tan30 = Math.sqrt(1 / 3);
var tan30_2 = tan30 * 2;
var diamond_default = {
  draw: function(context, size) {
    var y4 = Math.sqrt(size / tan30_2), x4 = y4 * tan30;
    context.moveTo(0, -y4);
    context.lineTo(x4, 0);
    context.lineTo(0, y4);
    context.lineTo(-x4, 0);
    context.closePath();
  }
};

// node_modules/d3-shape/src/symbol/star.js
var ka = 0.8908130915292852;
var kr = Math.sin(pi5 / 10) / Math.sin(7 * pi5 / 10);
var kx = Math.sin(tau6 / 10) * kr;
var ky = -Math.cos(tau6 / 10) * kr;
var star_default = {
  draw: function(context, size) {
    var r = Math.sqrt(size * ka), x4 = kx * r, y4 = ky * r;
    context.moveTo(0, -r);
    context.lineTo(x4, y4);
    for (var i = 1; i < 5; ++i) {
      var a3 = tau6 * i / 5, c5 = Math.cos(a3), s3 = Math.sin(a3);
      context.lineTo(s3 * r, -c5 * r);
      context.lineTo(c5 * x4 - s3 * y4, s3 * x4 + c5 * y4);
    }
    context.closePath();
  }
};

// node_modules/d3-shape/src/symbol/square.js
var square_default = {
  draw: function(context, size) {
    var w = Math.sqrt(size), x4 = -w / 2;
    context.rect(x4, x4, w, w);
  }
};

// node_modules/d3-shape/src/symbol/triangle.js
var sqrt32 = Math.sqrt(3);
var triangle_default = {
  draw: function(context, size) {
    var y4 = -Math.sqrt(size / (sqrt32 * 3));
    context.moveTo(0, y4 * 2);
    context.lineTo(-sqrt32 * y4, -y4);
    context.lineTo(sqrt32 * y4, -y4);
    context.closePath();
  }
};

// node_modules/d3-shape/src/symbol/wye.js
var c4 = -0.5;
var s2 = Math.sqrt(3) / 2;
var k = 1 / Math.sqrt(12);
var a2 = (k / 2 + 1) * 3;
var wye_default = {
  draw: function(context, size) {
    var r = Math.sqrt(size / a2), x06 = r / 2, y06 = r * k, x12 = x06, y12 = r * k + r, x22 = -x12, y22 = y12;
    context.moveTo(x06, y06);
    context.lineTo(x12, y12);
    context.lineTo(x22, y22);
    context.lineTo(c4 * x06 - s2 * y06, s2 * x06 + c4 * y06);
    context.lineTo(c4 * x12 - s2 * y12, s2 * x12 + c4 * y12);
    context.lineTo(c4 * x22 - s2 * y22, s2 * x22 + c4 * y22);
    context.lineTo(c4 * x06 + s2 * y06, c4 * y06 - s2 * x06);
    context.lineTo(c4 * x12 + s2 * y12, c4 * y12 - s2 * x12);
    context.lineTo(c4 * x22 + s2 * y22, c4 * y22 - s2 * x22);
    context.closePath();
  }
};

// node_modules/d3-shape/src/symbol.js
var symbols = [
  circle_default3,
  cross_default2,
  diamond_default,
  square_default,
  star_default,
  triangle_default,
  wye_default
];
function symbol_default(type2, size) {
  var context = null;
  type2 = typeof type2 === "function" ? type2 : constant_default11(type2 || circle_default3);
  size = typeof size === "function" ? size : constant_default11(size === void 0 ? 64 : +size);
  function symbol() {
    var buffer;
    if (!context)
      context = buffer = path_default();
    type2.apply(this, arguments).draw(context, +size.apply(this, arguments));
    if (buffer)
      return context = null, buffer + "" || null;
  }
  symbol.type = function(_) {
    return arguments.length ? (type2 = typeof _ === "function" ? _ : constant_default11(_), symbol) : type2;
  };
  symbol.size = function(_) {
    return arguments.length ? (size = typeof _ === "function" ? _ : constant_default11(+_), symbol) : size;
  };
  symbol.context = function(_) {
    return arguments.length ? (context = _ == null ? null : _, symbol) : context;
  };
  return symbol;
}

// node_modules/d3-shape/src/noop.js
function noop_default2() {
}

// node_modules/d3-shape/src/curve/basis.js
function point2(that, x4, y4) {
  that._context.bezierCurveTo(
    (2 * that._x0 + that._x1) / 3,
    (2 * that._y0 + that._y1) / 3,
    (that._x0 + 2 * that._x1) / 3,
    (that._y0 + 2 * that._y1) / 3,
    (that._x0 + 4 * that._x1 + x4) / 6,
    (that._y0 + 4 * that._y1 + y4) / 6
  );
}
function Basis(context) {
  this._context = context;
}
Basis.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 = this._y0 = this._y1 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 3:
        point2(this, this._x1, this._y1);
      case 2:
        this._context.lineTo(this._x1, this._y1);
        break;
    }
    if (this._line || this._line !== 0 && this._point === 1)
      this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x4, y4) {
    x4 = +x4, y4 = +y4;
    switch (this._point) {
      case 0:
        this._point = 1;
        this._line ? this._context.lineTo(x4, y4) : this._context.moveTo(x4, y4);
        break;
      case 1:
        this._point = 2;
        break;
      case 2:
        this._point = 3;
        this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6);
      default:
        point2(this, x4, y4);
        break;
    }
    this._x0 = this._x1, this._x1 = x4;
    this._y0 = this._y1, this._y1 = y4;
  }
};
function basis_default2(context) {
  return new Basis(context);
}

// node_modules/d3-shape/src/curve/basisClosed.js
function BasisClosed(context) {
  this._context = context;
}
BasisClosed.prototype = {
  areaStart: noop_default2,
  areaEnd: noop_default2,
  lineStart: function() {
    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 1: {
        this._context.moveTo(this._x2, this._y2);
        this._context.closePath();
        break;
      }
      case 2: {
        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);
        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);
        this._context.closePath();
        break;
      }
      case 3: {
        this.point(this._x2, this._y2);
        this.point(this._x3, this._y3);
        this.point(this._x4, this._y4);
        break;
      }
    }
  },
  point: function(x4, y4) {
    x4 = +x4, y4 = +y4;
    switch (this._point) {
      case 0:
        this._point = 1;
        this._x2 = x4, this._y2 = y4;
        break;
      case 1:
        this._point = 2;
        this._x3 = x4, this._y3 = y4;
        break;
      case 2:
        this._point = 3;
        this._x4 = x4, this._y4 = y4;
        this._context.moveTo((this._x0 + 4 * this._x1 + x4) / 6, (this._y0 + 4 * this._y1 + y4) / 6);
        break;
      default:
        point2(this, x4, y4);
        break;
    }
    this._x0 = this._x1, this._x1 = x4;
    this._y0 = this._y1, this._y1 = y4;
  }
};
function basisClosed_default2(context) {
  return new BasisClosed(context);
}

// node_modules/d3-shape/src/curve/basisOpen.js
function BasisOpen(context) {
  this._context = context;
}
BasisOpen.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 = this._y0 = this._y1 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    if (this._line || this._line !== 0 && this._point === 3)
      this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x4, y4) {
    x4 = +x4, y4 = +y4;
    switch (this._point) {
      case 0:
        this._point = 1;
        break;
      case 1:
        this._point = 2;
        break;
      case 2:
        this._point = 3;
        var x06 = (this._x0 + 4 * this._x1 + x4) / 6, y06 = (this._y0 + 4 * this._y1 + y4) / 6;
        this._line ? this._context.lineTo(x06, y06) : this._context.moveTo(x06, y06);
        break;
      case 3:
        this._point = 4;
      default:
        point2(this, x4, y4);
        break;
    }
    this._x0 = this._x1, this._x1 = x4;
    this._y0 = this._y1, this._y1 = y4;
  }
};
function basisOpen_default(context) {
  return new BasisOpen(context);
}

// node_modules/d3-shape/src/curve/bump.js
var Bump = class {
  constructor(context, x4) {
    this._context = context;
    this._x = x4;
  }
  areaStart() {
    this._line = 0;
  }
  areaEnd() {
    this._line = NaN;
  }
  lineStart() {
    this._point = 0;
  }
  lineEnd() {
    if (this._line || this._line !== 0 && this._point === 1)
      this._context.closePath();
    this._line = 1 - this._line;
  }
  point(x4, y4) {
    x4 = +x4, y4 = +y4;
    switch (this._point) {
      case 0: {
        this._point = 1;
        if (this._line)
          this._context.lineTo(x4, y4);
        else
          this._context.moveTo(x4, y4);
        break;
      }
      case 1:
        this._point = 2;
      default: {
        if (this._x)
          this._context.bezierCurveTo(this._x0 = (this._x0 + x4) / 2, this._y0, this._x0, y4, x4, y4);
        else
          this._context.bezierCurveTo(this._x0, this._y0 = (this._y0 + y4) / 2, x4, this._y0, x4, y4);
        break;
      }
    }
    this._x0 = x4, this._y0 = y4;
  }
};
function bumpX(context) {
  return new Bump(context, true);
}
function bumpY(context) {
  return new Bump(context, false);
}

// node_modules/d3-shape/src/curve/bundle.js
function Bundle(context, beta) {
  this._basis = new Basis(context);
  this._beta = beta;
}
Bundle.prototype = {
  lineStart: function() {
    this._x = [];
    this._y = [];
    this._basis.lineStart();
  },
  lineEnd: function() {
    var x4 = this._x, y4 = this._y, j = x4.length - 1;
    if (j > 0) {
      var x06 = x4[0], y06 = y4[0], dx = x4[j] - x06, dy = y4[j] - y06, i = -1, t;
      while (++i <= j) {
        t = i / j;
        this._basis.point(
          this._beta * x4[i] + (1 - this._beta) * (x06 + t * dx),
          this._beta * y4[i] + (1 - this._beta) * (y06 + t * dy)
        );
      }
    }
    this._x = this._y = null;
    this._basis.lineEnd();
  },
  point: function(x4, y4) {
    this._x.push(+x4);
    this._y.push(+y4);
  }
};
var bundle_default = function custom12(beta) {
  function bundle(context) {
    return beta === 1 ? new Basis(context) : new Bundle(context, beta);
  }
  bundle.beta = function(beta2) {
    return custom12(+beta2);
  };
  return bundle;
}(0.85);

// node_modules/d3-shape/src/curve/cardinal.js
function point3(that, x4, y4) {
  that._context.bezierCurveTo(
    that._x1 + that._k * (that._x2 - that._x0),
    that._y1 + that._k * (that._y2 - that._y0),
    that._x2 + that._k * (that._x1 - x4),
    that._y2 + that._k * (that._y1 - y4),
    that._x2,
    that._y2
  );
}
function Cardinal(context, tension) {
  this._context = context;
  this._k = (1 - tension) / 6;
}
Cardinal.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 = this._x2 = this._y0 = this._y1 = this._y2 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 2:
        this._context.lineTo(this._x2, this._y2);
        break;
      case 3:
        point3(this, this._x1, this._y1);
        break;
    }
    if (this._line || this._line !== 0 && this._point === 1)
      this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x4, y4) {
    x4 = +x4, y4 = +y4;
    switch (this._point) {
      case 0:
        this._point = 1;
        this._line ? this._context.lineTo(x4, y4) : this._context.moveTo(x4, y4);
        break;
      case 1:
        this._point = 2;
        this._x1 = x4, this._y1 = y4;
        break;
      case 2:
        this._point = 3;
      default:
        point3(this, x4, y4);
        break;
    }
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x4;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y4;
  }
};
var cardinal_default = function custom13(tension) {
  function cardinal(context) {
    return new Cardinal(context, tension);
  }
  cardinal.tension = function(tension2) {
    return custom13(+tension2);
  };
  return cardinal;
}(0);

// node_modules/d3-shape/src/curve/cardinalClosed.js
function CardinalClosed(context, tension) {
  this._context = context;
  this._k = (1 - tension) / 6;
}
CardinalClosed.prototype = {
  areaStart: noop_default2,
  areaEnd: noop_default2,
  lineStart: function() {
    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 = this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 1: {
        this._context.moveTo(this._x3, this._y3);
        this._context.closePath();
        break;
      }
      case 2: {
        this._context.lineTo(this._x3, this._y3);
        this._context.closePath();
        break;
      }
      case 3: {
        this.point(this._x3, this._y3);
        this.point(this._x4, this._y4);
        this.point(this._x5, this._y5);
        break;
      }
    }
  },
  point: function(x4, y4) {
    x4 = +x4, y4 = +y4;
    switch (this._point) {
      case 0:
        this._point = 1;
        this._x3 = x4, this._y3 = y4;
        break;
      case 1:
        this._point = 2;
        this._context.moveTo(this._x4 = x4, this._y4 = y4);
        break;
      case 2:
        this._point = 3;
        this._x5 = x4, this._y5 = y4;
        break;
      default:
        point3(this, x4, y4);
        break;
    }
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x4;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y4;
  }
};
var cardinalClosed_default = function custom14(tension) {
  function cardinal(context) {
    return new CardinalClosed(context, tension);
  }
  cardinal.tension = function(tension2) {
    return custom14(+tension2);
  };
  return cardinal;
}(0);

// node_modules/d3-shape/src/curve/cardinalOpen.js
function CardinalOpen(context, tension) {
  this._context = context;
  this._k = (1 - tension) / 6;
}
CardinalOpen.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 = this._x2 = this._y0 = this._y1 = this._y2 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    if (this._line || this._line !== 0 && this._point === 3)
      this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x4, y4) {
    x4 = +x4, y4 = +y4;
    switch (this._point) {
      case 0:
        this._point = 1;
        break;
      case 1:
        this._point = 2;
        break;
      case 2:
        this._point = 3;
        this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2);
        break;
      case 3:
        this._point = 4;
      default:
        point3(this, x4, y4);
        break;
    }
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x4;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y4;
  }
};
var cardinalOpen_default = function custom15(tension) {
  function cardinal(context) {
    return new CardinalOpen(context, tension);
  }
  cardinal.tension = function(tension2) {
    return custom15(+tension2);
  };
  return cardinal;
}(0);

// node_modules/d3-shape/src/curve/catmullRom.js
function point4(that, x4, y4) {
  var x12 = that._x1, y12 = that._y1, x22 = that._x2, y22 = that._y2;
  if (that._l01_a > epsilon7) {
    var a3 = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a, n2 = 3 * that._l01_a * (that._l01_a + that._l12_a);
    x12 = (x12 * a3 - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n2;
    y12 = (y12 * a3 - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n2;
  }
  if (that._l23_a > epsilon7) {
    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a, m2 = 3 * that._l23_a * (that._l23_a + that._l12_a);
    x22 = (x22 * b + that._x1 * that._l23_2a - x4 * that._l12_2a) / m2;
    y22 = (y22 * b + that._y1 * that._l23_2a - y4 * that._l12_2a) / m2;
  }
  that._context.bezierCurveTo(x12, y12, x22, y22, that._x2, that._y2);
}
function CatmullRom(context, alpha) {
  this._context = context;
  this._alpha = alpha;
}
CatmullRom.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 = this._x2 = this._y0 = this._y1 = this._y2 = NaN;
    this._l01_a = this._l12_a = this._l23_a = this._l01_2a = this._l12_2a = this._l23_2a = this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 2:
        this._context.lineTo(this._x2, this._y2);
        break;
      case 3:
        this.point(this._x2, this._y2);
        break;
    }
    if (this._line || this._line !== 0 && this._point === 1)
      this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x4, y4) {
    x4 = +x4, y4 = +y4;
    if (this._point) {
      var x23 = this._x2 - x4, y23 = this._y2 - y4;
      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));
    }
    switch (this._point) {
      case 0:
        this._point = 1;
        this._line ? this._context.lineTo(x4, y4) : this._context.moveTo(x4, y4);
        break;
      case 1:
        this._point = 2;
        break;
      case 2:
        this._point = 3;
      default:
        point4(this, x4, y4);
        break;
    }
    this._l01_a = this._l12_a, this._l12_a = this._l23_a;
    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x4;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y4;
  }
};
var catmullRom_default = function custom16(alpha) {
  function catmullRom(context) {
    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);
  }
  catmullRom.alpha = function(alpha2) {
    return custom16(+alpha2);
  };
  return catmullRom;
}(0.5);

// node_modules/d3-shape/src/curve/catmullRomClosed.js
function CatmullRomClosed(context, alpha) {
  this._context = context;
  this._alpha = alpha;
}
CatmullRomClosed.prototype = {
  areaStart: noop_default2,
  areaEnd: noop_default2,
  lineStart: function() {
    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 = this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;
    this._l01_a = this._l12_a = this._l23_a = this._l01_2a = this._l12_2a = this._l23_2a = this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 1: {
        this._context.moveTo(this._x3, this._y3);
        this._context.closePath();
        break;
      }
      case 2: {
        this._context.lineTo(this._x3, this._y3);
        this._context.closePath();
        break;
      }
      case 3: {
        this.point(this._x3, this._y3);
        this.point(this._x4, this._y4);
        this.point(this._x5, this._y5);
        break;
      }
    }
  },
  point: function(x4, y4) {
    x4 = +x4, y4 = +y4;
    if (this._point) {
      var x23 = this._x2 - x4, y23 = this._y2 - y4;
      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));
    }
    switch (this._point) {
      case 0:
        this._point = 1;
        this._x3 = x4, this._y3 = y4;
        break;
      case 1:
        this._point = 2;
        this._context.moveTo(this._x4 = x4, this._y4 = y4);
        break;
      case 2:
        this._point = 3;
        this._x5 = x4, this._y5 = y4;
        break;
      default:
        point4(this, x4, y4);
        break;
    }
    this._l01_a = this._l12_a, this._l12_a = this._l23_a;
    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x4;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y4;
  }
};
var catmullRomClosed_default = function custom17(alpha) {
  function catmullRom(context) {
    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);
  }
  catmullRom.alpha = function(alpha2) {
    return custom17(+alpha2);
  };
  return catmullRom;
}(0.5);

// node_modules/d3-shape/src/curve/catmullRomOpen.js
function CatmullRomOpen(context, alpha) {
  this._context = context;
  this._alpha = alpha;
}
CatmullRomOpen.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 = this._x2 = this._y0 = this._y1 = this._y2 = NaN;
    this._l01_a = this._l12_a = this._l23_a = this._l01_2a = this._l12_2a = this._l23_2a = this._point = 0;
  },
  lineEnd: function() {
    if (this._line || this._line !== 0 && this._point === 3)
      this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x4, y4) {
    x4 = +x4, y4 = +y4;
    if (this._point) {
      var x23 = this._x2 - x4, y23 = this._y2 - y4;
      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));
    }
    switch (this._point) {
      case 0:
        this._point = 1;
        break;
      case 1:
        this._point = 2;
        break;
      case 2:
        this._point = 3;
        this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2);
        break;
      case 3:
        this._point = 4;
      default:
        point4(this, x4, y4);
        break;
    }
    this._l01_a = this._l12_a, this._l12_a = this._l23_a;
    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x4;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y4;
  }
};
var catmullRomOpen_default = function custom18(alpha) {
  function catmullRom(context) {
    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);
  }
  catmullRom.alpha = function(alpha2) {
    return custom18(+alpha2);
  };
  return catmullRom;
}(0.5);

// node_modules/d3-shape/src/curve/linearClosed.js
function LinearClosed(context) {
  this._context = context;
}
LinearClosed.prototype = {
  areaStart: noop_default2,
  areaEnd: noop_default2,
  lineStart: function() {
    this._point = 0;
  },
  lineEnd: function() {
    if (this._point)
      this._context.closePath();
  },
  point: function(x4, y4) {
    x4 = +x4, y4 = +y4;
    if (this._point)
      this._context.lineTo(x4, y4);
    else
      this._point = 1, this._context.moveTo(x4, y4);
  }
};
function linearClosed_default(context) {
  return new LinearClosed(context);
}

// node_modules/d3-shape/src/curve/monotone.js
function sign2(x4) {
  return x4 < 0 ? -1 : 1;
}
function slope3(that, x22, y22) {
  var h0 = that._x1 - that._x0, h1 = x22 - that._x1, s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0), s1 = (y22 - that._y1) / (h1 || h0 < 0 && -0), p = (s0 * h1 + s1 * h0) / (h0 + h1);
  return (sign2(s0) + sign2(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;
}
function slope2(that, t) {
  var h = that._x1 - that._x0;
  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;
}
function point5(that, t03, t13) {
  var x06 = that._x0, y06 = that._y0, x12 = that._x1, y12 = that._y1, dx = (x12 - x06) / 3;
  that._context.bezierCurveTo(x06 + dx, y06 + dx * t03, x12 - dx, y12 - dx * t13, x12, y12);
}
function MonotoneX(context) {
  this._context = context;
}
MonotoneX.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 = this._y0 = this._y1 = this._t0 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 2:
        this._context.lineTo(this._x1, this._y1);
        break;
      case 3:
        point5(this, this._t0, slope2(this, this._t0));
        break;
    }
    if (this._line || this._line !== 0 && this._point === 1)
      this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x4, y4) {
    var t13 = NaN;
    x4 = +x4, y4 = +y4;
    if (x4 === this._x1 && y4 === this._y1)
      return;
    switch (this._point) {
      case 0:
        this._point = 1;
        this._line ? this._context.lineTo(x4, y4) : this._context.moveTo(x4, y4);
        break;
      case 1:
        this._point = 2;
        break;
      case 2:
        this._point = 3;
        point5(this, slope2(this, t13 = slope3(this, x4, y4)), t13);
        break;
      default:
        point5(this, this._t0, t13 = slope3(this, x4, y4));
        break;
    }
    this._x0 = this._x1, this._x1 = x4;
    this._y0 = this._y1, this._y1 = y4;
    this._t0 = t13;
  }
};
function MonotoneY(context) {
  this._context = new ReflectContext(context);
}
(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x4, y4) {
  MonotoneX.prototype.point.call(this, y4, x4);
};
function ReflectContext(context) {
  this._context = context;
}
ReflectContext.prototype = {
  moveTo: function(x4, y4) {
    this._context.moveTo(y4, x4);
  },
  closePath: function() {
    this._context.closePath();
  },
  lineTo: function(x4, y4) {
    this._context.lineTo(y4, x4);
  },
  bezierCurveTo: function(x12, y12, x22, y22, x4, y4) {
    this._context.bezierCurveTo(y12, x12, y22, x22, y4, x4);
  }
};
function monotoneX(context) {
  return new MonotoneX(context);
}
function monotoneY(context) {
  return new MonotoneY(context);
}

// node_modules/d3-shape/src/curve/natural.js
function Natural(context) {
  this._context = context;
}
Natural.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x = [];
    this._y = [];
  },
  lineEnd: function() {
    var x4 = this._x, y4 = this._y, n2 = x4.length;
    if (n2) {
      this._line ? this._context.lineTo(x4[0], y4[0]) : this._context.moveTo(x4[0], y4[0]);
      if (n2 === 2) {
        this._context.lineTo(x4[1], y4[1]);
      } else {
        var px = controlPoints(x4), py = controlPoints(y4);
        for (var i0 = 0, i1 = 1; i1 < n2; ++i0, ++i1) {
          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x4[i1], y4[i1]);
        }
      }
    }
    if (this._line || this._line !== 0 && n2 === 1)
      this._context.closePath();
    this._line = 1 - this._line;
    this._x = this._y = null;
  },
  point: function(x4, y4) {
    this._x.push(+x4);
    this._y.push(+y4);
  }
};
function controlPoints(x4) {
  var i, n2 = x4.length - 1, m2, a3 = new Array(n2), b = new Array(n2), r = new Array(n2);
  a3[0] = 0, b[0] = 2, r[0] = x4[0] + 2 * x4[1];
  for (i = 1; i < n2 - 1; ++i)
    a3[i] = 1, b[i] = 4, r[i] = 4 * x4[i] + 2 * x4[i + 1];
  a3[n2 - 1] = 2, b[n2 - 1] = 7, r[n2 - 1] = 8 * x4[n2 - 1] + x4[n2];
  for (i = 1; i < n2; ++i)
    m2 = a3[i] / b[i - 1], b[i] -= m2, r[i] -= m2 * r[i - 1];
  a3[n2 - 1] = r[n2 - 1] / b[n2 - 1];
  for (i = n2 - 2; i >= 0; --i)
    a3[i] = (r[i] - a3[i + 1]) / b[i];
  b[n2 - 1] = (x4[n2] + a3[n2 - 1]) / 2;
  for (i = 0; i < n2 - 1; ++i)
    b[i] = 2 * x4[i + 1] - a3[i + 1];
  return [a3, b];
}
function natural_default(context) {
  return new Natural(context);
}

// node_modules/d3-shape/src/curve/step.js
function Step(context, t) {
  this._context = context;
  this._t = t;
}
Step.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x = this._y = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    if (0 < this._t && this._t < 1 && this._point === 2)
      this._context.lineTo(this._x, this._y);
    if (this._line || this._line !== 0 && this._point === 1)
      this._context.closePath();
    if (this._line >= 0)
      this._t = 1 - this._t, this._line = 1 - this._line;
  },
  point: function(x4, y4) {
    x4 = +x4, y4 = +y4;
    switch (this._point) {
      case 0:
        this._point = 1;
        this._line ? this._context.lineTo(x4, y4) : this._context.moveTo(x4, y4);
        break;
      case 1:
        this._point = 2;
      default: {
        if (this._t <= 0) {
          this._context.lineTo(this._x, y4);
          this._context.lineTo(x4, y4);
        } else {
          var x12 = this._x * (1 - this._t) + x4 * this._t;
          this._context.lineTo(x12, this._y);
          this._context.lineTo(x12, y4);
        }
        break;
      }
    }
    this._x = x4, this._y = y4;
  }
};
function step_default(context) {
  return new Step(context, 0.5);
}
function stepBefore(context) {
  return new Step(context, 0);
}
function stepAfter(context) {
  return new Step(context, 1);
}

// node_modules/d3-shape/src/offset/none.js
function none_default(series, order) {
  if (!((n2 = series.length) > 1))
    return;
  for (var i = 1, j, s0, s1 = series[order[0]], n2, m2 = s1.length; i < n2; ++i) {
    s0 = s1, s1 = series[order[i]];
    for (j = 0; j < m2; ++j) {
      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];
    }
  }
}

// node_modules/d3-shape/src/order/none.js
function none_default2(series) {
  var n2 = series.length, o = new Array(n2);
  while (--n2 >= 0)
    o[n2] = n2;
  return o;
}

// node_modules/d3-shape/src/stack.js
function stackValue(d, key) {
  return d[key];
}
function stackSeries(key) {
  const series = [];
  series.key = key;
  return series;
}
function stack_default() {
  var keys = constant_default11([]), order = none_default2, offset2 = none_default, value = stackValue;
  function stack(data) {
    var sz = Array.from(keys.apply(this, arguments), stackSeries), i, n2 = sz.length, j = -1, oz;
    for (const d of data) {
      for (i = 0, ++j; i < n2; ++i) {
        (sz[i][j] = [0, +value(d, sz[i].key, j, data)]).data = d;
      }
    }
    for (i = 0, oz = array_default4(order(sz)); i < n2; ++i) {
      sz[oz[i]].index = i;
    }
    offset2(sz, oz);
    return sz;
  }
  stack.keys = function(_) {
    return arguments.length ? (keys = typeof _ === "function" ? _ : constant_default11(Array.from(_)), stack) : keys;
  };
  stack.value = function(_) {
    return arguments.length ? (value = typeof _ === "function" ? _ : constant_default11(+_), stack) : value;
  };
  stack.order = function(_) {
    return arguments.length ? (order = _ == null ? none_default2 : typeof _ === "function" ? _ : constant_default11(Array.from(_)), stack) : order;
  };
  stack.offset = function(_) {
    return arguments.length ? (offset2 = _ == null ? none_default : _, stack) : offset2;
  };
  return stack;
}

// node_modules/d3-shape/src/offset/expand.js
function expand_default(series, order) {
  if (!((n2 = series.length) > 0))
    return;
  for (var i, n2, j = 0, m2 = series[0].length, y4; j < m2; ++j) {
    for (y4 = i = 0; i < n2; ++i)
      y4 += series[i][j][1] || 0;
    if (y4)
      for (i = 0; i < n2; ++i)
        series[i][j][1] /= y4;
  }
  none_default(series, order);
}

// node_modules/d3-shape/src/offset/diverging.js
function diverging_default(series, order) {
  if (!((n2 = series.length) > 0))
    return;
  for (var i, j = 0, d, dy, yp, yn, n2, m2 = series[order[0]].length; j < m2; ++j) {
    for (yp = yn = 0, i = 0; i < n2; ++i) {
      if ((dy = (d = series[order[i]][j])[1] - d[0]) > 0) {
        d[0] = yp, d[1] = yp += dy;
      } else if (dy < 0) {
        d[1] = yn, d[0] = yn += dy;
      } else {
        d[0] = 0, d[1] = dy;
      }
    }
  }
}

// node_modules/d3-shape/src/offset/silhouette.js
function silhouette_default(series, order) {
  if (!((n2 = series.length) > 0))
    return;
  for (var j = 0, s0 = series[order[0]], n2, m2 = s0.length; j < m2; ++j) {
    for (var i = 0, y4 = 0; i < n2; ++i)
      y4 += series[i][j][1] || 0;
    s0[j][1] += s0[j][0] = -y4 / 2;
  }
  none_default(series, order);
}

// node_modules/d3-shape/src/offset/wiggle.js
function wiggle_default(series, order) {
  if (!((n2 = series.length) > 0) || !((m2 = (s0 = series[order[0]]).length) > 0))
    return;
  for (var y4 = 0, j = 1, s0, m2, n2; j < m2; ++j) {
    for (var i = 0, s1 = 0, s22 = 0; i < n2; ++i) {
      var si = series[order[i]], sij0 = si[j][1] || 0, sij1 = si[j - 1][1] || 0, s3 = (sij0 - sij1) / 2;
      for (var k2 = 0; k2 < i; ++k2) {
        var sk = series[order[k2]], skj0 = sk[j][1] || 0, skj1 = sk[j - 1][1] || 0;
        s3 += skj0 - skj1;
      }
      s1 += sij0, s22 += s3 * sij0;
    }
    s0[j - 1][1] += s0[j - 1][0] = y4;
    if (s1)
      y4 -= s22 / s1;
  }
  s0[j - 1][1] += s0[j - 1][0] = y4;
  none_default(series, order);
}

// node_modules/d3-shape/src/order/appearance.js
function appearance_default(series) {
  var peaks = series.map(peak);
  return none_default2(series).sort(function(a3, b) {
    return peaks[a3] - peaks[b];
  });
}
function peak(series) {
  var i = -1, j = 0, n2 = series.length, vi, vj = -Infinity;
  while (++i < n2)
    if ((vi = +series[i][1]) > vj)
      vj = vi, j = i;
  return j;
}

// node_modules/d3-shape/src/order/ascending.js
function ascending_default3(series) {
  var sums = series.map(sum2);
  return none_default2(series).sort(function(a3, b) {
    return sums[a3] - sums[b];
  });
}
function sum2(series) {
  var s3 = 0, i = -1, n2 = series.length, v;
  while (++i < n2)
    if (v = +series[i][1])
      s3 += v;
  return s3;
}

// node_modules/d3-shape/src/order/descending.js
function descending_default3(series) {
  return ascending_default3(series).reverse();
}

// node_modules/d3-shape/src/order/insideOut.js
function insideOut_default(series) {
  var n2 = series.length, i, j, sums = series.map(sum2), order = appearance_default(series), top2 = 0, bottom2 = 0, tops = [], bottoms = [];
  for (i = 0; i < n2; ++i) {
    j = order[i];
    if (top2 < bottom2) {
      top2 += sums[j];
      tops.push(j);
    } else {
      bottom2 += sums[j];
      bottoms.push(j);
    }
  }
  return bottoms.reverse().concat(tops);
}

// node_modules/d3-shape/src/order/reverse.js
function reverse_default(series) {
  return none_default2(series).reverse();
}

// node_modules/d3-zoom/src/constant.js
var constant_default12 = (x4) => () => x4;

// node_modules/d3-zoom/src/event.js
function ZoomEvent(type2, {
  sourceEvent,
  target,
  transform: transform2,
  dispatch: dispatch2
}) {
  Object.defineProperties(this, {
    type: { value: type2, enumerable: true, configurable: true },
    sourceEvent: { value: sourceEvent, enumerable: true, configurable: true },
    target: { value: target, enumerable: true, configurable: true },
    transform: { value: transform2, enumerable: true, configurable: true },
    _: { value: dispatch2 }
  });
}

// node_modules/d3-zoom/src/transform.js
function Transform(k2, x4, y4) {
  this.k = k2;
  this.x = x4;
  this.y = y4;
}
Transform.prototype = {
  constructor: Transform,
  scale: function(k2) {
    return k2 === 1 ? this : new Transform(this.k * k2, this.x, this.y);
  },
  translate: function(x4, y4) {
    return x4 === 0 & y4 === 0 ? this : new Transform(this.k, this.x + this.k * x4, this.y + this.k * y4);
  },
  apply: function(point6) {
    return [point6[0] * this.k + this.x, point6[1] * this.k + this.y];
  },
  applyX: function(x4) {
    return x4 * this.k + this.x;
  },
  applyY: function(y4) {
    return y4 * this.k + this.y;
  },
  invert: function(location) {
    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];
  },
  invertX: function(x4) {
    return (x4 - this.x) / this.k;
  },
  invertY: function(y4) {
    return (y4 - this.y) / this.k;
  },
  rescaleX: function(x4) {
    return x4.copy().domain(x4.range().map(this.invertX, this).map(x4.invert, x4));
  },
  rescaleY: function(y4) {
    return y4.copy().domain(y4.range().map(this.invertY, this).map(y4.invert, y4));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
var identity4 = new Transform(1, 0, 0);
transform.prototype = Transform.prototype;
function transform(node) {
  while (!node.__zoom)
    if (!(node = node.parentNode))
      return identity4;
  return node.__zoom;
}

// node_modules/d3-zoom/src/noevent.js
function nopropagation3(event) {
  event.stopImmediatePropagation();
}
function noevent_default3(event) {
  event.preventDefault();
  event.stopImmediatePropagation();
}

// node_modules/d3-zoom/src/zoom.js
function defaultFilter3(event) {
  return (!event.ctrlKey || event.type === "wheel") && !event.button;
}
function defaultExtent2() {
  var e = this;
  if (e instanceof SVGElement) {
    e = e.ownerSVGElement || e;
    if (e.hasAttribute("viewBox")) {
      e = e.viewBox.baseVal;
      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];
    }
    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];
  }
  return [[0, 0], [e.clientWidth, e.clientHeight]];
}
function defaultTransform() {
  return this.__zoom || identity4;
}
function defaultWheelDelta(event) {
  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 2e-3) * (event.ctrlKey ? 10 : 1);
}
function defaultTouchable3() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function defaultConstrain(transform2, extent, translateExtent) {
  var dx0 = transform2.invertX(extent[0][0]) - translateExtent[0][0], dx1 = transform2.invertX(extent[1][0]) - translateExtent[1][0], dy0 = transform2.invertY(extent[0][1]) - translateExtent[0][1], dy1 = transform2.invertY(extent[1][1]) - translateExtent[1][1];
  return transform2.translate(
    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),
    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)
  );
}
function zoom_default2() {
  var filter3 = defaultFilter3, extent = defaultExtent2, constrain = defaultConstrain, wheelDelta = defaultWheelDelta, touchable = defaultTouchable3, scaleExtent = [0, Infinity], translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]], duration = 250, interpolate = zoom_default, listeners = dispatch_default("start", "zoom", "end"), touchstarting, touchfirst, touchending, touchDelay = 500, wheelDelay = 150, clickDistance2 = 0, tapDistance = 10;
  function zoom(selection2) {
    selection2.property("__zoom", defaultTransform).on("wheel.zoom", wheeled).on("mousedown.zoom", mousedowned).on("dblclick.zoom", dblclicked).filter(touchable).on("touchstart.zoom", touchstarted).on("touchmove.zoom", touchmoved).on("touchend.zoom touchcancel.zoom", touchended).style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  zoom.transform = function(collection, transform2, point6, event) {
    var selection2 = collection.selection ? collection.selection() : collection;
    selection2.property("__zoom", defaultTransform);
    if (collection !== selection2) {
      schedule(collection, transform2, point6, event);
    } else {
      selection2.interrupt().each(function() {
        gesture(this, arguments).event(event).start().zoom(null, typeof transform2 === "function" ? transform2.apply(this, arguments) : transform2).end();
      });
    }
  };
  zoom.scaleBy = function(selection2, k2, p, event) {
    zoom.scaleTo(selection2, function() {
      var k0 = this.__zoom.k, k1 = typeof k2 === "function" ? k2.apply(this, arguments) : k2;
      return k0 * k1;
    }, p, event);
  };
  zoom.scaleTo = function(selection2, k2, p, event) {
    zoom.transform(selection2, function() {
      var e = extent.apply(this, arguments), t03 = this.__zoom, p02 = p == null ? centroid(e) : typeof p === "function" ? p.apply(this, arguments) : p, p1 = t03.invert(p02), k1 = typeof k2 === "function" ? k2.apply(this, arguments) : k2;
      return constrain(translate(scale(t03, k1), p02, p1), e, translateExtent);
    }, p, event);
  };
  zoom.translateBy = function(selection2, x4, y4, event) {
    zoom.transform(selection2, function() {
      return constrain(this.__zoom.translate(
        typeof x4 === "function" ? x4.apply(this, arguments) : x4,
        typeof y4 === "function" ? y4.apply(this, arguments) : y4
      ), extent.apply(this, arguments), translateExtent);
    }, null, event);
  };
  zoom.translateTo = function(selection2, x4, y4, p, event) {
    zoom.transform(selection2, function() {
      var e = extent.apply(this, arguments), t = this.__zoom, p02 = p == null ? centroid(e) : typeof p === "function" ? p.apply(this, arguments) : p;
      return constrain(identity4.translate(p02[0], p02[1]).scale(t.k).translate(
        typeof x4 === "function" ? -x4.apply(this, arguments) : -x4,
        typeof y4 === "function" ? -y4.apply(this, arguments) : -y4
      ), e, translateExtent);
    }, p, event);
  };
  function scale(transform2, k2) {
    k2 = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k2));
    return k2 === transform2.k ? transform2 : new Transform(k2, transform2.x, transform2.y);
  }
  function translate(transform2, p02, p1) {
    var x4 = p02[0] - p1[0] * transform2.k, y4 = p02[1] - p1[1] * transform2.k;
    return x4 === transform2.x && y4 === transform2.y ? transform2 : new Transform(transform2.k, x4, y4);
  }
  function centroid(extent2) {
    return [(+extent2[0][0] + +extent2[1][0]) / 2, (+extent2[0][1] + +extent2[1][1]) / 2];
  }
  function schedule(transition2, transform2, point6, event) {
    transition2.on("start.zoom", function() {
      gesture(this, arguments).event(event).start();
    }).on("interrupt.zoom end.zoom", function() {
      gesture(this, arguments).event(event).end();
    }).tween("zoom", function() {
      var that = this, args = arguments, g = gesture(that, args).event(event), e = extent.apply(that, args), p = point6 == null ? centroid(e) : typeof point6 === "function" ? point6.apply(that, args) : point6, w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]), a3 = that.__zoom, b = typeof transform2 === "function" ? transform2.apply(that, args) : transform2, i = interpolate(a3.invert(p).concat(w / a3.k), b.invert(p).concat(w / b.k));
      return function(t) {
        if (t === 1)
          t = b;
        else {
          var l2 = i(t), k2 = w / l2[2];
          t = new Transform(k2, p[0] - l2[0] * k2, p[1] - l2[1] * k2);
        }
        g.zoom(null, t);
      };
    });
  }
  function gesture(that, args, clean) {
    return !clean && that.__zooming || new Gesture(that, args);
  }
  function Gesture(that, args) {
    this.that = that;
    this.args = args;
    this.active = 0;
    this.sourceEvent = null;
    this.extent = extent.apply(that, args);
    this.taps = 0;
  }
  Gesture.prototype = {
    event: function(event) {
      if (event)
        this.sourceEvent = event;
      return this;
    },
    start: function() {
      if (++this.active === 1) {
        this.that.__zooming = this;
        this.emit("start");
      }
      return this;
    },
    zoom: function(key, transform2) {
      if (this.mouse && key !== "mouse")
        this.mouse[1] = transform2.invert(this.mouse[0]);
      if (this.touch0 && key !== "touch")
        this.touch0[1] = transform2.invert(this.touch0[0]);
      if (this.touch1 && key !== "touch")
        this.touch1[1] = transform2.invert(this.touch1[0]);
      this.that.__zoom = transform2;
      this.emit("zoom");
      return this;
    },
    end: function() {
      if (--this.active === 0) {
        delete this.that.__zooming;
        this.emit("end");
      }
      return this;
    },
    emit: function(type2) {
      var d = select_default2(this.that).datum();
      listeners.call(
        type2,
        this.that,
        new ZoomEvent(type2, {
          sourceEvent: this.sourceEvent,
          target: zoom,
          type: type2,
          transform: this.that.__zoom,
          dispatch: listeners
        }),
        d
      );
    }
  };
  function wheeled(event, ...args) {
    if (!filter3.apply(this, arguments))
      return;
    var g = gesture(this, args).event(event), t = this.__zoom, k2 = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))), p = pointer_default(event);
    if (g.wheel) {
      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {
        g.mouse[1] = t.invert(g.mouse[0] = p);
      }
      clearTimeout(g.wheel);
    } else if (t.k === k2)
      return;
    else {
      g.mouse = [p, t.invert(p)];
      interrupt_default(this);
      g.start();
    }
    noevent_default3(event);
    g.wheel = setTimeout(wheelidled, wheelDelay);
    g.zoom("mouse", constrain(translate(scale(t, k2), g.mouse[0], g.mouse[1]), g.extent, translateExtent));
    function wheelidled() {
      g.wheel = null;
      g.end();
    }
  }
  function mousedowned(event, ...args) {
    if (touchending || !filter3.apply(this, arguments))
      return;
    var g = gesture(this, args, true).event(event), v = select_default2(event.view).on("mousemove.zoom", mousemoved, true).on("mouseup.zoom", mouseupped, true), p = pointer_default(event, currentTarget), currentTarget = event.currentTarget, x06 = event.clientX, y06 = event.clientY;
    nodrag_default(event.view);
    nopropagation3(event);
    g.mouse = [p, this.__zoom.invert(p)];
    interrupt_default(this);
    g.start();
    function mousemoved(event2) {
      noevent_default3(event2);
      if (!g.moved) {
        var dx = event2.clientX - x06, dy = event2.clientY - y06;
        g.moved = dx * dx + dy * dy > clickDistance2;
      }
      g.event(event2).zoom("mouse", constrain(translate(g.that.__zoom, g.mouse[0] = pointer_default(event2, currentTarget), g.mouse[1]), g.extent, translateExtent));
    }
    function mouseupped(event2) {
      v.on("mousemove.zoom mouseup.zoom", null);
      yesdrag(event2.view, g.moved);
      noevent_default3(event2);
      g.event(event2).end();
    }
  }
  function dblclicked(event, ...args) {
    if (!filter3.apply(this, arguments))
      return;
    var t03 = this.__zoom, p02 = pointer_default(event.changedTouches ? event.changedTouches[0] : event, this), p1 = t03.invert(p02), k1 = t03.k * (event.shiftKey ? 0.5 : 2), t13 = constrain(translate(scale(t03, k1), p02, p1), extent.apply(this, args), translateExtent);
    noevent_default3(event);
    if (duration > 0)
      select_default2(this).transition().duration(duration).call(schedule, t13, p02, event);
    else
      select_default2(this).call(zoom.transform, t13, p02, event);
  }
  function touchstarted(event, ...args) {
    if (!filter3.apply(this, arguments))
      return;
    var touches = event.touches, n2 = touches.length, g = gesture(this, args, event.changedTouches.length === n2).event(event), started, i, t, p;
    nopropagation3(event);
    for (i = 0; i < n2; ++i) {
      t = touches[i], p = pointer_default(t, this);
      p = [p, this.__zoom.invert(p), t.identifier];
      if (!g.touch0)
        g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;
      else if (!g.touch1 && g.touch0[2] !== p[2])
        g.touch1 = p, g.taps = 0;
    }
    if (touchstarting)
      touchstarting = clearTimeout(touchstarting);
    if (started) {
      if (g.taps < 2)
        touchfirst = p[0], touchstarting = setTimeout(function() {
          touchstarting = null;
        }, touchDelay);
      interrupt_default(this);
      g.start();
    }
  }
  function touchmoved(event, ...args) {
    if (!this.__zooming)
      return;
    var g = gesture(this, args).event(event), touches = event.changedTouches, n2 = touches.length, i, t, p, l2;
    noevent_default3(event);
    for (i = 0; i < n2; ++i) {
      t = touches[i], p = pointer_default(t, this);
      if (g.touch0 && g.touch0[2] === t.identifier)
        g.touch0[0] = p;
      else if (g.touch1 && g.touch1[2] === t.identifier)
        g.touch1[0] = p;
    }
    t = g.that.__zoom;
    if (g.touch1) {
      var p02 = g.touch0[0], l0 = g.touch0[1], p1 = g.touch1[0], l1 = g.touch1[1], dp = (dp = p1[0] - p02[0]) * dp + (dp = p1[1] - p02[1]) * dp, dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;
      t = scale(t, Math.sqrt(dp / dl));
      p = [(p02[0] + p1[0]) / 2, (p02[1] + p1[1]) / 2];
      l2 = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];
    } else if (g.touch0)
      p = g.touch0[0], l2 = g.touch0[1];
    else
      return;
    g.zoom("touch", constrain(translate(t, p, l2), g.extent, translateExtent));
  }
  function touchended(event, ...args) {
    if (!this.__zooming)
      return;
    var g = gesture(this, args).event(event), touches = event.changedTouches, n2 = touches.length, i, t;
    nopropagation3(event);
    if (touchending)
      clearTimeout(touchending);
    touchending = setTimeout(function() {
      touchending = null;
    }, touchDelay);
    for (i = 0; i < n2; ++i) {
      t = touches[i];
      if (g.touch0 && g.touch0[2] === t.identifier)
        delete g.touch0;
      else if (g.touch1 && g.touch1[2] === t.identifier)
        delete g.touch1;
    }
    if (g.touch1 && !g.touch0)
      g.touch0 = g.touch1, delete g.touch1;
    if (g.touch0)
      g.touch0[1] = this.__zoom.invert(g.touch0[0]);
    else {
      g.end();
      if (g.taps === 2) {
        t = pointer_default(t, this);
        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {
          var p = select_default2(this).on("dblclick.zoom");
          if (p)
            p.apply(this, arguments);
        }
      }
    }
  }
  zoom.wheelDelta = function(_) {
    return arguments.length ? (wheelDelta = typeof _ === "function" ? _ : constant_default12(+_), zoom) : wheelDelta;
  };
  zoom.filter = function(_) {
    return arguments.length ? (filter3 = typeof _ === "function" ? _ : constant_default12(!!_), zoom) : filter3;
  };
  zoom.touchable = function(_) {
    return arguments.length ? (touchable = typeof _ === "function" ? _ : constant_default12(!!_), zoom) : touchable;
  };
  zoom.extent = function(_) {
    return arguments.length ? (extent = typeof _ === "function" ? _ : constant_default12([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;
  };
  zoom.scaleExtent = function(_) {
    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];
  };
  zoom.translateExtent = function(_) {
    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];
  };
  zoom.constrain = function(_) {
    return arguments.length ? (constrain = _, zoom) : constrain;
  };
  zoom.duration = function(_) {
    return arguments.length ? (duration = +_, zoom) : duration;
  };
  zoom.interpolate = function(_) {
    return arguments.length ? (interpolate = _, zoom) : interpolate;
  };
  zoom.on = function() {
    var value = listeners.on.apply(listeners, arguments);
    return value === listeners ? zoom : value;
  };
  zoom.clickDistance = function(_) {
    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);
  };
  zoom.tapDistance = function(_) {
    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;
  };
  return zoom;
}

// src/axisutil.ts
function drawXLabel(svgEl, seismographConfig, height, width, handlebarsInput = {}) {
  const svg2 = select_default2(svgEl);
  svg2.selectAll("g.xLabel").remove();
  if (seismographConfig.xLabel && seismographConfig.xLabel.length > 0) {
    const svgText = svg2.append("g").classed("xLabel", true).attr(
      "transform",
      `translate(${seismographConfig.margin.left + width / 2}, ${height + seismographConfig.margin.top + seismographConfig.margin.bottom * 2 / 3} )`
    ).append("text").classed("x label", true).attr("text-anchor", "middle").text(seismographConfig.xLabel);
    const handlebarOut = seismographConfig.handlebarsXLabel(handlebarsInput, {
      allowProtoPropertiesByDefault: true
    });
    svgText.html(handlebarOut);
  }
}
function drawXSublabel(svgEl, seismographConfig, height, width, handlebarsInput = {}) {
  const svg2 = select_default2(svgEl);
  svg2.selectAll("g.xSublabel").remove();
  const svgText = svg2.append("g").classed("xSublabel", true).attr(
    "transform",
    `translate(${seismographConfig.margin.left + width / 2}, ${height + seismographConfig.margin.top + seismographConfig.margin.bottom} )`
  ).append("text").classed("x label sublabel", true).attr("text-anchor", "middle");
  const handlebarOut = seismographConfig.handlebarsXSublabel(handlebarsInput, {
    allowProtoPropertiesByDefault: true
  });
  svgText.html(handlebarOut);
}
function drawYLabel(svgEl, seismographConfig, height, width, handlebarsInput = {}) {
  const svg2 = select_default2(svgEl);
  svg2.selectAll("g.yLabel").remove();
  for (const side of ["left", "right"]) {
    const hTranslate = side === "left" ? 0 : seismographConfig.margin.left + width + 1;
    const svgText = svg2.append("g").classed("yLabel", true).classed(side, true).attr("x", 0).attr(
      "transform",
      `translate(${hTranslate}, ${seismographConfig.margin.top + height / 2})`
    ).append("text");
    svgText.classed("y label", true);
    if (seismographConfig.yLabelOrientation === "vertical") {
      svgText.attr("text-anchor", "middle").attr("dy", ".75em").attr("transform", "rotate(-90, 0, 0)");
    } else {
      if (side === "left") {
        svgText.attr("text-anchor", "start").attr("dominant-baseline", "central");
      } else {
        svgText.attr("text-anchor", "end").attr("dominant-baseline", "central");
        svgText.attr("x", seismographConfig.margin.right - 1);
      }
    }
    if (side === "left") {
      const handlebarOut = seismographConfig.handlebarsYLabel(handlebarsInput, {
        allowProtoPropertiesByDefault: true
      });
      svgText.html(handlebarOut);
    } else {
      const handlebarOut = seismographConfig.handlebarsYLabelRight(
        handlebarsInput,
        {
          allowProtoPropertiesByDefault: true
        }
      );
      svgText.html(handlebarOut);
    }
  }
}
function drawYSublabel(svgEl, seismographConfig, height, width, handlebarsInput = {}) {
  const svg2 = select_default2(svgEl);
  svg2.selectAll("g.ySublabel").remove();
  for (const side of ["left", "right"]) {
    const svgText = svg2.append("g").classed("ySublabel", true).attr("x", 0).attr(
      "transform",
      "translate( " + seismographConfig.ySublabelTrans + " , " + (seismographConfig.margin.top + height / 2) + ")"
    ).append("text").classed("y label sublabel", true);
    if (seismographConfig.yLabelOrientation === "vertical") {
      svgText.attr("text-anchor", "middle").attr("dy", ".75em").attr("transform", "rotate(-90, 0, 0)");
    } else {
      if (side === "left") {
        svgText.attr("text-anchor", "start").attr("dominant-baseline", "central");
      } else {
        svgText.attr("text-anchor", "end").attr("dominant-baseline", "central");
        svgText.attr("x", seismographConfig.margin.right - 1);
      }
    }
    const handlebarOut = seismographConfig.handlebarsYSublabel(handlebarsInput, {
      allowProtoPropertiesByDefault: true
    });
    svgText.html(handlebarOut);
  }
}
function drawTitle(svgEl, seismographConfig, height, width, handlebarsInput = {}) {
  if (!svgEl) {
    console.log("warn, drawTitle, but no svg element");
    return;
  }
  let titleG = svgEl.querySelector("g.title");
  if (!seismographConfig.showTitle) {
    if (titleG) {
      svgEl.removeChild(titleG);
    }
    return;
  }
  if (!titleG) {
    titleG = svgEl.appendChild(createSVGElement("g"));
    titleG.setAttribute("class", "title");
  }
  titleG.setAttribute(
    "transform",
    `translate(${seismographConfig.margin.left + width / 2}, 0)`
  );
  let textEl;
  let queryTextEl = titleG.querySelector("text");
  if (!queryTextEl) {
    textEl = createSVGElement("text");
    titleG.appendChild(textEl);
  } else {
    textEl = queryTextEl;
  }
  textEl.setAttribute("class", "title label");
  textEl.setAttribute("x", "0");
  textEl.setAttribute("y", "2");
  textEl.setAttribute("text-anchor", "middle");
  if (!handlebarsInput.seisConfig) {
    handlebarsInput.seisConfig = seismographConfig;
  }
  const handlebarOut = seismographConfig.handlebarsTitle(handlebarsInput, {
    allowProtoPropertiesByDefault: true
  });
  textEl.innerHTML = handlebarOut;
}
function drawAxisLabels(svgEl, seismographConfig, height, width, handlebarsInput = {}) {
  if (!svgEl) {
    console.log(`warn, axisutil.drawAxisLabels, but no svg element: ${svgEl}`);
    return;
  }
  if (!(svgEl instanceof SVGElement)) {
    console.log(`warn, axisutil.drawAxisLabels, but not SVGElement: ${svgEl}`);
    return;
  }
  drawTitle(svgEl, seismographConfig, height, width, handlebarsInput);
  drawXLabel(svgEl, seismographConfig, height, width, handlebarsInput);
  drawXSublabel(svgEl, seismographConfig, height, width);
  drawYLabel(svgEl, seismographConfig, height, width, handlebarsInput);
  drawYSublabel(svgEl, seismographConfig, height, width);
}

// src/components.ts
var components_exports = {};
__export(components_exports, {
  CHANNEL_CODE_ELEMENT: () => CHANNEL_CODE_ELEMENT,
  CHANNEL_LIST_ELEMENT: () => CHANNEL_LIST_ELEMENT,
  ChannelCodeInput: () => ChannelCodeInput,
  ChannelListChooser: () => ChannelListChooser,
  LATLONBOX_ELEMENT: () => LATLONBOX_ELEMENT,
  LATLONRADIUS_ELEMENT: () => LATLONRADIUS_ELEMENT,
  LATLON_CHOICE_ELEMENT: () => LATLON_CHOICE_ELEMENT,
  LabeledMinMax: () => LabeledMinMax,
  LatLonBoxEl: () => LatLonBoxEl,
  LatLonChoice: () => LatLonChoice,
  LatLonRadiusEl: () => LatLonRadiusEl,
  MINMAX_ELEMENT: () => MINMAX_ELEMENT,
  labeledNumberInput: () => labeledNumberInput,
  labeledTextInput: () => labeledTextInput,
  numberFromInput: () => numberFromInput,
  numberOrNaN: () => numberOrNaN,
  validateLatitude: () => validateLatitude,
  validateLongitude: () => validateLongitude
});

// src/fdsncommon.ts
var fdsncommon_exports = {};
__export(fdsncommon_exports, {
  FDSNCommon: () => FDSNCommon,
  IRIS_HOST: () => IRIS_HOST,
  LatLonBox: () => LatLonBox,
  LatLonRadius: () => LatLonRadius,
  LatLonRegion: () => LatLonRegion
});
var IRIS_HOST = "service.iris.edu";
var FDSNCommon = class {
  constructor(host) {
    __publicField(this, "_specVersion");
    __publicField(this, "_protocol");
    __publicField(this, "_host");
    __publicField(this, "_port");
    __publicField(this, "_nodata");
    __publicField(this, "_timeoutSec");
    this._specVersion = "1";
    this._host = IRIS_HOST;
    this._protocol = checkProtocol();
    if (isNonEmptyStringArg(host)) {
      this._host = host;
    }
    this._port = 80;
    this._timeoutSec = 30;
  }
};
var LatLonRegion = class {
};
var LatLonBox = class extends LatLonRegion {
  constructor(west, east, south, north) {
    super();
    __publicField(this, "west");
    __publicField(this, "east");
    __publicField(this, "south");
    __publicField(this, "north");
    this.west = west;
    this.east = east;
    this.south = south;
    this.north = north;
  }
  asLeafletBounds() {
    return [
      [this.south, this.west],
      [this.north, this.east]
    ];
  }
};
var LatLonRadius = class extends LatLonRegion {
  constructor(latitude, longitude2, minRadius, maxRadius) {
    super();
    __publicField(this, "latitude");
    __publicField(this, "longitude");
    __publicField(this, "minRadius");
    __publicField(this, "maxRadius");
    this.latitude = latitude;
    this.longitude = longitude2;
    this.minRadius = minRadius;
    this.maxRadius = maxRadius;
  }
};

// src/components.ts
var CHANNEL_LIST_ELEMENT = "sp-channellist";
var CHANNEL_CODE_ELEMENT = "sp-channel-code-input";
var MINMAX_ELEMENT = "sp-minmax";
var LATLONRADIUS_ELEMENT = "sp-latlon-radius";
var LATLONBOX_ELEMENT = "sp-latlon-box";
var LATLON_CHOICE_ELEMENT = "sp-latlon-choice";
function numberOrNaN(a3) {
  return Number.parseFloat(`${a3}`);
}
function numberFromInput(root3, query) {
  if (!root3) {
    throw new Error(`no root`);
  }
  const el = root3.querySelector(query);
  if (el instanceof HTMLInputElement) {
    return Number.parseFloat(el.value);
  } else {
    throw new Error("element is not HTMLInputElement");
  }
}
function labeledTextInput(label, defaultVal) {
  const ndiv = document.createElement("span");
  const nlabel = ndiv.appendChild(document.createElement("label"));
  nlabel.textContent = label;
  const ntext = ndiv.appendChild(document.createElement("input"));
  ntext.setAttribute("type", "text");
  ntext.setAttribute("name", label);
  ntext.setAttribute("class", label);
  ntext.value = defaultVal;
  return ndiv;
}
function labeledNumberInput(label, defaultVal) {
  const ndiv = document.createElement("span");
  const nlabel = ndiv.appendChild(document.createElement("label"));
  nlabel.textContent = label;
  const ntext = ndiv.appendChild(document.createElement("input"));
  ntext.setAttribute("type", "number");
  ntext.setAttribute("name", label);
  ntext.setAttribute("class", label);
  ntext.value = defaultVal;
  return ndiv;
}
var ATTR_LIST = ["Network", "Station", "Location", "Channel"];
var ChannelCodeInput = class extends HTMLElement {
  constructor() {
    super();
    const shadow = this.attachShadow({ mode: "open" });
    const wrapper = document.createElement("span");
    wrapper.setAttribute("class", "wrapper");
    const default_vals = { "Network": "CO", "Station": "CASEE", "Location": "00", "Channel": "HHZ" };
    let netIn = wrapper.appendChild(labeledTextInput("Network", default_vals.Network));
    netIn.addEventListener("change", () => this.dispatchEvent(new Event("change")));
    let staIn = wrapper.appendChild(labeledTextInput("Station", default_vals.Station));
    staIn.addEventListener("change", () => this.dispatchEvent(new Event("change")));
    let locIn = wrapper.appendChild(labeledTextInput("Location", default_vals.Location));
    locIn.addEventListener("change", () => this.dispatchEvent(new Event("change")));
    let chanIn = wrapper.appendChild(labeledTextInput("Channel", default_vals.Channel));
    chanIn.addEventListener("change", () => this.dispatchEvent(new Event("change")));
    const style = document.createElement("style");
    style.textContent = `
      .wrapper {
        position: relative;
      }
      input {
        width: 50px;
      }
    `;
    shadow.appendChild(style);
    shadow.appendChild(wrapper);
  }
  attributeChangedCallback(name, oldValue, newValue) {
  }
  static get observedAttributes() {
    return ATTR_LIST;
  }
  get network() {
    return this._getInputValue("Network");
  }
  get station() {
    return this._getInputValue("Station");
  }
  get location() {
    return this._getInputValue("Location");
  }
  get channel() {
    return this._getInputValue("Channel");
  }
  _getInputValue(name) {
    return this.shadowRoot?.querySelector("input." + name)?.value ?? "";
  }
};
customElements.define(CHANNEL_CODE_ELEMENT, ChannelCodeInput);
var ChannelListChooser = class extends HTMLElement {
  constructor() {
    super();
    __publicField(this, "channels");
    __publicField(this, "selected_channels", /* @__PURE__ */ new Set());
    this.channels = [];
    this.draw_element();
  }
  draw_element() {
    let shadow = this.shadowRoot;
    if (shadow === null) {
      shadow = this.attachShadow({ mode: "open" });
    }
    while (shadow.firstChild) {
      shadow.removeChild(shadow.lastChild);
    }
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    const label = wrapper.appendChild(document.createElement("label"));
    label.textContent = "Channels:";
    this.channels.forEach((c5) => {
      const channel = c5;
      const div = wrapper.appendChild(document.createElement("div"));
      const cb = div.appendChild(document.createElement("input"));
      cb.setAttribute("type", this.type);
      cb.setAttribute("name", "radiogroup");
      cb.addEventListener("change", (event) => {
        if (this.type === "radio") {
          this.selected_channels.clear();
          this.selected_channels.add(channel);
        } else {
          if (cb.checked) {
            this.selected_channels.add(channel);
          } else {
            this.selected_channels.delete(channel);
          }
        }
        this.dispatchEvent(new Event("change"));
      });
      const nlabel = div.appendChild(document.createElement("label"));
      nlabel.textContent = `${c5.codes()} ${c5.startDate.toISO()}`;
    });
    shadow.appendChild(wrapper);
  }
  setChannels(channels) {
    this.channels = channels;
    this.draw_element();
    this.dispatchEvent(new Event("change"));
  }
  appendChannels(channels) {
    this.channels = this.channels.concat(channels);
    this.draw_element();
    this.dispatchEvent(new Event("change"));
  }
  get type() {
    const t = this.getAttribute("type");
    if (t) {
      return t;
    } else {
      return "checkbox";
    }
  }
  set type(s3) {
    if (s3 === "checkbox" || s3 === "radio") {
      this.setAttribute("type", s3);
    } else {
      throw new Error("must be one of checkbox or radio");
    }
  }
  attributeChangedCallback(name, oldValue, newValue) {
    this.draw_element();
  }
  selectedChannels() {
    console.log(`selectedChannels(): ${this.selected_channels.size}`);
    return Array.from(this.selected_channels.values());
  }
};
customElements.define(CHANNEL_LIST_ELEMENT, ChannelListChooser);
var LabeledMinMax = class extends HTMLElement {
  constructor() {
    super();
    __publicField(this, "default_min", 0);
    __publicField(this, "default_max", 10);
    this.attachShadow({ mode: "open" });
    this.draw_element();
  }
  attributeChangedCallback(name, oldValue, newValue) {
    if (name === "lowerbound") {
      const lowerbound = numberOrNaN(newValue);
      this.shadowRoot?.querySelector("input.min")?.setAttribute("min", `${lowerbound}`);
      this.shadowRoot?.querySelector("input.max")?.setAttribute("min", `${lowerbound}`);
    }
    if (name === "upperbound") {
      const upperbound = numberOrNaN(newValue);
      this.shadowRoot?.querySelector("input.min")?.setAttribute("max", `${upperbound}`);
      this.shadowRoot?.querySelector("input.max")?.setAttribute("max", `${upperbound}`);
    }
    if (name === "min" && !Number.isNaN(numberOrNaN(newValue))) {
      this.min = numberOrNaN(newValue);
    }
    if (name === "max" && !Number.isNaN(numberOrNaN(newValue))) {
      this.max = numberOrNaN(newValue);
    }
    this.validate();
  }
  static get observedAttributes() {
    return ["lowerbound", "upperbound", "min", "max"];
  }
  draw_element() {
    let shadow = this.shadowRoot;
    if (!shadow) {
      shadow = this.attachShadow({ mode: "open" });
    }
    const minAttr = this.getAttribute("min");
    if (!!minAttr) {
      this.default_min = Number.parseFloat(minAttr);
    }
    const maxAttr = this.getAttribute("max");
    if (!!maxAttr) {
      this.default_max = Number.parseFloat(maxAttr);
    }
    let lowerbound = Number.NaN;
    let upperbound = Number.NaN;
    const lbAttr = this.getAttribute("lowerbound");
    if (!!lbAttr) {
      lowerbound = Number.parseFloat(lbAttr);
    }
    const upAttr = this.getAttribute("upperbound");
    if (!!upAttr) {
      upperbound = Number.parseFloat(upAttr);
    }
    const style = shadow.appendChild(document.createElement("style"));
    style.textContent = `
      input {
        width: 6em;
      }
      label {
        margin-left: 3px;
        margin-right: 3px;
      }
    `;
    const wrapper = document.createElement("span");
    wrapper.setAttribute("class", "wrapper");
    const min_text = wrapper.appendChild(document.createElement("input"));
    min_text.setAttribute("type", "number");
    min_text.setAttribute("name", "min");
    min_text.setAttribute("class", "min");
    if (lowerbound) {
      min_text.setAttribute("min", `${lowerbound}`);
    }
    if (upperbound) {
      min_text.setAttribute("max", `${upperbound}`);
    }
    min_text.value = `${this.default_min}`;
    min_text.addEventListener("change", () => {
      this.validate("min");
      this.dispatchEvent(new Event("change"));
    });
    const to_label = wrapper.appendChild(document.createElement("label"));
    to_label.textContent = "to";
    const max_text = wrapper.appendChild(document.createElement("input"));
    max_text.setAttribute("type", "number");
    max_text.setAttribute("name", "max");
    max_text.setAttribute("class", "max");
    if (lowerbound) {
      max_text.setAttribute("min", `${lowerbound}`);
    }
    if (upperbound) {
      max_text.setAttribute("max", `${upperbound}`);
    }
    max_text.value = `${this.default_max}`;
    max_text.addEventListener("change", () => {
      this.validate("max");
      this.dispatchEvent(new Event("change"));
    });
    shadow.appendChild(wrapper);
    this.validate("min");
  }
  validate(lastChanged) {
    let lowerbound = numberOrNaN(this.getAttribute("lowerbound"));
    let upperbound = numberOrNaN(this.getAttribute("upperbound"));
    console.log(`validate minmax: ${lowerbound}  ${upperbound}`);
    if (!Number.isNaN(lowerbound)) {
      if (this.min < lowerbound) {
        this.min = lowerbound;
      }
      if (this.max < lowerbound) {
        this.max = lowerbound;
      }
    }
    if (!Number.isNaN(upperbound)) {
      if (this.min > upperbound) {
        this.min = upperbound;
      }
      if (this.max > upperbound) {
        this.max = upperbound;
      }
    }
    if (this.min > this.max) {
      if (lastChanged === "max") {
        this.min = this.max;
      } else {
        this.max = this.min;
      }
    }
  }
  get lowerbound() {
    return numberOrNaN(this.getAttribute("lowerbound"));
  }
  set lowerbound(v) {
    this.setAttribute("lowerbound", `${v}`);
  }
  get upperbound() {
    return numberOrNaN(this.getAttribute("upperbound"));
  }
  set upperbound(v) {
    this.setAttribute("upperbound", `${v}`);
  }
  get min() {
    const input = this.shadowRoot?.querySelector("input.min");
    if (input) {
      return Number.parseFloat(input.value);
    } else {
      throw new Error("cant find input.min");
    }
  }
  set min(v) {
    const input = this.shadowRoot?.querySelector("input.min");
    if (input) {
      input.value = v.toString();
    } else {
      throw new Error("cant find input.min");
    }
  }
  get max() {
    const input = this.shadowRoot?.querySelector("input.max");
    if (input) {
      return Number.parseFloat(input.value);
    } else {
      throw new Error("cant find input.max");
    }
  }
  set max(v) {
    const input = this.shadowRoot?.querySelector("input.max");
    if (input) {
      input.value = v.toString();
    } else {
      throw new Error("cant find input.max");
    }
  }
  updateMinMax() {
    const min4 = numberOrNaN(this.getAttribute("min"));
    if (!Number.isNaN(min4)) {
      this.default_min = min4;
    }
    const max5 = numberOrNaN(this.getAttribute("max"));
    if (!Number.isNaN(max5)) {
      this.default_max = max5;
    }
  }
  connectedCallback() {
    this.updateMinMax();
  }
};
customElements.define(MINMAX_ELEMENT, LabeledMinMax);
function validateLatitude(value) {
  if (Number.isNaN(value)) {
    return 0;
  }
  if (value < -90) {
    return -90;
  }
  if (value > 90) {
    return 90;
  }
  return value;
}
function validateLongitude(value) {
  if (Number.isNaN(value)) {
    return 0;
  }
  if (value < -180) {
    return -180;
  }
  if (value > 360) {
    return 360;
  }
  return value;
}
var LatLonRadiusEl = class extends HTMLElement {
  constructor() {
    super();
    this.draw();
  }
  draw() {
    let shadow = this.shadowRoot;
    if (shadow === null) {
      shadow = this.attachShadow({ mode: "open" });
    }
    while (shadow.firstChild) {
      shadow.removeChild(shadow.lastChild);
    }
    const style = shadow.appendChild(document.createElement("style"));
    style.textContent = `
      input {
        width: 4em;
      }
      label {
        margin-left: 3px;
        margin-right: 3px;
      }
    `;
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    const latDiv = wrapper.appendChild(labeledNumberInput("Lat", "0"));
    const latIn = latDiv.querySelector("input");
    if (!latIn) {
      throw new Error("can't find input");
    }
    latIn.textContent = "Lat: ";
    latIn.setAttribute("min", "-90.0");
    latIn.setAttribute("max", "90.0");
    latIn.addEventListener("change", () => {
      const value = Number.parseFloat(latIn.value);
      if (value !== validateLatitude(value)) {
        latIn.value = `${validateLatitude(value)}`;
      }
      this.dispatchEvent(new Event("change"));
    });
    const lonDiv = wrapper.appendChild(labeledNumberInput("Lon", "0"));
    const lonIn = lonDiv.querySelector("input");
    if (!lonIn) {
      throw new Error("can't find input");
    }
    lonIn.textContent = "Lon: ";
    lonIn.setAttribute("min", "-180.0");
    lonIn.setAttribute("max", "360.0");
    lonIn.addEventListener("change", () => {
      const value = Number.parseFloat(lonIn.value);
      if (value !== validateLongitude(value)) {
        lonIn.value = `${validateLongitude(value)}`;
      }
      this.dispatchEvent(new Event("change"));
    });
    const radius_label = wrapper.appendChild(document.createElement("label"));
    radius_label.textContent = "Radius: ";
    radius_label.setAttribute("for", "radiusminmax");
    const radius_minmax = wrapper.appendChild(new LabeledMinMax());
    radius_label.setAttribute("id", "radiusminmax");
    radius_minmax.setAttribute("lowerbound", "0.0");
    radius_minmax.setAttribute("upperbound", "180.0");
    radius_minmax.min = 0;
    radius_minmax.max = 180;
    radius_minmax.addEventListener("change", () => this.dispatchEvent(new Event("change")));
    shadow.appendChild(wrapper);
  }
  get latitude() {
    const inEl = this.shadowRoot?.querySelector("input.Lat");
    return Number.parseFloat(inEl.value);
  }
  set latitude(v) {
    const inEl = this.shadowRoot?.querySelector("input.Lat");
    inEl.value = `${validateLatitude(v)}`;
    this.dispatchEvent(new Event("change"));
  }
  get longitude() {
    const inEl = this.shadowRoot?.querySelector("input.Lon");
    return Number.parseFloat(inEl.value);
  }
  set longitude(v) {
    const inEl = this.shadowRoot?.querySelector("input.Lon");
    inEl.value = `${validateLongitude(v)}`;
    this.dispatchEvent(new Event("change"));
  }
  get minRadius() {
    const mm = this.shadowRoot?.querySelector(MINMAX_ELEMENT);
    if (mm) {
      return mm.min;
    } else {
      throw new Error(`cant find ${MINMAX_ELEMENT}`);
    }
  }
  set minRadius(v) {
    const mm = this.shadowRoot?.querySelector(MINMAX_ELEMENT);
    if (mm) {
      mm.min = v;
      this._doUpdateCallback();
    } else {
      throw new Error(`cant find ${MINMAX_ELEMENT}`);
    }
  }
  get maxRadius() {
    const mm = this.shadowRoot?.querySelector(MINMAX_ELEMENT);
    if (mm) {
      return mm.max;
    } else {
      throw new Error(`cant find ${MINMAX_ELEMENT}`);
    }
  }
  set maxRadius(v) {
    const mm = this.shadowRoot?.querySelector(MINMAX_ELEMENT);
    if (mm) {
      mm.max = v;
      this._doUpdateCallback();
    } else {
      throw new Error(`cant find ${MINMAX_ELEMENT}`);
    }
  }
  asLatLonRadius() {
    return new LatLonRadius(this.latitude, this.longitude, this.minRadius, this.maxRadius);
  }
  toString() {
    return `LatLon Radius: ${this.latitude}/${this.longitude} ${this.minRadius}/${this.maxRadius}`;
  }
  _doUpdateCallback() {
    console.log(`update lat/lon: ${this.latitude}/${this.longitude}  rad: ${this.minRadius} to ${this.maxRadius}`);
    this.dispatchEvent(new Event("change"));
  }
};
customElements.define(LATLONRADIUS_ELEMENT, LatLonRadiusEl);
var latlonbox_html = `
<style>
input {
  width: 4em;
}
label {
  margin-right: 2px;
  margin-left: 2px;
}
fieldset.latlon {
  display: grid;
  width: 250px;
  grid-template-columns:  1fr  1fr  1fr  1fr  1fr ;
}
</style>
<fieldset class="latlon">
  <div></div>
  <div></div>
  <div style="text-align: center;">
  <div><label for="north">North</label></div>
    <div><input id="north" type="number"/></div>
  </div>
  <div></div>
  <div></div>
  <div style="text-align: right;">
    <label for="west">West</label>
  </div>
  <div>
    <input id="west" type="number"/></div>
  <div style="text-align: center;margin-top: 2px;"><label>Lat/Lon</label></div>
  <div style="text-align: left;">
    <input id="east" type="number"/>
  </div>
  <div>
    <label for="east">East</label>
  </div>
  <div></div>
  <div></div>
  <div style="text-align: center;">
    <div><input id="south" type="number"/></div>
    <div><label for="south">South</label></div>
  </div>
  <div></div>
  <div></div>
</fieldset>
`;
var LatLonBoxEl = class extends HTMLElement {
  constructor() {
    super();
    this.draw();
  }
  attributeChangedCallback(name, oldValue, newValue) {
    this.innerHTML = "";
    this.draw();
  }
  static get observedAttributes() {
    return ["south", "north", "east", "west"];
  }
  draw() {
    let shadow = this.shadowRoot;
    if (shadow === null) {
      shadow = this.attachShadow({ mode: "open" });
    }
    shadow.innerHTML = latlonbox_html;
    const southEl = shadow.querySelector("input#south");
    if (!southEl) {
      throw new Error("cant find input");
    }
    const southAttr = numberOrNaN(this.getAttribute("south"));
    southEl.value = `${Number.isNaN(southAttr) ? -90 : validateLatitude(southAttr)}`;
    southEl?.addEventListener("change", () => {
      const value = Number.parseFloat(southEl.value);
      if (value !== validateLatitude(value)) {
        southEl.value = `${validateLatitude(value)}`;
      }
      this.validate("south");
      this.dispatchEvent(new Event("change"));
    });
    const northEl = shadow.querySelector("input#north");
    if (!northEl) {
      throw new Error("cant find input");
    }
    const northAttr = numberOrNaN(this.getAttribute("north"));
    northEl.value = `${Number.isNaN(northAttr) ? 90 : validateLatitude(northAttr)}`;
    northEl?.addEventListener("change", () => {
      const value = Number.parseFloat(northEl.value);
      if (value !== validateLatitude(value)) {
        northEl.value = `${validateLatitude(value)}`;
      }
      this.validate("north");
      this.dispatchEvent(new Event("change"));
    });
    const westEl = shadow.querySelector("input#west");
    if (!westEl) {
      throw new Error("cant find input");
    }
    const westAttr = numberOrNaN(this.getAttribute("west"));
    westEl.value = `${Number.isNaN(westAttr) ? -180 : validateLongitude(westAttr)}`;
    westEl?.addEventListener("change", () => {
      const value = Number.parseFloat(westEl.value);
      if (value !== validateLongitude(value)) {
        westEl.value = `${validateLongitude(value)}`;
      }
      this.validate("west");
      this.dispatchEvent(new Event("change"));
    });
    const eastEl = shadow.querySelector("input#east");
    if (!eastEl) {
      throw new Error("cant find input");
    }
    const eastAttr = numberOrNaN(this.getAttribute("east"));
    eastEl.value = `${Number.isNaN(eastAttr) ? 180 : validateLongitude(eastAttr)}`;
    eastEl?.addEventListener("change", () => {
      const value = Number.parseFloat(eastEl.value);
      if (value !== validateLongitude(value)) {
        eastEl.value = `${validateLongitude(value)}`;
      }
      this.validate("east");
      this.dispatchEvent(new Event("change"));
    });
  }
  get south() {
    return numberFromInput(this.shadowRoot, "input#south");
  }
  set south(value) {
    console.log(`set south ${value}`);
    const inputEl = this.shadowRoot?.querySelector("input#south");
    if (!inputEl) {
      throw new Error("can't find input");
    }
    inputEl.value = `${validateLatitude(value)}`;
    this.validate("south");
    this.dispatchEvent(new Event("change"));
  }
  get north() {
    return numberFromInput(this.shadowRoot, "input#north");
  }
  set north(value) {
    console.log(`set north ${value}`);
    const inputEl = this.shadowRoot?.querySelector("input#north");
    if (!inputEl) {
      throw new Error("can't find input");
    }
    inputEl.value = `${validateLatitude(value)}`;
    this.validate("north");
    this.dispatchEvent(new Event("change"));
  }
  get west() {
    return numberFromInput(this.shadowRoot, "input#west");
  }
  set west(value) {
    console.log(`set west ${value}`);
    const inputEl = this.shadowRoot?.querySelector("input#west");
    if (!inputEl) {
      throw new Error("can't find input");
    }
    inputEl.value = `${validateLongitude(value)}`;
    this.validate("west");
    this.dispatchEvent(new Event("change"));
  }
  get east() {
    return numberFromInput(this.shadowRoot, "input#east");
  }
  set east(value) {
    console.log(`set east ${value}`);
    const inputEl = this.shadowRoot?.querySelector("input#east");
    if (!inputEl) {
      throw new Error("can't find input");
    }
    inputEl.value = `${validateLongitude(value)}`;
    this.validate("east");
    this.dispatchEvent(new Event("change"));
  }
  asLatLonBox() {
    return new LatLonBox(this.west, this.east, this.south, this.north);
  }
  validate(lastChanged) {
    console.log(`validate ${lastChanged}  lat: ${this.south},${this.north}  lon:${this.west},${this.east}`);
    if (this.south > this.north) {
      if (lastChanged === "south") {
        this.north = this.south;
      } else {
        this.south = this.north;
      }
    }
    if (this.west > this.east) {
      console.log(`west ${this.west} > ${this.east} east`);
      if (lastChanged === "east") {
        if (this.west > 180 && this.west - 360 < this.east) {
          this.west = this.west - 360;
        } else {
          this.west = this.east;
        }
      } else {
        if (this.east < 0 && this.east + 360 > this.west) {
          this.east = this.east + 360;
        } else {
          this.east = this.west;
        }
      }
    }
  }
  toString() {
    return `LatLon Box: ${this.west}/${this.east}/${this.south}/${this.north}`;
  }
};
customElements.define(LATLONBOX_ELEMENT, LatLonBoxEl);
var latlonchoice_html = `
<style>
label {
}
.labeled {
}
${LATLONRADIUS_ELEMENT} {
  display:inline-block;
}
${LATLONBOX_ELEMENT} {
  display:inline-block;
}
</style>
<div class="top">
  <div class="labeled">
    <input type="radio" id="latlonall" name="latlon" value="all" checked>
    <label for="latlonradius">All: </label>
  </div>
  <div class="labeled">
    <input type="radio" id="latlonradius" name="latlon" value="radius">
    <label for="latlonradius">Radius: </label>
    <${LATLONRADIUS_ELEMENT}></${LATLONRADIUS_ELEMENT}>
  </div>
  <div class="labeled">
    <input type="radio" id="latlonbox" name="latlon" value="box">
    <label for="latlonbox">Box: </label>
    <${LATLONBOX_ELEMENT}></${LATLONBOX_ELEMENT}>
  </div>
</div>
`;
var LatLonChoice = class extends HTMLElement {
  constructor() {
    super();
    this.draw();
  }
  draw() {
    let shadow = this.shadowRoot;
    if (shadow === null) {
      shadow = this.attachShadow({ mode: "open" });
    }
    shadow.innerHTML = latlonchoice_html;
    this.shadowRoot?.querySelectorAll("input[type=radio]").forEach((inEl) => {
      inEl?.addEventListener("change", () => {
        this.dispatchEvent(new Event("change"));
      });
    });
    this.shadowRoot?.querySelector("sp-latlon-box")?.addEventListener("change", () => {
      this.dispatchEvent(new Event("change"));
    });
    this.shadowRoot?.querySelector("sp-latlon-radius")?.addEventListener("change", () => {
      this.dispatchEvent(new Event("change"));
    });
  }
  choosen() {
    let radio = this.shadowRoot?.querySelector("input[type=radio]:checked");
    if (radio.value === "box") {
      return this.shadowRoot?.querySelector("sp-latlon-box");
    } else if (radio.value === "radius") {
      return this.shadowRoot?.querySelector("sp-latlon-radius");
    } else {
      return null;
    }
  }
};
customElements.define(LATLON_CHOICE_ELEMENT, LatLonChoice);

// src/cssutil.ts
var cssutil_exports = {};
__export(cssutil_exports, {
  AUTO_CLASSED: () => AUTO_CLASSED,
  AUTO_COLOR_SELECTOR: () => AUTO_COLOR_SELECTOR,
  G_DATA_SELECTOR: () => G_DATA_SELECTOR,
  insertCSS: () => insertCSS,
  isCSSInserted: () => isCSSInserted,
  isIdStyleElement: () => isIdStyleElement
});
var AUTO_CLASSED = "autoseisplotjs";
var AUTO_COLOR_SELECTOR = "seisplotjsautocolor";
var G_DATA_SELECTOR = "seisplotjsdata";
function insertCSS(cssText, id2) {
  const head = document.head;
  if (head === null) {
    throw new Error("document.head is null");
  }
  if (id2) {
    for (const c5 of Array.from(head.children)) {
      if (isIdStyleElement(c5, id2)) {
        if (typeof c5.parentNode !== "undefined" && c5.parentNode !== null) {
          c5.parentNode.removeChild(c5);
        }
        break;
      }
    }
  }
  const styleElement = document.createElement("style");
  if (id2) {
    styleElement.id = id2;
  }
  styleElement.type = "text/css";
  styleElement.classList.add(AUTO_CLASSED);
  styleElement.appendChild(document.createTextNode(cssText));
  head.insertBefore(styleElement, head.firstChild);
  return styleElement;
}
function isCSSInserted(id2) {
  const head = document.head;
  if (head === null) {
    throw new Error("document.head is null");
  }
  for (const c5 of Array.from(head.children)) {
    if (isIdStyleElement(c5, id2)) {
      return true;
    }
  }
  return false;
}
function isIdStyleElement(c5, id2) {
  return c5.localName === "style" && c5.id === id2 && c5.classList.contains(AUTO_CLASSED);
}

// src/datalink.ts
var datalink_exports = {};
__export(datalink_exports, {
  DATALINK_PROTOCOL: () => DATALINK_PROTOCOL,
  DEFAULT_ARCH: () => DEFAULT_ARCH,
  DEFAULT_PROGRAM: () => DEFAULT_PROGRAM,
  DataLinkConnection: () => DataLinkConnection,
  DataLinkPacket: () => DataLinkPacket,
  DataLinkResponse: () => DataLinkResponse,
  ENDSTREAM: () => ENDSTREAM,
  ERROR: () => ERROR,
  IRIS_RINGSERVER_URL: () => IRIS_RINGSERVER_URL,
  MAX_PROC_NUM: () => MAX_PROC_NUM,
  MODE: () => MODE,
  MSEED3_TYPE: () => MSEED3_TYPE,
  MSEED_TYPE: () => MSEED_TYPE,
  PACKET: () => PACKET,
  QUERY_MODE: () => QUERY_MODE,
  STREAM: () => STREAM,
  STREAM_MODE: () => STREAM_MODE,
  USER_BROWSER: () => USER_BROWSER,
  dateTimeToHPTime: () => dateTimeToHPTime,
  hpTimeToMoment: () => hpTimeToMoment,
  stringToUint8Array: () => stringToUint8Array
});

// src/miniseed.ts
var miniseed_exports = {};
__export(miniseed_exports, {
  BTime: () => BTime,
  Blockette: () => Blockette,
  Blockette100: () => Blockette100,
  Blockette1000: () => Blockette1000,
  Blockette1001: () => Blockette1001,
  D_TYPECODE: () => D_TYPECODE,
  DataHeader: () => DataHeader,
  DataRecord: () => DataRecord,
  MINISEED_MIME: () => MINISEED_MIME,
  M_TYPECODE: () => M_TYPECODE,
  Q_TYPECODE: () => Q_TYPECODE,
  R_TYPECODE: () => R_TYPECODE,
  areContiguous: () => areContiguous,
  byChannel: () => byChannel,
  checkByteSwap: () => checkByteSwap,
  createSeismogramSegment: () => createSeismogramSegment,
  merge: () => merge2,
  mergeSegments: () => mergeSegments,
  parseBTime: () => parseBTime,
  parseBlockette: () => parseBlockette,
  parseDataRecords: () => parseDataRecords,
  parseSingleDataRecord: () => parseSingleDataRecord,
  parseSingleDataRecordHeader: () => parseSingleDataRecordHeader,
  seismogramPerChannel: () => seismogramPerChannel,
  seismogramSegmentPerChannel: () => seismogramSegmentPerChannel
});

// src/seismogramsegment.ts
var seismogramsegment_exports = {};
__export(seismogramsegment_exports, {
  COUNT_UNIT: () => COUNT_UNIT,
  SeismogramSegment: () => SeismogramSegment
});

// src/seedcodec.ts
var seedcodec_exports = {};
__export(seedcodec_exports, {
  ASCII: () => ASCII,
  CDSN: () => CDSN,
  CodecException: () => CodecException,
  DOUBLE: () => DOUBLE,
  DWWSSN: () => DWWSSN,
  EncodedDataSegment: () => EncodedDataSegment,
  FLOAT: () => FLOAT,
  INT24: () => INT24,
  INTEGER: () => INTEGER,
  SHORT: () => SHORT,
  SRO: () => SRO,
  STEIM1: () => STEIM1,
  STEIM2: () => STEIM2,
  UnsupportedCompressionType: () => UnsupportedCompressionType,
  decodeSteim1: () => decodeSteim1,
  decodeSteim2: () => decodeSteim2,
  decompress: () => decompress,
  isFloatCompression: () => isFloatCompression
});
var ASCII = 0;
var SHORT = 1;
var INT24 = 2;
var INTEGER = 3;
var FLOAT = 4;
var DOUBLE = 5;
var STEIM1 = 10;
var STEIM2 = 11;
var CDSN = 16;
var SRO = 30;
var DWWSSN = 32;
var CodecException = class extends Error {
  constructor(message) {
    super(message);
    this.message = message;
    this.name = "CodecException";
  }
};
var UnsupportedCompressionType = class extends Error {
  constructor(message) {
    super(message);
    this.message = message;
    this.name = "UnsupportedCompressionType";
  }
};
function isFloatCompression(compressionType) {
  if (compressionType === FLOAT || compressionType === DOUBLE) {
    return true;
  }
  return false;
}
var EncodedDataSegment = class {
  constructor(compressionType, dataView, numSamples, littleEndian) {
    __publicField(this, "compressionType");
    __publicField(this, "dataView");
    __publicField(this, "numSamples");
    __publicField(this, "littleEndian");
    this.compressionType = compressionType;
    this.dataView = dataView;
    this.numSamples = numSamples;
    this.littleEndian = littleEndian;
  }
  isFloatCompression() {
    return isFloatCompression(this.compressionType);
  }
  decode() {
    return decompress(
      this.compressionType,
      this.dataView,
      this.numSamples,
      this.littleEndian
    );
  }
};
function decompress(compressionType, dataView, numSamples, littleEndian) {
  if (numSamples === 0) {
    return new Int32Array(0);
  }
  let out;
  let offset2 = 0;
  let i;
  switch (compressionType) {
    case SHORT:
    case DWWSSN:
      if (dataView.byteLength < 2 * numSamples) {
        throw new CodecException(
          "Not enough bytes for " + numSamples + " 16 bit data points, only " + dataView.byteLength + " bytes."
        );
      }
      out = new Int32Array(numSamples);
      for (i = 0; i < numSamples; i++) {
        out[i] = dataView.getInt16(offset2, littleEndian);
        offset2 += 2;
      }
      break;
    case INTEGER:
      if (dataView.byteLength < 4 * numSamples) {
        throw new CodecException(
          "Not enough bytes for " + numSamples + " 32 bit data points, only " + dataView.byteLength + " bytes."
        );
      }
      out = new Int32Array(numSamples);
      for (i = 0; i < numSamples; i++) {
        out[i] = dataView.getInt32(offset2, littleEndian);
        offset2 += 4;
      }
      break;
    case FLOAT:
      if (dataView.byteLength < 4 * numSamples) {
        throw new CodecException(
          "Not enough bytes for " + numSamples + " 32 bit data points, only " + dataView.byteLength + " bytes."
        );
      }
      out = new Float32Array(numSamples);
      for (i = 0; i < numSamples; i++) {
        out[i] = dataView.getFloat32(offset2, littleEndian);
        offset2 += 4;
      }
      break;
    case DOUBLE:
      if (dataView.byteLength < 8 * numSamples) {
        throw new CodecException(
          "Not enough bytes for " + numSamples + " 64 bit data points, only " + dataView.byteLength + " bytes."
        );
      }
      out = new Float64Array(numSamples);
      for (i = 0; i < numSamples; i++) {
        out[i] = dataView.getFloat64(offset2, littleEndian);
        offset2 += 8;
      }
      break;
    case STEIM1:
      out = decodeSteim1(dataView, numSamples, littleEndian, 0);
      break;
    case STEIM2:
      out = decodeSteim2(dataView, numSamples, littleEndian, 0);
      break;
    default:
      throw new UnsupportedCompressionType(
        "Type " + compressionType + " is not supported at this time."
      );
  }
  return out;
}
function decodeSteim1(dataView, numSamples, littleEndian, bias) {
  if (dataView.byteLength % 64 !== 0) {
    throw new CodecException(
      "encoded data length is not multiple of 64 bytes (" + dataView.byteLength + ")"
    );
  }
  const buf = new ArrayBuffer(4 * numSamples);
  const samples = new Int32Array(buf);
  let tempSamples;
  const numFrames = dataView.byteLength / 64;
  let current = 0;
  let start2 = 0;
  let firstData = 0;
  let lastValue = 0;
  let i, j;
  for (i = 0; i < numFrames; i++) {
    tempSamples = extractSteim1Samples(dataView, i * 64, littleEndian);
    firstData = 0;
    if (i === 0) {
      lastValue = bias;
      start2 = tempSamples[1];
      firstData = 3;
      if (bias === 0)
        lastValue = start2 - tempSamples[3];
    }
    for (j = firstData; j < tempSamples.length && current < numSamples; j++) {
      samples[current] = lastValue + tempSamples[j];
      lastValue = samples[current];
      current++;
    }
  }
  if (current !== numSamples) {
    throw new CodecException(
      "Number of samples decompressed doesn't match number in header: " + current + " !== " + numSamples
    );
  }
  return samples;
}
function extractSteim1Samples(dataView, offset2, littleEndian) {
  const nibbles = dataView.getInt32(offset2, littleEndian);
  let currNibble = 0;
  const temp = [];
  let currNum = 0;
  let i, n2;
  for (i = 0; i < 16; i++) {
    currNibble = nibbles >> 30 - i * 2 & 3;
    switch (currNibble) {
      case 0:
        if (offset2 === 0) {
          temp[currNum++] = dataView.getInt32(offset2 + i * 4, littleEndian);
        }
        break;
      case 1:
        for (n2 = 0; n2 < 4; n2++) {
          temp[currNum] = dataView.getInt8(offset2 + i * 4 + n2);
          currNum++;
        }
        break;
      case 2:
        for (n2 = 0; n2 < 4; n2 += 2) {
          temp[currNum] = dataView.getInt16(offset2 + i * 4 + n2, littleEndian);
          currNum++;
        }
        break;
      case 3:
        temp[currNum++] = dataView.getInt32(offset2 + i * 4, littleEndian);
        break;
      default:
        throw new CodecException("unreachable case: " + currNibble);
    }
  }
  return temp;
}
function decodeSteim2(dataView, numSamples, swapBytes, bias) {
  if (dataView.byteLength % 64 !== 0) {
    throw new CodecException(
      "encoded data length is not multiple of 64 bytes (" + dataView.byteLength + ")"
    );
  }
  const buf = new ArrayBuffer(4 * numSamples);
  const samples = new Int32Array(buf);
  let tempSamples;
  const numFrames = dataView.byteLength / 64;
  let current = 0;
  let start2 = 0;
  let firstData = 0;
  let lastValue = 0;
  for (let i = 0; i < numFrames; i++) {
    tempSamples = extractSteim2Samples(dataView, i * 64, swapBytes);
    firstData = 0;
    if (i === 0) {
      lastValue = bias;
      start2 = tempSamples[1];
      firstData = 3;
      if (bias === 0)
        lastValue = start2 - tempSamples[3];
    }
    for (let j = firstData; j < tempSamples.length && current < numSamples; j++) {
      samples[current] = lastValue + tempSamples[j];
      lastValue = samples[current];
      current++;
    }
  }
  if (current !== numSamples) {
    throw new CodecException(
      "Number of samples decompressed doesn't match number in header: " + current + " !== " + numSamples
    );
  }
  return samples;
}
function extractSteim2Samples(dataView, offset2, swapBytes) {
  const nibbles = dataView.getUint32(offset2, swapBytes);
  let currNibble = 0;
  let dnib = 0;
  const temp = new Int32Array(106);
  let tempInt;
  let currNum = 0;
  let diffCount = 0;
  let bitSize = 0;
  let headerSize = 0;
  for (let i = 0; i < 16; i++) {
    currNibble = nibbles >> 30 - i * 2 & 3;
    switch (currNibble) {
      case 0:
        if (offset2 === 0) {
          temp[currNum++] = dataView.getInt32(offset2 + i * 4, swapBytes);
        }
        break;
      case 1:
        temp[currNum++] = dataView.getInt8(offset2 + i * 4);
        temp[currNum++] = dataView.getInt8(offset2 + i * 4 + 1);
        temp[currNum++] = dataView.getInt8(offset2 + i * 4 + 2);
        temp[currNum++] = dataView.getInt8(offset2 + i * 4 + 3);
        break;
      case 2:
        tempInt = dataView.getUint32(offset2 + i * 4, swapBytes);
        dnib = tempInt >> 30 & 3;
        switch (dnib) {
          case 1:
            temp[currNum++] = tempInt << 2 >> 2;
            break;
          case 2:
            temp[currNum++] = tempInt << 2 >> 17;
            temp[currNum++] = tempInt << 17 >> 17;
            break;
          case 3:
            temp[currNum++] = tempInt << 2 >> 22;
            temp[currNum++] = tempInt << 12 >> 22;
            temp[currNum++] = tempInt << 22 >> 22;
            break;
          default:
            throw new CodecException(
              `Unknown case currNibble=${currNibble} dnib=${dnib} for chunk ${i} offset ${offset2}, nibbles: ${nibbles}`
            );
        }
        break;
      case 3:
        tempInt = dataView.getUint32(offset2 + i * 4, swapBytes);
        dnib = tempInt >> 30 & 3;
        diffCount = 0;
        bitSize = 0;
        headerSize = 0;
        switch (dnib) {
          case 0:
            headerSize = 2;
            diffCount = 5;
            bitSize = 6;
            break;
          case 1:
            headerSize = 2;
            diffCount = 6;
            bitSize = 5;
            break;
          case 2:
            headerSize = 4;
            diffCount = 7;
            bitSize = 4;
            break;
          default:
            throw new CodecException(
              `Unknown case currNibble=${currNibble} dnib=${dnib} for chunk ${i} offset ${offset2}, nibbles: ${nibbles}`
            );
        }
        if (diffCount > 0) {
          for (let d = 0; d < diffCount; d++) {
            temp[currNum++] = tempInt << headerSize + d * bitSize >> (diffCount - 1) * bitSize + headerSize;
          }
        }
        break;
      default:
        throw new CodecException(`Unknown case currNibble=${currNibble}`);
    }
  }
  return temp.slice(0, currNum);
}

// src/fdsnsourceid.ts
var fdsnsourceid_exports = {};
__export(fdsnsourceid_exports, {
  EMPTY_LOC_CODE: () => EMPTY_LOC_CODE,
  FDSNSourceId: () => FDSNSourceId,
  FDSN_PREFIX: () => FDSN_PREFIX,
  LocationSourceId: () => LocationSourceId,
  NetworkSourceId: () => NetworkSourceId,
  NslcId: () => NslcId,
  SEP: () => SEP,
  StationSourceId: () => StationSourceId,
  bandCodeForRate: () => bandCodeForRate,
  parseSourceId: () => parseSourceId
});
var FDSN_PREFIX = "FDSN:";
var SEP = "_";
var FDSNSourceId = class {
  constructor(networkCode, stationCode, locationCode, bandCode, sourceCode, subsourceCode) {
    __publicField(this, "networkCode");
    __publicField(this, "stationCode");
    __publicField(this, "locationCode");
    __publicField(this, "bandCode");
    __publicField(this, "sourceCode");
    __publicField(this, "subsourceCode");
    this.networkCode = networkCode;
    this.stationCode = stationCode;
    this.locationCode = locationCode;
    this.bandCode = bandCode;
    this.sourceCode = sourceCode;
    this.subsourceCode = subsourceCode;
  }
  static createUnknown(sampRate) {
    return FDSNSourceId.fromNslc("XX", "ABC", "", bandCodeForRate(sampRate) + "YX");
  }
  static parse(id2) {
    if (!id2.startsWith(FDSN_PREFIX)) {
      throw new Error(`sourceid must start with ${FDSN_PREFIX}: ${id2}`);
    }
    const items = id2.slice(FDSN_PREFIX.length).split(SEP);
    if (items.length === 6) {
      return new FDSNSourceId(items[0], items[1], items[2], items[3], items[4], items[5]);
    } else {
      throw new Error(`FDSN sourceid must have 6 items for channel; separated by '${SEP}': ${id2}`);
    }
  }
  static fromNslc(net, sta, loc, channelCode) {
    let band2;
    let source;
    let subsource;
    if (channelCode.length === 3) {
      band2 = channelCode.charAt(0);
      source = channelCode.charAt(1);
      subsource = channelCode.charAt(2);
    } else {
      const b_s_ss = /(\w)_(\w+)_(\w+)/;
      const match2 = b_s_ss.exec(channelCode);
      if (match2) {
        band2 = match2[1];
        source = match2[2];
        subsource = match2[3];
      } else {
        throw new Error(`channel code must be length 3 or have 3 items separated by '${SEP}': ${channelCode}`);
      }
    }
    return new FDSNSourceId(net, sta, loc, band2, source, subsource);
  }
  static parseNslc(nslc, sep = ".") {
    const items = nslc.split(sep);
    if (items.length < 4) {
      throw new Error(`channel nslc must have 4 items separated by '${sep}': ${nslc}`);
    }
    return FDSNSourceId.fromNslc(items[0], items[1], items[2], items[3]);
  }
  stationSourceId() {
    return new StationSourceId(this.networkCode, this.stationCode);
  }
  networkSourceId() {
    return new NetworkSourceId(this.networkCode);
  }
  asNslc() {
    let chanCode;
    if (this.bandCode.length === 1 && this.sourceCode.length === 1 && this.subsourceCode.length === 1) {
      chanCode = `${this.bandCode}${this.sourceCode}${this.subsourceCode}`;
    } else {
      chanCode = `${this.bandCode}${SEP}${this.sourceCode}${SEP}${this.subsourceCode}`;
    }
    return new NslcId(this.networkCode, this.stationCode, this.locationCode, chanCode);
  }
  toString() {
    return `${FDSN_PREFIX}${this.networkCode}${SEP}${this.stationCode}${SEP}${this.locationCode}${SEP}${this.bandCode}${SEP}${this.sourceCode}${SEP}${this.subsourceCode}`;
  }
  equals(other) {
    if (!other) {
      return false;
    }
    return this.toString() === other.toString();
  }
};
var NetworkSourceId = class {
  constructor(networkCode) {
    __publicField(this, "networkCode");
    this.networkCode = networkCode;
  }
  static parse(id2) {
    if (!id2.startsWith(FDSN_PREFIX)) {
      throw new Error(`sourceid must start with ${FDSN_PREFIX}: ${id2}`);
    }
    const items = id2.slice(FDSN_PREFIX.length).split(SEP);
    if (items.length === 1) {
      return new NetworkSourceId(items[0]);
    } else {
      throw new Error(`FDSN network sourceid must have 1 items; separated by '${SEP}': ${id2}`);
    }
    return new NetworkSourceId(items[0]);
  }
  toString() {
    return `${FDSN_PREFIX}${this.networkCode}`;
  }
  equals(other) {
    return this.toString() === other.toString();
  }
};
var StationSourceId = class {
  constructor(networkCode, stationCode) {
    __publicField(this, "networkCode");
    __publicField(this, "stationCode");
    this.networkCode = networkCode;
    this.stationCode = stationCode;
  }
  static parse(id2) {
    if (!id2.startsWith(FDSN_PREFIX)) {
      throw new Error(`station sourceid must start with ${FDSN_PREFIX}: ${id2}`);
    }
    const items = id2.slice(FDSN_PREFIX.length).split(SEP);
    if (items.length === 2) {
      return new StationSourceId(items[0], items[1]);
    } else {
      throw new Error(`FDSN station sourceid must have 2 items; separated by '${SEP}': ${id2}`);
    }
    return new StationSourceId(items[0], items[1]);
  }
  toString() {
    return `${FDSN_PREFIX}${this.networkCode}${SEP}${this.stationCode}`;
  }
  networkSourceId() {
    return new NetworkSourceId(this.networkCode);
  }
  equals(other) {
    return this.toString() === other.toString();
  }
};
var LocationSourceId = class {
  constructor(networkCode, stationCode, locationCode) {
    __publicField(this, "networkCode");
    __publicField(this, "stationCode");
    __publicField(this, "locationCode");
    this.networkCode = networkCode;
    this.stationCode = stationCode;
    this.locationCode = locationCode;
  }
  toString() {
    return `${FDSN_PREFIX}${this.networkCode}${SEP}${this.stationCode}${SEP}${this.locationCode}`;
  }
  equals(other) {
    return this.toString() === other.toString();
  }
};
function bandCodeForRate(sampRate, resp_lb) {
  if (!sampRate) {
    return "I";
  }
  if (sampRate >= 5e3) {
    return "J";
  } else if (sampRate >= 1e3 && sampRate < 5e3) {
    if (resp_lb && resp_lb < 0.1) {
      return "F";
    }
    return "G";
  } else if (sampRate >= 250 && sampRate < 1e3) {
    if (resp_lb && resp_lb < 0.1) {
      return "C";
    }
    return "D";
  } else if (sampRate >= 80 && sampRate < 250) {
    if (resp_lb && resp_lb < 0.1) {
      return "H";
    }
    return "E";
  } else if (sampRate >= 10 && sampRate < 80) {
    if (resp_lb && resp_lb < 0.1) {
      return "B";
    }
    return "S";
  } else if (sampRate > 1 && sampRate < 10) {
    return "M";
  } else if (sampRate > 0.5 && sampRate < 1.5) {
    return "L";
  } else if (sampRate >= 0.1 && sampRate < 1) {
    return "V";
  } else if (sampRate >= 0.01 && sampRate < 0.1) {
    return "U";
  } else if (sampRate >= 1e-3 && sampRate < 0.01) {
    return "W";
  } else if (sampRate >= 1e-4 && sampRate < 1e-3) {
    return "R";
  } else if (sampRate >= 1e-5 && sampRate < 1e-4) {
    return "P";
  } else if (sampRate >= 1e-6 && sampRate < 1e-5) {
    return "T";
  } else if (sampRate < 1e-6) {
    return "Q";
  } else {
    throw new Error(`Unable to calc band code for: ${sampRate} ${resp_lb}`);
  }
}
var EMPTY_LOC_CODE = "--";
var NslcId = class {
  constructor(net, sta, loc, chan) {
    __publicField(this, "networkCode");
    __publicField(this, "stationCode");
    __publicField(this, "locationCode");
    __publicField(this, "channelCode");
    this.networkCode = net;
    this.stationCode = sta;
    this.locationCode = loc;
    this.channelCode = chan;
  }
  static parse(nslc, sep = ".") {
    const items = nslc.split(SEP);
    if (items.length !== 4) {
      throw new Error(`NSLC id must have 4 items; separated by '${sep}': ${nslc}`);
    }
    return new NslcId(items[0], items[1], items[2], items[3]);
  }
  toString() {
    return `${this.networkCode}_${this.stationCode}_${this.locationCode}_${this.channelCode}`;
  }
  equals(other) {
    if (this.networkCode !== other.networkCode) {
      return false;
    }
    if (this.stationCode !== other.stationCode) {
      return false;
    }
    let myLoc = this.locationCode === EMPTY_LOC_CODE ? "" : this.locationCode;
    let otherLoc = other.locationCode === EMPTY_LOC_CODE ? "" : other.locationCode;
    if (myLoc !== otherLoc) {
      return false;
    }
    if (this.channelCode !== other.channelCode) {
      return false;
    }
    return true;
  }
};
function parseSourceId(id2) {
  if (!id2.startsWith(FDSN_PREFIX)) {
    throw new Error(`sourceid must start with ${FDSN_PREFIX}: ${id2}`);
  }
  const items = id2.slice(FDSN_PREFIX.length).split(SEP);
  if (items.length === 1) {
    return new NetworkSourceId(items[0]);
  } else if (items.length === 2) {
    return new StationSourceId(items[0], items[1]);
  } else if (items.length !== 6) {
    throw new Error(`FDSN sourceid must have 6 items for channel, 2 for station or 1 for network; separated by '${SEP}': ${id2}`);
  }
  return new FDSNSourceId(items[0], items[1], items[2], items[3], items[4], items[5]);
}

// src/seismogramsegment.ts
var COUNT_UNIT = "count";
var SeismogramSegment = class {
  constructor(yArray, sampleRate, startTime) {
    __publicField(this, "_y");
    __publicField(this, "_compressed");
    __publicField(this, "_sampleRate");
    __publicField(this, "_startTime");
    __publicField(this, "_endTime_cache");
    __publicField(this, "_endTime_cache_numPoints");
    __publicField(this, "_sourceId", null);
    __publicField(this, "networkCode", null);
    __publicField(this, "stationCode", null);
    __publicField(this, "locationCode", null);
    __publicField(this, "channelCode", null);
    __publicField(this, "yUnit");
    __publicField(this, "_highlow");
    if (yArray instanceof Int32Array || yArray instanceof Float32Array || yArray instanceof Float64Array) {
      this._y = yArray;
      this._compressed = null;
    } else if (Array.isArray(yArray) && yArray.every((ee) => ee instanceof EncodedDataSegment)) {
      this._compressed = yArray;
      this._y = null;
    } else if (Array.isArray(yArray) && yArray.every((ee) => typeof ee === "number")) {
      this._y = Float64Array.from(yArray);
      this._compressed = null;
    } else {
      this._compressed = null;
      this._y = null;
    }
    if (sampleRate <= 0) {
      throw new Error(`SampleRate must be positive number: ${sampleRate}`);
    }
    this._sampleRate = sampleRate;
    this._startTime = checkStringOrDate(startTime);
    this.yUnit = COUNT_UNIT;
    this._endTime_cache = null;
    this._endTime_cache_numPoints = 0;
  }
  get y() {
    let out;
    if (this._y) {
      out = this._y;
    } else {
      if (!this.isEncoded()) {
        throw new Error("Seismogram not y as TypedArray or encoded.");
      }
      const outLen = this.numPoints;
      if (this._compressed === null) {
        throw new Error("Seismogram not y as TypedArray or encoded.");
      }
      if (this._compressed[0].compressionType === DOUBLE) {
        out = new Float64Array(outLen);
      } else if (this._compressed[0].compressionType === FLOAT) {
        out = new Float32Array(outLen);
      } else {
        out = new Int32Array(outLen);
      }
      let currIdx = 0;
      for (const c5 of this._compressed) {
        const cData = c5.decode();
        for (let i = 0; i < c5.numSamples; i++) {
          out[currIdx + i] = cData[i];
        }
        currIdx += c5.numSamples;
      }
      this._y = out;
      this._compressed = null;
    }
    return out;
  }
  set y(value) {
    this._y = value;
    this._invalidate_endTime_cache();
  }
  get start() {
    return this.startTime;
  }
  set start(value) {
    this.startTime = value;
  }
  get startTime() {
    return this._startTime;
  }
  set startTime(value) {
    this._startTime = checkStringOrDate(value);
    this._invalidate_endTime_cache();
  }
  get end() {
    return this.endTime;
  }
  get endTime() {
    if (!this._endTime_cache || this._endTime_cache_numPoints !== this.numPoints) {
      this._endTime_cache_numPoints = this.numPoints;
      this._endTime_cache = this.timeOfSample(
        this._endTime_cache_numPoints - 1
      );
    }
    return this._endTime_cache;
  }
  get timeWindow() {
    return this.timeRange;
  }
  get timeRange() {
    return Interval.fromDateTimes(this.startTime, this.endTime);
  }
  get sampleRate() {
    return this._sampleRate;
  }
  set sampleRate(value) {
    this._sampleRate = value;
    this._invalidate_endTime_cache();
  }
  get samplePeriod() {
    return 1 / this.sampleRate;
  }
  get numPoints() {
    let out = 0;
    if (this._y) {
      out = this._y.length;
    } else if (this._compressed) {
      for (const c5 of this._compressed) {
        out += c5.numSamples;
      }
    }
    return out;
  }
  get netCode() {
    return this.networkCode;
  }
  get staCode() {
    return this.stationCode;
  }
  get locId() {
    return this.locationCode;
  }
  get locCode() {
    return this.locationCode;
  }
  get chanCode() {
    return this.channelCode;
  }
  isEncoded() {
    if (this._y && this._y.length > 0) {
      return false;
    } else if (this._compressed && this._compressed.length > 0) {
      return true;
    } else {
      return false;
    }
  }
  getEncoded() {
    if (this.isEncoded()) {
      return this._compressed;
    } else {
      throw new Error("Data is not encoded.");
    }
  }
  yAtIndex(i) {
    if (i >= 0) {
      return this.y[i];
    } else {
      return this.y[this.numPoints + i];
    }
  }
  findMinMax(minMaxAccumulator) {
    let minAmp = Number.MAX_SAFE_INTEGER;
    let maxAmp = -1 * minAmp;
    if (minMaxAccumulator) {
      minAmp = minMaxAccumulator[0];
      maxAmp = minMaxAccumulator[1];
    }
    const yData = this.y;
    for (let n2 = 0; n2 < yData.length; n2++) {
      if (minAmp > yData[n2]) {
        minAmp = yData[n2];
      }
      if (maxAmp < yData[n2]) {
        maxAmp = yData[n2];
      }
    }
    return [minAmp, maxAmp];
  }
  timeOfSample(i) {
    if (i >= 0) {
      return this.startTime.plus(Duration.fromMillis(1e3 * i / this.sampleRate));
    } else {
      return this.startTime.plus(Duration.fromMillis(1e3 * (this.numPoints + i) / this.sampleRate));
    }
  }
  indexOfTime(t) {
    if (t < this.startTime || t > this.endTime.plus(Duration.fromMillis(1e3 / this.sampleRate))) {
      return -1;
    }
    return Math.round(t.diff(this.startTime).toMillis() * this.sampleRate / 1e3);
  }
  hasCodes() {
    return isDef(this.networkCode) || isDef(this.stationCode) || isDef(this.locationCode) || isDef(this.channelCode);
  }
  get nslc() {
    return this.codes();
  }
  get nslcId() {
    return new NslcId(
      this.networkCode ? this.networkCode : "",
      this.stationCode ? this.stationCode : "",
      this.locationCode && this.locationCode !== "--" ? this.locationCode : "",
      this.channelCode ? this.channelCode : ""
    );
  }
  codes(sep = ".") {
    return (this.networkCode ? this.networkCode : "") + sep + (this.stationCode ? this.stationCode : "") + sep + (this.locationCode ? this.locationCode : "") + sep + (this.channelCode ? this.channelCode : "");
  }
  seisId() {
    return (this.codes() + "_" + this.startTime.toISO() + "_" + this.endTime.toISO()).replace(/\./g, "_").replace(/:/g, "");
  }
  get sourceId() {
    if (isDef(this._sourceId)) {
      return this._sourceId;
    } else {
      if (!this.channelCode || this.channelCode.length === 0) {
        return null;
      }
      return FDSNSourceId.fromNslc(
        this.networkCode ? this.networkCode : "",
        this.stationCode ? this.stationCode : "",
        this.locationCode ? this.locationCode : "",
        this.channelCode
      );
    }
  }
  clone() {
    let out;
    if (isDef(this._y)) {
      out = this.cloneWithNewData(this._y.slice());
    } else if (this.isEncoded()) {
      out = this.cloneWithNewData(Array.from(this.getEncoded()));
    } else {
      throw new Error("no _y and no _compressed");
    }
    return out;
  }
  cloneWithNewData(clonedData, clonedStartTime = this._startTime) {
    const out = new SeismogramSegment(
      clonedData,
      this.sampleRate,
      clonedStartTime
    );
    out.networkCode = this.networkCode;
    out.stationCode = this.stationCode;
    out.locationCode = this.locationCode;
    out.channelCode = this.channelCode;
    out.yUnit = this.yUnit;
    return out;
  }
  cut(timeRange) {
    if (timeRange.end < this._startTime || timeRange.start > this.endTime) {
      return null;
    }
    let sIndex = 0;
    if (timeRange.start > this._startTime) {
      const milliDiff = timeRange.start.diff(this._startTime).toMillis();
      const offset2 = milliDiff * this.sampleRate / 1e3;
      sIndex = Math.floor(offset2);
    }
    let eIndex = this.y.length;
    if (timeRange.end < this.endTime) {
      const milliDiff = this.endTime.diff(timeRange.end).toMillis();
      const offset2 = milliDiff * this.sampleRate / 1e3;
      eIndex = this.y.length - Math.floor(offset2);
    }
    const cutY = this.y.slice(sIndex, eIndex);
    const out = this.cloneWithNewData(
      cutY,
      this._startTime.plus(Duration.fromMillis(1e3 * sIndex / this.sampleRate))
    );
    return out;
  }
  _invalidate_endTime_cache() {
    this._endTime_cache = null;
    this._endTime_cache_numPoints = 0;
  }
};

// src/seismogram.ts
var seismogram_exports = {};
__export(seismogram_exports, {
  COUNT_UNIT: () => COUNT_UNIT2,
  NonContiguousData: () => NonContiguousData,
  Seismogram: () => Seismogram,
  SeismogramDisplayData: () => SeismogramDisplayData,
  SeismogramDisplayStats: () => SeismogramDisplayStats,
  ensureIsSeismogram: () => ensureIsSeismogram,
  findMaxDuration: () => findMaxDuration,
  findMaxDurationOfType: () => findMaxDurationOfType,
  findMinMax: () => findMinMax,
  findMinMaxOfSDD: () => findMinMaxOfSDD,
  findMinMaxOfSeismograms: () => findMinMaxOfSeismograms,
  findMinMaxOverRelativeTimeRange: () => findMinMaxOverRelativeTimeRange,
  findMinMaxOverTimeRange: () => findMinMaxOverTimeRange,
  findStartEnd: () => findStartEnd,
  findStartEndOfSeismograms: () => findStartEndOfSeismograms,
  uniqueChannels: () => uniqueChannels,
  uniqueQuakes: () => uniqueQuakes,
  uniqueStations: () => uniqueStations
});

// src/distaz.ts
var distaz_exports = {};
__export(distaz_exports, {
  DistAzOutput: () => DistAzOutput,
  degtokm: () => degtokm,
  distaz: () => distaz,
  kmPerDeg: () => kmPerDeg,
  kmtodeg: () => kmtodeg
});
var kmPerDeg = 111.19;
function degtokm(deg) {
  return deg * kmPerDeg;
}
function kmtodeg(km) {
  return km / kmPerDeg;
}
var DistAzOutput = class {
  constructor(delta, az, baz) {
    __publicField(this, "delta");
    __publicField(this, "az");
    __publicField(this, "baz");
    __publicField(this, "stalat");
    __publicField(this, "stalon");
    __publicField(this, "evtlat");
    __publicField(this, "evtlon");
    this.delta = delta ? delta : 0;
    this.az = az ? az : 0;
    this.baz = baz ? baz : 0;
  }
  get distance() {
    return this.delta;
  }
  get distanceKm() {
    return degtokm(this.delta);
  }
  get distanceDeg() {
    return this.delta;
  }
  get azimuth() {
    return this.az;
  }
  get backazimuth() {
    return this.baz;
  }
};
function distaz(lat1, lon1, lat2, lon2) {
  if (lat1 === lat2 && lon1 === lon2) {
    const result2 = new DistAzOutput(0, 0, 0);
    result2.stalat = lat1;
    result2.stalon = lon1;
    result2.evtlat = lat2;
    result2.evtlon = lon2;
    return result2;
  }
  const rad = 2 * Math.PI / 360;
  const sph = 1 / 298.257;
  const scolat = Math.PI / 2 - Math.atan((1 - sph) * (1 - sph) * Math.tan(lat1 * rad));
  const ecolat = Math.PI / 2 - Math.atan((1 - sph) * (1 - sph) * Math.tan(lat2 * rad));
  const slon = lon1 * rad;
  const elon = lon2 * rad;
  const a3 = Math.sin(scolat) * Math.cos(slon);
  const b = Math.sin(scolat) * Math.sin(slon);
  const c5 = Math.cos(scolat);
  const d = Math.sin(slon);
  const e = -Math.cos(slon);
  const g = -c5 * e;
  const h = c5 * d;
  const k2 = -Math.sin(scolat);
  const aa = Math.sin(ecolat) * Math.cos(elon);
  const bb = Math.sin(ecolat) * Math.sin(elon);
  const cc = Math.cos(ecolat);
  const dd = Math.sin(elon);
  const ee = -Math.cos(elon);
  const gg = -cc * ee;
  const hh = cc * dd;
  const kk = -Math.sin(ecolat);
  const del = Math.acos(a3 * aa + b * bb + c5 * cc);
  const result_delta = del / rad;
  const baz_rhs1 = (aa - d) * (aa - d) + (bb - e) * (bb - e) + cc * cc - 2;
  const baz_rhs2 = (aa - g) * (aa - g) + (bb - h) * (bb - h) + (cc - k2) * (cc - k2) - 2;
  let dbaz = Math.atan2(baz_rhs1, baz_rhs2);
  if (dbaz < 0) {
    dbaz = dbaz + 2 * Math.PI;
  }
  let result_baz = dbaz / rad;
  const daz_rhs1 = (a3 - dd) * (a3 - dd) + (b - ee) * (b - ee) + c5 * c5 - 2;
  const daz_rhs2 = (a3 - gg) * (a3 - gg) + (b - hh) * (b - hh) + (c5 - kk) * (c5 - kk) - 2;
  let daz = Math.atan2(daz_rhs1, daz_rhs2);
  if (daz < 0) {
    daz = daz + 2 * Math.PI;
  }
  let result_az = daz / rad;
  if (Math.abs(result_baz - 360) < 1e-5)
    result_baz = 0;
  if (Math.abs(result_az - 360) < 1e-5)
    result_az = 0;
  const result = new DistAzOutput(result_delta, result_az, result_baz);
  result.stalat = lat1;
  result.stalon = lon1;
  result.evtlat = lat2;
  result.evtlon = lon2;
  return result;
}

// src/stationxml.ts
var stationxml_exports = {};
__export(stationxml_exports, {
  AbstractFilterType: () => AbstractFilterType,
  COUNT_UNIT_NAME: () => COUNT_UNIT_NAME,
  Channel: () => Channel,
  CoefficientsFilter: () => CoefficientsFilter,
  Decimation: () => Decimation,
  Equipment: () => Equipment,
  FAKE_START_DATE: () => FAKE_START_DATE,
  FIR: () => FIR,
  FIX_INVALID_STAXML: () => FIX_INVALID_STAXML,
  Gain: () => Gain,
  INVALID_NUMBER: () => INVALID_NUMBER,
  InstrumentSensitivity: () => InstrumentSensitivity,
  Network: () => Network,
  PolesZeros: () => PolesZeros,
  Response: () => Response2,
  STAML_NS: () => STAML_NS,
  Stage: () => Stage,
  Station: () => Station,
  allChannels: () => allChannels,
  allStations: () => allStations,
  convertToChannel: () => convertToChannel,
  convertToDecimation: () => convertToDecimation,
  convertToEquipment: () => convertToEquipment,
  convertToGain: () => convertToGain,
  convertToInstrumentSensitivity: () => convertToInstrumentSensitivity,
  convertToNetwork: () => convertToNetwork,
  convertToResponse: () => convertToResponse,
  convertToStage: () => convertToStage,
  convertToStation: () => convertToStation,
  createInterval: () => createInterval,
  extractComplex: () => extractComplex,
  findChannels: () => findChannels,
  parseStationXml: () => parseStationXml,
  parseUtil: () => parseUtil
});

// src/oregondsputil.ts
var oregondsputil_exports = {};
__export(oregondsputil_exports, {
  Allpass: () => Allpass,
  AnalogPrototype: () => AnalogPrototype,
  BANDPASS: () => BANDPASS,
  Butterworth: () => Butterworth,
  CDFT: () => CDFT,
  CenteredDifferentiator: () => CenteredDifferentiator,
  CenteredHilbertTransform: () => CenteredHilbertTransform,
  ChebyshevI: () => ChebyshevI,
  ChebyshevII: () => ChebyshevII,
  Complex: () => Complex,
  ComplexAnalyticSignal: () => ComplexAnalyticSignal,
  EquirippleBandpass: () => EquirippleBandpass,
  EquirippleFIRFilter: () => EquirippleFIRFilter,
  EquirippleHalfBand: () => EquirippleHalfBand,
  EquirippleHighpass: () => EquirippleHighpass,
  EquirippleLowpass: () => EquirippleLowpass,
  FIRTypeI: () => FIRTypeI,
  FIRTypeII: () => FIRTypeII,
  FIRTypeIII: () => FIRTypeIII,
  HIGHPASS: () => HIGHPASS,
  HammingWindow: () => HammingWindow,
  HanningWindow: () => HanningWindow,
  IIRFilter: () => IIRFilter,
  Interpolator: () => Interpolator,
  LOWPASS: () => LOWPASS,
  LagrangePolynomial: () => LagrangePolynomial,
  OregonDSP: () => OregonDSP,
  OverlapAdd: () => OverlapAdd,
  PassbandType: () => PassbandType,
  Polynomial: () => Polynomial,
  RDFT: () => RDFT,
  Rational: () => Rational,
  Sequence: () => Sequence,
  StaggeredDifferentiator: () => StaggeredDifferentiator,
  StaggeredHilbertTranform: () => StaggeredHilbertTranform,
  ThiranAllpass: () => ThiranAllpass,
  Window: () => Window,
  complexFromPolar: () => complexFromPolar,
  createComplex: () => createComplex
});
var OregonDSPTop = __toESM(require_oregondsp(), 1);
var OregonDSP = OregonDSPTop.com.oregondsp.signalProcessing;
var fft = OregonDSP.fft;
var equiripple = OregonDSP.filter.fir.equiripple;
var fir = OregonDSP.filter.fir;
var iir = OregonDSP.filter.iir;
var CDFT = fft.CDFT;
var RDFT = fft.RDFT;
var CenteredDifferentiator = equiripple.CenteredDifferentiator;
var CenteredHilbertTransform = equiripple.CenteredHilbertTransform;
var EquirippleBandpass = equiripple.EquirippleBandpass;
var EquirippleFIRFilter = equiripple.EquirippleFIRFilter;
var EquirippleHalfBand = equiripple.EquirippleHalfBand;
var EquirippleHighpass = equiripple.EquirippleHighpass;
var EquirippleLowpass = equiripple.EquirippleLowpass;
var FIRTypeI = equiripple.FIRTypeI;
var FIRTypeII = equiripple.FIRTypeII;
var FIRTypeIII = equiripple.FIRTypeIII;
var StaggeredDifferentiator = equiripple.StaggeredDifferentiator;
var StaggeredHilbertTranform = equiripple.StaggeredHilbertTranform;
var ComplexAnalyticSignal = fir.ComplexAnalyticSignal;
var Interpolator = fir.Interpolator;
var OverlapAdd = fir.OverlapAdd;
var Allpass = iir.Allpass;
var AnalogPrototype = iir.AnalogPrototype;
var Butterworth = iir.Butterworth;
var ChebyshevI = iir.ChebyshevI;
var ChebyshevII = iir.ChebyshevII;
var Complex = iir.Complex;
var IIRFilter = iir.IIRFilter;
var PassbandType = iir.PassbandType;
var ThiranAllpass = iir.ThiranAllpass;
var LOWPASS = iir.PassbandType.LOWPASS;
var BANDPASS = iir.PassbandType.BANDPASS;
var HIGHPASS = iir.PassbandType.HIGHPASS;
var LagrangePolynomial = OregonDSP.filter.LagrangePolynomial;
var Polynomial = OregonDSP.filter.Polynomial;
var Rational = OregonDSP.filter.Rational;
var HammingWindow = OregonDSP.HammingWindow;
var HanningWindow = OregonDSP.HanningWindow;
var Sequence = OregonDSP.Sequence;
var Window = OregonDSP.Window;
function complexFromPolar(amp, phase) {
  const real = amp * Math.cos(phase);
  const imag = amp * Math.sin(phase);
  return new OregonDSPTop.com.oregondsp.signalProcessing.filter.iir.Complex(real, imag);
}
function createComplex(real, imag) {
  return new OregonDSPTop.com.oregondsp.signalProcessing.filter.iir.Complex(real, imag);
}

// src/stationxml.ts
var STAML_NS = "http://www.fdsn.org/xml/station/1";
var COUNT_UNIT_NAME = "count";
var FIX_INVALID_STAXML = true;
var INVALID_NUMBER = -99999;
var FAKE_START_DATE = DateTime.fromISO("1900-01-01T00:00:00Z");
var Network = class {
  constructor(networkCode) {
    __publicField(this, "networkCode");
    __publicField(this, "_startDate");
    __publicField(this, "_endDate");
    __publicField(this, "restrictedStatus");
    __publicField(this, "description");
    __publicField(this, "totalNumberStations");
    __publicField(this, "stations");
    this.networkCode = networkCode;
    this._startDate = FAKE_START_DATE;
    this._endDate = null;
    this.description = "";
    this.restrictedStatus = "";
    this.stations = [];
    this.totalNumberStations = null;
  }
  get sourceId() {
    return new NetworkSourceId(this.networkCode ? this.networkCode : "");
  }
  get startDate() {
    return this._startDate;
  }
  set startDate(value) {
    this._startDate = checkStringOrDate(value);
  }
  get endDate() {
    return this._endDate;
  }
  set endDate(value) {
    if (!isDef(value)) {
      this._endDate = null;
    } else {
      this._endDate = checkStringOrDate(value);
    }
  }
  get timeRange() {
    return createInterval(this.startDate, this.endDate);
  }
  codes() {
    return this.networkCode;
  }
  isActiveAt(d) {
    if (!isDef(d)) {
      d = DateTime.utc();
    }
    return this.timeRange.contains(d);
  }
  isTempNet() {
    const first = this.networkCode.charAt(0);
    return first === "X" || first === "Y" || first === "Z" || first >= "0" && first <= "9";
  }
};
var Station = class {
  constructor(network, stationCode) {
    __publicField(this, "network");
    __publicField(this, "stationCode");
    __publicField(this, "_startDate");
    __publicField(this, "_endDate");
    __publicField(this, "restrictedStatus");
    __publicField(this, "name");
    __publicField(this, "latitude");
    __publicField(this, "longitude");
    __publicField(this, "elevation");
    __publicField(this, "channels");
    this.network = network;
    this.name = "";
    this.restrictedStatus = "";
    this._startDate = FAKE_START_DATE;
    this._endDate = null;
    this.stationCode = stationCode;
    this.channels = [];
    this.latitude = INVALID_NUMBER;
    this.longitude = INVALID_NUMBER;
    this.elevation = 0;
  }
  get sourceId() {
    return new StationSourceId(
      this.networkCode ? this.networkCode : "",
      this.stationCode ? this.stationCode : ""
    );
  }
  get startDate() {
    return this._startDate;
  }
  set startDate(value) {
    this._startDate = checkStringOrDate(value);
  }
  get endDate() {
    return this._endDate;
  }
  set endDate(value) {
    if (!isDef(value)) {
      this._endDate = null;
    } else {
      this._endDate = checkStringOrDate(value);
    }
  }
  get timeRange() {
    return createInterval(this.startDate, this.endDate);
  }
  get networkCode() {
    return this.network.networkCode;
  }
  isActiveAt(d) {
    if (!isDef(d)) {
      d = DateTime.utc();
    }
    return this.timeRange.contains(d);
  }
  codes(sep = ".") {
    return this.network.codes() + sep + this.stationCode;
  }
};
var Channel = class {
  constructor(station, channelCode, locationCode) {
    __publicField(this, "station");
    __publicField(this, "_locationCode");
    __publicField(this, "channelCode");
    __publicField(this, "_sourceId");
    __publicField(this, "_startDate");
    __publicField(this, "_endDate");
    __publicField(this, "restrictedStatus");
    __publicField(this, "latitude");
    __publicField(this, "longitude");
    __publicField(this, "elevation");
    __publicField(this, "depth");
    __publicField(this, "azimuth");
    __publicField(this, "dip");
    __publicField(this, "sampleRate");
    __publicField(this, "response");
    __publicField(this, "sensor");
    __publicField(this, "preamplifier");
    __publicField(this, "datalogger");
    this.station = station;
    this._startDate = FAKE_START_DATE;
    this._endDate = null;
    this.response = null;
    this.sensor = null;
    this.preamplifier = null;
    this.datalogger = null;
    this.restrictedStatus = "";
    this.azimuth = INVALID_NUMBER;
    this.dip = INVALID_NUMBER;
    this.latitude = INVALID_NUMBER;
    this.longitude = INVALID_NUMBER;
    this.depth = 0;
    this.elevation = 0;
    this.sampleRate = 0;
    if (channelCode.length !== 3) {
      throw new Error(`Channel code must be 3 chars: ${channelCode}`);
    }
    this.channelCode = channelCode;
    this._locationCode = locationCode;
    if (!locationCode) {
      this._locationCode = "";
    }
    if (!(this._locationCode.length === 2 || this._locationCode.length === 0)) {
      throw new Error(
        `locationCode must be 2 chars, or empty: "${locationCode}"`
      );
    }
  }
  get sourceId() {
    if (this._sourceId) {
      return this._sourceId;
    }
    return FDSNSourceId.fromNslc(
      this.networkCode,
      this.stationCode,
      this.locationCode,
      this.channelCode
    );
  }
  get nslcId() {
    return new NslcId(
      this.networkCode ? this.networkCode : "",
      this.stationCode ? this.stationCode : "",
      this.locationCode && this.locationCode !== "--" ? this.locationCode : "",
      this.channelCode ? this.channelCode : ""
    );
  }
  get startDate() {
    return this._startDate;
  }
  set startDate(value) {
    this._startDate = checkStringOrDate(value);
  }
  get endDate() {
    return this._endDate;
  }
  set endDate(value) {
    if (!isDef(value)) {
      this._endDate = null;
    } else {
      this._endDate = checkStringOrDate(value);
    }
  }
  get timeRange() {
    return createInterval(this.startDate, this.endDate);
  }
  get locationCode() {
    return this._locationCode;
  }
  set locationCode(value) {
    this._locationCode = value;
    if (!value) {
      this._locationCode = "";
    }
  }
  get stationCode() {
    return this.station.stationCode;
  }
  get networkCode() {
    return this.station.networkCode;
  }
  hasInstrumentSensitivity() {
    return isDef(this.response) && isDef(this.response.instrumentSensitivity);
  }
  set instrumentSensitivity(value) {
    if (!isDef(this.response)) {
      this.response = new Response2(value);
    } else {
      this.response.instrumentSensitivity = value;
    }
  }
  get instrumentSensitivity() {
    if (isDef(this.response) && isDef(this.response.instrumentSensitivity)) {
      return this.response.instrumentSensitivity;
    } else {
      throw new Error("no Response or InstrumentSensitivity defined");
    }
  }
  get nslc() {
    return this.codes();
  }
  codes(sep = ".") {
    return this.station.codes(sep) + sep + this.locationCode + sep + this.channelCode;
  }
  isActiveAt(d) {
    if (!isDef(d)) {
      d = DateTime.utc();
    }
    return this.timeRange.contains(d);
  }
};
var InstrumentSensitivity = class {
  constructor(sensitivity, frequency, inputUnits, outputUnits) {
    __publicField(this, "sensitivity");
    __publicField(this, "frequency");
    __publicField(this, "inputUnits");
    __publicField(this, "outputUnits");
    this.sensitivity = sensitivity;
    this.frequency = frequency;
    this.inputUnits = inputUnits;
    this.outputUnits = outputUnits;
  }
};
var Equipment = class {
  constructor() {
    __publicField(this, "resourceId");
    __publicField(this, "type");
    __publicField(this, "description");
    __publicField(this, "manufacturer");
    __publicField(this, "vendor");
    __publicField(this, "model");
    __publicField(this, "serialNumber");
    __publicField(this, "installationDate");
    __publicField(this, "removalDate");
    __publicField(this, "calibrationDateList");
    this.resourceId = "";
    this.type = "";
    this.description = "";
    this.manufacturer = "";
    this.vendor = "";
    this.model = "";
    this.serialNumber = "";
    this.installationDate = null;
    this.removalDate = null;
    this.calibrationDateList = [];
  }
};
var Response2 = class {
  constructor(instrumentSensitivity, stages) {
    __publicField(this, "instrumentSensitivity");
    __publicField(this, "stages");
    if (instrumentSensitivity) {
      this.instrumentSensitivity = instrumentSensitivity;
    } else {
      this.instrumentSensitivity = null;
    }
    if (stages) {
      this.stages = stages;
    } else {
      this.stages = [];
    }
  }
};
var Stage = class {
  constructor(filter3, decimation, gain) {
    __publicField(this, "filter");
    __publicField(this, "decimation");
    __publicField(this, "gain");
    this.filter = filter3;
    this.decimation = decimation;
    this.gain = gain;
  }
};
var AbstractFilterType = class {
  constructor(inputUnits, outputUnits) {
    __publicField(this, "inputUnits");
    __publicField(this, "outputUnits");
    __publicField(this, "name");
    __publicField(this, "description");
    this.inputUnits = inputUnits;
    this.outputUnits = outputUnits;
    this.description = "";
    this.name = "";
  }
};
var PolesZeros = class extends AbstractFilterType {
  constructor(inputUnits, outputUnits) {
    super(inputUnits, outputUnits);
    __publicField(this, "pzTransferFunctionType");
    __publicField(this, "normalizationFactor");
    __publicField(this, "normalizationFrequency");
    __publicField(this, "zeros");
    __publicField(this, "poles");
    this.pzTransferFunctionType = "";
    this.normalizationFactor = 1;
    this.normalizationFrequency = 0;
    this.zeros = new Array(0);
    this.poles = new Array(0);
  }
};
var FIR = class extends AbstractFilterType {
  constructor(inputUnits, outputUnits) {
    super(inputUnits, outputUnits);
    __publicField(this, "symmetry");
    __publicField(this, "numerator");
    this.symmetry = "none";
    this.numerator = [1];
  }
};
var CoefficientsFilter = class extends AbstractFilterType {
  constructor(inputUnits, outputUnits) {
    super(inputUnits, outputUnits);
    __publicField(this, "cfTransferFunction");
    __publicField(this, "numerator");
    __publicField(this, "denominator");
    this.cfTransferFunction = "";
    this.numerator = [1];
    this.denominator = new Array(0);
  }
};
var Decimation = class {
  constructor(inputSampleRate, factor) {
    __publicField(this, "inputSampleRate");
    __publicField(this, "factor");
    __publicField(this, "offset");
    __publicField(this, "delay");
    __publicField(this, "correction");
    this.inputSampleRate = inputSampleRate;
    this.factor = factor;
  }
};
var Gain = class {
  constructor(value, frequency) {
    __publicField(this, "value");
    __publicField(this, "frequency");
    this.value = value;
    this.frequency = frequency;
  }
};
function parseStationXml(rawXml) {
  const top2 = rawXml.documentElement;
  if (!top2) {
    throw new Error("No documentElement in XML");
  }
  const netArray = Array.from(top2.getElementsByTagNameNS(STAML_NS, "Network"));
  const out = [];
  for (const n2 of netArray) {
    out.push(convertToNetwork(n2));
  }
  return out;
}
function convertToNetwork(xml) {
  let netCode = "";
  try {
    netCode = _requireAttribute(xml, "code");
    const out = new Network(netCode);
    out.startDate = _requireAttribute(xml, "startDate");
    const rs = _grabAttribute(xml, "restrictedStatus");
    if (isNonEmptyStringArg(rs)) {
      out.restrictedStatus = rs;
    }
    const desc = _grabFirstElText(xml, "Description");
    if (isNonEmptyStringArg(desc)) {
      out.description = desc;
    }
    if (_grabAttribute(xml, "endDate")) {
      out.endDate = _grabAttribute(xml, "endDate");
    }
    const totSta = xml.getElementsByTagNameNS(STAML_NS, "TotalNumberStations");
    if (totSta && totSta.length > 0) {
      out.totalNumberStations = _grabFirstElInt(xml, "TotalNumberStations");
    }
    const staArray = Array.from(xml.getElementsByTagNameNS(STAML_NS, "Station"));
    const stations = [];
    for (const s3 of staArray) {
      stations.push(convertToStation(out, s3));
    }
    out.stations = stations;
    return out;
  } catch (err) {
    rethrowWithMessage(err, netCode);
  }
}
function convertToStation(network, xml) {
  let staCode = "";
  try {
    staCode = _requireAttribute(xml, "code");
    if (!isNonEmptyStringArg(staCode)) {
      throw new Error("station code missing in station!");
    }
    const out = new Station(network, staCode);
    out.startDate = _requireAttribute(xml, "startDate");
    const rs = _grabAttribute(xml, "restrictedStatus");
    if (isNonEmptyStringArg(rs)) {
      out.restrictedStatus = rs;
    }
    const lat = _grabFirstElFloat(xml, "Latitude");
    if (isNumArg(lat)) {
      out.latitude = lat;
    }
    const lon = _grabFirstElFloat(xml, "Longitude");
    if (isNumArg(lon)) {
      out.longitude = lon;
    }
    const elev = _grabFirstElFloat(xml, "Elevation");
    if (isNumArg(elev)) {
      out.elevation = elev;
    }
    const name = _grabFirstElText(_grabFirstEl(xml, "Site"), "Name");
    if (isStringArg(name)) {
      out.name = name;
    }
    const endDate = _grabAttribute(xml, "endDate");
    if (isDef(endDate)) {
      out.endDate = _grabAttribute(xml, "endDate");
    }
    const chanArray = Array.from(xml.getElementsByTagNameNS(STAML_NS, "Channel"));
    const channels = [];
    for (const c5 of chanArray) {
      channels.push(convertToChannel(out, c5));
    }
    out.channels = channels;
    return out;
  } catch (err) {
    rethrowWithMessage(err, staCode);
  }
}
function convertToChannel(station, xml) {
  let locCode = "";
  const chanCode = "";
  try {
    locCode = _grabAttribute(xml, "locationCode");
    if (!isNonEmptyStringArg(locCode)) {
      locCode = "";
    }
    const chanCode2 = _requireAttribute(xml, "code");
    const out = new Channel(station, chanCode2, locCode);
    out.startDate = checkStringOrDate(_requireAttribute(xml, "startDate"));
    const rs = _grabAttribute(xml, "restrictedStatus");
    if (isNonEmptyStringArg(rs)) {
      out.restrictedStatus = rs;
    }
    const lat = _grabFirstElFloat(xml, "Latitude");
    if (isNumArg(lat)) {
      out.latitude = lat;
    }
    const lon = _grabFirstElFloat(xml, "Longitude");
    if (isNumArg(lon)) {
      out.longitude = lon;
    }
    const elev = _grabFirstElFloat(xml, "Elevation");
    if (isNumArg(elev)) {
      out.elevation = elev;
    }
    const depth = _grabFirstElFloat(xml, "Depth");
    if (isNumArg(depth)) {
      out.depth = depth;
    }
    const azimuth = _grabFirstElFloat(xml, "Azimuth");
    if (isNumArg(azimuth)) {
      out.azimuth = azimuth;
    }
    const dip = _grabFirstElFloat(xml, "Dip");
    if (isNumArg(dip)) {
      out.dip = dip;
    }
    const sampleRate = _grabFirstElFloat(xml, "SampleRate");
    if (isNumArg(sampleRate)) {
      out.sampleRate = sampleRate;
    }
    if (_grabAttribute(xml, "endDate")) {
      out.endDate = _grabAttribute(xml, "endDate");
    }
    const sensor = xml.getElementsByTagNameNS(STAML_NS, "Sensor");
    if (sensor && sensor.length > 0) {
      const sensorTmp = sensor.item(0);
      if (isDef(sensorTmp)) {
        out.sensor = convertToEquipment(sensorTmp);
      }
    }
    const preamp = xml.getElementsByTagNameNS(STAML_NS, "PreAmplifier");
    if (preamp && preamp.length > 0) {
      const preampTmp = sensor.item(0);
      if (isDef(preampTmp)) {
        out.preamplifier = convertToEquipment(preampTmp);
      }
    }
    const datalogger = xml.getElementsByTagNameNS(STAML_NS, "DataLogger");
    if (datalogger && datalogger.length > 0) {
      const dataloggerTmp = sensor.item(0);
      if (isDef(dataloggerTmp)) {
        out.datalogger = convertToEquipment(dataloggerTmp);
      }
    }
    const responseXml = xml.getElementsByTagNameNS(STAML_NS, "Response");
    if (responseXml && responseXml.length > 0) {
      const r = responseXml.item(0);
      if (r) {
        out.response = convertToResponse(r);
      }
    }
    return out;
  } catch (err) {
    rethrowWithMessage(err, `${locCode}.${chanCode}`);
  }
}
function convertToEquipment(xml) {
  const out = new Equipment();
  let val;
  val = _grabFirstElText(xml, "Type");
  if (isNonEmptyStringArg(val)) {
    out.type = val;
  }
  val = _grabFirstElText(xml, "Description");
  if (isNonEmptyStringArg(val)) {
    out.description = val;
  }
  val = _grabFirstElText(xml, "Manufacturer");
  if (isNonEmptyStringArg(val)) {
    out.manufacturer = val;
  }
  val = _grabFirstElText(xml, "Vendor");
  if (isNonEmptyStringArg(val)) {
    out.vendor = val;
  }
  val = _grabFirstElText(xml, "Model");
  if (isNonEmptyStringArg(val)) {
    out.model = val;
  }
  val = _grabFirstElText(xml, "SerialNumber");
  if (isNonEmptyStringArg(val)) {
    out.serialNumber = val;
  }
  val = _grabFirstElText(xml, "InstallationDate");
  if (isNonEmptyStringArg(val)) {
    out.installationDate = checkStringOrDate(val);
  }
  val = _grabFirstElText(xml, "RemovalDate");
  if (isNonEmptyStringArg(val)) {
    out.removalDate = checkStringOrDate(val);
  }
  const calibXml = Array.from(xml.getElementsByTagNameNS(STAML_NS, "CalibrationDate"));
  out.calibrationDateList = [];
  for (const cal of calibXml) {
    if (isDef(cal.textContent)) {
      const d = checkStringOrDate(cal.textContent);
      if (isDef(d)) {
        out.calibrationDateList.push(d);
      }
    }
  }
  return out;
}
function convertToResponse(responseXml) {
  let out = new Response2();
  const inst = responseXml.getElementsByTagNameNS(
    STAML_NS,
    "InstrumentSensitivity"
  );
  if (inst && inst.item(0)) {
    const i = inst.item(0);
    if (i) {
      out = new Response2(convertToInstrumentSensitivity(i));
    }
  }
  if (!isDef(out)) {
    out = new Response2();
  }
  const xmlStages = responseXml.getElementsByTagNameNS(STAML_NS, "Stage");
  if (xmlStages && xmlStages.length > 0) {
    const jsStages = Array.from(xmlStages).map(function(stageXml) {
      return convertToStage(stageXml);
    });
    out.stages = jsStages;
  }
  return out;
}
function convertToInstrumentSensitivity(xml) {
  const sensitivity = _grabFirstElFloat(xml, "Value");
  const frequency = _grabFirstElFloat(xml, "Frequency");
  const inputUnits = _grabFirstElText(_grabFirstEl(xml, "InputUnits"), "Name");
  let outputUnits = _grabFirstElText(_grabFirstEl(xml, "OutputUnits"), "Name");
  if (FIX_INVALID_STAXML && !isDef(outputUnits)) {
    outputUnits = COUNT_UNIT_NAME;
  }
  if (!(isDef(sensitivity) && isDef(frequency) && isDef(inputUnits) && isDef(outputUnits))) {
    throw new Error(
      `Not all elements of Sensitivity exist: ${sensitivity} ${frequency} ${inputUnits} ${outputUnits}`
    );
  }
  return new InstrumentSensitivity(
    sensitivity,
    frequency,
    inputUnits,
    outputUnits
  );
}
function convertToStage(stageXml) {
  const subEl = stageXml.firstElementChild;
  let filter3 = null;
  if (!subEl) {
    throw new Error("Stage element has no child elements");
  } else if (stageXml.childElementCount === 1 && subEl.localName === "StageGain") {
  } else {
    const inputUnits = _grabFirstElText(
      _grabFirstEl(stageXml, "InputUnits"),
      "Name"
    );
    const outputUnits = _grabFirstElText(
      _grabFirstEl(stageXml, "OutputUnits"),
      "Name"
    );
    if (!isNonEmptyStringArg(inputUnits)) {
      throw new Error("Stage inputUnits required");
    }
    if (!isNonEmptyStringArg(outputUnits)) {
      throw new Error("Stage outputUnits required");
    }
    if (subEl.localName === "PolesZeros") {
      const pzFilter = new PolesZeros(inputUnits, outputUnits);
      const pzt = _grabFirstElText(stageXml, "PzTransferFunctionType");
      if (isNonEmptyStringArg(pzt)) {
        pzFilter.pzTransferFunctionType = pzt;
      }
      const nfa = _grabFirstElFloat(stageXml, "NormalizationFactor");
      if (isNumArg(nfa)) {
        pzFilter.normalizationFactor = nfa;
      }
      const nfr = _grabFirstElFloat(stageXml, "NormalizationFrequency");
      if (isNumArg(nfr)) {
        pzFilter.normalizationFrequency = nfr;
      }
      const zeros = Array.from(
        stageXml.getElementsByTagNameNS(STAML_NS, "Zero")
      ).map(function(zeroEl) {
        return extractComplex(zeroEl);
      });
      const poles = Array.from(
        stageXml.getElementsByTagNameNS(STAML_NS, "Pole")
      ).map(function(poleEl) {
        return extractComplex(poleEl);
      });
      pzFilter.zeros = zeros;
      pzFilter.poles = poles;
      filter3 = pzFilter;
    } else if (subEl.localName === "Coefficients") {
      const coeffXml = subEl;
      const cFilter = new CoefficientsFilter(inputUnits, outputUnits);
      const cft = _grabFirstElText(coeffXml, "CfTransferFunctionType");
      if (isNonEmptyStringArg(cft)) {
        cFilter.cfTransferFunction = cft;
      }
      cFilter.numerator = Array.from(
        coeffXml.getElementsByTagNameNS(STAML_NS, "Numerator")
      ).map(function(numerEl) {
        return isNonEmptyStringArg(numerEl.textContent) ? parseFloat(numerEl.textContent) : null;
      }).filter(isDef);
      cFilter.denominator = Array.from(
        coeffXml.getElementsByTagNameNS(STAML_NS, "Denominator")
      ).map(function(denomEl) {
        return isNonEmptyStringArg(denomEl.textContent) ? parseFloat(denomEl.textContent) : null;
      }).filter(isDef);
      filter3 = cFilter;
    } else if (subEl.localName === "ResponseList") {
      throw new Error("ResponseList not supported: ");
    } else if (subEl.localName === "FIR") {
      const firXml = subEl;
      const firFilter = new FIR(inputUnits, outputUnits);
      const s3 = _grabFirstElText(firXml, "Symmetry");
      if (isNonEmptyStringArg(s3)) {
        firFilter.symmetry = s3;
      }
      firFilter.numerator = Array.from(
        firXml.getElementsByTagNameNS(STAML_NS, "NumeratorCoefficient")
      ).map(function(numerEl) {
        return isNonEmptyStringArg(numerEl.textContent) ? parseFloat(numerEl.textContent) : null;
      }).filter(isDef);
      filter3 = firFilter;
    } else if (subEl.localName === "Polynomial") {
      throw new Error("Polynomial not supported: ");
    } else if (subEl.localName === "StageGain") {
    } else {
      throw new Error("Unknown Stage type: " + subEl.localName);
    }
    if (filter3) {
      const description = _grabFirstElText(subEl, "Description");
      if (isNonEmptyStringArg(description)) {
        filter3.description = description;
      }
      if (subEl.hasAttribute("name")) {
        const n2 = _grabAttribute(subEl, "name");
        if (isNonEmptyStringArg(n2)) {
          filter3.name = n2;
        }
      }
    }
  }
  const decimationXml = _grabFirstEl(stageXml, "Decimation");
  let decimation = null;
  if (decimationXml) {
    decimation = convertToDecimation(decimationXml);
  }
  const gainXml = _grabFirstEl(stageXml, "StageGain");
  let gain = null;
  if (gainXml) {
    gain = convertToGain(gainXml);
  } else {
    throw new Error(
      "Did not find Gain in stage number " + stringify(_grabAttribute(stageXml, "number"))
    );
  }
  const out = new Stage(filter3, decimation, gain);
  return out;
}
function convertToDecimation(decXml) {
  let out;
  const insr = _grabFirstElFloat(decXml, "InputSampleRate");
  const fac = _grabFirstElInt(decXml, "Factor");
  if (isNumArg(insr) && isNumArg(fac)) {
    out = new Decimation(insr, fac);
  } else {
    throw new Error(`Decimation without InputSampleRate and Factor: ${insr} ${fac}`);
  }
  out.offset = _grabFirstElInt(decXml, "Offset");
  out.delay = _grabFirstElFloat(decXml, "Delay");
  out.correction = _grabFirstElFloat(decXml, "Correction");
  return out;
}
function convertToGain(gainXml) {
  let out;
  const v = _grabFirstElFloat(gainXml, "Value");
  const f = _grabFirstElFloat(gainXml, "Frequency");
  if (isNumArg(v) && isNumArg(f)) {
    out = new Gain(v, f);
  } else {
    throw new Error(`Gain does not have value and frequency: ${v} ${f}`);
  }
  return out;
}
function createInterval(start2, end) {
  if (end) {
    return Interval.fromDateTimes(start2, end);
  } else {
    return Interval.fromDateTimes(start2, WAY_FUTURE);
  }
}
function extractComplex(el) {
  const re2 = _grabFirstElFloat(el, "Real");
  const im = _grabFirstElFloat(el, "Imaginary");
  if (isNumArg(re2) && isNumArg(im)) {
    return new Complex(re2, im);
  } else {
    throw new Error(`Both Real and Imaginary required: ${re2} ${im}`);
  }
}
function* allStations(networks) {
  for (const n2 of networks) {
    for (const s3 of n2.stations) {
      yield s3;
    }
  }
}
function* allChannels(networks) {
  for (const s3 of allStations(networks)) {
    for (const c5 of s3.channels) {
      yield c5;
    }
  }
}
function* findChannels(networks, netCode, staCode, locCode, chanCode) {
  const netRE = new RegExp(`^${netCode}$`);
  const staRE = new RegExp(`^${staCode}$`);
  const locRE = new RegExp(`^${locCode}$`);
  const chanRE = new RegExp(`^${chanCode}$`);
  for (const n2 of networks.filter((n3) => netRE.test(n3.networkCode))) {
    for (const s3 of n2.stations.filter((s4) => staRE.test(s4.stationCode))) {
      for (const c5 of s3.channels.filter(
        (c6) => locRE.test(c6.locationCode) && chanRE.test(c6.channelCode)
      )) {
        yield c5;
      }
    }
  }
}
var _grabFirstEl = function(xml, tagName) {
  let out = null;
  if (xml instanceof Element) {
    const el = xml.getElementsByTagName(tagName);
    if (isObject(el) && el.length > 0) {
      const e = el.item(0);
      if (e) {
        out = e;
      }
    }
  }
  return out;
};
var _grabFirstElText = function _grabFirstElText2(xml, tagName) {
  let out = null;
  const el = _grabFirstEl(xml, tagName);
  if (el instanceof Element) {
    out = el.textContent;
  }
  return out;
};
var _grabFirstElFloat = function _grabFirstElFloat2(xml, tagName) {
  let out = null;
  const elText = _grabFirstElText(xml, tagName);
  if (isStringArg(elText)) {
    out = parseFloat(elText);
  }
  return out;
};
var _grabFirstElInt = function _grabFirstElInt2(xml, tagName) {
  let out = null;
  const elText = _grabFirstElText(xml, tagName);
  if (isStringArg(elText)) {
    out = parseInt(elText);
  }
  return out;
};
var _grabAttribute = function _grabAttribute2(xml, tagName) {
  let out = null;
  if (xml instanceof Element) {
    const a3 = xml.getAttribute(tagName);
    if (isStringArg(a3)) {
      out = a3;
    }
  }
  return out;
};
var _requireAttribute = function _requireAttribute2(xml, tagName) {
  const out = _grabAttribute(xml, tagName);
  if (typeof out !== "string") {
    throw new Error(`Attribute ${tagName} not found.`);
  }
  return out;
};
var _grabAttributeNS = function(xml, namespace, tagName) {
  let out = null;
  if (xml instanceof Element) {
    const a3 = xml.getAttributeNS(namespace, tagName);
    if (isStringArg(a3)) {
      out = a3;
    }
  }
  return out;
};
var parseUtil = {
  _grabFirstEl,
  _grabFirstElText,
  _grabFirstElFloat,
  _grabFirstElInt,
  _grabAttribute,
  _requireAttribute,
  _grabAttributeNS
};

// src/seismogram.ts
var COUNT_UNIT2 = "count";
var Seismogram = class {
  constructor(segmentArray) {
    __publicField(this, "_segmentArray");
    __publicField(this, "_startTime");
    __publicField(this, "_endTime");
    __publicField(this, "_y");
    this._y = null;
    if (Array.isArray(segmentArray) && segmentArray[0] instanceof SeismogramSegment) {
      this._segmentArray = segmentArray;
    } else if (segmentArray instanceof SeismogramSegment) {
      this._segmentArray = [segmentArray];
    } else {
      throw new Error(
        `segmentArray is not Array<SeismogramSegment> or SeismogramSegment: ${stringify(
          segmentArray
        )}`
      );
    }
    this.checkAllSimilar();
    [this._startTime, this._endTime] = this.findStartEnd();
  }
  checkAllSimilar() {
    if (this._segmentArray.length === 0) {
      throw new Error("Seismogram is empty");
    }
    const f = this._segmentArray[0];
    this._segmentArray.forEach((s3, i) => {
      if (!s3) {
        throw new Error(`index ${i} is null in trace`);
      }
      this.checkSimilar(f, s3);
    });
  }
  checkSimilar(f, s3) {
    if (s3.networkCode !== f.networkCode) {
      throw new Error(
        "NetworkCode not same: " + s3.networkCode + " !== " + f.networkCode
      );
    }
    if (s3.stationCode !== f.stationCode) {
      throw new Error(
        "StationCode not same: " + s3.stationCode + " !== " + f.stationCode
      );
    }
    if (s3.locationCode !== f.locationCode) {
      throw new Error(
        "LocationCode not same: " + s3.locationCode + " !== " + f.locationCode
      );
    }
    if (s3.channelCode !== f.channelCode) {
      throw new Error(
        "ChannelCode not same: " + s3.channelCode + " !== " + f.channelCode
      );
    }
    if (s3.yUnit !== f.yUnit) {
      throw new Error("yUnit not same: " + s3.yUnit + " !== " + f.yUnit);
    }
  }
  findStartEnd() {
    const allStart = this._segmentArray.map((seis) => {
      return seis.startTime;
    });
    const startTime = allStart.reduce((acc, cur) => {
      return acc < cur ? acc : cur;
    });
    const allEnd = this._segmentArray.map((seis) => {
      return seis.endTime;
    });
    const endTime = allEnd.reduce((acc, cur) => {
      return acc > cur ? acc : cur;
    });
    return [startTime, endTime];
  }
  findMinMax(minMaxAccumulator) {
    if (this._segmentArray.length === 0) {
      throw new Error("No data");
    }
    for (const s3 of this._segmentArray) {
      minMaxAccumulator = s3.findMinMax(minMaxAccumulator);
    }
    if (minMaxAccumulator) {
      return minMaxAccumulator;
    } else {
      throw new Error("No data to calc minmax");
    }
  }
  mean() {
    let meanVal = 0;
    const npts = this.numPoints;
    for (const s3 of this.segments) {
      meanVal += meanOfSlice(s3.y, s3.y.length) * s3.numPoints;
    }
    meanVal = meanVal / npts;
    return meanVal;
  }
  get start() {
    return this.startTime;
  }
  get startTime() {
    return this._startTime;
  }
  get end() {
    return this.endTime;
  }
  get endTime() {
    return this._endTime;
  }
  get timeRange() {
    return Interval.fromDateTimes(this.startTime, this.endTime);
  }
  get timeWindow() {
    return this.timeRange;
  }
  get networkCode() {
    return this._segmentArray[0].networkCode;
  }
  set networkCode(value) {
    this._segmentArray.forEach((s3) => s3.networkCode = value);
  }
  get stationCode() {
    return this._segmentArray[0].stationCode;
  }
  set stationCode(value) {
    this._segmentArray.forEach((s3) => s3.stationCode = value);
  }
  get locationCode() {
    return this._segmentArray[0].locationCode;
  }
  set locationCode(value) {
    this._segmentArray.forEach((s3) => s3.locationCode = value);
  }
  get channelCode() {
    return this._segmentArray[0].channelCode;
  }
  set channelCode(value) {
    this._segmentArray.forEach((s3) => s3.channelCode = value);
  }
  get sourceId() {
    return this._segmentArray[0].sourceId;
  }
  get sampleRate() {
    return this._segmentArray[0].sampleRate;
  }
  get samplePeriod() {
    return 1 / this.sampleRate;
  }
  get yUnit() {
    return this._segmentArray[0].yUnit;
  }
  get numPoints() {
    return this._segmentArray.reduce(
      (accumulator, seis) => accumulator + seis.numPoints,
      0
    );
  }
  hasCodes() {
    return this._segmentArray[0].hasCodes();
  }
  get nslc() {
    return this.codes();
  }
  get nslcId() {
    return this._segmentArray[0].nslcId;
  }
  codes() {
    return this._segmentArray[0].codes();
  }
  get segments() {
    return this._segmentArray;
  }
  append(seismogram) {
    if (seismogram instanceof Seismogram) {
      seismogram._segmentArray.forEach((s3) => this.append(s3));
    } else {
      this.checkSimilar(this._segmentArray[0], seismogram);
      this._startTime = this.startTime < seismogram.startTime ? this.startTime : seismogram.startTime;
      this._endTime = this.endTime > seismogram.endTime ? this.endTime : seismogram.endTime;
      this._segmentArray.push(seismogram);
    }
  }
  cut(timeRange) {
    let out = this.trim(timeRange);
    if (out && out._segmentArray) {
      const cutSeisArray = this._segmentArray.map((seg) => seg.cut(timeRange)).filter(isDef);
      if (cutSeisArray.length > 0) {
        out = new Seismogram(cutSeisArray);
      } else {
        out = null;
      }
    } else {
      out = null;
    }
    return out;
  }
  trim(timeRange) {
    let out = null;
    if (this._segmentArray) {
      const trimSeisArray = this._segmentArray.filter(function(d) {
        return d.endTime >= timeRange.start;
      }).filter(function(d) {
        return d.startTime <= timeRange.end;
      });
      if (trimSeisArray.length > 0) {
        out = new Seismogram(trimSeisArray);
      }
    }
    return out;
  }
  break(duration) {
    if (this._segmentArray) {
      let breakStart = this.startTime;
      let out = [];
      while (breakStart < this.endTime) {
        const breakWindow = Interval.after(breakStart, duration);
        const cutSeisArray = this._segmentArray.map((seg) => seg.cut(breakWindow)).filter(isDef);
        out = out.concat(cutSeisArray);
        breakStart = breakStart.plus(duration);
      }
      out = out.filter(isDef);
      this._segmentArray = out;
    }
  }
  isContiguous() {
    if (this._segmentArray.length === 1) {
      return true;
    }
    let prev = null;
    for (const s3 of this._segmentArray) {
      if (prev && !(prev.endTime < s3.startTime && prev.endTime.plus(Duration.fromMillis(1e3 * 1.5 / prev.sampleRate)) > s3.startTime)) {
        return false;
      }
      prev = s3;
    }
    return true;
  }
  merge() {
    let outArray;
    if (this._segmentArray[0].y instanceof Int32Array) {
      outArray = new Int32Array(this.numPoints);
    } else if (this._segmentArray[0].y instanceof Float32Array) {
      outArray = new Float32Array(this.numPoints);
    } else if (this._segmentArray[0].y instanceof Float64Array) {
      outArray = new Float64Array(this.numPoints);
    } else {
      throw new Error(
        `data not one of Int32Array, Float32Array or Float64Array: ${this._segmentArray[0].y}`
      );
    }
    let i = 0;
    this._segmentArray.forEach((seg) => {
      for (const v of seg.y) {
        outArray[i] = v;
        i++;
      }
    });
    return outArray;
  }
  get y() {
    if (!this._y) {
      if (this.isContiguous()) {
        this._y = this.merge();
      }
    }
    if (this._y) {
      return this._y;
    } else {
      throw new Error(
        "Seismogram is not contiguous, access each SeismogramSegment idividually."
      );
    }
  }
  set y(val) {
    throw new Error("seismogram y setter not impl, see cloneWithNewData()");
  }
  clone() {
    const cloned = this._segmentArray.map((s3) => s3.clone());
    return new Seismogram(cloned);
  }
  cloneWithNewData(newY) {
    if (newY && newY.length > 0) {
      const seg = this._segmentArray[0].cloneWithNewData(newY);
      return new Seismogram([seg]);
    } else {
      throw new Error("Y value is empty");
    }
  }
  static createFromContiguousData(yArray, sampleRate, startTime) {
    const seg = new SeismogramSegment(yArray, sampleRate, startTime);
    return new Seismogram([seg]);
  }
};
var NonContiguousData = class extends Error {
  constructor(message) {
    super(message);
    this.name = this.constructor.name;
  }
};
function ensureIsSeismogram(seisSeismogram) {
  if (typeof seisSeismogram === "object") {
    if (seisSeismogram instanceof Seismogram) {
      return seisSeismogram;
    } else if (seisSeismogram instanceof SeismogramSegment) {
      return new Seismogram([seisSeismogram]);
    } else {
      throw new Error("must be Seismogram or SeismogramSegment but " + stringify(seisSeismogram));
    }
  } else {
    throw new Error(
      "must be Seismogram or SeismogramSegment but not an object: " + seisSeismogram
    );
  }
}
var SeismogramDisplayData = class {
  constructor(timeRange) {
    __publicField(this, "_seismogram");
    __publicField(this, "_id");
    __publicField(this, "_sourceId");
    __publicField(this, "label");
    __publicField(this, "markerList");
    __publicField(this, "traveltimeList");
    __publicField(this, "channel");
    __publicField(this, "channelCodesHolder");
    __publicField(this, "_instrumentSensitivity");
    __publicField(this, "quakeList");
    __publicField(this, "timeRange");
    __publicField(this, "alignmentTime");
    __publicField(this, "doShow");
    __publicField(this, "_statsCache");
    if (!timeRange) {
      throw new Error("timeRange must not be missing.");
    }
    this._id = null;
    this._sourceId = null;
    this._seismogram = null;
    this.label = null;
    this.markerList = [];
    this.traveltimeList = [];
    this.channel = null;
    this.channelCodesHolder = null;
    this._instrumentSensitivity = null;
    this.quakeList = [];
    this.timeRange = timeRange;
    this.alignmentTime = timeRange.start;
    this.doShow = true;
    this._statsCache = null;
  }
  static fromSeismogram(seismogram) {
    const out = new SeismogramDisplayData(
      Interval.fromDateTimes(
        seismogram.startTime,
        seismogram.endTime
      )
    );
    out.seismogram = seismogram;
    return out;
  }
  static fromContiguousData(yArray, sampleRate, startTime) {
    return SeismogramDisplayData.fromSeismogram(
      Seismogram.createFromContiguousData(yArray, sampleRate, startTime)
    );
  }
  static fromChannelAndTimeWindow(channel, timeRange) {
    if (!channel) {
      throw new Error("fromChannelAndTimeWindow, channel is undef");
    }
    const out = new SeismogramDisplayData(timeRange);
    out.channel = channel;
    return out;
  }
  static fromChannelAndTimes(channel, startTime, endTime) {
    const out = new SeismogramDisplayData(
      Interval.fromDateTimes(startTime, endTime)
    );
    out.channel = channel;
    return out;
  }
  static fromCodesAndTimes(networkCode, stationCode, locationCode, channelCode, startTime, endTime) {
    const out = new SeismogramDisplayData(
      Interval.fromDateTimes(startTime, endTime)
    );
    out.channelCodesHolder = new NslcId(
      networkCode,
      stationCode,
      locationCode,
      channelCode
    );
    return out;
  }
  addQuake(quake) {
    if (Array.isArray(quake)) {
      quake.forEach((q) => this.quakeList.push(q));
    } else {
      this.quakeList.push(quake);
    }
  }
  addMarker(marker2) {
    this.addMarkers([marker2]);
  }
  addMarkers(markers) {
    if (Array.isArray(markers)) {
      markers.forEach((m2) => this.markerList.push(m2));
    } else {
      this.markerList.push(markers);
    }
  }
  addTravelTimes(ttimes) {
    if (Array.isArray(ttimes)) {
      ttimes.forEach((m2) => this.traveltimeList.push(m2));
    } else if ("arrivals" in ttimes) {
      ttimes.arrivals.forEach((m2) => this.traveltimeList.push(m2));
    } else {
      this.traveltimeList.push(ttimes);
    }
  }
  hasQuake() {
    return this.quakeList.length > 0;
  }
  get quake() {
    if (this.hasQuake()) {
      return this.quakeList[0];
    }
    return null;
  }
  hasSeismogram() {
    return isDef(this._seismogram);
  }
  append(seismogram) {
    if (isDef(this._seismogram)) {
      this._seismogram.append(seismogram);
    } else {
      if (seismogram instanceof SeismogramSegment) {
        this.seismogram = new Seismogram(seismogram);
      } else {
        this.seismogram = seismogram;
      }
    }
  }
  hasChannel() {
    return isDef(this.channel);
  }
  hasSensitivity() {
    return this._instrumentSensitivity !== null || isDef(this.channel) && this.channel.hasInstrumentSensitivity();
  }
  get id() {
    return this._id;
  }
  set id(value) {
    this._id = value;
  }
  get networkCode() {
    let out = null;
    if (isDef(this.channel)) {
      out = this.channel.networkCode;
    } else if (isDef(this._seismogram)) {
      out = this._seismogram.networkCode;
    } else if (isDef(this.channelCodesHolder)) {
      out = this.channelCodesHolder.networkCode;
    }
    if (!isDef(out)) {
      out = "unknown";
    }
    return out;
  }
  get stationCode() {
    let out = null;
    if (isDef(this.channel)) {
      out = this.channel.stationCode;
    } else if (isDef(this._seismogram)) {
      out = this._seismogram.stationCode;
    } else if (isDef(this.channelCodesHolder)) {
      out = this.channelCodesHolder.stationCode;
    }
    if (!isDef(out)) {
      out = "unknown";
    }
    return out;
  }
  get locationCode() {
    let out = null;
    if (isDef(this.channel)) {
      out = this.channel.locationCode;
    } else if (isDef(this._seismogram)) {
      out = this._seismogram.locationCode;
    } else if (isDef(this.channelCodesHolder)) {
      out = this.channelCodesHolder.locationCode;
    }
    if (!isDef(out)) {
      out = "unknown";
    }
    return out;
  }
  get channelCode() {
    let out = null;
    if (isDef(this.channel)) {
      out = this.channel.channelCode;
    } else if (isDef(this._seismogram)) {
      out = this._seismogram.channelCode;
    } else if (isDef(this.channelCodesHolder)) {
      out = this.channelCodesHolder.channelCode;
    }
    if (!isDef(out)) {
      out = "unknown";
    }
    return out;
  }
  get sourceId() {
    if (isDef(this.channel)) {
      return this.channel.sourceId;
    } else if (isDef(this._seismogram)) {
      return this._seismogram.sourceId;
    } else if (isDef(this._sourceId)) {
      return this._sourceId;
    } else if (isDef(this.channelCodesHolder)) {
      return FDSNSourceId.fromNslc(
        this.networkCode,
        this.stationCode,
        this.locationCode,
        this.channelCode
      );
    } else {
      return null;
    }
  }
  get nslc() {
    return this.codes();
  }
  get nslcId() {
    if (this.channel !== null) {
      return this.channel.nslcId;
    } else {
      return new NslcId(
        this.networkCode ? this.networkCode : "",
        this.stationCode ? this.stationCode : "",
        this.locationCode && this.locationCode !== "--" ? this.locationCode : "",
        this.channelCode ? this.channelCode : ""
      );
    }
  }
  codes(sep = ".") {
    if (this.channel !== null) {
      return this.channel.codes();
    } else {
      return (this.networkCode ? this.networkCode : "") + sep + (this.stationCode ? this.stationCode : "") + sep + (this.locationCode ? this.locationCode : "") + sep + (this.channelCode ? this.channelCode : "");
    }
  }
  get startTime() {
    return this.timeRange.start;
  }
  get start() {
    return this.timeRange.start;
  }
  get endTime() {
    return this.timeRange.end;
  }
  get end() {
    return this.timeRange.end;
  }
  get timeWindow() {
    return this.timeRange;
  }
  get numPoints() {
    if (this._seismogram) {
      return this._seismogram.numPoints;
    }
    return 0;
  }
  associateChannel(nets) {
    const matchChans = findChannels(
      nets,
      this.networkCode,
      this.stationCode,
      this.locationCode,
      this.channelCode
    );
    for (const c5 of matchChans) {
      if (c5.timeRange.overlaps(this.timeRange)) {
        this.channel = c5;
        return;
      }
    }
  }
  alignStartTime() {
    this.alignmentTime = this.start;
  }
  alignOriginTime() {
    if (this.quake) {
      this.alignmentTime = this.quake.time;
    } else {
      this.alignmentTime = this.start;
    }
  }
  alignPhaseTime(phaseRegExp) {
    let intPhaseRegExp;
    if (typeof phaseRegExp === "string") {
      intPhaseRegExp = new RegExp(phaseRegExp);
    } else {
      intPhaseRegExp = phaseRegExp;
    }
    if (this.quake && this.traveltimeList) {
      const q = this.quake;
      const matchArrival = this.traveltimeList.find((ttArrival) => {
        const match2 = intPhaseRegExp.exec(ttArrival.phase);
        return match2 !== null && match2[0] === ttArrival.phase;
      });
      if (matchArrival) {
        this.alignmentTime = q.time.plus(Duration.fromMillis(matchArrival.time * 1e3));
      } else {
        this.alignmentTime = this.start;
      }
    }
  }
  relativeTimeWindow(startOffset, duration) {
    if (this.alignmentTime) {
      return Interval.after(
        this.alignmentTime.plus(startOffset),
        duration
      );
    } else {
      return Interval.after(
        this.startTime.plus(startOffset),
        duration
      );
    }
  }
  get sensitivity() {
    const channel = this.channel;
    if (this._instrumentSensitivity) {
      return this._instrumentSensitivity;
    } else if (isDef(channel) && channel.hasInstrumentSensitivity()) {
      return channel.instrumentSensitivity;
    } else {
      return null;
    }
  }
  set sensitivity(value) {
    this._instrumentSensitivity = value;
  }
  get min() {
    if (!this._statsCache) {
      this._statsCache = this.calcStats();
    }
    return this._statsCache.min;
  }
  get max() {
    if (!this._statsCache) {
      this._statsCache = this.calcStats();
    }
    return this._statsCache.max;
  }
  get mean() {
    if (!this._statsCache) {
      this._statsCache = this.calcStats();
    }
    return this._statsCache.mean;
  }
  get middle() {
    if (!this._statsCache) {
      this._statsCache = this.calcStats();
    }
    return this._statsCache.middle;
  }
  get seismogram() {
    return this._seismogram;
  }
  set seismogram(value) {
    this._seismogram = value;
    this._statsCache = null;
  }
  get segments() {
    if (this._seismogram) {
      return this._seismogram.segments;
    } else {
      return [];
    }
  }
  calcStats() {
    const stats = new SeismogramDisplayStats();
    if (this.seismogram) {
      const minMax = this.seismogram.findMinMax();
      stats.min = minMax[0];
      stats.max = minMax[1];
      stats.mean = this.seismogram.mean();
    }
    this._statsCache = stats;
    return stats;
  }
  get distazList() {
    if (this.quakeList.length > 0 && isDef(this.channel)) {
      const c5 = this.channel;
      return this.quakeList.map(
        (q) => distaz(c5.latitude, c5.longitude, q.latitude, q.longitude)
      );
    }
    return [];
  }
  get distaz() {
    let out = null;
    if (this.quakeList.length > 0 && this.channel !== null) {
      out = distaz(
        this.channel.latitude,
        this.channel.longitude,
        this.quakeList[0].latitude,
        this.quakeList[0].longitude
      );
    }
    return out;
  }
  clone() {
    return this.cloneWithNewSeismogram(
      this.seismogram ? this.seismogram.clone() : null
    );
  }
  cloneWithNewSeismogram(seis) {
    const out = new SeismogramDisplayData(this.timeRange);
    Object.getOwnPropertyNames(this).forEach((name) => {
      if (name === "_seismogram") {
        out._seismogram = seis;
      } else if (DateTime.isDateTime(this[name])) {
        out[name] = this[name];
      } else if (Array.isArray(this[name])) {
        out[name] = this[name].slice();
      } else {
        out[name] = this[name];
      }
    });
    out.seismogram = seis;
    out._statsCache = null;
    out.channelCodesHolder = this.channelCodesHolder;
    if (!isDef(out._seismogram) && !isDef(out.channel)) {
      out._sourceId = this.sourceId;
      if (this._seismogram && this._seismogram.sourceId) {
        out.channelCodesHolder = this._seismogram.sourceId.asNslc();
      }
    }
    return out;
  }
  cut(timeRange) {
    let cutSeis = this.seismogram;
    let out;
    if (cutSeis) {
      cutSeis = cutSeis.cut(timeRange);
      out = this.cloneWithNewSeismogram(cutSeis);
      if (!isDef(out._seismogram) && !isDef(out.channel)) {
        out._sourceId = this.sourceId;
      }
    } else {
      out = this.clone();
    }
    out.timeRange = timeRange;
    return out;
  }
  toString() {
    return `${this.sourceId} ${this.timeRange}`;
  }
};
var SeismogramDisplayStats = class {
  constructor() {
    __publicField(this, "min");
    __publicField(this, "max");
    __publicField(this, "mean");
    __publicField(this, "trendSlope");
    this.min = 0;
    this.max = 0;
    this.mean = 0;
    this.trendSlope = 0;
  }
  get middle() {
    return (this.min + this.max) / 2;
  }
};
function findStartEnd(sddList) {
  if (sddList.length === 0) {
    return Interval.before(DateTime.utc(), 300);
  }
  const startTime = sddList.reduce((acc, sdd) => {
    return acc < sdd.timeRange.start ? acc : sdd.timeRange.start;
  }, sddList[0].timeRange.start);
  const endTime = sddList.reduce((acc, sdd) => {
    return acc > sdd.timeRange.end ? acc : sdd.timeRange.end;
  }, sddList[0].timeRange.end);
  return Interval.fromDateTimes(startTime, endTime);
}
function findMaxDuration(sddList) {
  return findMaxDurationOfType("start", sddList);
}
function findMaxDurationOfType(type2, sddList) {
  return sddList.reduce((acc, sdd) => {
    let timeRange;
    if (type2 === "start") {
      timeRange = sdd.timeRange;
    } else if (type2 === "origin" && sdd.hasQuake()) {
      timeRange = Interval.fromDateTimes(
        sdd.quakeList[0].time,
        sdd.timeRange.end
      );
    } else {
      timeRange = sdd.timeRange;
    }
    if (timeRange.toDuration().toMillis() > acc.toMillis()) {
      return timeRange.toDuration();
    } else {
      return acc;
    }
  }, Duration.fromMillis(0));
}
function findMinMax(sddList, doGain = false, centeredAmp = false) {
  const min4 = sddList.map((sdd) => {
    let sens = 1;
    if (doGain && sdd.sensitivity) {
      sens = sdd.sensitivity.sensitivity;
    }
    let middle = 0;
    if (centeredAmp) {
      middle = sdd.middle;
    }
    return (sdd.min - middle) / sens;
  }).reduce(function(p, v) {
    return p < v ? p : v;
  });
  const max5 = sddList.map((sdd) => {
    let sens = 1;
    if (doGain && sdd.sensitivity) {
      sens = sdd.sensitivity.sensitivity;
    }
    let middle = 0;
    if (centeredAmp) {
      middle = sdd.middle;
    }
    return (sdd.max - middle) / sens;
  }).reduce(function(p, v) {
    return p > v ? p : v;
  });
  return [min4, max5];
}
var initial_minAmp = Number.MAX_SAFE_INTEGER;
var initial_maxAmp = -1 * initial_minAmp;
function findMinMaxOverTimeRange(sddList, timeRange, doGain = false, centeredAmp = false) {
  if (sddList.length === 0) {
    return [-1, 1];
  }
  const minMaxArr = sddList.map((sdd) => {
    if (sdd.seismogram) {
      const cutSeis = sdd.seismogram.cut(timeRange);
      if (cutSeis) {
        const countMinMax = cutSeis.findMinMax();
        let sens = 1;
        if (doGain && sdd.sensitivity) {
          sens = sdd.sensitivity.sensitivity;
        }
        let middle = 0;
        if (centeredAmp) {
          middle = (countMinMax[1] + countMinMax[0]) / 2;
        }
        return [(countMinMax[0] - middle) / sens, (countMinMax[1] - middle) / sens];
      }
    }
    return [initial_minAmp, initial_maxAmp];
  });
  const min4 = minMaxArr.map((mm) => {
    return mm[0];
  }).reduce(function(p, v) {
    return p < v ? p : v;
  });
  const max5 = minMaxArr.map((mm) => {
    return mm[1];
  }).reduce(function(p, v) {
    return p > v ? p : v;
  });
  return [min4, max5];
}
function findMinMaxOverRelativeTimeRange(sddList, startOffset, duration, doGain = false, centeredAmp = false) {
  if (sddList.length === 0) {
    return [0, 0];
  }
  const minMaxArr = sddList.map((sdd) => {
    const timeRange = sdd.relativeTimeWindow(startOffset, duration);
    return findMinMaxOverTimeRange([sdd], timeRange, doGain, centeredAmp);
  });
  const min4 = minMaxArr.map((mm) => {
    return mm[0];
  }).reduce(function(p, v) {
    return p < v ? p : v;
  });
  const max5 = minMaxArr.map((mm) => {
    return mm[1];
  }).reduce(function(p, v) {
    return p > v ? p : v;
  });
  return [min4, max5];
}
function findStartEndOfSeismograms(data, accumulator) {
  let out;
  if (!accumulator && !data) {
    throw new Error("data and accumulator are not defined");
  } else if (!accumulator) {
    out = Interval.fromDateTimes(
      isoToDateTime("2500-01-01T00:00:00Z"),
      isoToDateTime("1001-01-01T00:00:00Z")
    );
  } else {
    out = accumulator;
  }
  if (Array.isArray(data)) {
    for (const s3 of data) {
      if (s3.startTime <= out.start) {
        out = Interval.fromDateTimes(s3.startTime, out.end);
      }
      if (out.end <= s3.endTime) {
        out = Interval.fromDateTimes(out.start, s3.endTime);
      }
    }
  } else {
    throw new Error(`Expected Array as first arg but was: ${typeof data}`);
  }
  return out;
}
function findMinMaxOfSeismograms(data, minMaxAccumulator) {
  for (const s3 of data) {
    minMaxAccumulator = s3.findMinMax(minMaxAccumulator);
  }
  if (minMaxAccumulator) {
    return minMaxAccumulator;
  } else {
    return [-1, 1];
  }
}
function findMinMaxOfSDD(data, minMaxAccumulator) {
  const seisData = [];
  data.forEach((sdd) => {
    if (!!sdd && !!sdd.seismogram) {
      seisData.push(sdd.seismogram);
    }
  });
  return findMinMaxOfSeismograms(seisData, minMaxAccumulator);
}
function uniqueStations(seisData) {
  const out = /* @__PURE__ */ new Set();
  seisData.forEach((sdd) => {
    if (sdd.channel) {
      out.add(sdd.channel.station);
    }
  });
  return Array.from(out.values());
}
function uniqueChannels(seisData) {
  const out = /* @__PURE__ */ new Set();
  seisData.forEach((sdd) => {
    if (sdd.channel) {
      out.add(sdd.channel);
    }
  });
  return Array.from(out.values());
}
function uniqueQuakes(seisData) {
  const out = /* @__PURE__ */ new Set();
  seisData.forEach((sdd) => {
    sdd.quakeList.forEach((q) => out.add(q));
  });
  return Array.from(out.values());
}

// src/miniseed.ts
var MINISEED_MIME = "application/vnd.fdsn.mseed";
var R_TYPECODE = "R".charCodeAt(0);
var D_TYPECODE = "D".charCodeAt(0);
var Q_TYPECODE = "Q".charCodeAt(0);
var M_TYPECODE = "M".charCodeAt(0);
function parseDataRecords(arrayBuffer) {
  const dataRecords = [];
  let offset2 = 0;
  while (offset2 < arrayBuffer.byteLength) {
    const dataView = new DataView(arrayBuffer, offset2);
    const dr = parseSingleDataRecord(dataView);
    dataRecords.push(dr);
    offset2 += dr.header.recordSize;
  }
  return dataRecords;
}
function parseSingleDataRecord(dataView) {
  const header = parseSingleDataRecordHeader(dataView);
  const data = new DataView(
    dataView.buffer,
    dataView.byteOffset + header.dataOffset,
    header.recordSize - header.dataOffset
  );
  return new DataRecord(header, data);
}
function parseSingleDataRecordHeader(dataView) {
  if (dataView.byteLength < 47) {
    throw new Error(
      `Not enought bytes for header, need 47, found ${dataView.byteLength}`
    );
  }
  const out = new DataHeader();
  out.seq = makeString(dataView, 0, 6);
  out.typeCode = dataView.getUint8(6);
  out.continuationCode = dataView.getUint8(7);
  out.staCode = makeString(dataView, 8, 5);
  out.locCode = makeString(dataView, 13, 2);
  out.chanCode = makeString(dataView, 15, 3);
  out.netCode = makeString(dataView, 18, 2);
  out.startBTime = parseBTime(dataView, 20);
  const headerByteSwap = checkByteSwap(out.startBTime);
  if (headerByteSwap) {
    out.startBTime = parseBTime(dataView, 20, headerByteSwap);
  }
  out.numSamples = dataView.getInt16(30, headerByteSwap);
  out.sampRateFac = dataView.getInt16(32, headerByteSwap);
  out.sampRateMul = dataView.getInt16(34, headerByteSwap);
  out.activityFlags = dataView.getUint8(36);
  out.ioClockFlags = dataView.getUint8(37);
  out.dataQualityFlags = dataView.getUint8(38);
  out.numBlockettes = dataView.getUint8(39);
  out.timeCorrection = dataView.getInt32(40, headerByteSwap);
  out.dataOffset = dataView.getUint16(44, headerByteSwap);
  out.blocketteOffset = dataView.getUint16(46, headerByteSwap);
  let offset2 = out.blocketteOffset;
  out.blocketteList = [];
  out.recordSize = 4096;
  out.sampleRate = out.calcSampleRate();
  out.startTime = out.startBTime.toDateTime();
  for (let i = 0; i < out.numBlockettes; i++) {
    let nextOffset = dataView.getUint16(offset2 + 2, headerByteSwap);
    if (nextOffset === 0) {
      nextOffset = out.dataOffset;
    }
    if (nextOffset === 0) {
      nextOffset = offset2;
    }
    const blockette = parseBlockette(
      dataView,
      offset2,
      nextOffset - offset2,
      headerByteSwap
    );
    out.blocketteList.push(blockette);
    offset2 = nextOffset;
    if (blockette instanceof Blockette1000) {
      out.recordSize = 1 << blockette.dataRecordLengthByte;
      out.encoding = blockette.encoding;
      out.littleEndian = blockette.wordOrder === 0;
    } else if (blockette instanceof Blockette1001) {
      out.startBTime.microsecond = blockette.microsecond;
    } else if (blockette instanceof Blockette100) {
      out.sampleRate = blockette.sampleRate;
    }
  }
  out.endTime = out.timeOfSample(out.numSamples - 1);
  return out;
}
function parseBlockette(dataView, offset2, length3, headerByteSwap) {
  const type2 = dataView.getUint16(offset2, headerByteSwap);
  const body = new DataView(
    dataView.buffer,
    dataView.byteOffset + offset2,
    length3
  );
  if (type2 === 1e3) {
    const encoding = body.getUint8(4);
    const wordOrder = body.getUint8(5);
    const dataRecordLengthByte = body.getUint8(6);
    return new Blockette1000(
      type2,
      body,
      encoding,
      dataRecordLengthByte,
      wordOrder
    );
  } else if (type2 === 1001) {
    const timeQual = body.getUint8(4);
    const microsecond = body.getUint8(5);
    const frameCount = body.getUint8(7);
    return new Blockette1001(type2, body, timeQual, microsecond, frameCount);
  } else if (type2 === 100) {
    const sampleRate = body.getFloat32(4);
    const flags = body.getUint8(8);
    return new Blockette100(type2, body, sampleRate, flags);
  } else {
    return new Blockette(type2, body);
  }
}
var DataRecord = class {
  constructor(header, data) {
    __publicField(this, "header");
    __publicField(this, "data");
    this.header = header;
    this.data = data;
  }
  decompress() {
    return this.asEncodedDataSegment().decode();
  }
  asEncodedDataSegment() {
    return new EncodedDataSegment(
      this.header.encoding,
      this.data,
      this.header.numSamples,
      this.header.littleEndian
    );
  }
  codes(sep) {
    if (!isNonEmptyStringArg(sep)) {
      sep = ".";
    }
    return this.header.netCode + sep + this.header.staCode + sep + this.header.locCode + sep + this.header.chanCode;
  }
};
var DataHeader = class {
  constructor() {
    __publicField(this, "seq");
    __publicField(this, "typeCode");
    __publicField(this, "continuationCode");
    __publicField(this, "staCode");
    __publicField(this, "locCode");
    __publicField(this, "chanCode");
    __publicField(this, "netCode");
    __publicField(this, "startBTime");
    __publicField(this, "numSamples");
    __publicField(this, "encoding");
    __publicField(this, "littleEndian");
    __publicField(this, "sampRateFac");
    __publicField(this, "sampRateMul");
    __publicField(this, "sampleRate");
    __publicField(this, "activityFlags");
    __publicField(this, "ioClockFlags");
    __publicField(this, "dataQualityFlags");
    __publicField(this, "numBlockettes");
    __publicField(this, "timeCorrection");
    __publicField(this, "dataOffset");
    __publicField(this, "blocketteOffset");
    __publicField(this, "recordSize");
    __publicField(this, "blocketteList");
    __publicField(this, "startTime");
    __publicField(this, "endTime");
    this.seq = "      ";
    this.typeCode = 68;
    this.continuationCode = 32;
    this.staCode = "";
    this.locCode = "";
    this.chanCode = "";
    this.netCode = "";
    this.startBTime = new BTime(1900, 1, 0, 0, 0, 0);
    this.numSamples = 0;
    this.sampRateFac = 0;
    this.sampRateMul = 0;
    this.activityFlags = 0;
    this.ioClockFlags = 0;
    this.dataQualityFlags = 0;
    this.numBlockettes = 0;
    this.timeCorrection = 0;
    this.dataOffset = 0;
    this.blocketteOffset = 0;
    this.blocketteList = [];
    this.recordSize = 4096;
    this.encoding = 0;
    this.littleEndian = false;
    this.sampleRate = 0;
    this.startTime = this.startBTime.toDateTime();
    this.endTime = this.startTime;
  }
  toString() {
    return this.netCode + "." + this.staCode + "." + this.locCode + "." + this.chanCode + " " + this.startTime.toISO() + " " + this.encoding;
  }
  calcSampleRate() {
    const factor = this.sampRateFac;
    const multiplier = this.sampRateMul;
    let sampleRate = 1e4;
    if (factor * multiplier !== 0) {
      sampleRate = Math.pow(Math.abs(factor), factor / Math.abs(factor)) * Math.pow(Math.abs(multiplier), multiplier / Math.abs(multiplier));
    }
    return sampleRate;
  }
  timeOfSample(i) {
    return this.startTime.plus(Duration.fromMillis(1e3 * i / this.sampleRate));
  }
};
var Blockette = class {
  constructor(type2, body) {
    __publicField(this, "type");
    __publicField(this, "body");
    this.type = type2;
    this.body = body;
  }
};
var Blockette1000 = class extends Blockette {
  constructor(type2, body, encoding, dataRecordLengthByte, wordOrder) {
    super(type2, body);
    __publicField(this, "encoding");
    __publicField(this, "dataRecordLengthByte");
    __publicField(this, "wordOrder");
    if (type2 !== 1e3) {
      throw new Error("Not a blockette1000: " + this.type);
    }
    this.encoding = encoding;
    this.dataRecordLengthByte = dataRecordLengthByte;
    this.wordOrder = wordOrder;
  }
};
var Blockette1001 = class extends Blockette {
  constructor(type2, body, timeQual, microsecond, frameCount) {
    super(type2, body);
    __publicField(this, "timeQual");
    __publicField(this, "microsecond");
    __publicField(this, "frameCount");
    if (type2 !== 1001) {
      throw new Error("Not a blockette1001: " + this.type);
    }
    this.timeQual = timeQual;
    this.microsecond = microsecond;
    this.frameCount = frameCount;
  }
};
var Blockette100 = class extends Blockette {
  constructor(type2, body, sampleRate, flags) {
    super(type2, body);
    __publicField(this, "sampleRate");
    __publicField(this, "flags");
    if (type2 !== 100) {
      throw new Error("Not a blockette100: " + this.type);
    }
    this.sampleRate = sampleRate;
    this.flags = flags;
  }
};
function makeString(dataView, offset2, length3) {
  let out = "";
  for (let i = offset2; i < offset2 + length3; i++) {
    const charCode = dataView.getUint8(i);
    if (charCode > 31) {
      out += String.fromCharCode(charCode);
    }
  }
  return out.trim();
}
function parseBTime(dataView, offset2, byteSwap) {
  if (!isDef(byteSwap)) {
    byteSwap = false;
  }
  const year2 = dataView.getInt16(offset2, byteSwap);
  const jday = dataView.getInt16(offset2 + 2, byteSwap);
  const hour2 = dataView.getInt8(offset2 + 4);
  const min4 = dataView.getInt8(offset2 + 5);
  const sec = dataView.getInt8(offset2 + 6);
  const tenthMilli = dataView.getInt16(offset2 + 8, byteSwap);
  return new BTime(year2, jday, hour2, min4, sec, tenthMilli);
}
var BTime = class {
  constructor(year2, jday, hour2, min4, sec, tenthMilli) {
    __publicField(this, "year");
    __publicField(this, "jday");
    __publicField(this, "hour");
    __publicField(this, "min");
    __publicField(this, "sec");
    __publicField(this, "tenthMilli");
    __publicField(this, "microsecond");
    __publicField(this, "length");
    this.length = 10;
    this.year = year2;
    this.jday = jday;
    this.hour = hour2;
    this.min = min4;
    this.sec = sec;
    this.tenthMilli = tenthMilli;
    this.microsecond = 0;
  }
  toString() {
    return this.year + "-" + this.jday + " " + this.hour + ":" + this.min + ":" + this.sec + "." + this.tenthMilli.toFixed().padStart(4, "0") + " " + this.toDateTime().toISO();
  }
  toDateTime() {
    return DateTime.fromObject(
      {
        year: this.year,
        ordinal: this.jday,
        hour: this.hour,
        minute: this.min,
        second: this.sec,
        millisecond: Math.round(this.tenthMilli / 10)
      },
      UTC_OPTIONS
    );
  }
};
function checkByteSwap(bTime) {
  return bTime.year < 1960 || bTime.year > 2055;
}
function areContiguous(dr1, dr2) {
  const h1 = dr1.header;
  const h2 = dr2.header;
  return h1.endTime < h2.startTime && h1.endTime.valueOf() + 1e3 * 1.5 / h1.sampleRate > h2.startTime.valueOf();
}
function createSeismogramSegment(contig) {
  if (!Array.isArray(contig)) {
    contig = [contig];
  }
  const contigData = contig.map((dr) => dr.asEncodedDataSegment());
  const out = new SeismogramSegment(
    contigData,
    contig[0].header.sampleRate,
    contig[0].header.startTime
  );
  out.networkCode = contig[0].header.netCode;
  out.stationCode = contig[0].header.staCode;
  out.locationCode = contig[0].header.locCode;
  out.channelCode = contig[0].header.chanCode;
  return out;
}
function merge2(drList) {
  return new Seismogram(mergeSegments(drList));
}
function mergeSegments(drList) {
  const out = [];
  let currDR;
  drList.sort(function(a3, b) {
    return a3.header.startTime.toMillis() - b.header.startTime.toMillis();
  });
  let contig = [];
  for (let i = 0; i < drList.length; i++) {
    currDR = drList[i];
    if (contig.length === 0) {
      contig.push(currDR);
    } else if (areContiguous(contig[contig.length - 1], currDR)) {
      contig.push(currDR);
    } else {
      out.push(createSeismogramSegment(contig));
      contig = [currDR];
    }
  }
  if (contig.length > 0) {
    out.push(createSeismogramSegment(contig));
    contig = [];
  }
  return out;
}
function byChannel(drList) {
  const out = /* @__PURE__ */ new Map();
  let key;
  for (let i = 0; i < drList.length; i++) {
    const currDR = drList[i];
    key = currDR.codes();
    let drArray = out.get(key);
    if (!drArray) {
      drArray = [currDR];
      out.set(key, drArray);
    } else {
      drArray.push(currDR);
    }
  }
  return out;
}
function seismogramSegmentPerChannel(drList) {
  let out = new Array(0);
  const byChannelMap = byChannel(drList);
  byChannelMap.forEach((segments) => out = out.concat(mergeSegments(segments)));
  return out;
}
function seismogramPerChannel(drList) {
  const out = [];
  const byChannelMap = byChannel(drList);
  byChannelMap.forEach((segments) => out.push(merge2(segments)));
  return out;
}

// src/mseed3.ts
var mseed3_exports = {};
__export(mseed3_exports, {
  BIG_ENDIAN: () => BIG_ENDIAN,
  CRC_OFFSET: () => CRC_OFFSET,
  FDSN_PREFIX: () => FDSN_PREFIX2,
  FIXED_HEADER_SIZE: () => FIXED_HEADER_SIZE,
  LITTLE_ENDIAN: () => LITTLE_ENDIAN,
  MINISEED_THREE_MIME: () => MINISEED_THREE_MIME,
  MSeed3Header: () => MSeed3Header,
  MSeed3Record: () => MSeed3Record,
  UNKNOWN_DATA_VERSION: () => UNKNOWN_DATA_VERSION,
  areContiguous: () => areContiguous2,
  byChannel: () => byChannel2,
  calculateCRC32C: () => calculateCRC32C,
  convertMS2Record: () => convertMS2Record,
  convertMS2toMSeed3: () => convertMS2toMSeed3,
  crcToHexString: () => crcToHexString,
  createSeismogramSegment: () => createSeismogramSegment2,
  makeString: () => makeString2,
  merge: () => merge3,
  mergeSegments: () => mergeSegments2,
  padZeros: () => padZeros,
  parseExtraHeaders: () => parseExtraHeaders,
  parseMSeed3Records: () => parseMSeed3Records,
  seismogramPerChannel: () => seismogramPerChannel2,
  seismogramSegmentPerChannel: () => seismogramSegmentPerChannel2,
  toMSeed3: () => toMSeed3
});
var MINISEED_THREE_MIME = "application/vnd.fdsn.mseed3";
var UNKNOWN_DATA_VERSION = 0;
var CRC_OFFSET = 28;
var FIXED_HEADER_SIZE = 40;
var FDSN_PREFIX2 = "FDSN";
var LITTLE_ENDIAN = true;
var BIG_ENDIAN = false;
function toMSeed3(seis, extraHeaders) {
  const out = new Array(0);
  if (!isDef(extraHeaders)) {
    extraHeaders = {};
  }
  for (const seg of seis.segments) {
    const header = new MSeed3Header();
    let rawData;
    let encoding = 0;
    if (seg.isEncoded()) {
      const encoded = seg.getEncoded();
      if (encoded.length === 1) {
        rawData = encoded[0].dataView;
        encoding = encoded[0].compressionType;
      } else {
        const encodeTypeSet = /* @__PURE__ */ new Set();
        encoded.forEach((cur) => {
          encodeTypeSet.add(cur.compressionType);
        });
        const encodeTypes = Array.from(encodeTypeSet.values());
        if (encodeTypes.length > 1) {
          throw new Error(`more than one encoding type in seis segment: ${encodeTypes}`);
        } else if (encodeTypes.length === 0) {
          throw new Error(`zero encoding type in seis segment`);
        } else if (!encodeTypes[0]) {
          throw new Error(`only encoding type is undef`);
        }
        encoding = encodeTypes[0];
        if (!encoding) {
          throw new Error(`encoding is undefined`);
        }
        if (INTEGER || FLOAT || DOUBLE) {
          const totSize = encoded.reduce((acc, cur) => acc + cur.dataView.byteLength, 0);
          const combined = new Uint8Array(totSize);
          encoded.reduce((offset2, cur) => {
            combined.set(new Uint8Array(cur.dataView.buffer, cur.dataView.byteOffset, cur.dataView.byteLength), offset2);
            return offset2 + cur.dataView.byteLength;
          }, 0);
          rawData = new DataView(combined.buffer);
          if (encoding === STEIM1 || encoding === STEIM2) {
            rawData.setUint32(8, encoded[encoded.length - 1].dataView.getUint32(8));
          }
        } else {
          throw new Error(`Encoding type not steim 1 or 2 or primitive in seis segment: ${encoding}`);
        }
      }
    } else {
      rawData = new DataView(seg.y.buffer);
      if (seg.y instanceof Float32Array) {
        encoding = FLOAT;
      } else if (seg.y instanceof Int32Array) {
        encoding = INTEGER;
      } else if (seg.y instanceof Float64Array) {
        encoding = DOUBLE;
      } else {
        throw new Error("unable to save data of encoding: ");
      }
    }
    header.setStart(seg.startTime);
    header.encoding = encoding;
    if (seg.sampleRate > 1e-3) {
      header.sampleRatePeriod = seg.sampleRate;
    } else {
      header.sampleRatePeriod = -1 * seg.samplePeriod;
    }
    header.numSamples = seg.numPoints;
    header.publicationVersion = UNKNOWN_DATA_VERSION;
    const sid = seg.sourceId ? seg.sourceId : FDSNSourceId.createUnknown(seg.sampleRate);
    header.identifier = sid.toString();
    header.identifierLength = header.identifier.length;
    header.extraHeaders = extraHeaders;
    header.dataLength = rawData.byteLength;
    const record = new MSeed3Record(header, extraHeaders, rawData);
    record.calcSize();
    out.push(record);
  }
  return out;
}
function parseMSeed3Records(arrayBuffer) {
  const dataRecords = [];
  let offset2 = 0;
  while (offset2 < arrayBuffer.byteLength) {
    const dataView = new DataView(arrayBuffer, offset2);
    if (!(dataView.getUint8(0) === 77 && dataView.getUint8(1) === 83)) {
      throw new Error(
        `First byte must be M=77 S=83 at offset=${offset2}, but was ${dataView.getUint8(
          0
        )} ${dataView.getUint8(1)}`
      );
    }
    const dr = MSeed3Record.createFromDataView(dataView);
    dataRecords.push(dr);
    offset2 += dr.getSize();
  }
  return dataRecords;
}
var MSeed3Record = class {
  constructor(header, extraHeaders, rawData) {
    __publicField(this, "header");
    __publicField(this, "extraHeaders");
    __publicField(this, "rawData");
    this.header = header;
    this.rawData = rawData;
    this.extraHeaders = extraHeaders;
  }
  static parseSingleDataRecord(dataView) {
    const header = MSeed3Header.createFromDataView(dataView);
    const ehoffset = header.getSize();
    const dataoffset = header.getSize() + header.extraHeadersLength;
    const extraDataView = new DataView(
      dataView.buffer,
      dataView.byteOffset + ehoffset,
      header.extraHeadersLength
    );
    const extraHeaders = parseExtraHeaders(extraDataView);
    const sliceStart = dataView.byteOffset + dataoffset;
    const rawData = new DataView(
      dataView.buffer.slice(sliceStart, sliceStart + header.dataLength)
    );
    const xr = new MSeed3Record(header, extraHeaders, rawData);
    return xr;
  }
  static createFromDataView(dataView) {
    return MSeed3Record.parseSingleDataRecord(dataView);
  }
  calcSize() {
    const json = JSON.stringify(this.extraHeaders);
    if (json.length > 2) {
      this.header.extraHeadersLength = json.length;
    } else {
      this.header.extraHeadersLength = 0;
    }
    return this.getSize();
  }
  getSize() {
    return this.header.getSize() + this.header.extraHeadersLength + this.header.dataLength;
  }
  decompress() {
    return this.asEncodedDataSegment().decode();
  }
  asEncodedDataSegment() {
    let swapBytes = LITTLE_ENDIAN;
    if (this.header.encoding === 10 || this.header.encoding === 11 || this.header.encoding === 19) {
      swapBytes = BIG_ENDIAN;
    }
    return new EncodedDataSegment(
      this.header.encoding,
      this.rawData,
      this.header.numSamples,
      swapBytes
    );
  }
  codes() {
    return this.header.identifier;
  }
  save(dataView) {
    const json = JSON.stringify(this.extraHeaders);
    if (json.length > 2) {
      this.header.extraHeadersLength = json.length;
    } else {
      this.header.extraHeadersLength = 0;
    }
    let offset2 = this.header.save(dataView, 0, true);
    if (json.length > 2) {
      for (let i = 0; i < json.length; i++) {
        dataView.setInt8(offset2, json.charCodeAt(i));
        offset2++;
      }
    }
    if (this.rawData !== null) {
      for (let i = 0; i < this.rawData.byteLength; i++) {
        dataView.setUint8(offset2 + i, this.rawData.getUint8(i));
      }
      offset2 += this.rawData.byteLength;
    } else {
      throw new Error("rawData is null");
    }
    const dvcrc = dataView.getUint32(CRC_OFFSET, true);
    if (dvcrc !== 0) {
      throw new Error(`CRC is not zero before calculate! ${dvcrc}`);
    }
    const crc = calculateCRC32C(dataView.buffer);
    dataView.setUint32(CRC_OFFSET, crc, true);
    return offset2;
  }
  calcCrc() {
    const size = this.calcSize();
    const buff = new ArrayBuffer(size);
    const dataView = new DataView(buff);
    const offset2 = this.save(dataView);
    if (offset2 !== size) {
      throw new Error(`expect to write ${size} bytes but only ${offset2}`);
    }
    const crc = dataView.getUint32(CRC_OFFSET, true);
    return crc;
  }
  toString() {
    return `${this.header.toString()}
          extra headers: ${JSON.stringify(this.extraHeaders, null, 2)}`;
  }
};
var MSeed3Header = class {
  constructor() {
    __publicField(this, "recordIndicator");
    __publicField(this, "formatVersion");
    __publicField(this, "flags");
    __publicField(this, "nanosecond");
    __publicField(this, "year");
    __publicField(this, "dayOfYear");
    __publicField(this, "hour");
    __publicField(this, "minute");
    __publicField(this, "second");
    __publicField(this, "encoding");
    __publicField(this, "sampleRatePeriod");
    __publicField(this, "numSamples");
    __publicField(this, "crc");
    __publicField(this, "publicationVersion");
    __publicField(this, "identifierLength");
    __publicField(this, "extraHeadersLength");
    __publicField(this, "identifier");
    __publicField(this, "extraHeaders");
    __publicField(this, "dataLength");
    this.recordIndicator = "MS";
    this.formatVersion = 3;
    this.flags = 0;
    this.nanosecond = 0;
    this.year = 1970;
    this.dayOfYear = 1;
    this.hour = 0;
    this.minute = 0;
    this.second = 0;
    this.encoding = 3;
    this.sampleRatePeriod = 1;
    this.numSamples = 0;
    this.crc = 0;
    this.publicationVersion = UNKNOWN_DATA_VERSION;
    this.identifierLength = 0;
    this.extraHeadersLength = 2;
    this.identifier = "";
    this.extraHeaders = {};
    this.dataLength = 0;
  }
  static createFromDataView(dataView) {
    const header = new MSeed3Header();
    header.recordIndicator = makeString2(dataView, 0, 2);
    if (header.recordIndicator !== "MS") {
      throw new Error(
        "First 2 bytes of record should be MS but found " + header.recordIndicator
      );
    }
    header.formatVersion = dataView.getUint8(2);
    if (header.formatVersion !== 3) {
      throw new Error("Format Version should be 3, " + header.formatVersion);
    }
    header.flags = dataView.getUint8(3);
    const headerLittleEndian = true;
    header.nanosecond = dataView.getInt32(4, headerLittleEndian);
    header.year = dataView.getInt16(8, headerLittleEndian);
    if (checkByteSwap2(header.year)) {
      throw new Error("Looks like wrong byte order, year=" + header.year);
    }
    header.dayOfYear = dataView.getInt16(10, headerLittleEndian);
    header.hour = dataView.getUint8(12);
    header.minute = dataView.getUint8(13);
    header.second = dataView.getUint8(14);
    header.encoding = dataView.getUint8(15);
    header.sampleRatePeriod = dataView.getFloat64(16, headerLittleEndian);
    header.numSamples = dataView.getUint32(24, headerLittleEndian);
    header.crc = dataView.getUint32(28, headerLittleEndian);
    header.publicationVersion = dataView.getUint8(32);
    header.identifierLength = dataView.getUint8(33);
    header.extraHeadersLength = dataView.getUint16(34, headerLittleEndian);
    header.dataLength = dataView.getUint32(36, headerLittleEndian);
    header.identifier = makeString2(dataView, 40, header.identifierLength);
    return header;
  }
  get start() {
    return this._startToMoment();
  }
  get end() {
    return this.timeOfSample(this.numSamples - 1);
  }
  get sampleRate() {
    if (this.sampleRatePeriod < 0) {
      return 1 / this.sampleRatePeriod;
    } else {
      return this.sampleRatePeriod;
    }
  }
  getSize() {
    return FIXED_HEADER_SIZE + this.identifier.length;
  }
  toString() {
    let encode_name = "unknown";
    if (this.encoding === 11) {
      encode_name = "STEIM-2 integer compression";
    } else if (this.encoding === 10) {
      encode_name = "STEIM-1 integer compression";
    }
    return `  ${this.identifier}, version ${this.publicationVersion}, ${this.getSize() + this.dataLength} bytes (format: ${this.formatVersion})
             start time: ${this.getStartFieldsAsISO()}
      number of samples: ${this.numSamples}
       sample rate (Hz): ${this.sampleRate}
                  flags: [${(this.flags >>> 0).toString(2).padStart(8, "0")}] 8 bits
                    CRC: ${crcToHexString(this.crc)}
    extra header length: ${this.extraHeadersLength} bytes
    data payload length: ${this.dataLength} bytes
       payload encoding: ${encode_name} (val: ${this.encoding})`;
  }
  getStartFieldsAsISO() {
    return "" + this.year + "-" + padZeros(this.dayOfYear, 3) + "T" + padZeros(this.hour, 2) + ":" + padZeros(this.minute, 2) + ":" + padZeros(this.second, 2) + "." + padZeros(this.nanosecond, 9) + "Z";
  }
  setStart(starttime) {
    this.nanosecond = starttime.millisecond * 1e3;
    this.year = starttime.year;
    this.dayOfYear = starttime.ordinal;
    this.hour = starttime.hour;
    this.minute = starttime.minute;
    this.second = starttime.second;
  }
  timeOfSample(i) {
    return this.start.plus(Duration.fromMillis(1e3 * i / this.sampleRate));
  }
  save(dataView, offset2 = 0, zeroCrc = false) {
    dataView.setUint8(offset2, this.recordIndicator.charCodeAt(0));
    offset2++;
    dataView.setUint8(offset2, this.recordIndicator.charCodeAt(1));
    offset2++;
    dataView.setUint8(offset2, this.formatVersion);
    offset2++;
    dataView.setUint8(offset2, this.flags);
    offset2++;
    dataView.setUint32(offset2, this.nanosecond, true);
    offset2 += 4;
    dataView.setUint16(offset2, this.year, true);
    offset2 += 2;
    dataView.setUint16(offset2, this.dayOfYear, true);
    offset2 += 2;
    dataView.setUint8(offset2, this.hour);
    offset2++;
    dataView.setUint8(offset2, this.minute);
    offset2++;
    dataView.setUint8(offset2, this.second);
    offset2++;
    dataView.setUint8(offset2, this.encoding);
    offset2++;
    dataView.setFloat64(offset2, this.sampleRatePeriod, true);
    offset2 += 8;
    dataView.setUint32(offset2, this.numSamples, true);
    offset2 += 4;
    if (zeroCrc) {
      dataView.setUint32(offset2, 0, true);
    } else {
      dataView.setUint32(offset2, this.crc, true);
    }
    offset2 += 4;
    dataView.setUint8(offset2, this.publicationVersion);
    offset2++;
    dataView.setUint8(offset2, this.identifier.length);
    offset2++;
    dataView.setUint16(offset2, this.extraHeadersLength, true);
    offset2 += 2;
    dataView.setUint32(offset2, this.dataLength, true);
    offset2 += 4;
    for (let i = 0; i < this.identifier.length; i++) {
      dataView.setUint8(offset2, this.identifier.charCodeAt(i));
      offset2++;
    }
    return offset2;
  }
  _startToMoment() {
    return DateTime.fromObject({
      year: this.year,
      ordinal: this.dayOfYear,
      hour: this.hour,
      minute: this.minute,
      second: this.second,
      millisecond: Math.round(this.nanosecond / 1e6)
    }, UTC_OPTIONS);
  }
};
function parseExtraHeaders(dataView) {
  if (dataView.byteLength === 0) {
    return {};
  }
  const firstChar = dataView.getUint8(0);
  if (firstChar === 123) {
    return JSON.parse(makeString2(dataView, 0, dataView.byteLength));
  } else {
    throw new Error(
      "do not understand extras with first char val: " + firstChar + " " + (firstChar === 123)
    );
  }
}
function padZeros(val, len) {
  let out = "" + val;
  while (out.length < len) {
    out = "0" + out;
  }
  return out;
}
function makeString2(dataView, offset2, length3) {
  const utf8decoder = new TextDecoder("utf-8");
  const u8arr = new Uint8Array(
    dataView.buffer,
    dataView.byteOffset + offset2,
    length3
  );
  return utf8decoder.decode(u8arr).trim();
}
function checkByteSwap2(year2) {
  return year2 < 1960 || year2 > 2055;
}
function areContiguous2(dr1, dr2, sampRatio = 1.5) {
  const h1 = dr1.header;
  const h2 = dr2.header;
  return h1.end < h2.start && h1.end.plus(Duration.fromMillis(1e3 * sampRatio / h1.sampleRate)) >= h2.start;
}
function createSeismogramSegment2(contig) {
  const contigData = contig.map((dr) => dr.asEncodedDataSegment());
  const out = new SeismogramSegment(
    contigData,
    contig[0].header.sampleRate,
    contig[0].header.start
  );
  const codes = contig[0].header.identifier.slice(5).split("_");
  out.networkCode = codes[0];
  out.stationCode = codes[1];
  out.locationCode = codes[2];
  out.channelCode = codes[3] + codes[4] + codes[5];
  return out;
}
function merge3(drList) {
  return new Seismogram(mergeSegments2(drList));
}
function mergeSegments2(drList) {
  const out = [];
  let currDR;
  drList.sort(function(a3, b) {
    return a3.header.start.valueOf() - b.header.start.valueOf();
  });
  let contig = [];
  for (let i = 0; i < drList.length; i++) {
    currDR = drList[i];
    if (contig.length === 0) {
      contig.push(currDR);
    } else if (areContiguous2(contig[contig.length - 1], currDR)) {
      contig.push(currDR);
    } else {
      out.push(createSeismogramSegment2(contig));
      contig = [currDR];
    }
  }
  if (contig.length > 0) {
    out.push(createSeismogramSegment2(contig));
    contig = [];
  }
  return out;
}
function byChannel2(drList) {
  const out = /* @__PURE__ */ new Map();
  let key;
  for (let i = 0; i < drList.length; i++) {
    const currDR = drList[i];
    key = currDR.codes();
    let drArray = out.get(key);
    if (!drArray) {
      drArray = [currDR];
      out.set(key, drArray);
    } else {
      drArray.push(currDR);
    }
  }
  return out;
}
function seismogramSegmentPerChannel2(drList) {
  let out = new Array(0);
  const byChannelMap = byChannel2(drList);
  byChannelMap.forEach((segments) => out = out.concat(mergeSegments2(segments)));
  return out;
}
function seismogramPerChannel2(drList) {
  const out = [];
  const byChannelMap = byChannel2(drList);
  byChannelMap.forEach((segments) => out.push(merge3(segments)));
  return out;
}
function convertMS2toMSeed3(mseed2) {
  const out = [];
  for (let i = 0; i < mseed2.length; i++) {
    out.push(convertMS2Record(mseed2[i]));
  }
  return out;
}
function convertMS2Record(ms2record) {
  const xHeader = new MSeed3Header();
  const xExtras = {};
  const ms2H = ms2record.header;
  xHeader.flags = (ms2H.activityFlags & 1) * 2 + (ms2H.ioClockFlags & 64) * 4 + (ms2H.dataQualityFlags & 16) * 8;
  xHeader.year = ms2H.startBTime.year;
  xHeader.dayOfYear = ms2H.startBTime.jday;
  xHeader.hour = ms2H.startBTime.hour;
  xHeader.minute = ms2H.startBTime.min;
  xHeader.second = ms2H.startBTime.sec;
  xHeader.nanosecond = ms2H.startBTime.tenthMilli * 1e5 + ms2H.startBTime.microsecond * 1e3;
  xHeader.sampleRatePeriod = ms2H.sampleRate >= 1 ? ms2H.sampleRate : -1 / ms2H.sampleRate;
  xHeader.encoding = ms2record.header.encoding;
  xHeader.publicationVersion = UNKNOWN_DATA_VERSION;
  xHeader.dataLength = ms2record.data.byteLength;
  xHeader.identifier = FDSN_PREFIX2 + ":" + ms2H.netCode + SEP2 + ms2H.staCode + SEP2 + (ms2H.locCode ? ms2H.locCode : "") + SEP2 + ms2H.chanCode;
  xHeader.identifierLength = xHeader.identifier.length;
  xHeader.numSamples = ms2H.numSamples;
  xHeader.crc = 0;
  if (ms2H.typeCode) {
    if (ms2H.typeCode === R_TYPECODE) {
      xHeader.publicationVersion = 1;
    } else if (ms2H.typeCode === D_TYPECODE) {
      xHeader.publicationVersion = 2;
    } else if (ms2H.typeCode === Q_TYPECODE) {
      xHeader.publicationVersion = 3;
    } else if (ms2H.typeCode === M_TYPECODE) {
      xHeader.publicationVersion = 4;
    }
    if (ms2H.typeCode !== D_TYPECODE) {
      xExtras.DataQuality = ms2H.typeCode;
    }
  }
  if (xHeader.nanosecond < 0) {
    xHeader.second -= 1;
    xHeader.nanosecond += 1e9;
    if (xHeader.second < 0) {
      xHeader.second += 60;
      xHeader.minute -= 1;
      if (xHeader.minute < 0) {
        xHeader.minute += 60;
        xHeader.hour -= 1;
        if (xHeader.hour < 0) {
          xHeader.hour += 24;
          xHeader.dayOfYear = -1;
          if (xHeader.dayOfYear < 0) {
            xHeader.dayOfYear += 365;
            xHeader.year -= 1;
          }
        }
      }
    }
  }
  xHeader.extraHeadersLength = JSON.stringify(xExtras).length;
  const out = new MSeed3Record(xHeader, xExtras, ms2record.data);
  return out;
}
var SEP2 = "_";
var kCRCTable = new Int32Array([
  0,
  4067132163,
  3778769143,
  324072436,
  3348797215,
  904991772,
  648144872,
  3570033899,
  2329499855,
  2024987596,
  1809983544,
  2575936315,
  1296289744,
  3207089363,
  2893594407,
  1578318884,
  274646895,
  3795141740,
  4049975192,
  51262619,
  3619967088,
  632279923,
  922689671,
  3298075524,
  2592579488,
  1760304291,
  2075979607,
  2312596564,
  1562183871,
  2943781820,
  3156637768,
  1313733451,
  549293790,
  3537243613,
  3246849577,
  871202090,
  3878099393,
  357341890,
  102525238,
  4101499445,
  2858735121,
  1477399826,
  1264559846,
  3107202533,
  1845379342,
  2677391885,
  2361733625,
  2125378298,
  820201905,
  3263744690,
  3520608582,
  598981189,
  4151959214,
  85089709,
  373468761,
  3827903834,
  3124367742,
  1213305469,
  1526817161,
  2842354314,
  2107672161,
  2412447074,
  2627466902,
  1861252501,
  1098587580,
  3004210879,
  2688576843,
  1378610760,
  2262928035,
  1955203488,
  1742404180,
  2511436119,
  3416409459,
  969524848,
  714683780,
  3639785095,
  205050476,
  4266873199,
  3976438427,
  526918040,
  1361435347,
  2739821008,
  2954799652,
  1114974503,
  2529119692,
  1691668175,
  2005155131,
  2247081528,
  3690758684,
  697762079,
  986182379,
  3366744552,
  476452099,
  3993867776,
  4250756596,
  255256311,
  1640403810,
  2477592673,
  2164122517,
  1922457750,
  2791048317,
  1412925310,
  1197962378,
  3037525897,
  3944729517,
  427051182,
  170179418,
  4165941337,
  746937522,
  3740196785,
  3451792453,
  1070968646,
  1905808397,
  2213795598,
  2426610938,
  1657317369,
  3053634322,
  1147748369,
  1463399397,
  2773627110,
  4215344322,
  153784257,
  444234805,
  3893493558,
  1021025245,
  3467647198,
  3722505002,
  797665321,
  2197175160,
  1889384571,
  1674398607,
  2443626636,
  1164749927,
  3070701412,
  2757221520,
  1446797203,
  137323447,
  4198817972,
  3910406976,
  461344835,
  3484808360,
  1037989803,
  781091935,
  3705997148,
  2460548119,
  1623424788,
  1939049696,
  2180517859,
  1429367560,
  2807687179,
  3020495871,
  1180866812,
  410100952,
  3927582683,
  4182430767,
  186734380,
  3756733383,
  763408580,
  1053836080,
  3434856499,
  2722870694,
  1344288421,
  1131464017,
  2971354706,
  1708204729,
  2545590714,
  2229949006,
  1988219213,
  680717673,
  3673779818,
  3383336350,
  1002577565,
  4010310262,
  493091189,
  238226049,
  4233660802,
  2987750089,
  1082061258,
  1395524158,
  2705686845,
  1972364758,
  2279892693,
  2494862625,
  1725896226,
  952904198,
  3399985413,
  3656866545,
  731699698,
  4283874585,
  222117402,
  510512622,
  3959836397,
  3280807620,
  837199303,
  582374963,
  3504198960,
  68661723,
  4135334616,
  3844915500,
  390545967,
  1230274059,
  3141532936,
  2825850620,
  1510247935,
  2395924756,
  2091215383,
  1878366691,
  2644384480,
  3553878443,
  565732008,
  854102364,
  3229815391,
  340358836,
  3861050807,
  4117890627,
  119113024,
  1493875044,
  2875275879,
  3090270611,
  1247431312,
  2660249211,
  1828433272,
  2141937292,
  2378227087,
  3811616794,
  291187481,
  34330861,
  4032846830,
  615137029,
  3603020806,
  3314634738,
  939183345,
  1776939221,
  2609017814,
  2295496738,
  2058945313,
  2926798794,
  1545135305,
  1330124605,
  3173225534,
  4084100981,
  17165430,
  307568514,
  3762199681,
  888469610,
  3332340585,
  3587147933,
  665062302,
  2042050490,
  2346497209,
  2559330125,
  1793573966,
  3190661285,
  1279665062,
  1595330642,
  2910671697
]);
function calculateCRC32C(buf, initial = 0) {
  let ubuf;
  if (buf instanceof ArrayBuffer) {
    ubuf = new Uint8Array(buf);
  } else if (buf instanceof Uint8Array) {
    ubuf = buf;
  } else {
    throw new Error("arg must be ArrayBuffer or Uint8Array");
  }
  let crc = (initial | 0) ^ -1;
  for (let i = 0; i < ubuf.length; i++) {
    crc = kCRCTable[(crc ^ ubuf[i]) & 255] ^ crc >>> 8;
    let tmp = crc;
    tmp = (tmp ^ -1) >>> 0;
    if (tmp < 0) {
      tmp = 4294967295 + tmp + 1;
    }
  }
  return (crc ^ -1) >>> 0;
}
function crcToHexString(crc) {
  if (crc < 0) {
    crc = 4294967295 + crc + 1;
  }
  const s3 = crc.toString(16).toUpperCase();
  return "0x" + s3;
}

// src/datalink.ts
var DATALINK_PROTOCOL = "DataLink1.0";
var MODE = /* @__PURE__ */ ((MODE2) => {
  MODE2["Query"] = "QUERY";
  MODE2["Stream"] = "STREAM";
  return MODE2;
})(MODE || {});
var QUERY_MODE = "QUERY" /* Query */;
var STREAM_MODE = "STREAM" /* Stream */;
var MAX_PROC_NUM = Math.pow(2, 16) - 2;
var USER_BROWSER = "browser";
var DEFAULT_PROGRAM = "seisplotjs";
var DEFAULT_ARCH = "javascript";
var ERROR = "ERROR";
var PACKET = "PACKET";
var STREAM = "STREAM";
var ENDSTREAM = "ENDSTREAM";
var MSEED_TYPE = "/MSEED";
var MSEED3_TYPE = "/MSEED3";
var IRIS_RINGSERVER_URL = "ws://rtserve.iris.washington.edu/datalink";
var defaultHandleResponse = function(message) {
  log("Unhandled datalink response: " + message);
};
var DataLinkConnection = class {
  constructor(url, packetHandler, errorHandler) {
    __publicField(this, "url");
    __publicField(this, "_mode");
    __publicField(this, "packetHandler");
    __publicField(this, "errorHandler");
    __publicField(this, "closeHandler");
    __publicField(this, "serverId");
    __publicField(this, "clientIdNum");
    __publicField(this, "programname");
    __publicField(this, "username");
    __publicField(this, "architecture");
    __publicField(this, "_responseResolve");
    __publicField(this, "_responseReject");
    __publicField(this, "webSocket");
    this.webSocket = null;
    this.url = url;
    this._mode = "QUERY" /* Query */;
    this.packetHandler = packetHandler;
    this.errorHandler = errorHandler;
    this.closeHandler = null;
    this.serverId = null;
    this.clientIdNum = Math.floor(Math.random() * MAX_PROC_NUM) + 1;
    this.programname = DEFAULT_PROGRAM;
    this.username = USER_BROWSER;
    this.architecture = DEFAULT_ARCH;
    this._responseResolve = null;
    this._responseReject = null;
  }
  setOnClose(closeHandler) {
    this.closeHandler = closeHandler;
  }
  connect() {
    if (this.webSocket) {
      this.webSocket.close();
      this.webSocket = null;
    }
    const that = this;
    return new Promise(function(resolve, reject) {
      if (that.webSocket) {
        that.webSocket.close();
      }
      const webSocket = new WebSocket(that.url, DATALINK_PROTOCOL);
      that.webSocket = webSocket;
      webSocket.binaryType = "arraybuffer";
      webSocket.onmessage = function(event) {
        that.handle(event);
      };
      webSocket.onerror = function(event) {
        that.handleError(new Error("" + stringify(event)));
        reject(event);
      };
      webSocket.onclose = function(closeEvent) {
        that.webSocket = null;
        that._mode = "QUERY" /* Query */;
        if (that.closeHandler) {
          that.closeHandler(closeEvent);
        }
      };
      webSocket.onopen = function() {
        resolve(that);
      };
    }).then((datalink) => {
      return datalink.sendId();
    }).then((idmsg) => {
      that.serverId = idmsg;
      return idmsg;
    });
  }
  isConnected() {
    return this.webSocket !== null;
  }
  get mode() {
    return this._mode;
  }
  stream() {
    if (this._mode === "STREAM" /* Stream */) {
      return;
    }
    this._mode = "STREAM" /* Stream */;
    this.sendDLCommand(STREAM, "");
  }
  endStream() {
    if (this.webSocket === null || this._mode === null || this._mode === "QUERY" /* Query */) {
      return;
    }
    this._mode = "QUERY" /* Query */;
    this.sendDLCommand(ENDSTREAM, "");
  }
  close() {
    if (this.webSocket) {
      this.endStream();
      if (this.webSocket) {
        this.webSocket.close();
      }
      this.webSocket = null;
      this._mode = "QUERY" /* Query */;
    }
  }
  sendId() {
    const that = this;
    return this.id(
      this.programname,
      this.username,
      stringify(this.clientIdNum),
      this.architecture
    ).then((dlResponse) => DataLinkConnection.ensureDataLinkResponse(dlResponse)).then((dlResponse) => {
      if (dlResponse.type === "ID") {
        that.serverId = "" + dlResponse.message;
        return that.serverId;
      } else {
        throw new Error("not ID response: " + stringify(dlResponse.type));
      }
    });
  }
  encodeDL(header, data) {
    let cmdLen = header.length;
    let len = 3 + header.length;
    let lenStr = "";
    if (data && data.length > 0) {
      lenStr = String(data.length);
      len += lenStr.length + 1;
      cmdLen += lenStr.length + 1;
      len += data.length;
    }
    const rawPacket = new ArrayBuffer(len);
    const binaryPacket = new Uint8Array(rawPacket);
    const packet = new DataView(rawPacket);
    packet.setUint8(0, 68);
    packet.setUint8(1, 76);
    packet.setUint8(2, cmdLen);
    let i = 3;
    for (const c5 of header) {
      packet.setUint8(i, c5.charCodeAt(0));
      i++;
    }
    const SPACE = " ";
    if (data && data.length > 0) {
      packet.setUint8(i, SPACE.charCodeAt(0));
      i++;
      for (const c5 of lenStr) {
        packet.setUint8(i, c5.charCodeAt(0));
        i++;
      }
      binaryPacket.set(data, i);
    }
    return rawPacket;
  }
  sendDLBinary(header, data) {
    const rawPacket = this.encodeDL(header, data);
    if (this.webSocket) {
      this.webSocket.send(rawPacket);
    } else {
      throw new Error("WebSocket has been closed.");
    }
  }
  sendDLCommand(command, dataString) {
    this.sendDLBinary(command, stringToUint8Array(dataString));
  }
  awaitDLBinary(header, data) {
    const that = this;
    const promise = new Promise(function(resolve, reject) {
      that._responseResolve = resolve;
      that._responseReject = reject;
      that.sendDLBinary(header, data);
    }).then((response) => {
      that._responseResolve = null;
      that._responseReject = null;
      return response;
    }).catch((error) => {
      that._responseResolve = null;
      that._responseReject = null;
      throw error;
    });
    return promise;
  }
  awaitDLCommand(command, dataString) {
    return this.awaitDLBinary(command, stringToUint8Array(dataString));
  }
  writeAck(streamid, hpdatastart, hpdataend, data) {
    const header = `WRITE ${streamid} ${dateTimeToHPTime(
      hpdatastart
    )} ${dateTimeToHPTime(hpdataend)} A`;
    return this.awaitDLBinary(header, data);
  }
  static ensureDataLinkResponse(dl) {
    if (dl instanceof DataLinkResponse) {
      return dl;
    }
    throw new Error(`Expected DataLinkResponse but got ${dl.header}`);
  }
  static ensureDataLinkPacket(dl) {
    if (dl instanceof DataLinkPacket) {
      return dl;
    }
    throw new Error(`Expected DataLinkPacket but got ${dl.type}`);
  }
  id(programname, username, processid, architecture) {
    const command = `ID ${programname}:${username}:${processid}:${architecture}`;
    return this.awaitDLCommand(command).then(
      (dlResponse) => DataLinkConnection.ensureDataLinkResponse(dlResponse)
    );
  }
  info(infoType) {
    const command = `INFO ${infoType}`;
    return this.awaitDLCommand(command).then(
      (dlResponse) => DataLinkConnection.ensureDataLinkResponse(dlResponse)
    );
  }
  positionAfter(time2) {
    return this.positionAfterHPTime(dateTimeToHPTime(time2)).then(
      (dlResponse) => DataLinkConnection.ensureDataLinkResponse(dlResponse)
    );
  }
  positionAfterHPTime(hpTime) {
    const command = `POSITION AFTER ${hpTime}`;
    return this.awaitDLCommand(command).then(
      (dlResponse) => DataLinkConnection.ensureDataLinkResponse(dlResponse)
    );
  }
  match(pattern) {
    const command = `MATCH`;
    return this.awaitDLCommand(command, pattern).then(
      (dlResponse) => DataLinkConnection.ensureDataLinkResponse(dlResponse)
    );
  }
  reject(pattern) {
    const command = `REJECT ${pattern}`;
    return this.awaitDLCommand(command).then(
      (dlResponse) => DataLinkConnection.ensureDataLinkResponse(dlResponse)
    );
  }
  read(packetId) {
    const command = `READ ${packetId}`;
    return this.awaitDLBinary(command).then(
      (dlResponse) => DataLinkConnection.ensureDataLinkPacket(dlResponse)
    );
  }
  handle(wsEvent) {
    const rawData = wsEvent.data;
    const dlPreHeader = new DataView(rawData, 0, 3);
    if ("D" === String.fromCharCode(dlPreHeader.getUint8(0)) && "L" === String.fromCharCode(dlPreHeader.getUint8(1))) {
      const headerLen = dlPreHeader.getUint8(2);
      const header = dataViewToString(new DataView(rawData, 3, headerLen));
      if (header.startsWith(PACKET)) {
        const packet = new DataLinkPacket(
          header,
          new DataView(rawData, 3 + headerLen)
        );
        if (this.packetHandler) {
          try {
            this.packetHandler(packet);
          } catch (e) {
            this.errorHandler(toError(e));
          }
        } else {
          this.errorHandler(new Error("packetHandler not defined"));
        }
      } else {
        let dv;
        if (rawData.byteLength > 3 + headerLen) {
          dv = new DataView(rawData, 3 + headerLen);
        }
        const dlResponse = DataLinkResponse.parse(header, dv);
        if (dlResponse.type === "ENDSTREAM") {
          this._mode = "QUERY" /* Query */;
        } else if (dlResponse.type === "ERROR") {
          this.handleError(
            new Error(`value=${dlResponse.value} ${dlResponse.message}`, { cause: dlResponse })
          );
        } else {
          if (this._responseResolve) {
            this._responseResolve(dlResponse);
          } else {
            defaultHandleResponse(header);
          }
        }
      }
    } else {
      throw new Error("DataLink Packet did not start with DL");
    }
  }
  handleError(error) {
    if (this._responseReject) {
      this._responseReject(error);
    }
    if (this.errorHandler) {
      this.errorHandler(error);
    } else {
      log("datalink handleError: " + error.message);
    }
  }
};
var DataLinkResponse = class {
  constructor(type2, value, message) {
    __publicField(this, "type");
    __publicField(this, "value");
    __publicField(this, "message");
    this.type = type2;
    this.value = value;
    this.message = message;
  }
  toString() {
    return `${this.type} ${this.value} | ${this.message}`;
  }
  static parse(header, data) {
    let value = "";
    const s3 = header.split(" ");
    const type2 = s3[0];
    let message = "";
    if (type2 === "ID") {
      message = "" + header.substring(3);
    } else if (type2 === "ENDSTREAM" || type2 === "INFO" || type2 === "OK" || type2 === "ERROR") {
      value = s3[1];
      if (data) {
        message = dataViewToString(
          new DataView(data.buffer, 3 + header.length)
        );
      }
    } else {
      log(`unknown DataLink response type: ${type2}  ${header}`);
      message = header.substring(type2.length + 1);
    }
    return new DataLinkResponse(type2, value, message);
  }
};
var DataLinkPacket = class {
  constructor(header, dataview) {
    __publicField(this, "header");
    __publicField(this, "data");
    __publicField(this, "streamId");
    __publicField(this, "pktid");
    __publicField(this, "hppackettime");
    __publicField(this, "hppacketstart");
    __publicField(this, "hppacketend");
    __publicField(this, "dataSize");
    __publicField(this, "_miniseed");
    __publicField(this, "_mseed3");
    this._miniseed = null;
    this._mseed3 = null;
    this.header = header;
    this.data = dataview;
    const split = this.header.split(" ");
    this.streamId = split[1];
    this.pktid = split[2];
    this.hppackettime = split[3];
    this.hppacketstart = split[4];
    this.hppacketend = split[5];
    this.dataSize = Number.parseInt(split[6]);
    if (dataview.byteLength < this.dataSize) {
      throw new Error(
        `not enough bytes in dataview for packet:  ${this.dataSize}`
      );
    }
  }
  get packetStart() {
    return hpTimeToMoment(parseInt(this.hppacketstart));
  }
  get packetEnd() {
    return hpTimeToMoment(parseInt(this.hppacketend));
  }
  get packetTime() {
    return hpTimeToMoment(parseInt(this.hppackettime));
  }
  isMiniseed() {
    return isDef(this._miniseed) || this.streamId.endsWith(MSEED_TYPE);
  }
  asMiniseed() {
    if (!isDef(this._miniseed)) {
      if (this.streamId.endsWith(MSEED_TYPE)) {
        this._miniseed = parseSingleDataRecord(this.data);
      } else {
        this._miniseed = null;
      }
    }
    return this._miniseed;
  }
  isMiniseed3() {
    return isDef(this._mseed3) || this.streamId.endsWith(MSEED3_TYPE);
  }
  asMiniseed3() {
    if (!isDef(this._mseed3)) {
      if (this.streamId.endsWith(MSEED3_TYPE)) {
        this._mseed3 = MSeed3Record.parseSingleDataRecord(this.data);
      } else if (this.streamId.endsWith(MSEED_TYPE)) {
        const ms2 = this.asMiniseed();
        if (ms2) {
          this._mseed3 = convertMS2Record(ms2);
        }
      } else {
        this._mseed3 = null;
      }
    }
    return this._mseed3;
  }
};
function dateTimeToHPTime(m2) {
  return m2.valueOf() * 1e3;
}
function hpTimeToMoment(hptime) {
  return DateTime.fromMillis(hptime / 1e3, UTC_OPTIONS);
}
function stringToUint8Array(dataString) {
  let binaryData;
  if (isNonEmptyStringArg(dataString)) {
    binaryData = new Uint8Array(dataString.length);
    for (let i = 0; i < dataString.length; i++) {
      binaryData[i] = dataString.charCodeAt(i);
    }
  } else {
    binaryData = new Uint8Array(0);
  }
  return binaryData;
}

// src/dataset.ts
var dataset_exports = {};
__export(dataset_exports, {
  CATALOG_FILE: () => CATALOG_FILE,
  DATASET_DIR: () => DATASET_DIR,
  DOT_ZIP_EXT: () => DOT_ZIP_EXT,
  Dataset: () => Dataset,
  INVENTORY_FILE: () => INVENTORY_FILE,
  SEISMOGRAM_DIR: () => SEISMOGRAM_DIR,
  ZIP_FILENAME: () => ZIP_FILENAME,
  createExtraHeaders: () => createExtraHeaders,
  insertExtraHeaders: () => insertExtraHeaders,
  load: () => load,
  loadFromFile: () => loadFromFile,
  loadFromZip: () => loadFromZip,
  sddFromMSeed3: () => sddFromMSeed3
});

// src/quakeml.ts
var quakeml_exports = {};
__export(quakeml_exports, {
  ANSS_CATALOG_NS: () => ANSS_CATALOG_NS,
  ANSS_NS: () => ANSS_NS,
  Arrival: () => Arrival,
  BED_NS: () => BED_NS,
  FAKE_ORIGIN_TIME: () => FAKE_ORIGIN_TIME,
  IRIS_NS: () => IRIS_NS,
  Magnitude: () => Magnitude,
  Origin: () => Origin,
  Pick: () => Pick,
  QML_NS: () => QML_NS,
  Quake: () => Quake,
  UNKNOWN_MAG_TYPE: () => UNKNOWN_MAG_TYPE,
  UNKNOWN_PUBLIC_ID: () => UNKNOWN_PUBLIC_ID,
  USGS_HOST: () => USGS_HOST,
  createQuakeFromValues: () => createQuakeFromValues,
  parseQuakeML: () => parseQuakeML,
  parseUtil: () => parseUtil2
});
var QML_NS = "http://quakeml.org/xmlns/quakeml/1.2";
var BED_NS = "http://quakeml.org/xmlns/bed/1.2";
var IRIS_NS = "http://service.iris.edu/fdsnws/event/1/";
var ANSS_NS = "http://anss.org/xmlns/event/0.1";
var ANSS_CATALOG_NS = "http://anss.org/xmlns/catalog/0.1";
var USGS_HOST = "earthquake.usgs.gov";
var UNKNOWN_MAG_TYPE = "unknown";
var UNKNOWN_PUBLIC_ID = "unknownId";
var FAKE_ORIGIN_TIME = DateTime.fromISO("1900-01-01T00:00:00Z");
var Quake = class {
  constructor(publicId) {
    __publicField(this, "eventId");
    __publicField(this, "publicId");
    __publicField(this, "description", "");
    __publicField(this, "magnitudeList", []);
    __publicField(this, "originList", []);
    __publicField(this, "pickList", []);
    __publicField(this, "preferredOriginId");
    __publicField(this, "_preferredOrigin", null);
    __publicField(this, "preferredMagnitudeId");
    __publicField(this, "_preferredMagnitude", null);
    this.publicId = publicId;
  }
  static createFromXml(qml, host) {
    if (qml.localName !== "event") {
      throw new Error(`Cannot extract, not a QuakeML Event: ${qml.localName}`);
    }
    const publicId = _requireAttribute3(qml, "publicID");
    const out = new Quake(publicId);
    const desc = _grabFirstElText3(_grabFirstEl2(qml, "description"), "text");
    if (isStringArg(desc)) {
      out.description = desc;
    }
    const allPickEls = Array.from(qml.getElementsByTagNameNS(BED_NS, "pick"));
    const allPicks = [];
    for (const pickEl of allPickEls) {
      allPicks.push(Pick.createFromXml(pickEl));
    }
    const allOriginEls = Array.from(qml.getElementsByTagNameNS(BED_NS, "origin"));
    const allOrigins = [];
    for (const originEl of allOriginEls) {
      allOrigins.push(Origin.createFromXml(originEl, allPicks));
    }
    const allMagEls = Array.from(qml.getElementsByTagNameNS(BED_NS, "magnitude"));
    const allMags = [];
    for (const magEl of allMagEls) {
      allMags.push(Magnitude.createFromXml(magEl));
    }
    out.originList = allOrigins;
    out.magnitudeList = allMags;
    out.pickList = allPicks;
    out.eventId = Quake.extractEventId(qml, host);
    out.preferredOriginId = _grabFirstElText3(qml, "preferredOriginID");
    out.preferredMagnitudeId = _grabFirstElText3(qml, "preferredMagnitudeID");
    if (isNonEmptyStringArg(out.preferredOriginId)) {
      for (const o of allOrigins) {
        if (o.publicId === out.preferredOriginId) {
          out._preferredOrigin = o;
        } else {
          log(
            `no preferredOriginId match: ${o.publicId} ${out.preferredOriginId}`
          );
          out._preferredOrigin = null;
        }
      }
    }
    if (isNonEmptyStringArg(out.preferredMagnitudeId)) {
      for (const m2 of allMags) {
        if (m2.publicId === out.preferredMagnitudeId) {
          out._preferredMagnitude = m2;
        } else {
          log(`no match: ${m2.publicId} ${out.preferredMagnitudeId}`);
          out._preferredMagnitude = null;
        }
      }
    }
    return out;
  }
  static extractEventId(qml, host) {
    const eventId = _grabAttributeNS2(qml, ANSS_CATALOG_NS, "eventid");
    const catalogEventSource = _grabAttributeNS2(
      qml,
      ANSS_CATALOG_NS,
      "eventsource"
    );
    if (isNonEmptyStringArg(eventId)) {
      if (host === USGS_HOST && isNonEmptyStringArg(catalogEventSource)) {
        return catalogEventSource + eventId;
      } else {
        return eventId;
      }
    }
    const publicid = _grabAttribute3(qml, "publicID");
    if (isNonEmptyStringArg(publicid)) {
      let re2 = /eventid=([\w\d]+)/;
      let parsed = re2.exec(publicid);
      if (parsed) {
        return parsed[1];
      }
      re2 = /evid=([\w\d]+)/;
      parsed = re2.exec(publicid);
      if (parsed) {
        return parsed[1];
      }
    }
    return UNKNOWN_PUBLIC_ID;
  }
  get preferredOrigin() {
    if (isDef(this._preferredOrigin)) {
      return this._preferredOrigin;
    } else {
      throw new Error("No preferred origin");
    }
  }
  get origin() {
    if (isDef(this._preferredOrigin)) {
      return this._preferredOrigin;
    } else if (this.originList.length > 1) {
      return this.originList[0];
    } else {
      throw new Error("No origins in quake");
    }
  }
  get preferredMagnitude() {
    if (isDef(this._preferredMagnitude)) {
      return this._preferredMagnitude;
    } else {
      throw new Error("No preferred Magnitude");
    }
  }
  get magnitude() {
    if (isDef(this._preferredMagnitude)) {
      return this._preferredMagnitude;
    } else if (this.magnitudeList.length > 1) {
      return this.magnitudeList[0];
    } else {
      throw new Error("No magnitudes in quake");
    }
  }
  get time() {
    return this.origin.time;
  }
  get latitude() {
    return this.origin.latitude;
  }
  get longitude() {
    return this.origin.longitude;
  }
  get depth() {
    return this.origin.depth;
  }
  get depthKm() {
    return this.depth / 1e3;
  }
  get arrivals() {
    return this.preferredOrigin.arrivalList;
  }
  get picks() {
    return this.pickList;
  }
  toString() {
    return stringify(this.time) + " " + stringify(this.latitude) + "/" + stringify(this.longitude) + " " + stringify(this.depth / 1e3) + " km " + this.magnitude.toString();
  }
};
var Origin = class {
  constructor() {
    __publicField(this, "time");
    __publicField(this, "latitude");
    __publicField(this, "longitude");
    __publicField(this, "depth");
    __publicField(this, "arrivalList");
    __publicField(this, "publicId");
    this.time = FAKE_ORIGIN_TIME;
    this.latitude = Number.NaN;
    this.longitude = Number.NaN;
    this.depth = 0;
    this.arrivalList = [];
    this.publicId = UNKNOWN_PUBLIC_ID;
  }
  static createFromXml(qml, allPicks) {
    if (qml.localName !== "origin") {
      throw new Error(`Cannot extract, not a QuakeML Origin: ${qml.localName}`);
    }
    const out = new Origin();
    const otimeStr = _grabFirstElText3(_grabFirstEl2(qml, "time"), "value");
    if (isNonEmptyStringArg(otimeStr)) {
      out.time = isoToDateTime(otimeStr);
    } else {
      log("origintime is missing...");
    }
    const lat = _grabFirstElFloat3(_grabFirstEl2(qml, "latitude"), "value");
    if (isNumArg(lat)) {
      out.latitude = lat;
    }
    const lon = _grabFirstElFloat3(_grabFirstEl2(qml, "longitude"), "value");
    if (isNumArg(lon)) {
      out.longitude = lon;
    }
    const depth = _grabFirstElFloat3(_grabFirstEl2(qml, "depth"), "value");
    if (isNumArg(depth)) {
      out.depth = depth;
    }
    const pid = _grabAttribute3(qml, "publicID");
    if (isNonEmptyStringArg(pid)) {
      out.publicId = pid;
    }
    const allArrivalEls = Array.from(qml.getElementsByTagNameNS(BED_NS, "arrival"));
    const allArrivals = [];
    for (const arrivalEl of allArrivalEls) {
      allArrivals.push(Arrival.createFromXml(arrivalEl, allPicks));
    }
    out.arrivalList = allArrivals;
    return out;
  }
  toString() {
    return stringify(this.time) + " " + stringify(this.latitude) + " " + stringify(this.longitude) + " " + stringify(this.depth);
  }
  get arrivals() {
    return this.arrivalList;
  }
};
var Magnitude = class {
  constructor(mag, type2) {
    __publicField(this, "mag");
    __publicField(this, "type");
    __publicField(this, "publicId");
    this.mag = mag;
    this.type = type2;
    this.publicId = UNKNOWN_PUBLIC_ID;
  }
  static createFromXml(qml) {
    if (qml.localName !== "magnitude") {
      throw new Error(
        `Cannot extract, not a QuakeML Magnitude: ${qml.localName}`
      );
    }
    const mag = _grabFirstElFloat3(_grabFirstElNS(qml, BED_NS, "mag"), "value");
    let type2 = _grabFirstElText3(qml, "type");
    if (isNumArg(mag)) {
      if (!isNonEmptyStringArg(type2)) {
        type2 = UNKNOWN_MAG_TYPE;
      }
      const out = new Magnitude(mag, type2);
      const pid = _grabAttribute3(qml, "publicID");
      if (isNonEmptyStringArg(pid)) {
        out.publicId = pid;
      }
      return out;
    } else {
      throw new Error(
        `Did not find mag and type in Element: ${stringify(mag)} ${stringify(
          type2
        )}`
      );
    }
  }
  toString() {
    return stringify(this.mag) + " " + stringify(this.type);
  }
};
var Arrival = class {
  constructor(phase, pick2) {
    __publicField(this, "phase");
    __publicField(this, "pick");
    __publicField(this, "publicId");
    this.phase = phase;
    this.pick = pick2;
    this.publicId = UNKNOWN_PUBLIC_ID;
  }
  static createFromXml(arrivalQML, allPicks) {
    if (arrivalQML.localName !== "arrival") {
      throw new Error(
        `Cannot extract, not a QuakeML Arrival: ${arrivalQML.localName}`
      );
    }
    const pickId = _grabFirstElText3(arrivalQML, "pickID");
    const phase = _grabFirstElText3(arrivalQML, "phase");
    if (isNonEmptyStringArg(phase) && isNonEmptyStringArg(pickId)) {
      const myPick = allPicks.find(function(p) {
        return p.publicId === pickId;
      });
      if (!myPick) {
        throw new Error("Can't find pick with Id=" + pickId + " for Arrival");
      }
      const out = new Arrival(phase, myPick);
      const pid = _grabAttribute3(arrivalQML, "publicID");
      if (isNonEmptyStringArg(pid)) {
        out.publicId = pid;
      }
      return out;
    } else {
      throw new Error(
        "Arrival does not have phase or pickId: " + stringify(phase) + " " + stringify(pickId)
      );
    }
  }
};
var Pick = class {
  constructor(time2, networkCode, stationCode, locationCode, channelCode) {
    __publicField(this, "time");
    __publicField(this, "networkCode");
    __publicField(this, "stationCode");
    __publicField(this, "locationCode");
    __publicField(this, "channelCode");
    __publicField(this, "publicId");
    this.time = checkStringOrDate(time2);
    this.networkCode = networkCode;
    this.stationCode = stationCode;
    this.locationCode = locationCode;
    this.channelCode = channelCode;
    this.publicId = UNKNOWN_PUBLIC_ID;
  }
  static createFromXml(pickQML) {
    if (pickQML.localName !== "pick") {
      throw new Error(
        `Cannot extract, not a QuakeML Pick: ${pickQML.localName}`
      );
    }
    const otimeStr = _grabFirstElText3(_grabFirstEl2(pickQML, "time"), "value");
    if (!isDef(otimeStr)) {
      throw new Error("Missing time");
    }
    const time2 = checkStringOrDate(otimeStr);
    const waveformIdEl = _grabFirstEl2(pickQML, "waveformID");
    const netCode = _grabAttribute3(waveformIdEl, "networkCode");
    const stationCode = _grabAttribute3(waveformIdEl, "stationCode");
    let locationCode = _grabAttribute3(waveformIdEl, "locationCode");
    const channelCode = _grabAttribute3(waveformIdEl, "channelCode");
    if (!isNonEmptyStringArg(locationCode)) {
      locationCode = "";
    }
    if (!isNonEmptyStringArg(netCode) || !isNonEmptyStringArg(stationCode) || !isNonEmptyStringArg(channelCode)) {
      throw new Error(
        "missing codes: " + stringify(netCode) + "." + stringify(stationCode) + "." + stringify(locationCode) + "." + stringify(channelCode)
      );
    }
    const out = new Pick(time2, netCode, stationCode, locationCode, channelCode);
    const pid = _grabAttribute3(pickQML, "publicID");
    if (isNonEmptyStringArg(pid)) {
      out.publicId = pid;
    }
    return out;
  }
  isAtStation(station) {
    return this.networkCode === station.networkCode && this.stationCode === station.stationCode;
  }
  isOnChannel(channel) {
    return this.networkCode === channel.station.networkCode && this.stationCode === channel.station.stationCode && this.locationCode === channel.locationCode && this.channelCode === channel.channelCode;
  }
  toString() {
    return stringify(this.time) + ` ${this.networkCode}.${this.stationCode}.${this.locationCode}.${this.channelCode}`;
  }
};
function parseQuakeML(rawXml, host) {
  const top2 = rawXml.documentElement;
  if (!top2) {
    throw new Error("Can't get documentElement");
  }
  const eventArray = Array.from(top2.getElementsByTagName("event"));
  const out = [];
  for (const eventEl of eventArray) {
    out.push(Quake.createFromXml(eventEl, host));
  }
  return out;
}
function createQuakeFromValues(publicId, time2, latitude, longitude2, depth) {
  const origin = new Origin();
  origin.time = time2;
  origin.latitude = latitude;
  origin.longitude = longitude2;
  origin.depth = depth;
  const quake = new Quake(publicId);
  quake.originList.push(origin);
  return quake;
}
var _grabFirstElNS = function(xml, namespace, tagName) {
  let out = void 0;
  if (isObject(xml)) {
    const elList = xml.getElementsByTagNameNS(namespace, tagName);
    if (isObject(elList) && elList.length > 0) {
      const e = elList.item(0);
      if (e) {
        out = e;
      }
    }
  }
  return out;
};
var _grabFirstEl2 = function(xml, tagName) {
  let out = void 0;
  if (isObject(xml)) {
    const elList = xml.getElementsByTagName(tagName);
    if (isObject(elList) && elList.length > 0) {
      const e = elList.item(0);
      if (e) {
        out = e;
      }
    }
  }
  return out;
};
var _grabFirstElText3 = function(xml, tagName) {
  let out = void 0;
  const el = _grabFirstEl2(xml, tagName);
  if (isObject(el)) {
    out = el.textContent;
    if (out === null) {
      out = void 0;
    }
  }
  return out;
};
var _grabFirstElInt3 = function(xml, tagName) {
  let out = void 0;
  const el = _grabFirstElText3(xml, tagName);
  if (isStringArg(el)) {
    out = parseInt(el);
  }
  return out;
};
var _grabFirstElFloat3 = function(xml, tagName) {
  let out = void 0;
  const el = _grabFirstElText3(xml, tagName);
  if (isStringArg(el)) {
    out = parseFloat(el);
  }
  return out;
};
var _grabAttribute3 = function(xml, tagName) {
  let out = void 0;
  if (isObject(xml)) {
    const a3 = xml.getAttribute(tagName);
    if (isStringArg(a3)) {
      out = a3;
    }
  }
  return out;
};
var _requireAttribute3 = function _requireAttribute4(xml, tagName) {
  const out = _grabAttribute3(xml, tagName);
  if (typeof out !== "string") {
    throw new Error(`Attribute ${tagName} not found.`);
  }
  return out;
};
var _grabAttributeNS2 = function(xml, namespace, tagName) {
  let out = void 0;
  if (isObject(xml)) {
    const a3 = xml.getAttributeNS(namespace, tagName);
    if (isStringArg(a3)) {
      out = a3;
    }
  }
  return out;
};
var parseUtil2 = {
  _grabFirstEl: _grabFirstEl2,
  _grabFirstElNS,
  _grabFirstElText: _grabFirstElText3,
  _grabFirstElFloat: _grabFirstElFloat3,
  _grabFirstElInt: _grabFirstElInt3,
  _grabAttribute: _grabAttribute3,
  _requireAttribute: _requireAttribute3,
  _grabAttributeNS: _grabAttributeNS2
};

// src/dataset.ts
var import_jszip = __toESM(require_jszip_min(), 1);
var DATASET_DIR = "dataset";
var DOT_ZIP_EXT = ".zip";
var ZIP_FILENAME = DATASET_DIR + DOT_ZIP_EXT;
var SEISMOGRAM_DIR = "seismograms";
var CATALOG_FILE = "catalog.quakeml";
var INVENTORY_FILE = "inventory.staxml";
var Dataset = class {
  constructor() {
    __publicField(this, "catalog");
    __publicField(this, "inventory");
    __publicField(this, "waveforms");
    __publicField(this, "processedWaveforms");
    this.catalog = new Array(0);
    this.inventory = new Array(0);
    this.waveforms = new Array(0);
    this.processedWaveforms = new Array(0);
  }
  static fromSeismogramLoader(loader) {
    return loader.load().then(([networkList, quakeList, sddList]) => {
      const dataset = new Dataset();
      dataset.waveforms = sddList;
      if (quakeList !== null) {
        dataset.catalog = quakeList;
      }
      if (networkList !== null) {
        dataset.inventory = networkList;
      }
      return dataset;
    });
  }
  saveToZipFile(filename = ZIP_FILENAME) {
    let dirname = DATASET_DIR;
    if (filename.endsWith(DOT_ZIP_EXT)) {
      dirname = filename.slice(0, -4);
    }
    const zipfile = new import_jszip.default();
    const zip = zipfile.folder(dirname);
    if (!zip) {
      throw new Error("unable to create subfolder in zip file: " + dirname);
    }
    zip.file("Hello.txt", "Hello World\n");
    const seisFolder = zip.folder(SEISMOGRAM_DIR);
    if (seisFolder === null) {
      throw new Error("can't make folder");
    }
    for (const [key, val] of this.waveformsToMSeed3()) {
      seisFolder.file(key, val);
    }
    return zipfile.generateAsync({ type: "uint8array", compression: "DEFLATE" }).then(function(content) {
      downloadBlobAsFile(content, filename);
    });
  }
  waveformsToMSeed3() {
    const out = /* @__PURE__ */ new Map();
    const ext = "ms3";
    this.waveforms.forEach((sdd) => {
      if (sdd.seismogram) {
        const mseed3Records = toMSeed3(sdd.seismogram, createExtraHeaders("spjs", sdd));
        const byteSize = mseed3Records.reduce((acc, cur) => acc + cur.calcSize(), 0);
        const outBuf = new ArrayBuffer(byteSize);
        let offset2 = 0;
        mseed3Records.forEach((ms3Rec) => {
          const recSize = ms3Rec.calcSize();
          const dv = new DataView(outBuf, offset2, recSize);
          ms3Rec.save(dv);
          offset2 += recSize;
        });
        let i = 1;
        let seisId;
        if (!!sdd.id && sdd.id.length > 0) {
          seisId = sdd.id;
        } else {
          seisId = sdd.codes();
        }
        let filename = `${seisId}.${ext}`;
        if (out.has(filename)) {
          seisId = `${seisId}_${sdd.startTime.year}-${sdd.startTime.month}-${sdd.startTime.day}`;
        }
        while (out.has(filename)) {
          i += 1;
          filename = `${seisId}_${i}.${ext}`;
        }
        out.set(filename, outBuf);
      }
    });
    return out;
  }
  merge(other) {
    const out = new Dataset();
    out.waveforms = this.waveforms.concat(other.waveforms);
    out.inventory = this.inventory.concat(other.inventory);
    out.catalog = this.catalog.concat(other.catalog);
    return out;
  }
  associateQuakes(timeOverlapSecs = 1800) {
    this.waveforms.forEach((w) => {
      if (!w.hasQuake()) {
        this.catalog.forEach((q) => {
          if (isDef(q.preferredOrigin)) {
            const window2 = Interval.after(q.preferredOrigin.time, 1e3 * timeOverlapSecs);
            if (window2.overlaps(w.timeRange)) {
              w.addQuake(q);
            }
          }
        });
      }
    });
  }
  associateChannels() {
    this.waveforms.forEach((sdd) => {
      if (!sdd.hasChannel()) {
        for (const c5 of allChannels(this.inventory)) {
          if (c5.sourceId.equals(sdd.sourceId) && sdd.timeRange.overlaps(c5.timeRange)) {
            sdd.channel = c5;
            break;
          }
        }
      }
    });
  }
};
function load(url) {
  const fetchInitOptions = defaultFetchInitObj(BINARY_MIME);
  return doFetchWithTimeout(url, fetchInitOptions).then(function(response) {
    if (response.status === 200 || response.status === 0) {
      return response.blob();
    } else {
      throw new Error("No data");
    }
  }).then((data) => import_jszip.default.loadAsync(data)).then((zip) => loadFromZip(zip));
}
function loadFromFile(file) {
  return new import_jszip.default().loadAsync(file).then(loadFromZip);
}
function loadFromZip(zip) {
  const promiseArray = new Array(0);
  let datasetDir;
  const possibleDirs = zip.folder(new RegExp("/" + SEISMOGRAM_DIR));
  if (possibleDirs.length === 0) {
    throw new Error("Unable to find dataset directory in zip file");
  } else {
    const tmpdatasetDir = zip.folder(possibleDirs[0].name.slice(0, -1 * (SEISMOGRAM_DIR.length + 1)));
    if (tmpdatasetDir === null) {
      throw new Error("Unable to find dataset directory in zip file");
    } else {
      datasetDir = tmpdatasetDir;
    }
    const seisDir = datasetDir.folder(SEISMOGRAM_DIR);
    if (isDef(seisDir)) {
      seisDir.forEach(function(relativePath, file) {
        if (file.name.endsWith(".ms3")) {
          const seisPromise = file.async("arraybuffer").then(function(buffer) {
            const ms3records = parseMSeed3Records(buffer);
            return sddFromMSeed3(ms3records);
          });
          promiseArray.push(seisPromise);
        }
      });
    }
  }
  return Promise.all(promiseArray).then((sddListList) => {
    return sddListList.reduce((acc, sddList) => acc.concat(sddList), new Array(0));
  }).then((sddList) => {
    const catalogFile = datasetDir.file(CATALOG_FILE);
    const qml = catalogFile ? catalogFile.async("string").then(function(rawXmlText) {
      if (rawXmlText.length < 10) {
        console.warn(`qml text is really short: ${rawXmlText}`);
        return [];
      } else {
        const rawXml = new DOMParser().parseFromString(rawXmlText, XML_MIME);
        return parseQuakeML(rawXml);
      }
    }) : [];
    const inventoryFile = datasetDir.file(INVENTORY_FILE);
    const staml = inventoryFile ? inventoryFile.async("string").then(function(rawXmlText) {
      if (rawXmlText.length < 10) {
        console.log(`staxml text is really short: ${rawXmlText}`);
        return [];
      } else {
        const rawXml = new DOMParser().parseFromString(rawXmlText, XML_MIME);
        return parseStationXml(rawXml);
      }
    }) : [];
    return Promise.all([sddList, qml, staml]);
  }).then((promises) => {
    const dataset = new Dataset();
    dataset.waveforms = promises[0];
    dataset.catalog = promises[1];
    dataset.inventory = promises[2];
    dataset.associateChannels();
    dataset.associateQuakes();
    return dataset;
  });
}
function sddFromMSeed3(ms3records, ds) {
  const out = [];
  const byChannelMap = byChannel2(ms3records);
  byChannelMap.forEach((ms3segments) => {
    const seis = merge3(ms3segments);
    const sdd = SeismogramDisplayData.fromSeismogram(seis);
    ms3segments.forEach((msr) => {
      insertExtraHeaders(msr.extraHeaders, sdd, "spjs", ds);
    });
    out.push(sdd);
  });
  return out;
}
function insertExtraHeaders(eh, sdd, key, ds) {
  const myEH = eh[key];
  if (!myEH) {
    return;
  }
  if ("quake" in myEH) {
    for (const pid of myEH["quake"]) {
      if (ds) {
        for (const q of ds.catalog) {
          if (q.publicId === pid) {
            sdd.addQuake(q);
          }
        }
      } else {
      }
    }
  }
  if ("traveltimes" in myEH) {
    sdd.traveltimeList = myEH["traveltimes"];
  }
  if ("markers" in myEH) {
    myEH["markers"].forEach((m2) => {
      if (typeof m2 === "object" && "time" in m2) {
        m2.time = isoToDateTime(m2.time);
        sdd.markerList.push(m2);
      }
    });
  }
}
function createExtraHeaders(key, sdd) {
  const h = {};
  const out = {};
  out[key] = h;
  if (sdd.quakeList && sdd.quakeList.length > 0) {
    h["quake"] = sdd.quakeList.map((q) => q.publicId);
  }
  if (sdd.traveltimeList && sdd.traveltimeList.length > 0) {
    h["traveltimes"] = sdd.traveltimeList;
  }
  if (sdd.markerList && sdd.markerList.length > 0) {
    h["markers"] = sdd.markerList;
  }
  return out;
}

// src/datechooser.ts
var datechooser_exports = {};
__export(datechooser_exports, {
  DATETIME_ELEMENT: () => DATETIME_ELEMENT,
  DEFAULT_DUR_LABEL: () => DEFAULT_DUR_LABEL,
  DEFAULT_END_LABEL: () => DEFAULT_END_LABEL,
  DEFAULT_START_LABEL: () => DEFAULT_START_LABEL,
  DURATION_CHANGED: () => DURATION_CHANGED,
  DUR_LABEL: () => DUR_LABEL,
  DateTimeChooser: () => DateTimeChooser,
  END_CHANGED: () => END_CHANGED,
  END_LABEL: () => END_LABEL,
  HOURMIN_ELEMENT: () => HOURMIN_ELEMENT,
  HOUR_MIN_24: () => HOUR_MIN_24,
  HourMinChooser: () => HourMinChooser,
  START_CHANGED: () => START_CHANGED,
  START_LABEL: () => START_LABEL,
  TIMERANGE_ELEMENT: () => TIMERANGE_ELEMENT,
  TimeRangeChooser: () => TimeRangeChooser,
  extractDuration: () => extractDuration,
  hourMinRegEx: () => hourMinRegEx
});
var HOURMIN_ELEMENT = "sp-hourmin";
var DATETIME_ELEMENT = "sp-datetime";
var TIMERANGE_ELEMENT = "sp-timerange";
var hourMinRegEx = /^([0-1]?[0-9]):([0-5]?[0-9])$/;
var HOUR_MIN_24 = "HH:mm";
var START_LABEL = "startlabel";
var DEFAULT_START_LABEL = "Start:";
var END_LABEL = "endlabel";
var DEFAULT_END_LABEL = "End:";
var DUR_LABEL = "durLabel";
var DEFAULT_DUR_LABEL = "Dur:";
var HourMinChooser = class extends HTMLElement {
  constructor() {
    super();
    __publicField(this, "_time");
    __publicField(this, "updateCallback");
    __publicField(this, "popupDiv");
    const mythis = this;
    this._time = DateTime.utc().set({ second: 0, millisecond: 0 });
    const attr_date_time = this.getAttribute("date-time");
    if (attr_date_time) {
      this._time = isoToDateTime(attr_date_time);
      this._time.set({ second: 0, millisecond: 0 });
    }
    this.updateCallback = function(time2) {
    };
    const shadow = this.attachShadow({ mode: "open" });
    const style = document.createElement("style");
    style.textContent = `
      .hourminpopup {
        position: absolute;
        top: 17px;
        box-shadow: 0 5px 15px -5px rgba(0,0,0,.5);
        background-color: white;
        z-index: 10;
      }
      .hidden {
        visibility: hidden;
      }
      .shown {
        visibility: visible;
      }
      .popupDivRel {
        position: relative;
      }
      input.hourMin {
        width: 3em;
      }
    `;
    shadow.appendChild(style);
    const wrapper = document.createElement("span");
    document.addEventListener("click", (e) => {
      mythis.hide();
    });
    const popupDiv = document.createElement("div");
    this.popupDiv = popupDiv;
    popupDiv.setAttribute("class", "hourminpopup hidden");
    const hourDiv = popupDiv.appendChild(document.createElement("div"));
    const hour_label = hourDiv.appendChild(document.createElement("label"));
    hour_label.textContent = "Hour:";
    const hour_slider = hourDiv.appendChild(document.createElement("input"));
    hour_slider.setAttribute("type", "range");
    hour_slider.setAttribute("min", "0");
    hour_slider.setAttribute("max", "23");
    hour_slider.value = `${this.time.hour}`;
    hour_slider.setAttribute("class", "hourSlider");
    hour_slider.oninput = function(e) {
      if (e.target !== null) {
        const target = e.target;
        const hour2 = Number.parseInt(target.value);
        if (!Number.isNaN(hour2)) {
          mythis.time = mythis.time.set({ hour: hour2 });
        }
      }
    };
    const minDiv = popupDiv.appendChild(document.createElement("div"));
    const min_label = minDiv.appendChild(document.createElement("label"));
    min_label.textContent = "Min:";
    const min_slider = minDiv.appendChild(document.createElement("input"));
    min_slider.setAttribute("type", "range");
    min_slider.setAttribute("min", "0");
    min_slider.setAttribute("max", "59");
    min_slider.value = `${this.time.minute}`;
    min_slider.setAttribute("class", "minSlider");
    min_slider.oninput = function(e) {
      if (e.target !== null) {
        const target = e.target;
        const min4 = Number.parseInt(target.value);
        if (!Number.isNaN(min4)) {
          mythis.time = mythis.time.set({ minute: min4 });
        }
      }
    };
    const ntextSpan = wrapper.appendChild(document.createElement("span"));
    const relDiv = ntextSpan.appendChild(document.createElement("span"));
    relDiv.setAttribute("class", "popupDivRel");
    relDiv.appendChild(popupDiv);
    const ntext = ntextSpan.appendChild(document.createElement("input"));
    ntext.setAttribute("type", "text");
    ntext.setAttribute("name", "hourMin");
    ntext.setAttribute("class", "hourMin");
    ntext.value = this.time.toFormat(HOUR_MIN_24);
    ntext.onchange = function(e) {
      let val = ntext.value;
      if (val === null) {
        val = mythis.time.toFormat(HOUR_MIN_24);
        ntext.value = val;
      }
      const match2 = hourMinRegEx.exec(val);
      if (match2) {
        const h = match2[1];
        const m2 = match2[2];
        const newTime = mythis.time.set({ hour: parseInt(h), minute: parseInt(m2) });
        if (newTime !== mythis.time) {
          mythis.time = newTime;
        }
        mythis.hide();
      } else {
        ntext.value = mythis.time.toFormat(HOUR_MIN_24);
      }
    };
    ntext.onclick = function(e) {
      e.stopPropagation();
      mythis.showHide();
    };
    shadow.appendChild(wrapper);
  }
  showHide() {
    if (this.popupDiv.getAttribute("class")?.includes("hidden")) {
      this.show();
    } else {
      this.hide();
    }
  }
  hide() {
    if (!this.popupDiv.getAttribute("class")?.includes("hidden")) {
      this.popupDiv.setAttribute("class", "hourminpopup hidden");
    }
  }
  show() {
    this.popupDiv.setAttribute("class", "hourminpopup visible");
    this._adjustPopupPosition();
  }
  xxx_adjustPopupPosition() {
    const left2 = 0;
    const top2 = 0;
    this.popupDiv.setAttribute("style", `{left: ${left2} px; top: ${top2} px;}`);
  }
  _adjustPopupPosition() {
    const hourMinField = this.shadowRoot?.querySelector("input.hourMin");
    const width = hourMinField.offsetWidth;
    const height = hourMinField.offsetHeight;
    const viewportWidth = window.innerWidth;
    const viewportHeight = window.innerHeight;
    const scrollTop = window.pageYOffset;
    let left2 = hourMinField.offsetLeft;
    let top2 = hourMinField.offsetTop + hourMinField.offsetHeight;
    let parentField = hourMinField.offsetParent;
    while (parentField !== null) {
      if (parentField instanceof HTMLElement) {
        left2 += parentField.offsetLeft;
        top2 += parentField.offsetTop;
        parentField = parentField.offsetParent;
      }
    }
    if (left2 + width > viewportWidth) {
      left2 = left2 - width + hourMinField.offsetWidth;
    }
    if (top2 + height > viewportHeight + scrollTop) {
      top2 = top2 - height - hourMinField.offsetHeight;
    }
    console.log(`hourmin popup position: {left: ${left2} px; top: ${top2} px;}`);
    this.popupDiv.setAttribute("style", `{position: absolute; left: ${left2} px; top: ${top2} px; }`);
  }
  get asDuration() {
    return Duration.fromObject({ hours: this.time.hour, minutes: this.time.minute });
  }
  get time() {
    return this._time;
  }
  set time(dt) {
    this._internalSetTime(dt);
    this.updateCallback(this.time);
    console.log(`dispatch change from HourMinChooser ${dt.toISO()}`);
    this.dispatchEvent(new Event("change"));
  }
  _internalSetTime(dt) {
    this._time = dt;
    const ntext = this.shadowRoot?.querySelector("input.hourMin");
    ntext.value = this._time.toFormat(HOUR_MIN_24);
    const hourSlider = this.popupDiv?.querySelector("input.hourSlider");
    hourSlider.value = `${this._time.hour}`;
    const minuteSlider = this.popupDiv?.querySelector("input.minSlider");
    minuteSlider.value = `${this._time.minute}`;
  }
};
customElements.define(HOURMIN_ELEMENT, HourMinChooser);
var DateTimeChooser = class extends HTMLElement {
  constructor(time2) {
    super();
    __publicField(this, "_time");
    __publicField(this, "updateCallback");
    __publicField(this, "hourMin");
    const mythis = this;
    const attr_date_time = this.getAttribute("date-time");
    if (time2) {
      this._time = time2;
      this.setAttribute("date-time", time2.toISO());
    } else if (attr_date_time) {
      this._time = isoToDateTime(attr_date_time);
      this._time.set({ second: 0, millisecond: 0 });
    } else {
      this._time = DateTime.utc().set({ second: 0, millisecond: 0 });
    }
    this.updateCallback = function(time3) {
    };
    const shadow = this.attachShadow({ mode: "open" });
    const wrapper = document.createElement("span");
    const dateField = wrapper.appendChild(document.createElement("input"));
    dateField.setAttribute("type", "date");
    dateField.setAttribute("name", "date");
    dateField.setAttribute("class", "date");
    dateField.value = this._time.toISODate();
    const hourMin = wrapper.appendChild(new HourMinChooser());
    hourMin._time = mythis.time;
    this.hourMin = hourMin;
    hourMin.addEventListener("change", () => {
      const origTime = mythis._time;
      const time3 = hourMin.time;
      if (origTime !== time3) {
        mythis._internalSetTime(time3);
        mythis.timeModified();
      }
    });
    dateField.addEventListener("change", () => {
      const value = dateField.value;
      const pikaValue = DateTime.fromISO(value);
      const origTime = mythis._time;
      if (pikaValue && (origTime.year !== pikaValue.year || origTime.month !== pikaValue.month || origTime.day !== pikaValue.day)) {
        mythis.time = mythis.time.set({
          year: pikaValue.year,
          month: pikaValue.month,
          day: pikaValue.day
        });
        mythis.timeModified();
      }
    });
    shadow.appendChild(wrapper);
    this._internalSetTime(this.time);
  }
  updateTime(newTime) {
    this._internalSetTime(newTime);
  }
  timeModified() {
    this.updateCallback(this.time);
    this.dispatchEvent(new Event("change"));
  }
  get time() {
    return this._time;
  }
  set time(dt) {
    this._internalSetTime(dt);
    this.updateCallback(this.time);
    this.dispatchEvent(new Event("change"));
  }
  _internalSetTime(newTime) {
    this._time = newTime;
    const ntext = this.shadowRoot?.querySelector("input.date");
    ntext.value = this.time.toISODate();
    this.hourMin._internalSetTime(newTime);
  }
  static get observedAttributes() {
    return ["date-time"];
  }
};
customElements.define(DATETIME_ELEMENT, DateTimeChooser);
var START_CHANGED = "start";
var END_CHANGED = "end";
var DURATION_CHANGED = "duration";
var TimeRangeChooser = class extends HTMLElement {
  constructor() {
    super();
    __publicField(this, "updateCallback");
    __publicField(this, "_duration");
    __publicField(this, "startChooser");
    __publicField(this, "endChooser");
    __publicField(this, "_mostRecentChanged");
    this._mostRecentChanged = "end";
    this.updateCallback = (timerange) => {
    };
    const endAttr = this.getAttribute("end");
    let endTime;
    if (endAttr) {
      endTime = isoToDateTime(endAttr);
    } else {
      endTime = DateTime.utc().startOf("minute");
    }
    const durAttr = this.getAttribute("duration");
    if (durAttr) {
      this._duration = extractDuration(durAttr);
    } else {
      this._duration = Duration.fromMillis(1e3 * 300);
    }
    const startAttr = this.getAttribute("start");
    let startTime;
    if (startAttr) {
      startTime = isoToDateTime(startAttr);
      if (endAttr) {
        const durInterval = Interval.fromDateTimes(startTime, endTime);
        this._duration = durInterval.toDuration();
      } else {
        endTime = startTime.plus(this._duration);
      }
    } else {
      startTime = endTime.minus(this._duration);
    }
    const shadow = this.attachShadow({ mode: "open" });
    const wrapper = document.createElement("span");
    const style = document.createElement("style");
    style.textContent = `
          input.duration {
            width: 8em;
          }
          label {
            margin-left: 3px;
            margin-right: 1px;
          }
        `;
    shadow.appendChild(style);
    const startLabel = wrapper.appendChild(document.createElement("label"));
    startLabel.textContent = this.startLabel;
    const startChooser = wrapper.appendChild(new DateTimeChooser());
    this.startChooser = startChooser;
    startChooser.setAttribute("class", "start");
    const durationDiv = wrapper.appendChild(document.createElement("span"));
    durationDiv.setAttribute("class", "duration");
    const durationLabel = wrapper.appendChild(document.createElement("label"));
    durationLabel.textContent = this.durationLabel;
    const durationInput = wrapper.appendChild(document.createElement("input"));
    durationInput.value = `${this.duration}`;
    durationInput.setAttribute("class", "duration");
    const endLabel = wrapper.appendChild(document.createElement("label"));
    endLabel.textContent = this.endLabel;
    const endChooser = wrapper.appendChild(new DateTimeChooser());
    this.endChooser = endChooser;
    endChooser.setAttribute("class", "end");
    startChooser.addEventListener("change", () => {
      this.start = startChooser.time;
    });
    durationInput.addEventListener("change", () => {
      if (!durationInput.value) {
        return;
      }
      this.duration = extractDuration(durationInput.value);
    });
    endChooser.addEventListener("change", () => {
      this.end = endChooser.time;
    });
    this.startChooser.updateTime(startTime);
    this.endChooser.updateTime(endTime);
    shadow.appendChild(wrapper);
  }
  toInterval() {
    return Interval.fromDateTimes(this.startChooser.time, this.endChooser.time);
  }
  getTimeRange() {
    return this.toInterval();
  }
  get startLabel() {
    const l2 = this.getAttribute(START_LABEL);
    if (isDef(l2)) {
      return l2;
    } else {
      return DEFAULT_START_LABEL;
    }
  }
  get endLabel() {
    const l2 = this.getAttribute(END_LABEL);
    if (isDef(l2)) {
      return l2;
    } else {
      return DEFAULT_END_LABEL;
    }
  }
  get durationLabel() {
    const l2 = this.getAttribute(DUR_LABEL);
    if (isDef(l2)) {
      return l2;
    } else {
      return DEFAULT_DUR_LABEL;
    }
  }
  get start() {
    return this.startChooser.time;
  }
  set start(time2) {
    this.startChooser.updateTime(time2);
    this.setAttribute("start", time2.toISO());
    this.resyncValues(START_CHANGED);
  }
  get end() {
    return this.endChooser.time;
  }
  set end(time2) {
    this.endChooser.updateTime(time2);
    this.setAttribute("end", time2.toISO());
    this.resyncValues(END_CHANGED);
  }
  set duration(duration) {
    this._updateDuration(duration);
    this.resyncValues(DURATION_CHANGED);
  }
  get duration() {
    return this._duration;
  }
  _updateDuration(duration) {
    this._duration = duration;
    this.setAttribute("duration", duration.toISO());
    const dur_input = this.shadowRoot?.querySelector("input.duration");
    if (!dur_input) {
      throw new Error("can't find input.duration in sp-timerange");
    }
    dur_input.value = this._duration.toISO();
  }
  resyncValues(curChanged) {
    if (curChanged === START_CHANGED) {
      if (this._mostRecentChanged === END_CHANGED && this.start < this.end) {
        this._updateDuration(this.toInterval().toDuration());
      } else {
        this.endChooser.updateTime(this.startChooser.time.plus(this._duration));
      }
    } else if (curChanged === DURATION_CHANGED) {
      if (this._mostRecentChanged === START_CHANGED) {
        this.endChooser.updateTime(this.startChooser.time.plus(this._duration));
      } else {
        this.startChooser.updateTime(this.endChooser.time.minus(this._duration));
      }
    } else {
      if (this._mostRecentChanged === START_CHANGED && this.start < this.end) {
        this._updateDuration(this.toInterval().toDuration());
      } else {
        this.startChooser.updateTime(this.endChooser.time.minus(this._duration));
      }
    }
    if (curChanged !== this._mostRecentChanged) {
      this._mostRecentChanged = curChanged;
    }
    this.dispatchEvent(new Event("change"));
    this.updateCallback(this.getTimeRange());
  }
  static get observedAttributes() {
    return ["start", "duration", "end", START_LABEL, END_LABEL, DUR_LABEL];
  }
};
customElements.define(TIMERANGE_ELEMENT, TimeRangeChooser);
function extractDuration(value) {
  let dur;
  if (value.startsWith("P")) {
    dur = Duration.fromISO(value);
  } else {
    const nDur = +Number.parseInt(value);
    dur = Duration.fromMillis(nDur * 1e3);
  }
  return dur;
}

// src/displayorganize.ts
var displayorganize_exports = {};
__export(displayorganize_exports, {
  DEFAULT_WITH_INFO: () => DEFAULT_WITH_INFO,
  DEFAULT_WITH_MAP: () => DEFAULT_WITH_MAP,
  DEFAULT_WITH_TOOLS: () => DEFAULT_WITH_TOOLS,
  INFO: () => INFO,
  MAP: () => MAP,
  ORG_DISPLAY: () => ORG_DISPLAY,
  ORG_DISP_ITEM: () => ORG_DISP_ITEM,
  ORG_DISP_TOOLS_ELEMENT: () => ORG_DISP_TOOLS_ELEMENT,
  ORG_TYPE: () => ORG_TYPE,
  OVERLAY_ALL: () => OVERLAY_ALL,
  OVERLAY_BY: () => OVERLAY_BY,
  OVERLAY_COMPONENT: () => OVERLAY_COMPONENT,
  OVERLAY_FUNCTION: () => OVERLAY_FUNCTION,
  OVERLAY_INDIVIDUAL: () => OVERLAY_INDIVIDUAL,
  OVERLAY_NONE: () => OVERLAY_NONE,
  OVERLAY_STATION: () => OVERLAY_STATION,
  OVERLAY_VECTOR: () => OVERLAY_VECTOR,
  OrganizedDisplay: () => OrganizedDisplay,
  OrganizedDisplayItem: () => OrganizedDisplayItem,
  OrganizedDisplayTools: () => OrganizedDisplayTools,
  PARTICLE_MOTION: () => PARTICLE_MOTION,
  PLOT_TYPE: () => PLOT_TYPE,
  QUAKE_TABLE: () => QUAKE_TABLE,
  SEISMOGRAPH: () => SEISMOGRAPH,
  SORT_BY: () => SORT_BY,
  SPECTRA: () => SPECTRA,
  STATION_TABLE: () => STATION_TABLE,
  TOOLS_HTML: () => TOOLS_HTML,
  WITH_INFO: () => WITH_INFO,
  WITH_MAP: () => WITH_MAP,
  WITH_TOOLS: () => WITH_TOOLS,
  createAttribute: () => createAttribute,
  createPlots: () => createPlots,
  getFromQueryParams: () => getFromQueryParams,
  groupComponentOfMotion: () => groupComponentOfMotion,
  individualDisplay: () => individualDisplay,
  mapAndIndividualDisplay: () => mapAndIndividualDisplay,
  overlayAll: () => overlayAll,
  overlayByComponent: () => overlayByComponent,
  overlayBySDDFunction: () => overlayBySDDFunction,
  overlayByStation: () => overlayByStation,
  sortByKey: () => sortByKey
});

// src/fft.ts
var fft_exports = {};
__export(fft_exports, {
  FFTResult: () => FFTResult,
  calcDFT: () => calcDFT,
  fftForward: () => fftForward,
  findPowerTwo: () => findPowerTwo,
  inverseDFT: () => inverseDFT
});
function fftForward(seis) {
  let sdd;
  if (seis instanceof Seismogram) {
    sdd = SeismogramDisplayData.fromSeismogram(seis);
  } else {
    sdd = seis;
  }
  if (isDef(sdd.seismogram)) {
    const seismogram = sdd.seismogram;
    if (seismogram.isContiguous()) {
      const result = FFTResult.createFromPackedFreq(
        calcDFT(seismogram.y),
        seismogram.numPoints,
        seismogram.sampleRate
      );
      result.seismogramDisplayData = sdd;
      return result;
    } else {
      throw new Error("Can only take FFT is seismogram is contiguous.");
    }
  } else {
    throw new Error("Can not take FFT is seismogram is null.");
  }
}
function calcDFT(timeseries) {
  let [N, log2N] = findPowerTwo(timeseries.length);
  if (N < 16) {
    log2N = 4;
    N = 16;
  }
  const dft = new RDFT(log2N);
  const inArray = new Float32Array(N);
  inArray.fill(0);
  for (let i = 0; i < timeseries.length; i++) {
    inArray[i] = timeseries[i];
  }
  const out = new Float32Array(N).fill(0);
  dft.evaluate(inArray, out);
  return out;
}
function inverseDFT(packedFreq, numPoints) {
  if (numPoints > packedFreq.length) {
    throw new Error(
      "Not enough points in packed freq array for " + numPoints + ", only " + packedFreq.length
    );
  }
  let [N, log2N] = findPowerTwo(packedFreq.length);
  if (N < 16) {
    log2N = 4;
    N = 16;
  }
  if (N !== packedFreq.length) {
    throw new Error("power of two check fails: " + N + " " + packedFreq.length);
  }
  const dft = new RDFT(log2N);
  const out = new Float32Array(N).fill(0);
  dft.evaluateInverse(packedFreq, out);
  return out.slice(0, numPoints);
}
function findPowerTwo(fftlength) {
  let log2N = 1;
  let N = 2;
  while (N < fftlength) {
    log2N += 1;
    N = 2 * N;
  }
  return [N, log2N];
}
var FFTResult = class {
  constructor(origLength, sampleRate) {
    __publicField(this, "origLength");
    __publicField(this, "packedFreq");
    __publicField(this, "numPoints");
    __publicField(this, "sampleRate");
    __publicField(this, "inputUnits");
    __publicField(this, "seismogramDisplayData");
    this.origLength = origLength;
    this.sampleRate = sampleRate;
    this.packedFreq = new Float32Array(0);
    this.numPoints = 0;
  }
  static createFromPackedFreq(packedFreq, origLength, sampleRate) {
    const fftResult = new FFTResult(origLength, sampleRate);
    fftResult.packedFreq = packedFreq;
    fftResult.numPoints = packedFreq.length;
    const [N, log2N] = findPowerTwo(packedFreq.length);
    if (N < origLength) {
      throw new Error(`Not enough freq points, ${packedFreq.length}, for orig length of ${origLength}, must be > and power two, (${N}, ${log2N})`);
    }
    return fftResult;
  }
  static createFromComplex(complexArray, origLength, sampleRate) {
    const N = 2 * (complexArray.length - 1);
    const modFreq = new Float32Array(N).fill(0);
    modFreq[0] = complexArray[0].real();
    for (let i = 1; i < complexArray.length - 1; i++) {
      modFreq[i] = complexArray[i].real();
      modFreq[N - i] = complexArray[i].imag();
    }
    modFreq[N / 2] = complexArray[complexArray.length - 1].real();
    return FFTResult.createFromPackedFreq(modFreq, origLength, sampleRate);
  }
  static createFromAmpPhase(amp, phase, origLength, sampleRate) {
    if (amp.length !== phase.length) {
      throw new Error(
        `amp and phase must be same length: ${amp.length} ${phase.length}`
      );
    }
    const modComplex = new Array(amp.length);
    for (let i = 0; i < amp.length; i++) {
      modComplex[i] = complexFromPolar(amp[i], phase[i]);
    }
    return FFTResult.createFromComplex(modComplex, origLength, sampleRate);
  }
  get fundamentalFrequency() {
    if (this.sampleRate) {
      return this.sampleRate / this.numPoints;
    } else {
      throw new Error(
        "sample rate not set on FFTResult, needed to calc min frequency"
      );
    }
  }
  asComplex() {
    const complexArray = [];
    const L3 = this.packedFreq.length;
    complexArray.push(new Complex(this.packedFreq[0], 0));
    for (let i = 1; i < this.packedFreq.length / 2; i++) {
      const c5 = new Complex(this.packedFreq[i], this.packedFreq[L3 - i]);
      complexArray.push(c5);
    }
    complexArray.push(new Complex(this.packedFreq[L3 / 2], 0));
    return complexArray;
  }
  asAmpPhase() {
    const amp = new Float32Array(1 + this.packedFreq.length / 2);
    const phase = new Float32Array(1 + this.packedFreq.length / 2);
    let c5 = new Complex(this.packedFreq[0], 0);
    amp[0] = c5.abs();
    phase[0] = c5.angle();
    const L3 = this.packedFreq.length;
    for (let i = 1; i < this.packedFreq.length / 2; i++) {
      c5 = new Complex(this.packedFreq[i], this.packedFreq[L3 - i]);
      amp[i] = c5.abs();
      phase[i] = c5.angle();
    }
    c5 = new Complex(this.packedFreq[L3 / 2], 0);
    amp[this.packedFreq.length / 2] = c5.abs();
    phase[this.packedFreq.length / 2] = c5.angle();
    return [amp, phase];
  }
  fftInverse() {
    return inverseDFT(this.packedFreq, this.origLength);
  }
  frequencies() {
    const out = new Float32Array(this.numPoints / 2 + 1).fill(0);
    for (let i = 0; i < out.length; i++) {
      out[i] = i * this.fundamentalFrequency;
    }
    return out;
  }
  get numFrequencies() {
    return this.numPoints / 2 + 1;
  }
  get minFrequency() {
    return this.fundamentalFrequency;
  }
  get maxFrequency() {
    return this.sampleRate / 2;
  }
  amplitudes() {
    const [amp] = this.asAmpPhase();
    return amp;
  }
  phases() {
    const [, phase] = this.asAmpPhase();
    return phase;
  }
  clone() {
    const out = FFTResult.createFromPackedFreq(
      this.packedFreq.slice(),
      this.origLength,
      this.sampleRate
    );
    out.seismogramDisplayData = this.seismogramDisplayData;
    return out;
  }
};

// src/spectraplot.ts
var spectraplot_exports = {};
__export(spectraplot_exports, {
  AMPLITUDE: () => AMPLITUDE,
  FreqAmp: () => FreqAmp,
  KIND: () => KIND,
  LOGFREQ: () => LOGFREQ,
  PHASE: () => PHASE,
  SPECTRA_ELEMENT: () => SPECTRA_ELEMENT,
  SpectraPlot: () => SpectraPlot,
  spectra_plot_css: () => spectra_plot_css
});

// src/seismograph.ts
var seismograph_exports = {};
__export(seismograph_exports, {
  COLOR_CSS_ID: () => COLOR_CSS_ID,
  SEISMOGRAPH_ELEMENT: () => SEISMOGRAPH_ELEMENT,
  Seismograph: () => Seismograph,
  SeismographAmplitudeScalable: () => SeismographAmplitudeScalable,
  SeismographTimeScalable: () => SeismographTimeScalable,
  ZERO_DURATION: () => ZERO_DURATION,
  createDateFormatWrapper: () => createDateFormatWrapper,
  createFullMarkersForQuakeAtChannel: () => createFullMarkersForQuakeAtChannel,
  createFullMarkersForQuakeAtStation: () => createFullMarkersForQuakeAtStation,
  createMarkerForOriginTime: () => createMarkerForOriginTime,
  createMarkerForPicks: () => createMarkerForPicks,
  createMarkerForQuakePicks: () => createMarkerForQuakePicks,
  createMarkersForTravelTimes: () => createMarkersForTravelTimes,
  createNumberFormatWrapper: () => createNumberFormatWrapper,
  seismograph_css: () => seismograph_css
});

// src/scale.ts
var scale_exports = {};
__export(scale_exports, {
  AmplitudeScalable: () => AmplitudeScalable,
  IndividualAmplitudeScale: () => IndividualAmplitudeScale,
  LinkedAmplitudeScale: () => LinkedAmplitudeScale,
  LinkedTimeScale: () => LinkedTimeScale,
  TimeScalable: () => TimeScalable
});
var _lastId = 0;
var AmplitudeScalable = class {
  constructor(middle, halfWidth) {
    __publicField(this, "middle");
    __publicField(this, "halfWidth");
    this.middle = middle;
    this.halfWidth = halfWidth;
  }
  getAmplitudeRange() {
    return [-1, 1];
  }
  notifyAmplitudeChange(middle, halfWidth) {
  }
  toString() {
    return `mid: ${this.middle} hw: ${this.halfWidth}`;
  }
};
var TimeScalable = class {
  constructor(alignmentTimeOffset, duration) {
    __publicField(this, "alignmentTimeOffset");
    __publicField(this, "duration");
    this.alignmentTimeOffset = alignmentTimeOffset;
    this.duration = duration;
  }
  notifyTimeRangeChange(alignmentTimeOffset, duration) {
  }
};
var LinkedAmplitudeScale = class {
  constructor(graphList) {
    __publicField(this, "_graphSet");
    __publicField(this, "_halfWidth");
    __publicField(this, "_recalcTimeoutID");
    __publicField(this, "_scaleId");
    this._scaleId = ++_lastId;
    const glist = graphList ? graphList : [];
    this._halfWidth = 0;
    this._graphSet = new Set(glist);
    this._recalcTimeoutID = null;
  }
  get halfWidth() {
    return this._halfWidth;
  }
  set halfWidth(val) {
    if (this._halfWidth !== val) {
      this._halfWidth = val;
      this.notifyAll();
    }
  }
  linkAll(graphList) {
    graphList.forEach((graph) => {
      if ("notifyAmplitudeChange" in graph) {
        this._graphSet.add(graph);
      } else if ("amp_scalable" in graph) {
        this._graphSet.add(graph.amp_scalable);
      } else {
        console.warn(`graph does not have notifyAmplitudeChange method or amp_scalable field, skipping: ${graph}`);
      }
    });
    this.recalculate();
  }
  link(graph) {
    this.linkAll([graph]);
  }
  unlink(graph) {
    this._graphSet.delete(graph);
    this.recalculate();
  }
  recalculate() {
    if (this._recalcTimeoutID) {
      clearTimeout(this._recalcTimeoutID);
    }
    const mythis = this;
    this._recalcTimeoutID = setTimeout(() => {
      const maxHalfRange = mythis.graphList.reduce((acc, cur) => {
        return acc > cur.halfWidth ? acc : cur.halfWidth;
      }, 0);
      if (mythis.halfWidth !== maxHalfRange) {
        mythis.halfWidth = maxHalfRange;
        mythis.graphList.forEach((g) => {
          g.notifyAmplitudeChange(g.middle, maxHalfRange);
        });
      }
    }, 100);
  }
  notifyAll() {
    const hw = this.halfWidth;
    this.graphList.forEach((g) => {
      setTimeout(() => {
        g.notifyAmplitudeChange(g.middle, hw);
      }, 10);
    });
  }
  get graphList() {
    return Array.from(this._graphSet.values());
  }
};
var IndividualAmplitudeScale = class extends LinkedAmplitudeScale {
  constructor(graphList) {
    super(graphList);
  }
  recalculate() {
    const graphList = Array.from(this._graphSet.values());
    graphList.forEach((g) => {
      if (g) {
        g.notifyAmplitudeChange(g.middle, g.halfWidth);
      }
    });
  }
  notifyAll() {
    this.recalculate();
  }
};
var LinkedTimeScale = class {
  constructor(graphList, originalDuration, originalStartOffset, scaleId) {
    __publicField(this, "_graphSet");
    __publicField(this, "_originalDuration");
    __publicField(this, "_originalStartOffset");
    __publicField(this, "_zoomedDuration");
    __publicField(this, "_zoomedStartOffset");
    __publicField(this, "_scaleId");
    if (scaleId) {
      this._scaleId = scaleId;
    } else {
      this._scaleId = -1;
    }
    const glist = graphList ? graphList : [];
    this._graphSet = new Set(glist);
    this._originalDuration = Duration.fromMillis(0);
    this._originalStartOffset = Duration.fromMillis(0);
    this._zoomedDuration = null;
    this._zoomedStartOffset = null;
    if (isDef(originalDuration)) {
      this._originalDuration = originalDuration;
      this._zoomedDuration = originalDuration;
    } else if (glist.length > 0) {
      this._originalDuration = glist.reduce((acc, cur) => {
        return acc > cur.duration ? acc : cur.duration;
      }, Duration.fromMillis(0));
    }
    if (originalStartOffset) {
      this._originalStartOffset = originalStartOffset;
    } else {
      this._originalStartOffset = Duration.fromMillis(0);
    }
    this.recalculate();
  }
  link(graph) {
    this.linkAll([graph]);
  }
  linkAll(graphList) {
    graphList.forEach((graph) => {
      if ("notifyTimeRangeChange" in graph) {
        this._graphSet.add(graph);
      } else if ("time_scalable" in graph) {
        this._graphSet.add(graph.time_scalable);
      } else {
        console.warn(`graph does not have notifyTimeRangeChange method or time_scalable field, skipping: ${graph}`);
      }
    });
    this.recalculate();
  }
  unlink(graph) {
    this._graphSet.delete(graph);
    this.recalculate();
  }
  zoom(startOffset, duration) {
    this._zoomedDuration = duration;
    this._zoomedStartOffset = startOffset;
    this.notifyAll();
  }
  unzoom() {
    this._zoomedDuration = null;
    this._zoomedStartOffset = null;
    this.recalculate();
  }
  get offset() {
    return this._zoomedStartOffset ? this._zoomedStartOffset : this._originalStartOffset;
  }
  set offset(offset2) {
    this._originalStartOffset = offset2;
    this._zoomedStartOffset = offset2;
    this.recalculate();
  }
  get duration() {
    return isDef(this._zoomedDuration) ? this._zoomedDuration : this._originalDuration;
  }
  set duration(duration) {
    if (!isDef(duration)) {
      throw new Error(`Duration must be defined: ${duration}`);
    }
    this._originalDuration = duration;
    this._zoomedDuration = duration;
    this.recalculate();
  }
  get origOffset() {
    return this._originalStartOffset;
  }
  get origDuration() {
    return this._originalDuration;
  }
  recalculate() {
    if (!isDef(this._zoomedDuration) || this._originalDuration.toMillis() === 0) {
      this.graphList.forEach((graph) => {
        if (graph && graph.duration > this._originalDuration) {
          this._originalDuration = graph.duration;
        }
      });
    }
    this.notifyAll();
  }
  notifyAll() {
    this.graphList.forEach((graph) => {
      if (graph) {
        setTimeout(() => {
          graph.notifyTimeRangeChange(this.offset, this.duration);
        });
      }
    });
  }
  get graphList() {
    return Array.from(this._graphSet.values());
  }
};

// src/seismographconfig.ts
var seismographconfig_exports = {};
__export(seismographconfig_exports, {
  DEFAULT_TITLE: () => DEFAULT_TITLE,
  DRAW_BOTH: () => DRAW_BOTH,
  DRAW_BOTH_ALIGN: () => DRAW_BOTH_ALIGN,
  DRAW_CANVAS: () => DRAW_CANVAS,
  DRAW_SVG: () => DRAW_SVG,
  SeismographConfig: () => SeismographConfig,
  formatCount: () => formatCount,
  formatCountOrAmp: () => formatCountOrAmp,
  formatDay: () => formatDay,
  formatExp: () => formatExp,
  formatHour: () => formatHour,
  formatMillisecond: () => formatMillisecond,
  formatMinute: () => formatMinute,
  formatMonth: () => formatMonth,
  formatSecond: () => formatSecond,
  formatYear: () => formatYear3,
  multiFormatHour: () => multiFormatHour,
  numberFormatWrapper: () => numberFormatWrapper
});

// src/handlebarshelpers.ts
var handlebarshelpers_exports = {};
__export(handlebarshelpers_exports, {
  Handlebars: () => import_handlebars.default,
  registerHelpers: () => registerHelpers
});

// src/handlebarsimport.ts
var import_handlebars = __toESM(require_handlebars(), 1);

// src/handlebarshelpers.ts
function registerHelpers() {
  import_handlebars.default.registerHelper(
    "onlyChangesChannel",
    function(sddDataList, index3) {
      let out = "";
      const curr = sddDataList[index3];
      if (typeof curr === "undefined" || curr === null) {
        return "unknown";
      }
      if (index3 === 0) {
        out = curr.codes();
      } else {
        const prev = sddDataList[index3 - 1];
        if (prev.networkCode !== curr.networkCode) {
          out = curr.codes();
        } else if (prev.stationCode !== curr.stationCode) {
          out = `${curr.stationCode}.${curr.locationCode}.${curr.channelCode}`;
        } else if (prev.locationCode !== curr.locationCode) {
          out = `${curr.locationCode}.${curr.channelCode}`;
        } else {
          out = curr.channelCode;
        }
      }
      return out;
    }
  );
  import_handlebars.default.registerHelper("distdeg", function(sdd) {
    const distaz2 = sdd.distaz;
    if (distaz2) {
      return distaz2.distanceDeg;
    } else {
      return "";
    }
  });
  import_handlebars.default.registerHelper("distkm", function(sdd) {
    const distaz2 = sdd.distaz;
    if (distaz2) {
      return distaz2.distanceKm;
    } else {
      return "";
    }
  });
  import_handlebars.default.registerHelper(
    "formatNumber",
    function(val, digits = 2) {
      if (typeof val === "undefined" || val === null) {
        return "";
      }
      const decimalDigits = digits === void 0 ? 2 : digits;
      if (typeof val === "number") {
        return val.toFixed(decimalDigits);
      }
      return val;
    }
  );
  import_handlebars.default.registerHelper("formatIsoDate", function(param, hash) {
    if (typeof param === "undefined" || param === null)
      return "no time";
    let m2 = param;
    if (!DateTime.isDateTime(param)) {
      m2 = checkStringOrDate(param);
    }
    if (hash.format) {
      return m2.toFormat(hash.format);
    } else {
      return m2.toISO();
    }
  });
  import_handlebars.default.registerHelper("formatDuration", function(param) {
    if (typeof param === "undefined" || param === null)
      return "no time";
    if (Interval.isInterval(param)) {
      param = param.toDuration();
    }
    if (!Duration.isDuration(param)) {
      return `${param}`;
    }
    return `${param.toMillis() / 1e3} sec`;
  });
}

// src/seismographconfig.ts
registerHelpers();
var DRAW_SVG = "svg";
var DRAW_CANVAS = "canvas";
var DRAW_BOTH = "both";
var DRAW_BOTH_ALIGN = "alignment";
var DEFAULT_TITLE = "{{#each seisDataList}}<tspan>{{onlyChangesChannel ../seisDataList @index}}</tspan> {{else}}No Data{{/each}}";
var _SeismographConfig = class {
  constructor() {
    __publicField(this, "configId");
    __publicField(this, "drawingType");
    __publicField(this, "timeFormat");
    __publicField(this, "relativeTimeFormat");
    __publicField(this, "amplitudeFormat");
    __publicField(this, "showTitle");
    __publicField(this, "_title");
    __publicField(this, "_titleHandlebarsCompiled");
    __publicField(this, "isXAxis");
    __publicField(this, "isXAxisTop");
    __publicField(this, "_xLabel");
    __publicField(this, "_xLabelHandlebarsCompiled");
    __publicField(this, "xLabelOrientation");
    __publicField(this, "_xSublabel");
    __publicField(this, "xSublabelIsUnits");
    __publicField(this, "_xSublabelHandlebarsCompiled");
    __publicField(this, "isYAxis");
    __publicField(this, "isYAxisRight");
    __publicField(this, "isYAxisNice");
    __publicField(this, "_yLabel");
    __publicField(this, "_yLabelHandlebarsCompiled");
    __publicField(this, "_yLabelRight");
    __publicField(this, "_yLabelRightHandlebarsCompiled");
    __publicField(this, "yLabelOrientation");
    __publicField(this, "_ySublabel");
    __publicField(this, "_ySublabelHandlebarsCompiled");
    __publicField(this, "ySublabelTrans");
    __publicField(this, "ySublabelIsUnits");
    __publicField(this, "doMarkers");
    __publicField(this, "markerTextOffset");
    __publicField(this, "markerTextAngle");
    __publicField(this, "markerFlagpoleBase");
    __publicField(this, "minHeight");
    __publicField(this, "maxHeight");
    __publicField(this, "minWidth");
    __publicField(this, "maxWidth");
    __publicField(this, "margin");
    __publicField(this, "segmentDrawCompressedCutoff");
    __publicField(this, "maxZoomPixelPerSample");
    __publicField(this, "connectSegments");
    __publicField(this, "lineColors");
    __publicField(this, "lineWidth");
    __publicField(this, "wheelZoom");
    __publicField(this, "centeredAmp");
    __publicField(this, "doGain");
    __publicField(this, "windowAmp");
    __publicField(this, "_fixedAmplitudeScale");
    __publicField(this, "_fixedTimeScale");
    __publicField(this, "_linkedAmplitudeScale");
    __publicField(this, "_linkedTimeScale");
    __publicField(this, "isRelativeTime");
    this.configId = ++_SeismographConfig._lastID;
    this.drawingType = DRAW_CANVAS;
    this.isXAxis = true;
    this.isXAxisTop = false;
    this.isYAxisNice = true;
    this.isYAxis = true;
    this.isYAxisRight = false;
    this.timeFormat = multiFormatHour;
    this.relativeTimeFormat = formatCountOrAmp;
    this.amplitudeFormat = formatCountOrAmp;
    this._title = [DEFAULT_TITLE];
    this._titleHandlebarsCompiled = null;
    this.showTitle = true;
    this._xLabel = "Time";
    this.xLabelOrientation = "horizontal";
    this._xSublabel = "";
    this.xSublabelIsUnits = false;
    this._yLabel = "Amplitude";
    this._yLabelRight = "";
    this._xLabelHandlebarsCompiled = null;
    this._xSublabelHandlebarsCompiled = null;
    this.yLabelOrientation = "vertical";
    this._yLabelHandlebarsCompiled = null;
    this._yLabelRightHandlebarsCompiled = null;
    this._ySublabel = "";
    this._ySublabelHandlebarsCompiled = null;
    this.ySublabelTrans = 15;
    this.ySublabelIsUnits = true;
    this.centeredAmp = true;
    this.doGain = true;
    this.windowAmp = true;
    this._fixedAmplitudeScale = null;
    this._fixedTimeScale = null;
    this._linkedAmplitudeScale = new IndividualAmplitudeScale();
    this._linkedTimeScale = new LinkedTimeScale([], Duration.fromMillis(0), Duration.fromMillis(0), this.configId);
    this.isRelativeTime = false;
    this.doMarkers = true;
    this.markerTextOffset = 0.85;
    this.markerTextAngle = 45;
    this.markerFlagpoleBase = "bottom";
    this.minHeight = 0;
    this.maxHeight = null;
    this.minWidth = 0;
    this.maxWidth = null;
    this.margin = {
      top: 25,
      right: 20,
      bottom: 42,
      left: 85,
      toString: function() {
        return "t:" + this.top + " l:" + this.left + " b:" + this.bottom + " r:" + this.right;
      }
    };
    this.segmentDrawCompressedCutoff = 10;
    this.maxZoomPixelPerSample = 20;
    this.wheelZoom = false;
    this.connectSegments = false;
    this.lineColors = [
      "skyblue",
      "olivedrab",
      "goldenrod",
      "firebrick",
      "darkcyan",
      "orange",
      "darkmagenta",
      "mediumvioletred",
      "sienna",
      "black"
    ];
    this.lineWidth = 1;
  }
  static fromJSON(json) {
    const seisConfig = new _SeismographConfig();
    Object.assign(seisConfig, json);
    if (json.isLinkedTimeScale) {
      seisConfig.linkedTimeScale = new LinkedTimeScale();
    }
    if (json.isLinkedAmplitudeScale) {
      seisConfig.linkedAmplitudeScale = new LinkedAmplitudeScale();
    } else if (!isDef(seisConfig.fixedAmplitudeScale)) {
      seisConfig.linkedAmplitudeScale = new IndividualAmplitudeScale();
    }
    return seisConfig;
  }
  asJSON() {
    const out = JSON.parse(JSON.stringify(this));
    out.title = out._title;
    delete out._title;
    out.fixedAmplitudeScale = out._fixedAmplitudeScale;
    delete out._fixedAmplitudeScale;
    out.fixedTimeScale = out._fixedTimeScale;
    delete out._fixedTimeScale;
    delete out._linkedTimeScale;
    out.isLinkedTimeScale = isDef(this._linkedTimeScale);
    out.isLinkedAmplitudeScale = isDef(this._linkedAmplitudeScale) && !(this._linkedAmplitudeScale instanceof IndividualAmplitudeScale);
    delete out._titleHandlebarsCompiled;
    return out;
  }
  get fixedAmplitudeScale() {
    return this._fixedAmplitudeScale;
  }
  set fixedAmplitudeScale(ts) {
    if (!isDef(ts)) {
      throw new Error("amp scale must be defined");
    }
    this._fixedAmplitudeScale = ts;
    this._linkedAmplitudeScale = null;
  }
  get linkedAmplitudeScale() {
    return this._linkedAmplitudeScale;
  }
  set linkedAmplitudeScale(ts) {
    if (!isDef(ts)) {
      throw new Error("amp scale must be defined");
    }
    if (this._linkedAmplitudeScale) {
      ts.linkAll(this._linkedAmplitudeScale.graphList);
    }
    this._linkedAmplitudeScale = ts;
    this._fixedAmplitudeScale = null;
  }
  get fixedTimeScale() {
    return this._fixedTimeScale;
  }
  set fixedTimeScale(ts) {
    if (!isDef(ts)) {
      throw new Error("time scale must be defined");
    }
    this._fixedTimeScale = ts;
    this._linkedTimeScale = null;
  }
  get linkedTimeScale() {
    return this._linkedTimeScale;
  }
  set linkedTimeScale(ts) {
    if (!isDef(ts)) {
      throw new Error("time scale must be defined");
    }
    if (this._linkedTimeScale) {
      ts.linkAll(this._linkedTimeScale.graphList);
    }
    this._linkedTimeScale = ts;
    this._fixedTimeScale = null;
  }
  get title() {
    return this._title;
  }
  set title(value) {
    if (!isDef(value)) {
      this._title = [""];
    } else if (Array.isArray(value)) {
      this._title = value;
    } else {
      this._title = [value];
    }
    this._titleHandlebarsCompiled = null;
  }
  handlebarsTitle(context, runtimeOptions) {
    if (!isDef(this._titleHandlebarsCompiled)) {
      if (!isDef(this._title) || this._title.length === 0 || !isDef(this._title[0])) {
        return "";
      } else if (this._title.length === 1) {
        this._titleHandlebarsCompiled = import_handlebars.default.compile(this._title[0]);
      } else {
        this._titleHandlebarsCompiled = import_handlebars.default.compile(
          "" + this._title.join(" ")
        );
      }
    }
    if (!this._titleHandlebarsCompiled) {
      throw new Error(`Unable to compile handlebars title for ${this._title}`);
    }
    return this._titleHandlebarsCompiled(context, runtimeOptions);
  }
  get xLabel() {
    return this._xLabel;
  }
  set xLabel(value) {
    if (!isDef(value)) {
      this._xLabel = "";
    } else {
      this._xLabel = value;
    }
    this._xLabelHandlebarsCompiled = null;
  }
  get xSublabel() {
    return this._xSublabel;
  }
  set xSublabel(value) {
    if (!isDef(value)) {
      this._xSublabel = "";
    } else {
      this._xSublabel = value;
    }
    this._xSublabelHandlebarsCompiled = null;
  }
  handlebarsXLabel(context, runtimeOptions) {
    if (!isDef(this._xLabelHandlebarsCompiled)) {
      if (!isDef(this._xLabel) || this._xLabel.length === 0) {
        return "";
      } else {
        this._xLabelHandlebarsCompiled = import_handlebars.default.compile(this._xLabel);
      }
    }
    if (!this._xLabelHandlebarsCompiled) {
      throw new Error(`Unable to compile handlebars xLabel for ${this._xLabel}`);
    }
    return this._xLabelHandlebarsCompiled(context, runtimeOptions);
  }
  handlebarsXSublabel(context, runtimeOptions) {
    if (!isDef(this._xSublabelHandlebarsCompiled)) {
      if (!isDef(this._xSublabel) || this._xSublabel.length === 0) {
        return "";
      } else {
        this._xSublabelHandlebarsCompiled = import_handlebars.default.compile(this._xSublabel);
      }
    }
    if (!this._xSublabelHandlebarsCompiled) {
      throw new Error(`Unable to compile handlebars xLabel for ${this._xSublabel}`);
    }
    return this._xSublabelHandlebarsCompiled(context, runtimeOptions);
  }
  get yLabel() {
    return this._yLabel;
  }
  set yLabel(value) {
    if (!isDef(value)) {
      this._yLabel = "";
    } else {
      this._yLabel = value;
    }
    this._yLabelHandlebarsCompiled = null;
  }
  get ySublabel() {
    return this._ySublabel;
  }
  set ySublabel(value) {
    if (!isDef(value)) {
      this._ySublabel = "";
    } else {
      this._ySublabel = value;
    }
    this._ySublabelHandlebarsCompiled = null;
  }
  handlebarsYLabel(context, runtimeOptions) {
    if (!isDef(this._yLabelHandlebarsCompiled)) {
      if (!isDef(this._yLabel) || this._yLabel.length === 0) {
        return "";
      } else {
        this._yLabelHandlebarsCompiled = import_handlebars.default.compile(this._yLabel);
      }
    }
    if (!this._yLabelHandlebarsCompiled) {
      throw new Error(`Unable to compile handlebars yLabel for ${this._yLabel}`);
    }
    return this._yLabelHandlebarsCompiled(context, runtimeOptions);
  }
  handlebarsYSublabel(context, runtimeOptions) {
    if (!isDef(this._ySublabelHandlebarsCompiled)) {
      if (!isDef(this._ySublabel) || this._ySublabel.length === 0) {
        return "";
      } else {
        this._ySublabelHandlebarsCompiled = import_handlebars.default.compile(this._ySublabel);
      }
    }
    if (!this._ySublabelHandlebarsCompiled) {
      throw new Error(`Unable to compile handlebars yLabel for ${this._ySublabel}`);
    }
    return this._ySublabelHandlebarsCompiled(context, runtimeOptions);
  }
  get yLabelRight() {
    return this._yLabelRight;
  }
  set yLabelRight(value) {
    if (!isDef(value)) {
      this._yLabelRight = "";
    } else {
      this._yLabelRight = value;
    }
    this._yLabelRightHandlebarsCompiled = null;
  }
  handlebarsYLabelRight(context, runtimeOptions) {
    if (!isDef(this._yLabelRightHandlebarsCompiled)) {
      if (!isDef(this._yLabelRight) || this._yLabelRight.length === 0) {
        return "";
      } else {
        this._yLabelRightHandlebarsCompiled = import_handlebars.default.compile(
          this._yLabelRight
        );
      }
    }
    if (!this._yLabelRightHandlebarsCompiled) {
      throw new Error(`Unable to compile handlebars yLabelRight for ${this._yLabelRight}`);
    }
    return this._yLabelRightHandlebarsCompiled(context, runtimeOptions);
  }
  createAlignmentData(timeRange, min4 = -100, max5 = 100) {
    const mid = (max5 + min4) / 2;
    const fakeData = Float32Array.from([
      max5,
      min4,
      max5,
      min4,
      mid,
      mid,
      max5,
      mid,
      mid,
      min4
    ]);
    const fakeSampleRate = 1 / (1e3 * timeRange.toDuration().toMillis() / (fakeData.length - 1));
    const fakeSeis = Seismogram.createFromContiguousData(
      fakeData,
      fakeSampleRate,
      timeRange.start
    );
    const fakeSDD = SeismogramDisplayData.fromSeismogram(fakeSeis);
    return fakeSDD;
  }
  getColorForIndex(i) {
    if (isDef(this.lineColors) && this.lineColors.length > 0) {
      return this.lineColors[i % this.lineColors.length];
    } else {
      return "black";
    }
  }
  createCSSForLineColors(svgClass) {
    let cssText = "";
    const numColors = this.lineColors.length;
    let svgEl = "svg";
    if (!isDef(svgClass)) {
      svgEl = `svg.${AUTO_COLOR_SELECTOR}`;
    } else if (svgClass.length === 0) {
      svgEl = "svg";
    } else {
      svgEl = `svg.${svgClass}`;
    }
    cssText = cssText + `
      ${svgEl} g.${G_DATA_SELECTOR} g path {
        fill: none;
        stroke-width: 1px;
      }
    `;
    this.lineColors.forEach((color2, index3) => {
      cssText = cssText + `
        ${svgEl} g.title  text tspan:nth-child(${numColors}n+${index3 + 1})  {
          stroke: ${color2};
          fill: ${color2};
          color: ${color2};
        }
        `;
      cssText += `
        ${svgEl} g.${G_DATA_SELECTOR} g:nth-child(${numColors}n+${index3 + 1}) path {
          stroke: ${color2};
        }
        `;
    });
    return cssText;
  }
  clone() {
    const out = new _SeismographConfig();
    Object.getOwnPropertyNames(this).forEach((name) => {
      if (Array.isArray(this[name])) {
        out[name] = this[name].slice();
      } else {
        out[name] = this[name];
      }
      out.margin = {
        top: this.margin.top,
        right: this.margin.right,
        bottom: this.margin.bottom,
        left: this.margin.left,
        toString: function() {
          return "t:" + this.top + " l:" + this.left + " b:" + this.bottom + " r:" + this.right;
        }
      };
    });
    return out;
  }
  toString() {
    let outS = "";
    Object.getOwnPropertyNames(this).forEach((name) => {
      outS += `  seisConfig.${name} = ${JSON.stringify(this[name])}
`;
    });
    return outS;
  }
};
var SeismographConfig = _SeismographConfig;
__publicField(SeismographConfig, "_lastID");
function numberFormatWrapper(formater) {
  return function(domainValue) {
    if (typeof domainValue === "number") {
      return formater(domainValue);
    } else {
      throw new Error("Can only format number, " + domainValue);
    }
  };
}
var formatCount = format("~s");
var formatExp = format(".2e");
var formatCountOrAmp = function(v) {
  return -1 < v && v < 1 && v !== 0 ? formatExp(v) : formatCount(v);
};
var formatMillisecond = utcFormat(".%L");
var formatSecond = utcFormat(":%S");
var formatMinute = utcFormat("%H:%M");
var formatHour = utcFormat("%H:%M");
var formatDay = utcFormat("%m/%d");
var formatMonth = utcFormat("%Y/%m");
var formatYear3 = utcFormat("%Y");
var multiFormatHour = function(date2) {
  return (second_default(date2) < date2 ? formatMillisecond : utcMinute_default(date2) < date2 ? formatSecond : utcHour_default(date2) < date2 ? formatMinute : utcDay_default(date2) < date2 ? formatHour : utcMonth_default(date2) < date2 ? formatDay : utcYear_default(date2) < date2 ? formatMonth : formatYear3)(date2);
};
SeismographConfig._lastID = 0;

// src/spelement.ts
var SeisPlotElement = class extends HTMLElement {
  constructor(seisData, seisConfig) {
    super();
    __publicField(this, "_seisDataList");
    __publicField(this, "_seismographConfig");
    if (isDef(seisData)) {
      if (seisData instanceof SeismogramDisplayData) {
        this._seisDataList = [seisData];
      } else if (Array.isArray(seisData) && (seisData.length === 0 || seisData[0] instanceof SeismogramDisplayData)) {
        this._seisDataList = seisData;
      } else {
        let msg = `length: ${seisData.length}  `;
        if (seisData.length > 0) {
          msg = `${msg} ${seisData[0]}`;
        }
        throw new Error(`first arg must be array of SeismogramDisplayData: ${msg}`);
      }
    } else {
      this._seisDataList = [];
    }
    if (isDef(seisConfig)) {
      this._seismographConfig = seisConfig;
    } else {
      this._seismographConfig = new SeismographConfig();
    }
    this.attachShadow({ mode: "open" });
  }
  get seisData() {
    return this._seisDataList;
  }
  set seisData(seisData) {
    if (seisData instanceof SeismogramDisplayData) {
      this._seisDataList = [seisData];
    } else if (Array.isArray(seisData)) {
      this._seisDataList = seisData;
    } else {
      throw new Error(`Unknown type for seisData: ${seisData}`);
    }
    this.seisDataUpdated();
  }
  get seismographConfig() {
    return this._seismographConfig;
  }
  set seismographConfig(seismographConfig) {
    this._seismographConfig = seismographConfig;
    this.seisDataUpdated();
  }
  addStyle(css, id2) {
    return addStyleToElement(this, css, id2);
  }
  seisDataUpdated() {
    this.draw();
  }
  connectedCallback() {
    this.draw();
  }
  draw() {
    if (!this.isConnected) {
      return;
    }
  }
  getShadowRoot() {
    if (!this.shadowRoot) {
      throw new Error("shadowRoot is missing");
    } else {
      return this.shadowRoot;
    }
  }
};
function addStyleToElement(element, css, id2) {
  if (!element.shadowRoot) {
    element.attachShadow({ mode: "open" });
  }
  const styleEl = document.createElement("style");
  styleEl.textContent = css;
  if (id2) {
    styleEl.setAttribute("id", id2);
  }
  element.shadowRoot?.insertBefore(styleEl, element.shadowRoot?.firstChild);
  return styleEl;
}

// src/seismograph.ts
registerHelpers();
var CLIP_PREFIX = "seismographclip";
var SEISMOGRAPH_ELEMENT = "sp-seismograph";
var seismograph_css = `

:host {
  display: block;
  min-height: 50px;
  height: 100%;
}

div.wrapper {
  min-height: 50px;
  height: 100%;
}

.marker .markerpath {
  fill: none;
  stroke: black;
  stroke-width: 1px;
}

.marker polygon {
  fill: rgba(150,220,150,.4);
}

.marker.predicted polygon {
  fill: rgba(220,220,220,.4);
}

.marker.pick polygon {
  fill: rgba(255,100,100,.4);
}

path.seispath {
  stroke: skyblue;
  fill: none;
  stroke-width: 1px;
}

path.orientZ {
  stroke: seagreen;
}

path.orientN {
  stroke: cornflowerblue;
}

path.orientE {
  stroke: orange;
}

path.alignment {
  stroke-dasharray: 8;
  stroke-width: 2px;
}

svg.seismograph {
  height: 100%;
  width: 100%;
  min-height: 25px;
  min-width: 25px;
}

svg.seismograph g.ySublabel text {
  font-size: smaller;
}

svg.seismograph g.xSublabel text {
  font-size: smaller;
}

svg.seismograph text.title {
  font-size: larger;
  font-weight: bold;
  fill: black;
  color: black;
  dominant-baseline: hanging;
}

svg.realtimePlot g.allseismograms path.seispath {
  stroke: skyblue;
}

/* links in svg */
svg.seismograph text a {
  fill: #0000EE;
  text-decoration: underline;
}

`;
var COLOR_CSS_ID = "seismographcolors";
var _Seismograph = class extends SeisPlotElement {
  constructor(seisData, seisConfig) {
    super(seisData, seisConfig);
    __publicField(this, "plotId");
    __publicField(this, "beforeFirstDraw");
    __publicField(this, "_debugAlignmentSeisData");
    __publicField(this, "width");
    __publicField(this, "height");
    __publicField(this, "outerWidth");
    __publicField(this, "outerHeight");
    __publicField(this, "svg");
    __publicField(this, "canvasHolder");
    __publicField(this, "canvas");
    __publicField(this, "g");
    __publicField(this, "throttleRescale");
    __publicField(this, "throttleResize");
    __publicField(this, "throttleRedraw");
    __publicField(this, "time_scalable");
    __publicField(this, "amp_scalable");
    this.outerWidth = -1;
    this.outerHeight = -1;
    this.throttleRescale = null;
    this.throttleResize = null;
    this.throttleRedraw = null;
    this.plotId = ++_Seismograph._lastID;
    this.beforeFirstDraw = true;
    this._debugAlignmentSeisData = [];
    this.width = 200;
    this.height = 100;
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    this.addStyle(seismograph_css);
    const lineColorsCSS = this.seismographConfig.createCSSForLineColors();
    this.addStyle(lineColorsCSS, COLOR_CSS_ID);
    this.shadowRoot?.appendChild(wrapper);
    this.canvas = null;
    this.svg = select_default2(wrapper).append("svg").style("z-index", 100);
    wrapper.appendChild(this.svg.node());
    if (isDef(this.seismographConfig.minHeight) && isNumArg(this.seismographConfig.minHeight) && this.seismographConfig.minHeight > 0) {
      const minHeight = this.seismographConfig.minHeight;
      this.svg.style("min-height", minHeight + "px");
    }
    if (isNumArg(this.seismographConfig.maxHeight) && this.seismographConfig.maxHeight > 0) {
      this.svg.style("max-height", this.seismographConfig.maxHeight + "px");
    }
    if (isNumArg(this.seismographConfig.minWidth) && this.seismographConfig.minWidth > 0) {
      const minWidth = this.seismographConfig.minWidth;
      this.svg.style("min-width", minWidth + "px");
    }
    if (isNumArg(this.seismographConfig.maxWidth) && this.seismographConfig.maxWidth > 0) {
      this.svg.style("max-width", this.seismographConfig.maxWidth + "px");
    }
    this.svg.classed("seismograph", true);
    this.svg.classed(AUTO_COLOR_SELECTOR, true);
    this.svg.attr("plotId", this.plotId);
    const alignmentTimeOffset = Duration.fromMillis(0);
    let maxDuration = Duration.fromMillis(0);
    maxDuration = findMaxDuration(this.seisData);
    this.time_scalable = new SeismographTimeScalable(this, alignmentTimeOffset, maxDuration);
    if (isDef(this.seismographConfig.linkedTimeScale)) {
      this.seismographConfig.linkedTimeScale.link(this.time_scalable);
    }
    this.calcTimeScaleDomain();
    this.amp_scalable = new SeismographAmplitudeScalable(this);
    if (this.seismographConfig.linkedAmplitudeScale) {
      this.seismographConfig.linkedAmplitudeScale.link(this.amp_scalable);
    }
    const mythis = this;
    this.g = this.svg.append("g").classed("marginTransform", true).attr(
      "transform",
      "translate(" + this.seismographConfig.margin.left + "," + this.seismographConfig.margin.top + ")"
    );
    this.g.append("g").classed("allseismograms", true).classed(AUTO_COLOR_SELECTOR, true);
    if (!this.seismographConfig.fixedTimeScale) {
      this.enableZoom();
    }
    this.g.append("g").attr("class", "allmarkers").attr("style", "clip-path: url(#" + CLIP_PREFIX + this.plotId + ")");
    select_default2(window).on(
      "resize.canvasseismograph" + mythis.plotId,
      function() {
        if (!mythis.beforeFirstDraw && mythis.checkResize()) {
          mythis.redraw();
        }
      }
    );
    this.addEventListener("click", (evt) => {
      const detail = mythis.calcDetailForEvent(evt, "click");
      const event = new CustomEvent("seisclick", { detail });
      mythis.dispatchEvent(event);
    });
    this.addEventListener("mousemove", (evt) => {
      const detail = mythis.calcDetailForEvent(evt, "mousemove");
      const event = new CustomEvent("seismousemove", { detail });
      mythis.dispatchEvent(event);
    });
  }
  get seisData() {
    return super.seisData;
  }
  set seisData(seisData) {
    super._seisDataList = [];
    this.appendSeisData(seisData);
  }
  get seismographConfig() {
    return super.seismographConfig;
  }
  set seismographConfig(seismographConfig) {
    if (isDef(this.seismographConfig.linkedTimeScale)) {
      this.seismographConfig.linkedTimeScale.unlink(this.time_scalable);
    }
    if (this.seismographConfig.linkedAmplitudeScale) {
      this.seismographConfig.linkedAmplitudeScale.unlink(this.amp_scalable);
    }
    super.seismographConfig = seismographConfig;
    if (isDef(this.seismographConfig.linkedTimeScale)) {
      this.seismographConfig.linkedTimeScale.link(this.time_scalable);
    }
    if (this.seismographConfig.linkedAmplitudeScale) {
      this.seismographConfig.linkedAmplitudeScale.link(this.amp_scalable);
    }
    this.enableZoom();
    this.redraw();
  }
  connectedCallback() {
    this.redraw();
  }
  disconnectedCallback() {
    if (this.seismographConfig.linkedAmplitudeScale) {
      this.seismographConfig.linkedAmplitudeScale.unlink(this.amp_scalable);
    }
    if (this.seismographConfig.linkedTimeScale) {
      this.seismographConfig.linkedTimeScale.unlink(this.time_scalable);
    }
  }
  attributeChangedCallback(name, oldValue, newValue) {
    this.redraw();
  }
  checkResize() {
    const wrapper = this.shadowRoot?.querySelector("div");
    const svgEl = wrapper.querySelector("svg");
    const rect = svgEl.getBoundingClientRect();
    if (rect.width !== this.outerWidth || rect.height !== this.outerHeight) {
      return true;
    }
    return false;
  }
  enableZoom() {
    const mythis = this;
    const z = this.svg.call(
      zoom_default2().on("zoom", function(e) {
        mythis.zoomed(e);
      })
    );
    if (!this.seismographConfig.wheelZoom) {
      z.on("wheel.zoom", null);
    }
  }
  redraw() {
    if (this.throttleRedraw) {
      clearTimeout(this.throttleRedraw);
    }
    const mythis = this;
    this.throttleRedraw = setTimeout(() => {
      mythis.draw();
      mythis.throttleRedraw = null;
    }, 10);
  }
  draw() {
    if (!this.isConnected) {
      return;
    }
    const wrapper = this.shadowRoot?.querySelector("div");
    const svgEl = wrapper.querySelector("svg");
    const rect = svgEl.getBoundingClientRect();
    if (rect.width === 0 || !isDef(rect.width) || rect.height === 0 || !isDef(rect.height)) {
      log(
        `Attempt draw seismograph, but width/height too small: ${rect.width} ${rect.height}`
      );
      return;
    }
    let calcHeight = rect.height;
    if (rect.width !== this.outerWidth || rect.height !== this.outerHeight) {
      if (isNumArg(this.seismographConfig.minHeight) && calcHeight < this.seismographConfig.minHeight) {
        calcHeight = this.seismographConfig.minHeight;
      }
      if (isNumArg(this.seismographConfig.maxHeight) && calcHeight > this.seismographConfig.maxHeight) {
        calcHeight = this.seismographConfig.maxHeight;
      }
    }
    this.calcWidthHeight(rect.width, calcHeight);
    this.g.attr(
      "transform",
      "translate(" + this.seismographConfig.margin.left + "," + this.seismographConfig.margin.top + ")"
    );
    if (this.canvas) {
      this.canvasHolder.attr("width", this.width).attr("height", this.height);
      this.canvasHolder.attr("x", this.seismographConfig.margin.left);
      this.canvasHolder.attr("y", this.seismographConfig.margin.top);
      this.canvas.attr("width", this.width).attr("height", this.height);
    } else {
      const svg2 = select_default2(svgEl);
      this.canvasHolder = svg2.insert("foreignObject", ":first-child").classed("seismograph", true).attr("x", this.seismographConfig.margin.left).attr("y", this.seismographConfig.margin.top).attr("width", this.width).attr("height", this.height + 1);
      this.canvas = this.canvasHolder.append("xhtml:canvas").classed("seismograph", true).attr("xmlns", "http://www.w3.org/1999/xhtml").attr("x", 0).attr("y", 0).attr("width", this.width).attr("height", this.height + 1);
    }
    this.drawSeismograms();
    this.drawAxis();
    drawAxisLabels(
      svgEl,
      this.seismographConfig,
      this.height,
      this.width,
      this.createHandlebarsInput()
    );
    if (this.seismographConfig.doMarkers) {
      this.drawMarkers();
    }
    this.beforeFirstDraw = false;
    return this.svg;
  }
  printSizes() {
    const wrapper = this.shadowRoot?.querySelector("div");
    const svgEl = wrapper.querySelector("svg");
    let out = "";
    const rect = svgEl.getBoundingClientRect();
    out += "svg rect.height " + rect.height + "\n";
    out += "svg rect.width " + rect.width + "\n";
    const grect = this.getBoundingClientRect();
    out += "parent rect.height " + grect.height + "\n";
    out += "parent rect.width " + grect.width + "\n";
    const crect = this.canvas.node().getBoundingClientRect();
    out += "c rect.height " + crect.height + "\n";
    out += "c rect.width " + crect.width + "\n";
    out += "c style.height " + this.canvas.style("height") + "\n";
    out += "c style.width " + this.canvas.style("width") + "\n";
    out += "this.height " + this.height + "\n";
    out += "this.width " + this.width + "\n";
    out += "canvas.height " + this.canvas.node().height + "\n";
    out += "canvas.width " + this.canvas.node().width + "\n";
    out += "this.outerHeight " + this.outerHeight + "\n";
    out += "this.outerWidth " + this.outerWidth + "\n";
    out += "this.margin " + this.seismographConfig.margin + "\n";
    log(out);
  }
  calcDetailForEvent(evt, type2) {
    const margin = this.seismographConfig.margin;
    const mouseTimeVal = this.timeScaleForAxis().invert(evt.offsetX - margin.left);
    const mouseAmp = this.ampScaleForAxis().invert(evt.offsetY - margin.top);
    let out = {
      mouseevent: evt,
      time: null,
      relative_time: null,
      amplitude: mouseAmp,
      seismograph: this
    };
    if (mouseTimeVal instanceof Date) {
      out.time = DateTime.fromJSDate(mouseTimeVal, { zone: "UTC" });
    } else {
      out.relative_time = Duration.fromMillis(mouseTimeVal * 1e3);
    }
    return out;
  }
  drawSeismograms() {
    this.drawSeismogramsCanvas();
  }
  isVisible() {
    const elem = this.canvas.node();
    if (!elem) {
      return false;
    }
    return !!(elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length);
  }
  drawSeismogramsCanvas() {
    const mythis = this;
    if (!this.isVisible()) {
      return;
    }
    const canvasNode = this.canvas.node();
    const context = canvasNode.getContext("2d");
    context.save();
    context.clearRect(0, 0, canvasNode.width, canvasNode.height);
    context.lineWidth = this.seismographConfig.lineWidth;
    if (this.seismographConfig.drawingType === DRAW_BOTH_ALIGN) {
      context.lineWidth = this.seismographConfig.lineWidth * 2;
    }
    const sddList = this._seisDataList.concat(this._debugAlignmentSeisData);
    sddList.forEach((sdd, sddIndex) => {
      const ti = sddIndex;
      const xscaleForSDD = this.timeScaleForSeisDisplayData(sdd);
      const yscaleForSDD = this.ampScaleForSeisDisplayData(sdd);
      const secondsPerPixel = (xscaleForSDD.domain()[1].valueOf() - xscaleForSDD.domain()[0].valueOf()) / 1e3 / (xscaleForSDD.range()[1] - xscaleForSDD.range()[0]);
      let color2;
      if (this.seismographConfig.drawingType === DRAW_BOTH_ALIGN) {
        color2 = mythis.seismographConfig.getColorForIndex(ti + sddList.length);
      } else {
        color2 = mythis.seismographConfig.getColorForIndex(ti);
      }
      let firstTime = true;
      if (sdd.seismogram) {
        sdd.seismogram.segments.forEach((s3) => {
          if (xscaleForSDD(s3.startTime) > xscaleForSDD.range()[1] || xscaleForSDD(s3.endTime) < xscaleForSDD.range()[0]) {
            return;
          }
          const samplesPerPixel = 1 * s3.sampleRate * secondsPerPixel;
          const pixelsPerSample = 1 / samplesPerPixel;
          const startPixel = xscaleForSDD(s3.startTime.toJSDate());
          const endPixel = xscaleForSDD(s3.endTime.toJSDate());
          let leftVisibleSample = 0;
          let rightVisibleSample = s3.y.length;
          let leftVisiblePixel = startPixel;
          if (startPixel < 0) {
            leftVisibleSample = Math.floor(-1 * startPixel * samplesPerPixel) - 1;
            leftVisiblePixel = 0;
          }
          if (endPixel > xscaleForSDD.range()[1] + 1) {
            rightVisibleSample = leftVisibleSample + Math.ceil((this.width + 1) * samplesPerPixel) + 1;
          }
          if (firstTime || !this.seismographConfig.connectSegments) {
            context.beginPath();
            context.strokeStyle = color2;
            context.moveTo(
              leftVisiblePixel,
              yscaleForSDD(s3.y[leftVisibleSample])
            );
            firstTime = false;
          }
          for (let i = leftVisibleSample; i < rightVisibleSample + 2 && i < s3.y.length; i++) {
            context.lineTo(
              startPixel + i * pixelsPerSample,
              yscaleForSDD(s3.y[i])
            );
          }
          if (!this.seismographConfig.connectSegments) {
            context.stroke();
          }
        });
      } else {
      }
      if (this.seismographConfig.connectSegments) {
        context.stroke();
      }
    });
    context.restore();
  }
  calcScaleAndZoom() {
    this.rescaleYAxis();
    const container = this.svg.select("defs").select("#" + CLIP_PREFIX + this.plotId);
    if (container.empty()) {
      this.svg.append("defs").append("clipPath").attr("id", CLIP_PREFIX + this.plotId);
    }
    const clip = this.svg.select("defs").select("#" + CLIP_PREFIX + this.plotId);
    clip.selectAll("rect").remove();
    clip.append("rect").attr("width", this.width).attr("height", this.height);
  }
  ampScaleForSeisDisplayData(sdd) {
    const ampScale = linear3();
    ampScale.range([this.height, 0]);
    if (this.seismographConfig.linkedAmplitudeScale) {
      const halfWidth = this.amp_scalable.drawHalfWidth;
      let middle = this.amp_scalable.drawMiddle;
      if (this.seismographConfig.centeredAmp) {
        let sddInterval = this.displayTimeRangeForSeisDisplayData(sdd);
        let minMax = findMinMaxOverTimeRange([sdd], sddInterval);
        middle = (minMax[0] + minMax[1]) / 2;
      }
      let sensitivityVal = 1;
      if (this.seismographConfig.doGain && sdd.sensitivity?.sensitivity) {
        sensitivityVal = sdd.sensitivity.sensitivity;
      }
      const myMin = middle - halfWidth * sensitivityVal;
      const myMax = middle + halfWidth * sensitivityVal;
      ampScale.domain([myMin, myMax]);
    } else if (this.seismographConfig.fixedAmplitudeScale) {
      ampScale.domain(this.seismographConfig.fixedAmplitudeScale);
    } else {
      throw new Error("ampScaleForSeisDisplayData Must be either linked or fixed amp scale");
    }
    return ampScale;
  }
  displayTimeRangeForSeisDisplayData(sdd) {
    let plotInterval;
    if (this.seismographConfig.linkedTimeScale) {
      if (this.time_scalable.drawDuration.equals(ZERO_DURATION)) {
        this.seismographConfig.linkedTimeScale.recalculate();
      }
      const startOffset = this.time_scalable.drawAlignmentTimeOffset;
      const duration = this.time_scalable.drawDuration;
      plotInterval = sdd.relativeTimeWindow(startOffset, duration);
    } else if (this.seismographConfig.fixedTimeScale) {
      plotInterval = this.seismographConfig.fixedTimeScale;
    } else {
      throw new Error("Must be either fixed or linked time scale");
    }
    return plotInterval;
  }
  timeScaleForSeisDisplayData(sdd) {
    let plotInterval = this.displayTimeRangeForSeisDisplayData(sdd);
    const sddXScale = utcTime();
    sddXScale.domain([plotInterval.start.toJSDate(), plotInterval.end.toJSDate()]);
    sddXScale.range([0, this.width]);
    return sddXScale;
  }
  drawSeismogramsSvg() {
    const sddList = this._seisDataList.concat(this._debugAlignmentSeisData);
    const mythis = this;
    const allSegG = this.g.select("g.allseismograms");
    const traceJoin = allSegG.selectAll("g.seismogram").data(sddList).enter().append("g").attr("label", (s3) => s3 ? s3.label : "none").attr(
      "codes",
      (s3) => s3.seismogram && s3.seismogram.hasCodes() ? s3.seismogram.codes() : "none"
    ).classed("seismogram", true);
    traceJoin.exit().remove();
    const subtraceJoin = traceJoin.selectAll("path").data((sdd) => {
      const sddTimeScale = this.timeScaleForSeisDisplayData(sdd);
      const sddAmpScale = this.ampScaleForSeisDisplayData(sdd);
      const segArr = sdd.seismogram ? sdd.seismogram.segments : [];
      return segArr.map((seg) => {
        return {
          segment: seg,
          timeScale: sddTimeScale,
          ampScale: sddAmpScale
        };
      });
    });
    subtraceJoin.enter().append("path").classed(G_DATA_SELECTOR, true).classed(
      DRAW_BOTH_ALIGN,
      this.seismographConfig.drawingType === DRAW_BOTH_ALIGN
    ).attr("style", "clip-path: url(#" + CLIP_PREFIX + mythis.plotId + ")").attr("shape-rendering", "crispEdges").attr("d", function(segHolder) {
      return mythis.segmentDrawLine(segHolder.segment, segHolder.timeScale, segHolder.ampScale);
    });
    subtraceJoin.exit().remove();
  }
  calcSecondsPerPixel(xScale) {
    const domain = xScale.domain();
    const range3 = xScale.range();
    return (domain[1].getTime() - domain[0].getTime()) / 1e3 / (range3[1] - range3[0]);
  }
  segmentDrawLine(seg, timeScale, ampScale) {
    const secondsPerPixel = this.calcSecondsPerPixel(timeScale);
    const samplesPerPixel = seg.sampleRate * secondsPerPixel;
    const lineFunc = line_default2().curve(linear_default).x(function(d) {
      return timeScale(d[0]);
    }).y(function(d) {
      return ampScale(d[1]);
    });
    if (samplesPerPixel < this.seismographConfig.segmentDrawCompressedCutoff) {
      if (!seg.y) {
        log(
          "canvasSeis seg.y not defined: " + typeof seg + " " + (seg instanceof Seismogram)
        );
        return null;
      }
      return lineFunc(
        Array.from(seg.y, function(d, i) {
          return [seg.timeOfSample(i).toJSDate().valueOf(), d];
        })
      );
    } else {
      if (!seg._highlow || seg._highlow.secondsPerPixel !== secondsPerPixel || seg._highlow.xScaleDomain[1] !== timeScale.domain()[1]) {
        const highlow = [];
        const y4 = seg.y;
        const numHL = 2 * Math.ceil(y4.length / samplesPerPixel);
        for (let i = 0; i < numHL; i++) {
          const startidx = i * samplesPerPixel;
          let min4 = y4[startidx];
          let max5 = y4[startidx];
          for (let j = startidx; j < startidx + samplesPerPixel && j < y4.length; j++) {
            min4 = Math.min(min4, y4[j]);
            max5 = Math.max(max5, y4[j]);
          }
          highlow[2 * i] = min4;
          highlow[2 * i + 1] = max5;
        }
        seg._highlow = {
          xScaleDomain: [timeScale.domain()[0], timeScale.domain()[1]],
          xScaleRange: timeScale.range(),
          secondsPerPixel,
          samplesPerPixel,
          highlowArray: highlow
        };
      }
      return lineFunc(
        seg._highlow.highlowArray.map(function(d, i) {
          return [
            seg.startTime.valueOf() + 1e3 * ((Math.floor(i / 2) + 0.5) * secondsPerPixel),
            d
          ];
        })
      );
    }
  }
  drawAxis() {
    this.drawTopBottomAxis();
    this.drawLeftRightAxis();
  }
  ampScaleForAxis() {
    const ampAxisScale = linear3();
    ampAxisScale.range([this.height, 0]);
    if (this.seismographConfig.fixedAmplitudeScale) {
      ampAxisScale.domain(this.seismographConfig.fixedAmplitudeScale);
    } else if (this.seismographConfig.linkedAmplitudeScale) {
      let middle = this.amp_scalable.drawMiddle;
      if (this.seismographConfig.centeredAmp) {
        middle = 0;
      }
      ampAxisScale.domain([
        middle - this.amp_scalable.drawHalfWidth,
        middle + this.amp_scalable.drawHalfWidth
      ]);
    } else {
      throw new Error("ampScaleForAxis Must be either linked or fixed amp scale");
    }
    return ampAxisScale;
  }
  timeScaleForAxis() {
    let xScaleToDraw;
    if (this.seismographConfig.isRelativeTime) {
      xScaleToDraw = linear3();
      xScaleToDraw.range([0, this.width]);
      if (this.seismographConfig.linkedTimeScale) {
        const startOffset = this.time_scalable.drawAlignmentTimeOffset.toMillis() / 1e3;
        const duration = this.time_scalable.drawDuration.toMillis() / 1e3;
        xScaleToDraw.domain([startOffset, startOffset + duration]);
      } else if (this.seismographConfig.fixedTimeScale) {
        const psed = this.seismographConfig.fixedTimeScale;
        xScaleToDraw.domain([psed.start.toMillis() / 1e3, psed.end.toMillis() / 1e3]);
      } else {
        throw new Error("neither fixed nor linked time scale");
      }
    } else {
      if (this.seismographConfig.linkedTimeScale) {
        if (this.seisData.length > 0) {
          xScaleToDraw = this.timeScaleForSeisDisplayData(this.seisData[0]);
        } else {
          const psed = Interval.before(DateTime.utc(), this.seismographConfig.linkedTimeScale.duration);
          xScaleToDraw = utcTime();
          xScaleToDraw.range([0, this.width]);
          xScaleToDraw.domain([psed.start.toJSDate(), psed.end.toJSDate()]);
        }
      } else if (this.seismographConfig.fixedTimeScale) {
        const psed = this.seismographConfig.fixedTimeScale;
        xScaleToDraw = utcTime();
        xScaleToDraw.range([0, this.width]);
        xScaleToDraw.domain([psed.start.toJSDate(), psed.end.toJSDate()]);
      } else {
        throw new Error("neither fixed nor linked time scale");
      }
    }
    return xScaleToDraw;
  }
  drawTopBottomAxis() {
    this.g.selectAll("g.axis--x").remove();
    this.g.selectAll("g.axis--x-top").remove();
    let xScaleToDraw;
    if (this.seismographConfig.isRelativeTime) {
      xScaleToDraw = this.timeScaleForAxis();
      if (this.seismographConfig.isXAxis) {
        const xAxis = axisBottom(xScaleToDraw);
        xAxis.tickFormat(createNumberFormatWrapper(this.seismographConfig.relativeTimeFormat));
        this.g.append("g").attr("class", "axis axis--x").attr("transform", "translate(0," + this.height + ")").call(xAxis);
      }
      if (this.seismographConfig.isXAxisTop) {
        const xAxisTop = axisTop(xScaleToDraw);
        xAxisTop.tickFormat(createNumberFormatWrapper(this.seismographConfig.relativeTimeFormat));
        this.g.append("g").attr("class", "axis axis--x-top").call(xAxisTop);
      }
    } else {
      xScaleToDraw = this.timeScaleForAxis();
      if (this.seismographConfig.isXAxis) {
        const xAxis = axisBottom(xScaleToDraw);
        xAxis.tickFormat(createDateFormatWrapper(this.seismographConfig.timeFormat));
        this.g.append("g").attr("class", "axis axis--x").attr("transform", "translate(0," + this.height + ")").call(xAxis);
      }
      if (this.seismographConfig.isXAxisTop) {
        const xAxisTop = axisTop(xScaleToDraw);
        xAxisTop.tickFormat(createDateFormatWrapper(this.seismographConfig.timeFormat));
        this.g.append("g").attr("class", "axis axis--x-top").call(xAxisTop);
      }
    }
  }
  drawLeftRightAxis() {
    this.g.selectAll("g.axis--y").remove();
    this.g.selectAll("g.axis--y-right").remove();
    const [yAxis, yAxisRight] = this.createLeftRightAxis();
    if (isDef(yAxis)) {
      this.g.append("g").attr("class", "axis axis--y").call(yAxis);
    }
    if (isDef(yAxisRight)) {
      this.g.append("g").attr("class", "axis axis--y-right").attr("transform", "translate(" + this.width + ",0)").call(yAxisRight);
    }
  }
  createLeftRightAxis() {
    let yAxis = null;
    let yAxisRight = null;
    const axisScale = this.ampScaleForAxis();
    if (this.seismographConfig.isYAxis) {
      yAxis = axisLeft(axisScale).tickFormat(numberFormatWrapper(this.seismographConfig.amplitudeFormat));
      yAxis.scale(axisScale);
      yAxis.ticks(8, this.seismographConfig.amplitudeFormat);
    }
    if (this.seismographConfig.isYAxisRight) {
      yAxisRight = axisRight(axisScale).tickFormat(numberFormatWrapper(this.seismographConfig.amplitudeFormat));
      yAxisRight.scale(axisScale);
      yAxisRight.ticks(8, this.seismographConfig.amplitudeFormat);
    }
    return [yAxis, yAxisRight];
  }
  rescaleYAxis() {
    if (!this.beforeFirstDraw) {
      const delay = 500;
      const mythis = this;
      if (this.throttleRescale) {
        clearTimeout(this.throttleRescale);
      }
      this.throttleRescale = setTimeout(function() {
        const [yAxis, yAxisRight] = mythis.createLeftRightAxis();
        if (yAxis) {
          mythis.g.select(".axis--y").transition().duration(delay / 2).call(yAxis);
        }
        if (yAxisRight) {
          mythis.g.select(".axis--y-right").transition().duration(delay / 2).call(yAxisRight);
        }
        mythis.throttleRescale = null;
      }, delay);
    }
  }
  createHandlebarsInput() {
    return {
      seisDataList: this._seisDataList,
      seisConfig: this._seismographConfig
    };
  }
  drawAxisLabels() {
    this.drawTitle();
    this.drawXLabel();
    this.drawXSublabel();
    this.drawYLabel();
    this.drawYSublabel();
  }
  resetZoom() {
    if (this.seismographConfig.linkedTimeScale) {
      this.seismographConfig.linkedTimeScale.unzoom();
    } else {
      throw new Error("can't reset zoom for fixedTimeScale");
    }
  }
  zoomed(e) {
    const t = e.transform;
    if (isDef(this.seismographConfig.linkedTimeScale)) {
      const linkedTS = this.seismographConfig.linkedTimeScale;
      const origOffset = linkedTS.origOffset.toMillis() / 1e3;
      const origDuration = linkedTS.origDuration.toMillis() / 1e3;
      const origXScale = linear3();
      origXScale.range([0, this.width]);
      origXScale.domain([origOffset, origOffset + origDuration]);
      const xt = t.rescaleX(origXScale);
      const startDelta = xt.domain()[0].valueOf() - origXScale.domain()[0].valueOf();
      const duration = xt.domain()[1] - xt.domain()[0];
      linkedTS.zoom(
        Duration.fromMillis(startDelta * 1e3),
        Duration.fromMillis(duration * 1e3)
      );
    } else {
      throw new Error("can't zoom fixedTimeScale");
    }
  }
  redrawWithXScale() {
    const mythis = this;
    if (!this.beforeFirstDraw) {
      this.g.select("g.allseismograms").selectAll("g.seismogram").remove();
      if (this.seismographConfig.windowAmp) {
        this.recheckAmpScaleDomain();
      }
      this.drawSeismograms();
      this.g.select("g.allmarkers").selectAll("g.marker").attr("transform", function(mh) {
        mh.xscale = mythis.timeScaleForSeisDisplayData(mh.sdd);
        const textx = mh.xscale(mh.marker.time.toJSDate());
        return "translate(" + textx + "," + 0 + ")";
      });
      this.g.select("g.allmarkers").selectAll("g.markertext").attr("transform", function() {
        const axisScale = mythis.ampScaleForAxis();
        const maxY2 = axisScale.range()[0];
        const deltaY = axisScale.range()[0] - axisScale.range()[1];
        const texty = maxY2 - mythis.seismographConfig.markerTextOffset * deltaY;
        return "translate(" + 0 + "," + texty + ") rotate(" + mythis.seismographConfig.markerTextAngle + ")";
      });
      const undrawnMarkers = this._seisDataList.reduce((acc, sdd) => {
        const sddXScale = this.timeScaleForSeisDisplayData(sdd);
        sdd.markerList.forEach(
          (m2) => acc.push({
            marker: m2,
            sdd,
            xscale: sddXScale
          })
        );
        return acc;
      }, new Array(0)).filter((mh) => {
        const xpixel = mh.xscale(mh.marker.time.toJSDate());
        return xpixel >= mh.xscale.range()[0] && xpixel <= mh.xscale.range()[1];
      });
      if (undrawnMarkers.length !== 0) {
        this.drawMarkers();
      }
      this.drawTopBottomAxis();
    }
  }
  drawMarkers() {
    const axisScale = this.ampScaleForAxis();
    const allMarkers = this._seisDataList.reduce((acc, sdd) => {
      const sddXScale = this.timeScaleForSeisDisplayData(sdd);
      sdd.markerList.forEach(
        (m2) => acc.push({
          marker: m2,
          sdd,
          xscale: sddXScale
        })
      );
      return acc;
    }, []).filter((mh) => {
      const xpixel = mh.xscale(mh.marker.time.toJSDate());
      return xpixel >= mh.xscale.range()[0] && xpixel <= mh.xscale.range()[1];
    });
    const mythis = this;
    const markerG = this.g.select("g.allmarkers");
    markerG.selectAll("g.marker").remove();
    const labelSelection = markerG.selectAll("g.marker").data(allMarkers, function(mh) {
      return `${mh.marker.name}_${mh.marker.time.toISO()}`;
    });
    labelSelection.exit().remove();
    const radianTextAngle = this.seismographConfig.markerTextAngle * Math.PI / 180;
    labelSelection.enter().append("g").classed("marker", true).attr("transform", function(mh) {
      const textx = mh.xscale(mh.marker.time.toJSDate());
      return "translate(" + textx + "," + 0 + ")";
    }).each(function(mh) {
      const drawG = select_default2(this);
      drawG.classed(mh.marker.name, true).classed(mh.marker.markertype, true);
      const innerTextG = drawG.append("g").attr("class", "markertext").attr("transform", () => {
        const maxY2 = axisScale.range()[0];
        const deltaY = axisScale.range()[0] - axisScale.range()[1];
        const texty = maxY2 - mythis.seismographConfig.markerTextOffset * deltaY;
        return "translate(" + 0 + "," + texty + ") rotate(" + mythis.seismographConfig.markerTextAngle + ")";
      });
      innerTextG.append("title").text(() => {
        if (mh.marker.description) {
          return mh.marker.description;
        } else {
          return mh.marker.markertype + " " + mh.marker.name + " " + mh.marker.time.toISO();
        }
      });
      const textSel = innerTextG.append("text");
      if (mh.marker.link && mh.marker.link.length > 0) {
        textSel.append("svg:a").attr("xlink:href", () => "" + mh.marker.link).text(function(datum2) {
          const mh2 = datum2;
          return mh2.marker.name;
        });
      } else {
        textSel.text(function(datum2) {
          const mh2 = datum2;
          return mh2.marker.name;
        });
      }
      textSel.attr("dy", "-0.35em").call(function(selection2) {
        selection2.each(function(datum2) {
          const mh2 = datum2;
          mh2.bbox = {
            height: 15,
            width: 20
          };
          try {
            mh2.bbox = this.getBBox();
          } catch (error) {
            console.warn(error);
          }
        });
      });
      innerTextG.insert("polygon", "text").attr("points", function(datum2) {
        const mh2 = datum2;
        let bboxH = 10 + 5;
        let bboxW = 10;
        if (mh2.bbox) {
          bboxH = mh2.bbox.height + 5;
          bboxW = mh2.bbox.width;
        }
        return "0,0 " + -1 * bboxH * Math.tan(radianTextAngle) + ",-" + bboxH + " " + bboxW + ",-" + bboxH + " " + bboxW + ",0";
      });
      let markerPoleY = 0;
      if (mythis.seismographConfig.markerFlagpoleBase === "center") {
        markerPoleY = (axisScale.range()[0] + axisScale.range()[1]) / 2;
      } else {
        markerPoleY = axisScale.range()[0];
      }
      let markerPole = `M0,0l0,${markerPoleY}`;
      drawG.append("path").classed("markerpath", true).attr("d", markerPole);
    });
  }
  calcWidthHeight(nOuterWidth, nOuterHeight) {
    if (nOuterWidth < this.seismographConfig.margin.left + this.seismographConfig.margin.right) {
      throw new Error(
        `width too small for margin: ${nOuterWidth} < ${this.seismographConfig.margin.left} + ${this.seismographConfig.margin.right}`
      );
    }
    if (nOuterHeight < this.seismographConfig.margin.top + this.seismographConfig.margin.bottom) {
      throw new Error(
        `height too small for margin: ${nOuterHeight} < ${this.seismographConfig.margin.top} + ${this.seismographConfig.margin.bottom}`
      );
    }
    this.outerWidth = nOuterWidth;
    this.outerHeight = nOuterHeight;
    this.height = this.outerHeight - this.seismographConfig.margin.top - this.seismographConfig.margin.bottom;
    this.width = this.outerWidth - this.seismographConfig.margin.left - this.seismographConfig.margin.right;
    this.calcScaleAndZoom();
    if (this.canvas) {
      this.canvasHolder.attr("width", this.width).attr("height", this.height + 1);
      this.canvas.attr("width", this.width).attr("height", this.height + 1);
    }
  }
  throttle(func, delay) {
    if (this.throttleResize) {
      clearTimeout(this.throttleResize);
    }
    this.throttleResize = setTimeout(func, delay);
  }
  resizeNeeded() {
    const myThis = this;
    this.throttle(function() {
      myThis.draw();
    }, 250);
  }
  drawTitle() {
    const wrapper = this.shadowRoot?.querySelector("div");
    const svgEl = wrapper.querySelector("svg");
    drawTitle(
      svgEl,
      this.seismographConfig,
      this.height,
      this.width,
      this.createHandlebarsInput()
    );
  }
  drawXLabel() {
    const wrapper = this.shadowRoot?.querySelector("div");
    const svgEl = wrapper.querySelector("svg");
    drawXLabel(
      svgEl,
      this.seismographConfig,
      this.height,
      this.width,
      this.createHandlebarsInput()
    );
  }
  drawXSublabel() {
    const wrapper = this.shadowRoot?.querySelector("div");
    const svgEl = wrapper.querySelector("svg");
    drawXSublabel(
      svgEl,
      this.seismographConfig,
      this.height,
      this.width,
      this.createHandlebarsInput()
    );
  }
  drawYLabel() {
    const wrapper = this.shadowRoot?.querySelector("div");
    const svgEl = wrapper.querySelector("svg");
    drawYLabel(
      svgEl,
      this.seismographConfig,
      this.height,
      this.width,
      this.createHandlebarsInput()
    );
  }
  drawYSublabel() {
    const wrapper = this.shadowRoot?.querySelector("div");
    const svgEl = wrapper.querySelector("svg");
    drawYSublabel(
      svgEl,
      this.seismographConfig,
      this.height,
      this.width,
      this.createHandlebarsInput()
    );
  }
  calcTimeScaleDomain() {
    if (this.seismographConfig.isRelativeTime) {
      if (isDef(this.seismographConfig.linkedTimeScale)) {
        if (this._seisDataList.length !== 0 && this.seismographConfig.linkedTimeScale.duration.toMillis() === 0) {
          this.seismographConfig.linkedTimeScale.duration = findMaxDuration(this._seisDataList);
        }
      } else if (this.seismographConfig.fixedTimeScale) {
      } else {
      }
    } else {
      if (isDef(this.seismographConfig.linkedTimeScale)) {
        const linkedTimeScale = this.seismographConfig.linkedTimeScale;
        if (this._seisDataList.length !== 0 && linkedTimeScale.duration.toMillis() === 0) {
          this.seismographConfig.linkedTimeScale.duration = findMaxDuration(this._seisDataList);
        }
      } else if (this.seismographConfig.fixedTimeScale) {
      } else {
      }
    }
  }
  calcAmpScaleDomain() {
    let minMax;
    if (this.seismographConfig.fixedAmplitudeScale) {
      minMax = this.seismographConfig.fixedAmplitudeScale;
    } else {
      if (this.seismographConfig.windowAmp) {
        if (isDef(this.seismographConfig.linkedTimeScale)) {
          minMax = findMinMaxOverRelativeTimeRange(
            this._seisDataList,
            this.seismographConfig.linkedTimeScale.offset,
            this.seismographConfig.linkedTimeScale.duration,
            this.seismographConfig.doGain,
            this.seismographConfig.centeredAmp
          );
        } else if (isDef(this.seismographConfig.fixedTimeScale)) {
          minMax = findMinMaxOverTimeRange(
            this._seisDataList,
            this.seismographConfig.fixedTimeScale,
            this.seismographConfig.doGain,
            this.seismographConfig.centeredAmp
          );
        } else {
          throw new Error("neither fixed nor linked time scale");
        }
      } else {
        minMax = findMinMax(
          this._seisDataList,
          this.seismographConfig.doGain,
          this.seismographConfig.centeredAmp
        );
      }
      if (minMax[0] === minMax[1]) {
      }
      if (this.seismographConfig.isYAxisNice) {
        let scale = linear3();
        scale.domain(minMax);
        scale = scale.nice();
        minMax = scale.domain();
      }
    }
    const middle = (minMax[1] + minMax[0]) / 2;
    const halfWidth = (minMax[1] - minMax[0]) / 2;
    return [middle, halfWidth];
  }
  recheckAmpScaleDomain() {
    const calcMidHW = this.calcAmpScaleDomain();
    const oldMiddle = this.amp_scalable.middle;
    const oldHalfWidth = this.amp_scalable.halfWidth;
    this.amp_scalable.middle = calcMidHW[0];
    this.amp_scalable.halfWidth = calcMidHW[1];
    if (this.seismographConfig.linkedAmplitudeScale) {
      if (this.amp_scalable.middle !== oldMiddle || this.amp_scalable.halfWidth !== oldHalfWidth) {
        this.seismographConfig.linkedAmplitudeScale.recalculate();
      }
    } else {
      this.redoDisplayYScale();
    }
  }
  redoDisplayYScale() {
    if (this.seismographConfig.doGain && this._seisDataList.length > 0 && this._seisDataList.every((sdd) => sdd.hasSensitivity()) && this._seisDataList.every(
      (sdd) => isDef(sdd.seismogram) && sdd.seismogram.yUnit === COUNT_UNIT2
    )) {
      const firstSensitivity = this._seisDataList[0].sensitivity;
      const allSameSensitivity = this._seisDataList.every(
        (sdd) => isDef(firstSensitivity) && sdd.sensitivity && firstSensitivity.sensitivity === sdd.sensitivity.sensitivity && firstSensitivity.inputUnits === sdd.sensitivity.inputUnits && firstSensitivity.outputUnits === sdd.sensitivity.outputUnits
      );
      if (!allSameSensitivity) {
        console.log(`not all same sensitivity: ${this._seisDataList.length}`);
        this._seisDataList.forEach((sdd) => {
          console.log(` ${sdd.sensitivity?.sensitivity} ${sdd.sensitivity?.inputUnits} ${sdd.sensitivity?.outputUnits}`);
        });
      }
      if (isDef(firstSensitivity) && this._seisDataList.every(
        (sdd) => isDef(firstSensitivity) && sdd.sensitivity && firstSensitivity.sensitivity === sdd.sensitivity.sensitivity && firstSensitivity.inputUnits === sdd.sensitivity.inputUnits && firstSensitivity.outputUnits === sdd.sensitivity.outputUnits
      )) {
        if (this.seismographConfig.ySublabelIsUnits) {
          this.seismographConfig.ySublabel = firstSensitivity.inputUnits;
        }
      } else {
        throw new Error(
          `doGain with different seisitivities not yet implemented. ${firstSensitivity} doGain=${this.seismographConfig.doGain}`
        );
      }
    } else {
      if (this.seismographConfig.ySublabelIsUnits) {
        this.seismographConfig.ySublabel = "";
        const allUnits = [];
        for (const t of this._seisDataList) {
          if (t.seismogram) {
            const u = t.seismogram.yUnit;
            allUnits.push(u);
            this.seismographConfig.ySublabel += `${u} `;
          }
        }
        if (allUnits.length === 0) {
          allUnits.push("Count");
        }
        this.seismographConfig.ySublabel = allUnits.join(" ");
      }
    }
    if (this.seismographConfig.ySublabelIsUnits && this.seismographConfig.centeredAmp) {
      this.seismographConfig.ySublabel = `centered ${this.seismographConfig.ySublabel}`;
    }
    this.rescaleYAxis();
    if (this.seismographConfig.ySublabelIsUnits) {
      this.drawYSublabel();
    }
  }
  getSeismogramData() {
    return this._seisDataList;
  }
  _internalAppend(sddList) {
    if (!sddList) {
    } else if (Array.isArray(sddList)) {
      for (const s3 of sddList) {
        if (s3 instanceof SeismogramDisplayData) {
          this._seisDataList.push(s3);
        } else {
          this._seisDataList.push(SeismogramDisplayData.fromSeismogram(s3));
        }
      }
    } else {
      if (sddList instanceof SeismogramDisplayData) {
        this._seisDataList.push(sddList);
      } else {
        this._seisDataList.push(SeismogramDisplayData.fromSeismogram(sddList));
      }
    }
  }
  appendSeisData(seismogram) {
    this._internalAppend(seismogram);
    this.seisDataUpdated();
  }
  seisDataUpdated() {
    this.calcTimeScaleDomain();
    this.recheckAmpScaleDomain();
    if (!this.beforeFirstDraw) {
      this.redraw();
    }
  }
  getDisplayDataForSeismogram(seis) {
    const out = this._seisDataList.find((sd) => sd.seismogram === seis);
    if (out) {
      return out;
    } else {
      return null;
    }
  }
  removeSeisData(seisData) {
    this._seisDataList = this._seisDataList.filter((sd) => sd !== seisData);
  }
  trim(timeRange) {
    if (this._seisDataList) {
      this._seisDataList = this._seisDataList.filter(function(d) {
        return d.timeRange.overlaps(timeRange);
      });
      if (this._seisDataList.length > 0) {
        this.recheckAmpScaleDomain();
        this.drawSeismograms();
      }
    }
  }
};
var Seismograph = _Seismograph;
__publicField(Seismograph, "_lastID");
var SeismographAmplitudeScalable = class extends AmplitudeScalable {
  constructor(graph) {
    const calcMidHW = graph.calcAmpScaleDomain();
    super(calcMidHW[0], calcMidHW[1]);
    __publicField(this, "graph");
    __publicField(this, "drawHalfWidth");
    __publicField(this, "drawMiddle");
    this.graph = graph;
    this.drawHalfWidth = super.halfWidth;
    this.drawMiddle = super.middle;
  }
  notifyAmplitudeChange(middle, halfWidth) {
    if (middle !== this.drawMiddle || halfWidth !== this.drawHalfWidth) {
      this.drawMiddle = middle;
      this.drawHalfWidth = halfWidth;
      this.graph.redoDisplayYScale();
      if (!this.graph.beforeFirstDraw) {
        this.graph.redraw();
      }
    }
  }
};
var ZERO_DURATION = Duration.fromMillis(0);
var SeismographTimeScalable = class extends TimeScalable {
  constructor(graph, alignmentTimeOffset, duration) {
    super(alignmentTimeOffset, duration);
    __publicField(this, "graph");
    __publicField(this, "drawAlignmentTimeOffset");
    __publicField(this, "drawDuration");
    this.graph = graph;
    this.drawAlignmentTimeOffset = ZERO_DURATION;
    this.drawDuration = ZERO_DURATION;
  }
  notifyTimeRangeChange(offset2, duration) {
    if (!this.drawAlignmentTimeOffset.equals(offset2) || !this.drawDuration.equals(duration)) {
      this.drawAlignmentTimeOffset = offset2;
      this.drawDuration = duration;
      if (isDef(this.graph) && !this.graph.beforeFirstDraw) {
        this.graph.redrawWithXScale();
      }
    }
  }
};
Seismograph._lastID = 0;
function createMarkersForTravelTimes(quake, ttime) {
  return ttime.arrivals.map((a3) => {
    return {
      markertype: "predicted",
      name: a3.phase,
      time: quake.time.plus(Duration.fromMillis(1e3 * a3.time)),
      description: ""
    };
  });
}
function createMarkerForOriginTime(quake) {
  return {
    markertype: "predicted",
    name: "origin",
    time: quake.time,
    description: ""
  };
}
function createFullMarkersForQuakeAtStation(quake, station) {
  const markers = [];
  const daz = distaz(
    station.latitude,
    station.longitude,
    quake.latitude,
    quake.longitude
  );
  let mag = quake.preferredMagnitude ? quake.preferredMagnitude.mag : "";
  let magStr = quake.preferredMagnitude ? quake.preferredMagnitude.toString() : "";
  markers.push({
    markertype: "predicted",
    name: `M${mag} ${quake.time.toFormat("HH:mm")}`,
    time: quake.time,
    link: `https://earthquake.usgs.gov/earthquakes/eventpage/${quake.eventId}/executive`,
    description: `${quake.time.toISO()}
${quake.latitude.toFixed(2)}/${quake.longitude.toFixed(2)} ${(quake.depth / 1e3).toFixed(2)} km
${quake.description}
${magStr}
${daz.delta.toFixed(2)} deg to ${station.stationCode} (${daz.distanceKm} km)
`
  });
  return markers;
}
function createFullMarkersForQuakeAtChannel(quake, channel) {
  const markers = createFullMarkersForQuakeAtStation(quake, channel.station);
  return markers.concat(createMarkerForPicks(quake.preferredOrigin, channel));
}
function createMarkerForQuakePicks(quake, channel) {
  const markers = [];
  if (quake.pickList) {
    quake.pickList.forEach((pick2) => {
      if (pick2 && pick2.isOnChannel(channel)) {
        markers.push({
          markertype: "pick",
          name: "pick",
          time: pick2.time,
          description: ""
        });
      }
    });
  }
  return markers;
}
function createMarkerForPicks(origin, channel) {
  const markers = [];
  if (origin.arrivals) {
    origin.arrivals.forEach((arrival) => {
      if (arrival && arrival.pick.isOnChannel(channel)) {
        markers.push({
          markertype: "pick",
          name: arrival.phase,
          time: arrival.pick.time,
          description: ""
        });
      }
    });
  }
  return markers;
}
function createNumberFormatWrapper(formatter) {
  return (nValue) => {
    if (typeof nValue === "number") {
      return formatter(nValue);
    } else {
      return formatter(nValue.valueOf());
    }
  };
}
function createDateFormatWrapper(formatter) {
  return (nValue) => {
    if (nValue instanceof Date) {
      return formatter(nValue);
    } else if (typeof nValue === "number") {
      return formatter(new Date(nValue));
    } else {
      return formatter(new Date(nValue.valueOf()));
    }
  };
}
customElements.define(SEISMOGRAPH_ELEMENT, Seismograph);

// src/spectraplot.ts
var SPECTRA_ELEMENT = "sp-spectra";
var FreqAmp = class {
  constructor(freq, values) {
    __publicField(this, "freq");
    __publicField(this, "values");
    __publicField(this, "inputUnits");
    __publicField(this, "seismogramDisplayData");
    this.freq = freq;
    this.values = values;
    this.inputUnits = "";
    this.seismogramDisplayData = null;
    if (freq.length !== values.length) {
      throw new Error(`Frequencies and complex values must have same length: ${freq.length} ${values.length}`);
    }
  }
  frequencies() {
    return this.freq;
  }
  amplitudes() {
    const out = new Float32Array(this.values.length);
    this.values.forEach((c5, i) => out[i] = c5.abs());
    return out;
  }
  phases() {
    const out = new Float32Array(this.values.length);
    this.values.forEach((c5, i) => out[i] = c5.angle());
    return out;
  }
  get numFrequencies() {
    return this.freq.length;
  }
  get minFrequency() {
    return this.fundamentalFrequency;
  }
  get maxFrequency() {
    return this.freq[this.freq.length - 1];
  }
  get fundamentalFrequency() {
    return this.freq[0];
  }
};
var spectra_plot_css = `
:host {
  display: block
}

div.wrapper {
  height: 100%;
  min-height: 100px;
}
path.fftpath {
  stroke: skyblue;
  fill: none;
  stroke-width: 1px;
}

svg.spectra_plot {
  height: 100%;
  width: 100%;
  min-height: 100px;
  display: block;
}
svg.spectra_plot text.title {
  font-size: larger;
  font-weight: bold;
  fill: black;
  color: black;
  dominant-baseline: hanging;
}

svg.spectra_plot text.sublabel {
  font-size: smaller;
}

/* links in svg */
svg.spectra_plot text a {
  fill: #0000EE;
  text-decoration: underline;
}

`;
var AMPLITUDE = "amplitude";
var PHASE = "phase";
var LOGFREQ = "logfreq";
var KIND = "kind";
var SpectraPlot = class extends HTMLElement {
  constructor(fftResults, seismographConfig) {
    super();
    __publicField(this, "_seismographConfig");
    __publicField(this, "_fftResults");
    if (seismographConfig) {
      this._seismographConfig = seismographConfig;
    } else {
      this._seismographConfig = new SeismographConfig();
    }
    if (fftResults) {
      this._fftResults = fftResults;
    } else {
      this._fftResults = [];
    }
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    addStyleToElement(this, spectra_plot_css);
    const lineColorsCSS = this.seismographConfig.createCSSForLineColors();
    addStyleToElement(this, lineColorsCSS, COLOR_CSS_ID);
    this.shadowRoot?.appendChild(wrapper);
  }
  get fftResults() {
    return this._fftResults;
  }
  set fftResults(fftResults) {
    this._fftResults = fftResults;
    this.draw();
  }
  get seismographConfig() {
    return this._seismographConfig;
  }
  set seismographConfig(seismographConfig) {
    this._seismographConfig = seismographConfig;
    this.draw();
  }
  get kind() {
    let k2 = this.hasAttribute(KIND) ? this.getAttribute(KIND) : AMPLITUDE;
    if (!k2) {
      k2 = AMPLITUDE;
    }
    return k2;
  }
  set kind(val) {
    this.setAttribute(KIND, val);
  }
  get logfreq() {
    if (!this.hasAttribute(LOGFREQ)) {
      return true;
    }
    const b = this.getAttribute(LOGFREQ);
    if (b && b.toLowerCase() === "true") {
      return true;
    }
    return false;
  }
  set logfreq(val) {
    this.setAttribute(LOGFREQ, `${val}`);
  }
  connectedCallback() {
    this.draw();
  }
  static get observedAttributes() {
    return [LOGFREQ, KIND];
  }
  attributeChangedCallback(name, oldValue, newValue) {
    this.draw();
  }
  draw() {
    if (!this.isConnected) {
      return;
    }
    const ampPhaseList = [];
    let maxFFTAmpLen = 0;
    const extentFFTData = [];
    const freqMinMax = [];
    if (this.kind === PHASE) {
      extentFFTData.push(-Math.PI);
      extentFFTData.push(Math.PI);
      if (this.seismographConfig.ySublabelIsUnits) {
        this.seismographConfig.ySublabelIsUnits = false;
        this.seismographConfig.ySublabel = "Radian";
      }
    } else {
      if (this.seismographConfig.ySublabelIsUnits) {
        this.seismographConfig.ySublabelIsUnits = false;
        this.seismographConfig.ySublabel = "";
      }
    }
    for (const fftA of this.fftResults) {
      if (this.logfreq === true) {
        freqMinMax.push(fftA.fundamentalFrequency);
      } else {
        freqMinMax.push(0);
      }
      freqMinMax.push(fftA.maxFrequency);
      let ap;
      if (fftA instanceof FFTResult || fftA instanceof FreqAmp) {
        ap = fftA;
      } else {
        throw new Error("fftResults must be array of FFTResult");
      }
      ampPhaseList.push(ap);
      if (maxFFTAmpLen < ap.numFrequencies) {
        maxFFTAmpLen = ap.numFrequencies;
      }
      let ampSlice;
      if (this.kind === AMPLITUDE) {
        ampSlice = ap.amplitudes();
      } else if (this.kind === PHASE) {
        ampSlice = ap.phases();
      } else {
        throw new Error(`Unknown plot kind=${this.kind}`);
      }
      if (this.kind === AMPLITUDE) {
        ampSlice = ampSlice.slice(1);
      }
      const currExtent = extent_default(ampSlice);
      if (this.kind === AMPLITUDE && currExtent[0] === 0) {
        currExtent[0] = 0.1 * ampSlice.reduce(function(acc, curr) {
          if (curr > 0 && curr < acc) {
            return curr;
          } else {
            return acc;
          }
        }, 1e-9);
      }
      if (currExtent[0]) {
        extentFFTData.push(currExtent[0]);
      }
      if (currExtent[1]) {
        extentFFTData.push(currExtent[1]);
      }
    }
    if (freqMinMax.length < 2) {
      freqMinMax.push(0.1);
      freqMinMax.push(10);
    }
    if (extentFFTData.length < 2) {
      extentFFTData.push(0.1);
      extentFFTData.push(1);
    }
    const wrapper = this.shadowRoot?.querySelector("div");
    while (wrapper.firstChild) {
      wrapper.removeChild(wrapper.lastChild);
    }
    const svg_element = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    wrapper.appendChild(svg_element);
    const svg2 = select_default2(svg_element);
    svg2.classed("spectra_plot", true).classed(AUTO_COLOR_SELECTOR, true);
    const rect = svg_element.getBoundingClientRect();
    const width = +rect.width - this.seismographConfig.margin.left - this.seismographConfig.margin.right;
    const height = +rect.height - this.seismographConfig.margin.top - this.seismographConfig.margin.bottom;
    const g = svg2.append("g").attr(
      "transform",
      "translate(" + this.seismographConfig.margin.left + "," + this.seismographConfig.margin.top + ")"
    );
    let xScale;
    if (this.logfreq) {
      xScale = log3().rangeRound([0, width]);
    } else {
      xScale = linear3().rangeRound([0, width]);
    }
    const freqMin = freqMinMax.reduce((acc, cur) => Math.min(acc, cur));
    const freqMax = freqMinMax.reduce((acc, cur) => Math.max(acc, cur));
    xScale.domain([freqMin, freqMax]);
    let fftMin = extentFFTData.reduce((acc, cur) => Math.min(acc, cur), Number.MAX_VALUE);
    let fftMax = extentFFTData.reduce((acc, cur) => Math.max(acc, cur), -1);
    if ((fftMax - fftMin) / fftMax < 0.1) {
      fftMin = fftMin * 0.1;
      fftMax = fftMax * 2;
    }
    let yScale;
    if (this.kind === AMPLITUDE) {
      yScale = log3().rangeRound([height, 0]);
      yScale.domain([fftMin, fftMax]);
      if (yScale.domain()[0] === yScale.domain()[1]) {
        yScale.domain([
          yScale.domain()[0] / 2,
          yScale.domain()[1] * 2
        ]);
      }
    } else {
      yScale = linear3().rangeRound([height, 0]);
      yScale.domain([fftMin, fftMax]);
      if (yScale.domain()[0] === yScale.domain()[1]) {
        yScale.domain([
          yScale.domain()[0] - 1,
          yScale.domain()[1] + 1
        ]);
      }
    }
    const xAxis = axisBottom(xScale);
    g.append("g").attr("transform", "translate(0," + height + ")").call(xAxis);
    const yAxis = axisLeft(yScale);
    g.append("g").call(yAxis);
    this.seismographConfig.yLabel = "Amplitude";
    if (this.kind === PHASE) {
      this.seismographConfig.yLabel = "Phase";
    }
    this.seismographConfig.xLabel = "Frequency";
    this.seismographConfig.xSublabel = "Hz";
    if (this.seismographConfig.ySublabelIsUnits) {
      if (this.kind === PHASE) {
        this.seismographConfig.ySublabel = "radian";
      } else {
        this.seismographConfig.ySublabel = "";
        for (const ap of ampPhaseList) {
          this.seismographConfig.ySublabel += ap.inputUnits;
        }
      }
    }
    const pathg = g.append("g").classed(G_DATA_SELECTOR, true);
    for (const ap of ampPhaseList) {
      let ampSlice;
      if (this.kind === AMPLITUDE) {
        ampSlice = ap.amplitudes();
      } else if (this.kind === PHASE) {
        ampSlice = ap.phases();
      } else {
        throw new Error(`Unknown plot kind=${this.kind}`);
      }
      let freqSlice = ap.frequencies();
      if (this.logfreq) {
        freqSlice = freqSlice.slice(1);
        ampSlice = ampSlice.slice(1);
      }
      const line = line_default2();
      line.x(function(d, i) {
        return xScale(freqSlice[i]);
      });
      line.y(function(d) {
        if (d !== 0 && !isNaN(d)) {
          return yScale(d);
        } else {
          return yScale.range()[0];
        }
      });
      pathg.append("g").append("path").classed("fftpath", true).datum(ampSlice).attr("d", line);
    }
    const handlebarInput = {
      seisDataList: this.fftResults.map((f) => f.seismogramDisplayData),
      seisConfig: this.seismographConfig
    };
    drawAxisLabels(
      svg_element,
      this.seismographConfig,
      height,
      width,
      handlebarInput
    );
  }
};
customElements.define(SPECTRA_ELEMENT, SpectraPlot);

// src/infotable.ts
var infotable_exports = {};
__export(infotable_exports, {
  CHANNEL_COLUMN: () => CHANNEL_COLUMN,
  CHANNEL_INFO_ELEMENT: () => CHANNEL_INFO_ELEMENT,
  ChannelTable: () => ChannelTable,
  DEFAULT_TEMPLATE: () => DEFAULT_TEMPLATE,
  INFO_ELEMENT: () => INFO_ELEMENT,
  QUAKE_COLUMN: () => QUAKE_COLUMN,
  QUAKE_INFO_ELEMENT: () => QUAKE_INFO_ELEMENT,
  QuakeStationTable: () => QuakeStationTable,
  QuakeTable: () => QuakeTable,
  SDD_INFO_ELEMENT: () => SDD_INFO_ELEMENT,
  SEISMOGRAM_COLUMN: () => SEISMOGRAM_COLUMN,
  STATION_COLUMN: () => STATION_COLUMN,
  STATION_INFO_ELEMENT: () => STATION_INFO_ELEMENT,
  SeismogramTable: () => SeismogramTable,
  StationTable: () => StationTable,
  TABLE_CSS: () => TABLE_CSS,
  depthFormat: () => depthFormat,
  depthMeterFormat: () => depthMeterFormat,
  latlonFormat: () => latlonFormat,
  magFormat: () => magFormat
});
var INFO_ELEMENT = "sp-station-event-table";
var QUAKE_INFO_ELEMENT = "sp-event-table";
var QUAKE_COLUMN = /* @__PURE__ */ ((QUAKE_COLUMN2) => {
  QUAKE_COLUMN2["LAT"] = "Lat";
  QUAKE_COLUMN2["LON"] = "Lon";
  QUAKE_COLUMN2["TIME"] = "Time";
  QUAKE_COLUMN2["MAG"] = "Mag";
  QUAKE_COLUMN2["MAGTYPE"] = "MagType";
  QUAKE_COLUMN2["DEPTH"] = "Depth";
  QUAKE_COLUMN2["DESC"] = "Description";
  QUAKE_COLUMN2["EVENTID"] = "EventId";
  return QUAKE_COLUMN2;
})(QUAKE_COLUMN || {});
var CHANNEL_COLUMN = /* @__PURE__ */ ((CHANNEL_COLUMN2) => {
  CHANNEL_COLUMN2["LAT"] = "Lat";
  CHANNEL_COLUMN2["LON"] = "Lon";
  CHANNEL_COLUMN2["AZIMUTH"] = "Az";
  CHANNEL_COLUMN2["DIP"] = "Dip";
  CHANNEL_COLUMN2["START"] = "Start";
  CHANNEL_COLUMN2["END"] = "End";
  CHANNEL_COLUMN2["ELEVATION"] = "Elev";
  CHANNEL_COLUMN2["DEPTH"] = "Depth";
  CHANNEL_COLUMN2["SOURCEID"] = "SourceId";
  CHANNEL_COLUMN2["CODE"] = "Code";
  CHANNEL_COLUMN2["NETWORK_CODE"] = "NetworkCode";
  CHANNEL_COLUMN2["STATION_CODE"] = "StationCode";
  CHANNEL_COLUMN2["LOCATION_CODE"] = "LocationCode";
  CHANNEL_COLUMN2["CHANNEL_CODE"] = "ChannelCode";
  return CHANNEL_COLUMN2;
})(CHANNEL_COLUMN || {});
var STATION_COLUMN = /* @__PURE__ */ ((STATION_COLUMN2) => {
  STATION_COLUMN2["LAT"] = "Lat";
  STATION_COLUMN2["LON"] = "Lon";
  STATION_COLUMN2["START"] = "Start";
  STATION_COLUMN2["END"] = "End";
  STATION_COLUMN2["ELEVATION"] = "Elev";
  STATION_COLUMN2["SOURCEID"] = "SourceId";
  STATION_COLUMN2["CODE"] = "Code";
  STATION_COLUMN2["NETWORK_CODE"] = "NetworkCode";
  STATION_COLUMN2["STATION_CODE"] = "StationCode";
  return STATION_COLUMN2;
})(STATION_COLUMN || {});
var SEISMOGRAM_COLUMN = /* @__PURE__ */ ((SEISMOGRAM_COLUMN2) => {
  SEISMOGRAM_COLUMN2["START"] = "Start";
  SEISMOGRAM_COLUMN2["DURATION"] = "Duration";
  SEISMOGRAM_COLUMN2["END"] = "End";
  SEISMOGRAM_COLUMN2["NUM_POINTS"] = "Num Pts";
  SEISMOGRAM_COLUMN2["SAMPLE_RATE"] = "Sample Rate";
  SEISMOGRAM_COLUMN2["SAMPLE_PERIOD"] = "Sample Period";
  SEISMOGRAM_COLUMN2["SEGMENTS"] = "Segments";
  SEISMOGRAM_COLUMN2["SOURCEID"] = "SourceId";
  SEISMOGRAM_COLUMN2["CODE"] = "Codes";
  SEISMOGRAM_COLUMN2["NETWORK_CODE"] = "NetworkCode";
  SEISMOGRAM_COLUMN2["STATION_CODE"] = "StationCode";
  return SEISMOGRAM_COLUMN2;
})(SEISMOGRAM_COLUMN || {});
var DEFAULT_TEMPLATE = `
  <table>
  <thead>
      <tr>
        <th colspan="7">Waveform</th>
        <th colspan="4">Channel</th>
        <th colspan="6">Event</th>
        <th colspan="4">DistAz</th>
      </tr>
      <tr>
        <th>Codes</th>
        <th>Start</th>
        <th>Duration</th>
        <th>End</th>
        <th>Num Pts</th>
        <th>Sample Rate</th>
        <th>Seg</th>

        <th>Lat</th>
        <th>Lon</th>
        <th>Elev</th>
        <th>Depth</th>

        <th>Time</th>
        <th>Lat</th>
        <th>Lon</th>
        <th colspan="2">Mag</th>
        <th>Depth</th>

        <th>Dist deg</th>
        <th>Dist km</th>
        <th>Azimuth</th>
        <th>Back Azimuth</th>
      </tr>
    </thead>
    <tbody>
    {{#each seisDataList as |sdd|}}
      <tr>
        <td>{{sdd.nslc}}</td>
        <td>{{formatIsoDate sdd.seismogram.startTime}}</td>
        <td>{{formatDuration sdd.seismogram.timeRange}}</td>
        <td>{{formatIsoDate sdd.seismogram.endTime}}</td>
        <td>{{sdd.seismogram.numPoints}}</td>
        <td>{{sdd.seismogram.sampleRate}}</td>
        <td>{{sdd.seismogram.segments.length}}</td>

        {{#if sdd.channel}}
          <td>{{sdd.channel.latitude}}</td>
          <td>{{sdd.channel.longitude}}</td>
          <td>{{sdd.channel.elevation}}</td>
          <td>{{sdd.channel.depth}}</td>
        {{else}}
          <td>no channel</td>
          <td/>
          <td/>
          <td/>
        {{/if}}

        {{#if sdd.quake }}
          <td>{{formatIsoDate sdd.quake.time}}</td>
          <td>{{sdd.quake.latitude}}</td>
          <td>{{sdd.quake.longitude}}</td>
          <td>{{sdd.quake.magnitude.mag}}</td>
          <td>{{sdd.quake.magnitude.type}}</td>
          <td>{{sdd.quake.depthKm}}</td>
        {{else}}
          <td>no quake</td>
          <td/>
          <td/>
          <td/>
          <td/>
          <td/>
        {{/if}}
        {{#if sdd.quake }}
          {{#if sdd.channel }}
            <td>{{formatNumber sdd.distaz.distanceDeg 2}}</td>
            <td>{{formatNumber sdd.distaz.distanceKm 0}}</td>
            <td>{{formatNumber sdd.distaz.az 2}}</td>
            <td>{{formatNumber sdd.distaz.baz 2}}</td>
          {{/if}}
        {{/if}}
      </tr>
    {{/each}}
    </tbody>
  </table>
`;
var TABLE_CSS = `
tbody tr:nth-child(even)
{
  background: var(--even-row-background, Cornsilk);
}
tbody tr:nth-child(odd)
{
  background: var(--odd-row-background);
}
table {
    display: block;
    overflow-x: auto;
    white-space: nowrap;
}
`;
var QuakeStationTable = class extends SeisPlotElement {
  constructor(seisData, seisConfig) {
    super(seisData, seisConfig);
    __publicField(this, "_template");
    this._template = DEFAULT_TEMPLATE;
    this.addStyle(TABLE_CSS);
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    this.shadowRoot?.appendChild(wrapper);
  }
  get template() {
    return this._template;
  }
  set template(t) {
    this._template = t;
    this.draw();
  }
  draw() {
    if (!this.isConnected) {
      return;
    }
    const mythis = this;
    const wrapper = this.shadowRoot?.querySelector("div");
    while (wrapper.firstChild) {
      wrapper.removeChild(wrapper.lastChild);
    }
    const handlebarsCompiled = import_handlebars.default.compile(this.template);
    wrapper.innerHTML = handlebarsCompiled(
      {
        seisDataList: mythis.seisData,
        seisConfig: mythis.seismographConfig
      },
      {
        allowProtoPropertiesByDefault: true
      }
    );
  }
};
customElements.define(INFO_ELEMENT, QuakeStationTable);
var QuakeTable = class extends HTMLElement {
  constructor(quakeList, columnLabels) {
    super();
    __publicField(this, "_columnLabels");
    __publicField(this, "_quakeList");
    __publicField(this, "_rowToQuake");
    __publicField(this, "lastSortAsc", true);
    __publicField(this, "lastSortCol");
    if (!quakeList) {
      quakeList = [];
    }
    if (!columnLabels) {
      columnLabels = /* @__PURE__ */ new Map();
      columnLabels.set("Time" /* TIME */, "Time");
      columnLabels.set("Lat" /* LAT */, "Lat");
      columnLabels.set("Lon" /* LON */, "Lon");
      columnLabels.set("Mag" /* MAG */, "Mag");
      columnLabels.set("MagType" /* MAGTYPE */, "Type");
      columnLabels.set("Depth" /* DEPTH */, "Depth");
      columnLabels.set("Description" /* DESC */, "Description");
    }
    this._quakeList = quakeList;
    this._columnLabels = columnLabels;
    this._rowToQuake = /* @__PURE__ */ new Map();
    const shadow = this.attachShadow({ mode: "open" });
    const table = document.createElement("table");
    table.setAttribute("class", "wrapper");
    addStyleToElement(this, TABLE_CSS);
    shadow.appendChild(table);
  }
  get quakeList() {
    return this._quakeList;
  }
  set quakeList(ql) {
    this._quakeList = ql;
    this.draw();
  }
  get columnLabels() {
    return this._columnLabels;
  }
  set columnLabels(cols) {
    this._columnLabels = cols;
    this.draw();
  }
  draw() {
    if (!this.isConnected) {
      return;
    }
    const table = this.shadowRoot?.querySelector("table");
    table.deleteTHead();
    const theader = table.createTHead().insertRow();
    this.headers().forEach((h) => {
      const cell = theader.appendChild(document.createElement("th"));
      cell.textContent = h;
      cell.addEventListener("click", () => {
        this.sort(h, cell);
      });
    });
    table.querySelectorAll("tbody")?.forEach((tb) => {
      table.removeChild(tb);
    });
    const tbody = table.createTBody();
    this.quakeList.forEach((q) => {
      const row = tbody.insertRow();
      this.populateRow(q, row, -1);
    });
  }
  headers() {
    return Array.from(this._columnLabels.keys());
  }
  populateRow(q, row, index3) {
    this._rowToQuake.set(row, q);
    this.headers().forEach((h) => {
      const cell = row.insertCell(index3);
      cell.textContent = QuakeTable.getQuakeValue(q, h);
      if (index3 !== -1) {
        index3++;
      }
    });
  }
  static getQuakeValue(q, h) {
    if (h === "Time" /* TIME */) {
      return q.time.toISO();
    } else if (h === "Lat" /* LAT */) {
      return latlonFormat.format(q.latitude);
    } else if (h === "Lon" /* LON */) {
      return latlonFormat.format(q.longitude);
    } else if (h === "Depth" /* DEPTH */) {
      return depthFormat.format(q.depthKm);
    } else if (h === "Mag" /* MAG */) {
      return magFormat.format(q.magnitude.mag);
    } else if (h === "MagType" /* MAGTYPE */) {
      return q.magnitude.type;
    } else if (h === "Description" /* DESC */) {
      return q.description;
    } else if (h === "EventId" /* EVENTID */) {
      return `${q.eventId}`;
    } else {
      return `unknown: ${h}`;
    }
  }
  sort(h, headerCell) {
    const table = this.shadowRoot?.querySelector("table");
    const tbody = table.querySelector("tbody");
    if (tbody) {
      const rows = Array.from(tbody.querySelectorAll("tr"));
      rows.sort((rowa, rowb) => {
        let out = 0;
        const qa = this._rowToQuake.get(rowa);
        const qb = this._rowToQuake.get(rowb);
        if (qa && qb) {
          if (h === "Time" /* TIME */) {
            out = qa.time.toMillis() - qb.time.toMillis();
          } else if (h === "Lat" /* LAT */) {
            out = qa.latitude - qb.latitude;
          } else if (h === "Lon" /* LON */) {
            out = qa.longitude - qb.longitude;
          } else if (h === "Mag" /* MAG */) {
            out = qa.magnitude.mag - qb.magnitude.mag;
          } else if (h === "Depth" /* DEPTH */) {
            out = qa.depthKm - qb.depthKm;
          } else {
            const ta = QuakeTable.getQuakeValue(qa, h);
            const tb = QuakeTable.getQuakeValue(qb, h);
            if (ta < tb) {
              out = -1;
            } else if (ta > tb) {
              out = 1;
            } else {
              out = 0;
            }
          }
        } else {
          console.log(`can't find qa or qb: ${qa} ${qb}`);
        }
        return out;
      });
      if (this.lastSortCol === h) {
        if (this.lastSortAsc) {
          rows.reverse();
        }
        this.lastSortAsc = !this.lastSortAsc;
      } else {
        this.lastSortAsc = true;
      }
      rows.forEach((v) => {
        tbody.appendChild(v);
      });
      this.lastSortCol = h;
    } else {
      console.log("no tbody for table sort");
    }
  }
};
customElements.define(QUAKE_INFO_ELEMENT, QuakeTable);
var ChannelTable = class extends HTMLElement {
  constructor(channelList, columnLabels) {
    super();
    __publicField(this, "_columnLabels");
    __publicField(this, "_channelList");
    __publicField(this, "_rowToChannel");
    __publicField(this, "lastSortAsc", true);
    __publicField(this, "lastSortCol");
    if (!channelList) {
      channelList = [];
    }
    if (!columnLabels) {
      columnLabels = /* @__PURE__ */ new Map();
      columnLabels.set("Code" /* CODE */, "Code");
      columnLabels.set("Start" /* START */, "Start");
      columnLabels.set("End" /* END */, "End");
      columnLabels.set("Lat" /* LAT */, "Lat");
      columnLabels.set("Lon" /* LON */, "Lon");
      columnLabels.set("Az" /* AZIMUTH */, "Az");
      columnLabels.set("Dip" /* DIP */, "Dip");
      columnLabels.set("Depth" /* DEPTH */, "Depth");
      columnLabels.set("Elev" /* ELEVATION */, "Evel");
      columnLabels.set("SourceId" /* SOURCEID */, "SourceId");
    }
    this._channelList = channelList;
    this._columnLabels = columnLabels;
    this._rowToChannel = /* @__PURE__ */ new Map();
    const shadow = this.attachShadow({ mode: "open" });
    const table = document.createElement("table");
    table.setAttribute("class", "wrapper");
    addStyleToElement(this, TABLE_CSS);
    shadow.appendChild(table);
  }
  get channelList() {
    return this._channelList;
  }
  set channelList(ql) {
    this._channelList = ql;
    this.draw();
  }
  get columnLabels() {
    return this._columnLabels;
  }
  set columnLabels(cols) {
    this._columnLabels = cols;
    this.draw();
  }
  draw() {
    if (!this.isConnected) {
      return;
    }
    const table = this.shadowRoot?.querySelector("table");
    table.deleteTHead();
    const theader = table.createTHead().insertRow();
    this.headers().forEach((h) => {
      const cell = theader.appendChild(document.createElement("th"));
      cell.textContent = h;
      cell.addEventListener("click", () => {
        this.sort(h, cell);
      });
    });
    table.querySelectorAll("tbody")?.forEach((tb) => {
      table.removeChild(tb);
    });
    const tbody = table.createTBody();
    this.channelList.forEach((q) => {
      const row = tbody.insertRow();
      this.populateRow(q, row, -1);
    });
  }
  headers() {
    return Array.from(this._columnLabels.keys());
  }
  populateRow(q, row, index3) {
    this._rowToChannel.set(row, q);
    this.headers().forEach((h) => {
      const cell = row.insertCell(index3);
      cell.textContent = ChannelTable.getChannelValue(q, h);
      if (index3 !== -1) {
        index3++;
      }
    });
  }
  static getChannelValue(q, h) {
    if (h === "Start" /* START */) {
      return q.startDate.toISO();
    } else if (h === "End" /* END */) {
      return q.endDate ? q.endDate.toISO() : "";
    } else if (h === "Lat" /* LAT */) {
      return latlonFormat.format(q.latitude);
    } else if (h === "Lon" /* LON */) {
      return latlonFormat.format(q.longitude);
    } else if (h === "Elev" /* ELEVATION */) {
      return depthMeterFormat.format(q.elevation);
    } else if (h === "Depth" /* DEPTH */) {
      return depthMeterFormat.format(q.depth);
    } else if (h === "Az" /* AZIMUTH */) {
      return latlonFormat.format(q.azimuth);
    } else if (h === "Dip" /* DIP */) {
      return latlonFormat.format(q.dip);
    } else if (h === "SourceId" /* SOURCEID */) {
      return `${q.sourceId}`;
    } else if (h === "Code" /* CODE */) {
      return `${q.codes()}`;
    } else if (h === "NetworkCode" /* NETWORK_CODE */) {
      return `${q.networkCode}`;
    } else if (h === "StationCode" /* STATION_CODE */) {
      return `${q.stationCode}`;
    } else if (h === "LocationCode" /* LOCATION_CODE */) {
      return `${q.locationCode}`;
    } else if (h === "ChannelCode" /* CHANNEL_CODE */) {
      return `${q.channelCode}`;
    } else {
      return `unknown: ${h}`;
    }
  }
  sort(h, headerCell) {
    const table = this.shadowRoot?.querySelector("table");
    const tbody = table.querySelector("tbody");
    if (tbody) {
      const rows = Array.from(tbody.querySelectorAll("tr"));
      rows.sort((rowa, rowb) => {
        let out = 0;
        const qa = this._rowToChannel.get(rowa);
        const qb = this._rowToChannel.get(rowb);
        if (qa && qb) {
          if (h === "Start" /* START */) {
            out = qa.startDate.toMillis() - qb.startDate.toMillis();
          } else if (h === "End" /* END */) {
            if (qa.endDate && qb.endDate) {
              out = qa.endDate.toMillis() - qb.endDate.toMillis();
            } else if (qb.endDate) {
              return 1;
            } else {
              return -1;
            }
          } else if (h === "Lat" /* LAT */) {
            out = qa.latitude - qb.latitude;
          } else if (h === "Lon" /* LON */) {
            out = qa.longitude - qb.longitude;
          } else if (h === "Az" /* AZIMUTH */) {
            out = qa.azimuth - qb.azimuth;
          } else if (h === "Dip" /* DIP */) {
            out = qa.dip - qb.dip;
          } else if (h === "Depth" /* DEPTH */) {
            out = qa.depth - qb.depth;
          } else if (h === "Elev" /* ELEVATION */) {
            out = qa.elevation - qb.elevation;
          } else {
            const ta = ChannelTable.getChannelValue(qa, h);
            const tb = ChannelTable.getChannelValue(qb, h);
            if (ta < tb) {
              out = -1;
            } else if (ta > tb) {
              out = 1;
            } else {
              out = 0;
            }
          }
        } else {
          console.log(`can't find qa or qb: ${qa} ${qb}`);
        }
        return out;
      });
      if (this.lastSortCol === h) {
        if (this.lastSortAsc) {
          rows.reverse();
        }
        this.lastSortAsc = !this.lastSortAsc;
      } else {
        this.lastSortAsc = true;
      }
      rows.forEach((v) => {
        tbody.appendChild(v);
      });
      this.lastSortCol = h;
    } else {
      console.log("no tbody for table sort");
    }
  }
};
var CHANNEL_INFO_ELEMENT = "sp-channel-table";
customElements.define(CHANNEL_INFO_ELEMENT, ChannelTable);
var StationTable = class extends HTMLElement {
  constructor(stationList, columnLabels) {
    super();
    __publicField(this, "_columnLabels");
    __publicField(this, "_stationList");
    __publicField(this, "_rowToStation");
    __publicField(this, "lastSortAsc", true);
    __publicField(this, "lastSortCol");
    if (!stationList) {
      stationList = [];
    }
    if (!columnLabels) {
      columnLabels = /* @__PURE__ */ new Map();
      columnLabels.set("Code" /* CODE */, "Code");
      columnLabels.set("Start" /* START */, "Start");
      columnLabels.set("End" /* END */, "End");
      columnLabels.set("Lat" /* LAT */, "Lat");
      columnLabels.set("Lon" /* LON */, "Lon");
      columnLabels.set("Elev" /* ELEVATION */, "Evel");
      columnLabels.set("SourceId" /* SOURCEID */, "SourceId");
    }
    this._stationList = stationList;
    this._columnLabels = columnLabels;
    this._rowToStation = /* @__PURE__ */ new Map();
    const shadow = this.attachShadow({ mode: "open" });
    const table = document.createElement("table");
    table.setAttribute("class", "wrapper");
    addStyleToElement(this, TABLE_CSS);
    shadow.appendChild(table);
  }
  get stationList() {
    return this._stationList;
  }
  set stationList(ql) {
    this._stationList = ql;
    this.draw();
  }
  get columnLabels() {
    return this._columnLabels;
  }
  set columnLabels(cols) {
    this._columnLabels = cols;
    this.draw();
  }
  draw() {
    if (!this.isConnected) {
      return;
    }
    const table = this.shadowRoot?.querySelector("table");
    table.deleteTHead();
    const theader = table.createTHead().insertRow();
    this.headers().forEach((h) => {
      const cell = theader.appendChild(document.createElement("th"));
      cell.textContent = h;
      cell.addEventListener("click", () => {
        this.sort(h, cell);
      });
    });
    table.querySelectorAll("tbody")?.forEach((tb) => {
      table.removeChild(tb);
    });
    const tbody = table.createTBody();
    this.stationList.forEach((q) => {
      const row = tbody.insertRow();
      this.populateRow(q, row, -1);
    });
  }
  headers() {
    return Array.from(this._columnLabels.keys());
  }
  populateRow(q, row, index3) {
    this._rowToStation.set(row, q);
    this.headers().forEach((h) => {
      const cell = row.insertCell(index3);
      cell.textContent = StationTable.getStationValue(q, h);
      if (index3 !== -1) {
        index3++;
      }
    });
  }
  static getStationValue(q, h) {
    if (h === "Start" /* START */) {
      return q.startDate.toISO();
    } else if (h === "End" /* END */) {
      return q.endDate ? q.endDate.toISO() : "";
    } else if (h === "Lat" /* LAT */) {
      return latlonFormat.format(q.latitude);
    } else if (h === "Lon" /* LON */) {
      return latlonFormat.format(q.longitude);
    } else if (h === "Elev" /* ELEVATION */) {
      return depthMeterFormat.format(q.elevation);
    } else if (h === "SourceId" /* SOURCEID */) {
      return `${q.sourceId}`;
    } else if (h === "Code" /* CODE */) {
      return `${q.codes()}`;
    } else if (h === "NetworkCode" /* NETWORK_CODE */) {
      return `${q.networkCode}`;
    } else if (h === "StationCode" /* STATION_CODE */) {
      return `${q.stationCode}`;
    } else {
      return `unknown: ${h}`;
    }
  }
  sort(h, headerCell) {
    const table = this.shadowRoot?.querySelector("table");
    const tbody = table.querySelector("tbody");
    if (tbody) {
      const rows = Array.from(tbody.querySelectorAll("tr"));
      rows.sort((rowa, rowb) => {
        let out = 0;
        const qa = this._rowToStation.get(rowa);
        const qb = this._rowToStation.get(rowb);
        if (qa && qb) {
          if (h === "Start" /* START */) {
            out = qa.startDate.toMillis() - qb.startDate.toMillis();
          } else if (h === "End" /* END */) {
            if (qa.endDate && qb.endDate) {
              out = qa.endDate.toMillis() - qb.endDate.toMillis();
            } else if (qb.endDate) {
              return 1;
            } else {
              return -1;
            }
          } else if (h === "Lat" /* LAT */) {
            out = qa.latitude - qb.latitude;
          } else if (h === "Lon" /* LON */) {
            out = qa.longitude - qb.longitude;
          } else if (h === "Elev" /* ELEVATION */) {
            out = qa.elevation - qb.elevation;
          } else {
            const ta = StationTable.getStationValue(qa, h);
            const tb = StationTable.getStationValue(qb, h);
            if (ta < tb) {
              out = -1;
            } else if (ta > tb) {
              out = 1;
            } else {
              out = 0;
            }
          }
        } else {
          console.log(`can't find qa or qb: ${qa} ${qb}`);
        }
        return out;
      });
      if (this.lastSortCol === h) {
        if (this.lastSortAsc) {
          rows.reverse();
        }
        this.lastSortAsc = !this.lastSortAsc;
      } else {
        this.lastSortAsc = true;
      }
      rows.forEach((v) => {
        tbody.appendChild(v);
      });
      this.lastSortCol = h;
    } else {
      console.log("no tbody for table sort");
    }
  }
};
var STATION_INFO_ELEMENT = "sp-station-table";
customElements.define(STATION_INFO_ELEMENT, StationTable);
var SeismogramTable = class extends HTMLElement {
  constructor(sddList, columnLabels) {
    super();
    __publicField(this, "_columnLabels");
    __publicField(this, "_sddList");
    __publicField(this, "_rowToSDD");
    __publicField(this, "lastSortAsc", true);
    __publicField(this, "lastSortCol");
    if (!sddList) {
      sddList = [];
    }
    if (!columnLabels) {
      columnLabels = /* @__PURE__ */ new Map();
      columnLabels.set("Codes" /* CODE */, "Code");
      columnLabels.set("Start" /* START */, "Start");
      columnLabels.set("End" /* END */, "End");
      columnLabels.set("Duration" /* DURATION */, "Dur");
      columnLabels.set("Sample Rate" /* SAMPLE_RATE */, "Sample Rate");
      columnLabels.set("Sample Period" /* SAMPLE_PERIOD */, "Sample Period");
      columnLabels.set("Num Pts" /* NUM_POINTS */, "Npts");
      columnLabels.set("Segments" /* SEGMENTS */, "Segments");
      columnLabels.set("SourceId" /* SOURCEID */, "SourceId");
    }
    this._sddList = sddList;
    this._columnLabels = columnLabels;
    this._rowToSDD = /* @__PURE__ */ new Map();
    const shadow = this.attachShadow({ mode: "open" });
    const table = document.createElement("table");
    table.setAttribute("class", "wrapper");
    addStyleToElement(this, TABLE_CSS);
    shadow.appendChild(table);
  }
  get seisData() {
    return this._sddList;
  }
  set seisData(ql) {
    this._sddList = ql;
    this.draw();
  }
  get columnLabels() {
    return this._columnLabels;
  }
  set columnLabels(cols) {
    this._columnLabels = cols;
    this.draw();
  }
  draw() {
    if (!this.isConnected) {
      return;
    }
    const table = this.shadowRoot?.querySelector("table");
    table.deleteTHead();
    const theader = table.createTHead().insertRow();
    this.headers().forEach((h) => {
      const cell = theader.appendChild(document.createElement("th"));
      cell.textContent = h;
      cell.addEventListener("click", () => {
        this.sort(h, cell);
      });
    });
    table.querySelectorAll("tbody")?.forEach((tb) => {
      table.removeChild(tb);
    });
    const tbody = table.createTBody();
    this._sddList.forEach((q) => {
      const row = tbody.insertRow();
      this.populateRow(q, row, -1);
    });
  }
  headers() {
    return Array.from(this._columnLabels.keys());
  }
  populateRow(q, row, index3) {
    this._rowToSDD.set(row, q);
    this.headers().forEach((h) => {
      const cell = row.insertCell(index3);
      cell.textContent = SeismogramTable.getSeismogramValue(q, h);
      if (index3 !== -1) {
        index3++;
      }
    });
  }
  static getSeismogramValue(q, h) {
    if (h === "Start" /* START */) {
      return q.start.toISO();
    } else if (h === "End" /* END */) {
      return q.end.toISO();
    } else if (h === "Duration" /* DURATION */) {
      return q.timeRange.toDuration().toISO();
    } else if (h === "Num Pts" /* NUM_POINTS */) {
      return `${q.numPoints}`;
    } else if (h === "Sample Rate" /* SAMPLE_RATE */) {
      return q._seismogram ? `${q._seismogram.sampleRate}` : "";
    } else if (h === "Sample Period" /* SAMPLE_PERIOD */) {
      return q._seismogram ? `${q._seismogram.samplePeriod}` : "";
    } else if (h === "Segments" /* SEGMENTS */) {
      return q._seismogram ? `${q._seismogram.segments.length}` : "";
    } else if (h === "SourceId" /* SOURCEID */) {
      return `${q.sourceId}`;
    } else if (h === "Codes" /* CODE */) {
      return `${q.codes()}`;
    } else if (h === "NetworkCode" /* NETWORK_CODE */) {
      return `${q.networkCode}`;
    } else if (h === "StationCode" /* STATION_CODE */) {
      return `${q.stationCode}`;
    } else {
      return `unknown: ${h}`;
    }
  }
  sort(h, headerCell) {
    const table = this.shadowRoot?.querySelector("table");
    const tbody = table.querySelector("tbody");
    if (tbody) {
      const rows = Array.from(tbody.querySelectorAll("tr"));
      rows.sort((rowa, rowb) => {
        let out = 0;
        const qa = this._rowToSDD.get(rowa);
        const qb = this._rowToSDD.get(rowb);
        if (qa && qb) {
          if (h === "Start" /* START */) {
            out = qa.start.toMillis() - qb.start.toMillis();
          } else if (h === "End" /* END */) {
            out = qa.end.toMillis() - qb.end.toMillis();
          } else if (h === "Duration" /* DURATION */) {
            out = qa.timeRange.toDuration().toMillis() - qb.timeRange.toDuration().toMillis();
          } else if (h === "Num Pts" /* NUM_POINTS */) {
            out = qa.numPoints - qb.numPoints;
          } else if (h === "Sample Rate" /* SAMPLE_RATE */) {
            out = (qa._seismogram ? qa._seismogram.sampleRate : 0) - (qb._seismogram ? qb._seismogram.sampleRate : 0);
          } else if (h === "Sample Period" /* SAMPLE_PERIOD */) {
            out = (qa._seismogram ? qa._seismogram.samplePeriod : 0) - (qb._seismogram ? qb._seismogram.samplePeriod : 0);
          } else if (h === "Segments" /* SEGMENTS */) {
            out = (qa._seismogram ? qa._seismogram.segments.length : 0) - (qb._seismogram ? qb._seismogram.segments.length : 0);
          } else {
            const ta = SeismogramTable.getSeismogramValue(qa, h);
            const tb = SeismogramTable.getSeismogramValue(qb, h);
            if (ta < tb) {
              out = -1;
            } else if (ta > tb) {
              out = 1;
            } else {
              out = 0;
            }
          }
        } else {
          console.log(`can't find qa or qb: ${qa} ${qb}`);
        }
        return out;
      });
      if (this.lastSortCol === h) {
        if (this.lastSortAsc) {
          rows.reverse();
        }
        this.lastSortAsc = !this.lastSortAsc;
      } else {
        this.lastSortAsc = true;
      }
      rows.forEach((v) => {
        tbody.appendChild(v);
      });
      this.lastSortCol = h;
    } else {
      console.log("no tbody for table sort");
    }
  }
};
var SDD_INFO_ELEMENT = "sp-seismogram-table";
customElements.define(SDD_INFO_ELEMENT, SeismogramTable);
var latlonFormat = new Intl.NumberFormat(navigator.languages[0], {
  style: "unit",
  unit: "degree",
  unitDisplay: "narrow",
  maximumFractionDigits: 2
});
var magFormat = new Intl.NumberFormat(navigator.languages[0], {
  style: "decimal",
  maximumFractionDigits: 2
});
var depthFormat = new Intl.NumberFormat(navigator.languages[0], {
  style: "unit",
  unit: "kilometer",
  unitDisplay: "narrow",
  maximumFractionDigits: 2,
  minimumFractionDigits: 2
});
var depthMeterFormat = new Intl.NumberFormat(navigator.languages[0], {
  style: "unit",
  unit: "meter",
  unitDisplay: "narrow",
  maximumFractionDigits: 1,
  minimumFractionDigits: 1
});

// src/leafletutil.ts
var leafletutil_exports = {};
__export(leafletutil_exports, {
  CENTER_LAT: () => CENTER_LAT,
  CENTER_LON: () => CENTER_LON,
  DEFAULT_CENTER_LAT: () => DEFAULT_CENTER_LAT,
  DEFAULT_CENTER_LON: () => DEFAULT_CENTER_LON,
  DEFAULT_MAG_SCALE: () => DEFAULT_MAG_SCALE,
  DEFAULT_MAX_ZOOM: () => DEFAULT_MAX_ZOOM,
  DEFAULT_TILE_TEMPLATE: () => DEFAULT_TILE_TEMPLATE,
  DEFAULT_ZOOM_LEVEL: () => DEFAULT_ZOOM_LEVEL,
  InactiveStationMarkerClassName: () => InactiveStationMarkerClassName,
  MAG_SCALE: () => MAG_SCALE,
  MAP_ELEMENT: () => MAP_ELEMENT,
  MAX_ZOOM: () => MAX_ZOOM,
  QuakeMarkerClassName: () => QuakeMarkerClassName,
  QuakeStationMap: () => QuakeStationMap,
  STATION_CODE_SEP: () => STATION_CODE_SEP,
  STATION_MARKER_STYLE_EL: () => STATION_MARKER_STYLE_EL,
  StationMarkerClassName: () => StationMarkerClassName,
  TILE_ATTRIBUTION: () => TILE_ATTRIBUTION,
  TILE_TEMPLATE: () => TILE_TEMPLATE,
  ZOOM_LEVEL: () => ZOOM_LEVEL,
  createQuakeMarker: () => createQuakeMarker,
  createStationMarker: () => createStationMarker,
  inactiveStationIcon: () => inactiveStationIcon,
  leaflet_css: () => leaflet_css,
  stationIcon: () => stationIcon,
  stationMarker_css: () => stationMarker_css,
  triangle: () => triangle
});
var L2 = __toESM(require_leaflet_src(), 1);
var MAP_ELEMENT = "sp-station-event-map";
var triangle = "\u25B2";
var StationMarkerClassName = "stationMapMarker";
var InactiveStationMarkerClassName = "inactiveStationMapMarker";
var QuakeMarkerClassName = "quakeMapMarker";
var stationIcon = L2.divIcon({
  className: StationMarkerClassName
});
var inactiveStationIcon = L2.divIcon({
  className: InactiveStationMarkerClassName
});
var stationMarker_css = `

:host {
  display: block
}

div.wrapper {
  height: 100%;
  min-height: 100px;
}

.leaflet-container {
  height: 100%;
  width: 100%;
}

.${InactiveStationMarkerClassName} {
  color: darkgrey;
  font-size: large;
  z-index: 1;
  text-shadow: 1px 1px 0 dimgrey, -1px 1px 0 dimgrey, -2px 1px 0 dimgrey, -1px -1px 0 dimgrey, 0 -3px 0 dimgrey, 1px -1px 0 dimgrey, 2px 1px 0 dimgrey;
}
.${InactiveStationMarkerClassName}:after{
  content: "${triangle}";
}
.${StationMarkerClassName} {
  color: blue;
  font-size: large;
  z-index: 10;
  text-shadow: 1px 1px 0 dimgrey, -1px 1px 0 dimgrey, -2px 1px 0 dimgrey, -1px -1px 0 dimgrey, 0 -3px 0 dimgrey, 1px -1px 0 dimgrey, 2px 1px 0 dimgrey;
}

.${StationMarkerClassName}:after{
  content: "${triangle}";
}
.${QuakeMarkerClassName} {
  stroke: red;
  fill: #f03;
  fill-opacity: 0.15;
}
`;
function createStationMarker(station, classList2, isactive = true) {
  let allClassList = classList2 ? classList2.slice() : [];
  allClassList.push(isactive ? StationMarkerClassName : InactiveStationMarkerClassName);
  allClassList.push(station.codes(STATION_CODE_SEP));
  const icon = L2.divIcon({
    className: allClassList.join(" ")
  });
  const m2 = L2.marker([station.latitude, station.longitude], {
    icon
  });
  m2.bindTooltip(station.codes());
  return m2;
}
function createQuakeMarker(quake, magScaleFactor = 5) {
  const circle3 = L2.circleMarker([quake.latitude, quake.longitude], {
    color: "currentColor",
    radius: quake.magnitude ? quake.magnitude.mag * magScaleFactor : magScaleFactor,
    className: QuakeMarkerClassName
  });
  circle3.bindTooltip(
    `${quake.time.toISO()} ${quake.magnitude ? quake.magnitude.mag + " " + quake.magnitude.type : "unkn"}`
  );
  return circle3;
}
var leaflet_css = `
/* required styles */

.leaflet-pane,
.leaflet-tile,
.leaflet-marker-icon,
.leaflet-marker-shadow,
.leaflet-tile-container,
.leaflet-pane > svg,
.leaflet-pane > canvas,
.leaflet-zoom-box,
.leaflet-image-layer,
.leaflet-layer {
	position: absolute;
	left: 0;
	top: 0;
	}
.leaflet-container {
	overflow: hidden;
	}
.leaflet-tile,
.leaflet-marker-icon,
.leaflet-marker-shadow {
	-webkit-user-select: none;
	   -moz-user-select: none;
	        user-select: none;
	  -webkit-user-drag: none;
	}
/* Prevents IE11 from highlighting tiles in blue */
.leaflet-tile::selection {
	background: transparent;
}
/* Safari renders non-retina tile on retina better with this, but Chrome is worse */
.leaflet-safari .leaflet-tile {
	image-rendering: -webkit-optimize-contrast;
	}
/* hack that prevents hw layers "stretching" when loading new tiles */
.leaflet-safari .leaflet-tile-container {
	width: 1600px;
	height: 1600px;
	-webkit-transform-origin: 0 0;
	}
.leaflet-marker-icon,
.leaflet-marker-shadow {
	display: block;
	}
/* .leaflet-container svg: reset svg max-width decleration shipped in Joomla! (joomla.org) 3.x */
/* .leaflet-container img: map is broken in FF if you have max-width: 100% on tiles */
.leaflet-container .leaflet-overlay-pane svg {
	max-width: none !important;
	max-height: none !important;
	}
.leaflet-container .leaflet-marker-pane img,
.leaflet-container .leaflet-shadow-pane img,
.leaflet-container .leaflet-tile-pane img,
.leaflet-container img.leaflet-image-layer,
.leaflet-container .leaflet-tile {
	max-width: none !important;
	max-height: none !important;
	width: auto;
	padding: 0;
	}

.leaflet-container.leaflet-touch-zoom {
	-ms-touch-action: pan-x pan-y;
	touch-action: pan-x pan-y;
	}
.leaflet-container.leaflet-touch-drag {
	-ms-touch-action: pinch-zoom;
	/* Fallback for FF which doesn't support pinch-zoom */
	touch-action: none;
	touch-action: pinch-zoom;
}
.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom {
	-ms-touch-action: none;
	touch-action: none;
}
.leaflet-container {
	-webkit-tap-highlight-color: transparent;
}
.leaflet-container a {
	-webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);
}
.leaflet-tile {
	filter: inherit;
	visibility: hidden;
	}
.leaflet-tile-loaded {
	visibility: inherit;
	}
.leaflet-zoom-box {
	width: 0;
	height: 0;
	-moz-box-sizing: border-box;
	     box-sizing: border-box;
	z-index: 800;
	}
/* workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=888319 */
.leaflet-overlay-pane svg {
	-moz-user-select: none;
	}

.leaflet-pane         { z-index: 400; }

.leaflet-tile-pane    { z-index: 200; }
.leaflet-overlay-pane { z-index: 400; }
.leaflet-shadow-pane  { z-index: 500; }
.leaflet-marker-pane  { z-index: 600; }
.leaflet-tooltip-pane   { z-index: 650; }
.leaflet-popup-pane   { z-index: 700; }

.leaflet-map-pane canvas { z-index: 100; }
.leaflet-map-pane svg    { z-index: 200; }

.leaflet-vml-shape {
	width: 1px;
	height: 1px;
	}
.lvml {
	behavior: url(#default#VML);
	display: inline-block;
	position: absolute;
	}


/* control positioning */

.leaflet-control {
	position: relative;
	z-index: 800;
	pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
	pointer-events: auto;
	}
.leaflet-top,
.leaflet-bottom {
	position: absolute;
	z-index: 1000;
	pointer-events: none;
	}
.leaflet-top {
	top: 0;
	}
.leaflet-right {
	right: 0;
	}
.leaflet-bottom {
	bottom: 0;
	}
.leaflet-left {
	left: 0;
	}
.leaflet-control {
	float: left;
	clear: both;
	}
.leaflet-right .leaflet-control {
	float: right;
	}
.leaflet-top .leaflet-control {
	margin-top: 10px;
	}
.leaflet-bottom .leaflet-control {
	margin-bottom: 10px;
	}
.leaflet-left .leaflet-control {
	margin-left: 10px;
	}
.leaflet-right .leaflet-control {
	margin-right: 10px;
	}


/* zoom and fade animations */

.leaflet-fade-anim .leaflet-popup {
	opacity: 0;
	-webkit-transition: opacity 0.2s linear;
	   -moz-transition: opacity 0.2s linear;
	        transition: opacity 0.2s linear;
	}
.leaflet-fade-anim .leaflet-map-pane .leaflet-popup {
	opacity: 1;
	}
.leaflet-zoom-animated {
	-webkit-transform-origin: 0 0;
	    -ms-transform-origin: 0 0;
	        transform-origin: 0 0;
	}
svg.leaflet-zoom-animated {
	will-change: transform;
}

.leaflet-zoom-anim .leaflet-zoom-animated {
	-webkit-transition: -webkit-transform 0.25s cubic-bezier(0,0,0.25,1);
	   -moz-transition:    -moz-transform 0.25s cubic-bezier(0,0,0.25,1);
	        transition:         transform 0.25s cubic-bezier(0,0,0.25,1);
	}
.leaflet-zoom-anim .leaflet-tile,
.leaflet-pan-anim .leaflet-tile {
	-webkit-transition: none;
	   -moz-transition: none;
	        transition: none;
	}

.leaflet-zoom-anim .leaflet-zoom-hide {
	visibility: hidden;
	}


/* cursors */

.leaflet-interactive {
	cursor: pointer;
	}
.leaflet-grab {
	cursor: -webkit-grab;
	cursor:    -moz-grab;
	cursor:         grab;
	}
.leaflet-crosshair,
.leaflet-crosshair .leaflet-interactive {
	cursor: crosshair;
	}
.leaflet-popup-pane,
.leaflet-control {
	cursor: auto;
	}
.leaflet-dragging .leaflet-grab,
.leaflet-dragging .leaflet-grab .leaflet-interactive,
.leaflet-dragging .leaflet-marker-draggable {
	cursor: move;
	cursor: -webkit-grabbing;
	cursor:    -moz-grabbing;
	cursor:         grabbing;
	}

/* marker & overlays interactivity */
.leaflet-marker-icon,
.leaflet-marker-shadow,
.leaflet-image-layer,
.leaflet-pane > svg path,
.leaflet-tile-container {
	pointer-events: none;
	}

.leaflet-marker-icon.leaflet-interactive,
.leaflet-image-layer.leaflet-interactive,
.leaflet-pane > svg path.leaflet-interactive,
svg.leaflet-image-layer.leaflet-interactive path {
	pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
	pointer-events: auto;
	}

/* visual tweaks */

.leaflet-container {
	background: #ddd;
	outline-offset: 1px;
	}
.leaflet-container a {
	color: #0078A8;
	}
.leaflet-zoom-box {
	border: 2px dotted #38f;
	background: rgba(255,255,255,0.5);
	}


/* general typography */
.leaflet-container {
	font-family: "Helvetica Neue", Arial, Helvetica, sans-serif;
	font-size: 12px;
	font-size: 0.75rem;
	line-height: 1.5;
	}


/* general toolbar styles */

.leaflet-bar {
	box-shadow: 0 1px 5px rgba(0,0,0,0.65);
	border-radius: 4px;
	}
.leaflet-bar a {
	background-color: #fff;
	border-bottom: 1px solid #ccc;
	width: 26px;
	height: 26px;
	line-height: 26px;
	display: block;
	text-align: center;
	text-decoration: none;
	color: black;
	}
.leaflet-bar a,
.leaflet-control-layers-toggle {
	background-position: 50% 50%;
	background-repeat: no-repeat;
	display: block;
	}
.leaflet-bar a:hover,
.leaflet-bar a:focus {
	background-color: #f4f4f4;
	}
.leaflet-bar a:first-child {
	border-top-left-radius: 4px;
	border-top-right-radius: 4px;
	}
.leaflet-bar a:last-child {
	border-bottom-left-radius: 4px;
	border-bottom-right-radius: 4px;
	border-bottom: none;
	}
.leaflet-bar a.leaflet-disabled {
	cursor: default;
	background-color: #f4f4f4;
	color: #bbb;
	}

.leaflet-touch .leaflet-bar a {
	width: 30px;
	height: 30px;
	line-height: 30px;
	}
.leaflet-touch .leaflet-bar a:first-child {
	border-top-left-radius: 2px;
	border-top-right-radius: 2px;
	}
.leaflet-touch .leaflet-bar a:last-child {
	border-bottom-left-radius: 2px;
	border-bottom-right-radius: 2px;
	}

/* zoom control */

.leaflet-control-zoom-in,
.leaflet-control-zoom-out {
	font: bold 18px 'Lucida Console', Monaco, monospace;
	text-indent: 1px;
	}

.leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out  {
	font-size: 22px;
	}


/* layers control */

.leaflet-control-layers {
	box-shadow: 0 1px 5px rgba(0,0,0,0.4);
	background: #fff;
	border-radius: 5px;
	}
.leaflet-control-layers-toggle {
	background-image: url(images/layers.png);
	width: 36px;
	height: 36px;
	}
.leaflet-retina .leaflet-control-layers-toggle {
	background-image: url(images/layers-2x.png);
	background-size: 26px 26px;
	}
.leaflet-touch .leaflet-control-layers-toggle {
	width: 44px;
	height: 44px;
	}
.leaflet-control-layers .leaflet-control-layers-list,
.leaflet-control-layers-expanded .leaflet-control-layers-toggle {
	display: none;
	}
.leaflet-control-layers-expanded .leaflet-control-layers-list {
	display: block;
	position: relative;
	}
.leaflet-control-layers-expanded {
	padding: 6px 10px 6px 6px;
	color: #333;
	background: #fff;
	}
.leaflet-control-layers-scrollbar {
	overflow-y: scroll;
	overflow-x: hidden;
	padding-right: 5px;
	}
.leaflet-control-layers-selector {
	margin-top: 2px;
	position: relative;
	top: 1px;
	}
.leaflet-control-layers label {
	display: block;
	font-size: 13px;
	font-size: 1.08333em;
	}
.leaflet-control-layers-separator {
	height: 0;
	border-top: 1px solid #ddd;
	margin: 5px -10px 5px -6px;
	}

/* Default icon URLs */
.leaflet-default-icon-path { /* used only in path-guessing heuristic, see L.Icon.Default */
	background-image: url(images/marker-icon.png);
	}


/* attribution and scale controls */

.leaflet-container .leaflet-control-attribution {
	background: #fff;
	background: rgba(255, 255, 255, 0.8);
	margin: 0;
	}
.leaflet-control-attribution,
.leaflet-control-scale-line {
	padding: 0 5px;
	color: #333;
	line-height: 1.4;
	}
.leaflet-control-attribution a {
	text-decoration: none;
	}
.leaflet-control-attribution a:hover,
.leaflet-control-attribution a:focus {
	text-decoration: underline;
	}
.leaflet-control-attribution svg {
	display: inline !important;
	}
.leaflet-left .leaflet-control-scale {
	margin-left: 5px;
	}
.leaflet-bottom .leaflet-control-scale {
	margin-bottom: 5px;
	}
.leaflet-control-scale-line {
	border: 2px solid #777;
	border-top: none;
	line-height: 1.1;
	padding: 2px 5px 1px;
	white-space: nowrap;
	overflow: hidden;
	-moz-box-sizing: border-box;
	     box-sizing: border-box;

	background: #fff;
	background: rgba(255, 255, 255, 0.5);
	}
.leaflet-control-scale-line:not(:first-child) {
	border-top: 2px solid #777;
	border-bottom: none;
	margin-top: -2px;
	}
.leaflet-control-scale-line:not(:first-child):not(:last-child) {
	border-bottom: 2px solid #777;
	}

.leaflet-touch .leaflet-control-attribution,
.leaflet-touch .leaflet-control-layers,
.leaflet-touch .leaflet-bar {
	box-shadow: none;
	}
.leaflet-touch .leaflet-control-layers,
.leaflet-touch .leaflet-bar {
	border: 2px solid rgba(0,0,0,0.2);
	background-clip: padding-box;
	}


/* popup */

.leaflet-popup {
	position: absolute;
	text-align: center;
	margin-bottom: 20px;
	}
.leaflet-popup-content-wrapper {
	padding: 1px;
	text-align: left;
	border-radius: 12px;
	}
.leaflet-popup-content {
	margin: 13px 24px 13px 20px;
	line-height: 1.3;
	font-size: 13px;
	font-size: 1.08333em;
	min-height: 1px;
	}
.leaflet-popup-content p {
	margin: 17px 0;
	margin: 1.3em 0;
	}
.leaflet-popup-tip-container {
	width: 40px;
	height: 20px;
	position: absolute;
	left: 50%;
	margin-top: -1px;
	margin-left: -20px;
	overflow: hidden;
	pointer-events: none;
	}
.leaflet-popup-tip {
	width: 17px;
	height: 17px;
	padding: 1px;

	margin: -10px auto 0;
	pointer-events: auto;

	-webkit-transform: rotate(45deg);
	   -moz-transform: rotate(45deg);
	    -ms-transform: rotate(45deg);
	        transform: rotate(45deg);
	}
.leaflet-popup-content-wrapper,
.leaflet-popup-tip {
	background: white;
	color: #333;
	box-shadow: 0 3px 14px rgba(0,0,0,0.4);
	}
.leaflet-container a.leaflet-popup-close-button {
	position: absolute;
	top: 0;
	right: 0;
	border: none;
	text-align: center;
	width: 24px;
	height: 24px;
	font: 16px/24px Tahoma, Verdana, sans-serif;
	color: #757575;
	text-decoration: none;
	background: transparent;
	}
.leaflet-container a.leaflet-popup-close-button:hover,
.leaflet-container a.leaflet-popup-close-button:focus {
	color: #585858;
	}
.leaflet-popup-scrolled {
	overflow: auto;
	border-bottom: 1px solid #ddd;
	border-top: 1px solid #ddd;
	}

.leaflet-oldie .leaflet-popup-content-wrapper {
	-ms-zoom: 1;
	}
.leaflet-oldie .leaflet-popup-tip {
	width: 24px;
	margin: 0 auto;

	-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";
	filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);
	}

.leaflet-oldie .leaflet-control-zoom,
.leaflet-oldie .leaflet-control-layers,
.leaflet-oldie .leaflet-popup-content-wrapper,
.leaflet-oldie .leaflet-popup-tip {
	border: 1px solid #999;
	}


/* div icon */

.leaflet-div-icon {
	background: #fff;
	border: 1px solid #666;
	}


/* Tooltip */
/* Base styles for the element that has a tooltip */
.leaflet-tooltip {
	position: absolute;
	padding: 6px;
	background-color: #fff;
	border: 1px solid #fff;
	border-radius: 3px;
	color: #222;
	white-space: nowrap;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	pointer-events: none;
	box-shadow: 0 1px 3px rgba(0,0,0,0.4);
	}
.leaflet-tooltip.leaflet-interactive {
	cursor: pointer;
	pointer-events: auto;
	}
.leaflet-tooltip-top:before,
.leaflet-tooltip-bottom:before,
.leaflet-tooltip-left:before,
.leaflet-tooltip-right:before {
	position: absolute;
	pointer-events: none;
	border: 6px solid transparent;
	background: transparent;
	content: "";
	}

/* Directions */

.leaflet-tooltip-bottom {
	margin-top: 6px;
}
.leaflet-tooltip-top {
	margin-top: -6px;
}
.leaflet-tooltip-bottom:before,
.leaflet-tooltip-top:before {
	left: 50%;
	margin-left: -6px;
	}
.leaflet-tooltip-top:before {
	bottom: 0;
	margin-bottom: -12px;
	border-top-color: #fff;
	}
.leaflet-tooltip-bottom:before {
	top: 0;
	margin-top: -12px;
	margin-left: -6px;
	border-bottom-color: #fff;
	}
.leaflet-tooltip-left {
	margin-left: -6px;
}
.leaflet-tooltip-right {
	margin-left: 6px;
}
.leaflet-tooltip-left:before,
.leaflet-tooltip-right:before {
	top: 50%;
	margin-top: -6px;
	}
.leaflet-tooltip-left:before {
	right: 0;
	margin-right: -12px;
	border-left-color: #fff;
	}
.leaflet-tooltip-right:before {
	left: 0;
	margin-left: -12px;
	border-right-color: #fff;
	}

/* Printing */

@media print {
	/* Prevent printers from removing background-images of controls. */
	.leaflet-control {
		-webkit-print-color-adjust: exact;
		color-adjust: exact;
		}
	}
`;
var TILE_TEMPLATE = "tileUrl";
var DEFAULT_TILE_TEMPLATE = "https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}";
var TILE_ATTRIBUTION = "tileAttribution";
var MAX_ZOOM = "maxZoom";
var DEFAULT_MAX_ZOOM = 17;
var CENTER_LAT = "centerLat";
var DEFAULT_CENTER_LAT = 35;
var CENTER_LON = "centerLon";
var DEFAULT_CENTER_LON = -81;
var ZOOM_LEVEL = "zoomLevel";
var DEFAULT_ZOOM_LEVEL = 1;
var MAG_SCALE = "magScale";
var DEFAULT_MAG_SCALE = 5;
var STATION_MARKER_STYLE_EL = "staMarkerStyle";
var STATION_CODE_SEP = "-";
var QuakeStationMap = class extends SeisPlotElement {
  constructor(seisData, seisConfig) {
    super(seisData, seisConfig);
    __publicField(this, "quakeList", []);
    __publicField(this, "stationList", []);
    __publicField(this, "geoRegionList", []);
    __publicField(this, "map");
    __publicField(this, "classToColor");
    __publicField(this, "stationClassMap");
    this.map = null;
    this.classToColor = /* @__PURE__ */ new Map();
    this.stationClassMap = /* @__PURE__ */ new Map();
    this.addStyle(leaflet_css);
    this.addStyle(stationMarker_css);
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    this.shadowRoot?.appendChild(wrapper);
  }
  addQuake(quake) {
    if (Array.isArray(quake)) {
      quake.forEach((q) => this.quakeList.push(q));
    } else {
      this.quakeList.push(quake);
    }
  }
  addStation(station, classname) {
    const re2 = /\s+/;
    let classList2 = [];
    if (classname && classname.length > 0) {
      classList2 = classname.split(re2);
    }
    if (Array.isArray(station)) {
      station.forEach((s3) => this.stationList.push(s3));
      classList2.forEach((cn) => {
        station.forEach((s3) => this.stationAddClass(s3, cn));
      });
    } else {
      this.stationList.push(station);
      classList2.forEach((cn) => this.stationAddClass(station, cn));
    }
  }
  stationAddClass(station, classname) {
    const classList2 = this.stationClassMap.get(station.codes(STATION_CODE_SEP));
    if (classList2) {
      classList2.push(classname);
    } else {
      this.stationClassMap.set(station.codes(STATION_CODE_SEP), [classname]);
    }
  }
  stationRemoveClass(station, classname) {
    let classList2 = this.stationClassMap.get(station.codes(STATION_CODE_SEP));
    if (classList2) {
      classList2 = classList2.filter((v) => v !== classname);
      this.stationClassMap.set(station.codes(STATION_CODE_SEP), classList2);
    }
    console.log(`search for div.${classname}.${station.codes(STATION_CODE_SEP)}`);
    let triangleList = this.getShadowRoot().querySelectorAll(`div.${station.codes(STATION_CODE_SEP)}`);
    triangleList.forEach((triangle2) => {
      let classList3 = triangle2.getAttribute("class");
      if (classList3) {
        classList3 = classList3.split(/\s+/).filter((s3) => s3 !== classname).join(" ");
        triangle2.setAttribute("class", classList3);
      }
    });
    if (triangleList.length === 0) {
      console.log("didn't find station to remove clsas");
    }
  }
  colorClass(classname, color2) {
    this.classToColor.set(classname, color2);
  }
  get centerLat() {
    const ks = this.hasAttribute(CENTER_LAT) ? this.getAttribute(CENTER_LAT) : null;
    let k2;
    if (!ks) {
      k2 = DEFAULT_CENTER_LAT;
    } else {
      k2 = parseFloat(ks);
    }
    return k2;
  }
  set centerLat(val) {
    this.setAttribute(CENTER_LAT, `${val}`);
  }
  get centerLon() {
    const ks = this.hasAttribute(CENTER_LON) ? this.getAttribute(CENTER_LON) : null;
    let k2;
    if (!ks) {
      k2 = DEFAULT_CENTER_LON;
    } else {
      k2 = parseFloat(ks);
    }
    return k2;
  }
  set centerLon(val) {
    this.setAttribute(CENTER_LON, `${val}`);
  }
  get zoomLevel() {
    const ks = this.hasAttribute(ZOOM_LEVEL) ? this.getAttribute(ZOOM_LEVEL) : null;
    let k2;
    if (!ks) {
      k2 = DEFAULT_ZOOM_LEVEL;
    } else {
      k2 = parseInt(ks);
    }
    return k2;
  }
  set zoomLevel(val) {
    this.setAttribute(ZOOM_LEVEL, `${val}`);
  }
  get magScale() {
    const ks = this.hasAttribute(MAG_SCALE) ? this.getAttribute(MAG_SCALE) : null;
    let k2;
    if (!ks) {
      k2 = DEFAULT_MAG_SCALE;
    } else {
      k2 = parseFloat(ks);
    }
    return k2;
  }
  set magScale(val) {
    this.setAttribute(MAG_SCALE, `${val}`);
  }
  draw() {
    if (!this.isConnected) {
      return;
    }
    const staMarkerStyle = this.createStationMarkerColorStyle();
    const staMarkerStyleEl = this.shadowRoot?.querySelector(`style#${STATION_MARKER_STYLE_EL}`);
    if (staMarkerStyleEl) {
      this.shadowRoot?.removeChild(staMarkerStyleEl);
    }
    this.addStyle(staMarkerStyle, STATION_MARKER_STYLE_EL);
    const wrapper = this.shadowRoot?.querySelector("div");
    while (wrapper.firstChild) {
      wrapper.removeChild(wrapper.lastChild);
    }
    const divElement = wrapper.appendChild(document.createElement("div"));
    const mymap = L2.map(divElement).setView([this.centerLat, this.centerLon], this.zoomLevel);
    this.map = mymap;
    if (this.seismographConfig.wheelZoom) {
      mymap.scrollWheelZoom.enable();
    } else {
      mymap.scrollWheelZoom.disable();
    }
    let tileUrl = DEFAULT_TILE_TEMPLATE;
    let maxZoom = DEFAULT_MAX_ZOOM;
    const tileUrlAttr = this.getAttribute(TILE_TEMPLATE);
    if (tileUrlAttr) {
      tileUrl = tileUrlAttr;
    }
    const maxZoomAttr = this.getAttribute(MAX_ZOOM);
    if (maxZoomAttr) {
      maxZoom = Number.parseInt(maxZoomAttr);
    }
    const tileOptions = {
      maxZoom
    };
    const tileAttributionAttr = this.getAttribute(TILE_ATTRIBUTION);
    if (tileAttributionAttr) {
      tileOptions.attribution = tileAttributionAttr;
    }
    L2.tileLayer(tileUrl, tileOptions).addTo(mymap);
    const magScale = this.magScale;
    const mapItems = [];
    this.quakeList.concat(uniqueQuakes(this.seisData)).forEach((q) => {
      const circle3 = createQuakeMarker(q, magScale);
      circle3.addTo(mymap);
      mapItems.push([q.latitude, q.longitude]);
    });
    this.stationList.concat(uniqueStations(this.seisData)).forEach((s3) => {
      const m2 = createStationMarker(s3, this.stationClassMap.get(s3.codes(STATION_CODE_SEP)));
      m2.addTo(mymap);
      mapItems.push([s3.latitude, s3.longitude]);
    });
    const regionBounds = this.drawGeoRegions(mymap);
    regionBounds.forEach((b) => mapItems.push(b));
    if (mapItems.length > 1) {
      mymap.fitBounds(mapItems);
    }
  }
  drawGeoRegions(map5) {
    let outLatLon = [];
    this.geoRegionList.forEach((gr) => {
      if (gr instanceof LatLonBox) {
        const llbox = gr;
        const bounds = llbox.asLeafletBounds();
        const rect = L2.rectangle(bounds, { color: "red", weight: 1 });
        rect.addTo(map5);
        outLatLon.push(bounds[0]);
        outLatLon.push(bounds[1]);
      } else if (gr instanceof LatLonRadius) {
        const llrad = gr;
        outLatLon.push([llrad.latitude, llrad.longitude]);
        if (llrad.minRadius > 0) {
          L2.circle([llrad.latitude, llrad.longitude], { radius: llrad.minRadius * 1e3 * kmPerDeg }).addTo(map5);
          outLatLon.push([llrad.latitude + llrad.minRadius, llrad.longitude]);
          outLatLon.push([llrad.latitude - llrad.minRadius, llrad.longitude]);
          outLatLon.push([llrad.latitude, llrad.longitude + llrad.minRadius]);
          outLatLon.push([llrad.latitude, llrad.longitude - llrad.minRadius]);
        }
        if (llrad.maxRadius < 180) {
          L2.circle([llrad.latitude, llrad.longitude], { radius: llrad.maxRadius * 1e3 * kmPerDeg }).addTo(map5);
          outLatLon.push([llrad.latitude + llrad.maxRadius, llrad.longitude]);
          outLatLon.push([llrad.latitude - llrad.maxRadius, llrad.longitude]);
          outLatLon.push([llrad.latitude, llrad.longitude + llrad.maxRadius]);
          outLatLon.push([llrad.latitude, llrad.longitude - llrad.maxRadius]);
        }
      } else {
        console.assert(false, "unknown regino type");
      }
    });
    return outLatLon;
  }
  createStationMarkerColorStyle() {
    let style = "";
    this.classToColor.forEach((color2, classname) => {
      style = `${style}
div.leaflet-marker-icon.${classname} {
  color: ${color2};
}
`;
    });
    return style;
  }
  attributeChangedCallback(name, oldValue, newValue) {
    this.draw();
  }
  static get observedAttributes() {
    return [
      TILE_TEMPLATE,
      TILE_ATTRIBUTION,
      MAX_ZOOM,
      CENTER_LAT,
      CENTER_LON,
      ZOOM_LEVEL,
      MAG_SCALE
    ];
  }
};
customElements.define(MAP_ELEMENT, QuakeStationMap);

// src/particlemotion.ts
var particlemotion_exports = {};
__export(particlemotion_exports, {
  DEFAULT_TITLE: () => DEFAULT_TITLE2,
  DEFAULT_XLABEL: () => DEFAULT_XLABEL,
  DEFAULT_YLABEL: () => DEFAULT_YLABEL,
  PARTICLE_MOTION_ELEMENT: () => PARTICLE_MOTION_ELEMENT,
  ParticleMotion: () => ParticleMotion,
  addDivForParticleMotion: () => addDivForParticleMotion,
  addParticleMotion: () => addParticleMotion,
  createParticleMotionConfig: () => createParticleMotionConfig,
  particleMotion_css: () => particleMotion_css
});
var DEFAULT_TITLE2 = "<tspan>{{#each seisDataList}}{{onlyChangesChannel ../seisDataList @index}} {{else}}No Data{{/each}}</tspan>";
var DEFAULT_XLABEL = "{{#each seisXData}}<tspan>{{this.channelCode}}</tspan> {{else}}No Data{{/each}}";
var DEFAULT_YLABEL = "{{#each seisYData}}<tspan>{{this.channelCode}}</tspan> {{else}}No Data{{/each}}";
var PARTICLE_MOTION_ELEMENT = "sp-particle-motion";
var particleMotion_css = `

:host {
  display: block;
  min-height: 200px;
  height: 100%;
}

div.wrapper {
  min-height: 100px;
  height: 100%;
  width: 100%;
}

svg {
  height: 100%;
  width: 100%;
  min-height: 125px;
  min-width: 125px;
  z-index: 100;
}

svg text.title {
  font-size: larger;
  font-weight: bold;
  fill: black;
  color: black;
  dominant-baseline: hanging;
}

svg path.seispath {
    stroke: skyblue;
    fill: none;
    stroke-width: 1px;
}
`;
function addDivForParticleMotion(svgParent, xSeisData, ySeisData, timeRange) {
  const svgDiv = svgParent.append("div");
  if (!isDef(xSeisData)) {
    throw new Error("xSeisData cannot be null");
  }
  if (!isDef(ySeisData)) {
    throw new Error("ySeisData cannot be null");
  }
  svgDiv.classed(xSeisData.channelCode, true);
  svgDiv.classed(ySeisData.channelCode, true);
  svgDiv.classed("particleMotionContainer", true);
  return addParticleMotion(svgDiv, xSeisData, ySeisData, timeRange);
}
function addParticleMotion(svgParent, xSeisData, ySeisData, timeRange) {
  if (!isDef(xSeisData.seismogram) || !isDef(ySeisData.seismogram)) {
    throw new Error(
      `Seismogram has no data: ${xSeisData.seismogram} ${ySeisData.seismogram}`
    );
  }
  const seisConfig = createParticleMotionConfig(timeRange);
  const pmp = new ParticleMotion([xSeisData], [ySeisData], seisConfig);
  svgParent.append(pmp);
  pmp.draw();
  return pmp;
}
function createParticleMotionConfig(timeRange, defaultSeisConfig) {
  let seisConfig;
  if (defaultSeisConfig) {
    seisConfig = defaultSeisConfig.clone();
  } else {
    seisConfig = new SeismographConfig();
  }
  seisConfig.title = DEFAULT_TITLE2;
  if (isDef(timeRange)) {
    seisConfig.fixedTimeScale = timeRange;
  }
  seisConfig.xLabel = DEFAULT_XLABEL;
  seisConfig.yLabel = DEFAULT_YLABEL;
  seisConfig.xSublabelIsUnits = true;
  seisConfig.ySublabelIsUnits = true;
  seisConfig.margin.top = 20;
  seisConfig.margin.bottom = 45;
  seisConfig.margin.right = 40;
  seisConfig.margin.left = 40;
  return seisConfig;
}
var _ParticleMotion = class extends SeisPlotElement {
  constructor(xSeisData, ySeisData, seisConfig) {
    if (!xSeisData) {
      xSeisData = [];
    }
    if (xSeisData instanceof Seismogram) {
      xSeisData = [SeismogramDisplayData.fromSeismogram(xSeisData)];
    }
    if (!Array.isArray(xSeisData)) {
      xSeisData = [xSeisData];
    }
    if (!ySeisData) {
      ySeisData = [];
    }
    if (!Array.isArray(ySeisData)) {
      ySeisData = [ySeisData];
    }
    const seisData = xSeisData.concat(ySeisData);
    if (!seisConfig) {
      seisConfig = createParticleMotionConfig();
    }
    super(seisData, seisConfig);
    __publicField(this, "plotId");
    __publicField(this, "_xSeisData");
    __publicField(this, "_ySeisData");
    __publicField(this, "width");
    __publicField(this, "height");
    __publicField(this, "outerWidth", -1);
    __publicField(this, "outerHeight", -1);
    __publicField(this, "xScale");
    __publicField(this, "xScaleRmean");
    __publicField(this, "xAxis");
    __publicField(this, "yScale");
    __publicField(this, "yScaleRmean");
    __publicField(this, "yAxis");
    __publicField(this, "svg");
    __publicField(this, "g");
    this._xSeisData = xSeisData;
    this._ySeisData = ySeisData;
    this.addStyle(particleMotion_css);
    const lineColorsCSS = this.seismographConfig.createCSSForLineColors();
    this.addStyle(lineColorsCSS, COLOR_CSS_ID);
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    const svgWrapped = wrapper.appendChild(document.createElementNS(SVG_NS, "svg"));
    this.shadowRoot?.appendChild(wrapper);
    this.svg = select_default2(svgWrapped);
    this.plotId = ++_ParticleMotion._lastID;
    if (this.xSeisData.length !== this.ySeisData.length) {
      throw new Error(`xSeisData and ySeisData should have same length: ${this.xSeisData.length} !== ${this.ySeisData.length}`);
    }
    this.svg.attr("version", "1.1");
    this.svg.classed("particleMotion", true);
    this.svg.attr("plotId", this.plotId);
    this.xScale = linear3();
    this.xScaleRmean = linear3();
    this.yScale = linear3();
    this.yScaleRmean = linear3();
    if (this.seismographConfig.centeredAmp) {
      this.xAxis = axisBottom(this.xScaleRmean).tickFormat(numberFormatWrapper(this.seismographConfig.amplitudeFormat));
      this.yAxis = axisLeft(this.yScaleRmean).tickFormat(numberFormatWrapper(this.seismographConfig.amplitudeFormat));
    } else {
      this.xAxis = axisBottom(this.xScale).tickFormat(numberFormatWrapper(this.seismographConfig.amplitudeFormat));
      this.yAxis = axisLeft(this.yScale).tickFormat(numberFormatWrapper(this.seismographConfig.amplitudeFormat));
    }
    this.width = 100;
    this.height = 100;
    const mythis = this;
    const arrow = this.svg.append("defs").append("marker");
    arrow.attr("id", "arrow").attr("markerWidth", "10").attr("markerHeight", "10").attr("refX", "0").attr("refY", "3").attr("orient", "auto").attr("markerUnits", "strokeWidth");
    arrow.append("path").attr("d", "M0,0 L0,6 L9,3 z").attr("stroke", "currentColor").attr("fill", "currentColor");
    this.g = this.svg.append("g").attr(
      "transform",
      "translate(" + this.seismographConfig.margin.left + "," + this.seismographConfig.margin.top + ")"
    );
    this.calcScaleDomain();
    select_default2(window).on("resize.particleMotion" + this.plotId, function() {
      if (mythis.checkResize()) {
        mythis.draw();
      }
    });
  }
  get xSeisData() {
    return this._xSeisData;
  }
  set xSeisData(xsdd) {
    if (Array.isArray(xsdd)) {
      this._xSeisData = xsdd;
    } else if (xsdd instanceof SeismogramDisplayData) {
      this._xSeisData = [xsdd];
    } else {
      throw new Error(`Unknown data for xSeisData: ${xsdd}`);
    }
    this._seisDataList = this._xSeisData.concat(this._ySeisData);
  }
  get ySeisData() {
    return this._ySeisData;
  }
  set ySeisData(ysdd) {
    if (Array.isArray(ysdd)) {
      this._ySeisData = ysdd;
    } else if (ysdd instanceof SeismogramDisplayData) {
      this._ySeisData = [ysdd];
    } else {
      throw new Error(`Unknown data for xSeisData: ${ysdd}`);
    }
    this._seisDataList = this._xSeisData.concat(this._ySeisData);
  }
  draw() {
    if (!this.isConnected) {
      return;
    }
    const wrapper = this.shadowRoot?.querySelector("div");
    const svgEl = wrapper.querySelector("svg");
    if (!svgEl) {
      console.log(`svgEl is not def in particlemotion draw()`);
      return;
    }
    const rect = svgEl.getBoundingClientRect();
    let calcHeight = rect.height;
    if (rect.width !== this.outerWidth || rect.height !== this.outerHeight) {
      if (isNumArg(this.seismographConfig.minHeight) && calcHeight < this.seismographConfig.minHeight) {
        calcHeight = this.seismographConfig.minHeight;
      }
      if (isNumArg(this.seismographConfig.maxHeight) && calcHeight > this.seismographConfig.maxHeight) {
        calcHeight = this.seismographConfig.maxHeight;
      }
      this.calcWidthHeight(rect.width, calcHeight);
    }
    this.calcScaleDomain();
    this.drawAxis();
    const handlebarsInput = this.createHandlebarsInput();
    drawAxisLabels(
      svgEl,
      this.seismographConfig,
      this.height,
      this.width,
      handlebarsInput
    );
    this.drawParticleMotion();
  }
  checkResize() {
    const wrapper = this.shadowRoot?.querySelector("div");
    const svgEl = wrapper.querySelector("svg");
    const rect = svgEl.getBoundingClientRect();
    if (rect.width !== this.outerWidth || rect.height !== this.outerHeight) {
      return true;
    }
    return false;
  }
  drawParticleMotion() {
    this.g.selectAll("g.particleMotion").remove();
    if (!this.xSeisData || this.xSeisData.length === 0 || !this.ySeisData || this.ySeisData.length === 0) {
      return;
    }
    const lineG = this.g.append("g");
    let xOrientCode = "X";
    let yOrientCode = "Y";
    if (this.xSeisData[0].channelCode && this.xSeisData[0].channelCode.length > 2) {
      xOrientCode = this.xSeisData[0].channelCode.charAt(2);
    }
    if (this.ySeisData[0].channelCode && this.ySeisData[0].channelCode.length > 2) {
      yOrientCode = this.ySeisData[0].channelCode.charAt(2);
    }
    lineG.classed("particleMotion", true).classed("seisplotjsdata", true).classed("seispath", true).classed(this.xSeisData[0].codes(), true).classed("orient" + xOrientCode + "_" + yOrientCode, true);
    let xSegments;
    let ySegments;
    for (let i = 0; i < this.xSeisData.length; i++) {
      xSegments = this.xSeisData[i].segments;
      ySegments = this.ySeisData[i].segments;
      xSegments.forEach((segX) => {
        ySegments.forEach((segY) => {
          this.drawParticleMotionForSegment(lineG, segX, segY);
        });
      });
    }
  }
  drawParticleMotionForSegment(lineG, segA, segB) {
    const mythis = this;
    const timeRange = segA.timeRange.intersection(segB.timeRange);
    if (!isDef(timeRange)) {
      return;
    }
    const idxA = segA.indexOfTime(timeRange.start);
    const lastIdxA = segA.indexOfTime(timeRange.end);
    const idxB = segB.indexOfTime(timeRange.start);
    const lastIdxB = segB.indexOfTime(timeRange.end);
    if (idxA === -1 || lastIdxA === -1 || idxB === -1 || lastIdxB === -1) {
      return;
    }
    const numPts = Math.min(lastIdxA - idxA, lastIdxB - idxB) + 1;
    const segmentG = lineG.append("g").classed("segment", true);
    const path2 = segmentG.selectAll("path").data([segA.y.slice(idxA, numPts)]);
    path2.exit().remove();
    path2.enter().append("path").classed("seispath", true).attr("marker-end", "url(#arrow)").attr(
      "d",
      line_default2().curve(linear_default).x((d) => mythis.xScale(d)).y((d, i) => mythis.yScale(segB.yAtIndex(idxB + i)))
    );
  }
  drawAxis() {
    const svgG = this.g;
    svgG.selectAll("g.axis").remove();
    svgG.append("g").attr("class", "axis axis--x").attr("transform", "translate(0," + this.height + ")").call(this.xAxis);
    svgG.append("g").attr("class", "axis axis--y").call(this.yAxis);
  }
  rescaleAxis() {
    const delay = 500;
    this.g.select(".axis--y").transition().duration(delay / 2).call(this.yAxis);
    this.g.select(".axis--x").transition().duration(delay / 2).call(this.xAxis);
  }
  calcScaleDomain() {
    let halfDomainDelta = 1;
    if (this.seismographConfig.fixedAmplitudeScale) {
      halfDomainDelta = (this.seismographConfig.fixedAmplitudeScale[1] - this.seismographConfig.fixedAmplitudeScale[0]) / 2;
      this.xScale.domain(this.seismographConfig.fixedAmplitudeScale).nice();
      this.yScale.domain(this.seismographConfig.fixedAmplitudeScale).nice();
    } else {
      let xMinMax = [-1, 1];
      if (this.xSeisData) {
        xMinMax = findMinMaxOfSDD(this.xSeisData);
      }
      let yMinMax = [-1, 1];
      if (this.ySeisData) {
        yMinMax = findMinMaxOfSDD(this.ySeisData);
      }
      halfDomainDelta = (xMinMax[1] - xMinMax[0]) / 2;
      if (yMinMax[1] - yMinMax[0] > xMinMax[1] - xMinMax[0]) {
        halfDomainDelta = (yMinMax[1] - yMinMax[0]) / 2;
      }
      const xMid = (xMinMax[1] + xMinMax[0]) / 2;
      const yMid = (yMinMax[1] + yMinMax[0]) / 2;
      xMinMax = [xMid - halfDomainDelta, xMid + halfDomainDelta];
      yMinMax = [yMid - halfDomainDelta, yMid + halfDomainDelta];
      this.xScale.domain(xMinMax).nice();
      this.yScale.domain(yMinMax).nice();
    }
    const xNiceMinMax = this.xScale.domain();
    const xHalfNice = (xNiceMinMax[1] - xNiceMinMax[0]) / 2;
    if (this.seismographConfig.centeredAmp) {
      this.xScaleRmean.domain([-1 * xHalfNice, xHalfNice]);
    } else {
      this.xScaleRmean.domain(this.xScale.domain());
    }
    const yNiceMinMax = this.yScale.domain();
    const yHalfNice = (yNiceMinMax[1] - yNiceMinMax[0]) / 2;
    if (this.seismographConfig.centeredAmp) {
      this.yScaleRmean.domain([-1 * yHalfNice, yHalfNice]);
    } else {
      this.yScaleRmean.domain(this.yScale.domain());
    }
    this.rescaleAxis();
  }
  calcWidthHeight(nOuterWidth, nOuterHeight) {
    const defHW = 200;
    this.outerWidth = nOuterWidth ? Math.max(defHW, nOuterWidth) : defHW;
    this.outerHeight = nOuterHeight ? Math.max(defHW, nOuterHeight) : defHW;
    this.height = this.outerHeight - this.seismographConfig.margin.top - this.seismographConfig.margin.bottom;
    this.width = this.outerWidth - this.seismographConfig.margin.left - this.seismographConfig.margin.right;
    this.height = Math.min(this.height, this.width);
    this.width = Math.min(this.height, this.width);
    this.xScale.range([0, this.width]);
    this.yScale.range([this.height, 0]);
    this.xScaleRmean.range([0, this.width]);
    this.yScaleRmean.range([this.height, 0]);
  }
  createHandlebarsInput() {
    return {
      seisDataList: this._seisDataList,
      seisConfig: this._seismographConfig,
      seisXData: this.xSeisData,
      seisYData: this.ySeisData
    };
  }
};
var ParticleMotion = _ParticleMotion;
__publicField(ParticleMotion, "_lastID");
ParticleMotion._lastID = 0;
customElements.define(PARTICLE_MOTION_ELEMENT, ParticleMotion);

// src/sorting.ts
var sorting_exports = {};
__export(sorting_exports, {
  SORT_ALPHABETICAL: () => SORT_ALPHABETICAL,
  SORT_AZIMUTH: () => SORT_AZIMUTH,
  SORT_BACKAZIMUTH: () => SORT_BACKAZIMUTH,
  SORT_DISTANCE: () => SORT_DISTANCE,
  SORT_NONE: () => SORT_NONE,
  SORT_ORIGINTIME: () => SORT_ORIGINTIME,
  SORT_STARTTIME: () => SORT_STARTTIME,
  createSortValueFunction: () => createSortValueFunction,
  reorderXYZ: () => reorderXYZ,
  sort: () => sort2
});
var SORT_NONE = "none";
var SORT_DISTANCE = "distance";
var SORT_AZIMUTH = "azimuth";
var SORT_BACKAZIMUTH = "backazimuth";
var SORT_ALPHABETICAL = "alphabetical";
var SORT_STARTTIME = "starttime";
var SORT_ORIGINTIME = "origin";
function sort2(seisData, key) {
  if (key === SORT_NONE) {
    return seisData;
  }
  const cache = /* @__PURE__ */ new Map();
  const calcSortValue = createSortValueFunction(key);
  seisData.forEach((sdd) => {
    cache.set(sdd, calcSortValue(sdd));
  });
  return seisData.slice().sort((sddA, sddB) => {
    const valA = cache.get(sddA);
    const valB = cache.get(sddB);
    if (!valA && !valB) {
      return 0;
    } else if (!valA) {
      return 1;
    } else if (!valB) {
      return -1;
    } else if (valA < valB) {
      return -1;
    } else if (valA > valB) {
      return 1;
    } else {
      return 0;
    }
  });
}
function createSortValueFunction(key) {
  if (key === SORT_DISTANCE) {
    return (sdd) => {
      let out = Number.MAX_VALUE;
      if (sdd.hasQuake() && sdd.hasChannel()) {
        const distaz2 = sdd.distaz;
        out = distaz2 ? Math.min(Number.MAX_VALUE, distaz2.delta) : Number.MAX_VALUE;
      }
      return out;
    };
  } else if (key === SORT_AZIMUTH) {
    return (sdd) => {
      let out = Number.MAX_VALUE;
      if (sdd.hasQuake() && sdd.hasChannel()) {
        const distaz2 = sdd.distaz;
        out = distaz2 ? Math.min(Number.MAX_VALUE, distaz2.az) : Number.MAX_VALUE;
      }
      return out;
    };
  } else if (key === SORT_BACKAZIMUTH) {
    return (sdd) => {
      let out = Number.MAX_VALUE;
      if (sdd.hasQuake() && sdd.hasChannel()) {
        const distaz2 = sdd.distaz;
        out = distaz2 ? Math.min(Number.MAX_VALUE, distaz2.baz) : Number.MAX_VALUE;
      }
      return out;
    };
  } else if (key === SORT_ALPHABETICAL) {
    return (sdd) => sdd.sourceId;
  } else if (key === SORT_STARTTIME) {
    return (sdd) => sdd.startTime;
  } else if (key === SORT_ORIGINTIME) {
    return (sdd) => {
      let out = WAY_FUTURE;
      if (sdd.hasQuake()) {
        out = sdd.quake ? sdd.quake.time : out;
      }
      return out;
    };
  } else {
    throw new Error(`unknown sorting key: ${key}`);
  }
}
function xyzCompareFun(a3, b) {
  if (a3.hasChannel() && b.hasChannel()) {
    if (Math.abs(a3.channel.dip) > 85 || Math.abs(b.channel.dip) > 85) {
      if (a3.channel.dip !== b.channel.dip) {
        return Math.abs(a3.channel.dip) - Math.abs(b.channel.dip);
      }
    }
    const ninetyRot = Math.abs((a3.channel.azimuth - b.channel.azimuth + 90) % 360);
    if (ninetyRot < 5 || ninetyRot > 355) {
      return 1;
    }
    if (ninetyRot > 175 || ninetyRot < 185) {
      return -1;
    }
  }
  const aSID = a3.sourceId;
  const bSID = b.sourceId;
  if (aSID && bSID) {
    return aSID.subsourceCode.localeCompare(bSID.subsourceCode);
  } else if (aSID === bSID) {
    return 0;
  } else {
    return -1;
  }
}
function reorderXYZ(sddList) {
  return sddList.slice().sort(xyzCompareFun);
}

// src/displayorganize.ts
var querystringify = __toESM(require_querystringify(), 1);
var ORG_DISP_ITEM = "sp-organized-display-item";
var ORG_DISPLAY = "sp-organized-display";
var ORG_TYPE = "orgtype";
var PLOT_TYPE = "plottype";
var SEISMOGRAPH = "seismograph";
var SPECTRA = "amp_spectra";
var PARTICLE_MOTION = "particlemotion";
var MAP = "map";
var INFO = "info";
var QUAKE_TABLE = "quake_table";
var STATION_TABLE = "station_table";
var OrganizedDisplayItem = class extends SeisPlotElement {
  constructor(seisData, seisConfig) {
    super(seisData, seisConfig);
    __publicField(this, "extras");
    if (this.plottype.startsWith(PARTICLE_MOTION)) {
      this._seismographConfig = createParticleMotionConfig(null, seisConfig);
    }
    this.extras = /* @__PURE__ */ new Map();
    this.addStyle(`
    :host {
      display: block;
      min-height: 50px;
      height: 100%;
    }
    sp-station-event-map {
      height: 400px;
    }
    sp-seismograph {
      height: 200px;
    }
    `);
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    this.shadowRoot?.appendChild(wrapper);
  }
  get plottype() {
    let k2 = this.hasAttribute(PLOT_TYPE) ? this.getAttribute(PLOT_TYPE) : SEISMOGRAPH;
    if (!k2) {
      k2 = SEISMOGRAPH;
    }
    return k2;
  }
  set plottype(val) {
    this.setAttribute(PLOT_TYPE, val);
    this.draw();
  }
  static get observedAttributes() {
    return [PLOT_TYPE];
  }
  attributeChangedCallback(name, oldValue, newValue) {
    this.draw();
  }
  setExtra(key, value) {
    this.extras.set(key, value);
  }
  hasExtra(key) {
    return this.extras.has(key);
  }
  getExtra(key) {
    if (this.extras.has(key)) {
      return this.extras.get(key);
    }
    return null;
  }
  getContainedPlotElements() {
    const wrapper = this.shadowRoot?.querySelector("div");
    let dispItems = Array.from(wrapper.children);
    dispItems = dispItems.filter((el) => el instanceof SeisPlotElement);
    return dispItems;
  }
  draw() {
    if (!this.isConnected) {
      return;
    }
    const wrapper = this.shadowRoot?.querySelector("div");
    while (wrapper.firstChild) {
      wrapper.removeChild(wrapper.lastChild);
    }
    const qIndex = this.plottype.indexOf("?");
    let queryParams;
    if (qIndex !== -1) {
      queryParams = querystringify.parse(this.plottype.substring(qIndex));
    } else {
      queryParams = {};
    }
    const mythis = this;
    if (this.plottype.startsWith(SEISMOGRAPH)) {
      const seismograph = new Seismograph(this.seisData, this._seismographConfig);
      wrapper.appendChild(seismograph);
      seismograph.addEventListener("seismousemove", (sEvt) => {
        const seisDetail = sEvt.detail;
        const event = new CustomEvent("seismousemove", { detail: seisDetail });
        mythis.dispatchEvent(event);
      });
      seismograph.addEventListener("seisclick", (sEvt) => {
        const seisDetail = sEvt.detail;
        const event = new CustomEvent("seisclick", { detail: seisDetail });
        mythis.dispatchEvent(event);
      });
    } else if (this.plottype.startsWith(SPECTRA)) {
      const loglog = getFromQueryParams(queryParams, "loglog", "true");
      const nonContigList = this.seisData.filter(
        (sdd) => !(sdd.seismogram && sdd.seismogram.isContiguous())
      );
      if (nonContigList.length > 0) {
        const nonContigMsg = "non-contiguous seismograms, skipping: " + nonContigList.map(
          (sdd) => isDef(sdd.seismogram) ? `${sdd.codes()} ${sdd.seismogram.segments.length}` : "null"
        ).join(",");
        const p = wrapper.appendChild(document.createElement("p"));
        p.textContent = nonContigMsg;
      }
      const fftList = this.seisData.map((sdd) => {
        return sdd.seismogram && sdd.seismogram.isContiguous() ? fftForward(sdd) : null;
      });
      const fftListNoNull = fftList.filter(isDef);
      const spectraPlot = new SpectraPlot(fftListNoNull, this._seismographConfig);
      spectraPlot.setAttribute(LOGFREQ, loglog);
      wrapper.appendChild(spectraPlot);
    } else if (this.plottype.startsWith(PARTICLE_MOTION)) {
      if (this.seisData.length !== 2) {
        throw new Error(
          `particle motion requies exactly 2 seisData in seisDataList, ${this.seisData.length}`
        );
      }
      const pmpSeisConfig = this._seismographConfig.clone();
      const particleMotionPlot = new ParticleMotion(
        [this.seisData[0]],
        [this.seisData[1]],
        pmpSeisConfig
      );
      wrapper.appendChild(particleMotionPlot);
    } else if (this.plottype.startsWith(MAP)) {
      const mapid = "map" + ((1 + Math.random()) * 65536 | 0).toString(16).substring(1);
      const seismap = new QuakeStationMap(this.seisData);
      seismap.setAttribute("id", mapid);
      const centerLat = parseFloat(
        getFromQueryParams(queryParams, "centerLat", "35")
      );
      seismap.setAttribute(CENTER_LAT, `${centerLat}`);
      const centerLon = parseFloat(
        getFromQueryParams(queryParams, "centerLon", "-100")
      );
      seismap.setAttribute(CENTER_LON, `${centerLon}`);
      const mapZoomLevel = parseInt(
        getFromQueryParams(queryParams, "zoom", "1")
      );
      seismap.setAttribute(ZOOM_LEVEL, `${mapZoomLevel}`);
      const magScale = parseFloat(
        getFromQueryParams(queryParams, "magScale", "5.0")
      );
      seismap.setAttribute(MAG_SCALE, `${magScale}`);
      wrapper.appendChild(seismap);
    } else if (this.plottype.startsWith(INFO)) {
      const infotable = new QuakeStationTable(this.seisData, this._seismographConfig);
      wrapper.appendChild(infotable);
    } else {
      throw new Error(`Unkown plottype "${this.plottype}"`);
    }
  }
};
customElements.define(ORG_DISP_ITEM, OrganizedDisplayItem);
var WITH_INFO = "info";
var DEFAULT_WITH_INFO = "false";
var WITH_MAP = "map";
var DEFAULT_WITH_MAP = "false";
var WITH_TOOLS = "tools";
var DEFAULT_WITH_TOOLS = "true";
var SORT_BY = "sort";
var OVERLAY_BY = "overlay";
var OVERLAY_NONE = "none";
var OVERLAY_INDIVIDUAL = "individual";
var OVERLAY_VECTOR = "vector";
var OVERLAY_COMPONENT = "component";
var OVERLAY_STATION = "station";
var OVERLAY_ALL = "all";
var OVERLAY_FUNCTION = "function";
var TOOLS_HTML = `
<details>
  <summary>Tools</summary>
  <form>
    <fieldset class="plottype">
      <legend>Plot</legend>
      <span>
        <input type="checkbox" name="with_map" id="with_map">
        <label for="with_map">map</label>
      </span>
      <span>
        <input type="checkbox" name="with_info" id="with_info">
        <label for="with_info">info</label>
      </span>
    </fieldset>
    <fieldset class="overlay">
    <legend>Overlay Type</legend>
    <span>
      <input type="radio" name="overlay" id="overlay_individual" value="individual" checked>
      <label for="overlay_individual">individual</label>
    </span>
    <span>
      <input type="radio" name="overlay" id="overlay_vector" value="vector">
      <label for="overlay_vector">vector</label>
    </span>
    <span>
      <input type="radio" name="overlay" id="overlay_component" value="component">
      <label for="overlay_component">component</label>
    </span>
    <span>
      <input type="radio" name="overlay" id="overlay_station" value="station">
      <label for="overlay_station">station</label>
    </span>
    <span>
      <input type="radio" name="overlay" id="overlay_all" value="all">
      <label for="overlay_all">all</label>
    </span>
    <span>
      <input type="radio" name="overlay" id="overlay_none" value="none">
      <label for="overlay_none">none</label>
    </span>
  </fieldset>
  <fieldset class="sort">
    <legend>Sort Type</legend>
    <span>
      <input type="radio" name="sort" id="sort_distance" value="distance">
      <label for="sort_distance">distance</label>
    </span>
    <span>
      <input type="radio" name="sort" id="sort_azimuth" value="azimuth">
      <label for="sort_azimuth">azimuth</label>
    </span>
    <span>
      <input type="radio" name="sort" id="sort_backazimuth" value="backazimuth">
      <label for="sort_backazimuth">back azimuth</label>
    </span>
    <span>
      <input type="radio" name="sort" id="sort_alphabetical" value="alphabetical">
      <label for="sort_alphabetical">alphabetical</label>
    </span>
    <span>
      <input type="radio" name="sort" id="sort_starttime" value="starttime">
      <label for="sort_starttime">starttime</label>
    </span>
    <span>
      <input type="radio" name="sort" id="sort_origin" value="origin">
      <label for="sort_origin">origin</label>
    </span>
    <span>
      <input type="radio" name="sort" id="sort_none" value="none" checked>
      <label for="sort_none">none</label>
    </span>
  </fieldset>
  </form>
</details>
`;
var OrganizedDisplayTools = class extends SeisPlotElement {
  constructor(seisData, seisConfig) {
    super(seisData, seisConfig);
    __publicField(this, "_organizedDisplay");
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    wrapper.innerHTML = TOOLS_HTML;
    this.shadowRoot?.appendChild(wrapper);
    this._organizedDisplay = null;
  }
  get organizedDisplay() {
    return this._organizedDisplay;
  }
  set organizedDisplay(orgdisp) {
    this._organizedDisplay = orgdisp;
    this.initCheckboxes(orgdisp);
  }
  initCheckboxes(orgdisp) {
    if (orgdisp) {
      const shadow = this.shadowRoot;
      const doMapCB = shadow?.querySelector("input#with_map");
      if (doMapCB) {
        doMapCB.checked = orgdisp.map === "true";
      }
      const doInfoCB = shadow?.querySelector("input#with_info");
      if (doInfoCB) {
        doInfoCB.checked = orgdisp.info === "true";
      }
      shadow?.querySelectorAll("fieldset.overlay input").forEach((i) => {
        const inEl = i;
        inEl.checked = orgdisp.overlayby === inEl.value;
      });
      shadow?.querySelectorAll("fieldset.sort input").forEach((i) => {
        const inEl = i;
        inEl.checked = orgdisp.sortby === inEl.value;
      });
    }
  }
  draw() {
    const wrapper = this.shadowRoot?.querySelector("div");
    wrapper.innerHTML = TOOLS_HTML;
    this.wireComponents();
  }
  wireComponents() {
    const shadow = this.shadowRoot;
    const doMapCB = shadow?.querySelector("input#with_map");
    if (!doMapCB) {
      console.log("no ccheckbox found");
    }
    doMapCB?.addEventListener("change", () => {
      if (this._organizedDisplay) {
        this._organizedDisplay.map = doMapCB.checked ? "true" : "false";
        console.log(`set map to ${this._organizedDisplay.map}`);
      } else {
        console.log("no org display set");
      }
    });
    const doInfoCB = shadow?.querySelector("input#with_info");
    doInfoCB?.addEventListener("change", () => {
      if (this._organizedDisplay) {
        this._organizedDisplay.info = `${doInfoCB.checked}`;
        console.log(`set info to ${this._organizedDisplay.info}`);
      }
    });
    shadow?.querySelectorAll("fieldset.overlay input").forEach((i) => {
      const inEl = i;
      inEl.addEventListener("change", (e) => {
        if (this._organizedDisplay) {
          this._organizedDisplay?.setAttribute("overlay", inEl.value);
        }
      });
    });
    shadow?.querySelectorAll("fieldset.sort input").forEach((i) => {
      const inEl = i;
      inEl.addEventListener("change", (e) => {
        if (this._organizedDisplay) {
          this._organizedDisplay?.setAttribute("sort", inEl.value);
        }
      });
    });
    this.initCheckboxes(this._organizedDisplay);
  }
};
var ORG_DISP_TOOLS_ELEMENT = "sp-orgdisp-tools";
customElements.define(ORG_DISP_TOOLS_ELEMENT, OrganizedDisplayTools);
var OrganizedDisplay = class extends SeisPlotElement {
  constructor(seisData, seisConfig) {
    super(seisData, seisConfig);
    __publicField(this, "extraMapStations");
    __publicField(this, "extraMapQuakes");
    this.extraMapStations = [];
    this.extraMapQuakes = [];
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    this.addStyle(`
    :host {
      display: block;
      min-height: 50px;
      height: 100%;
    }
    sp-station-event-map {
      height: var(--map-height, 400px);
    }
    sp-organized-display-item {
      min-height: 200px;
    }
    sp-seismograph {
      height: 200px;
    }
    `);
    this.shadowRoot?.appendChild(wrapper);
  }
  static get observedAttributes() {
    return [ORG_TYPE, WITH_TOOLS, WITH_MAP, WITH_INFO, OVERLAY_BY, SORT_BY];
  }
  getDisplayItems() {
    const wrapper = this.shadowRoot?.querySelector("div");
    let dispItems = Array.from(wrapper.children);
    dispItems = dispItems.filter((el) => el instanceof OrganizedDisplayItem);
    return dispItems;
  }
  get orgtype() {
    let k2 = this.hasAttribute(ORG_TYPE) ? this.getAttribute(ORG_TYPE) : OVERLAY_INDIVIDUAL;
    if (!k2) {
      k2 = SEISMOGRAPH;
    }
    return k2;
  }
  set orgtype(val) {
    this.setAttribute(ORG_TYPE, val);
    this.draw();
  }
  get tools() {
    let k2 = this.hasAttribute(WITH_TOOLS) ? this.getAttribute(WITH_TOOLS) : DEFAULT_WITH_TOOLS;
    if (!isDef(k2)) {
      k2 = DEFAULT_WITH_TOOLS;
    }
    k2 = k2.trim().toLowerCase();
    return k2;
  }
  set tools(val) {
    this.setAttribute(WITH_TOOLS, val);
  }
  get map() {
    let k2 = this.hasAttribute(WITH_MAP) ? this.getAttribute(WITH_MAP) : DEFAULT_WITH_MAP;
    if (!isDef(k2)) {
      k2 = DEFAULT_WITH_MAP;
    }
    k2 = k2.trim().toLowerCase();
    return k2;
  }
  set map(val) {
    this.setAttribute(WITH_MAP, val);
  }
  get info() {
    let k2 = this.hasAttribute(WITH_INFO) ? this.getAttribute(WITH_INFO) : DEFAULT_WITH_INFO;
    if (!isDef(k2)) {
      k2 = DEFAULT_WITH_INFO;
    }
    k2 = k2.trim().toLowerCase();
    return k2;
  }
  set info(val) {
    this.setAttribute(WITH_INFO, val.toLowerCase().trim());
  }
  get overlayby() {
    let k2 = this.hasAttribute(OVERLAY_BY) ? this.getAttribute(OVERLAY_BY) : OVERLAY_INDIVIDUAL;
    if (!k2) {
      k2 = OVERLAY_INDIVIDUAL;
    }
    return k2;
  }
  set overlayby(val) {
    this.setAttribute(OVERLAY_BY, val);
  }
  get sortby() {
    let k2 = this.hasAttribute(SORT_BY) ? this.getAttribute(SORT_BY) : SORT_NONE;
    if (!k2) {
      k2 = SORT_NONE;
    }
    return k2;
  }
  set sortby(val) {
    this.setAttribute(SORT_BY, val);
  }
  addStations(staArray) {
    this.extraMapStations = this.extraMapStations.concat(staArray);
  }
  addQuakes(quakeArray) {
    this.extraMapQuakes = this.extraMapQuakes.concat(quakeArray);
  }
  draw() {
    if (!this.isConnected) {
      return;
    }
    const wrapper = this.shadowRoot?.querySelector("div");
    wrapper.querySelectorAll(ORG_DISP_ITEM).forEach((item) => wrapper.removeChild(item));
    const mythis = this;
    const sortedData = sort2(mythis.seisData, this.sortby);
    let allOrgDispItems = new Array();
    this.drawTools(sortedData);
    this.drawMap(sortedData);
    this.drawInfo(sortedData);
    if (this.overlayby === OVERLAY_INDIVIDUAL) {
      sortedData.forEach((sdd) => {
        const oi = new OrganizedDisplayItem([sdd], mythis.seismographConfig);
        oi.plottype = SEISMOGRAPH;
        allOrgDispItems.push(oi);
      });
    } else if (this.overlayby === OVERLAY_VECTOR) {
      const groupedSDD = groupComponentOfMotion(sortedData);
      groupedSDD.forEach((gsdd) => {
        const oi = new OrganizedDisplayItem(gsdd, mythis.seismographConfig);
        allOrgDispItems.push(oi);
      });
    } else if (this.overlayby === OVERLAY_COMPONENT) {
      const oitems = overlayByComponent(sortedData, mythis.seismographConfig);
      allOrgDispItems = allOrgDispItems.concat(oitems);
    } else if (this.overlayby === OVERLAY_STATION) {
      const oitems = overlayByStation(sortedData, mythis.seismographConfig);
      allOrgDispItems = allOrgDispItems.concat(oitems);
    } else if (this.overlayby === OVERLAY_ALL) {
      const oi = new OrganizedDisplayItem(sortedData, mythis.seismographConfig);
      allOrgDispItems.push(oi);
    } else if (this.overlayby === OVERLAY_NONE) {
    } else {
      throw new Error(`Unknown overlay: ${this.overlayby}`);
    }
    allOrgDispItems.forEach((oi) => {
      wrapper.appendChild(oi);
      oi.draw();
      if (oi.plottype === SEISMOGRAPH) {
        oi.addEventListener("seismousemove", (sEvt) => {
          const seisDetail = sEvt.detail;
          const event = new CustomEvent("seismousemove", { detail: seisDetail });
          mythis.dispatchEvent(event);
        });
        oi.addEventListener("seisclick", (sEvt) => {
          const seisDetail = sEvt.detail;
          const event = new CustomEvent("seisclick", { detail: seisDetail });
          mythis.dispatchEvent(event);
        });
      }
    });
    if (mythis.seismographConfig.linkedTimeScale) {
      mythis.seismographConfig.linkedTimeScale.notifyAll();
    }
    if (mythis.seismographConfig.linkedAmplitudeScale) {
      mythis.seismographConfig.linkedAmplitudeScale.notifyAll();
    }
  }
  drawTools(sortedData) {
    console.log(`drawTools: ${this.tools}`);
    if (!this.isConnected) {
      return;
    }
    const wrapper = this.shadowRoot?.querySelector("div");
    const toolsElement = wrapper.querySelector(ORG_DISP_TOOLS_ELEMENT);
    if (this.tools !== "true" && toolsElement) {
      wrapper.removeChild(toolsElement);
    } else if (this.tools === "true" && !isDef(toolsElement)) {
      const sortedData2 = sort2(this.seisData, this.sortby);
      const toolsdisp = new OrganizedDisplayTools(sortedData2, this.seismographConfig);
      toolsdisp.organizedDisplay = this;
      wrapper.insertBefore(toolsdisp, wrapper.firstElementChild);
    }
  }
  drawMap(sortedData) {
    if (!this.isConnected) {
      return;
    }
    const wrapper = this.shadowRoot?.querySelector("div");
    const mapElement = wrapper.querySelector(MAP_ELEMENT);
    if (this.map !== "true" && mapElement) {
      wrapper.removeChild(mapElement);
    } else if (this.map === "true" && !isDef(mapElement)) {
      const mapdisp = new QuakeStationMap(sortedData, this.seismographConfig);
      mapdisp.addStation(this.extraMapStations);
      mapdisp.addQuake(this.extraMapQuakes);
      const toolsElement = wrapper.querySelector(ORG_DISP_TOOLS_ELEMENT);
      if (toolsElement) {
        if (toolsElement.nextElementSibling) {
          wrapper.insertBefore(mapdisp, toolsElement.nextElementSibling);
        } else {
          wrapper.appendChild(mapdisp);
        }
      } else {
        wrapper.insertBefore(mapdisp, wrapper.firstElementChild);
      }
    } else if (this.map === "true" && isDef(mapElement)) {
      mapElement.seisData = sortedData;
      mapElement.addStation(this.extraMapStations);
      mapElement.addQuake(this.extraMapQuakes);
    }
  }
  drawInfo(sortedData) {
    if (!this.isConnected) {
      return;
    }
    const wrapper = this.shadowRoot?.querySelector("div");
    const infoElement = wrapper.querySelector(INFO_ELEMENT);
    if (this.info !== "true" && infoElement) {
      wrapper.removeChild(infoElement);
    } else if (this.info === "true" && !isDef(infoElement)) {
      const sortedData2 = sort2(this.seisData, this.sortby);
      const infoDisp = new QuakeStationTable(sortedData2, this.seismographConfig);
      const toolsElement = wrapper.querySelector(ORG_DISP_TOOLS_ELEMENT);
      const mapElement = wrapper.querySelector(MAP_ELEMENT);
      if (mapElement) {
        if (mapElement.nextElementSibling) {
          wrapper.insertBefore(infoDisp, mapElement.nextElementSibling);
        } else {
          wrapper.appendChild(infoDisp);
        }
      } else if (toolsElement) {
        if (toolsElement.nextElementSibling) {
          wrapper.insertBefore(infoDisp, toolsElement.nextElementSibling);
        } else {
          wrapper.appendChild(infoDisp);
        }
      } else {
        wrapper.insertBefore(infoDisp, wrapper.firstElementChild);
      }
    } else if (this.info === "true" && isDef(infoElement)) {
      infoElement.seisData = sortedData;
    }
  }
  attributeChangedCallback(name, oldValue, newValue) {
    if (name === WITH_MAP) {
      const sortedData = sort2(this.seisData, this.sortby);
      this.drawMap(sortedData);
    } else if (name === WITH_INFO) {
      const sortedData = sort2(this.seisData, this.sortby);
      this.drawInfo(sortedData);
    } else {
      this.draw();
    }
  }
};
customElements.define(ORG_DISPLAY, OrganizedDisplay);
function getFromQueryParams(qParams, name, defaultValue = "") {
  if (name in qParams) {
    if (isStringArg(qParams[name])) {
      return qParams[name];
    } else {
      throw new Error(`param ${name} exists but is not string: ${stringify(qParams[name])}`);
    }
  }
  return defaultValue;
}
function individualDisplay(sddList, seisConfig) {
  if (!seisConfig) {
    seisConfig = new SeismographConfig();
  }
  return sddList.map((sdd) => {
    const odisp = new OrganizedDisplayItem([sdd], seisConfig);
    return odisp;
  });
}
function mapAndIndividualDisplay(sddList, seisConfig) {
  if (!seisConfig) {
    seisConfig = new SeismographConfig();
  }
  const map5 = new OrganizedDisplayItem(sddList, seisConfig);
  map5.plottype = MAP;
  const individual = individualDisplay(sddList);
  individual.unshift(map5);
  return individual;
}
function overlayBySDDFunction(sddList, key, sddFun, seisConfig) {
  if (!seisConfig) {
    seisConfig = new SeismographConfig();
  }
  const out = [];
  sddList.forEach((sdd) => {
    let found = false;
    const val = sddFun(sdd);
    if (!isDef(val)) {
      return;
    }
    out.forEach((org) => {
      if (org.getExtra(key) === val) {
        org.seisData.push(sdd);
        found = true;
      }
    });
    if (!found) {
      const org = new OrganizedDisplayItem([sdd], seisConfig);
      org.setExtra(key, val);
      out.push(org);
    }
  });
  return out;
}
function overlayByComponent(sddList, seisConfig) {
  return overlayBySDDFunction(
    sddList,
    "component",
    (sdd) => sdd.channelCode.charAt(2),
    seisConfig
  );
}
function overlayByStation(sddList, seisConfig) {
  return overlayBySDDFunction(
    sddList,
    "station",
    (sdd) => sdd.networkCode + "_" + sdd.stationCode,
    seisConfig
  );
}
function overlayAll(sddList, seisConfig) {
  return overlayBySDDFunction(sddList, "all", () => "all", seisConfig);
}
function sortByKey(organized, key) {
  organized.sort((orgA, orgB) => {
    const valA = orgA.getExtra(key);
    const valB = orgB.getExtra(key);
    if (!valA && !valB) {
      return 0;
    } else if (!valA) {
      return 1;
    } else if (!valB) {
      return -1;
    } else if (valA < valB) {
      return -1;
    } else if (valA > valB) {
      return 1;
    } else {
      return 0;
    }
  });
  return organized;
}
function groupComponentOfMotion(sddList) {
  let tmpSeisDataList = Array.from(sddList);
  const bifurcate = (arr, filter3) => arr.reduce((acc, val) => (acc[filter3(val) ? 0 : 1].push(val), acc), [
    [],
    []
  ]);
  const byFriends = [];
  let first = tmpSeisDataList.shift();
  while (isDef(first)) {
    const isFriend = (sdddB) => isDef(first) && first.networkCode === sdddB.networkCode && first.stationCode === sdddB.stationCode && first.locationCode === sdddB.locationCode && first.channelCode.slice(0, 2) === sdddB.channelCode.slice(0, 2) && first.timeRange.overlaps(sdddB.timeRange);
    const splitArray = bifurcate(tmpSeisDataList, isFriend);
    const nextGroup = splitArray[0];
    nextGroup.unshift(first);
    byFriends.push(nextGroup);
    tmpSeisDataList = splitArray[1];
    first = tmpSeisDataList.shift();
  }
  return byFriends;
}
function createAttribute(organized, key, valueFun) {
  organized.forEach((org) => {
    if (org.seisData.length > 0) {
      const v = valueFun(org);
      org.setExtra(key, v);
    } else {
      org.setExtra(key, null);
    }
  });
  return organized;
}
function createPlots(organized, divElement) {
  organized.forEach((org) => {
    divElement.appendChild(org);
  });
}

// src/fdsnavailability.ts
var fdsnavailability_exports = {};
__export(fdsnavailability_exports, {
  AvailabilityQuery: () => AvailabilityQuery,
  EMPTY_JSON: () => EMPTY_JSON,
  FORMAT_GEOCSV: () => FORMAT_GEOCSV,
  FORMAT_JSON: () => FORMAT_JSON,
  FORMAT_REQUEST: () => FORMAT_REQUEST,
  FORMAT_TEXT: () => FORMAT_TEXT,
  IRIS_HOST: () => IRIS_HOST,
  SERVICE_NAME: () => SERVICE_NAME,
  SERVICE_VERSION: () => SERVICE_VERSION
});
var FORMAT_JSON = "json";
var FORMAT_TEXT = "text";
var FORMAT_GEOCSV = "geocsv";
var FORMAT_REQUEST = "request";
var EMPTY_JSON = {
  version: {},
  datasources: []
};
var SERVICE_VERSION = 1;
var SERVICE_NAME = `fdsnws-availability-${SERVICE_VERSION}`;
var AvailabilityQuery = class extends FDSNCommon {
  constructor(host) {
    if (!isNonEmptyStringArg(host)) {
      host = IRIS_HOST;
    }
    super(host);
    __publicField(this, "_networkCode");
    __publicField(this, "_stationCode");
    __publicField(this, "_locationCode");
    __publicField(this, "_channelCode");
    __publicField(this, "_startTime");
    __publicField(this, "_endTime");
    __publicField(this, "_quality");
    __publicField(this, "_merge");
    __publicField(this, "_show");
    __publicField(this, "_mergeGaps");
    __publicField(this, "_limit");
    __publicField(this, "_orderby");
    __publicField(this, "_includerestricted");
    __publicField(this, "_format");
  }
  specVersion(value) {
    doStringGetterSetter(this, "specVersion", value);
    return this;
  }
  getSpecVersion() {
    return this._specVersion;
  }
  protocol(value) {
    doStringGetterSetter(this, "protocol", value);
    return this;
  }
  getProtocol() {
    return this._protocol;
  }
  host(value) {
    doStringGetterSetter(this, "host", value);
    return this;
  }
  getHost() {
    return this._host;
  }
  nodata(value) {
    doIntGetterSetter(this, "nodata", value);
    return this;
  }
  getNodata() {
    return this._nodata;
  }
  port(value) {
    doIntGetterSetter(this, "port", value);
    return this;
  }
  getPort() {
    return this._port;
  }
  networkCode(value) {
    doStringGetterSetter(this, "networkCode", value);
    return this;
  }
  getNetworkCode() {
    return this._networkCode;
  }
  stationCode(value) {
    doStringGetterSetter(this, "stationCode", value);
    return this;
  }
  getStationCode() {
    return this._stationCode;
  }
  locationCode(value) {
    doStringGetterSetter(this, "locationCode", value);
    return this;
  }
  getLocationCode() {
    return this._locationCode;
  }
  channelCode(value) {
    doStringGetterSetter(this, "channelCode", value);
    return this;
  }
  getChannelCode() {
    return this._channelCode;
  }
  startTime(value) {
    doMomentGetterSetter(this, "startTime", value);
    return this;
  }
  getStartTime() {
    return this._startTime;
  }
  endTime(value) {
    doMomentGetterSetter(this, "endTime", value);
    return this;
  }
  getEndTime() {
    return this._endTime;
  }
  timeRange(se) {
    this.startTime(se.start);
    this.endTime(se.end);
    return this;
  }
  timeWindow(se) {
    return this.timeRange(se);
  }
  quality(value) {
    doStringGetterSetter(this, "quality", value);
    return this;
  }
  getQuality() {
    return this._quality;
  }
  merge(value) {
    doStringGetterSetter(this, "merge", value);
    return this;
  }
  getMerge() {
    return this._merge;
  }
  mergeGaps(value) {
    doFloatGetterSetter(this, "mergeGaps", value);
    return this;
  }
  getMergeGaps() {
    return this._mergeGaps;
  }
  show(value) {
    doStringGetterSetter(this, "show", value);
    return this;
  }
  getShow() {
    return this._show;
  }
  limit(value) {
    doIntGetterSetter(this, "limit", value);
    return this;
  }
  getLimit() {
    return this._limit;
  }
  orderby(value) {
    doStringGetterSetter(this, "orderBy", value);
    return this;
  }
  getOrderBy() {
    return this._orderby;
  }
  includeRestricted(value) {
    doBoolGetterSetter(this, "includerestricted", value);
    return this;
  }
  getIncludeRestricted() {
    return this._includerestricted;
  }
  format(value) {
    doStringGetterSetter(this, "format", value);
    return this;
  }
  getFormat() {
    return this._format;
  }
  timeout(value) {
    doFloatGetterSetter(this, "timeoutSec", value);
    return this;
  }
  getTimeout() {
    return this._timeoutSec;
  }
  query() {
    const mythis = this;
    return this.queryJson().then(function(json) {
      return mythis.extractFromJson(json);
    });
  }
  queryJson() {
    const mythis = this;
    this.format(FORMAT_JSON);
    const url = this.formURL("query");
    const fetchInit = defaultFetchInitObj(JSON_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(
      function(response) {
        if (response.status === 204 || isDef(mythis._nodata) && response.status === mythis._nodata) {
          return Promise.resolve(EMPTY_JSON);
        }
        const contentType = response.headers.get("content-type");
        if (isNonEmptyStringArg(contentType) && contentType.includes(JSON_MIME)) {
          return response.json();
        }
        throw new TypeError(`Oops, we did not get JSON! ${contentType}`);
      }
    );
  }
  extent() {
    const mythis = this;
    return this.extentJson().then(function(json) {
      return mythis.extractFromJson(json);
    });
  }
  extentJson() {
    const mythis = this;
    this.format(FORMAT_JSON);
    const url = this.formURL("extent");
    const fetchInit = defaultFetchInitObj(JSON_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(
      function(response) {
        if (response.status === 204 || isDef(mythis._nodata) && response.status === mythis._nodata) {
          return EMPTY_JSON;
        }
        const contentType = response.headers.get("content-type");
        if (isNonEmptyStringArg(contentType) && contentType.includes(JSON_MIME)) {
          return response.json();
        }
        throw new TypeError(`Oops, we did not get JSON! ${contentType}`);
      }
    );
  }
  postQuery(channelTimeList) {
    return this.postQueryJson(channelTimeList).then((json) => {
      return this.extractFromJson(json);
    });
  }
  postExtent(channelTimeList) {
    return this.postExtentJson(channelTimeList).then((json) => {
      return this.extractFromJson(json);
    });
  }
  postExtentJson(channelTimeList) {
    return this.postJson(channelTimeList, "extent");
  }
  postQueryJson(channelTimeList) {
    return this.postJson(channelTimeList, "query");
  }
  postJson(channelTimeList, method) {
    const mythis = this;
    this.format(FORMAT_JSON);
    return this.postRaw(channelTimeList, method).then(function(response) {
      if (response.status === 204 || isDef(mythis._nodata) && response.status === mythis._nodata) {
        return EMPTY_JSON;
      }
      const contentType = response.headers.get("content-type");
      if (isNonEmptyStringArg(contentType) && contentType.includes(JSON_MIME)) {
        return response.json();
      }
      throw new TypeError(`Oops, we did not get JSON! ${contentType}`);
    });
  }
  postRaw(channelTimeList, method) {
    if (channelTimeList.length === 0) {
      return Promise.resolve(new Response(null, {
        status: 204
      }));
    } else {
      const fetchInit = defaultFetchInitObj(JSON_MIME);
      fetchInit.method = "POST";
      fetchInit.body = this.createPostBody(channelTimeList);
      return fetch(this.formBaseURL() + `/${method}?`, fetchInit).then(
        function(response) {
          if (response.ok) {
            return response;
          }
          throw new Error("Fetch response was not ok.");
        }
      );
    }
  }
  extractFromJson(jsonChanTimes) {
    const out = [];
    const knownNets = /* @__PURE__ */ new Map();
    if (isDef(jsonChanTimes.datasources)) {
      for (const ds of jsonChanTimes.datasources) {
        let n2 = knownNets.get(ds.network);
        if (!n2) {
          n2 = new Network(ds.network);
          knownNets.set(ds.network, n2);
        }
        let s3 = null;
        for (const ss of n2.stations) {
          if (ss.stationCode === ds.station) {
            s3 = ss;
          }
        }
        if (!s3) {
          s3 = new Station(n2, ds.station);
          n2.stations.push(s3);
        }
        const c5 = new Channel(s3, ds.channel, ds.locationCode);
        if (isNonEmptyStringArg(ds.earliest) && isNonEmptyStringArg(ds.latest)) {
          out.push(
            SeismogramDisplayData.fromChannelAndTimes(
              c5,
              isoToDateTime(ds.earliest),
              isoToDateTime(ds.latest)
            )
          );
        } else if (ds.timespans) {
          for (const ts of ds.timespans) {
            out.push(
              SeismogramDisplayData.fromChannelAndTimes(
                c5,
                isoToDateTime(ts[0]),
                isoToDateTime(ts[1])
              )
            );
          }
        }
      }
    }
    return out;
  }
  createPostBody(channelTimeList) {
    let out = "";
    if (this._quality) {
      out += this.makePostParm("quality", this.quality());
    }
    if (this._merge) {
      out += this.makePostParm("merge", this.merge());
    }
    if (isNumArg(this._mergeGaps) && (this._format === "query" || this._format === "queryauth")) {
      out += this.makePostParm("mergegaps", this.mergeGaps());
    }
    if (this._show && (this._format === "query" || this._format === "queryauth")) {
      out += this.makePostParm("show", this.show());
    }
    if (isNumArg(this._limit) && this._limit > 0) {
      out += this.makePostParm("limit", this.limit());
    }
    if (this._orderby) {
      out += this.makePostParm("orderby", this.orderby());
    }
    if (this._includerestricted) {
      out += this.makePostParm("includerestricted", this.includeRestricted());
    }
    if (this._format) {
      out += this.makePostParm("format", this.format());
    }
    if (this._nodata) {
      out += this.makePostParm("nodata", this.nodata());
    }
    for (const ct of channelTimeList) {
      if (isDef(ct.channel)) {
        const sta = ct.channel.station;
        const net = sta.network;
        out += `${net.networkCode} ${sta.stationCode} ${ct.channel.locationCode} ${ct.channel.channelCode} ${toIsoWoZ(ct.startTime)} ${toIsoWoZ(ct.endTime)}`;
        out += "\n";
      } else {
        throw new Error("Channel in missing in createPostBody");
      }
    }
    return out;
  }
  formBaseURL() {
    let colon = ":";
    if (this._protocol.endsWith(colon)) {
      colon = "";
    }
    return this._protocol + colon + "//" + this._host + (this._port === 80 ? "" : ":" + this._port) + "/fdsnws/availability/" + this._specVersion;
  }
  formVersionURL() {
    return this.formBaseURL() + "/version";
  }
  queryVersion() {
    const url = this.formVersionURL();
    const fetchInit = defaultFetchInitObj(TEXT_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(
      (response) => {
        if (response.status === 200) {
          return response.text();
        } else {
          throw new Error(`Status not 200: ${response.status}`);
        }
      }
    );
  }
  makePostParm(name, val) {
    return name + "=" + stringify(val) + "\n";
  }
  formURL(method) {
    if (hasNoArgs(method)) {
      method = "query";
    }
    let url = this.formBaseURL() + `/${method}?`;
    if (this._networkCode) {
      url = url + makeParam("net", this._networkCode);
    }
    if (this._stationCode) {
      url = url + makeParam("sta", this._stationCode);
    }
    if (this._locationCode) {
      url = url + makeParam("loc", this._locationCode);
    }
    if (this._channelCode) {
      url = url + makeParam("cha", this._channelCode);
    }
    if (this._startTime) {
      url = url + makeParam("starttime", toIsoWoZ(this._startTime));
    }
    if (this._endTime) {
      url = url + makeParam("endtime", toIsoWoZ(this._endTime));
    }
    if (this._quality) {
      url = url + makeParam("quality", this._quality);
    }
    if (this._merge) {
      url = url + makeParam("merge", this._merge);
    }
    if (this._mergeGaps) {
      url = url + makeParam("mergegaps", this._mergeGaps);
    }
    if (this._show) {
      url = url + makeParam("show", this._show);
    }
    if (isNumArg(this._limit) && this._limit > 0) {
      url = url + makeParam("limit", this._limit);
    }
    if (this._orderby) {
      url = url + makeParam("orderby", this._orderby);
    }
    if (this._includerestricted) {
      url = url + makeParam("includerestricted", this._includerestricted);
    }
    if (this._format) {
      url = url + makeParam("format", this._format);
    }
    if (this._nodata) {
      url = url + makeParam("nodata", this._nodata);
    }
    if (url.endsWith("&") || url.endsWith("?")) {
      url = url.substr(0, url.length - 1);
    }
    return url;
  }
};

// src/fdsndatacenters.ts
var fdsndatacenters_exports = {};
__export(fdsndatacenters_exports, {
  DataCentersQuery: () => DataCentersQuery,
  FDSN_HOST: () => FDSN_HOST
});

// src/fdsndataselect.ts
var fdsndataselect_exports = {};
__export(fdsndataselect_exports, {
  DataSelectQuery: () => DataSelectQuery,
  FORMAT_MINISEED: () => FORMAT_MINISEED,
  FORMAT_MINISEED_THREE: () => FORMAT_MINISEED_THREE,
  IRIS_HOST: () => IRIS_HOST,
  SERVICE_NAME: () => SERVICE_NAME2,
  SERVICE_VERSION: () => SERVICE_VERSION2,
  createDataSelectQuery: () => createDataSelectQuery
});
var FORMAT_MINISEED = "miniseed";
var FORMAT_MINISEED_THREE = "miniseed3";
var SERVICE_VERSION2 = 1;
var SERVICE_NAME2 = `fdsnws-dataselect-${SERVICE_VERSION2}`;
var DataSelectQuery = class extends FDSNCommon {
  constructor(host) {
    if (!isNonEmptyStringArg(host)) {
      host = IRIS_HOST;
    }
    super(host);
    __publicField(this, "_networkCode");
    __publicField(this, "_stationCode");
    __publicField(this, "_locationCode");
    __publicField(this, "_channelCode");
    __publicField(this, "_startTime");
    __publicField(this, "_endTime");
    __publicField(this, "_quality");
    __publicField(this, "_minimumLength");
    __publicField(this, "_longestOnly");
    __publicField(this, "_repository");
    __publicField(this, "_format");
  }
  specVersion(value) {
    doStringGetterSetter(this, "specVersion", value);
    return this;
  }
  getSpecVersion() {
    return this._specVersion;
  }
  protocol(value) {
    doStringGetterSetter(this, "protocol", value);
    return this;
  }
  getProtocol() {
    return this._protocol;
  }
  host(value) {
    doStringGetterSetter(this, "host", value);
    return this;
  }
  getHost() {
    return this._host;
  }
  nodata(value) {
    doIntGetterSetter(this, "nodata", value);
    return this;
  }
  getNodata() {
    return this._nodata;
  }
  port(value) {
    doIntGetterSetter(this, "port", value);
    return this;
  }
  getPort() {
    return this._port;
  }
  networkCode(value) {
    doStringGetterSetter(this, "networkCode", value);
    return this;
  }
  getNetworkCode() {
    return this._networkCode;
  }
  stationCode(value) {
    doStringGetterSetter(this, "stationCode", value);
    return this;
  }
  getStationCode() {
    return this._stationCode;
  }
  locationCode(value) {
    doStringGetterSetter(this, "locationCode", value);
    return this;
  }
  getLocationCode() {
    return this._locationCode;
  }
  channelCode(value) {
    doStringGetterSetter(this, "channelCode", value);
    return this;
  }
  getChannelCode() {
    return this._channelCode;
  }
  nslcCodes(channelId) {
    this.networkCode(channelId.networkCode);
    this.stationCode(channelId.stationCode);
    this.locationCode(channelId.locationCode);
    this.channelCode(channelId.channelCode);
    return this;
  }
  startTime(value) {
    doMomentGetterSetter(this, "startTime", value);
    return this;
  }
  getStartTime() {
    return this._startTime;
  }
  endTime(value) {
    doMomentGetterSetter(this, "endTime", value);
    return this;
  }
  getEndTime() {
    return this._endTime;
  }
  timeRange(se) {
    this.startTime(se.start);
    this.endTime(se.end);
    return this;
  }
  timeWindow(se) {
    return this.timeRange(se);
  }
  quality(value) {
    doStringGetterSetter(this, "quality", value);
    return this;
  }
  getQuality() {
    return this._quality;
  }
  minimumLength(value) {
    doFloatGetterSetter(this, "minimumLength", value);
    return this;
  }
  getMinimumLength() {
    return this._minimumLength;
  }
  longestOnly(value) {
    doBoolGetterSetter(this, "longestOnly", value);
    return this;
  }
  getLongestOnly() {
    return this._longestOnly;
  }
  repository(value) {
    doStringGetterSetter(this, "repository", value);
    return this;
  }
  getRepository() {
    return this._repository;
  }
  format(value) {
    doStringGetterSetter(this, "format", value);
    return this;
  }
  getFormat() {
    return this._format;
  }
  timeout(value) {
    doFloatGetterSetter(this, "timeoutSec", value);
    return this;
  }
  getTimeout() {
    return this._timeoutSec;
  }
  queryDataRecords() {
    const mythis = this;
    this.format(FORMAT_MINISEED);
    const url = this.formURL();
    const fetchInit = defaultFetchInitObj(MINISEED_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(function(response) {
      if (response.status === 204 || isDef(mythis._nodata) && response.status === mythis.getNodata()) {
        return new ArrayBuffer(0);
      } else {
        return response.arrayBuffer();
      }
    }).then(function(rawBuffer) {
      const dataRecords = parseDataRecords(rawBuffer);
      return dataRecords;
    });
  }
  queryMS3Records() {
    const mythis = this;
    this.format(FORMAT_MINISEED_THREE);
    const url = this.formURL();
    const fetchInit = defaultFetchInitObj(MINISEED_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(function(response) {
      if (response.status === 204 || isDef(mythis._nodata) && response.status === mythis.getNodata()) {
        return new ArrayBuffer(0);
      } else {
        return response.arrayBuffer();
      }
    }).then(function(rawBuffer) {
      const dataRecords = parseMSeed3Records(rawBuffer);
      return dataRecords;
    });
  }
  querySeismograms() {
    if (this._format === FORMAT_MINISEED_THREE) {
      return this.queryMS3Records().then((dataRecords) => {
        return seismogramPerChannel2(dataRecords);
      });
    } else {
      return this.queryDataRecords().then((dataRecords) => {
        return seismogramPerChannel(dataRecords);
      });
    }
  }
  postQueryDataRecords(channelTimeList) {
    return this.postQueryRaw(channelTimeList).then((fetchResponse) => {
      if (fetchResponse.ok) {
        return fetchResponse.arrayBuffer().then((ab) => {
          return parseDataRecords(ab);
        });
      } else {
        log("fetchResponse not ok");
        return [];
      }
    });
  }
  postQueryMS3Records(channelTimeList) {
    return this.postQueryRaw(channelTimeList).then((fetchResponse) => {
      if (fetchResponse.ok) {
        return fetchResponse.arrayBuffer().then((ab) => {
          return parseMSeed3Records(ab);
        });
      } else {
        log("fetchResponse not ok");
        return [];
      }
    });
  }
  postQuerySeismograms(sddList) {
    let seismogramPromise;
    if (this._format === FORMAT_MINISEED_THREE) {
      seismogramPromise = this.postQueryMS3Records(sddList).then(
        (dataRecords) => {
          return seismogramSegmentPerChannel2(dataRecords);
        }
      );
    } else {
      seismogramPromise = this.postQueryDataRecords(sddList).then(
        (dataRecords) => {
          return seismogramSegmentPerChannel(dataRecords);
        }
      );
    }
    return seismogramPromise.then((seisArray) => {
      for (const sdd of sddList) {
        let found = false;
        const sddNslc = sdd.nslcId;
        const segList = seisArray.filter(
          (s3) => s3.nslcId.equals(sddNslc) && s3.timeRange.overlaps(sdd.timeRange)
        );
        if (segList.length > 0) {
          found = true;
          const seis = new Seismogram(segList).trim(sdd.timeRange);
          sdd.seismogram = seis;
        }
        if (!found) {
          console.log(`did not find: ${sddNslc}`);
        }
      }
      return sddList;
    });
  }
  postQueryRaw(sddList) {
    if (sddList.length === 0) {
      return Promise.resolve(new Response(null, {
        status: 204
      }));
    } else {
      return this.postQueryRawWithBody(DataSelectQuery.createPostBody(sddList));
    }
  }
  postQueryRawWithBody(body) {
    const fetchInit = defaultFetchInitObj(MINISEED_MIME);
    fetchInit.method = "POST";
    fetchInit.body = body;
    return doFetchWithTimeout(
      this.formPostURL(),
      fetchInit,
      this._timeoutSec * 1e3
    );
  }
  static createPostBody(sddList) {
    let out = "";
    for (const sdd of sddList) {
      const locCode = sdd.locationCode.trim() === "" ? "--" : sdd.locationCode;
      out += `${sdd.networkCode} ${sdd.stationCode} ${locCode} ${sdd.channelCode} ${toIsoWoZ(sdd.startTime)} ${toIsoWoZ(sdd.endTime)}`;
      out += "\n";
    }
    return out;
  }
  formBaseURL() {
    let colon = ":";
    if (this._protocol.endsWith(colon)) {
      colon = "";
    }
    return this._protocol + colon + "//" + this._host + (this._port === 80 ? "" : ":" + this._port) + "/fdsnws/dataselect/" + this._specVersion;
  }
  formVersionURL() {
    return this.formBaseURL() + "/version";
  }
  queryVersion() {
    const url = this.formVersionURL();
    const fetchInit = defaultFetchInitObj(TEXT_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(
      (response) => {
        if (response.status === 200) {
          return response.text();
        } else {
          throw new Error(`Status not 200: ${response.status}`);
        }
      }
    );
  }
  formPostURL() {
    return this.formBaseURL() + "/query";
  }
  formURL() {
    let url = this.formBaseURL() + "/query?";
    if (isStringArg(this._networkCode) && this._networkCode.length > 0 && this._networkCode !== "*") {
      url = url + makeParam("net", this._networkCode);
    }
    if (isStringArg(this._stationCode) && this._stationCode.length > 0 && this._stationCode !== "*") {
      url = url + makeParam("sta", this._stationCode);
    }
    if (isStringArg(this._locationCode) && this._locationCode.length > 0 && this._locationCode !== "*") {
      url = url + makeParam("loc", this._locationCode);
    }
    if (isStringArg(this._channelCode) && this._channelCode.length > 0 && this._channelCode !== "*") {
      url = url + makeParam("cha", this._channelCode);
    }
    if (this._startTime) {
      url = url + makeParam("starttime", toIsoWoZ(this._startTime));
    }
    if (this._endTime) {
      url = url + makeParam("endtime", toIsoWoZ(this._endTime));
    }
    if (this._quality) {
      url = url + makeParam("quality", this._quality);
    }
    if (this._minimumLength) {
      url = url + makeParam("minimumlength", this._minimumLength);
    }
    if (this._repository) {
      url = url + makeParam("repository", this._repository);
    }
    if (this._longestOnly) {
      url = url + makeParam("longestonly", this._longestOnly);
    }
    if (this._format) {
      url = url + makeParam("format", this._format);
    }
    if (this._nodata) {
      url = url + makeParam("nodata", this._nodata);
    }
    if (url.endsWith("&") || url.endsWith("?")) {
      url = url.substr(0, url.length - 1);
    }
    return url;
  }
};
function createDataSelectQuery(params) {
  if (!params || typeof params !== "object") {
    throw new Error("params null or not an object");
  }
  const out = new DataSelectQuery();
  if (params.net) {
    out.networkCode(params.net);
  }
  if (params.network) {
    out.networkCode(params.network);
  }
  if (params.networkCode) {
    out.networkCode(params.networkCode);
  }
  if (params.sta) {
    out.stationCode(params.sta);
  }
  if (params.station) {
    out.stationCode(params.station);
  }
  if (params.stationCode) {
    out.stationCode(params.stationCode);
  }
  if (params.loc) {
    out.locationCode(params.loc);
  }
  if (params.location) {
    out.locationCode(params.location);
  }
  if (params.locationCode) {
    out.locationCode(params.locationCode);
  }
  if (params.chan) {
    out.channelCode(params.chan);
  }
  if (params.channel) {
    out.channelCode(params.channel);
  }
  if (params.channelCode) {
    out.channelCode(params.channelCode);
  }
  if (params.start) {
    out.startTime(params.start);
  }
  if (params.starttime) {
    out.startTime(params.starttime);
  }
  if (params.end) {
    out.endTime(params.end);
  }
  if (params.endtime) {
    out.endTime(params.endtime);
  }
  if (params.quality) {
    out.quality(params.quality);
  }
  if (params.minimumlength) {
    out.minimumLength(params.minimumlength);
  }
  if (params.repository) {
    out.repository(params.repository);
  }
  if (params.longestonly) {
    out.longestOnly(params.longestonly);
  }
  if (params.format) {
    out.format(params.format);
  }
  if (params.nodata) {
    out.nodata(params.nodata);
  }
  if (params.host) {
    out.host(params.host);
  }
  if (params.port) {
    out.port(params.port);
  }
  if (params.specVersion) {
    out.specVersion(params.specVersion);
  }
  return out;
}

// src/fdsnevent.ts
var fdsnevent_exports = {};
__export(fdsnevent_exports, {
  EarthquakeSearch: () => EarthquakeSearch,
  EventQuery: () => EventQuery,
  FAKE_EMPTY_XML: () => FAKE_EMPTY_XML,
  SERVICE_NAME: () => SERVICE_NAME3,
  SERVICE_VERSION: () => SERVICE_VERSION3,
  USGS_HOST: () => USGS_HOST
});
var SERVICE_VERSION3 = 1;
var SERVICE_NAME3 = `fdsnws-event-${SERVICE_VERSION3}`;
var FAKE_EMPTY_XML = '<?xml version="1.0"?><q:quakeml xmlns="http://quakeml.org/xmlns/bed/1.2" xmlns:q="http://quakeml.org/xmlns/quakeml/1.2"><eventParameters publicID="quakeml:fake/empty"></eventParameters></q:quakeml>';
var EventQuery = class extends FDSNCommon {
  constructor(host) {
    if (!isNonEmptyStringArg(host)) {
      host = USGS_HOST;
    }
    super(host);
    __publicField(this, "_eventId");
    __publicField(this, "_startTime");
    __publicField(this, "_endTime");
    __publicField(this, "_updatedAfter");
    __publicField(this, "_minMag");
    __publicField(this, "_maxMag");
    __publicField(this, "_magnitudeType");
    __publicField(this, "_minDepth");
    __publicField(this, "_maxDepth");
    __publicField(this, "_minLat");
    __publicField(this, "_maxLat");
    __publicField(this, "_minLon");
    __publicField(this, "_maxLon");
    __publicField(this, "_latitude");
    __publicField(this, "_longitude");
    __publicField(this, "_minRadius");
    __publicField(this, "_maxRadius");
    __publicField(this, "_includeArrivals");
    __publicField(this, "_includeAllOrigins");
    __publicField(this, "_includeAllMagnitudes");
    __publicField(this, "_limit");
    __publicField(this, "_offset");
    __publicField(this, "_orderBy");
    __publicField(this, "_contributor");
    __publicField(this, "_catalog");
    __publicField(this, "_format");
  }
  specVersion(value) {
    doStringGetterSetter(this, "specVersion", value);
    return this;
  }
  getSpecVersion() {
    return this._specVersion;
  }
  protocol(value) {
    doStringGetterSetter(this, "protocol", value);
    return this;
  }
  getProtocol() {
    return this._protocol;
  }
  host(value) {
    doStringGetterSetter(this, "host", value);
    return this;
  }
  getHost() {
    return this._host;
  }
  port(value) {
    doIntGetterSetter(this, "port", value);
    return this;
  }
  getPort() {
    return this._port;
  }
  nodata(value) {
    doIntGetterSetter(this, "nodata", value);
    return this;
  }
  getNodata() {
    return this._nodata;
  }
  timeout(value) {
    doFloatGetterSetter(this, "timeoutSec", value);
    return this;
  }
  getTimeout() {
    return this._timeoutSec;
  }
  eventId(value) {
    doStringGetterSetter(this, "eventId", value);
    return this;
  }
  getEventId() {
    return this._eventId;
  }
  startTime(value) {
    doMomentGetterSetter(this, "startTime", value);
    return this;
  }
  getStartTime() {
    return this._startTime;
  }
  endTime(value) {
    doMomentGetterSetter(this, "endTime", value);
    return this;
  }
  getEndTime() {
    return this._endTime;
  }
  timeRange(se) {
    this.startTime(se.start);
    this.endTime(se.end);
    return this;
  }
  timeWindow(se) {
    return this.timeRange(se);
  }
  updatedAfter(value) {
    doMomentGetterSetter(this, "updatedAfter", value);
    return this;
  }
  getUpdatedAfter() {
    return this._updatedAfter;
  }
  minMag(value) {
    doFloatGetterSetter(this, "minMag", value);
    return this;
  }
  getMinMag() {
    return this._minMag;
  }
  maxMag(value) {
    doFloatGetterSetter(this, "maxMag", value);
    return this;
  }
  getMaxMag() {
    return this._maxMag;
  }
  magnitudeType(value) {
    doStringGetterSetter(this, "magnitudeType", value);
    return this;
  }
  getMagnitudeType() {
    return this._magnitudeType;
  }
  minDepth(value) {
    doFloatGetterSetter(this, "minDepth", value);
    return this;
  }
  getMinDepth() {
    return this._minDepth;
  }
  maxDepth(value) {
    doFloatGetterSetter(this, "maxDepth", value);
    return this;
  }
  getMaxDepth() {
    return this._maxDepth;
  }
  minLat(value) {
    doFloatGetterSetter(this, "minLat", value);
    return this;
  }
  getMinLat() {
    return this._minLat;
  }
  maxLat(value) {
    doFloatGetterSetter(this, "maxLat", value);
    return this;
  }
  getMaxLat() {
    return this._maxLat;
  }
  minLon(value) {
    doFloatGetterSetter(this, "minLon", value);
    return this;
  }
  getMinLon() {
    return this._minLon;
  }
  maxLon(value) {
    doFloatGetterSetter(this, "maxLon", value);
    return this;
  }
  getMaxLon() {
    return this._maxLon;
  }
  latitude(value) {
    doFloatGetterSetter(this, "latitude", value);
    return this;
  }
  getLatitude() {
    return this._latitude;
  }
  longitude(value) {
    doFloatGetterSetter(this, "longitude", value);
    return this;
  }
  getLongitude() {
    return this._longitude;
  }
  minRadius(value) {
    doFloatGetterSetter(this, "minRadius", value);
    return this;
  }
  getMinRadius() {
    return this._minRadius;
  }
  maxRadius(value) {
    doFloatGetterSetter(this, "maxRadius", value);
    return this;
  }
  getMaxRadius() {
    return this._maxRadius;
  }
  includeArrivals(value) {
    doBoolGetterSetter(this, "includeArrivals", value);
    return this;
  }
  getIncludeArrivals() {
    return this._includeArrivals;
  }
  includeAllOrigins(value) {
    doBoolGetterSetter(this, "includeAllOrigins", value);
    return this;
  }
  getIncludeAllOrigins() {
    return this._includeAllOrigins;
  }
  includeAllMagnitudes(value) {
    doBoolGetterSetter(this, "includeAllMagnitudes", value);
    return this;
  }
  getIncludeAllMagnitudes() {
    return this._includeAllMagnitudes;
  }
  format(value) {
    doStringGetterSetter(this, "format", value);
    return this;
  }
  getFormat() {
    return this._format;
  }
  limit(value) {
    doIntGetterSetter(this, "limit", value);
    return this;
  }
  getLimit() {
    return this._limit;
  }
  offset(value) {
    doIntGetterSetter(this, "offset", value);
    return this;
  }
  getOffset() {
    return this._offset;
  }
  orderBy(value) {
    doStringGetterSetter(this, "orderBy", value);
    return this;
  }
  getOrderBy() {
    return this._orderBy;
  }
  catalog(value) {
    doStringGetterSetter(this, "catalog", value);
    return this;
  }
  getCatalog() {
    return this._catalog;
  }
  contributor(value) {
    doStringGetterSetter(this, "contributor", value);
    return this;
  }
  getContributor() {
    return this._contributor;
  }
  latLonRegion(value) {
    if (value instanceof LatLonBox) {
      this._minLat = value.south;
      this._maxLat = value.north;
      this._minLon = value.west;
      this._maxLon = value.east;
      this._latitude = void 0;
      this._longitude = void 0;
      this._minRadius = void 0;
      this._maxRadius = void 0;
    } else if (value instanceof LatLonRadius) {
      this._latitude = value.latitude;
      this._longitude = value.longitude;
      this._minRadius = value.minRadius;
      this._maxRadius = value.maxRadius;
      this._minLat = void 0;
      this._maxLat = void 0;
      this._minLon = void 0;
      this._maxLon = void 0;
    } else if (!isDef(value)) {
      this._latitude = void 0;
      this._longitude = void 0;
      this._minRadius = void 0;
      this._maxRadius = void 0;
      this._minLat = void 0;
      this._maxLat = void 0;
      this._minLon = void 0;
      this._maxLon = void 0;
    } else {
      throw new Error(
        `value argument is optional or LatLonRegion, but was type ${typeof value}, '${value}' `
      );
    }
    return this;
  }
  isSomeParameterSet() {
    return isDef(this._eventId) || isDef(this._startTime) || isDef(this._endTime) || isDef(this._minLat) || isDef(this._maxLat) || isDef(this._minLon) || isDef(this._maxLon) || isDef(this._latitude) || isDef(this._longitude) || isDef(this._minRadius) || isDef(this._maxRadius) || isDef(this._minDepth) || isDef(this._maxDepth) || isDef(this._limit) || isDef(this._minMag) || isDef(this._maxMag) || isDef(this._updatedAfter) || isDef(this._catalog) || isDef(this._contributor);
  }
  query() {
    return this.queryRawXml().then((rawXml) => {
      return parseQuakeML(rawXml, this._host);
    });
  }
  queryRawXml() {
    const mythis = this;
    if (!this.isSomeParameterSet()) {
      throw new Error(
        "Must set some parameter to avoid asking for everything."
      );
    }
    const url = this.formURL();
    const fetchInit = defaultFetchInitObj(XML_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then((response) => {
      if (response.status === 200) {
        return response.text();
      } else if (response.status === 204 || isDef(mythis._nodata) && response.status === mythis._nodata) {
        return FAKE_EMPTY_XML;
      } else {
        throw new Error(`Status not successful: ${response.status}`);
      }
    }).then(function(rawXmlText) {
      return new DOMParser().parseFromString(rawXmlText, XML_MIME);
    });
  }
  formBaseURL() {
    let colon = ":";
    if (!this._host || this._host === USGS_HOST) {
      this._host = USGS_HOST;
      this._protocol = "https:";
    }
    if (this._protocol.endsWith(colon)) {
      colon = "";
    }
    return this._protocol + colon + "//" + this._host + (this._port === 80 ? "" : ":" + this._port) + "/fdsnws/event/" + this._specVersion;
  }
  formCatalogsURL() {
    return this.formBaseURL() + "/catalogs";
  }
  queryCatalogs() {
    const mythis = this;
    const url = mythis.formCatalogsURL();
    const fetchInit = defaultFetchInitObj(XML_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then((response) => {
      if (response.status === 200) {
        return response.text();
      } else {
        throw new Error(`Status not 200: ${response.status}`);
      }
    }).then(function(rawXmlText) {
      return new DOMParser().parseFromString(rawXmlText, XML_MIME);
    }).then(function(rawXml) {
      if (!rawXml) {
        throw new Error("raw xml from DOMParser is null.");
      }
      const top2 = rawXml.documentElement;
      if (!top2) {
        throw new Error("documentElement in xml from DOMParser is null.");
      }
      const catalogArray = top2.getElementsByTagName("Catalog");
      const out = [];
      if (catalogArray) {
        for (let i = 0; i < catalogArray.length; i++) {
          const item = catalogArray.item(i);
          if (item && isDef(item.textContent)) {
            out.push(item.textContent);
          }
        }
      }
      return out;
    });
  }
  formContributorsURL() {
    return this.formBaseURL() + "/contributors";
  }
  queryContributors() {
    const url = this.formContributorsURL();
    const fetchInit = defaultFetchInitObj(XML_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then((response) => {
      if (response.status === 200) {
        return response.text();
      } else {
        throw new Error(`Status not 200: ${response.status}`);
      }
    }).then(function(rawXmlText) {
      return new DOMParser().parseFromString(rawXmlText, XML_MIME);
    }).then(function(rawXml) {
      const top2 = rawXml.documentElement;
      if (!top2) {
        throw new Error("documentElement in xml from DOMParser is null.");
      }
      const contributorArray = top2.getElementsByTagName("Contributor");
      const out = [];
      if (contributorArray) {
        for (let i = 0; i < contributorArray.length; i++) {
          const item = contributorArray.item(i);
          if (item && isDef(item.textContent)) {
            out.push(item.textContent);
          }
        }
      }
      return out;
    });
  }
  formVersionURL() {
    return this.formBaseURL() + "/version";
  }
  queryVersion() {
    const url = this.formVersionURL();
    const fetchInit = defaultFetchInitObj(TEXT_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(
      (response) => {
        if (response.status === 200) {
          return response.text();
        } else {
          throw new Error(`Status not 200: ${response.status}`);
        }
      }
    );
  }
  formURL() {
    let colon = ":";
    if (this._protocol.endsWith(colon)) {
      colon = "";
    }
    let url = this.formBaseURL() + "/query?";
    if (this._eventId) {
      url = url + makeParam("eventid", this._eventId);
    }
    if (this._startTime) {
      url = url + makeParam("starttime", toIsoWoZ(this._startTime));
    }
    if (this._endTime) {
      url = url + makeParam("endtime", toIsoWoZ(this._endTime));
    }
    if (isNumArg(this._minMag)) {
      url = url + makeParam("minmag", this._minMag);
    }
    if (isNumArg(this._maxMag)) {
      url = url + makeParam("maxmag", this._maxMag);
    }
    if (isStringArg(this._magnitudeType)) {
      url = url + makeParam("magnitudetype", this._magnitudeType);
    }
    if (isNumArg(this._minDepth)) {
      url = url + makeParam("mindepth", this._minDepth);
    }
    if (isNumArg(this._maxDepth)) {
      url = url + makeParam("maxdepth", this._maxDepth);
    }
    if (isNumArg(this._minLat)) {
      url = url + makeParam("minlat", this._minLat);
    }
    if (isNumArg(this._maxLat)) {
      url = url + makeParam("maxlat", this._maxLat);
    }
    if (isNumArg(this._minLon)) {
      url = url + makeParam("minlon", this._minLon);
    }
    if (isNumArg(this._maxLon)) {
      url = url + makeParam("maxlon", this._maxLon);
    }
    if (isNumArg(this._minRadius) || isNumArg(this._maxRadius)) {
      if (isNumArg(this._latitude) && isNumArg(this._longitude)) {
        url = url + makeParam("latitude", this._latitude) + makeParam("longitude", this._longitude);
        if (isNumArg(this._minRadius)) {
          url = url + makeParam("minradius", this._minRadius);
        }
        if (isNumArg(this._maxRadius)) {
          url = url + makeParam("maxradius", this._maxRadius);
        }
      } else {
        throw new Error(
          "Cannot use minRadius or maxRadius without latitude and longitude: lat=" + this._latitude + " lon=" + this._longitude
        );
      }
    }
    if (this._includeArrivals) {
      if (this._host !== USGS_HOST) {
        url = url + "includearrivals=true&";
      } else {
        if (this._eventId) {
        } else {
          throw new Error(
            "USGS host, earthquake.usgs.gov, does not support includearrivals parameter."
          );
        }
      }
    }
    if (isObject(this._updatedAfter)) {
      url = url + makeParam("updatedafter", this._updatedAfter);
    }
    if (isDef(this._includeAllOrigins)) {
      url = url + makeParam("includeallorigins", this._includeAllOrigins);
    }
    if (isDef(this._includeAllMagnitudes)) {
      url = url + makeParam("includeallmagnitudes", this._includeAllMagnitudes);
    }
    if (isStringArg(this._format)) {
      url = url + makeParam("format", this._format);
    }
    if (isNumArg(this._limit)) {
      url = url + makeParam("limit", this._limit);
    }
    if (isNumArg(this._offset)) {
      url = url + makeParam("offset", this._offset);
    }
    if (isStringArg(this._orderBy)) {
      url = url + makeParam("orderby", this._orderBy);
    }
    if (isStringArg(this._catalog)) {
      url = url + makeParam("catalog", this._catalog);
    }
    if (isStringArg(this._contributor)) {
      url = url + makeParam("contributor", this._contributor);
    }
    if (isDef(this._nodata)) {
      url = url + makeParam("nodata", this._nodata);
    }
    if (url.endsWith("&") || url.endsWith("?")) {
      url = url.substr(0, url.length - 1);
    }
    return url;
  }
};
var eqsearchHtml = `
<div class="wrapper">
  <div>
  <label>Time Range </label>
  <sp-timerange duration="P7D"></sp-timerange>
  <button id="now">Now</button></div>
  <div>
  <button id="today">Today</button>
  <button id="week">Week</button>
  <button id="month">Month</button>
  <button id="year">Year</button>
  </div>
  <div>
    <label>Geo:</label>
    <sp-latlon-choice></sp-latlon-choice>
  </div>
  <div><label>Magnitude</label><sp-minmax id="magnitude" min="-1" max="10"></sp-minmax></div>
  <div><label>Depth</label><sp-minmax id="depth" min="0" max="1000"></sp-minmax><label>km</label></div>
</div>
`;
var EarthquakeSearch = class extends HTMLElement {
  constructor() {
    super();
    const shadow = this.attachShadow({ mode: "open" });
    this.draw_element(shadow);
  }
  _registerEvent(wrapper, sel) {
    const mythis = this;
    const component = wrapper.querySelector(sel);
    if (!component) {
      throw new Error(`can't find ${sel}`);
    }
    component.addEventListener("change", () => mythis.dispatchEvent(new Event("change")));
  }
  draw_element(shadow) {
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    wrapper.innerHTML = eqsearchHtml;
    shadow.appendChild(wrapper);
    this._registerEvent(wrapper, "sp-timerange");
    this._registerEvent(wrapper, "sp-latlon-choice");
    this._registerEvent(wrapper, "sp-minmax#magnitude");
    this._registerEvent(wrapper, "sp-minmax#depth");
    const trChooser = wrapper.querySelector("sp-timerange");
    if (!trChooser) {
      throw new Error("can't find sp-timerange");
    }
    const nowBtn = wrapper.querySelector("#now");
    if (!nowBtn) {
      throw new Error("can't find button#now");
    }
    nowBtn.addEventListener("click", (event) => {
      trChooser.end = DateTime.utc();
    });
    const todayBtn = wrapper.querySelector("#today");
    if (!todayBtn) {
      throw new Error("can't find button#today");
    }
    todayBtn.addEventListener("click", (event) => {
      trChooser.duration = Duration.fromISO("P1D");
    });
    const weekBtn = wrapper.querySelector("#week");
    if (!weekBtn) {
      throw new Error("can't find button#week");
    }
    weekBtn.addEventListener("click", (event) => {
      trChooser.duration = Duration.fromISO("P7D");
    });
    const monthBtn = wrapper.querySelector("#month");
    if (!monthBtn) {
      throw new Error("can't find button#month");
    }
    monthBtn.addEventListener("click", (event) => {
      trChooser.duration = Duration.fromISO("P1M");
    });
    const yearBtn = wrapper.querySelector("#year");
    if (!yearBtn) {
      throw new Error("can't find button#year");
    }
    yearBtn.addEventListener("click", (event) => {
      trChooser.duration = Duration.fromISO("P1Y");
    });
  }
  populateQuery(query) {
    if (!query) {
      query = new EventQuery();
    }
    const wrapper = this.shadowRoot?.querySelector("div");
    const trChooser = wrapper.querySelector("sp-timerange");
    if (!trChooser) {
      throw new Error("can't find sp-timerange");
    }
    query.startTime(trChooser.start);
    query.endTime(trChooser.end);
    const latlonchoice = wrapper.querySelector("sp-latlon-choice");
    const choosenLatLon = latlonchoice.choosen();
    if (choosenLatLon instanceof LatLonBoxEl) {
      const latlonbox = choosenLatLon;
      if (latlonbox.south > -90) {
        query.minLat(latlonbox.south);
      }
      if (latlonbox.north < 90) {
        query.maxLat(latlonbox.north);
      }
      if (latlonbox.west > -180 && latlonbox.west + 360 !== latlonbox.east) {
        query.minLon(latlonbox.west);
      }
      if (latlonbox.east < 360 && latlonbox.west + 360 !== latlonbox.east) {
        query.maxLon(latlonbox.east);
      }
    } else if (choosenLatLon instanceof LatLonRadiusEl) {
      const latlonrad = choosenLatLon;
      if (latlonrad.minRadius > 0 || latlonrad.maxRadius < 180) {
        query.latitude(latlonrad.latitude);
        query.longitude(latlonrad.longitude);
        if (latlonrad.minRadius > 0) {
          query.minRadius(latlonrad.minRadius);
        }
        if (latlonrad.maxRadius < 180) {
          query.maxRadius(latlonrad.maxRadius);
        }
      }
    } else {
      console.log(`latlon choice is: ${choosenLatLon}`);
    }
    const mag = wrapper.querySelector("sp-minmax#magnitude");
    if (mag.min > 0) {
      query.minMag(mag.min);
    }
    if (mag.max < 10) {
      query.maxMag(mag.max);
    }
    const depth = wrapper.querySelector("sp-minmax#depth");
    if (depth.min > 0) {
      query.minDepth(depth.min);
    }
    if (depth.max < 1e3) {
      query.maxDepth(depth.max);
    }
    return query;
  }
};
customElements.define("sp-earthquake-search", EarthquakeSearch);

// src/fdsnstation.ts
var fdsnstation_exports = {};
__export(fdsnstation_exports, {
  CHANNEL_SEARCH_ELEMENT: () => CHANNEL_SEARCH_ELEMENT,
  ChannelSearch: () => ChannelSearch,
  FAKE_EMPTY_XML: () => FAKE_EMPTY_XML2,
  IRIS_HOST: () => IRIS_HOST,
  LEVELS: () => LEVELS,
  LEVEL_CHANNEL: () => LEVEL_CHANNEL,
  LEVEL_NETWORK: () => LEVEL_NETWORK,
  LEVEL_RESPONSE: () => LEVEL_RESPONSE,
  LEVEL_STATION: () => LEVEL_STATION,
  SERVICE_NAME: () => SERVICE_NAME4,
  SERVICE_VERSION: () => SERVICE_VERSION4,
  StationQuery: () => StationQuery
});
var LEVEL_NETWORK = "network";
var LEVEL_STATION = "station";
var LEVEL_CHANNEL = "channel";
var LEVEL_RESPONSE = "response";
var LEVELS = [
  LEVEL_NETWORK,
  LEVEL_STATION,
  LEVEL_CHANNEL,
  LEVEL_RESPONSE
];
var SERVICE_VERSION4 = 1;
var SERVICE_NAME4 = `fdsnws-station-${SERVICE_VERSION4}`;
var FAKE_EMPTY_XML2 = '<?xml version="1.0" encoding="ISO-8859-1"?> <FDSNStationXML xmlns="http://www.fdsn.org/xml/station/1" schemaVersion="1.0" xsi:schemaLocation="http://www.fdsn.org/xml/station/1 http://www.fdsn.org/xml/station/fdsn-station-1.0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:iris="http://www.fdsn.org/xml/station/1/iris"> </FDSNStationXML>';
var StationQuery = class extends FDSNCommon {
  constructor(host) {
    super(host);
    __publicField(this, "_networkCode");
    __publicField(this, "_stationCode");
    __publicField(this, "_locationCode");
    __publicField(this, "_channelCode");
    __publicField(this, "_startTime");
    __publicField(this, "_endTime");
    __publicField(this, "_startBefore");
    __publicField(this, "_endBefore");
    __publicField(this, "_startAfter");
    __publicField(this, "_endAfter");
    __publicField(this, "_minLat");
    __publicField(this, "_maxLat");
    __publicField(this, "_minLon");
    __publicField(this, "_maxLon");
    __publicField(this, "_latitude");
    __publicField(this, "_longitude");
    __publicField(this, "_minRadius");
    __publicField(this, "_maxRadius");
    __publicField(this, "_includeRestricted");
    __publicField(this, "_includeAvailability");
    __publicField(this, "_format");
    __publicField(this, "_updatedAfter");
    __publicField(this, "_matchTimeseries");
  }
  specVersion(value) {
    doStringGetterSetter(this, "specVersion", value);
    return this;
  }
  getSpecVersion() {
    return this._specVersion;
  }
  protocol(value) {
    doStringGetterSetter(this, "protocol", value);
    return this;
  }
  getProtocol() {
    return this._protocol;
  }
  host(value) {
    doStringGetterSetter(this, "host", value);
    return this;
  }
  getHost() {
    return this._host;
  }
  port(value) {
    doIntGetterSetter(this, "port", value);
    return this;
  }
  getPort() {
    return this._port;
  }
  nodata(value) {
    doIntGetterSetter(this, "nodata", value);
    return this;
  }
  getNodata() {
    return this._nodata;
  }
  networkCode(value) {
    doStringGetterSetter(this, "networkCode", value);
    return this;
  }
  getNetworkCode() {
    return this._networkCode;
  }
  stationCode(value) {
    doStringGetterSetter(this, "stationCode", value);
    return this;
  }
  getStationCode() {
    return this._stationCode;
  }
  locationCode(value) {
    doStringGetterSetter(this, "locationCode", value);
    return this;
  }
  getLocationCode() {
    return this._locationCode;
  }
  channelCode(value) {
    doStringGetterSetter(this, "channelCode", value);
    return this;
  }
  getChannelCode() {
    return this._channelCode;
  }
  startTime(value) {
    doMomentGetterSetter(this, "startTime", value);
    return this;
  }
  getStartTime() {
    return this._startTime;
  }
  endTime(value) {
    doMomentGetterSetter(this, "endTime", value);
    return this;
  }
  getEndTime() {
    return this._endTime;
  }
  timeRange(se) {
    this.startTime(se.start);
    this.endTime(se.end);
    return this;
  }
  timeWindow(se) {
    return this.timeRange(se);
  }
  startBefore(value) {
    doMomentGetterSetter(this, "startBefore", value);
    return this;
  }
  getStartBefore() {
    return this._startBefore;
  }
  endBefore(value) {
    doMomentGetterSetter(this, "endBefore", value);
    return this;
  }
  getEndBefore() {
    return this._endBefore;
  }
  startAfter(value) {
    doMomentGetterSetter(this, "startAfter", value);
    return this;
  }
  getStartAfter() {
    return this._startAfter;
  }
  endAfter(value) {
    doMomentGetterSetter(this, "endAfter", value);
    return this;
  }
  getEndAfter() {
    return this._endAfter;
  }
  minLat(value) {
    doFloatGetterSetter(this, "minLat", value);
    return this;
  }
  getMinLat() {
    return this._minLat;
  }
  maxLat(value) {
    doFloatGetterSetter(this, "maxLat", value);
    return this;
  }
  getMaxLat() {
    return this._maxLat;
  }
  minLon(value) {
    doFloatGetterSetter(this, "minLon", value);
    return this;
  }
  getMinLon() {
    return this._minLon;
  }
  maxLon(value) {
    doFloatGetterSetter(this, "maxLon", value);
    return this;
  }
  getMaxLon() {
    return this._maxLon;
  }
  latitude(value) {
    doFloatGetterSetter(this, "latitude", value);
    return this;
  }
  getLatitude() {
    return this._latitude;
  }
  longitude(value) {
    doFloatGetterSetter(this, "longitude", value);
    return this;
  }
  getLongitude() {
    return this._longitude;
  }
  minRadius(value) {
    doFloatGetterSetter(this, "minRadius", value);
    return this;
  }
  getMinRadius() {
    return this._minRadius;
  }
  maxRadius(value) {
    doFloatGetterSetter(this, "maxRadius", value);
    return this;
  }
  getMaxRadius() {
    return this._maxRadius;
  }
  includeRestricted(value) {
    doBoolGetterSetter(this, "includeRestricted", value);
    return this;
  }
  getIncludeRestricted() {
    return this._includeRestricted;
  }
  includeAvailability(value) {
    doBoolGetterSetter(this, "includeAvailability", value);
    return this;
  }
  getIncludeAvailability() {
    return this._includeAvailability;
  }
  format(value) {
    doStringGetterSetter(this, "format", value);
    return this;
  }
  getFormat() {
    return this._format;
  }
  updatedAfter(value) {
    doMomentGetterSetter(this, "updatedAfter", value);
    return this;
  }
  getUpdatedAfter() {
    return this._updatedAfter;
  }
  matchTimeseries(value) {
    doBoolGetterSetter(this, "matchTimeseries", value);
    return this;
  }
  getMatchTimeseries() {
    return this._matchTimeseries;
  }
  latLonRegion(value) {
    if (value instanceof LatLonBox) {
      this._minLat = value.south;
      this._maxLat = value.north;
      this._minLon = value.west;
      this._maxLon = value.east;
      this._latitude = void 0;
      this._longitude = void 0;
      this._minRadius = void 0;
      this._maxRadius = void 0;
    } else if (value instanceof LatLonRadius) {
      this._latitude = value.latitude;
      this._longitude = value.longitude;
      this._minRadius = value.minRadius;
      this._maxRadius = value.maxRadius;
      this._minLat = void 0;
      this._maxLat = void 0;
      this._minLon = void 0;
      this._maxLon = void 0;
    } else if (!isDef(value)) {
      this._latitude = void 0;
      this._longitude = void 0;
      this._minRadius = void 0;
      this._maxRadius = void 0;
      this._minLat = void 0;
      this._maxLat = void 0;
      this._minLon = void 0;
      this._maxLon = void 0;
    } else {
      throw new Error(
        `value argument is optional or LatLonRegion, but was type ${typeof value}, '${value}' `
      );
    }
    return this;
  }
  nslcCodes(channelId) {
    this.networkCode(channelId.networkCode);
    this.stationCode(channelId.stationCode);
    this.locationCode(channelId.locationCode);
    this.channelCode(channelId.channelCode);
    return this;
  }
  timeout(value) {
    doFloatGetterSetter(this, "timeoutSec", value);
    return this;
  }
  getTimeout() {
    return this._timeoutSec;
  }
  isSomeParameterSet() {
    return isDef(this._networkCode) && this._networkCode.length > 0 && this._networkCode !== "*" || isDef(this._stationCode) && this._stationCode.length > 0 && this._stationCode !== "*" || isDef(this._locationCode) && this._locationCode.length > 0 && this._locationCode !== "*" || isDef(this._channelCode) && this._channelCode.length > 0 && this._channelCode !== "*" || isDef(this._startTime) || isDef(this._endTime) || isDef(this._startBefore) || isDef(this._endBefore) || isDef(this._startAfter) || isDef(this._endAfter) || isDef(this._minLat) || isDef(this._maxLat) || isDef(this._minLon) || isDef(this._maxLon) || isDef(this._latitude) || isDef(this._longitude) || isDef(this._minRadius) || isDef(this._maxRadius) || isDef(this._updatedAfter);
  }
  queryNetworks() {
    return this.query(LEVEL_NETWORK);
  }
  queryStations() {
    return this.query(LEVEL_STATION);
  }
  queryChannels() {
    return this.query(LEVEL_CHANNEL);
  }
  queryResponses() {
    return this.query(LEVEL_RESPONSE);
  }
  query(level) {
    if (!LEVELS.includes(level)) {
      throw new Error("Unknown level: '" + level + "'");
    }
    return this.queryRawXml(level).then(function(rawXml) {
      return parseStationXml(rawXml);
    });
  }
  postQueryNetworks(postLines) {
    return this.postQueryRawXml(LEVEL_NETWORK, postLines).then(function(rawXml) {
      return parseStationXml(rawXml);
    });
  }
  postQueryStations(postLines) {
    return this.postQueryRawXml(LEVEL_STATION, postLines).then(function(rawXml) {
      return parseStationXml(rawXml);
    });
  }
  postQueryChannels(postLines) {
    return this.postQueryRawXml(LEVEL_CHANNEL, postLines).then(function(rawXml) {
      return parseStationXml(rawXml);
    });
  }
  postQueryResponses(postLines) {
    return this.postQueryRawXml(LEVEL_RESPONSE, postLines).then(function(rawXml) {
      return parseStationXml(rawXml);
    });
  }
  postQuery(level, postLines) {
    if (!LEVELS.includes(level)) {
      throw new Error("Unknown level: '" + level + "'");
    }
    return this.postQueryRawXml(level, postLines).then(function(rawXml) {
      return parseStationXml(rawXml);
    });
  }
  queryRawXml(level) {
    return this.queryRawXmlText(level).then(function(rawXmlText) {
      return new DOMParser().parseFromString(rawXmlText, "text/xml");
    });
  }
  queryRawXmlText(level) {
    const mythis = this;
    if (!this.isSomeParameterSet()) {
      throw new Error(
        "Must set some parameter to avoid asking for everything."
      );
    }
    const url = this.formURL(level);
    const fetchInit = defaultFetchInitObj(XML_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then((response) => {
      if (response.status === 200) {
        return response.text();
      } else if (response.status === 204 || isDef(mythis._nodata) && response.status === mythis._nodata) {
        return FAKE_EMPTY_XML2;
      } else {
        throw new Error(`Status not successful: ${response.status}`);
      }
    });
  }
  postQueryRawXml(level, postLines) {
    if (postLines.length === 0) {
      return Promise.resolve(FAKE_EMPTY_XML2).then(function(rawXmlText) {
        return new DOMParser().parseFromString(rawXmlText, "text/xml");
      });
    } else {
      const mythis = this;
      const fetchInit = defaultFetchInitObj(XML_MIME);
      fetchInit.method = "POST";
      fetchInit.body = this.createPostBody(level, postLines);
      return doFetchWithTimeout(
        this.formPostURL(),
        fetchInit,
        this._timeoutSec * 1e3
      ).then((response) => {
        if (response.status === 200) {
          return response.text();
        } else if (response.status === 204 || isDef(mythis._nodata) && response.status === mythis._nodata) {
          return FAKE_EMPTY_XML2;
        } else {
          throw new Error(`Status not successful: ${response.status}`);
        }
      }).then(function(rawXmlText) {
        return new DOMParser().parseFromString(rawXmlText, "text/xml");
      });
    }
  }
  createPostBody(level, postLines = []) {
    let out = "";
    if (!isStringArg(level)) {
      throw new Error(
        "level not specified, should be one of network, station, channel, response."
      );
    }
    out = out + makePostParam("level", level);
    if (isObject(this._startBefore)) {
      out = out + makePostParam("startbefore", toIsoWoZ(this._startBefore));
    }
    if (isObject(this._startAfter)) {
      out = out + makePostParam("startafter", toIsoWoZ(this._startAfter));
    }
    if (isObject(this._endBefore)) {
      out = out + makePostParam("endbefore", toIsoWoZ(this._endBefore));
    }
    if (isObject(this._endAfter)) {
      out = out + makePostParam("endafter", toIsoWoZ(this._endAfter));
    }
    if (isNumArg(this._minLat)) {
      out = out + makePostParam("minlat", this._minLat);
    }
    if (isNumArg(this._maxLat)) {
      out = out + makePostParam("maxlat", this._maxLat);
    }
    if (isNumArg(this._minLon)) {
      out = out + makePostParam("minlon", this._minLon);
    }
    if (isNumArg(this._maxLon)) {
      out = out + makePostParam("maxlon", this._maxLon);
    }
    if (isNumArg(this._latitude)) {
      out = out + makePostParam("lat", this._latitude);
    }
    if (isNumArg(this._longitude)) {
      out = out + makePostParam("lon", this._longitude);
    }
    if (isNumArg(this._minRadius)) {
      out = out + makePostParam("minradius", this._minRadius);
    }
    if (isNumArg(this._maxRadius)) {
      out = out + makePostParam("maxradius", this._maxRadius);
    }
    if (isDef(this._includeRestricted)) {
      out = out + makePostParam("includerestricted", this._includeRestricted);
    }
    if (isDef(this._includeAvailability)) {
      out = out + makePostParam("includeavailability", this._includeAvailability);
    }
    if (isObject(this._updatedAfter)) {
      out = out + makePostParam("updatedafter", toIsoWoZ(this._updatedAfter));
    }
    if (isDef(this._matchTimeseries)) {
      out = out + makePostParam("matchtimeseries", this._matchTimeseries);
    }
    if (isStringArg(this._format)) {
      out = out + makePostParam("format", this._format);
    }
    if (isNumArg(this._nodata)) {
      out = out + makePostParam("nodata", this._nodata);
    }
    postLines.forEach((line) => out = out + line.trim() + "\n");
    return out;
  }
  formVersionURL() {
    return this.formBaseURL() + "/version";
  }
  queryVersion() {
    const url = this.formVersionURL();
    const fetchInit = defaultFetchInitObj(TEXT_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(
      (response) => {
        if (response.status === 200) {
          return response.text();
        } else {
          throw new Error(`Status not 200: ${response.status}`);
        }
      }
    );
  }
  formBaseURL() {
    let colon = ":";
    if (this._protocol.endsWith(colon)) {
      colon = "";
    }
    return this._protocol + colon + "//" + this._host + (this._port === 80 ? "" : ":" + this._port) + "/fdsnws/station/" + this._specVersion;
  }
  formPostURL() {
    return this.formBaseURL() + "/query";
  }
  formURL(level) {
    let url = this.formBaseURL() + "/query?";
    if (!isStringArg(level)) {
      throw new Error(
        "level not specified, should be one of network, station, channel, response."
      );
    }
    url = url + makeParam("level", level);
    if (isStringArg(this._networkCode) && this._networkCode.length > 0 && this._networkCode !== "*") {
      url = url + makeParam("net", this._networkCode);
    }
    if (isStringArg(this._stationCode) && this._stationCode.length > 0 && this._stationCode !== "*") {
      url = url + makeParam("sta", this._stationCode);
    }
    if (isStringArg(this._locationCode) && this._locationCode.length > 0 && this._locationCode !== "*") {
      url = url + makeParam("loc", this._locationCode);
    }
    if (isStringArg(this._channelCode) && this._channelCode.length > 0 && this._channelCode !== "*") {
      url = url + makeParam("cha", this._channelCode);
    }
    if (isObject(this._startTime)) {
      url = url + makeParam("starttime", toIsoWoZ(this._startTime));
    }
    if (isObject(this._endTime)) {
      url = url + makeParam("endtime", toIsoWoZ(this._endTime));
    }
    if (isObject(this._startBefore)) {
      url = url + makeParam("startbefore", toIsoWoZ(this._startBefore));
    }
    if (isObject(this._startAfter)) {
      url = url + makeParam("startafter", toIsoWoZ(this._startAfter));
    }
    if (isObject(this._endBefore)) {
      url = url + makeParam("endbefore", toIsoWoZ(this._endBefore));
    }
    if (isObject(this._endAfter)) {
      url = url + makeParam("endafter", toIsoWoZ(this._endAfter));
    }
    if (isNumArg(this._minLat)) {
      url = url + makeParam("minlat", this._minLat);
    }
    if (isNumArg(this._maxLat)) {
      url = url + makeParam("maxlat", this._maxLat);
    }
    if (isNumArg(this._minLon)) {
      url = url + makeParam("minlon", this._minLon);
    }
    if (isNumArg(this._maxLon)) {
      url = url + makeParam("maxlon", this._maxLon);
    }
    if (isNumArg(this._latitude)) {
      url = url + makeParam("lat", this._latitude);
    }
    if (isNumArg(this._longitude)) {
      url = url + makeParam("lon", this._longitude);
    }
    if (isNumArg(this._minRadius)) {
      url = url + makeParam("minradius", this._minRadius);
    }
    if (isNumArg(this._maxRadius)) {
      url = url + makeParam("maxradius", this._maxRadius);
    }
    if (isDef(this._includeRestricted)) {
      url = url + makeParam("includerestricted", this._includeRestricted);
    }
    if (isDef(this._includeAvailability)) {
      url = url + makeParam("includeavailability", this._includeAvailability);
    }
    if (isObject(this._updatedAfter)) {
      url = url + makeParam("updatedafter", toIsoWoZ(this._updatedAfter));
    }
    if (isDef(this._matchTimeseries)) {
      url = url + makeParam("matchtimeseries", this._matchTimeseries);
    }
    if (isStringArg(this._format)) {
      url = url + makeParam("format", this._format);
    }
    if (isNumArg(this._nodata)) {
      url = url + makeParam("nodata", this._nodata);
    }
    if (url.endsWith("&") || url.endsWith("?")) {
      url = url.substr(0, url.length - 1);
    }
    return url;
  }
};
var channelsearchHtml = `
<div class="wrapper">
  <sp-channel-code-input></sp-channel-code-input>
  <div>
    <label>Time Range </label>
    <sp-timerange duration="P7D"></sp-timerange>
    <button id="now">Now</button></div>
    <div>
    <button id="today">Today</button>
    <button id="week">Week</button>
    <button id="month">Month</button>
    <button id="year">Year</button>
  </div>
  <div>
    <label>Geo:</label>
    <sp-latlon-choice></sp-latlon-choice>
  </div>
</div>
`;
var ChannelSearch = class extends HTMLElement {
  constructor() {
    super();
    const shadow = this.attachShadow({ mode: "open" });
    this.draw_element(shadow);
  }
  _registerEvent(wrapper, sel) {
    const mythis = this;
    const component = wrapper.querySelector(sel);
    if (!component) {
      throw new Error(`can't find ${sel}`);
    }
    component.addEventListener("change", () => mythis.dispatchEvent(new Event("change")));
  }
  draw_element(shadow) {
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    wrapper.innerHTML = channelsearchHtml;
    shadow.appendChild(wrapper);
    this._registerEvent(wrapper, "sp-timerange");
    this._registerEvent(wrapper, "sp-latlon-choice");
    const trChooser = wrapper.querySelector("sp-timerange");
    if (!trChooser) {
      throw new Error("can't find sp-timerange");
    }
    const nowBtn = wrapper.querySelector("#now");
    if (!nowBtn) {
      throw new Error("can't find button#now");
    }
    nowBtn.addEventListener("click", (event) => {
      trChooser.end = DateTime.utc();
    });
    const todayBtn = wrapper.querySelector("#today");
    if (!todayBtn) {
      throw new Error("can't find button#today");
    }
    todayBtn.addEventListener("click", (event) => {
      trChooser.duration = Duration.fromISO("P1D");
    });
    const weekBtn = wrapper.querySelector("#week");
    if (!weekBtn) {
      throw new Error("can't find button#week");
    }
    weekBtn.addEventListener("click", (event) => {
      trChooser.duration = Duration.fromISO("P7D");
    });
    const monthBtn = wrapper.querySelector("#month");
    if (!monthBtn) {
      throw new Error("can't find button#month");
    }
    monthBtn.addEventListener("click", (event) => {
      trChooser.duration = Duration.fromISO("P1M");
    });
    const yearBtn = wrapper.querySelector("#year");
    if (!yearBtn) {
      throw new Error("can't find button#year");
    }
    yearBtn.addEventListener("click", (event) => {
      trChooser.duration = Duration.fromISO("P1Y");
    });
  }
  populateQuery(query) {
    if (!query) {
      query = new StationQuery();
    }
    const wrapper = this.shadowRoot?.querySelector("div");
    const codeChooser = wrapper.querySelector(CHANNEL_CODE_ELEMENT);
    query.networkCode(codeChooser.network);
    query.stationCode(codeChooser.station);
    query.locationCode(codeChooser.location);
    query.channelCode(codeChooser.channel);
    const trChooser = wrapper.querySelector("sp-timerange");
    if (!trChooser) {
      throw new Error("can't find sp-timerange");
    }
    query.startTime(trChooser.start);
    query.endTime(trChooser.end);
    const latlonchoice = wrapper.querySelector("sp-latlon-choice");
    const choosenLatLon = latlonchoice.choosen();
    if (choosenLatLon instanceof LatLonBoxEl) {
      const latlonbox = choosenLatLon.asLatLonBox();
      if (latlonbox.south > -90) {
        query.minLat(latlonbox.south);
      }
      if (latlonbox.north < 90) {
        query.maxLat(latlonbox.north);
      }
      if (latlonbox.west > -180 && latlonbox.west + 360 !== latlonbox.east) {
        query.minLon(latlonbox.west);
      }
      if (latlonbox.east < 360 && latlonbox.west + 360 !== latlonbox.east) {
        query.maxLon(latlonbox.east);
      }
    } else if (choosenLatLon instanceof LatLonRadiusEl) {
      const latlonrad = choosenLatLon;
      if (latlonrad.minRadius > 0 || latlonrad.maxRadius < 180) {
        query.latitude(latlonrad.latitude);
        query.longitude(latlonrad.longitude);
        if (latlonrad.minRadius > 0) {
          query.minRadius(latlonrad.minRadius);
        }
        if (latlonrad.maxRadius < 180) {
          query.maxRadius(latlonrad.maxRadius);
        }
      }
    } else {
      console.assert(false, `unknown latlon choice: ${choosenLatLon}`);
    }
    return query;
  }
  getGeoChoiceElement() {
    const wrapper = this.shadowRoot?.querySelector("div");
    const latlonchoice = wrapper.querySelector("sp-latlon-choice");
    return latlonchoice;
  }
};
var CHANNEL_SEARCH_ELEMENT = "sp-channel-search";
customElements.define(CHANNEL_SEARCH_ELEMENT, ChannelSearch);

// src/fdsndatacenters.ts
var FDSN_HOST = "www.fdsn.org";
var DataCentersQuery = class extends FDSNCommon {
  constructor(host) {
    if (!isNonEmptyStringArg(host)) {
      host = FDSN_HOST;
    }
    super(host);
    __publicField(this, "_name");
    __publicField(this, "_services");
    __publicField(this, "_includedatasets");
  }
  specVersion(value) {
    doStringGetterSetter(this, "specVersion", value);
    return this;
  }
  getSpecVersion() {
    return this._specVersion;
  }
  protocol(value) {
    doStringGetterSetter(this, "protocol", value);
    return this;
  }
  getProtocol() {
    return this._protocol;
  }
  host(value) {
    doStringGetterSetter(this, "host", value);
    return this;
  }
  getHost() {
    return this._host;
  }
  port(value) {
    doIntGetterSetter(this, "port", value);
    return this;
  }
  getPort() {
    return this._port;
  }
  name(value) {
    doStringGetterSetter(this, "name", value);
    return this;
  }
  getName() {
    return this._name;
  }
  services(value) {
    doStringGetterSetter(this, "services", value);
    return this;
  }
  getServices() {
    return this._services;
  }
  includeDataSets(value) {
    doBoolGetterSetter(this, "includedatasets", value);
    return this;
  }
  getIncludeDataSets() {
    return this._includedatasets;
  }
  timeout(value) {
    doFloatGetterSetter(this, "timeoutSec", value);
    return this;
  }
  getTimeout() {
    return this._timeoutSec;
  }
  queryJson() {
    const url = this.formURL();
    const fetchInit = defaultFetchInitObj(JSON_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(
      function(response) {
        const contentType = response.headers.get("content-type");
        if (isNonEmptyStringArg(contentType) && contentType.includes(JSON_MIME)) {
          return response.json();
        }
        throw new TypeError(`Oops, we did not get JSON! ${contentType}`);
      }
    );
  }
  findFdsnAvailability(name, repoName) {
    if (name && name.length > 0) {
      this.name(name);
    }
    this.services(SERVICE_NAME);
    return this.queryJson().then((json) => {
      const out = this.extractCompatibleServices(
        json,
        SERVICE_NAME,
        repoName
      );
      return out.map((service) => {
        const url = new URL(service.url);
        const q = new AvailabilityQuery(url.hostname);
        if (url.port && url.port.length > 0) {
          q.port(Number.parseInt(url.port));
        }
        return q;
      });
    });
  }
  findFdsnDataSelect(name, repoName) {
    if (name && name.length > 0) {
      this.name(name);
    }
    this.services(SERVICE_NAME2);
    return this.queryJson().then((json) => {
      const out = this.extractCompatibleServices(
        json,
        SERVICE_NAME2,
        repoName
      );
      return out.map((service) => {
        const url = new URL(service.url);
        const q = new DataSelectQuery(url.hostname);
        if (url.port && url.port.length > 0) {
          q.port(Number.parseInt(url.port));
        }
        return q;
      });
    });
  }
  findFdsnEvent(dcname, repoName) {
    if (dcname && dcname.length > 0) {
      this.name(dcname);
    }
    this.services(SERVICE_NAME3);
    return this.queryJson().then((json) => {
      const out = this.extractCompatibleServices(
        json,
        SERVICE_NAME3,
        repoName
      );
      return out.map((service) => {
        const url = new URL(service.url);
        const q = new EventQuery(url.hostname);
        if (url.port && url.port.length > 0) {
          q.port(Number.parseInt(url.port));
        }
        return q;
      });
    });
  }
  findFdsnStation(dcname, repoName) {
    if (dcname && dcname.length > 0) {
      this.name(dcname);
    }
    this.services(SERVICE_NAME4);
    return this.queryJson().then((json) => {
      const out = this.extractCompatibleServices(
        json,
        SERVICE_NAME4,
        repoName
      );
      return out.map((service) => {
        const url = new URL(service.url);
        const q = new StationQuery(url.hostname);
        if (url.port && url.port.length > 0) {
          q.port(Number.parseInt(url.port));
        }
        return q;
      });
    });
  }
  extractCompatibleServices(json, compatibleName, repoName) {
    const out = [];
    json.datacenters.forEach((dc) => {
      dc.repositories.forEach((repo) => {
        if (!isDef(repoName) || repoName === repo.name) {
          repo.services.forEach((service) => {
            if (service.name === compatibleName || isDef(service.compatibleWith) && service.compatibleWith.includes(compatibleName)) {
              out.push(service);
            }
          });
        }
      });
    });
    return out;
  }
  formBaseURL() {
    let colon = ":";
    if (this._protocol.endsWith(colon)) {
      colon = "";
    }
    return this._protocol + colon + "//" + this._host + (this._port === 80 ? "" : ":" + this._port) + "/ws/datacenters/" + this._specVersion;
  }
  formVersionURL() {
    return this.formBaseURL() + "/version";
  }
  queryVersion() {
    const url = this.formVersionURL();
    const fetchInit = defaultFetchInitObj(TEXT_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(
      (response) => {
        if (response.status === 200) {
          return response.text();
        } else {
          throw new Error(`Status not 200: ${response.status}`);
        }
      }
    );
  }
  formURL() {
    const method = "query";
    let url = this.formBaseURL() + `/${method}?`;
    if (this._name) {
      url = url + makeParam("name", this._name);
    }
    if (this._services) {
      url = url + makeParam("services", this._services);
    }
    if (this._includedatasets) {
      url = url + makeParam("includedatasets", this._includedatasets);
    }
    if (url.endsWith("&") || url.endsWith("?")) {
      url = url.substr(0, url.length - 1);
    }
    return url;
  }
};

// src/filter.ts
var filter_exports = {};
__export(filter_exports, {
  BAND_PASS: () => BAND_PASS,
  HIGH_PASS: () => HIGH_PASS,
  LOW_PASS: () => LOW_PASS,
  amplitude: () => amplitude2,
  applyFilter: () => applyFilter,
  createButterworth: () => createButterworth,
  createChebyshevI: () => createChebyshevI,
  createChebyshevII: () => createChebyshevII,
  differentiate: () => differentiate,
  envelope: () => envelope,
  gainCorrect: () => gainCorrect,
  getPassband: () => getPassband,
  hilbert: () => hilbert,
  lineFit: () => lineFit,
  rMean: () => rMean,
  removeTrend: () => removeTrend
});
var BAND_PASS = "BANDPASS";
var LOW_PASS = "LOWPASS";
var HIGH_PASS = "HIGHPASS";
function amplitude2(real, imag) {
  return Math.hypot(real, imag);
}
function rMean(seis) {
  if (seis instanceof Seismogram) {
    const meanVal = seis.mean();
    const rmeanSeismogram = new Seismogram(
      seis.segments.map((s3) => {
        const demeanY = s3.y.map(function(d) {
          return d - meanVal;
        });
        const out = s3.cloneWithNewData(demeanY);
        return out;
      })
    );
    return rmeanSeismogram;
  } else {
    throw new Error("rMean arg not a Seismogram");
  }
}
function lineFit(seis, referenceTime) {
  if (seis.numPoints === 0) {
    throw new Error(`cannot lineFit a seismogram with no points`);
  }
  let rn = seis.numPoints;
  let sumx = 0;
  let sumy = 0;
  let sumxy = 0;
  let sumx2 = 0;
  let sumy2 = 0;
  referenceTime = referenceTime ? referenceTime : seis.start;
  let x12 = referenceTime.toMillis() / 1e3;
  seis.segments.forEach((seg) => {
    const seg_start_x = seg.start.toMillis() / 1e3 - x12;
    const dx = 1 / seg.sampleRate;
    const Y3 = seg.y;
    for (let i = 0; i < Y3.length; i++) {
      const yi = Y3[i];
      const xi = seg_start_x + dx * i;
      sumx = sumx + xi;
      sumy = sumy + yi;
      sumxy = sumxy + xi * yi;
      sumx2 = sumx2 + xi * xi;
      sumy2 = sumy2 + yi * yi;
    }
  });
  const d = rn * sumx2 - sumx * sumx;
  const b = d !== 0 ? (sumx2 * sumy - sumx * sumxy) / d : 0;
  const a3 = d !== 0 ? (rn * sumxy - sumx * sumy) / d : 0;
  let sig2 = (sumy2 + rn * b * b + a3 * a3 * sumx2 - 2 * b * sumy - 2 * a3 * sumxy + 2 * b * a3 * sumx) / (seis.numPoints - 1);
  const sig = Math.sqrt(sig2);
  const siga2 = rn * sig2 / d;
  const sigb2 = sig2 * sumx2 / d;
  const siga = Math.sqrt(siga2);
  const sigb = Math.sqrt(sigb2);
  let cc = (rn * sumxy - sumx * sumy) / Math.sqrt(d * (rn * sumy2 - sumy * sumy));
  cc = Math.abs(cc);
  return {
    slope: a3,
    intercept: b,
    reference_time: referenceTime,
    sigma: sig,
    sigma_a: siga,
    sigma_b: sigb,
    correlation: cc
  };
}
function removeTrend(seis, fitLine) {
  if (seis instanceof Seismogram) {
    const linfit = fitLine ? fitLine : lineFit(seis);
    if (Number.isNaN(linfit.slope) || Number.isNaN(linfit.intercept)) {
      throw new Error(`Can't remove trend with NaN, slope: ${linfit.slope} int: ${linfit.intercept}`);
    }
    const ref_secs = linfit.reference_time.toMillis() / 1e3;
    const rtr_segments = seis.segments.map((seg) => {
      const start_secs = seg.start.toMillis() / 1e3;
      const start_offset = start_secs - ref_secs;
      const dx = 1 / seg.sampleRate;
      const rtr_y = seg.y.map((y4, idx) => {
        const out = y4 - (start_offset + dx * idx) * linfit.slope - linfit.intercept;
        return out;
      });
      const rtr_seg = seg.cloneWithNewData(rtr_y);
      return rtr_seg;
    });
    return new Seismogram(rtr_segments);
  } else {
    throw new Error("removeTrend arg not a Seismogram");
  }
}
function gainCorrect(seis, instrumentSensitivity) {
  if (seis instanceof Seismogram) {
    const gain = instrumentSensitivity.sensitivity;
    const gainSeismogram = new Seismogram(
      seis.segments.map((s3) => {
        let gainY;
        if (s3.y instanceof Int32Array || s3.y instanceof Float32Array) {
          gainY = Float32Array.from(s3.y);
        } else {
          gainY = Float64Array.from(s3.y);
        }
        gainY = gainY.map(function(d) {
          return d / gain;
        });
        const outS = s3.cloneWithNewData(gainY);
        outS.yUnit = instrumentSensitivity.inputUnits;
        return outS;
      })
    );
    return gainSeismogram;
  } else {
    throw new Error(`Expected Seismogram but was ${typeof seis}`);
  }
}
function getPassband(type2) {
  if (type2 === LOW_PASS) {
    return LOWPASS;
  } else if (type2 === BAND_PASS) {
    return PassbandType.BANDPASS;
  } else if (type2 === HIGH_PASS) {
    return PassbandType.HIGHPASS;
  } else {
    throw new Error(`unknown pass band: ${type2}`);
  }
}
function createButterworth(numPoles, passband, lowFreqCorner, highFreqCorner, delta) {
  const passbandtype = getPassband(passband);
  return new Butterworth(
    numPoles,
    passbandtype,
    lowFreqCorner,
    highFreqCorner,
    delta
  );
}
function createChebyshevI(numPoles, epsilon8, passband, lowFreqCorner, highFreqCorner, delta) {
  const passbandtype = getPassband(passband);
  return new ChebyshevI(
    numPoles,
    epsilon8,
    passbandtype,
    lowFreqCorner,
    highFreqCorner,
    delta
  );
}
function createChebyshevII(numPoles, epsilon8, passband, lowFreqCorner, highFreqCorner, delta) {
  const passbandtype = getPassband(passband);
  return new ChebyshevII(
    numPoles,
    epsilon8,
    passbandtype,
    lowFreqCorner,
    highFreqCorner,
    delta
  );
}
function applyFilter(iirFilter, seis) {
  if (Math.abs(iirFilter.getDelta() - seis.samplePeriod) / seis.samplePeriod > 1e-3) {
    throw new Error(`Filter, delta=${iirFilter.getDelta()}, has different delta from seis, ${1 / seis.sampleRate}`);
  }
  const filteredSegments = [];
  for (let i = 0; i < seis.segments.length; i++) {
    const outData = Float32Array.from(seis.segments[i].y);
    iirFilter.filterInPlace(outData);
    filteredSegments.push(seis.segments[i].cloneWithNewData(outData));
  }
  return new Seismogram(filteredSegments);
}
function envelope(seis) {
  if (seis.isContiguous()) {
    const seisY = seis.y;
    const s3 = hilbert(seis);
    const hilbertY = s3.y;
    let outY;
    if (seis.y instanceof Int32Array || seis.y instanceof Float32Array) {
      outY = new Float32Array(seisY.length);
    } else {
      outY = new Float64Array(seisY.length);
    }
    for (let n2 = 0; n2 < seisY.length; n2++) {
      outY[n2] = Math.sqrt(hilbertY[n2] * hilbertY[n2] + seisY[n2] * seisY[n2]);
    }
    return seis.cloneWithNewData(outY);
  } else {
    throw new Error("Cannot take envelope of non-contiguous seismogram");
  }
}
function hilbert(seis, n2, lowEdge, highEdge) {
  if (seis.isContiguous()) {
    let seisY;
    if (seis.y instanceof Float32Array) {
      seisY = seis.y;
    } else {
      seisY = Float32Array.from(seis.y);
    }
    if (!isDef(n2)) {
      n2 = 10;
    }
    if (!isDef(lowEdge)) {
      lowEdge = 0.05;
    }
    if (!isDef(highEdge)) {
      highEdge = 0.95;
    }
    const hilbert2 = new CenteredHilbertTransform(n2, lowEdge, highEdge);
    const coeff = hilbert2.getCoefficients();
    for (const c5 of coeff) {
      if (Number.isNaN(c5)) {
        throw new Error(`Hilbert FIR coeff includes NaN: ${coeff.join()}`);
      }
    }
    const hilbertY = hilbert2.filter(seisY);
    const s3 = seis.cloneWithNewData(hilbertY);
    return s3;
  } else {
    throw new Error("Cannot take hilbert of non-contiguous seismogram");
  }
}
function differentiate(seis) {
  if (seis instanceof Seismogram) {
    const diffSeismogram = new Seismogram(
      seis.segments.map((s3) => {
        const origY = s3.y;
        const sampRate = 1 * s3.sampleRate;
        const diffY = new Float32Array(origY.length - 1);
        for (let i = 0; i < diffY.length; i++) {
          diffY[i] = (origY[i + 1] - origY[i]) * sampRate;
        }
        const out = s3.cloneWithNewData(diffY);
        out.startTime = out.startTime.plus(Duration.fromMillis(1e3 / out.sampleRate / 2));
        out.yUnit = out.yUnit + "/s";
        return out;
      })
    );
    return diffSeismogram;
  } else {
    throw new Error("diff arg not a Seismogram");
  }
}

// src/helicorder.ts
var helicorder_exports = {};
__export(helicorder_exports, {
  DEFAULT_MAX_HEIGHT: () => DEFAULT_MAX_HEIGHT,
  HELICORDER_ELEMENT: () => HELICORDER_ELEMENT,
  HELICORDER_SELECTOR: () => HELICORDER_SELECTOR,
  HELI_COLOR_CSS_ID: () => HELI_COLOR_CSS_ID,
  HeliTimeRange: () => HeliTimeRange,
  Helicorder: () => Helicorder,
  HelicorderConfig: () => HelicorderConfig,
  helicorder_css: () => helicorder_css
});
var HELICORDER_ELEMENT = "sp-helicorder";
var Helicorder = class extends SeisPlotElement {
  constructor(seisData, seisConfig) {
    let heliConfig;
    if (!seisConfig) {
      let timeWindow = Interval.before(DateTime.utc(), Duration.fromObject({ hours: 24 }));
      heliConfig = new HelicorderConfig(timeWindow);
    } else if (seisConfig instanceof HelicorderConfig) {
      heliConfig = seisConfig;
    } else {
      heliConfig = HelicorderConfig.fromSeismographConfig(seisConfig);
    }
    super(seisData, heliConfig);
    if (seisData && seisData.length > 1) {
      throw new Error(`Helicorder seisData must be length 1, but was ${seisData.length}`);
    }
    const wrapper = document.createElement("div");
    wrapper.setAttribute("class", "wrapper");
    this.addStyle(helicorder_css);
    this.shadowRoot?.appendChild(wrapper);
    this.addEventListener("click", (evt) => {
      const detail = this.calcDetailForEvent(evt);
      const event = new CustomEvent("heliclick", { detail });
      this.dispatchEvent(event);
    });
    this.addEventListener("mousemove", (evt) => {
      const detail = this.calcDetailForEvent(evt);
      const event = new CustomEvent("helimousemove", { detail });
      this.dispatchEvent(event);
    });
    this.addEventListener("helimousemove", (hEvent) => {
      const detail = hEvent.detail;
      wrapper.querySelectorAll(`sp-seismograph`).forEach((seismograph, idx) => {
        if (idx === detail.lineNum) {
          let selectedStyle = seismograph.shadowRoot?.querySelector("style.selection");
          if (!selectedStyle) {
            selectedStyle = document.createElement("style");
            seismograph.shadowRoot?.insertBefore(selectedStyle, seismograph.shadowRoot?.firstChild);
            selectedStyle.setAttribute("class", "selection");
            selectedStyle.textContent = `
              svg g.yLabel text {
                font-weight: bold;
                text-decoration: underline;
              }
            `;
          }
        } else {
          seismograph.shadowRoot?.querySelector("style.selection")?.remove();
        }
      });
    });
  }
  get heliConfig() {
    return this.seismographConfig;
  }
  set heliConfig(config) {
    this.seismographConfig = config;
  }
  get width() {
    const wrapper = this.shadowRoot?.querySelector("div.wrapper");
    const rect = wrapper.getBoundingClientRect();
    return rect.width;
  }
  get height() {
    const wrapper = this.shadowRoot?.querySelector("div.wrapper");
    const rect = wrapper.getBoundingClientRect();
    return rect.height;
  }
  appendSegment(segment) {
    console.log("appendSegment");
    let segMinMax = segment.findMinMax();
    let origMinMax = this.heliConfig.fixedAmplitudeScale;
    const heliTimeRange = this.heliConfig.fixedTimeScale;
    if (!heliTimeRange) {
      throw new Error("Heli is not fixedTimeScale");
    }
    if (heliTimeRange.end < segment.timeRange.end) {
      const lineDuration = Duration.fromMillis(
        heliTimeRange.toDuration().toMillis() / this.heliConfig.numLines
      );
      console.log(`old heli times: ${this.heliConfig.fixedTimeScale}`);
      this.heliConfig.fixedTimeScale = Interval.fromDateTimes(
        heliTimeRange.start.plus(lineDuration),
        heliTimeRange.end.plus(lineDuration)
      );
      console.log(`new heli times: ${this.heliConfig.fixedTimeScale}`);
      this.draw();
    }
    if (this.seisData && this.seisData.length > 0) {
      let singleSeisData = this.seisData[0];
      singleSeisData.append(segment);
      if (heliTimeRange.end < segment.timeRange.end || origMinMax && (segMinMax[0] < origMinMax[0] || origMinMax[1] < segMinMax[1])) {
        this.draw();
      } else {
        let seismographList = this.shadowRoot ? Array.from(this.shadowRoot.querySelectorAll("sp-seismograph")) : [];
        seismographList.forEach((seisGraph) => {
          const lineInterval = seisGraph.displayTimeRangeForSeisDisplayData(singleSeisData);
          if (segment.timeRange.intersection(lineInterval)) {
            let lineSeisData = this.cutForLine(singleSeisData, lineInterval);
            seisGraph.seisData = [lineSeisData];
          }
        });
      }
    } else {
      const sdd = SeismogramDisplayData.fromSeismogram(new Seismogram(segment));
      this.seisData = [sdd];
    }
  }
  draw() {
    this.heliConfig.lineSeisConfig.centeredAmp = this.heliConfig.centeredAmp;
    this.drawSeismograms();
  }
  drawSeismograms() {
    if (!this.isConnected) {
      return;
    }
    const wrapper = this.shadowRoot?.querySelector("div");
    const timeRange = this.heliConfig.fixedTimeScale;
    if (!isDef(timeRange)) {
      throw new Error("Helicorder config must have fixedTimeScale set");
    }
    let maxVariation = 1;
    let singleSeisData;
    if (this.seisData.length !== 0) {
      singleSeisData = this.seisData[0];
    } else {
      singleSeisData = new SeismogramDisplayData(timeRange);
    }
    if (singleSeisData.seismogram) {
      const seis = singleSeisData.seismogram;
      if (!this.heliConfig.fixedAmplitudeScale || this.heliConfig.fixedAmplitudeScale[0] === 0 && this.heliConfig.fixedAmplitudeScale[1] === 0) {
        if (this.heliConfig.maxVariation === 0) {
          const cutSeis = seis.cut(timeRange);
          if (cutSeis) {
            const [min4, max5] = cutSeis.findMinMax();
            const mean2 = cutSeis.mean();
            const posOffset = max5 - mean2;
            const negOffset = mean2 - min4;
            const mul_percent = 1.01;
            maxVariation = Math.max(mul_percent * posOffset, mul_percent * negOffset);
          }
        } else {
          maxVariation = this.heliConfig.maxVariation;
        }
      }
    }
    const startTime = timeRange.start;
    const secondsPerLine = timeRange.toDuration().toMillis() / 1e3 / this.heliConfig.numLines;
    wrapper.querySelectorAll("sp-seismograph").forEach((e) => e.remove());
    const lineTimes = this.calcTimesForLines(
      startTime,
      secondsPerLine,
      this.heliConfig.numLines
    );
    const margin = this.heliConfig.margin;
    const nl = this.heliConfig.numLines;
    const maxHeight = this.heliConfig.maxHeight !== null ? this.heliConfig.maxHeight : DEFAULT_MAX_HEIGHT;
    const baseHeight = (maxHeight - margin.top - margin.bottom) / (nl - (nl - 1) * this.heliConfig.overlap);
    for (const lineTime of lineTimes) {
      const lineNumber = lineTime.lineNumber;
      const lineInterval = lineTime.interval;
      let startTime2 = lineTime.interval.start;
      const endTime = lineTime.interval.end;
      let height = baseHeight;
      const marginTop = lineNumber === 0 ? 0 : Math.round(-1 * height * this.heliConfig.overlap);
      const lineSeisConfig = this.heliConfig.lineSeisConfig.clone();
      lineSeisConfig.title = null;
      if (lineNumber === 0) {
        lineSeisConfig.title = this.heliConfig.title;
        lineSeisConfig.isXAxisTop = this.heliConfig.isXAxisTop;
        lineSeisConfig.margin.top += this.heliConfig.margin.top;
        height += this.heliConfig.margin.top;
      } else if (lineNumber === nl - 1) {
        lineSeisConfig.isXAxis = this.heliConfig.isXAxis;
        lineSeisConfig.margin.bottom += this.heliConfig.margin.bottom;
        height += this.heliConfig.margin.bottom;
        console.log(`last line: ${lineInterval}`);
      }
      lineSeisConfig.fixedTimeScale = lineInterval;
      lineSeisConfig.yLabel = `${startTime2.toFormat("HH:mm")}`;
      lineSeisConfig.yLabelRight = `${endTime.toFormat("HH:mm")}`;
      lineSeisConfig.lineColors = [
        this.heliConfig.lineColors[lineNumber % this.heliConfig.lineColors.length]
      ];
      let lineSeisData = this.cutForLine(singleSeisData, lineInterval);
      if (this.heliConfig.fixedAmplitudeScale && (this.heliConfig.fixedAmplitudeScale[0] !== 0 || this.heliConfig.fixedAmplitudeScale[1] !== 0)) {
        lineSeisConfig.fixedAmplitudeScale = this.heliConfig.fixedAmplitudeScale;
      } else {
        lineSeisConfig.fixedAmplitudeScale = [
          -1 * maxVariation,
          maxVariation
        ];
      }
      const seismograph = new Seismograph([lineSeisData], lineSeisConfig);
      seismograph.svg.classed(HELICORDER_SELECTOR, true);
      seismograph.setAttribute("class", "heliLine");
      seismograph.setAttribute("style", `height: ${height}px;margin-top: ${marginTop}px`);
      const seismographWrapper = seismograph.shadowRoot?.querySelector("div");
      const styleEl = document.createElement("style");
      const seismographRoot = seismograph.shadowRoot;
      if (seismographRoot) {
        const helicss = seismographRoot.insertBefore(styleEl, seismographWrapper);
        helicss.textContent = `
        .yLabel text {
          font-size: x-small;
          fill: ${lineSeisConfig.lineColors[0]};
        }
        .utclabels {
          position: relative;
          font-size: x-small;
          width: 100%;
        }
        .utclabels div {
          display: flex;
          position: absolute;
          left: 0px;
          justify-content: space-between;
          width: 100%;
          z-index: -1;
        }
        `;
      }
      wrapper.appendChild(seismograph);
      if (lineNumber === 0) {
        const utcDiv = document.createElement("div");
        utcDiv.setAttribute("class", "utclabels");
        const innerDiv = utcDiv.appendChild(document.createElement("div"));
        innerDiv.setAttribute("style", `top: ${lineSeisConfig.margin.top}px;`);
        const textEl = innerDiv.appendChild(document.createElement("text"));
        textEl.textContent = "UTC";
        const rightTextEl = innerDiv.appendChild(document.createElement("text"));
        rightTextEl.textContent = "UTC";
        seismographWrapper.insertBefore(utcDiv, seismographWrapper.firstChild);
      }
      startTime2 = endTime;
    }
  }
  cutForLine(singleSeisData, lineInterval) {
    let lineCutSeis = null;
    let lineSeisData;
    if (singleSeisData.seismogram) {
      lineCutSeis = singleSeisData.seismogram.cut(lineInterval);
      if (lineCutSeis && this.heliConfig.detrendLines) {
        lineCutSeis = removeTrend(lineCutSeis);
      }
      lineSeisData = singleSeisData.cloneWithNewSeismogram(lineCutSeis);
    } else {
      lineSeisData = singleSeisData.clone();
    }
    lineSeisData.timeRange = lineInterval;
    return lineSeisData;
  }
  calcTimesForLines(startTime, secondsPerLine, numberOfLines) {
    const out = [];
    let s3 = startTime;
    let durationPerLine = Duration.fromMillis(secondsPerLine * 1e3);
    for (let lineNum = 0; lineNum < numberOfLines; lineNum++) {
      const startEnd2 = new HeliTimeRange(s3, durationPerLine, lineNum);
      out.push(startEnd2);
      s3 = startEnd2.interval.end;
    }
    return out;
  }
  calcDetailForEvent(evt) {
    const heliMargin = this.heliConfig.margin;
    const margin = this.heliConfig.lineSeisConfig.margin;
    const nl = this.heliConfig.numLines;
    const maxHeight = this.heliConfig.maxHeight !== null ? this.heliConfig.maxHeight : DEFAULT_MAX_HEIGHT;
    const baseHeight = (maxHeight - (heliMargin.top + heliMargin.bottom)) / (nl - (nl - 1) * this.heliConfig.overlap);
    let clickLine = 0;
    if (evt.offsetY < heliMargin.top + baseHeight * 0.5) {
      clickLine = 0;
    } else {
      clickLine = Math.round((evt.offsetY - heliMargin.top - baseHeight * 0.5) / (baseHeight * (1 - this.heliConfig.overlap)));
    }
    const timeRange = this.heliConfig.fixedTimeScale;
    if (timeRange) {
      const timeLineFraction = (evt.offsetX - margin.left) / (this.width - margin.left - margin.right);
      const secondsPerLine = timeRange.toDuration().toMillis() / 1e3 / this.heliConfig.numLines;
      const clickTime = timeRange.start.plus(Duration.fromMillis((clickLine + timeLineFraction) * secondsPerLine * 1e3));
      return {
        mouseevent: evt,
        time: clickTime,
        lineNum: clickLine
      };
    } else {
      throw new Error("Helicorder must be fixedTimeScale");
    }
  }
};
var DEFAULT_MAX_HEIGHT = 600;
var HelicorderConfig = class extends SeismographConfig {
  constructor(timeRange) {
    super();
    __publicField(this, "lineSeisConfig");
    __publicField(this, "overlap");
    __publicField(this, "numLines");
    __publicField(this, "maxVariation");
    __publicField(this, "detrendLines", false);
    if (!isDef(timeRange)) {
      throw new Error("Helicorder config must have fixedTimeScale set");
    }
    this.fixedTimeScale = timeRange;
    this.maxVariation = 0;
    this.maxHeight = DEFAULT_MAX_HEIGHT;
    this.xLabel = "";
    this.yLabel = "";
    this.xSublabel = "";
    this.ySublabel = " ";
    this.ySublabelIsUnits = false;
    this.isXAxis = true;
    this.isXAxisTop = true;
    this.isYAxis = false;
    this.overlap = 0.5;
    this.numLines = 12;
    this.margin.left = 0;
    this.margin.right = 0;
    this.margin.top = 40;
    this.lineColors = ["skyblue", "olivedrab", "goldenrod"];
    this.lineSeisConfig = new SeismographConfig();
    this.lineSeisConfig.ySublabel = ` `;
    this.lineSeisConfig.xLabel = " ";
    this.lineSeisConfig.yLabel = "";
    this.lineSeisConfig.yLabelOrientation = "horizontal";
    this.lineSeisConfig.ySublabelIsUnits = false;
    this.lineSeisConfig.isXAxis = false;
    this.lineSeisConfig.isYAxis = false;
    this.lineSeisConfig.minHeight = 80;
    this.lineSeisConfig.margin.top = 0;
    this.lineSeisConfig.margin.bottom = 0;
    this.lineSeisConfig.margin.left = 37;
    this.lineSeisConfig.margin.right = 37;
    this.lineSeisConfig.wheelZoom = false;
    this.lineSeisConfig.centeredAmp = true;
  }
  static fromSeismographConfig(seisConfig) {
    if (!seisConfig.fixedTimeScale) {
      throw new Error("Helicorder config must have fixedTimeScale set");
    }
    const heliConfig = new HelicorderConfig(seisConfig.fixedTimeScale);
    heliConfig.lineSeisConfig = seisConfig;
    heliConfig.lineColors = seisConfig.lineColors;
    return heliConfig;
  }
};
var HeliTimeRange = class {
  constructor(startTime, duration, lineNumber) {
    __publicField(this, "lineNumber");
    __publicField(this, "interval");
    this.interval = Interval.after(startTime, duration);
    this.lineNumber = lineNumber;
  }
};
var helicorder_css = `
:host {
  display: block;
  min-height: 200px;
  height: 100%;
  cursor: crosshair;
}
`;
var HELICORDER_SELECTOR = "helicorder";
var HELI_COLOR_CSS_ID = "helicordercolors";
customElements.define(HELICORDER_ELEMENT, Helicorder);

// src/mseedarchive.ts
var mseedarchive_exports = {};
__export(mseedarchive_exports, {
  Allowed_Flags: () => Allowed_Flags,
  MSeedArchive: () => MSeedArchive,
  loadDataRecords: () => loadDataRecords,
  maxSampleRate: () => maxSampleRate,
  maxTimeForRecord: () => maxTimeForRecord,
  minSampleRate: () => minSampleRate
});
var Allowed_Flags = ["n", "s", "l", "c", "Y", "j", "H"];
var MSeedArchive = class {
  constructor(rootUrl, pattern) {
    __publicField(this, "_rootUrl");
    __publicField(this, "_pattern");
    __publicField(this, "_recordSize");
    __publicField(this, "_timeoutSec");
    this._rootUrl = rootUrl;
    this._pattern = pattern;
    this._recordSize = 512;
    this._timeoutSec = 30;
    this.checkPattern(this._pattern);
  }
  get rootUrl() {
    return this._rootUrl;
  }
  get pattern() {
    return this._pattern;
  }
  get recordSize() {
    return this._recordSize;
  }
  checkPattern(p) {
    const regexp = /%[a-zA-Z]/g;
    const allFlags = p.match(regexp);
    if (!allFlags) {
      return false;
    } else {
      for (const f of allFlags) {
        if (Allowed_Flags.indexOf(f.slice(1)) === -1) {
          throw new Error(`${f} not allowed in pattern`);
        }
      }
    }
    return true;
  }
  loadSeismograms(channelTimeList) {
    const promiseArray = channelTimeList.map((ct) => {
      if (isDef(ct.channel)) {
        const request = ct;
        const dataRecords = this.loadDataForChannel(
          ct.channel,
          ct.startTime,
          ct.endTime
        );
        return Promise.all([request, dataRecords]).then((pArray) => {
          return {
            request: pArray[0],
            dataRecords: pArray[1]
          };
        });
      } else if (isDef(ct.channelCodesHolder)) {
        const request = ct;
        const dataRecords = this.loadData(
          ct.channelCodesHolder.networkCode,
          ct.channelCodesHolder.stationCode,
          ct.channelCodesHolder.locationCode,
          ct.channelCodesHolder.channelCode,
          ct.startTime,
          ct.endTime
        );
        return Promise.all([request, dataRecords]).then((pArray) => {
          return {
            request: pArray[0],
            dataRecords: pArray[1]
          };
        });
      } else {
        throw new Error("channel is missing in loadSeismograms ");
      }
    });
    return Promise.all(promiseArray).then((pArray) => {
      const out = [];
      pArray.forEach((p) => {
        const seisArray = seismogramPerChannel(p.dataRecords);
        for (const seis of seisArray) {
          const cutSeis = seis.cut(
            Interval.fromDateTimes(p.request.startTime, p.request.endTime)
          );
          p.request.seismogram = cutSeis;
          out.push(p.request);
        }
      });
      return out;
    });
  }
  loadDataForChannel(channel, startTime, endTime) {
    return this.loadData(
      channel.station.network.networkCode,
      channel.station.stationCode,
      channel.locationCode,
      channel.channelCode,
      startTime,
      endTime,
      channel.sampleRate
    );
  }
  loadData(net, sta, loc, chan, startTime, endTime, sampleRate) {
    const basePattern = this.fillBasePattern(net, sta, loc, chan);
    if (!isDef(sampleRate)) {
      sampleRate = minSampleRate(chan);
    }
    const recordTime = maxTimeForRecord(this._recordSize, sampleRate);
    let t = startTime.minus(recordTime);
    const urlList = [];
    while (t < endTime) {
      const url = this.rootUrl + "/" + this.fillTimePattern(basePattern, t);
      t = t.plus(Duration.fromObject({ hour: 1 }));
      urlList.push(url);
    }
    if (t.plus(recordTime) > endTime) {
      const url = this.rootUrl + "/" + this.fillTimePattern(basePattern, t);
      urlList.push(url);
    }
    return loadDataRecords(urlList).then((dataRecords) => {
      if (dataRecords) {
        dataRecords = dataRecords.filter(
          (dr) => dr.header.endTime >= startTime && dr.header.startTime <= endTime
        );
      } else {
        dataRecords = [];
      }
      return dataRecords;
    });
  }
  fillBasePattern(net, sta, loc, chan) {
    return this.pattern.replace(/%n/g, net).replace(/%s/g, sta).replace(/%l/g, loc).replace(/%c/g, chan);
  }
  fillTimePattern(basePattern, t) {
    return basePattern.replace(/%Y/g, t.toFormat("yyyy")).replace(/%j/g, t.toFormat("ooo")).replace(/%H/g, t.toFormat("HH"));
  }
};
function loadDataRecords(urlList, fetchInit, timeoutSec) {
  const promiseArray = urlList.map((url) => {
    return doFetchWithTimeout(url, fetchInit, timeoutSec).then((fetchResponse) => {
      if (fetchResponse.ok) {
        if (fetchResponse.status === 200 || fetchResponse.status === 304) {
          return fetchResponse.arrayBuffer().then((ab) => {
            let dataRecords = [];
            if (ab.byteLength > 0) {
              dataRecords = parseDataRecords(ab);
            }
            return dataRecords;
          });
        } else if (fetchResponse.status === 404) {
          return [];
        } else {
          log(
            "no data: status=" + fetchResponse.status + " " + fetchResponse.url
          );
          return [];
        }
      } else if (fetchResponse.status === 404) {
        return [];
      } else {
        throw new Error(
          "fetch error: " + fetchResponse.ok + " " + fetchResponse.status + " " + fetchResponse.url
        );
      }
    }).catch((err) => {
      log("caught fetch err, continuing with empty: " + err);
      return [];
    });
  });
  return Promise.all(promiseArray).then((pArray) => {
    let dataRecords = [];
    pArray.forEach((p) => {
      dataRecords = dataRecords.concat(p);
    });
    return dataRecords;
  });
}
function maxSampleRate(chan) {
  const f = chan.slice(0, 1);
  switch (f) {
    case "F":
    case "G":
      return 5e3;
    case "D":
    case "C":
      return 1e3;
    case "E":
    case "H":
      return 250;
    case "S":
    case "B":
      return 80;
    case "M":
      return 10;
    case "L":
      return 1;
    case "V":
      return 0.1;
    case "U":
      return 0.01;
    case "R":
      return 1e-3;
    case "P":
      return 1e-4;
    case "Q":
      return 1e-6;
    default:
      throw new Error("Unknown band code " + f + " in " + chan);
  }
}
function minSampleRate(chan) {
  const f = chan.slice(0, 1);
  switch (f) {
    case "F":
    case "G":
      return 1e3;
    case "D":
    case "C":
      return 2500;
    case "E":
    case "H":
      return 80;
    case "S":
    case "B":
      return 10;
    case "M":
      return 1;
    case "L":
      return 1;
    case "V":
      return 0.1;
    case "U":
      return 0.01;
    case "R":
      return 1e-4;
    case "P":
      return 1e-5;
    case "Q":
      return 1e-7;
    default:
      throw new Error("Unknown band code " + f + " in " + chan);
  }
}
function maxTimeForRecord(recordSize, sampleRate) {
  return Duration.fromMillis(1e3 * ((recordSize - 40) * 2) / sampleRate);
}

// src/ringserverweb.ts
var ringserverweb_exports = {};
__export(ringserverweb_exports, {
  DATALINK_PATH: () => DATALINK_PATH,
  IRIS_HOST: () => IRIS_HOST2,
  NslcWithType: () => NslcWithType,
  RingserverConnection: () => RingserverConnection,
  SEEDLINK_PATH: () => SEEDLINK_PATH,
  StreamStat: () => StreamStat,
  nslcSplit: () => nslcSplit,
  stationsFromStreams: () => stationsFromStreams
});
var SEEDLINK_PATH = "/seedlink";
var DATALINK_PATH = "/datalink";
var IRIS_HOST2 = "rtserve.iris.washington.edu";
var ORG = "Organization: ";
var RingserverConnection = class {
  constructor(host, port) {
    __publicField(this, "_host");
    __publicField(this, "_port");
    __publicField(this, "_prefix");
    __publicField(this, "_timeoutSec");
    const hostStr = isNonEmptyStringArg(host) ? host : IRIS_HOST2;
    if (hostStr.startsWith("http")) {
      const rs_url = new URL(hostStr);
      this._host = rs_url.hostname;
      this._port = parseInt(rs_url.port);
      if (!Number.isInteger(this._port)) {
        this._port = 80;
      }
      this._prefix = rs_url.pathname;
    } else {
      this._host = hostStr;
      this._port = 80;
      this._prefix = "";
    }
    if (isNumArg(port)) {
      this._port = port;
    }
    this._timeoutSec = 30;
  }
  host(value) {
    doStringGetterSetter(this, "host", value);
    return this;
  }
  getHost() {
    return this._host;
  }
  port(value) {
    doIntGetterSetter(this, "port", value);
    return this;
  }
  getPort() {
    return this._port;
  }
  timeout(value) {
    doFloatGetterSetter(this, "timeoutSec", value);
    return this;
  }
  getTimeout() {
    return this._timeoutSec;
  }
  pullId() {
    return this.pullRaw(this.formIdURL()).then((raw) => {
      const lines = raw.split("\n");
      let organization = lines[1];
      if (organization.startsWith(ORG)) {
        organization = organization.substring(ORG.length);
      }
      return {
        ringserverVersion: lines[0],
        serverId: organization
      };
    });
  }
  pullStreamIds(level, matchPattern) {
    let queryParams = "level=6";
    if (isNumArg(level) && level > 0) {
      queryParams = "level=" + level;
    }
    if (matchPattern) {
      queryParams = queryParams + "&match=" + matchPattern;
    }
    const url = this.formStreamIdsURL(queryParams);
    return this.pullRaw(url).then((raw) => {
      return raw.split("\n").filter((line) => line.length > 0);
    });
  }
  pullStreams(matchPattern) {
    let queryParams = "";
    if (matchPattern) {
      queryParams = "match=" + matchPattern;
    }
    const url = this.formStreamsURL(queryParams);
    return this.pullRaw(url).then((raw) => {
      const lines = raw.split("\n");
      const out = {
        accessTime: DateTime.utc(),
        streams: []
      };
      for (const line of lines) {
        if (line.length === 0) {
          continue;
        }
        const vals = line.split(/\s+/);
        if (vals.length === 0) {
          continue;
        } else if (vals.length >= 2) {
          out.streams.push(new StreamStat(vals[0], vals[1], vals[2]));
        } else {
          log("Bad /streams line, skipping: '" + line + "'");
        }
      }
      return out;
    });
  }
  pullRaw(url) {
    const fetchInit = defaultFetchInitObj(TEXT_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(
      (response) => {
        if (response.status === 200) {
          return response.text();
        } else {
          throw new Error(`Status not 200: ${response.status}`);
        }
      }
    );
  }
  getDataLinkURL() {
    let proto = "ws:";
    if (checkProtocol() === "https:") {
      proto = "wss:";
    }
    return proto + "//" + this._host + (this._port === 80 ? "" : ":" + this._port) + this._prefix + DATALINK_PATH;
  }
  getSeedLinkURL() {
    let proto = "ws:";
    if (checkProtocol() === "https:") {
      proto = "wss:";
    }
    return proto + "//" + this._host + (this._port === 80 ? "" : ":" + this._port) + this._prefix + SEEDLINK_PATH;
  }
  formBaseURL() {
    if (this._port === 0) {
      this._port = 80;
    }
    return checkProtocol() + "//" + this._host + (this._port === 80 ? "" : ":" + this._port) + this._prefix;
  }
  formIdURL() {
    return this.formBaseURL() + "/id";
  }
  formStreamsURL(queryParams) {
    return this.formBaseURL() + "/streams" + (isNonEmptyStringArg(queryParams) && queryParams.length > 0 ? "?" + queryParams : "");
  }
  formStreamIdsURL(queryParams) {
    return this.formBaseURL() + "/streamids" + (queryParams && queryParams.length > 0 ? "?" + queryParams : "");
  }
};
function stationsFromStreams(streams) {
  const out = /* @__PURE__ */ new Map();
  for (const s3 of streams) {
    const nslc_type = nslcSplit(s3.key);
    const nslc = nslc_type.nslc;
    const staKey = nslc.networkCode + "." + nslc.stationCode;
    let stat = out.get(staKey);
    if (!isDef(stat)) {
      stat = new StreamStat(staKey, s3.startRaw, s3.endRaw);
      out.set(staKey, stat);
    } else {
      if (stat.start > s3.start) {
        stat.start = s3.start;
        stat.startRaw = s3.startRaw;
      }
      if (stat.end < s3.end) {
        stat.end = s3.end;
        stat.endRaw = s3.endRaw;
      }
    }
  }
  return Array.from(out.values());
}
var NslcWithType = class {
  constructor(type2, nslc) {
    __publicField(this, "type");
    __publicField(this, "nslc");
    this.type = type2;
    this.nslc = nslc;
  }
};
function nslcSplit(id2) {
  const split = id2.split("/");
  const nslc = split[0].split("_");
  if (nslc.length === 4) {
    return new NslcWithType(split[1], new NslcId(nslc[0], nslc[1], nslc[2], nslc[3]));
  } else {
    throw new Error("tried to split, did not find 4 elements in array: " + id2);
  }
}
var StreamStat = class {
  constructor(key, start2, end) {
    __publicField(this, "key");
    __publicField(this, "startRaw");
    __publicField(this, "endRaw");
    __publicField(this, "start");
    __publicField(this, "end");
    this.key = key;
    this.startRaw = start2;
    this.endRaw = end;
    if (this.startRaw.indexOf(".") !== -1 && this.startRaw.indexOf(".") < this.startRaw.length - 4) {
      this.startRaw = this.startRaw.substring(
        0,
        this.startRaw.indexOf(".") + 4
      );
    }
    if (this.startRaw.charAt(this.startRaw.length - 1) !== "Z") {
      this.startRaw = this.startRaw + "Z";
    }
    if (this.endRaw.indexOf(".") !== -1 && this.endRaw.indexOf(".") < this.endRaw.length - 4) {
      this.endRaw = this.endRaw.substring(0, this.endRaw.indexOf(".") + 4);
    }
    if (this.endRaw.charAt(this.endRaw.length - 1) !== "Z") {
      this.endRaw = this.endRaw + "Z";
    }
    this.start = isoToDateTime(this.startRaw);
    this.end = isoToDateTime(this.endRaw);
    this.startRaw = start2;
    this.endRaw = end;
  }
  calcLatency(accessTime) {
    if (!accessTime)
      accessTime = DateTime.utc();
    return this.end.diff(accessTime);
  }
};

// src/sacpolezero.ts
var sacpolezero_exports = {};
__export(sacpolezero_exports, {
  SacPoleZero: () => SacPoleZero,
  geomspace: () => geomspace,
  linspace: () => linspace,
  logspace: () => logspace
});
var SacPoleZero = class {
  constructor(poles, zeros, constant) {
    __publicField(this, "poles");
    __publicField(this, "zeros");
    __publicField(this, "constant");
    __publicField(this, "gamma");
    __publicField(this, "mulFactor");
    __publicField(this, "sd");
    __publicField(this, "A0");
    this.poles = poles;
    this.zeros = zeros;
    this.constant = constant;
    this.mulFactor = 1;
    this.sd = 1;
    this.A0 = 1;
  }
  toString() {
    const s3 = ["sacPoleZero:"];
    s3.push("ZEROS " + this.zeros.length);
    for (let i = 0; i < this.zeros.length; i++) {
      s3.push("    " + this.zeros[i].real() + " " + this.zeros[i].imag());
    }
    s3.push("POLES " + this.poles.length);
    for (let i = 0; i < this.poles.length; i++) {
      s3.push("    " + this.poles[i].real() + " " + this.poles[i].imag());
    }
    s3.push("CONSTANT " + this.constant);
    if (isNumArg(this.gamma) && isNumArg(this.mulFactor) && isNumArg(this.sd) && isNumArg(this.A0)) {
      s3.push("*    gamma: " + this.gamma);
      s3.push("*    mulFactor: " + this.mulFactor);
      s3.push("*    sd: " + this.sd);
      s3.push("*    A0: " + this.A0);
    }
    return s3.join("\n");
  }
  evalPoleZeroInverse(freq) {
    const s3 = new Complex(0, 2 * Math.PI * freq);
    let zeroOut = new Complex(1, 0);
    let poleOut = new Complex(1, 0);
    for (let i = 0; i < this.poles.length; i++) {
      poleOut = poleOut.timesComplex(s3.minusComplex(this.poles[i]));
    }
    for (let i = 0; i < this.zeros.length; i++) {
      if (s3.real() === this.zeros[i].real() && s3.imag() === this.zeros[i].imag()) {
        return new Complex(0, 0);
      }
      zeroOut = zeroOut.timesComplex(s3.minusComplex(this.zeros[i]));
    }
    const out = poleOut.overComplex(zeroOut);
    return out.overReal(this.constant);
  }
  trimZeros(gamma2) {
    const sacPoleZero = this;
    for (let i = 0; i < gamma2; i++) {
      const z = sacPoleZero.zeros[sacPoleZero.zeros.length - 1 - i];
      if (z.real() !== 0 || z.imag() !== 0) {
        throw new Error(
          `Attempt to trim ${gamma2} zeros from SacPoleZero, but zero isn't 0+i0: ${stringify(
            z
          )}`
        );
      }
    }
    let trimmedZeros = sacPoleZero.zeros.slice().reverse();
    for (let i = 0; i < gamma2; i++) {
      const idx = trimmedZeros.findIndex((d) => d.real() === 0 && d.imag() === 0);
      trimmedZeros.splice(idx, 1);
    }
    trimmedZeros = trimmedZeros.reverse();
    sacPoleZero.zeros = trimmedZeros;
  }
  toText() {
    const s3 = [];
    s3.push("ZEROS " + this.zeros.length);
    for (let i = 0; i < this.zeros.length; i++) {
      s3.push("    " + this.zeros[i].real() + " " + this.zeros[i].imag());
    }
    s3.push("POLES " + this.poles.length);
    for (let i = 0; i < this.poles.length; i++) {
      s3.push("    " + this.poles[i].real() + " " + this.poles[i].imag());
    }
    s3.push("CONSTANT " + this.constant);
    return s3.join("\n");
  }
  calcForDisplay(freqs) {
    const out = freqs.map((freq) => {
      let respAtS = this.evalPoleZeroInverse(freq);
      respAtS = new Complex(1, 0).overComplex(respAtS);
      return respAtS;
    });
    return out;
  }
  static parse(data) {
    const pz = {
      zeros: Array(0),
      poles: Array(0),
      constant: 1
    };
    const lines = data.split("\n");
    let numZeros = 0;
    let numPoles = 0;
    let i = 0;
    while (i < lines.length) {
      let l2 = lines[i];
      let items = l2.trim().split(/ +/);
      if (items[0] === "ZEROS") {
        numZeros = parseInt(items[1]);
        i++;
        l2 = lines[i];
        items = l2.trim().split(/ +/);
        while (i < lines.length && pz.zeros.length < numZeros) {
          if (items[0] === "POLES") {
            for (let z = pz.zeros.length; z < numZeros; z++) {
              pz.zeros.push(new Complex(0, 0));
            }
            break;
          } else {
            const real = parseFloat(items[0]);
            const imag = parseFloat(items[1]);
            pz.zeros.push(new Complex(real, imag));
          }
          i++;
          l2 = lines[i];
          items = l2.trim().split(/ +/);
        }
      }
      if (items[0] === "POLES") {
        numPoles = parseInt(items[1]);
        i++;
        l2 = lines[i];
        items = l2.trim().split(/ +/);
        while (i < lines.length && pz.poles.length < numPoles) {
          if (items[0] === "CONSTANT") {
            for (let z = pz.poles.length; z < numPoles; z++) {
              pz.poles.push(new Complex(0, 0));
            }
            break;
          } else {
            const real = parseFloat(items[0]);
            const imag = parseFloat(items[1]);
            pz.poles.push(new Complex(real, imag));
          }
          i++;
          l2 = lines[i];
          items = l2.trim().split(/ +/);
        }
      }
      if (items[0] === "CONSTANT") {
        pz.constant = parseFloat(items[1]);
      }
      i++;
    }
    return new SacPoleZero(pz.poles, pz.zeros, pz.constant);
  }
};
function geomspace(start2, stop, num) {
  const log_start = Math.log(start2);
  const log_stop = Math.log(stop);
  return logspace(log_start, log_stop, num);
}
function logspace(start2, stop, num) {
  return linspace(start2, stop, num).map((n2) => Math.pow(10, n2));
}
function linspace(start2, stop, num) {
  const delta = (stop - start2) / (num - 1);
  const out = [];
  for (let i = 0; i < num; i++) {
    out.push(start2 + i * delta);
  }
  return out;
}

// src/seedlink.ts
var seedlink_exports = {};
__export(seedlink_exports, {
  SEEDLINK_PROTOCOL: () => SEEDLINK_PROTOCOL,
  SeedlinkConnection: () => SeedlinkConnection
});
var SEEDLINK_PROTOCOL = "SeedLink3.1";
var SeedlinkConnection = class {
  constructor(url, requestConfig, receiveMiniseedFn, errorHandler) {
    __publicField(this, "url");
    __publicField(this, "requestConfig");
    __publicField(this, "receiveMiniseedFn");
    __publicField(this, "errorHandler");
    __publicField(this, "closeFn");
    __publicField(this, "webSocket");
    __publicField(this, "command");
    this.url = url;
    this.requestConfig = requestConfig;
    this.receiveMiniseedFn = receiveMiniseedFn;
    this.errorHandler = errorHandler;
    this.closeFn = null;
    this.command = "DATA";
    this.webSocket = null;
  }
  setTimeCommand(startTime) {
    this.command = "TIME " + startTime.toFormat("yyyy,LL,dd,HH,mm,ss");
  }
  setOnError(errorHandler) {
    this.errorHandler = errorHandler;
  }
  setOnClose(closeFn) {
    this.closeFn = closeFn;
  }
  connect() {
    if (this.webSocket) {
      this.webSocket.close();
      this.webSocket = null;
    }
    try {
      const webSocket = new WebSocket(this.url, SEEDLINK_PROTOCOL);
      this.webSocket = webSocket;
      webSocket.binaryType = "arraybuffer";
      const that = this;
      webSocket.onopen = function() {
        that.sendHello().then(function() {
          return that.sendCmdArray(that.requestConfig);
        }).then(function() {
          return that.sendCmdArray([that.command]);
        }).then(function(val) {
          webSocket.onmessage = function(event) {
            that.handle(event);
          };
          webSocket.send("END\r");
          return val;
        }).catch((err) => {
          if (that.errorHandler) {
            that.errorHandler(err);
          } else {
            throw err;
          }
          that.close();
        });
      };
      webSocket.onerror = function(event) {
        that.handleError(new Error("" + stringify(event)));
        that.close();
      };
      webSocket.onclose = function(closeEvent) {
        if (that.closeFn) {
          that.closeFn(closeEvent);
        }
        if (that.webSocket) {
          that.webSocket = null;
        }
      };
    } catch (err) {
      if (this.errorHandler) {
        this.errorHandler(toError(err));
      } else {
        throw err;
      }
    }
  }
  close() {
    if (this.webSocket) {
      this.webSocket.close();
    }
  }
  handle(event) {
    const data = event.data;
    if (data.byteLength < 64) {
    } else {
      this.handleMiniseed(event);
    }
  }
  handleMiniseed(event) {
    const data = event.data;
    try {
      if (data.byteLength < 64) {
        this.errorHandler(
          new Error(
            "message too small to be miniseed: " + data.byteLength + " " + dataViewToString(new DataView(data))
          )
        );
        return;
      }
      const slHeader = new DataView(data, 0, 8);
      if (slHeader.getInt8(0) === 83 && slHeader.getInt8(1) === 76) {
        let seqStr = "";
        for (let i = 0; i < 6; i++) {
          seqStr = seqStr + String.fromCharCode(slHeader.getInt8(2 + i));
        }
        const dataView = new DataView(data, 8, data.byteLength - 8);
        const out = {
          rawsequence: seqStr,
          sequence: parseInt(seqStr, 16),
          miniseed: parseSingleDataRecord(dataView)
        };
        this.receiveMiniseedFn(out);
      } else {
        throw new Error(
          "Not a seedlink packet, no starting SL: " + slHeader.getInt8(0) + " " + slHeader.getInt8(1)
        );
      }
    } catch (e) {
      this.errorHandler(toError(e));
      this.close();
    }
  }
  isConnected() {
    return this.webSocket !== null;
  }
  sendHello() {
    const webSocket = this.webSocket;
    const promise = new Promise(function(resolve, reject) {
      if (webSocket) {
        webSocket.onmessage = function(event) {
          const data = event.data;
          const replyMsg = dataViewToString(new DataView(data));
          const lines = replyMsg.trim().split("\r");
          if (lines.length === 2) {
            resolve([lines[0], lines[1]]);
          } else {
            reject("not 2 lines: " + replyMsg);
          }
        };
        webSocket.send("HELLO\r");
      } else {
        reject("webSocket has been closed");
      }
    });
    return promise;
  }
  sendCmdArray(cmd) {
    const that = this;
    return cmd.reduce(function(accum, next) {
      return accum.then(function() {
        return that.createCmdPromise(next);
      });
    }, Promise.resolve("OK"));
  }
  createCmdPromise(mycmd) {
    const webSocket = this.webSocket;
    const promise = new Promise(function(resolve, reject) {
      if (webSocket) {
        webSocket.onmessage = function(event) {
          const data = event.data;
          const replyMsg = dataViewToString(new DataView(data)).trim();
          if (replyMsg === "OK") {
            resolve(replyMsg);
          } else {
            reject("msg not OK: " + replyMsg);
          }
        };
        webSocket.send(mycmd + "\r\n");
      } else {
        reject("webSocket has been closed");
      }
    });
    return promise;
  }
  handleError(error) {
    if (this.errorHandler) {
      this.errorHandler(error);
    } else {
      log("seedlink handleError: " + error.message);
    }
  }
};

// src/seedlink4.ts
var seedlink4_exports = {};
__export(seedlink4_exports, {
  MINISEED_2_FORMAT: () => MINISEED_2_FORMAT,
  MINISEED_3_FORMAT: () => MINISEED_3_FORMAT,
  SEEDLINK4_PROTOCOL: () => SEEDLINK4_PROTOCOL,
  SEPacket: () => SEPacket,
  SE_PACKET_SIGNATURE: () => SE_PACKET_SIGNATURE,
  SeedlinkConnection: () => SeedlinkConnection2
});

// src/version.ts
var version2 = "3.0.0-alpha.1";

// src/seedlink4.ts
var SEEDLINK4_PROTOCOL = "SLPROTO4.0";
var MINISEED_2_FORMAT = "2";
var MINISEED_3_FORMAT = "3";
var SE_PACKET_SIGNATURE = "SE";
var useLittleEndian = true;
var SEPacket = class {
  constructor(dataFormat, dataSubformat, payloadLength, sequence, stationId) {
    __publicField(this, "dataFormat");
    __publicField(this, "dataSubformat");
    __publicField(this, "payloadLength");
    __publicField(this, "sequence");
    __publicField(this, "stationId");
    __publicField(this, "_miniseed");
    __publicField(this, "_mseed3");
    __publicField(this, "_json");
    __publicField(this, "_rawPayload");
    this.dataFormat = dataFormat;
    this.dataSubformat = dataSubformat;
    this.payloadLength = payloadLength;
    this.sequence = sequence;
    this.stationId = stationId;
    this._miniseed = null;
    this._mseed3 = null;
    this._json = null;
    this._rawPayload = null;
  }
  static parse(data) {
    let sePacket;
    if (data.byteLength < 16) {
      throw new Error(
        "message too small to be SE packet: " + data.byteLength + " " + dataViewToString(new DataView(data))
      );
    }
    const slHeader = new DataView(data, 0, 16);
    const sig = String.fromCharCode(slHeader.getUint8(0), slHeader.getUint8(1));
    if (sig === SE_PACKET_SIGNATURE) {
      const dataFormat = slHeader.getUint8(2);
      const dataSubformat = slHeader.getUint8(3);
      const payloadLength = slHeader.getUint32(4, useLittleEndian);
      const sequenceNum = slHeader.getBigUint64(8, useLittleEndian);
      const stationIdLength = slHeader.getUint8(16);
      const stationIdDV = new DataView(data, 17, stationIdLength);
      const stationId = dataViewToString(stationIdDV);
      const dataView = new DataView(
        data,
        17 + stationIdLength,
        data.byteLength - 16
      );
      sePacket = new SEPacket(
        String.fromCharCode(dataFormat),
        String.fromCharCode(dataSubformat),
        payloadLength,
        sequenceNum,
        stationId
      );
      sePacket._rawPayload = dataView;
      if (dataFormat === 50) {
        sePacket._miniseed = parseSingleDataRecord(dataView);
      } else if (dataFormat === 51) {
        sePacket._mseed3 = MSeed3Record.parseSingleDataRecord(dataView);
      } else if (dataFormat === 74) {
        sePacket._json = JSON.parse(dataViewToString(dataView));
      }
    } else {
      throw new Error(
        "Not a seedlink4 packet, no starting SE: " + slHeader.getInt8(0) + " " + slHeader.getInt8(1)
      );
    }
    return sePacket;
  }
  isMiniseed() {
    return isDef(this._miniseed) || this.dataFormat === MINISEED_2_FORMAT;
  }
  asMiniseed() {
    if (!isDef(this._rawPayload)) {
      throw new Error(
        `payload is missing in packet from ${this.stationId}, seq: ${this.sequence}`
      );
    }
    if (!isDef(this._miniseed)) {
      if (this.dataFormat === MINISEED_2_FORMAT && isDef(this._rawPayload)) {
        this._miniseed = parseSingleDataRecord(this._rawPayload);
      } else {
        this._miniseed = null;
      }
    }
    return this._miniseed;
  }
  isMiniseed3() {
    return isDef(this._mseed3) || this.dataFormat === MINISEED_3_FORMAT;
  }
  asMiniseed3() {
    if (!isDef(this._rawPayload)) {
      throw new Error(
        `payload is missing in packet from ${this.stationId}, seq: ${this.sequence}`
      );
    }
    if (!isDef(this._mseed3)) {
      if (this.dataFormat === MINISEED_3_FORMAT && isDef(this._rawPayload)) {
        this._mseed3 = MSeed3Record.parseSingleDataRecord(
          this._rawPayload
        );
      } else if (this.isMiniseed()) {
        const ms2 = this.asMiniseed();
        if (ms2) {
          this._mseed3 = convertMS2Record(ms2);
        }
      } else {
        this._mseed3 = null;
      }
    }
    return this._mseed3;
  }
};
var SeedlinkConnection2 = class {
  constructor(url, requestConfig, receivePacketFn, errorHandler) {
    __publicField(this, "url");
    __publicField(this, "requestConfig");
    __publicField(this, "receivePacketFn");
    __publicField(this, "errorHandler");
    __publicField(this, "closeFn");
    __publicField(this, "webSocket");
    __publicField(this, "command");
    __publicField(this, "agent");
    __publicField(this, "agentVersion");
    this.webSocket = null;
    this.url = url;
    this.requestConfig = requestConfig;
    this.receivePacketFn = receivePacketFn;
    this.errorHandler = errorHandler;
    this.closeFn = null;
    this.command = "DATA";
    this.agent = "seisplotjs";
    this.agentVersion = version2;
  }
  setAgent(agent) {
    this.agent = agent.trim().replaceAll(/\w+/g, "_");
  }
  setTimeCommand(startTime) {
    this.command = "TIME " + startTime.toFormat("yyyy,LL,dd,HH,mm,ss");
  }
  setOnError(errorHandler) {
    this.errorHandler = errorHandler;
  }
  setOnClose(closeFn) {
    this.closeFn = closeFn;
  }
  connect() {
    const that = this;
    this.interactiveConnect().then(() => {
      return that.sendHello();
    }).then(function(lines) {
      if (that.checkProto(lines)) {
        return true;
      } else {
        throw new Error(`${SEEDLINK4_PROTOCOL} not found in HELLO response`);
      }
    }).then(function() {
      return that.sendCmdArray([
        `USERAGENT ${that.agent}/${that.agentVersion} (seisplotjs/${version2})`
      ]);
    }).then(function() {
      return that.sendCmdArray(that.requestConfig);
    }).then(function() {
      return that.sendCmdArray([that.command]);
    }).then(function(val) {
      if (that.webSocket === null) {
        throw new Error("websocket is null");
      }
      that.webSocket.onmessage = function(event) {
        that.handle(event);
      };
      that.webSocket.send("END\r");
      return val;
    }).catch((err) => {
      if (that.errorHandler) {
        that.errorHandler(err);
      } else {
        throw err;
      }
      that.close();
    });
  }
  interactiveConnect() {
    if (this.webSocket) {
      this.webSocket.close();
      this.webSocket = null;
    }
    const that = this;
    return new Promise(function(resolve, reject) {
      try {
        const webSocket = new WebSocket(that.url, SEEDLINK4_PROTOCOL);
        that.webSocket = webSocket;
        webSocket.binaryType = "arraybuffer";
        webSocket.onopen = function() {
          resolve(that);
        };
        webSocket.onerror = function(event) {
          that.handleError(new Error("" + stringify(event)));
          reject(event);
        };
        webSocket.onclose = function(closeEvent) {
          if (that.closeFn) {
            that.closeFn(closeEvent);
          }
          if (that.webSocket) {
            that.webSocket = null;
          }
        };
      } catch (err) {
        if (that.errorHandler) {
          that.errorHandler(toError(err));
        }
        reject(err);
      }
    }).then(function(sl4) {
      return sl4;
    });
  }
  checkProto(lines) {
    const sl = lines[0].split("::");
    const caps = sl[1].trim().split(" ");
    for (const c5 of caps) {
      if (c5 === SEEDLINK4_PROTOCOL) {
        return true;
      }
    }
    return false;
  }
  close() {
    if (this.webSocket) {
      this.webSocket.close();
    }
    this.webSocket = null;
  }
  handle(event) {
    const rawdata = event.data;
    const data = new Uint8Array(rawdata);
    if (data[0] === 83 && data[1] === 69) {
      this.handleSEPacket(event);
    } else {
      this.errorHandler(
        new Error(`Packet does not look like SE packet: ${data[0]} ${data[1]}`)
      );
    }
  }
  handleSEPacket(event) {
    const data = event.data;
    try {
      const out = SEPacket.parse(data);
      this.receivePacketFn(out);
    } catch (e) {
      this.errorHandler(toError(e));
      this.close();
    }
  }
  isConnected() {
    return this.webSocket !== null;
  }
  sendHello() {
    const webSocket = this.webSocket;
    const promise = new Promise(function(resolve, reject) {
      if (webSocket) {
        webSocket.onmessage = function(event) {
          const data = event.data;
          const replyMsg = dataViewToString(new DataView(data));
          const lines = replyMsg.trim().split("\r");
          if (lines.length === 2) {
            resolve(lines);
          } else {
            reject("not 2 lines: " + replyMsg);
          }
        };
        webSocket.send("HELLO\r");
      } else {
        reject("webSocket has been closed");
      }
    });
    return promise;
  }
  sendCmdArray(cmd) {
    const that = this;
    return cmd.reduce(function(accum, next) {
      return accum.then(function() {
        return that.createCmdPromise(next);
      });
    }, Promise.resolve("OK"));
  }
  createCmdPromise(mycmd) {
    const webSocket = this.webSocket;
    const promise = new Promise(function(resolve, reject) {
      if (webSocket) {
        webSocket.onmessage = function(event) {
          const data = event.data;
          const replyMsg = dataViewToString(new DataView(data)).trim();
          if (replyMsg === "OK") {
            resolve(replyMsg);
          } else {
            reject("msg not OK: " + replyMsg);
          }
        };
        webSocket.send(mycmd + "\r\n");
      } else {
        reject("webSocket has been closed");
      }
    });
    return promise;
  }
  handleError(error) {
    if (this.errorHandler) {
      this.errorHandler(error);
    } else {
      log("seedlink4 handleError: " + error.message);
    }
  }
};

// src/seismogramloader.ts
var seismogramloader_exports = {};
__export(seismogramloader_exports, {
  SeismogramLoader: () => SeismogramLoader
});

// src/traveltime.ts
var traveltime_exports = {};
__export(traveltime_exports, {
  FAKE_EMPTY_SVG: () => FAKE_EMPTY_SVG,
  FAKE_EMPTY_TEXT_HEADERS: () => FAKE_EMPTY_TEXT_HEADERS,
  FAKE_EMPTY_TEXT_MODEL: () => FAKE_EMPTY_TEXT_MODEL,
  IRIS_HOST: () => IRIS_HOST3,
  JSON_FORMAT: () => JSON_FORMAT,
  SVG_FORMAT: () => SVG_FORMAT,
  TEXT_FORMAT: () => TEXT_FORMAT,
  TraveltimeQuery: () => TraveltimeQuery,
  convertTravelTimeLineToObject: () => convertTravelTimeLineToObject,
  createOriginArrival: () => createOriginArrival
});
var IRIS_HOST3 = "service.iris.edu";
var TEXT_FORMAT = "text";
var JSON_FORMAT = "json";
var SVG_FORMAT = "svg";
function convertTravelTimeLineToObject(ttimeline) {
  const items = ttimeline.trim().split(/\s+/);
  return {
    distdeg: parseFloat(items[0]),
    phase: items[2],
    time: parseFloat(items[3]),
    rayparam: parseFloat(items[4]),
    takeoff: parseFloat(items[5]),
    incident: parseFloat(items[6]),
    puristdist: parseFloat(items[7]),
    puristname: items[9]
  };
}
function createOriginArrival(dist2) {
  return {
    distdeg: dist2,
    phase: "origin",
    time: 0,
    rayparam: 0,
    takeoff: 0,
    incident: 0,
    puristdist: dist2,
    puristname: "origin"
  };
}
var TraveltimeQuery = class extends FDSNCommon {
  constructor(host) {
    if (!isNonEmptyStringArg(host)) {
      host = IRIS_HOST3;
    }
    super(host);
    __publicField(this, "_evdepth");
    __publicField(this, "_distdeg");
    __publicField(this, "_model");
    __publicField(this, "_phases");
    __publicField(this, "_stalat");
    __publicField(this, "_stalon");
    __publicField(this, "_evlat");
    __publicField(this, "_evlon");
    __publicField(this, "_format");
    __publicField(this, "_noheader");
    this._evdepth = 0;
    this._format = JSON_FORMAT;
    this._noheader = false;
  }
  protocol(value) {
    doStringGetterSetter(this, "protocol", value);
    return this;
  }
  getProtocol() {
    return this._protocol;
  }
  host(value) {
    doStringGetterSetter(this, "host", value);
    return this;
  }
  getHost() {
    return this._host;
  }
  port(value) {
    doIntGetterSetter(this, "port", value);
    return this;
  }
  getPort() {
    return this._port;
  }
  nodata(value) {
    doIntGetterSetter(this, "nodata", value);
    return this;
  }
  getNodata() {
    return this._nodata;
  }
  specVersion(value) {
    doStringGetterSetter(this, "specVersion", value);
    return this;
  }
  getSpecVersion() {
    return this._specVersion;
  }
  evdepth(value) {
    doFloatGetterSetter(this, "evdepth", value);
    return this;
  }
  evdepthInMeter(value) {
    doFloatGetterSetter(
      this,
      "evdepth",
      isDef(value) ? value / 1e3 : value
    );
    return this;
  }
  getEvdepth() {
    return this._evdepth;
  }
  distdeg(value) {
    if (typeof value === "number") {
      this._distdeg = [value];
    } else {
      this._distdeg = value;
    }
    return this;
  }
  getDistdeg() {
    return this._distdeg;
  }
  model(value) {
    doStringGetterSetter(this, "model", value);
    return this;
  }
  getModel() {
    return this._model;
  }
  phases(value) {
    doStringGetterSetter(this, "phases", value);
    return this;
  }
  getPhases() {
    return this._phases;
  }
  stalat(value) {
    doFloatGetterSetter(this, "stalat", value);
    return this;
  }
  getStalat() {
    return this._stalat;
  }
  stalon(value) {
    doFloatGetterSetter(this, "stalon", value);
    return this;
  }
  getStalon() {
    return this._stalon;
  }
  latLonFromStation(station) {
    this.stalat(station.latitude);
    this.stalon(station.longitude);
    return this;
  }
  evlat(value) {
    doFloatGetterSetter(this, "evlat", value);
    return this;
  }
  getEvlat() {
    return this._evlat;
  }
  evlon(value) {
    doFloatGetterSetter(this, "evlon", value);
    return this;
  }
  getEvlon() {
    return this._evlon;
  }
  latLonFromQuake(quake) {
    this.evlat(quake.latitude);
    this.evlon(quake.longitude);
    this.evdepthInMeter(quake.depth);
    return this;
  }
  format(value) {
    doStringGetterSetter(this, "format", value);
    return this;
  }
  getFormat() {
    return this._format;
  }
  noheader(value) {
    doBoolGetterSetter(this, "noheader", value);
    return this;
  }
  getNoheader() {
    return this._noheader;
  }
  timeout(value) {
    doFloatGetterSetter(this, "timeoutSec", value);
    return this;
  }
  getTimeout() {
    return this._timeoutSec;
  }
  queryText() {
    this.format(TEXT_FORMAT);
    const mythis = this;
    const url = this.formURL();
    const fetchInit = defaultFetchInitObj(TEXT_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(
      function(response) {
        if (response.status === 204 || isDef(mythis._nodata) && response.status === mythis._nodata) {
          return FAKE_EMPTY_TEXT_MODEL + (isDef(mythis._model) ? mythis.model() : "") + FAKE_EMPTY_TEXT_HEADERS;
        } else {
          return response.text();
        }
      }
    );
  }
  queryJson() {
    this.format(JSON_FORMAT);
    const mythis = this;
    const url = this.formURL();
    const fetchInit = defaultFetchInitObj(JSON_MIME);
    return doFetchWithTimeout(url, fetchInit, mythis._timeoutSec * 1e3).then(
      function(response) {
        if (response.status === 204 || isDef(mythis._nodata) && response.status === mythis._nodata) {
          return {
            model: isDef(mythis._model) ? mythis._model : "",
            sourcedepth: isDef(mythis._evdepth) ? mythis._evdepth : 0,
            receiverdepth: 0,
            phases: isDef(mythis._phases) ? mythis._phases.split(",") : [],
            arrivals: []
          };
        } else {
          return response.json();
        }
      }
    );
  }
  querySvg() {
    this.format(SVG_FORMAT);
    const mythis = this;
    const url = this.formURL();
    const fetchInit = defaultFetchInitObj(SVG_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(function(response) {
      if (response.status === 200) {
        return response.text();
      } else if (response.status === 204 || isDef(mythis._nodata) && response.status === mythis._nodata) {
        return FAKE_EMPTY_SVG;
      } else {
        throw new Error(`Status not successful: ${response.status}`);
      }
    }).then(function(rawXmlText) {
      return new DOMParser().parseFromString(rawXmlText, SVG_MIME);
    }).then((xml) => {
      const elArray = xml.getElementsByTagName("svg");
      if (elArray.length > 0) {
        return elArray[0];
      } else {
        throw new Error("Can't find svg element in response");
      }
    });
  }
  queryWadl() {
    return fetch(this.formWadlURL()).then((response) => {
      if (response.ok) {
        return response.text().then(
          (textResponse) => new window.DOMParser().parseFromString(textResponse, "text/xml")
        );
      } else {
        throw new Error(
          "Fetching over network was not ok: " + response.status + " " + response.statusText
        );
      }
    });
  }
  query() {
    if (this._format === JSON_FORMAT) {
      return this.queryJson();
    } else if (this._format === SVG_FORMAT) {
      return this.querySvg();
    } else if (this._format === TEXT_FORMAT) {
      return this.queryText();
    } else {
      throw new Error("Unknown format: " + this._format);
    }
  }
  formBaseURL() {
    let colon = ":";
    if (this._protocol.endsWith(colon)) {
      colon = "";
    }
    const url = this._protocol + colon + "//" + this._host + (this._port === 80 ? "" : ":" + this._port) + "/irisws/traveltime/" + this._specVersion + "/";
    return url;
  }
  formURL() {
    let url = this.formBaseURL() + "query?";
    if (isDef(this._noheader) && this._noheader) {
      url = url + "noheader=true&";
    }
    if (isDef(this._evdepth) && this._evdepth !== 0) {
      url = url + makeParam("evdepth", this._evdepth);
    }
    if (isDef(this._stalat) && isDef(this._stalon)) {
      url = url + makeParam(
        "staloc",
        "[" + stringify(this._stalat) + "," + stringify(this._stalon) + "]"
      );
    }
    if (isDef(this._evlat) && isDef(this._evlon)) {
      url = url + makeParam(
        "evloc",
        "[" + stringify(this._evlat) + "," + stringify(this._evlon) + "]"
      );
    }
    if (isDef(this._distdeg)) {
      url = url + makeParam("distdeg", this._distdeg.join(","));
    }
    if (isDef(this._model)) {
      url = url + makeParam("model", this._model);
    }
    if (isDef(this._phases)) {
      url = url + makeParam("phases", this._phases);
    }
    if (isDef(this._format)) {
      url = url + makeParam("format", this._format);
    }
    if (isDef(this._nodata)) {
      url = url + makeParam("nodata", this._nodata);
    }
    if (url.endsWith("&") || url.endsWith("?")) {
      url = url.substr(0, url.length - 1);
    }
    return url;
  }
  queryTauPVersion() {
    return fetch(this.formTauPVersionURL()).then((response) => {
      if (response.ok) {
        return response.text();
      } else {
        throw new Error(
          "Fetching over network was not ok: " + response.status + " " + response.statusText
        );
      }
    });
  }
  formTauPVersionURL() {
    return this.formBaseURL() + "taupversion";
  }
  formWadlURL() {
    return this.formBaseURL() + "application.wadl";
  }
};
var FAKE_EMPTY_TEXT_MODEL = `Model: `;
var FAKE_EMPTY_TEXT_HEADERS = `
Distance   Depth   Phase   Travel    Ray Param  Takeoff  Incident  Purist    Purist
  (deg)     (km)   Name    Time (s)  p (s/deg)   (deg)    (deg)   Distance   Name
-----------------------------------------------------------------------------------
`;
var FAKE_EMPTY_SVG = `
<svg version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" width="500" height="500" viewBox="0 0 14016.2 14016.2">
<!--
 This script will plot ray paths generated by TauP using SVG. -->
<defs>
    <style type="text/css"><![CDATA[
        circle {
            vector-effect: non-scaling-stroke;
            stroke: grey;
            fill: none;
        }
        polyline {
            vector-effect: non-scaling-stroke;
            stroke: black;
            fill: none;
        }
    ]]></style>
</defs>
<g transform="translate(7008.1,7008.1)" >
<!-- draw surface and label distances.-->
<!-- tick marks every 30 degrees.-->
  <polyline points="    0.00  -6371.00,     0.00  -6689.55" />
  <polyline points=" 3185.50  -5517.45,  3344.78  -5793.32" />
  <polyline points=" 5517.45  -3185.50,  5793.32  -3344.77" />
  <polyline points=" 6371.00      0.00,  6689.55      0.00" />
  <polyline points=" 5517.45   3185.50,  5793.32   3344.77" />
  <polyline points=" 3185.50   5517.45,  3344.78   5793.32" />
  <polyline points="    0.00   6371.00,     0.00   6689.55" />
  <polyline points="-3185.50   5517.45, -3344.77   5793.32" />
  <polyline points="-5517.45   3185.50, -5793.32   3344.77" />
  <polyline points="-6371.00      0.00, -6689.55      0.00" />
  <polyline points="-5517.45  -3185.50, -5793.32  -3344.78" />
  <polyline points="-3185.50  -5517.45, -3344.78  -5793.32" />
  <circle cx="0.0" cy="0.0" r="6371.0" />
  </g>
</svg>
`;

// src/irisfedcatalog.ts
var SERVICE_VERSION5 = 1;
var SERVICE_NAME5 = `irisws-fedcatalog-${SERVICE_VERSION5}`;
var IRIS_HOST4 = "service.iris.edu";
var TARGET_DATASELECT = "dataselect";
var FAKE_EMPTY_TEXT = "\n";
var FedCatalogDataCenter = class {
  constructor() {
    __publicField(this, "dataCenter");
    __publicField(this, "services");
    __publicField(this, "stationService");
    __publicField(this, "dataSelectService");
    __publicField(this, "postLines");
    __publicField(this, "stationQuery");
    __publicField(this, "dataSelectQuery");
    __publicField(this, "level");
    this.dataCenter = "";
    this.stationService = "";
    this.dataSelectService = "";
    this.postLines = [];
    this.services = /* @__PURE__ */ new Map();
    this.stationQuery = null;
    this.dataSelectQuery = null;
    this.level = LEVEL_NETWORK;
  }
  queryNetworkList() {
    if (this.stationQuery) {
      return this.stationQuery.postQuery(
        this.level,
        this.postLines
      );
    } else {
      return Promise.all([]);
    }
  }
  queryStationRawXml() {
    if (isDef(this.stationQuery)) {
      return this.stationQuery.postQueryRawXml(
        this.level,
        this.postLines
      );
    } else {
      throw new Error("this.stationQuery does not exist.");
    }
  }
  querySDDList() {
    if (isDef(this.dataSelectQuery)) {
      const sddList = this.postLines.map((line) => {
        const items = line.split(" ");
        const start2 = isoToDateTime(items[4]);
        const end = isoToDateTime(items[5]);
        return SeismogramDisplayData.fromCodesAndTimes(
          items[0],
          items[1],
          items[2],
          items[3],
          start2,
          end
        );
      });
      return this.dataSelectQuery.postQuerySeismograms(sddList);
    } else {
      return Promise.all([]);
    }
  }
};
var FedCatalogResult = class {
  constructor() {
    __publicField(this, "params");
    __publicField(this, "queries");
    this.params = /* @__PURE__ */ new Map();
    this.queries = [];
  }
};
var FedCatalogQuery = class extends FDSNCommon {
  constructor(host) {
    if (!isNonEmptyStringArg(host)) {
      host = IRIS_HOST4;
    }
    super(host);
    __publicField(this, "_targetService");
    __publicField(this, "_level");
    __publicField(this, "_networkCode");
    __publicField(this, "_stationCode");
    __publicField(this, "_locationCode");
    __publicField(this, "_channelCode");
    __publicField(this, "_startTime");
    __publicField(this, "_endTime");
    __publicField(this, "_startBefore");
    __publicField(this, "_endBefore");
    __publicField(this, "_startAfter");
    __publicField(this, "_endAfter");
    __publicField(this, "_minLat");
    __publicField(this, "_maxLat");
    __publicField(this, "_minLon");
    __publicField(this, "_maxLon");
    __publicField(this, "_latitude");
    __publicField(this, "_longitude");
    __publicField(this, "_minRadius");
    __publicField(this, "_maxRadius");
    __publicField(this, "_includeRestricted");
    __publicField(this, "_includeAvailability");
    __publicField(this, "_format");
    __publicField(this, "_updatedAfter");
    __publicField(this, "_matchTimeseries");
    __publicField(this, "fedCatResult");
    this.fedCatResult = null;
  }
  static fromStationQuery(stationQuery) {
    const out = new FedCatalogQuery();
    if (!(stationQuery instanceof StationQuery)) {
      throw new Error(
        "1st arg must be a StationQuery: " + stringify(stationQuery)
      );
    }
    if (!stationQuery.isSomeParameterSet()) {
      throw new Error(
        "Some parameters must be set in the stationQuery to avoid asking for everything."
      );
    }
    if (isStringArg(stationQuery._networkCode)) {
      out.networkCode(stationQuery._networkCode);
    }
    if (isStringArg(stationQuery._stationCode)) {
      out.stationCode(stationQuery._stationCode);
    }
    if (isStringArg(stationQuery._locationCode)) {
      out.locationCode(stationQuery._locationCode);
    }
    if (isStringArg(stationQuery._channelCode)) {
      out.channelCode(stationQuery._channelCode);
    }
    if (isObject(stationQuery._startTime)) {
      out.startTime(stationQuery._startTime);
    }
    if (isObject(stationQuery._endTime)) {
      out.endTime(stationQuery._endTime);
    }
    if (isObject(stationQuery._startBefore)) {
      out.startBefore(stationQuery._startBefore);
    }
    if (isObject(stationQuery._startAfter)) {
      out.startAfter(stationQuery._startAfter);
    }
    if (isObject(stationQuery._endBefore)) {
      out.endBefore(stationQuery._endBefore);
    }
    if (isObject(stationQuery._endAfter)) {
      out.endAfter(stationQuery._endAfter);
    }
    if (isNumArg(stationQuery._minLat)) {
      out.minLat(stationQuery._minLat);
    }
    if (isNumArg(stationQuery._maxLat)) {
      out.maxLat(stationQuery._maxLat);
    }
    if (isNumArg(stationQuery._minLon)) {
      out.minLon(stationQuery._minLon);
    }
    if (isNumArg(stationQuery._maxLon)) {
      out.maxLon(stationQuery._maxLon);
    }
    if (isNumArg(stationQuery._latitude)) {
      out.latitude(stationQuery._latitude);
    }
    if (isNumArg(stationQuery._longitude)) {
      out.longitude(stationQuery._longitude);
    }
    if (isNumArg(stationQuery._minRadius)) {
      out.minRadius(stationQuery._minRadius);
    }
    if (isNumArg(stationQuery._maxRadius)) {
      out.maxRadius(stationQuery._maxRadius);
    }
    if (isDef(stationQuery._includeRestricted)) {
      out.includeRestricted(stationQuery._includeRestricted);
    }
    if (isDef(stationQuery._includeAvailability)) {
      out.includeAvailability(stationQuery._includeAvailability);
    }
    if (isObject(stationQuery._updatedAfter)) {
      out.updatedAfter(stationQuery._updatedAfter);
    }
    if (isDef(stationQuery._matchTimeseries)) {
      out.matchTimeseries(stationQuery._matchTimeseries);
    }
    return out;
  }
  specVersion(value) {
    doStringGetterSetter(this, "specVersion", value);
    return this;
  }
  getSpecVersion() {
    return this._specVersion;
  }
  protocol(value) {
    doStringGetterSetter(this, "protocol", value);
    return this;
  }
  getProtocol() {
    return this._protocol;
  }
  host(value) {
    doStringGetterSetter(this, "host", value);
    return this;
  }
  getHost() {
    return this._host;
  }
  port(value) {
    doIntGetterSetter(this, "port", value);
    return this;
  }
  getPort() {
    return this._port;
  }
  nodata(value) {
    doIntGetterSetter(this, "nodata", value);
    return this;
  }
  getNodata() {
    return this._nodata;
  }
  targetService(value) {
    doStringGetterSetter(this, "targetService", value);
    return this;
  }
  getTargetService() {
    return this._targetService;
  }
  networkCode(value) {
    doStringGetterSetter(this, "networkCode", value);
    return this;
  }
  getNetworkCode() {
    return this._networkCode;
  }
  stationCode(value) {
    doStringGetterSetter(this, "stationCode", value);
    return this;
  }
  getStationCode() {
    return this._stationCode;
  }
  locationCode(value) {
    doStringGetterSetter(this, "locationCode", value);
    return this;
  }
  getLocationCode() {
    return this._locationCode;
  }
  channelCode(value) {
    doStringGetterSetter(this, "channelCode", value);
    return this;
  }
  getChannelCode() {
    return this._channelCode;
  }
  nslcCodes(channelId) {
    this.networkCode(channelId.networkCode);
    this.stationCode(channelId.stationCode);
    this.locationCode(channelId.locationCode);
    this.channelCode(channelId.channelCode);
    return this;
  }
  startTime(value) {
    doMomentGetterSetter(this, "startTime", value);
    return this;
  }
  getStartTime() {
    return this._startTime;
  }
  endTime(value) {
    doMomentGetterSetter(this, "endTime", value);
    return this;
  }
  getEndTime() {
    return this._endTime;
  }
  timeRange(se) {
    this.startTime(se.start);
    this.endTime(se.end);
    return this;
  }
  timeWindow(se) {
    return this.timeRange(se);
  }
  startBefore(value) {
    doMomentGetterSetter(this, "startBefore", value);
    return this;
  }
  getStartBefore() {
    return this._startBefore;
  }
  endBefore(value) {
    doMomentGetterSetter(this, "endBefore", value);
    return this;
  }
  getEndBefore() {
    return this._endBefore;
  }
  startAfter(value) {
    doMomentGetterSetter(this, "startAfter", value);
    return this;
  }
  getStartAfter() {
    return this._startAfter;
  }
  endAfter(value) {
    doMomentGetterSetter(this, "endAfter", value);
    return this;
  }
  getEndAfter() {
    return this._endAfter;
  }
  minLat(value) {
    doFloatGetterSetter(this, "minLat", value);
    return this;
  }
  getMinLat() {
    return this._minLat;
  }
  maxLat(value) {
    doFloatGetterSetter(this, "maxLat", value);
    return this;
  }
  getMaxLat() {
    return this._maxLat;
  }
  minLon(value) {
    doFloatGetterSetter(this, "minLon", value);
    return this;
  }
  getMinLon() {
    return this._minLon;
  }
  maxLon(value) {
    doFloatGetterSetter(this, "maxLon", value);
    return this;
  }
  getMaxLon() {
    return this._maxLon;
  }
  latitude(value) {
    doFloatGetterSetter(this, "latitude", value);
    return this;
  }
  getLatitude() {
    return this._latitude;
  }
  longitude(value) {
    doFloatGetterSetter(this, "longitude", value);
    return this;
  }
  getLongitude() {
    return this._longitude;
  }
  minRadius(value) {
    doFloatGetterSetter(this, "minRadius", value);
    return this;
  }
  getMinRadius() {
    return this._minRadius;
  }
  maxRadius(value) {
    doFloatGetterSetter(this, "maxRadius", value);
    return this;
  }
  getMaxRadius() {
    return this._maxRadius;
  }
  includeRestricted(value) {
    doBoolGetterSetter(this, "includeRestricted", value);
    return this;
  }
  getIncludeRestricted() {
    return this._includeRestricted;
  }
  includeAvailability(value) {
    doBoolGetterSetter(this, "includeAvailability", value);
    return this;
  }
  getIncludeAvailability() {
    return this._includeAvailability;
  }
  format(value) {
    doStringGetterSetter(this, "format", value);
    return this;
  }
  getFormat() {
    return this._format;
  }
  updatedAfter(value) {
    doMomentGetterSetter(this, "updatedAfter", value);
    return this;
  }
  getUpdatedAfter() {
    return this._updatedAfter;
  }
  matchTimeseries(value) {
    doBoolGetterSetter(this, "matchTimeseries", value);
    return this;
  }
  getMatchTimeseries() {
    return this._matchTimeseries;
  }
  timeout(value) {
    doFloatGetterSetter(this, "timeoutSec", value);
    return this;
  }
  getTimeout() {
    return this._timeoutSec;
  }
  isSomeParameterSet() {
    return isDef(this._networkCode) && this._networkCode.length > 0 && this._networkCode !== "*" || isDef(this._stationCode) && this._stationCode.length > 0 && this._stationCode !== "*" || isDef(this._locationCode) && this._locationCode.length > 0 && this._locationCode !== "*" || isDef(this._channelCode) && this._channelCode.length > 0 && this._channelCode !== "*" || isDef(this._startTime) || isDef(this._endTime) || isDef(this._startBefore) || isDef(this._endBefore) || isDef(this._startAfter) || isDef(this._endAfter) || isDef(this._minLat) || isDef(this._maxLat) || isDef(this._minLon) || isDef(this._maxLon) || isDef(this._latitude) || isDef(this._longitude) || isDef(this._minRadius) || isDef(this._maxRadius) || isDef(this._updatedAfter);
  }
  queryNetworks() {
    return this.queryFdsnStation(LEVEL_NETWORK);
  }
  queryStations() {
    return this.queryFdsnStation(LEVEL_STATION);
  }
  queryChannels() {
    return this.queryFdsnStation(LEVEL_CHANNEL);
  }
  queryResponses() {
    return this.queryFdsnStation(LEVEL_RESPONSE);
  }
  queryFdsnStation(level) {
    return this.setupQueryFdsnStation(level).then((fedCatalogResult) => {
      return Promise.all(
        fedCatalogResult.queries.map((query) => query.queryNetworkList())
      );
    }).then((netArrayArray) => {
      const out = [];
      netArrayArray.forEach((netArray) => {
        netArray.forEach((net) => {
          out.push(net);
        });
      });
      return out;
    });
  }
  setupQueryFdsnStation(level) {
    if (!LEVELS.includes(level)) {
      throw new Error("Unknown level: '" + level + "'");
    }
    this._level = level;
    this.targetService("station");
    return this.queryRaw().then(function(fedCatalogResult) {
      for (const r of fedCatalogResult.queries) {
        const stationQuery = new StationQuery();
        r.stationQuery = stationQuery;
        fedCatalogResult.params.forEach((v, k2) => {
          const field = `_${k2}`;
          stationQuery[field] = v;
        });
        if (!r.services.has("STATIONSERVICE") || !isDef(r.services.get("STATIONSERVICE"))) {
          throw new Error(
            "QueryResult does not have STATIONSERVICE in services"
          );
        }
        const urlString = r.services.get("STATIONSERVICE");
        if (isDef(urlString)) {
          const serviceURL = new URL(urlString);
          stationQuery.host(serviceURL.hostname);
          if (serviceURL.port) {
            stationQuery.port(parseInt(serviceURL.port));
          }
        } else {
          throw new Error(
            "QueryResult does have STATIONSERVICE in services, but is undef"
          );
        }
      }
      return fedCatalogResult;
    });
  }
  setupForFdnsDataSelect(fedCatalogResult) {
    for (const r of fedCatalogResult.queries) {
      const dataSelectQuery = new DataSelectQuery();
      r.dataSelectQuery = dataSelectQuery;
      fedCatalogResult.params.forEach((k2, v) => {
        const field = `_${k2}`;
        dataSelectQuery[field] = v;
      });
      if (!r.services.has("DATASELECTSERVICE")) {
        throw new Error(
          "QueryResult does not have DATASELECTSERVICE in services"
        );
      }
      const urlString = r.services.get("DATASELECTSERVICE");
      if (isDef(urlString)) {
        const serviceURL = new URL(urlString);
        dataSelectQuery.host(serviceURL.hostname);
        if (serviceURL.port) {
          dataSelectQuery.port(parseInt(serviceURL.port));
        }
      } else {
        throw new Error(
          "QueryResult does have DATASELECTSERVICE in services, but is undef"
        );
      }
    }
    return fedCatalogResult;
  }
  queryFdsnDataselect() {
    const mythis = this;
    this.targetService(TARGET_DATASELECT);
    return this.queryRaw().then((fedCatalogResult) => {
      return mythis.setupForFdnsDataSelect(fedCatalogResult);
    }).then((fedCatalogResult) => {
      return mythis.postFdsnDataselectForFedCatResult(fedCatalogResult);
    });
  }
  postFdsnDataselectForFedCatResult(fedCatalogResult) {
    return Promise.all(
      fedCatalogResult.queries.map((query) => query.querySDDList())
    ).then((sddArrayArray) => {
      const out = [];
      sddArrayArray.forEach((sddArray) => {
        sddArray.forEach((sdd) => {
          out.push(sdd);
        });
      });
      return out;
    });
  }
  postQuerySeismograms(sddList) {
    return this.postQueryRaw(sddList, TARGET_DATASELECT).then((fedCatalogResult) => {
      this.setupForFdnsDataSelect(fedCatalogResult);
      return this.postFdsnDataselectForFedCatResult(fedCatalogResult);
    }).then((sddResultArray) => {
      for (const sdd of sddList) {
        const codes = sdd.codes();
        const matchSdd = sddResultArray.find(
          (s3) => s3.codes() === codes && s3.timeRange.overlaps(sdd.timeRange)
        );
        if (matchSdd) {
          sdd.seismogram = matchSdd.seismogram;
        }
      }
      return sddList;
    });
  }
  postQueryRaw(sddList, targetService) {
    if (sddList.length === 0) {
      return Promise.resolve(this.parseRequest(FAKE_EMPTY_TEXT));
    } else {
      const body = `targetservice=${targetService}
` + DataSelectQuery.createPostBody(sddList);
      return this.postQueryRawWithBody(body);
    }
  }
  postQueryRawWithBody(body) {
    const mythis = this;
    const fetchInit = defaultFetchInitObj(TEXT_MIME);
    fetchInit.method = "POST";
    fetchInit.body = body;
    return doFetchWithTimeout(
      this.formPostURL(),
      fetchInit,
      this._timeoutSec * 1e3
    ).then((response) => {
      return this.handleHttpResponseCodes(response);
    }).then((rawText) => {
      return mythis.parseRequest(rawText);
    });
  }
  queryRaw() {
    const mythis = this;
    if (!this.isSomeParameterSet()) {
      throw new Error(
        "Must set some parameter to avoid asking for everything."
      );
    }
    const url = this.formURL();
    const fetchInit = defaultFetchInitObj(TEXT_MIME);
    this.fedCatResult = doFetchWithTimeout(
      url,
      fetchInit,
      this._timeoutSec * 1e3
    ).then((response) => {
      return this.handleHttpResponseCodes(response);
    }).then(function(rawText) {
      return mythis.parseRequest(rawText);
    });
    return this.fedCatResult;
  }
  handleHttpResponseCodes(response) {
    if (response.status === 200) {
      return response.text();
    } else if (response.status === 204 || isDef(this._nodata) && response.status === this._nodata) {
      return Promise.resolve(FAKE_EMPTY_TEXT);
    } else {
      throw new Error(`Status not successful: ${response.status}`);
    }
  }
  parseRequest(requestText) {
    const out = new FedCatalogResult();
    const lines = requestText.split("\n");
    let inParams = true;
    let query = null;
    for (let l2 of lines) {
      l2 = l2.trim();
      if (inParams) {
        if (l2.length === 0) {
          inParams = false;
        } else {
          const keyval = l2.split("=");
          out.params.set(keyval[0], keyval[1]);
        }
      } else {
        if (l2.length === 0) {
          query = null;
        } else {
          if (query === null) {
            query = new FedCatalogDataCenter();
            if (this._level) {
              query.level = this._level;
            }
            out.queries.push(query);
          }
          if (l2.indexOf("=") !== -1) {
            const keyval = l2.split("=");
            if (keyval[0] === "DATACENTER") {
              query.dataCenter = keyval[1];
            } else if (keyval[0].endsWith("SERVICE")) {
              query.services.set(keyval[0], keyval[1]);
            } else {
              throw new Error(`Unexpected line in FedCatalog response: '${l2}'`);
            }
          } else {
            query.postLines.push(l2);
          }
        }
      }
    }
    return out;
  }
  formVersionURL() {
    return this.formBaseURL() + "/version";
  }
  queryVersion() {
    const url = this.formVersionURL();
    const fetchInit = defaultFetchInitObj(TEXT_MIME);
    return doFetchWithTimeout(url, fetchInit, this._timeoutSec * 1e3).then(
      (response) => {
        if (response.status === 200) {
          return response.text();
        } else {
          throw new Error(`Status not 200: ${response.status}`);
        }
      }
    );
  }
  formBaseURL() {
    let colon = ":";
    if (this._protocol.endsWith(colon)) {
      colon = "";
    }
    return this._protocol + colon + "//" + this._host + (this._port === 80 ? "" : ":" + this._port) + "/irisws/fedcatalog/" + this._specVersion;
  }
  formPostURL() {
    return this.formBaseURL() + "/query";
  }
  formURL() {
    let url = this.formBaseURL() + "/query?";
    if (isStringArg(this._level)) {
      url = url + makeParam("level", this._level);
    }
    if (isStringArg(this._targetService)) {
      url = url + makeParam("targetservice", this._targetService);
    }
    if (isStringArg(this._networkCode) && this._networkCode.length > 0 && this._networkCode !== "*") {
      url = url + makeParam("net", this._networkCode);
    } else {
      url = url + makeParam("net", "*");
    }
    if (isStringArg(this._stationCode) && this._stationCode.length > 0 && this._stationCode !== "*") {
      url = url + makeParam("sta", this._stationCode);
    }
    if (isStringArg(this._locationCode) && this._locationCode.length > 0 && this._locationCode !== "*") {
      url = url + makeParam("loc", this._locationCode);
    }
    if (isStringArg(this._channelCode) && this._channelCode.length > 0 && this._channelCode !== "*") {
      url = url + makeParam("cha", this._channelCode);
    }
    if (isObject(this._startTime)) {
      url = url + makeParam("starttime", toIsoWoZ(this._startTime));
    }
    if (isObject(this._endTime)) {
      url = url + makeParam("endtime", toIsoWoZ(this._endTime));
    }
    if (isObject(this._startBefore)) {
      url = url + makeParam("startbefore", toIsoWoZ(this._startBefore));
    }
    if (isObject(this._startAfter)) {
      url = url + makeParam("startafter", toIsoWoZ(this._startAfter));
    }
    if (isObject(this._endBefore)) {
      url = url + makeParam("endbefore", toIsoWoZ(this._endBefore));
    }
    if (isObject(this._endAfter)) {
      url = url + makeParam("endafter", toIsoWoZ(this._endAfter));
    }
    if (isNumArg(this._minLat)) {
      url = url + makeParam("minlat", this._minLat);
    }
    if (isNumArg(this._maxLat)) {
      url = url + makeParam("maxlat", this._maxLat);
    }
    if (isNumArg(this._minLon)) {
      url = url + makeParam("minlon", this._minLon);
    }
    if (isNumArg(this._maxLon)) {
      url = url + makeParam("maxlon", this._maxLon);
    }
    if (isNumArg(this._latitude)) {
      url = url + makeParam("lat", this._latitude);
    }
    if (isNumArg(this._longitude)) {
      url = url + makeParam("lon", this._longitude);
    }
    if (isNumArg(this._minRadius)) {
      url = url + makeParam("minradius", this._minRadius);
    }
    if (isNumArg(this._maxRadius)) {
      url = url + makeParam("maxradius", this._maxRadius);
    }
    if (isDef(this._includeRestricted)) {
      url = url + makeParam("includerestricted", this._includeRestricted);
    }
    if (isDef(this._includeAvailability)) {
      url = url + makeParam("includeavailability", this._includeAvailability);
    }
    if (isObject(this._updatedAfter)) {
      url = url + makeParam("updatedafter", toIsoWoZ(this._updatedAfter));
    }
    if (isDef(this._matchTimeseries)) {
      url = url + makeParam("matchtimeseries", this._matchTimeseries);
    }
    if (isStringArg(this._format)) {
      url = url + makeParam("format", this._format);
    }
    if (isNumArg(this._nodata)) {
      url = url + makeParam("nodata", this._nodata);
    }
    if (url.endsWith("&") || url.endsWith("?")) {
      url = url.substr(0, url.length - 1);
    }
    return url;
  }
};

// src/seismogramloader.ts
var SeismogramLoader = class {
  constructor(stationQuery, eventQuery, dataselectQuery) {
    __publicField(this, "stationQuery");
    __publicField(this, "withFedCatalog");
    __publicField(this, "withResponse");
    __publicField(this, "markOrigin");
    __publicField(this, "eventQuery");
    __publicField(this, "dataselectQuery");
    __publicField(this, "_startPhaseList");
    __publicField(this, "_endPhaseList");
    __publicField(this, "_markedPhaseList");
    __publicField(this, "_startOffset");
    __publicField(this, "_endOffset");
    __publicField(this, "_networkList");
    __publicField(this, "_quakeList");
    __publicField(this, "traveltimeList");
    __publicField(this, "_sddList");
    if (!isDef(stationQuery)) {
      throw new Error("stationQuery must not be null");
    }
    if (!(stationQuery instanceof StationQuery)) {
      throw new Error(
        "1st arg must be a StationQuery: " + stringify(stationQuery)
      );
    }
    if (!isDef(eventQuery)) {
      throw new Error("eventQuery must not be null");
    }
    if (!(eventQuery instanceof EventQuery)) {
      throw new Error(
        "2nd arg must be a EventQuery: " + stringify(eventQuery)
      );
    }
    this.withFedCatalog = true;
    this.stationQuery = stationQuery;
    this.withResponse = false;
    this.eventQuery = eventQuery;
    this.markOrigin = true;
    this.dataselectQuery = null;
    if (isDef(dataselectQuery)) {
      this.dataselectQuery = dataselectQuery;
    }
    this._startPhaseList = ["p", "P", "Pdiff", "PKP"];
    this._endPhaseList = ["s", "S", "Sdiff", "SKS"];
    this._markedPhaseList = [];
    this._startOffset = Duration.fromMillis(-30 * 1e3);
    this._endOffset = Duration.fromMillis(60 * 1e3);
    this._networkList = null;
    this._quakeList = null;
    this.traveltimeList = null;
    this._sddList = null;
  }
  get startPhaseList() {
    return this._startPhaseList;
  }
  set startPhaseList(val) {
    if (Array.isArray(val)) {
      this._startPhaseList = val;
    } else if (isStringArg(val)) {
      this._startPhaseList = val.split(",");
    } else {
      throw new Error(
        "value argument is string or array of string, but was " + typeof val
      );
    }
  }
  get startOffset() {
    return this._startOffset;
  }
  set startOffset(val) {
    if (Duration.isDuration(val)) {
      this._startOffset = val;
    } else if (typeof val === "number") {
      this.startOffsetSeconds(val);
    } else {
      throw new Error("startOffset must be luxon Duration or number of seconds: " + stringify(val));
    }
  }
  startOffsetSeconds(val) {
    this._startOffset = Duration.fromMillis(val * 1e3);
    return this;
  }
  get endPhaseList() {
    return this._endPhaseList;
  }
  set endPhaseList(val) {
    if (Array.isArray(val)) {
      this._endPhaseList = val;
    } else if (isStringArg(val)) {
      this._endPhaseList = val.split(",");
    } else {
      throw new Error(
        "value argument is string or array of string, but was " + typeof val
      );
    }
  }
  get endOffset() {
    return this._endOffset;
  }
  set endOffset(val) {
    if (Duration.isDuration(val)) {
      this._endOffset = val;
    } else if (typeof val === "number") {
      this.endOffsetSeconds(val);
    } else {
      throw new Error("startOffset must be luxon Duration or number of seconds: " + stringify(val));
    }
  }
  endOffsetSeconds(val) {
    this._endOffset = Duration.fromMillis(val * 1e3);
    return this;
  }
  get markedPhaseList() {
    return this._markedPhaseList;
  }
  set markedPhaseList(val) {
    if (Array.isArray(val)) {
      this._markedPhaseList = val;
    } else if (isStringArg(val)) {
      this._markedPhaseList = val.split(",");
    } else {
      throw new Error(
        "value argument is string or array of string, but was " + typeof val
      );
    }
  }
  get networkList() {
    if (this._networkList === null) {
      return this.load().then(([netList, quakeList, sddList]) => netList);
    }
    return this._networkList;
  }
  get quakeList() {
    if (this._quakeList === null) {
      return this.load().then(([netList, quakeList, sddList]) => quakeList);
    }
    return this._quakeList;
  }
  get sddList() {
    if (this._sddList === null) {
      return this.load().then(([netList, quakeList, sddList]) => sddList);
    }
    return this._sddList;
  }
  loadSeismograms() {
    return this.load().then(([netList, quakeList, sddList]) => sddList);
  }
  load() {
    let fedcat;
    if (this.withFedCatalog) {
      fedcat = FedCatalogQuery.fromStationQuery(this.stationQuery);
    } else {
      fedcat = this.stationQuery;
    }
    if (!this.stationQuery.isSomeParameterSet()) {
      throw new Error(
        "Must set some station parameter to avoid asking for everything."
      );
    }
    if (!this.eventQuery.isSomeParameterSet()) {
      throw new Error(
        "Must set some event parameter to avoid asking for everything."
      );
    }
    if (this.withResponse) {
      this._networkList = fedcat.queryResponses();
    } else {
      this._networkList = fedcat.queryChannels();
    }
    this._quakeList = this.eventQuery.query();
    let allPhaseList = [];
    allPhaseList = allPhaseList.concat(
      this.startPhaseList,
      this.endPhaseList,
      this.markedPhaseList
    );
    if (allPhaseList.includes("origin")) {
      this.markOrigin = true;
    }
    const allPhasesWithoutOrigin = allPhaseList.filter((p) => p !== "origin").join(",");
    this.traveltimeList = Promise.all([this._networkList, this._quakeList]).then(
      ([netList, quakeList]) => {
        const ttpromiseList = [];
        for (const q of quakeList) {
          for (const s3 of allStations(netList)) {
            if (s3.timeRange.contains(q.time)) {
              const taupQuery = new TraveltimeQuery();
              const daz = distaz(
                s3.latitude,
                s3.longitude,
                q.latitude,
                q.longitude
              );
              taupQuery.distdeg(daz.distanceDeg);
              taupQuery.phases(allPhasesWithoutOrigin);
              ttpromiseList.push(
                Promise.all([s3, q, taupQuery.queryJson(), daz])
              );
            }
          }
        }
        return Promise.all(ttpromiseList);
      }
    );
    this._sddList = this.traveltimeList.then((ttpromiseList) => {
      const seismogramDataList = [];
      for (const ttarr of ttpromiseList) {
        const station = ttarr[0];
        const quake = ttarr[1];
        const ttjson = ttarr[2];
        const distaz2 = ttarr[3];
        let startArrival = null;
        let endArrival = null;
        for (const pname of this.startPhaseList) {
          if (pname === "origin" && (startArrival === null || startArrival.time > 0)) {
            startArrival = createOriginArrival(distaz2.distanceDeg);
          } else {
            for (const a3 of ttjson.arrivals) {
              if (a3.phase === pname && (startArrival === null || startArrival.time > a3.time)) {
                startArrival = a3;
              }
            }
          }
        }
        for (const pname of this.endPhaseList) {
          if (pname === "origin" && (endArrival === null || endArrival.time < 0)) {
            endArrival = createOriginArrival(distaz2.distanceDeg);
          } else {
            for (const a3 of ttjson.arrivals) {
              if (a3.phase === pname && (endArrival === null || endArrival.time < a3.time)) {
                endArrival = a3;
              }
            }
          }
        }
        if (isDef(startArrival) && isDef(endArrival)) {
          const startTime = quake.time.plus(Duration.fromMillis(1e3 * startArrival.time)).plus(this.startOffset);
          const endTime = quake.time.plus(Duration.fromMillis(1e3 * endArrival.time)).plus(this.endOffset);
          const timeRange = Interval.fromDateTimes(startTime, endTime);
          const phaseMarkers = createMarkersForTravelTimes(quake, ttjson);
          if (this.markOrigin) {
            phaseMarkers.push(createMarkerForOriginTime(quake));
          }
          for (const chan of station.channels) {
            const sdd = SeismogramDisplayData.fromChannelAndTimeWindow(
              chan,
              timeRange
            );
            sdd.addQuake(quake);
            sdd.addTravelTimes(ttjson);
            sdd.addMarkers(phaseMarkers);
            seismogramDataList.push(sdd);
          }
        }
      }
      let sddListPromise;
      if (this.dataselectQuery !== null) {
        sddListPromise = this.dataselectQuery.postQuerySeismograms(
          seismogramDataList
        );
      } else if (this.withFedCatalog) {
        const fedcatDS = new FedCatalogQuery();
        sddListPromise = fedcatDS.postQuerySeismograms(seismogramDataList);
      } else {
        sddListPromise = new DataSelectQuery().postQuerySeismograms(
          seismogramDataList
        );
      }
      return sddListPromise;
    });
    return Promise.all([this._networkList, this._quakeList, this._sddList]);
  }
};

// src/seismographconfigeditor.ts
var seismographconfigeditor_exports = {};
__export(seismographconfigeditor_exports, {
  configEditor_css: () => configEditor_css,
  createEditor: () => createEditor
});
function createEditor(div, config, onChange) {
  if (!isDef(div)) {
    throw new Error("div is Required");
  }
  if (!isDef(onChange)) {
    onChange = () => {
    };
  }
  const titleDiv = div.append("div");
  createBooleanOptionByKey(
    titleDiv.append("span"),
    "",
    "showTitle",
    config,
    onChange
  );
  createTextOption(titleDiv.append("span"), "Title", "title", config, onChange);
  titleDiv.selectAll("input").classed("smallconfigtext", false).classed("bigconfigtext", true);
  const xLabelDiv = div.append("div");
  xLabelDiv.append("span").text("X Axis:");
  createBooleanOptionByKey(
    xLabelDiv.append("span"),
    "Bot",
    "isXAxis",
    config,
    onChange
  );
  createBooleanOptionByKey(
    xLabelDiv.append("span"),
    "Top",
    "isXAxisTop",
    config,
    onChange
  );
  createTextOption(
    xLabelDiv.append("span"),
    "X Label",
    "xLabel",
    config,
    onChange
  );
  createTextOption(
    xLabelDiv.append("span"),
    "Sublabel",
    "xSublabel",
    config,
    onChange
  );
  createBooleanOptionByKey(
    xLabelDiv.append("span"),
    "Relative",
    "isRelativeTime",
    config,
    onChange
  );
  const yLabelDiv = div.append("div");
  yLabelDiv.append("span").text("Y Axis:");
  createBooleanOptionByKey(
    yLabelDiv.append("span"),
    "Left",
    "isYAxis",
    config,
    onChange
  );
  createBooleanOptionByKey(
    yLabelDiv.append("span"),
    "Right",
    "isYAxisRight",
    config,
    onChange
  );
  createTextOption(
    yLabelDiv.append("span"),
    "Label",
    "yLabel",
    config,
    onChange
  );
  createTextOption(
    yLabelDiv.append("span"),
    " Sublabel",
    "ySublabel",
    config,
    onChange
  );
  createBooleanOptionByKey(
    yLabelDiv.append("span"),
    "is Units",
    "ySublabelIsUnits",
    config,
    onChange
  );
  const yLabelDivB = div.append("div");
  createBooleanOptionByKey(
    yLabelDivB.append("span"),
    "Nice",
    "isYAxisNice",
    config,
    onChange
  );
  createBooleanOptionByKey(
    yLabelDivB.append("span"),
    "From Mid",
    "centeredAmp",
    config,
    onChange
  );
  createBooleanOptionByKey(
    yLabelDivB.append("span"),
    "Window",
    "windowAmp",
    config,
    onChange
  );
  const marginDiv = div.append("div");
  marginDiv.append("label").text("Margin:");
  createNumberOption(
    marginDiv.append("span"),
    "Left",
    "left",
    config.margin,
    onChange
  );
  createNumberOption(
    marginDiv.append("span"),
    "Right",
    "right",
    config.margin,
    onChange
  );
  createNumberOption(
    marginDiv.append("span"),
    "Top",
    "top",
    config.margin,
    onChange
  );
  createNumberOption(
    marginDiv.append("span"),
    "Bottom",
    "bottom",
    config.margin,
    onChange
  );
  const colorDiv = div.append("div");
  colorDiv.append("label").text("Color:");
  let colorLineNum = 0;
  let perLine = 5;
  while (colorLineNum * perLine < config.lineColors.length) {
    const subDiv = colorDiv.append("div");
    config.lineColors.slice(colorLineNum * perLine, colorLineNum * perLine + perLine).forEach((color2, index3) => {
      const colorspan = subDiv.append("span");
      const cindex = index3 + colorLineNum * perLine;
      colorspan.style("color", color2);
      colorspan.append("label").text(`${cindex + 1}:`);
      colorspan.append("input").classed("smallconfigtext", true).attr("type", "text").attr("name", `color${cindex + 1}`).property("value", color2).on("change", function() {
        const val = select_default2(this).property("value");
        config.lineColors[cindex] = val;
        colorspan.style("color", val);
        colorspan.select("input").style("color", val);
        onChange();
      });
      colorspan.select("input").style("color", color2);
    });
    colorLineNum += 1;
  }
  createNumberOption(
    div.append("div"),
    "Line Width",
    "lineWidth",
    config,
    onChange
  );
  createBooleanOptionByKey(
    div.append("div"),
    "Connect Segments",
    "connectSegments",
    config,
    onChange
  );
  createBooleanOptionByKey(
    div.append("div"),
    "Show Markers",
    "doMarkers",
    config,
    onChange
  );
  const heightDiv = div.append("div");
  heightDiv.append("label").text("Height:");
  const subHeightDiv = heightDiv.append("span");
  createNumberOption(
    subHeightDiv.append("span"),
    "Min",
    "minHeight",
    config,
    onChange
  );
  createNumberOption(
    subHeightDiv.append("span"),
    "Max",
    "maxHeight",
    config,
    onChange
  );
  createBooleanOptionByKey(
    div.append("div"),
    "Mouse Wheel Zoom",
    "wheelZoom",
    config,
    onChange
  );
}
function createBooleanOptionByKey(myspan, label, key, config, onChange) {
  myspan.append("input").attr("type", "checkbox").attr("id", key).attr("name", key).property("checked", config[key]).on("change", function() {
    config[key] = select_default2(this).property("checked");
    onChange();
  });
  myspan.append("label").text(`${label}:`);
  return myspan;
}
function createTextOption(mydiv, label, key, config, onChange) {
  const myspan = mydiv.append("span");
  myspan.append("label").text(`${label}:`);
  myspan.append("input").classed("smallconfigtext", true).attr("type", "text").attr("id", key).attr("name", key).property("value", config[key]).on("change", function() {
    config[key] = select_default2(this).property("value");
    onChange();
  });
  return myspan;
}
function createNumberOption(mydiv, label, key, config, onChange) {
  const myspan = mydiv.append("span");
  myspan.append("label").text(`${label}:`);
  myspan.append("input").classed("smallconfigtext", true).attr("type", "number").attr("id", key).attr("name", key).property("value", config[key]).on("change", function() {
    config[key] = Number.parseInt(select_default2(this).property("value"));
    onChange();
  });
  return myspan;
}
var configEditor_css = `
input[type="text"].smallconfigtext {
  width: 7em;
}

input[type="number"].smallconfigtext {
  width: 7em;
}

input[type="text"].bigconfigtext {
  width: 27em;
}
`;
if (document) {
  insertCSS(configEditor_css, "configeditor");
}

// src/taper.ts
var taper_exports = {};
__export(taper_exports, {
  COSINE: () => COSINE,
  HAMMING: () => HAMMING,
  HANNING: () => HANNING,
  getCoefficients: () => getCoefficients,
  taper: () => taper
});
function taper(seis, width = 0.05, taperType = HANNING) {
  if (width > 0.5) {
    throw new Error("Taper width cannot be larger than 0.5, width=" + width);
  }
  if (seis.isContiguous()) {
    const data = seis.y;
    const outData = Float32Array.from(data);
    const w = Math.floor(data.length * width);
    const coeff = getCoefficients(taperType, w);
    const omega = coeff[0];
    const f0 = coeff[1];
    const f1 = coeff[2];
    for (let i = 0; i < w; i++) {
      const taperFactor = f0 - f1 * Math.cos(omega * i);
      outData[i] = outData[i] * taperFactor;
      outData[outData.length - i - 1] = outData[outData.length - i - 1] * taperFactor;
    }
    return seis.cloneWithNewData(outData);
  } else {
    throw new Error(`Cannot take taper of non-contiguous seismogram: ${seis.segments.length}`);
  }
}
function getCoefficients(type2, length3) {
  let omega, f0, f1;
  if (type2 === HANNING) {
    omega = Math.PI / length3;
    f0 = 0.5;
    f1 = 0.5;
  } else if (type2 === HAMMING) {
    omega = Math.PI / length3;
    f0 = 0.54;
    f1 = 0.46;
  } else {
    omega = Math.PI / 2 / length3;
    f0 = 1;
    f1 = 1;
  }
  return [omega, f0, f1];
}
var HANNING = "HANNING";
var HAMMING = "HAMMING";
var COSINE = "COSINE";

// src/transfer.ts
var transfer_exports = {};
__export(transfer_exports, {
  METER: () => METER,
  METER_PER_SECOND: () => METER_PER_SECOND,
  METER_PER_SECOND_PER_SECOND: () => METER_PER_SECOND_PER_SECOND,
  applyFreqTaper: () => applyFreqTaper,
  calcFreqTaper: () => calcFreqTaper,
  calcGamma: () => calcGamma,
  calcResponse: () => calcResponse,
  calcResponseFromSacPoleZero: () => calcResponseFromSacPoleZero,
  calcScaleUnit: () => calcScaleUnit,
  calc_A0: () => calc_A0,
  combine: () => combine,
  convertPoleZeroToSacStyle: () => convertPoleZeroToSacStyle,
  convertToSacPoleZero: () => convertToSacPoleZero,
  evalPoleZeroInverse: () => evalPoleZeroInverse,
  transfer: () => transfer,
  transferSacPZ: () => transferSacPZ,
  transferSacPZSegment: () => transferSacPZSegment
});

// node_modules/convert-units/lib/esm/convert.js
var __spreadArray = function(to, from, pack) {
  if (pack || arguments.length === 2)
    for (var i = 0, l2 = from.length, ar; i < l2; i++) {
      if (ar || !(i in from)) {
        if (!ar)
          ar = Array.prototype.slice.call(from, 0, i);
        ar[i] = from[i];
      }
    }
  return to.concat(ar || Array.prototype.slice.call(from));
};
var Converter = function() {
  function Converter2(measures, value) {
    this.val = 0;
    this.destination = null;
    this.origin = null;
    if (typeof value === "number") {
      this.val = value;
    }
    if (typeof measures !== "object") {
      throw new Error("Measures cannot be blank");
    }
    this.measureData = measures;
  }
  Converter2.prototype.from = function(from) {
    if (this.destination != null)
      throw new Error(".from must be called before .to");
    this.origin = this.getUnit(from);
    if (this.origin == null) {
      this.throwUnsupportedUnitError(from);
    }
    return this;
  };
  Converter2.prototype.to = function(to) {
    var _a, _b;
    if (this.origin == null)
      throw new Error(".to must be called after .from");
    this.destination = this.getUnit(to);
    if (this.destination == null) {
      this.throwUnsupportedUnitError(to);
    }
    var destination = this.destination;
    var origin = this.origin;
    if (origin.abbr === destination.abbr) {
      return this.val;
    }
    if (destination.measure != origin.measure) {
      throw new Error("Cannot convert incompatible measures of " + destination.measure + " and " + origin.measure);
    }
    var result = this.val * origin.unit.to_anchor;
    if (origin.unit.anchor_shift) {
      result -= origin.unit.anchor_shift;
    }
    if (origin.system != destination.system) {
      var measure28 = this.measureData[origin.measure];
      var anchors = measure28.anchors;
      if (anchors == null) {
        throw new Error('Unable to convert units. Anchors are missing for "' + origin.measure + '" and "' + destination.measure + '" measures.');
      }
      var anchor = anchors[origin.system];
      if (anchor == null) {
        throw new Error('Unable to find anchor for "' + origin.measure + '" to "' + destination.measure + '". Please make sure it is defined.');
      }
      var transform2 = (_a = anchor[destination.system]) === null || _a === void 0 ? void 0 : _a.transform;
      var ratio = (_b = anchor[destination.system]) === null || _b === void 0 ? void 0 : _b.ratio;
      if (typeof transform2 === "function") {
        result = transform2(result);
      } else if (typeof ratio === "number") {
        result *= ratio;
      } else {
        throw new Error("A system anchor needs to either have a defined ratio number or a transform function.");
      }
    }
    if (destination.unit.anchor_shift) {
      result += destination.unit.anchor_shift;
    }
    return result / destination.unit.to_anchor;
  };
  Converter2.prototype.toBest = function(options) {
    var _a, _b, _c;
    if (this.origin == null)
      throw new Error(".toBest must be called after .from");
    var isNegative = this.val < 0;
    var exclude = [];
    var cutOffNumber = isNegative ? -1 : 1;
    var system = this.origin.system;
    if (typeof options === "object") {
      exclude = (_a = options.exclude) !== null && _a !== void 0 ? _a : [];
      cutOffNumber = (_b = options.cutOffNumber) !== null && _b !== void 0 ? _b : cutOffNumber;
      system = (_c = options.system) !== null && _c !== void 0 ? _c : this.origin.system;
    }
    var best = null;
    for (var _i = 0, _d = this.possibilities(); _i < _d.length; _i++) {
      var possibility = _d[_i];
      var unit3 = this.describe(possibility);
      var isIncluded = exclude.indexOf(possibility) === -1;
      if (isIncluded && unit3.system === system) {
        var result = this.to(possibility);
        if (isNegative ? result > cutOffNumber : result < cutOffNumber) {
          continue;
        }
        if (best === null || (isNegative ? result <= cutOffNumber && result > best.val : result >= cutOffNumber && result < best.val)) {
          best = {
            val: result,
            unit: possibility,
            singular: unit3.singular,
            plural: unit3.plural
          };
        }
      }
    }
    return best;
  };
  Converter2.prototype.getUnit = function(abbr) {
    var found = null;
    for (var _i = 0, _a = Object.entries(this.measureData); _i < _a.length; _i++) {
      var _b = _a[_i], measureName = _b[0], measure28 = _b[1];
      for (var _c = 0, _d = Object.entries(measure28.systems); _c < _d.length; _c++) {
        var _e = _d[_c], systemName = _e[0], system = _e[1];
        for (var _f = 0, _g = Object.entries(system); _f < _g.length; _f++) {
          var _h = _g[_f], testAbbr = _h[0], unit3 = _h[1];
          if (testAbbr == abbr) {
            return {
              abbr,
              measure: measureName,
              system: systemName,
              unit: unit3
            };
          }
        }
      }
    }
    return found;
  };
  Converter2.prototype.describe = function(abbr) {
    var result = this.getUnit(abbr);
    if (result != null) {
      return this.describeUnit(result);
    }
    this.throwUnsupportedUnitError(abbr);
  };
  Converter2.prototype.describeUnit = function(unit3) {
    return {
      abbr: unit3.abbr,
      measure: unit3.measure,
      system: unit3.system,
      singular: unit3.unit.name.singular,
      plural: unit3.unit.name.plural
    };
  };
  Converter2.prototype.list = function(measureName) {
    var list = [];
    if (measureName == null) {
      for (var _i = 0, _a = Object.entries(this.measureData); _i < _a.length; _i++) {
        var _b = _a[_i], name_1 = _b[0], measure28 = _b[1];
        for (var _c = 0, _d = Object.entries(measure28.systems); _c < _d.length; _c++) {
          var _e = _d[_c], systemName = _e[0], units = _e[1];
          for (var _f = 0, _g = Object.entries(units); _f < _g.length; _f++) {
            var _h = _g[_f], abbr = _h[0], unit3 = _h[1];
            list.push(this.describeUnit({
              abbr,
              measure: name_1,
              system: systemName,
              unit: unit3
            }));
          }
        }
      }
    } else if (!(measureName in this.measureData)) {
      throw new Error('Meausre "' + measureName + '" not found.');
    } else {
      var measure28 = this.measureData[measureName];
      for (var _j = 0, _k = Object.entries(measure28.systems); _j < _k.length; _j++) {
        var _l = _k[_j], systemName = _l[0], units = _l[1];
        for (var _m = 0, _o = Object.entries(units); _m < _o.length; _m++) {
          var _p = _o[_m], abbr = _p[0], unit3 = _p[1];
          list.push(this.describeUnit({
            abbr,
            measure: measureName,
            system: systemName,
            unit: unit3
          }));
        }
      }
    }
    return list;
  };
  Converter2.prototype.throwUnsupportedUnitError = function(what) {
    var validUnits = [];
    for (var _i = 0, _a = Object.values(this.measureData); _i < _a.length; _i++) {
      var measure28 = _a[_i];
      for (var _b = 0, _c = Object.values(measure28.systems); _b < _c.length; _b++) {
        var systems = _c[_b];
        validUnits = validUnits.concat(Object.keys(systems));
      }
    }
    throw new Error("Unsupported unit " + what + ", use one of: " + validUnits.join(", "));
  };
  Converter2.prototype.possibilities = function(forMeasure) {
    var possibilities = [];
    var list_measures = [];
    if (typeof forMeasure == "string") {
      list_measures.push(forMeasure);
    } else if (this.origin != null) {
      list_measures.push(this.origin.measure);
    } else {
      list_measures = Object.keys(this.measureData);
    }
    for (var _i = 0, list_measures_1 = list_measures; _i < list_measures_1.length; _i++) {
      var measure28 = list_measures_1[_i];
      var systems = this.measureData[measure28].systems;
      for (var _a = 0, _b = Object.values(systems); _a < _b.length; _a++) {
        var system = _b[_a];
        possibilities = __spreadArray(__spreadArray([], possibilities, true), Object.keys(system), true);
      }
    }
    return possibilities;
  };
  Converter2.prototype.measures = function() {
    return Object.keys(this.measureData);
  };
  return Converter2;
}();
function convert_default(measures) {
  return function(value) {
    return new Converter(measures, value);
  };
}

// node_modules/convert-units/lib/esm/definitions/acceleration.js
var metric = {
  "g-force": {
    name: {
      singular: "g-force",
      plural: "g-forces"
    },
    to_anchor: 9.80665
  },
  "m/s2": {
    name: {
      singular: "Metre per second squared",
      plural: "Metres per second squared"
    },
    to_anchor: 1
  }
};
var measure = {
  systems: {
    metric
  }
};
var acceleration_default = measure;

// node_modules/convert-units/lib/esm/definitions/angle.js
var SI = {
  rad: {
    name: {
      singular: "radian",
      plural: "radians"
    },
    to_anchor: 180 / Math.PI
  },
  deg: {
    name: {
      singular: "degree",
      plural: "degrees"
    },
    to_anchor: 1
  },
  grad: {
    name: {
      singular: "gradian",
      plural: "gradians"
    },
    to_anchor: 9 / 10
  },
  arcmin: {
    name: {
      singular: "arcminute",
      plural: "arcminutes"
    },
    to_anchor: 1 / 60
  },
  arcsec: {
    name: {
      singular: "arcsecond",
      plural: "arcseconds"
    },
    to_anchor: 1 / 3600
  }
};
var measure2 = {
  systems: {
    SI
  }
};
var angle_default = measure2;

// node_modules/convert-units/lib/esm/definitions/apparentPower.js
var SI2 = {
  VA: {
    name: {
      singular: "Volt-Ampere",
      plural: "Volt-Amperes"
    },
    to_anchor: 1
  },
  mVA: {
    name: {
      singular: "Millivolt-Ampere",
      plural: "Millivolt-Amperes"
    },
    to_anchor: 1e-3
  },
  kVA: {
    name: {
      singular: "Kilovolt-Ampere",
      plural: "Kilovolt-Amperes"
    },
    to_anchor: 1e3
  },
  MVA: {
    name: {
      singular: "Megavolt-Ampere",
      plural: "Megavolt-Amperes"
    },
    to_anchor: 1e6
  },
  GVA: {
    name: {
      singular: "Gigavolt-Ampere",
      plural: "Gigavolt-Amperes"
    },
    to_anchor: 1e9
  }
};
var measure3 = {
  systems: {
    SI: SI2
  }
};
var apparentPower_default = measure3;

// node_modules/convert-units/lib/esm/definitions/area.js
var metric2 = {
  nm2: {
    name: {
      singular: "Square Nanometer",
      plural: "Square Nanometers"
    },
    to_anchor: 1e-18
  },
  \u03BCm2: {
    name: {
      singular: "Square Micrometer",
      plural: "Square Micrometers"
    },
    to_anchor: 1e-12
  },
  mm2: {
    name: {
      singular: "Square Millimeter",
      plural: "Square Millimeters"
    },
    to_anchor: 1 / 1e6
  },
  cm2: {
    name: {
      singular: "Square Centimeter",
      plural: "Square Centimeters"
    },
    to_anchor: 1 / 1e4
  },
  m2: {
    name: {
      singular: "Square Meter",
      plural: "Square Meters"
    },
    to_anchor: 1
  },
  ha: {
    name: {
      singular: "Hectare",
      plural: "Hectares"
    },
    to_anchor: 1e4
  },
  km2: {
    name: {
      singular: "Square Kilometer",
      plural: "Square Kilometers"
    },
    to_anchor: 1e6
  }
};
var imperial = {
  in2: {
    name: {
      singular: "Square Inch",
      plural: "Square Inches"
    },
    to_anchor: 1 / 144
  },
  yd2: {
    name: {
      singular: "Square Yard",
      plural: "Square Yards"
    },
    to_anchor: 9
  },
  ft2: {
    name: {
      singular: "Square Foot",
      plural: "Square Feet"
    },
    to_anchor: 1
  },
  ac: {
    name: {
      singular: "Acre",
      plural: "Acres"
    },
    to_anchor: 43560
  },
  mi2: {
    name: {
      singular: "Square Mile",
      plural: "Square Miles"
    },
    to_anchor: 27878400
  }
};
var measure4 = {
  systems: {
    metric: metric2,
    imperial
  },
  anchors: {
    metric: {
      imperial: {
        ratio: 10.7639
      }
    },
    imperial: {
      metric: {
        ratio: 1 / 10.7639
      }
    }
  }
};
var area_default6 = measure4;

// node_modules/convert-units/lib/esm/definitions/charge.js
var SI3 = {
  c: {
    name: {
      singular: "Coulomb",
      plural: "Coulombs"
    },
    to_anchor: 1
  },
  mC: {
    name: {
      singular: "Millicoulomb",
      plural: "Millicoulombs"
    },
    to_anchor: 1 / 1e3
  },
  \u03BCC: {
    name: {
      singular: "Microcoulomb",
      plural: "Microcoulombs"
    },
    to_anchor: 1 / 1e6
  },
  nC: {
    name: {
      singular: "Nanocoulomb",
      plural: "Nanocoulombs"
    },
    to_anchor: 1e-9
  },
  pC: {
    name: {
      singular: "Picocoulomb",
      plural: "Picocoulombs"
    },
    to_anchor: 1e-12
  }
};
var measure5 = {
  systems: {
    SI: SI3
  }
};
var charge_default = measure5;

// node_modules/convert-units/lib/esm/definitions/current.js
var SI4 = {
  A: {
    name: {
      singular: "Ampere",
      plural: "Amperes"
    },
    to_anchor: 1
  },
  mA: {
    name: {
      singular: "Milliampere",
      plural: "Milliamperes"
    },
    to_anchor: 1e-3
  },
  kA: {
    name: {
      singular: "Kiloampere",
      plural: "Kiloamperes"
    },
    to_anchor: 1e3
  }
};
var measure6 = {
  systems: {
    SI: SI4
  }
};
var current_default = measure6;

// node_modules/convert-units/lib/esm/definitions/digital.js
var bits = {
  b: {
    name: {
      singular: "Bit",
      plural: "Bits"
    },
    to_anchor: 1
  },
  Kb: {
    name: {
      singular: "Kilobit",
      plural: "Kilobits"
    },
    to_anchor: 1024
  },
  Mb: {
    name: {
      singular: "Megabit",
      plural: "Megabits"
    },
    to_anchor: 1048576
  },
  Gb: {
    name: {
      singular: "Gigabit",
      plural: "Gigabits"
    },
    to_anchor: 1073741824
  },
  Tb: {
    name: {
      singular: "Terabit",
      plural: "Terabits"
    },
    to_anchor: 1099511627776
  }
};
var bytes = {
  B: {
    name: {
      singular: "Byte",
      plural: "Bytes"
    },
    to_anchor: 1
  },
  KB: {
    name: {
      singular: "Kilobyte",
      plural: "Kilobytes"
    },
    to_anchor: 1024
  },
  MB: {
    name: {
      singular: "Megabyte",
      plural: "Megabytes"
    },
    to_anchor: 1048576
  },
  GB: {
    name: {
      singular: "Gigabyte",
      plural: "Gigabytes"
    },
    to_anchor: 1073741824
  },
  TB: {
    name: {
      singular: "Terabyte",
      plural: "Terabytes"
    },
    to_anchor: 1099511627776
  }
};
var measure7 = {
  systems: {
    bits,
    bytes
  },
  anchors: {
    bits: {
      bytes: {
        ratio: 1 / 8
      }
    },
    bytes: {
      bits: {
        ratio: 8
      }
    }
  }
};
var digital_default = measure7;

// node_modules/convert-units/lib/esm/definitions/each.js
var metric3 = {
  ea: {
    name: {
      singular: "Each",
      plural: "Each"
    },
    to_anchor: 1
  },
  dz: {
    name: {
      singular: "Dozen",
      plural: "Dozens"
    },
    to_anchor: 12
  }
};
var measure8 = {
  systems: {
    metric: metric3
  }
};
var each_default3 = measure8;

// node_modules/convert-units/lib/esm/definitions/energy.js
var SI5 = {
  Wh: {
    name: {
      singular: "Watt-hour",
      plural: "Watt-hours"
    },
    to_anchor: 3600
  },
  mWh: {
    name: {
      singular: "Milliwatt-hour",
      plural: "Milliwatt-hours"
    },
    to_anchor: 3.6
  },
  kWh: {
    name: {
      singular: "Kilowatt-hour",
      plural: "Kilowatt-hours"
    },
    to_anchor: 36e5
  },
  MWh: {
    name: {
      singular: "Megawatt-hour",
      plural: "Megawatt-hours"
    },
    to_anchor: 36e8
  },
  GWh: {
    name: {
      singular: "Gigawatt-hour",
      plural: "Gigawatt-hours"
    },
    to_anchor: 36e11
  },
  J: {
    name: {
      singular: "Joule",
      plural: "Joules"
    },
    to_anchor: 1
  },
  kJ: {
    name: {
      singular: "Kilojoule",
      plural: "Kilojoules"
    },
    to_anchor: 1e3
  },
  MJ: {
    name: {
      singular: "Megajoule",
      plural: "Megajoules"
    },
    to_anchor: 1e6
  },
  GJ: {
    name: {
      singular: "Gigajoule",
      plural: "Gigajoules"
    },
    to_anchor: 1e9
  }
};
var measure9 = {
  systems: {
    SI: SI5
  }
};
var energy_default = measure9;

// node_modules/convert-units/lib/esm/definitions/force.js
var SI6 = {
  N: {
    name: {
      singular: "Newton",
      plural: "Newtons"
    },
    to_anchor: 1
  },
  kN: {
    name: {
      singular: "Kilonewton",
      plural: "Kilonewtons"
    },
    to_anchor: 1e3
  },
  lbf: {
    name: {
      singular: "Pound-force",
      plural: "Pound-forces"
    },
    to_anchor: 4.44822
  }
};
var measure10 = {
  systems: {
    SI: SI6
  }
};
var force_default = measure10;

// node_modules/convert-units/lib/esm/definitions/frequency.js
var SI7 = {
  mHz: {
    name: {
      singular: "millihertz",
      plural: "millihertz"
    },
    to_anchor: 1 / 1e3
  },
  Hz: {
    name: {
      singular: "hertz",
      plural: "hertz"
    },
    to_anchor: 1
  },
  kHz: {
    name: {
      singular: "kilohertz",
      plural: "kilohertz"
    },
    to_anchor: 1e3
  },
  MHz: {
    name: {
      singular: "megahertz",
      plural: "megahertz"
    },
    to_anchor: 1e3 * 1e3
  },
  GHz: {
    name: {
      singular: "gigahertz",
      plural: "gigahertz"
    },
    to_anchor: 1e3 * 1e3 * 1e3
  },
  THz: {
    name: {
      singular: "terahertz",
      plural: "terahertz"
    },
    to_anchor: 1e3 * 1e3 * 1e3 * 1e3
  },
  rpm: {
    name: {
      singular: "rotation per minute",
      plural: "rotations per minute"
    },
    to_anchor: 1 / 60
  },
  "deg/s": {
    name: {
      singular: "degree per second",
      plural: "degrees per second"
    },
    to_anchor: 1 / 360
  },
  "rad/s": {
    name: {
      singular: "radian per second",
      plural: "radians per second"
    },
    to_anchor: 1 / (Math.PI * 2)
  }
};
var measure11 = {
  systems: {
    SI: SI7
  }
};
var frequency_default = measure11;

// node_modules/convert-units/lib/esm/definitions/illuminance.js
var metric4 = {
  lx: {
    name: {
      singular: "Lux",
      plural: "Lux"
    },
    to_anchor: 1
  }
};
var imperial2 = {
  "ft-cd": {
    name: {
      singular: "Foot-candle",
      plural: "Foot-candles"
    },
    to_anchor: 1
  }
};
var measure12 = {
  systems: {
    metric: metric4,
    imperial: imperial2
  },
  anchors: {
    metric: {
      imperial: {
        ratio: 1 / 10.76391
      }
    },
    imperial: {
      metric: {
        ratio: 10.76391
      }
    }
  }
};
var illuminance_default = measure12;

// node_modules/convert-units/lib/esm/definitions/length.js
var metric5 = {
  nm: {
    name: {
      singular: "Nanometer",
      plural: "Nanometers"
    },
    to_anchor: 1e-9
  },
  \u03BCm: {
    name: {
      singular: "Micrometer",
      plural: "Micrometers"
    },
    to_anchor: 1e-6
  },
  mm: {
    name: {
      singular: "Millimeter",
      plural: "Millimeters"
    },
    to_anchor: 1e-3
  },
  cm: {
    name: {
      singular: "Centimeter",
      plural: "Centimeters"
    },
    to_anchor: 0.01
  },
  m: {
    name: {
      singular: "Meter",
      plural: "Meters"
    },
    to_anchor: 1
  },
  km: {
    name: {
      singular: "Kilometer",
      plural: "Kilometers"
    },
    to_anchor: 1e3
  }
};
var imperial3 = {
  in: {
    name: {
      singular: "Inch",
      plural: "Inches"
    },
    to_anchor: 1 / 12
  },
  yd: {
    name: {
      singular: "Yard",
      plural: "Yards"
    },
    to_anchor: 3
  },
  "ft-us": {
    name: {
      singular: "US Survey Foot",
      plural: "US Survey Feet"
    },
    to_anchor: 1.000002
  },
  ft: {
    name: {
      singular: "Foot",
      plural: "Feet"
    },
    to_anchor: 1
  },
  fathom: {
    name: {
      singular: "Fathom",
      plural: "Fathoms"
    },
    to_anchor: 6
  },
  mi: {
    name: {
      singular: "Mile",
      plural: "Miles"
    },
    to_anchor: 5280
  },
  nMi: {
    name: {
      singular: "Nautical Mile",
      plural: "Nautical Miles"
    },
    to_anchor: 6076.12
  }
};
var measure13 = {
  systems: {
    metric: metric5,
    imperial: imperial3
  },
  anchors: {
    metric: {
      imperial: {
        ratio: 3.28084
      }
    },
    imperial: {
      metric: {
        ratio: 1 / 3.28084
      }
    }
  }
};
var length_default3 = measure13;

// node_modules/convert-units/lib/esm/definitions/mass.js
var metric6 = {
  mcg: {
    name: {
      singular: "Microgram",
      plural: "Micrograms"
    },
    to_anchor: 1 / 1e6
  },
  mg: {
    name: {
      singular: "Milligram",
      plural: "Milligrams"
    },
    to_anchor: 1 / 1e3
  },
  g: {
    name: {
      singular: "Gram",
      plural: "Grams"
    },
    to_anchor: 1
  },
  kg: {
    name: {
      singular: "Kilogram",
      plural: "Kilograms"
    },
    to_anchor: 1e3
  },
  mt: {
    name: {
      singular: "Metric Tonne",
      plural: "Metric Tonnes"
    },
    to_anchor: 1e6
  }
};
var imperial4 = {
  oz: {
    name: {
      singular: "Ounce",
      plural: "Ounces"
    },
    to_anchor: 1 / 16
  },
  lb: {
    name: {
      singular: "Pound",
      plural: "Pounds"
    },
    to_anchor: 1
  },
  t: {
    name: {
      singular: "Ton",
      plural: "Tons"
    },
    to_anchor: 2e3
  }
};
var measure14 = {
  systems: {
    metric: metric6,
    imperial: imperial4
  },
  anchors: {
    metric: {
      imperial: {
        ratio: 1 / 453.592
      }
    },
    imperial: {
      metric: {
        ratio: 453.592
      }
    }
  }
};
var mass_default = measure14;

// node_modules/convert-units/lib/esm/definitions/pace.js
var metric7 = {
  "min/km": {
    name: {
      singular: "Minute per kilometre",
      plural: "Minutes per kilometre"
    },
    to_anchor: 0.06
  },
  "s/m": {
    name: {
      singular: "Second per metre",
      plural: "Seconds per metre"
    },
    to_anchor: 1
  }
};
var imperial5 = {
  "min/mi": {
    name: {
      singular: "Minute per mile",
      plural: "Minutes per mile"
    },
    to_anchor: 0.0113636
  },
  "s/ft": {
    name: {
      singular: "Second per foot",
      plural: "Seconds per foot"
    },
    to_anchor: 1
  }
};
var measure15 = {
  systems: {
    metric: metric7,
    imperial: imperial5
  },
  anchors: {
    metric: {
      imperial: {
        ratio: 0.3048
      }
    },
    imperial: {
      metric: {
        ratio: 1 / 0.3048
      }
    }
  }
};
var pace_default = measure15;

// node_modules/convert-units/lib/esm/definitions/partsPer.js
var SI8 = {
  ppm: {
    name: {
      singular: "Part-per Million",
      plural: "Parts-per Million"
    },
    to_anchor: 1
  },
  ppb: {
    name: {
      singular: "Part-per Billion",
      plural: "Parts-per Billion"
    },
    to_anchor: 1e-3
  },
  ppt: {
    name: {
      singular: "Part-per Trillion",
      plural: "Parts-per Trillion"
    },
    to_anchor: 1e-6
  },
  ppq: {
    name: {
      singular: "Part-per Quadrillion",
      plural: "Parts-per Quadrillion"
    },
    to_anchor: 1e-9
  }
};
var measure16 = {
  systems: {
    SI: SI8
  }
};
var partsPer_default = measure16;

// node_modules/convert-units/lib/esm/definitions/pieces.js
var unit2 = {
  pcs: {
    name: {
      singular: "Piece",
      plural: "Pieces"
    },
    to_anchor: 1
  },
  "bk-doz": {
    name: {
      singular: "Bakers Dozen",
      plural: "Bakers Dozen"
    },
    to_anchor: 13
  },
  cp: {
    name: {
      singular: "Couple",
      plural: "Couples"
    },
    to_anchor: 2
  },
  "doz-doz": {
    name: {
      singular: "Dozen Dozen",
      plural: "Dozen Dozen"
    },
    to_anchor: 144
  },
  doz: {
    name: {
      singular: "Dozen",
      plural: "Dozens"
    },
    to_anchor: 12
  },
  "gr-gr": {
    name: {
      singular: "Great Gross",
      plural: "Great Gross"
    },
    to_anchor: 1728
  },
  gros: {
    name: {
      singular: "Gross",
      plural: "Gross"
    },
    to_anchor: 144
  },
  "half-dozen": {
    name: {
      singular: "Half Dozen",
      plural: "Half Dozen"
    },
    to_anchor: 6
  },
  "long-hundred": {
    name: {
      singular: "Long Hundred",
      plural: "Long Hundred"
    },
    to_anchor: 120
  },
  ream: {
    name: {
      singular: "Reams",
      plural: "Reams"
    },
    to_anchor: 500
  },
  scores: {
    name: {
      singular: "Scores",
      plural: "Scores"
    },
    to_anchor: 20
  },
  "sm-gr": {
    name: {
      singular: "Small Gross",
      plural: "Small Gross"
    },
    to_anchor: 120
  },
  trio: {
    name: {
      singular: "Trio",
      plural: "Trio"
    },
    to_anchor: 3
  }
};
var measure17 = {
  systems: {
    unit: unit2
  }
};
var pieces_default = measure17;

// node_modules/convert-units/lib/esm/definitions/power.js
var metric8 = {
  W: {
    name: {
      singular: "Watt",
      plural: "Watts"
    },
    to_anchor: 1
  },
  mW: {
    name: {
      singular: "Milliwatt",
      plural: "Milliwatts"
    },
    to_anchor: 1e-3
  },
  kW: {
    name: {
      singular: "Kilowatt",
      plural: "Kilowatts"
    },
    to_anchor: 1e3
  },
  MW: {
    name: {
      singular: "Megawatt",
      plural: "Megawatts"
    },
    to_anchor: 1e6
  },
  GW: {
    name: {
      singular: "Gigawatt",
      plural: "Gigawatts"
    },
    to_anchor: 1e9
  },
  PS: {
    name: {
      singular: "Horsepower (metric)",
      plural: "Horsepower (metric)"
    },
    to_anchor: 735.49875
  }
};
var imperial6 = {
  "Btu/s": {
    name: {
      singular: "British thermal unit per second",
      plural: "British thermal units per second"
    },
    to_anchor: 778.16937
  },
  "ft-lb/s": {
    name: {
      singular: "Foot-pound per second",
      plural: "Foot-pounds per second"
    },
    to_anchor: 1
  },
  hp: {
    name: {
      singular: "Horsepower (British)",
      plural: "Horsepower (British)"
    },
    to_anchor: 550
  }
};
var measure18 = {
  systems: {
    metric: metric8,
    imperial: imperial6
  },
  anchors: {
    metric: {
      imperial: {
        ratio: 0.737562149
      }
    },
    imperial: {
      metric: {
        ratio: 1 / 0.737562149
      }
    }
  }
};
var power_default = measure18;

// node_modules/convert-units/lib/esm/definitions/pressure.js
var metric9 = {
  Pa: {
    name: {
      singular: "pascal",
      plural: "pascals"
    },
    to_anchor: 1 / 1e3
  },
  kPa: {
    name: {
      singular: "kilopascal",
      plural: "kilopascals"
    },
    to_anchor: 1
  },
  MPa: {
    name: {
      singular: "megapascal",
      plural: "megapascals"
    },
    to_anchor: 1e3
  },
  hPa: {
    name: {
      singular: "hectopascal",
      plural: "hectopascals"
    },
    to_anchor: 1 / 10
  },
  bar: {
    name: {
      singular: "bar",
      plural: "bar"
    },
    to_anchor: 100
  },
  torr: {
    name: {
      singular: "torr",
      plural: "torr"
    },
    to_anchor: 101325 / 76e4
  }
};
var imperial7 = {
  psi: {
    name: {
      singular: "pound per square inch",
      plural: "pounds per square inch"
    },
    to_anchor: 1 / 1e3
  },
  ksi: {
    name: {
      singular: "kilopound per square inch",
      plural: "kilopound per square inch"
    },
    to_anchor: 1
  },
  inHg: {
    name: {
      singular: "Inch of mercury",
      plural: "Inches of mercury"
    },
    to_anchor: 491154e-9
  }
};
var measure19 = {
  systems: {
    metric: metric9,
    imperial: imperial7
  },
  anchors: {
    metric: {
      imperial: {
        ratio: 14503768078e-14
      }
    },
    imperial: {
      metric: {
        ratio: 1 / 14503768078e-14
      }
    }
  }
};
var pressure_default = measure19;

// node_modules/convert-units/lib/esm/definitions/reactiveEnergy.js
var SI9 = {
  VARh: {
    name: {
      singular: "Volt-Ampere Reactive Hour",
      plural: "Volt-Amperes Reactive Hour"
    },
    to_anchor: 1
  },
  mVARh: {
    name: {
      singular: "Millivolt-Ampere Reactive Hour",
      plural: "Millivolt-Amperes Reactive Hour"
    },
    to_anchor: 1e-3
  },
  kVARh: {
    name: {
      singular: "Kilovolt-Ampere Reactive Hour",
      plural: "Kilovolt-Amperes Reactive Hour"
    },
    to_anchor: 1e3
  },
  MVARh: {
    name: {
      singular: "Megavolt-Ampere Reactive Hour",
      plural: "Megavolt-Amperes Reactive Hour"
    },
    to_anchor: 1e6
  },
  GVARh: {
    name: {
      singular: "Gigavolt-Ampere Reactive Hour",
      plural: "Gigavolt-Amperes Reactive Hour"
    },
    to_anchor: 1e9
  }
};
var measure20 = {
  systems: {
    SI: SI9
  }
};
var reactiveEnergy_default = measure20;

// node_modules/convert-units/lib/esm/definitions/reactivePower.js
var SI10 = {
  VAR: {
    name: {
      singular: "Volt-Ampere Reactive",
      plural: "Volt-Amperes Reactive"
    },
    to_anchor: 1
  },
  mVAR: {
    name: {
      singular: "Millivolt-Ampere Reactive",
      plural: "Millivolt-Amperes Reactive"
    },
    to_anchor: 1e-3
  },
  kVAR: {
    name: {
      singular: "Kilovolt-Ampere Reactive",
      plural: "Kilovolt-Amperes Reactive"
    },
    to_anchor: 1e3
  },
  MVAR: {
    name: {
      singular: "Megavolt-Ampere Reactive",
      plural: "Megavolt-Amperes Reactive"
    },
    to_anchor: 1e6
  },
  GVAR: {
    name: {
      singular: "Gigavolt-Ampere Reactive",
      plural: "Gigavolt-Amperes Reactive"
    },
    to_anchor: 1e9
  }
};
var measure21 = {
  systems: {
    SI: SI10
  }
};
var reactivePower_default = measure21;

// node_modules/convert-units/lib/esm/definitions/speed.js
var metric10 = {
  "m/s": {
    name: {
      singular: "Metre per second",
      plural: "Metres per second"
    },
    to_anchor: 3.6
  },
  "km/h": {
    name: {
      singular: "Kilometre per hour",
      plural: "Kilometres per hour"
    },
    to_anchor: 1
  }
};
var imperial8 = {
  mph: {
    name: {
      singular: "Mile per hour",
      plural: "Miles per hour"
    },
    to_anchor: 1
  },
  knot: {
    name: {
      singular: "Knot",
      plural: "Knots"
    },
    to_anchor: 1.150779
  },
  "ft/s": {
    name: {
      singular: "Foot per second",
      plural: "Feet per second"
    },
    to_anchor: 0.681818
  },
  "ft/min": {
    name: {
      singular: "Foot per minute",
      plural: "Feet per minute"
    },
    to_anchor: 0.0113636
  }
};
var measure22 = {
  systems: {
    metric: metric10,
    imperial: imperial8
  },
  anchors: {
    metric: {
      imperial: {
        ratio: 1 / 1.609344
      }
    },
    imperial: {
      metric: {
        ratio: 1.609344
      }
    }
  }
};
var speed_default = measure22;

// node_modules/convert-units/lib/esm/definitions/temperature.js
var metric11 = {
  C: {
    name: {
      singular: "degree Celsius",
      plural: "degrees Celsius"
    },
    to_anchor: 1,
    anchor_shift: 0
  },
  K: {
    name: {
      singular: "degree Kelvin",
      plural: "degrees Kelvin"
    },
    to_anchor: 1,
    anchor_shift: 273.15
  }
};
var imperial9 = {
  F: {
    name: {
      singular: "degree Fahrenheit",
      plural: "degrees Fahrenheit"
    },
    to_anchor: 1
  },
  R: {
    name: {
      singular: "degree Rankine",
      plural: "degrees Rankine"
    },
    to_anchor: 1,
    anchor_shift: 459.67
  }
};
var measure23 = {
  systems: {
    metric: metric11,
    imperial: imperial9
  },
  anchors: {
    metric: {
      imperial: {
        transform: function(C2) {
          return C2 / (5 / 9) + 32;
        }
      }
    },
    imperial: {
      metric: {
        transform: function(F) {
          return (F - 32) * (5 / 9);
        }
      }
    }
  }
};
var temperature_default = measure23;

// node_modules/convert-units/lib/esm/definitions/time.js
var daysInYear2 = 365.25;
var SI11 = {
  ns: {
    name: {
      singular: "Nanosecond",
      plural: "Nanoseconds"
    },
    to_anchor: 1 / 1e9
  },
  mu: {
    name: {
      singular: "Microsecond",
      plural: "Microseconds"
    },
    to_anchor: 1 / 1e6
  },
  ms: {
    name: {
      singular: "Millisecond",
      plural: "Milliseconds"
    },
    to_anchor: 1 / 1e3
  },
  s: {
    name: {
      singular: "Second",
      plural: "Seconds"
    },
    to_anchor: 1
  },
  min: {
    name: {
      singular: "Minute",
      plural: "Minutes"
    },
    to_anchor: 60
  },
  h: {
    name: {
      singular: "Hour",
      plural: "Hours"
    },
    to_anchor: 60 * 60
  },
  d: {
    name: {
      singular: "Day",
      plural: "Days"
    },
    to_anchor: 60 * 60 * 24
  },
  week: {
    name: {
      singular: "Week",
      plural: "Weeks"
    },
    to_anchor: 60 * 60 * 24 * 7
  },
  month: {
    name: {
      singular: "Month",
      plural: "Months"
    },
    to_anchor: 60 * 60 * 24 * daysInYear2 / 12
  },
  year: {
    name: {
      singular: "Year",
      plural: "Years"
    },
    to_anchor: 60 * 60 * 24 * daysInYear2
  }
};
var measure24 = {
  systems: {
    SI: SI11
  }
};
var time_default = measure24;

// node_modules/convert-units/lib/esm/definitions/voltage.js
var SI12 = {
  V: {
    name: {
      singular: "Volt",
      plural: "Volts"
    },
    to_anchor: 1
  },
  mV: {
    name: {
      singular: "Millivolt",
      plural: "Millivolts"
    },
    to_anchor: 1e-3
  },
  kV: {
    name: {
      singular: "Kilovolt",
      plural: "Kilovolts"
    },
    to_anchor: 1e3
  }
};
var measure25 = {
  systems: {
    SI: SI12
  }
};
var voltage_default = measure25;

// node_modules/convert-units/lib/esm/definitions/volume.js
var metric12 = {
  mm3: {
    name: {
      singular: "Cubic Millimeter",
      plural: "Cubic Millimeters"
    },
    to_anchor: 1 / 1e6
  },
  cm3: {
    name: {
      singular: "Cubic Centimeter",
      plural: "Cubic Centimeters"
    },
    to_anchor: 1 / 1e3
  },
  ml: {
    name: {
      singular: "Millilitre",
      plural: "Millilitres"
    },
    to_anchor: 1 / 1e3
  },
  cl: {
    name: {
      singular: "Centilitre",
      plural: "Centilitres"
    },
    to_anchor: 1 / 100
  },
  dl: {
    name: {
      singular: "Decilitre",
      plural: "Decilitres"
    },
    to_anchor: 1 / 10
  },
  l: {
    name: {
      singular: "Litre",
      plural: "Litres"
    },
    to_anchor: 1
  },
  kl: {
    name: {
      singular: "Kilolitre",
      plural: "Kilolitres"
    },
    to_anchor: 1e3
  },
  Ml: {
    name: {
      singular: "Megalitre",
      plural: "Megalitres"
    },
    to_anchor: 1e6
  },
  Gl: {
    name: {
      singular: "Gigalitre",
      plural: "Gigalitres"
    },
    to_anchor: 1e9
  },
  m3: {
    name: {
      singular: "Cubic meter",
      plural: "Cubic meters"
    },
    to_anchor: 1e3
  },
  km3: {
    name: {
      singular: "Cubic kilometer",
      plural: "Cubic kilometers"
    },
    to_anchor: 1e12
  },
  krm: {
    name: {
      singular: "Kryddm\xE5tt",
      plural: "Kryddm\xE5tt"
    },
    to_anchor: 1 / 1e3
  },
  tsk: {
    name: {
      singular: "Tesked",
      plural: "Teskedar"
    },
    to_anchor: 5 / 1e3
  },
  msk: {
    name: {
      singular: "Matsked",
      plural: "Matskedar"
    },
    to_anchor: 15 / 1e3
  },
  kkp: {
    name: {
      singular: "Kaffekopp",
      plural: "Kaffekoppar"
    },
    to_anchor: 150 / 1e3
  },
  glas: {
    name: {
      singular: "Glas",
      plural: "Glas"
    },
    to_anchor: 200 / 1e3
  },
  kanna: {
    name: {
      singular: "Kanna",
      plural: "Kannor"
    },
    to_anchor: 2.617
  }
};
var imperial10 = {
  tsp: {
    name: {
      singular: "Teaspoon",
      plural: "Teaspoons"
    },
    to_anchor: 1 / 6
  },
  Tbs: {
    name: {
      singular: "Tablespoon",
      plural: "Tablespoons"
    },
    to_anchor: 1 / 2
  },
  in3: {
    name: {
      singular: "Cubic inch",
      plural: "Cubic inches"
    },
    to_anchor: 0.55411
  },
  "fl-oz": {
    name: {
      singular: "Fluid Ounce",
      plural: "Fluid Ounces"
    },
    to_anchor: 1
  },
  cup: {
    name: {
      singular: "Cup",
      plural: "Cups"
    },
    to_anchor: 8
  },
  pnt: {
    name: {
      singular: "Pint",
      plural: "Pints"
    },
    to_anchor: 16
  },
  qt: {
    name: {
      singular: "Quart",
      plural: "Quarts"
    },
    to_anchor: 32
  },
  gal: {
    name: {
      singular: "Gallon",
      plural: "Gallons"
    },
    to_anchor: 128
  },
  ft3: {
    name: {
      singular: "Cubic foot",
      plural: "Cubic feet"
    },
    to_anchor: 957.506
  },
  yd3: {
    name: {
      singular: "Cubic yard",
      plural: "Cubic yards"
    },
    to_anchor: 25852.7
  }
};
var measure26 = {
  systems: {
    metric: metric12,
    imperial: imperial10
  },
  anchors: {
    metric: {
      imperial: {
        ratio: 33.8140226
      }
    },
    imperial: {
      metric: {
        ratio: 1 / 33.8140226
      }
    }
  }
};
var volume_default = measure26;

// node_modules/convert-units/lib/esm/definitions/volumeFlowRate.js
var metric13 = {
  "mm3/s": {
    name: {
      singular: "Cubic Millimeter per second",
      plural: "Cubic Millimeters per second"
    },
    to_anchor: 1 / 1e6
  },
  "cm3/s": {
    name: {
      singular: "Cubic Centimeter per second",
      plural: "Cubic Centimeters per second"
    },
    to_anchor: 1 / 1e3
  },
  "ml/s": {
    name: {
      singular: "Millilitre per second",
      plural: "Millilitres per second"
    },
    to_anchor: 1 / 1e3
  },
  "cl/s": {
    name: {
      singular: "Centilitre per second",
      plural: "Centilitres per second"
    },
    to_anchor: 1 / 100
  },
  "dl/s": {
    name: {
      singular: "Decilitre per second",
      plural: "Decilitres per second"
    },
    to_anchor: 1 / 10
  },
  "l/s": {
    name: {
      singular: "Litre per second",
      plural: "Litres per second"
    },
    to_anchor: 1
  },
  "l/min": {
    name: {
      singular: "Litre per minute",
      plural: "Litres per minute"
    },
    to_anchor: 1 / 60
  },
  "l/h": {
    name: {
      singular: "Litre per hour",
      plural: "Litres per hour"
    },
    to_anchor: 1 / 3600
  },
  "kl/s": {
    name: {
      singular: "Kilolitre per second",
      plural: "Kilolitres per second"
    },
    to_anchor: 1e3
  },
  "kl/min": {
    name: {
      singular: "Kilolitre per minute",
      plural: "Kilolitres per minute"
    },
    to_anchor: 50 / 3
  },
  "kl/h": {
    name: {
      singular: "Kilolitre per hour",
      plural: "Kilolitres per hour"
    },
    to_anchor: 5 / 18
  },
  "m3/s": {
    name: {
      singular: "Cubic meter per second",
      plural: "Cubic meters per second"
    },
    to_anchor: 1e3
  },
  "m3/min": {
    name: {
      singular: "Cubic meter per minute",
      plural: "Cubic meters per minute"
    },
    to_anchor: 50 / 3
  },
  "m3/h": {
    name: {
      singular: "Cubic meter per hour",
      plural: "Cubic meters per hour"
    },
    to_anchor: 5 / 18
  },
  "km3/s": {
    name: {
      singular: "Cubic kilometer per second",
      plural: "Cubic kilometers per second"
    },
    to_anchor: 1e12
  }
};
var imperial11 = {
  "tsp/s": {
    name: {
      singular: "Teaspoon per second",
      plural: "Teaspoons per second"
    },
    to_anchor: 1 / 6
  },
  "Tbs/s": {
    name: {
      singular: "Tablespoon per second",
      plural: "Tablespoons per second"
    },
    to_anchor: 1 / 2
  },
  "in3/s": {
    name: {
      singular: "Cubic inch per second",
      plural: "Cubic inches per second"
    },
    to_anchor: 0.55411
  },
  "in3/min": {
    name: {
      singular: "Cubic inch per minute",
      plural: "Cubic inches per minute"
    },
    to_anchor: 0.55411 / 60
  },
  "in3/h": {
    name: {
      singular: "Cubic inch per hour",
      plural: "Cubic inches per hour"
    },
    to_anchor: 0.55411 / 3600
  },
  "fl-oz/s": {
    name: {
      singular: "Fluid Ounce per second",
      plural: "Fluid Ounces per second"
    },
    to_anchor: 1
  },
  "fl-oz/min": {
    name: {
      singular: "Fluid Ounce per minute",
      plural: "Fluid Ounces per minute"
    },
    to_anchor: 1 / 60
  },
  "fl-oz/h": {
    name: {
      singular: "Fluid Ounce per hour",
      plural: "Fluid Ounces per hour"
    },
    to_anchor: 1 / 3600
  },
  "cup/s": {
    name: {
      singular: "Cup per second",
      plural: "Cups per second"
    },
    to_anchor: 8
  },
  "pnt/s": {
    name: {
      singular: "Pint per second",
      plural: "Pints per second"
    },
    to_anchor: 16
  },
  "pnt/min": {
    name: {
      singular: "Pint per minute",
      plural: "Pints per minute"
    },
    to_anchor: 4 / 15
  },
  "pnt/h": {
    name: {
      singular: "Pint per hour",
      plural: "Pints per hour"
    },
    to_anchor: 1 / 225
  },
  "qt/s": {
    name: {
      singular: "Quart per second",
      plural: "Quarts per second"
    },
    to_anchor: 32
  },
  "gal/s": {
    name: {
      singular: "Gallon per second",
      plural: "Gallons per second"
    },
    to_anchor: 128
  },
  "gal/min": {
    name: {
      singular: "Gallon per minute",
      plural: "Gallons per minute"
    },
    to_anchor: 32 / 15
  },
  "gal/h": {
    name: {
      singular: "Gallon per hour",
      plural: "Gallons per hour"
    },
    to_anchor: 8 / 225
  },
  "ft3/s": {
    name: {
      singular: "Cubic foot per second",
      plural: "Cubic feet per second"
    },
    to_anchor: 957.506
  },
  "ft3/min": {
    name: {
      singular: "Cubic foot per minute",
      plural: "Cubic feet per minute"
    },
    to_anchor: 957.506 / 60
  },
  "ft3/h": {
    name: {
      singular: "Cubic foot per hour",
      plural: "Cubic feet per hour"
    },
    to_anchor: 957.506 / 3600
  },
  "yd3/s": {
    name: {
      singular: "Cubic yard per second",
      plural: "Cubic yards per second"
    },
    to_anchor: 25852.7
  },
  "yd3/min": {
    name: {
      singular: "Cubic yard per minute",
      plural: "Cubic yards per minute"
    },
    to_anchor: 25852.7 / 60
  },
  "yd3/h": {
    name: {
      singular: "Cubic yard per hour",
      plural: "Cubic yards per hour"
    },
    to_anchor: 25852.7 / 3600
  }
};
var measure27 = {
  systems: {
    metric: metric13,
    imperial: imperial11
  },
  anchors: {
    metric: {
      imperial: {
        ratio: 33.8140227
      }
    },
    imperial: {
      metric: {
        ratio: 1 / 33.8140227
      }
    }
  }
};
var volumeFlowRate_default = measure27;

// node_modules/convert-units/lib/esm/definitions/index.js
var allMeasures = {
  acceleration: acceleration_default,
  angle: angle_default,
  apparentPower: apparentPower_default,
  area: area_default6,
  charge: charge_default,
  current: current_default,
  digital: digital_default,
  each: each_default3,
  energy: energy_default,
  force: force_default,
  frequency: frequency_default,
  illuminance: illuminance_default,
  length: length_default3,
  mass: mass_default,
  pace: pace_default,
  partsPer: partsPer_default,
  pieces: pieces_default,
  power: power_default,
  pressure: pressure_default,
  reactiveEnergy: reactiveEnergy_default,
  reactivePower: reactivePower_default,
  speed: speed_default,
  temperature: temperature_default,
  time: time_default,
  voltage: voltage_default,
  volume: volume_default,
  volumeFlowRate: volumeFlowRate_default
};
var definitions_default = allMeasures;

// node_modules/convert-units/lib/esm/index.js
var esm_default = convert_default;

// src/transfer.ts
var convert2 = esm_default(definitions_default);
function transfer(seis, response, lowCut, lowPass, highPass, highCut) {
  if (!response) {
    throw new Error("Response not exist???");
  }
  const sacPoleZero = convertToSacPoleZero(response);
  return transferSacPZ(seis, sacPoleZero, lowCut, lowPass, highPass, highCut);
}
function transferSacPZ(seis, sacPoleZero, lowCut, lowPass, highPass, highCut) {
  const outSeis = [];
  for (let i = 0; i < seis.segments.length; i++) {
    const result = transferSacPZSegment(
      seis.segments[i],
      sacPoleZero,
      lowCut,
      lowPass,
      highPass,
      highCut
    );
    outSeis.push(result);
  }
  return new Seismogram(outSeis);
}
function transferSacPZSegment(seis, sacPoleZero, lowCut, lowPass, highPass, highCut) {
  const sampFreq = seis.sampleRate;
  const values = seis.y;
  let outData = Float32Array.from(values);
  outData.forEach((d, i) => outData[i] = d / sampFreq);
  let freqValues = calcDFT(outData);
  freqValues = combine(
    freqValues,
    sampFreq,
    sacPoleZero,
    lowCut,
    lowPass,
    highPass,
    highCut
  );
  outData = inverseDFT(freqValues, values.length);
  outData.forEach((d, i) => outData[i] = d * freqValues.length);
  const out = seis.cloneWithNewData(outData);
  out.yUnit = "m";
  return out;
}
function calcResponse(response, numPoints, sampleRate, unit3) {
  const sacPoleZero = convertToSacPoleZero(response);
  const unitQty = convert2(1).getUnit(unit3);
  let gamma2 = 0;
  if (unitQty === null) {
    throw new Error("unknown response unit: " + unit3);
  } else if (unitQty.measure == "length") {
    gamma2 = 0;
  } else if (unitQty.measure == "speed") {
    gamma2 = 1;
  } else if (unitQty.measure == "acceleration") {
    gamma2 = 2;
  } else {
    throw new Error(
      "response unit is not displacement (m), velocity (m/s) or acceleration (m/s^2): " + unit3
    );
  }
  sacPoleZero.trimZeros(gamma2);
  const out = calcResponseFromSacPoleZero(sacPoleZero, numPoints, sampleRate);
  return out;
}
function calcResponseFromSacPoleZero(sacPoleZero, numPoints, sampleRate) {
  const deltaF = sampleRate / numPoints;
  const freqValues = new Float32Array(numPoints);
  let respAtS;
  respAtS = evalPoleZeroInverse(sacPoleZero, 0);
  respAtS = new Complex(1, 0).overComplex(respAtS);
  freqValues[0] = respAtS.real();
  let freq = sampleRate / 2;
  respAtS = evalPoleZeroInverse(sacPoleZero, freq);
  respAtS = new Complex(1, 0).overComplex(respAtS);
  freqValues[freqValues.length / 2] = respAtS.real();
  for (let i = 1; i < freqValues.length / 2; i++) {
    freq = i * deltaF;
    respAtS = evalPoleZeroInverse(sacPoleZero, freq);
    respAtS = new Complex(1, 0).overComplex(respAtS);
    if (respAtS.real() !== 0 || respAtS.imag() !== 0) {
      freqValues[i] = respAtS.real();
      freqValues[freqValues.length - i] = respAtS.imag();
    } else {
      freqValues[i] = 1e-10;
      freqValues[freqValues.length - i] = 0;
    }
  }
  const out = FFTResult.createFromPackedFreq(freqValues, numPoints, sampleRate);
  return out;
}
function combine(freqValues, sampFreq, sacPoleZero, lowCut, lowPass, highPass, highCut) {
  const deltaF = sampFreq / freqValues.length;
  freqValues[0] = 0;
  let freq = sampFreq / 2;
  let respAtS = evalPoleZeroInverse(sacPoleZero, freq);
  respAtS = respAtS.timesReal(
    deltaF * calcFreqTaper(freq, lowCut, lowPass, highPass, highCut)
  );
  freqValues[freqValues.length / 2] = respAtS.timesReal(freqValues[freqValues.length / 2]).real();
  for (let i = 1; i < freqValues.length / 2; i++) {
    freq = i * deltaF;
    respAtS = evalPoleZeroInverse(sacPoleZero, freq);
    respAtS = respAtS.timesReal(
      deltaF * calcFreqTaper(freq, lowCut, lowPass, highPass, highCut)
    );
    const freqComplex = new Complex(
      freqValues[i],
      freqValues[freqValues.length - i]
    ).timesComplex(respAtS);
    freqValues[i] = freqComplex.real();
    freqValues[freqValues.length - i] = freqComplex.imag();
  }
  return freqValues;
}
function evalPoleZeroInverse(sacPoleZero, freq) {
  return sacPoleZero.evalPoleZeroInverse(freq);
}
function calcFreqTaper(freq, lowCut, lowPass, highPass, highCut) {
  if (lowCut > lowPass || lowPass > highPass || highPass > highCut) {
    throw new Error(
      "must be lowCut > lowPass > highPass > highCut: " + lowCut + " " + lowPass + " " + highPass + " " + highCut
    );
  }
  if (freq <= lowCut || freq >= highCut) {
    return 0;
  }
  if (freq >= lowPass && freq <= highPass) {
    return 1;
  }
  if (freq > lowCut && freq < lowPass) {
    return 0.5 * (1 + Math.cos(Math.PI * (freq - lowPass) / (lowCut - lowPass)));
  }
  return 0.5 * (1 - Math.cos(Math.PI * (freq - highCut) / (highPass - highCut)));
}
function applyFreqTaper(fftResult, sampleRate, lowCut, lowPass, highPass, highCut) {
  const deltaF = fftResult.fundamentalFrequency;
  return FFTResult.createFromAmpPhase(
    fftResult.amplitudes().map(
      (v, i) => i === 0 ? 0 : v * calcFreqTaper(i * deltaF, lowCut, lowPass, highPass, highCut)
    ),
    fftResult.phases(),
    fftResult.origLength,
    fftResult.sampleRate
  );
}
var METER = convert2().getUnit("m");
var METER_PER_SECOND = convert2().getUnit("m/s");
var METER_PER_SECOND_PER_SECOND = convert2().getUnit("m/s2");
function calcGamma(unit3) {
  let gamma2;
  const unitQty = convert2(1).getUnit(unit3);
  if (unitQty === null) {
    throw new Error("unknown response unit: " + unit3);
  } else if (unitQty.measure == "length") {
    gamma2 = 0;
  } else if (unitQty.measure == "speed") {
    gamma2 = 1;
  } else if (unitQty.measure == "acceleration") {
    gamma2 = 2;
  } else {
    throw new Error(
      "response unit is not displacement (m), velocity (m/s) or acceleration (m/s^2): " + unit3
    );
  }
  return gamma2;
}
function calcScaleUnit(unit3) {
  let scale;
  const unitQty = convert2(1).getUnit(unit3);
  if (unitQty === null) {
    throw new Error("unknown response unit: " + unit3);
  } else if (unitQty.measure == "length") {
    scale = convert2(1).from(unit3).to("m");
  } else if (unitQty.measure == "speed") {
    scale = convert2(1).from(unit3).to("m/s");
  } else if (unitQty.measure == "acceleration") {
    scale = convert2(1).from(unit3).to("m/s2");
  } else {
    throw new Error(
      "response unit is not displacement (m), velocity (m/s) or acceleration (m/s^2): " + unit3
    );
  }
  return scale;
}
function convertToSacPoleZero(response) {
  let polesZeros;
  if (response.stages[0].filter instanceof PolesZeros) {
    polesZeros = response.stages[0].filter;
  } else {
    throw new Error("can't find PolesZeros");
  }
  if (response.instrumentSensitivity === null) {
    throw new Error("response.instrumentSensitivity missing");
  }
  let unit3 = response.instrumentSensitivity.inputUnits;
  if (unit3 === "M/S" || unit3 === "M/SEC") {
    unit3 = "m/s";
  }
  let gamma2 = calcGamma(unit3);
  let scaleUnit = calcScaleUnit(unit3);
  const scale_sensitivity = scaleUnit * response.instrumentSensitivity.sensitivity;
  return convertPoleZeroToSacStyle(
    polesZeros,
    scale_sensitivity,
    response.instrumentSensitivity.frequency,
    gamma2
  );
}
function convertPoleZeroToSacStyle(polesZeros, sensitivity, sensitivity_freq, gamma2) {
  let mulFactor = 1;
  if (polesZeros.pzTransferFunctionType === "LAPLACE (HERTZ)") {
    mulFactor = 2 * Math.PI;
  }
  const zeros = [];
  for (let i = 0; i < polesZeros.zeros.length; i++) {
    zeros[i] = new Complex(
      polesZeros.zeros[i].real() * mulFactor,
      polesZeros.zeros[i].imag() * mulFactor
    );
  }
  for (let i = 0; i < gamma2; i++) {
    zeros.push(new Complex(0, 0));
  }
  const poles = [];
  for (let i = 0; i < polesZeros.poles.length; i++) {
    poles[i] = new Complex(
      polesZeros.poles[i].real() * mulFactor,
      polesZeros.poles[i].imag() * mulFactor
    );
  }
  let constant = polesZeros.normalizationFactor;
  let sd = sensitivity;
  const fs = sensitivity_freq;
  sd *= Math.pow(2 * Math.PI * fs, gamma2);
  let A0 = polesZeros.normalizationFactor;
  const fn = polesZeros.normalizationFrequency;
  A0 = A0 / Math.pow(2 * Math.PI * fn, gamma2);
  if (polesZeros.pzTransferFunctionType === "LAPLACE (HERTZ)") {
    A0 *= Math.pow(
      2 * Math.PI,
      polesZeros.poles.length - polesZeros.zeros.length
    );
  }
  if (poles.length === 0 && zeros.length === 0) {
    constant = sd * A0;
  } else {
    constant = sd * calc_A0(poles, zeros, fs);
  }
  const sacPZ = new SacPoleZero(poles, zeros, constant);
  sacPZ.gamma = gamma2;
  sacPZ.mulFactor = mulFactor;
  sacPZ.sd = sd;
  sacPZ.A0 = A0;
  return sacPZ;
}
function calc_A0(poles, zeros, ref_freq) {
  let numer = new Complex(1, 0);
  let denom = new Complex(1, 0);
  let f0;
  let a0;
  f0 = new Complex(0, 2 * Math.PI * ref_freq);
  for (let i = 0; i < zeros.length; i++) {
    denom = denom.timesComplex(f0.minusComplex(zeros[i]));
  }
  for (let i = 0; i < poles.length; i++) {
    numer = numer.timesComplex(f0.minusComplex(poles[i]));
  }
  a0 = numer.overComplex(denom).abs();
  return a0;
}

// src/vector.ts
var vector_exports = {};
__export(vector_exports, {
  DtoR: () => DtoR,
  RotatedSeismograms: () => RotatedSeismograms,
  rotate: () => rotate,
  vectorMagnitude: () => vectorMagnitude
});
var DtoR = Math.PI / 180;
var RotatedSeismograms = class {
  constructor(radial2, azimuthRadial, transverse, azimuthTransverse, rotation) {
    __publicField(this, "radial");
    __publicField(this, "transverse");
    __publicField(this, "azimuthRadial");
    __publicField(this, "azimuthTransverse");
    __publicField(this, "rotation");
    this.radial = radial2;
    this.azimuthRadial = azimuthRadial;
    this.transverse = transverse;
    this.azimuthTransverse = azimuthTransverse;
    this.rotation = rotation;
  }
};
function rotate(seisA, azimuthA, seisB, azimuthB, azimuth) {
  if (seisA.segments.length !== seisB.segments.length) {
    throw new Error(
      `Seismograms do not have same number of segments: ${seisA.segments.length} !== ${seisB.segments.length}`
    );
  }
  const rotOutRad = [];
  const rotOutTrans = [];
  for (let i = 0; i < seisA.segments.length; i++) {
    const result = rotateSeismogramSegment(
      seisA.segments[i],
      azimuthA,
      seisB.segments[i],
      azimuthB,
      azimuth
    );
    rotOutRad.push(result.radial);
    rotOutTrans.push(result.transverse);
  }
  const out = new RotatedSeismograms(
    new Seismogram(rotOutRad),
    azimuth % 360,
    new Seismogram(rotOutTrans),
    (azimuth + 90) % 360,
    azimuth - azimuthA
  );
  return out;
}
function rotateSeismogramSegment(seisA, azimuthA, seisB, azimuthB, azimuth) {
  if (seisA.y.length !== seisB.y.length) {
    throw new Error(
      `seisA and seisB should be of same lenght but was ${seisA.y.length} ${seisB.y.length}`
    );
  }
  if (!seisA.startTime.equals(seisB.startTime)) {
    throw new Error(
      `Expect startTime to be same, but was ${seisA.startTime.toISO()} ${seisB.startTime.toISO()}`
    );
  }
  if (seisA.sampleRate !== seisB.sampleRate) {
    throw new Error(
      `Expect sampleRate to be same, but was ${seisA.sampleRate} ${seisB.sampleRate}`
    );
  }
  if ((azimuthA + 90) % 360 !== azimuthB % 360) {
    throw new Error(
      `Expect azimuthB to be azimuthA + 90, but was ${azimuthA} ${azimuthB}`
    );
  }
  const rotRadian = 1 * DtoR * (azimuth - azimuthA);
  const cosTheta = Math.cos(rotRadian);
  const sinTheta = Math.sin(rotRadian);
  const x4 = new Float32Array(seisA.y.length);
  const y4 = new Float32Array(seisA.y.length);
  for (let i = 0; i < seisA.y.length; i++) {
    x4[i] = cosTheta * seisB.yAtIndex(i) - sinTheta * seisA.yAtIndex(i);
    y4[i] = sinTheta * seisB.yAtIndex(i) + cosTheta * seisA.yAtIndex(i);
  }
  const outSeisRad = seisA.cloneWithNewData(y4);
  const outSeisTan = seisA.cloneWithNewData(x4);
  if (seisA.chanCode) {
    outSeisRad.channelCode = seisA.chanCode.slice(0, 2) + "R";
    outSeisTan.channelCode = seisA.chanCode.slice(0, 2) + "T";
  }
  const out = {
    radial: outSeisRad,
    transverse: outSeisTan,
    azimuthRadial: azimuth % 360,
    azimuthTransverse: (azimuth + 90) % 360
  };
  return out;
}
function vectorMagnitude(seisA, seisB, seisC, orientCode) {
  if (seisA.segments.length !== seisB.segments.length || seisA.segments.length !== seisC.segments.length) {
    throw new Error(
      `Seismograms do not have same number of segments: ${seisA.segments.length}  !== ${seisB.segments.length}  !== ${seisC.segments.length}`
    );
  }
  const outData = [];
  for (let i = 0; i < seisA.segments.length; i++) {
    const result = vectorMagnitudeSegment(
      seisA.segments[i],
      seisB.segments[i],
      seisC.segments[i],
      orientCode
    );
    outData.push(result);
  }
  const outSeis = new Seismogram(outData);
  return outSeis;
}
function vectorMagnitudeSegment(seisA, seisB, seisC, orientCode) {
  if (seisA.y.length !== seisB.y.length || seisA.y.length !== seisC.y.length) {
    throw new Error(
      `seis should be of same length but was ${seisA.y.length} ${seisB.y.length} ${seisC.y.length}`
    );
  }
  if (seisA.sampleRate !== seisB.sampleRate || seisA.sampleRate !== seisC.sampleRate) {
    throw new Error(
      `Expect sampleRate to be same, but was ${seisA.sampleRate} ${seisB.sampleRate} ${seisC.sampleRate}`
    );
  }
  let y4;
  if (seisA.y instanceof Float64Array) {
    y4 = new Float64Array(seisA.y.length);
  } else {
    y4 = new Float32Array(seisA.y.length);
  }
  for (let i = 0; i < seisA.y.length; i++) {
    y4[i] = Math.sqrt(
      seisA.y[i] * seisA.y[i] + seisB.y[i] * seisB.y[i] + seisC.y[i] * seisC.y[i]
    );
  }
  const outSeis = seisA.cloneWithNewData(y4);
  if (!isDef(orientCode)) {
    orientCode = "M";
  }
  if (seisA.chanCode) {
    outSeis.channelCode = seisA.chanCode.slice(0, 2) + orientCode;
  }
  return outSeis;
}

// src/index.ts
var OregonDSP2 = __toESM(require_oregondsp(), 1);
var leaflet = __toESM(require_leaflet_src(), 1);
export {
  OregonDSP2 as OregonDSP,
  axisutil_exports as axisutil,
  components_exports as components,
  cssutil_exports as cssutil,
  d3_exports as d3,
  datalink_exports as datalink,
  dataset_exports as dataset,
  datechooser_exports as datechooser,
  displayorganize_exports as displayorganize,
  distaz_exports as distaz,
  fdsnavailability_exports as fdsnavailability,
  fdsncommon_exports as fdsncommon,
  fdsndatacenters_exports as fdsndatacenters,
  fdsndataselect_exports as fdsndataselect,
  fdsnevent_exports as fdsnevent,
  fdsnsourceid_exports as fdsnsourceid,
  fdsnstation_exports as fdsnstation,
  fft_exports as fft,
  filter_exports as filter,
  handlebarshelpers_exports as handlebarshelpers,
  helicorder_exports as helicorder,
  infotable_exports as infotable,
  leaflet,
  leafletutil_exports as leafletutil,
  luxon_exports as luxon,
  miniseed_exports as miniseed,
  mseed3_exports as mseed3,
  mseedarchive_exports as mseedarchive,
  oregondsputil_exports as oregondsputil,
  particlemotion_exports as particlemotion,
  quakeml_exports as quakeml,
  ringserverweb_exports as ringserverweb,
  sacpolezero_exports as sacPoleZero,
  scale_exports as scale,
  seedcodec_exports as seedcodec,
  seedlink_exports as seedlink,
  seedlink4_exports as seedlink4,
  seismogram_exports as seismogram,
  seismogramloader_exports as seismogramloader,
  seismogramsegment_exports as seismogramsegment,
  seismograph_exports as seismograph,
  seismographconfig_exports as seismographconfig,
  seismographconfigeditor_exports as seismographconfigeditor,
  sorting_exports as sorting,
  spectraplot_exports as spectraplot,
  stationxml_exports as stationxml,
  taper_exports as taper,
  transfer_exports as transfer,
  traveltime_exports as traveltime,
  util_exports as util,
  vector_exports as vector,
  version2 as version
};
/* @preserve
 * Leaflet 1.8.0, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
